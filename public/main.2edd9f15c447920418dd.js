(self.webpackChunkpp_labo_iv=self.webpackChunkpp_labo_iv||[]).push([[179],{8255:bt=>{function Be($){return Promise.resolve().then(()=>{var w=new Error("Cannot find module '"+$+"'");throw w.code="MODULE_NOT_FOUND",w})}Be.keys=()=>[],Be.resolve=Be,Be.id=8255,bt.exports=Be},8583:(bt,Be,$)=>{"use strict";$.d(Be,{mr:()=>st,ez:()=>Jo,K0:()=>Se,Do:()=>rt,V_:()=>J,Ye:()=>se,S$:()=>Te,sg:()=>Lr,O5:()=>Ni,b0:()=>Xe,lw:()=>de,EM:()=>Zr,JF:()=>Ki,PM:()=>eo,w_:()=>ce,bD:()=>bn,q:()=>ne,Mx:()=>qt,HT:()=>Ce});var w=$(3018);let U=null;function ne(){return U}function Ce(L){U||(U=L)}class ce{}const Se=new w.OlP("DocumentToken");let de=(()=>{class L{historyGo(F){throw new Error("Not implemented")}}return L.\u0275fac=function(F){return new(F||L)},L.\u0275prov=(0,w.Yz7)({factory:oe,token:L,providedIn:"platform"}),L})();function oe(){return(0,w.LFG)(Q)}const J=new w.OlP("Location Initialized");let Q=(()=>{class L extends de{constructor(F){super(),this._doc=F,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ne().getBaseHref(this._doc)}onPopState(F){const K=ne().getGlobalEventTarget(this._doc,"window");return K.addEventListener("popstate",F,!1),()=>K.removeEventListener("popstate",F)}onHashChange(F){const K=ne().getGlobalEventTarget(this._doc,"window");return K.addEventListener("hashchange",F,!1),()=>K.removeEventListener("hashchange",F)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(F){this.location.pathname=F}pushState(F,K,le){he()?this._history.pushState(F,K,le):this.location.hash=le}replaceState(F,K,le){he()?this._history.replaceState(F,K,le):this.location.hash=le}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}}return L.\u0275fac=function(F){return new(F||L)(w.LFG(Se))},L.\u0275prov=(0,w.Yz7)({factory:ye,token:L,providedIn:"platform"}),L})();function he(){return!!window.history.pushState}function ye(){return new Q((0,w.LFG)(Se))}function _e(L,z){if(0==L.length)return z;if(0==z.length)return L;let F=0;return L.endsWith("/")&&F++,z.startsWith("/")&&F++,2==F?L+z.substring(1):1==F?L+z:L+"/"+z}function We(L){const z=L.match(/#|\?|$/),F=z&&z.index||L.length;return L.slice(0,F-("/"===L[F-1]?1:0))+L.slice(F)}function Fe(L){return L&&"?"!==L[0]?"?"+L:L}let Te=(()=>{class L{historyGo(F){throw new Error("Not implemented")}}return L.\u0275fac=function(F){return new(F||L)},L.\u0275prov=(0,w.Yz7)({factory:ot,token:L,providedIn:"root"}),L})();function ot(L){const z=(0,w.LFG)(Se).location;return new Xe((0,w.LFG)(de),z&&z.origin||"")}const st=new w.OlP("appBaseHref");let Xe=(()=>{class L extends Te{constructor(F,K){if(super(),this._platformLocation=F,this._removeListenerFns=[],null==K&&(K=this._platformLocation.getBaseHrefFromDOM()),null==K)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=K}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return _e(this._baseHref,F)}path(F=!1){const K=this._platformLocation.pathname+Fe(this._platformLocation.search),le=this._platformLocation.hash;return le&&F?`${K}${le}`:K}pushState(F,K,le,Oe){const et=this.prepareExternalUrl(le+Fe(Oe));this._platformLocation.pushState(F,K,et)}replaceState(F,K,le,Oe){const et=this.prepareExternalUrl(le+Fe(Oe));this._platformLocation.replaceState(F,K,et)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(F=0){var K,le;null===(le=(K=this._platformLocation).historyGo)||void 0===le||le.call(K,F)}}return L.\u0275fac=function(F){return new(F||L)(w.LFG(de),w.LFG(st,8))},L.\u0275prov=w.Yz7({token:L,factory:L.\u0275fac}),L})(),rt=(()=>{class L extends Te{constructor(F,K){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=K&&(this._baseHref=K)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){let K=this._platformLocation.hash;return null==K&&(K="#"),K.length>0?K.substring(1):K}prepareExternalUrl(F){const K=_e(this._baseHref,F);return K.length>0?"#"+K:K}pushState(F,K,le,Oe){let et=this.prepareExternalUrl(le+Fe(Oe));0==et.length&&(et=this._platformLocation.pathname),this._platformLocation.pushState(F,K,et)}replaceState(F,K,le,Oe){let et=this.prepareExternalUrl(le+Fe(Oe));0==et.length&&(et=this._platformLocation.pathname),this._platformLocation.replaceState(F,K,et)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(F=0){var K,le;null===(le=(K=this._platformLocation).historyGo)||void 0===le||le.call(K,F)}}return L.\u0275fac=function(F){return new(F||L)(w.LFG(de),w.LFG(st,8))},L.\u0275prov=w.Yz7({token:L,factory:L.\u0275fac}),L})(),se=(()=>{class L{constructor(F,K){this._subject=new w.vpe,this._urlChangeListeners=[],this._platformStrategy=F;const le=this._platformStrategy.getBaseHref();this._platformLocation=K,this._baseHref=We(Yt(le)),this._platformStrategy.onPopState(Oe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Oe.state,type:Oe.type})})}path(F=!1){return this.normalize(this._platformStrategy.path(F))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(F,K=""){return this.path()==this.normalize(F+Fe(K))}normalize(F){return L.stripTrailingSlash(function(L,z){return L&&z.startsWith(L)?z.substring(L.length):z}(this._baseHref,Yt(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._platformStrategy.prepareExternalUrl(F)}go(F,K="",le=null){this._platformStrategy.pushState(le,"",F,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+Fe(K)),le)}replaceState(F,K="",le=null){this._platformStrategy.replaceState(le,"",F,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+Fe(K)),le)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(F=0){var K,le;null===(le=(K=this._platformStrategy).historyGo)||void 0===le||le.call(K,F)}onUrlChange(F){this._urlChangeListeners.push(F),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(K=>{this._notifyUrlChangeListeners(K.url,K.state)}))}_notifyUrlChangeListeners(F="",K){this._urlChangeListeners.forEach(le=>le(F,K))}subscribe(F,K,le){return this._subject.subscribe({next:F,error:K,complete:le})}}return L.\u0275fac=function(F){return new(F||L)(w.LFG(Te),w.LFG(de))},L.normalizeQueryParams=Fe,L.joinWithSlash=_e,L.stripTrailingSlash=We,L.\u0275prov=(0,w.Yz7)({factory:lt,token:L,providedIn:"root"}),L})();function lt(){return new se((0,w.LFG)(Te),(0,w.LFG)(de))}function Yt(L){return L.replace(/\/index.html$/,"")}var Le=(()=>((Le=Le||{})[Le.Zero=0]="Zero",Le[Le.One=1]="One",Le[Le.Two=2]="Two",Le[Le.Few=3]="Few",Le[Le.Many=4]="Many",Le[Le.Other=5]="Other",Le))();const Dn=w.kL8;class Kn{}let ji=(()=>{class L extends Kn{constructor(F){super(),this.locale=F}getPluralCategory(F,K){switch(Dn(K||this.locale)(F)){case Le.Zero:return"zero";case Le.One:return"one";case Le.Two:return"two";case Le.Few:return"few";case Le.Many:return"many";default:return"other"}}}return L.\u0275fac=function(F){return new(F||L)(w.LFG(w.soG))},L.\u0275prov=w.Yz7({token:L,factory:L.\u0275fac}),L})();function qt(L,z){z=encodeURIComponent(z);for(const F of L.split(";")){const K=F.indexOf("="),[le,Oe]=-1==K?[F,""]:[F.slice(0,K),F.slice(K+1)];if(le.trim()===z)return decodeURIComponent(Oe)}return null}class us{constructor(z,F,K,le){this.$implicit=z,this.ngForOf=F,this.index=K,this.count=le}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Lr=(()=>{class L{constructor(F,K,le){this._viewContainer=F,this._template=K,this._differs=le,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(F){this._ngForOf=F,this._ngForOfDirty=!0}set ngForTrackBy(F){this._trackByFn=F}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(F){F&&(this._template=F)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const F=this._ngForOf;if(!this._differ&&F)try{this._differ=this._differs.find(F).create(this.ngForTrackBy)}catch(K){throw new Error(`Cannot find a differ supporting object '${F}' of type '${function(L){return L.name||typeof L}(F)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const F=this._differ.diff(this._ngForOf);F&&this._applyChanges(F)}}_applyChanges(F){const K=[];F.forEachOperation((le,Oe,et)=>{if(null==le.previousIndex){const P=this._viewContainer.createEmbeddedView(this._template,new us(null,this._ngForOf,-1,-1),null===et?void 0:et),x=new Rr(le,P);K.push(x)}else if(null==et)this._viewContainer.remove(null===Oe?void 0:Oe);else if(null!==Oe){const P=this._viewContainer.get(Oe);this._viewContainer.move(P,et);const x=new Rr(le,P);K.push(x)}});for(let le=0;le<K.length;le++)this._perViewChange(K[le].view,K[le].record);for(let le=0,Oe=this._viewContainer.length;le<Oe;le++){const et=this._viewContainer.get(le);et.context.index=le,et.context.count=Oe,et.context.ngForOf=this._ngForOf}F.forEachIdentityChange(le=>{this._viewContainer.get(le.currentIndex).context.$implicit=le.item})}_perViewChange(F,K){F.context.$implicit=K.item}static ngTemplateContextGuard(F,K){return!0}}return L.\u0275fac=function(F){return new(F||L)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))},L.\u0275dir=w.lG2({type:L,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),L})();class Rr{constructor(z,F){this.record=z,this.view=F}}let Ni=(()=>{class L{constructor(F,K){this._viewContainer=F,this._context=new Vr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=K}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){Rn("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){Rn("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,K){return!0}}return L.\u0275fac=function(F){return new(F||L)(w.Y36(w.s_b),w.Y36(w.Rgc))},L.\u0275dir=w.lG2({type:L,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),L})();class Vr{constructor(){this.$implicit=null,this.ngIf=null}}function Rn(L,z){if(z&&!z.createEmbeddedView)throw new Error(`${L} must be a TemplateRef, but received '${(0,w.AaK)(z)}'.`)}let Jo=(()=>{class L{}return L.\u0275fac=function(F){return new(F||L)},L.\u0275mod=w.oAB({type:L}),L.\u0275inj=w.cJS({providers:[{provide:Kn,useClass:ji}]}),L})();const bn="browser";function eo(L){return"server"===L}let Zr=(()=>{class L{}return L.\u0275prov=(0,w.Yz7)({token:L,providedIn:"root",factory:()=>new Ls((0,w.LFG)(Se),window)}),L})();class Ls{constructor(z,F){this.document=z,this.window=F,this.offset=()=>[0,0]}setOffset(z){this.offset=Array.isArray(z)?()=>z:z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(z){this.supportsScrolling()&&this.window.scrollTo(z[0],z[1])}scrollToAnchor(z){if(!this.supportsScrolling())return;const F=function(L,z){const F=L.getElementById(z)||L.getElementsByName(z)[0];if(F)return F;if("function"==typeof L.createTreeWalker&&L.body&&(L.body.createShadowRoot||L.body.attachShadow)){const K=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let le=K.currentNode;for(;le;){const Oe=le.shadowRoot;if(Oe){const et=Oe.getElementById(z)||Oe.querySelector(`[name="${z}"]`);if(et)return et}le=K.nextNode()}}return null}(this.document,z);F&&(this.scrollToElement(F),this.attemptFocus(F))}setHistoryScrollRestoration(z){if(this.supportScrollRestoration()){const F=this.window.history;F&&F.scrollRestoration&&(F.scrollRestoration=z)}}scrollToElement(z){const F=z.getBoundingClientRect(),K=F.left+this.window.pageXOffset,le=F.top+this.window.pageYOffset,Oe=this.offset();this.window.scrollTo(K-Oe[0],le-Oe[1])}attemptFocus(z){return z.focus(),this.document.activeElement===z}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const z=si(this.window.history)||si(Object.getPrototypeOf(this.window.history));return!(!z||!z.writable&&!z.set)}catch(z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(z){return!1}}}function si(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class Ki{}},3018:(bt,Be,$)=>{"use strict";$.d(Be,{deG:()=>Or,tb:()=>rb,AFp:()=>eb,ip1:()=>Jv,CZH:()=>Ff,hGG:()=>GA,z2F:()=>Xg,sBO:()=>RI,Sil:()=>Jg,_Vd:()=>Sf,EJc:()=>sb,SBq:()=>Ml,qLn:()=>$e,vpe:()=>Ol,gxx:()=>Gc,tBr:()=>sl,XFs:()=>Je,OlP:()=>zn,zs3:()=>ri,ZZ4:()=>zy,aQg:()=>qy,soG:()=>i_,YKP:()=>Z0,v3s:()=>CA,h0i:()=>lh,PXZ:()=>yA,R0b:()=>Wa,FiY:()=>ho,Lbi:()=>nb,g9A:()=>tb,Qsj:()=>pI,FYo:()=>Wy,JOm:()=>Fa,Tiy:()=>Dv,q3G:()=>Dr,tp0:()=>Na,EAV:()=>AA,Rgc:()=>Bg,dDg:()=>lb,DyG:()=>ou,q4F:()=>Tv,GfV:()=>$0,s_b:()=>Yy,ifc:()=>Xn,eFA:()=>pb,G48:()=>cA,Gpc:()=>Fe,X6Q:()=>sE,_c5:()=>LA,VLi:()=>lA,c2e:()=>ib,zSh:()=>nc,wAp:()=>rn,vHH:()=>Xe,EiD:()=>bd,mCW:()=>ua,qzn:()=>Pr,JVY:()=>es,pB0:()=>Ro,eBb:()=>Cc,L6k:()=>ni,LAX:()=>zf,cg1:()=>mv,Tjo:()=>kA,kL8:()=>c0,yhl:()=>Vu,dqk:()=>ue,sIi:()=>zc,CqO:()=>sh,QGY:()=>Dg,F4k:()=>Dy,RDi:()=>F,AaK:()=>ye,z3N:()=>So,qOj:()=>lf,TTD:()=>ls,_Bn:()=>L0,xp6:()=>Oh,uIk:()=>ay,ekj:()=>Df,Suo:()=>Nw,Xpm:()=>_s,lG2:()=>Ui,Yz7:()=>ln,cJS:()=>wr,oAB:()=>Ei,Yjl:()=>wi,Y36:()=>ih,_UZ:()=>wy,qZA:()=>Ig,TgZ:()=>Cg,EpF:()=>Iy,n5z:()=>Cn,Ikx:()=>gv,LFG:()=>Gr,$8M:()=>Dt,NdJ:()=>vf,CRH:()=>Mw,kcU:()=>Mu,O4$:()=>Ss,oxw:()=>Sg,Q6J:()=>wg,s9C:()=>bf,MGl:()=>Eu,hYB:()=>Mo,iGM:()=>xw,MAs:()=>dg,CHM:()=>ya,LSH:()=>Hl,kYT:()=>dr,YNc:()=>cg,W1O:()=>Fw,_uU:()=>_t,Oqu:()=>Bt,hij:()=>dn});var w=$(9765),U=$(5319),ne=$(8891),Re=$(6682),Ce=$(2441);var de=$(1307);function oe(){return new w.xQ}function Q(r){for(let i in r)if(r[i]===Q)return i;throw Error("Could not find renamed property on target object.")}function he(r,i){for(const s in i)i.hasOwnProperty(s)&&!r.hasOwnProperty(s)&&(r[s]=i[s])}function ye(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ye).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function _e(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const We=Q({__forward_ref__:Q});function Fe(r){return r.__forward_ref__=Fe,r.toString=function(){return ye(this())},r}function Te(r){return ot(r)?r():r}function ot(r){return"function"==typeof r&&r.hasOwnProperty(We)&&r.__forward_ref__===Fe}class Xe extends Error{constructor(i,s){super(function(r,i){return`${r?`NG0${r}: `:""}${i}`}(i,s)),this.code=i}}function lt(r){return"string"==typeof r?r:null==r?"":String(r)}function Wt(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():lt(r)}function Le(r,i){const s=i?` in ${i}`:"";throw new Xe("201",`No provider for ${Wt(r)} found${s}`)}function wt(r,i){null==r&&function(r,i,s,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${s} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function ln(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function wr(r){return{providers:r.providers||[],imports:r.imports||[]}}function Dn(r){return Tn(r,Pt)||Tn(r,Ar)}function Tn(r,i){return r.hasOwnProperty(i)?r[i]:null}function jn(r){return r&&(r.hasOwnProperty(Sn)||r.hasOwnProperty(jt))?r[Sn]:null}const Pt=Q({\u0275prov:Q}),Sn=Q({\u0275inj:Q}),Ar=Q({ngInjectableDef:Q}),jt=Q({ngInjectorDef:Q});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let In;function Mn(r){const i=In;return In=r,i}function En(r,i,s){const u=Dn(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:s&Je.Optional?null:void 0!==i?i:void Le(ye(r),"Injector")}function Tt(r){return{toString:r}.toString()}var $n=(()=>(($n=$n||{})[$n.OnPush=0]="OnPush",$n[$n.Default=1]="Default",$n))(),Xn=(()=>((Xn=Xn||{})[Xn.Emulated=0]="Emulated",Xn[Xn.None=2]="None",Xn[Xn.ShadowDom=3]="ShadowDom",Xn))();const Fr="undefined"!=typeof globalThis&&globalThis,Ut="undefined"!=typeof window&&window,pe="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ue=Fr||"undefined"!=typeof global&&global||Ut||pe,Ct={},vt=[],sn=Q({\u0275cmp:Q}),Ln=Q({\u0275dir:Q}),tn=Q({\u0275pipe:Q}),cr=Q({\u0275mod:Q}),pn=Q({\u0275loc:Q}),Jt=Q({\u0275fac:Q}),Vn=Q({__NG_ELEMENT_ID__:Q});let ks=0;function _s(r){return Tt(()=>{const s={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===$n.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||vt,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Xn.Emulated,id:"c",styles:r.styles||vt,_:null,setInput:null,schemas:r.schemas||null,tView:null},c=r.directives,d=r.features,m=r.pipes;return u.id+=ks++,u.inputs=hr(r.inputs,s),u.outputs=hr(r.outputs),d&&d.forEach(_=>_(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(ss):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(os):null,u})}function ss(r){return Mt(r)||function(r){return r[Ln]||null}(r)}function os(r){return function(r){return r[tn]||null}(r)}const Es={};function Ei(r){return Tt(()=>{const i={type:r.type,bootstrap:r.bootstrap||vt,declarations:r.declarations||vt,imports:r.imports||vt,exports:r.exports||vt,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(Es[r.id]=r.type),i})}function dr(r,i){return Tt(()=>{const s=Qn(r,!0);s.declarations=i.declarations||vt,s.imports=i.imports||vt,s.exports=i.exports||vt})}function hr(r,i){if(null==r)return Ct;const s={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),s[c]=u,i&&(i[c]=d)}return s}const Ui=_s;function wi(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Mt(r){return r[sn]||null}function Qn(r,i){const s=r[cr]||null;if(!s&&!0===i)throw new Error(`Type ${ye(r)} does not have '\u0275mod' property.`);return s}function zr(r){return Array.isArray(r)&&"object"==typeof r[1]}function wn(r){return Array.isArray(r)&&!0===r[1]}function qr(r){return 0!=(8&r.flags)}function Gi(r){return 2==(2&r.flags)}function fr(r){return 1==(1&r.flags)}function pr(r){return null!==r.template}function Wi(r){return 0!=(512&r[2])}function ii(r,i){return r.hasOwnProperty(Jt)?r[Jt]:null}class Ts{constructor(i,s,u){this.previousValue=i,this.currentValue=s,this.firstChange=u}isFirstChange(){return this.firstChange}}function ls(){return eo}function eo(r){return r.type.prototype.ngOnChanges&&(r.setInput=to),Nr}function Nr(){const r=Zr(this),i=null==r?void 0:r.current;if(i){const s=r.previous;if(s===Ct)r.previous=i;else for(let u in i)s[u]=i[u];r.current=null,this.ngOnChanges(i)}}function to(r,i,s,u){const c=Zr(r)||function(r,i){return r[Ci]=i}(r,{previous:Ct,current:null}),d=c.current||(c.current={}),m=c.previous,_=this.declaredInputs[s],D=m[_];d[_]=new Ts(D&&D.currentValue,i,m===Ct),r[u]=i}ls.ngInherit=!0;const Ci="__ngSimpleChanges__";function Zr(r){return r[Ci]||null}const Ki="http://www.w3.org/2000/svg";let z;function F(r){z=r}function Oe(r){return!!r.listen}const P={createRenderer:(r,i)=>void 0!==z?z:"undefined"!=typeof document?document:void 0};function A(r){for(;Array.isArray(r);)r=r[0];return r}function it(r,i){return A(i[r])}function At(r,i){return A(i[r.index])}function Yr(r,i){return r.data[i]}function Nn(r,i){const s=i[r];return zr(s)?s:s[0]}function ai(r){return 4==(4&r[2])}function Zi(r){return 128==(128&r[2])}function Mr(r,i){return null==i?null:r[i]}function mo(r){r[18]=0}function yo(r,i){r[5]+=i;let s=r,u=r[3];for(;null!==u&&(1===i&&1===s[5]||-1===i&&0===s[5]);)u[5]+=i,s=u,u=u[3]}const Kt={lFrame:hs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qa(){return Kt.bindingsEnabled}function Ze(){return Kt.lFrame.lView}function Xt(){return Kt.lFrame.tView}function ya(r){return Kt.lFrame.contextLView=r,r[8]}function Gn(){let r=_a();for(;null!==r&&64===r.type;)r=r.parent;return r}function _a(){return Kt.lFrame.currentTNode}function Yi(r,i){const s=Kt.lFrame;s.currentTNode=r,s.isParent=i}function Za(){return Kt.lFrame.isParent}function Ii(){return Kt.isInCheckNoChangesMode}function ro(r){Kt.isInCheckNoChangesMode=r}function Wn(){return Kt.lFrame.bindingIndex++}function tr(r){const i=Kt.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,s}function va(r,i){const s=Kt.lFrame;s.bindingIndex=s.bindingRootIndex=r,ea(i)}function ea(r){Kt.lFrame.currentDirectiveIndex=r}function io(){return Kt.lFrame.currentQueryIndex}function _o(r){Kt.lFrame.currentQueryIndex=r}function Qa(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function ds(r,i,s){if(s&Je.SkipSelf){let c=i,d=r;for(;!(c=c.parent,null!==c||s&Je.Host||(c=Qa(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;i=c,r=d}const u=Kt.lFrame=xu();return u.currentTNode=i,u.lView=r,!0}function ta(r){const i=xu(),s=r[1];Kt.lFrame=i,i.currentTNode=s.firstChild,i.lView=r,i.tView=s,i.contextLView=r,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function xu(){const r=Kt.lFrame,i=null===r?null:r.child;return null===i?hs(r):i}function hs(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function ki(){const r=Kt.lFrame;return Kt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const wa=ki;function ba(){const r=ki();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function jr(){return Kt.lFrame.selectedIndex}function As(r){Kt.lFrame.selectedIndex=r}function nr(){const r=Kt.lFrame;return Yr(r.tView,r.selectedIndex)}function Ss(){Kt.lFrame.currentNamespace=Ki}function Mu(){Kt.lFrame.currentNamespace=null}function Vs(r,i){for(let s=i.directiveStart,u=i.directiveEnd;s<u;s++){const d=r.data[s].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:_,ngAfterViewInit:D,ngAfterViewChecked:M,ngOnDestroy:j}=d;m&&(r.contentHooks||(r.contentHooks=[])).push(-s,m),_&&((r.contentHooks||(r.contentHooks=[])).push(s,_),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(s,_)),D&&(r.viewHooks||(r.viewHooks=[])).push(-s,D),M&&((r.viewHooks||(r.viewHooks=[])).push(s,M),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(s,M)),null!=j&&(r.destroyHooks||(r.destroyHooks=[])).push(s,j)}}function Rs(r,i,s){Us(r,i,3,s)}function na(r,i,s,u){(3&r[2])===s&&Us(r,i,s,u)}function Bo(r,i){let s=r[2];(3&s)===i&&(s&=2047,s+=1,r[2]=s)}function Us(r,i,s,u){const d=null!=u?u:-1,m=i.length-1;let _=0;for(let D=void 0!==u?65535&r[18]:0;D<m;D++)if("number"==typeof i[D+1]){if(_=i[D],null!=u&&_>=u)break}else i[D]<0&&(r[18]+=65536),(_<d||-1==d)&&(gi(r,s,i,D),r[18]=(4294901760&r[18])+D+2),D++}function gi(r,i,s,u){const c=s[u]<0,d=s[u+1],_=r[c?-s[u]:s[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{d.call(_)}finally{}}}else try{d.call(_)}finally{}}class lr{constructor(i,s,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=u}}function rr(r,i,s){const u=Oe(r);let c=0;for(;c<s.length;){const d=s[c];if("number"==typeof d){if(0!==d)break;c++;const m=s[c++],_=s[c++],D=s[c++];u?r.setAttribute(i,_,D,m):i.setAttributeNS(m,_,D)}else{const m=d,_=s[++c];bo(m)?u&&r.setProperty(i,m,_):u?r.setAttribute(i,m,_):i.setAttribute(m,_),c++}}return c}function tu(r){return 3===r||4===r||6===r}function bo(r){return 64===r.charCodeAt(0)}function Co(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let s=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?s=c:0===s||Ia(r,s,c,null,-1===s||2===s?i[++u]:null)}}return r}function Ia(r,i,s,u,c){let d=0,m=r.length;if(-1===i)m=-1;else for(;d<r.length;){const _=r[d++];if("number"==typeof _){if(_===i){m=-1;break}if(_>i){m=d-1;break}}}for(;d<r.length;){const _=r[d];if("number"==typeof _)break;if(_===s){if(null===u)return void(null!==c&&(r[d+1]=c));if(u===r[d+1])return void(r[d+2]=c)}d++,null!==u&&d++,null!==c&&d++}-1!==m&&(r.splice(m,0,i),d=m+1),r.splice(d++,0,s),null!==u&&r.splice(d++,0,u),null!==c&&r.splice(d++,0,c)}function xs(r){return-1!==r}function ao(r){return 32767&r}function Qi(r,i){let s=function(r){return r>>16}(r),u=i;for(;s>0;)u=u[15],s--;return u}let Ji=!0;function uo(r){const i=Ji;return Ji=r,i}let Io=0;function St(r,i){const s=Do(r,i);if(-1!==s)return s;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,Gt(u.data,r),Gt(i,null),Gt(u.blueprint,null));const c=mt(r,i),d=r.injectorIndex;if(xs(c)){const m=ao(c),_=Qi(c,i),D=_[1].data;for(let M=0;M<8;M++)i[d+M]=_[m+M]|D[m+M]}return i[d+8]=c,d}function Gt(r,i){r.push(0,0,0,0,0,0,0,0,i)}function Do(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function mt(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let s=0,u=null,c=i;for(;null!==c;){const d=c[1],m=d.type;if(u=2===m?d.declTNode:1===m?c[6]:null,null===u)return-1;if(s++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|s<<16}return-1}function je(r,i,s){!function(r,i,s){let u;"string"==typeof s?u=s.charCodeAt(0)||0:s.hasOwnProperty(Vn)&&(u=s[Vn]),null==u&&(u=s[Vn]=Io++);const c=255&u;i.data[r+(c>>5)]|=1<<c}(r,i,s)}function Jr(r,i,s){if(s&Je.Optional)return r;Le(i,"NodeInjector")}function jo(r,i,s,u){if(s&Je.Optional&&void 0===u&&(u=null),0==(s&(Je.Self|Je.Host))){const c=r[9],d=Mn(void 0);try{return c?c.get(i,u,s&Je.Optional):En(i,u,s&Je.Optional)}finally{Mn(d)}}return Jr(u,i,s)}function R(r,i,s,u=Je.Default,c){if(null!==r){const d=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Vn)?r[Vn]:void 0;return"number"==typeof i?i>=0?255&i:E:i}(s);if("function"==typeof d){if(!ds(i,r,u))return u&Je.Host?Jr(c,s,u):jo(i,s,u,c);try{const m=d(u);if(null!=m||u&Je.Optional)return m;Le(s)}finally{wa()}}else if("number"==typeof d){let m=null,_=Do(r,i),D=-1,M=u&Je.Host?i[16][6]:null;for((-1===_||u&Je.SkipSelf)&&(D=-1===_?mt(r,i):i[_+8],-1!==D&&ke(u,!1)?(m=i[1],_=ao(D),i=Qi(D,i)):_=-1);-1!==_;){const j=i[1];if(me(d,_,j.data)){const Z=O(_,i,s,m,u,M);if(Z!==b)return Z}D=i[_+8],-1!==D&&ke(u,i[1].data[_+8]===M)&&me(d,_,i)?(m=j,_=ao(D),i=Qi(D,i)):_=-1}}}return jo(i,s,u,c)}const b={};function E(){return new gt(Gn(),Ze())}function O(r,i,s,u,c,d){const m=i[1],_=m.data[r+8],j=V(_,m,s,null==u?Gi(_)&&Ji:u!=m&&0!=(3&_.type),c&Je.Host&&d===_);return null!==j?q(i,m,j,_):b}function V(r,i,s,u,c){const d=r.providerIndexes,m=i.data,_=1048575&d,D=r.directiveStart,j=d>>20,ee=c?_+j:r.directiveEnd;for(let ae=u?_:_+j;ae<ee;ae++){const Ee=m[ae];if(ae<D&&s===Ee||ae>=D&&Ee.type===s)return ae}if(c){const ae=m[D];if(ae&&pr(ae)&&ae.type===s)return D}return null}function q(r,i,s,u){let c=r[s];const d=i.data;if(function(r){return r instanceof lr}(c)){const m=c;m.resolving&&function(r,i){throw new Xe("200",`Circular dependency in DI detected for ${r}`)}(Wt(d[s]));const _=uo(m.canSeeViewProviders);m.resolving=!0;const D=m.injectImpl?Mn(m.injectImpl):null;ds(r,u,Je.Default);try{c=r[s]=m.factory(void 0,d,r,u),i.firstCreatePass&&s>=u.directiveStart&&function(r,i,s){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:d}=i.type.prototype;if(u){const m=eo(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(r,m),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(r,m)}c&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-r,c),d&&((s.preOrderHooks||(s.preOrderHooks=[])).push(r,d),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(r,d))}(s,d[s],i)}finally{null!==D&&Mn(D),uo(_),m.resolving=!1,wa()}}return c}function me(r,i,s){return!!(s[i+(r>>5)]&1<<r)}function ke(r,i){return!(r&Je.Self||r&Je.Host&&i)}class gt{constructor(i,s){this._tNode=i,this._lView=s}get(i,s){return R(this._tNode,this._lView,i,void 0,s)}}function Cn(r){return Tt(()=>{const i=r.prototype.constructor,s=i[Jt]||It(i),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const d=c[Jt]||It(c);if(d&&d!==s)return d;c=Object.getPrototypeOf(c)}return d=>new d})}function It(r){return ot(r)?()=>{const i=It(Te(r));return i&&i()}:ii(r)}function Dt(r){return function(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const s=r.attrs;if(s){const u=s.length;let c=0;for(;c<u;){const d=s[c];if(tu(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<u&&"string"==typeof s[c];)c++;else{if(d===i)return s[c+1];c+=2}}}return null}(Gn(),r)}const $r="__parameters__";function mr(r,i,s){return Tt(()=>{const u=function(r){return function(...s){if(r){const u=r(...s);for(const c in u)this[c]=u[c]}}}(i);function c(...d){if(this instanceof c)return u.apply(this,d),this;const m=new c(...d);return _.annotation=m,_;function _(D,M,j){const Z=D.hasOwnProperty($r)?D[$r]:Object.defineProperty(D,$r,{value:[]})[$r];for(;Z.length<=j;)Z.push(null);return(Z[j]=Z[j]||[]).push(m),D}}return s&&(c.prototype=Object.create(s.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class zn{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=ln({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Or=new zn("AnalyzeForEntryComponents"),ou=Function;function H(r,i){void 0===i&&(i=r);for(let s=0;s<r.length;s++){let u=r[s];Array.isArray(u)?(i===r&&(i=r.slice(0,s)),H(u,i)):i!==r&&i.push(u)}return i}function te(r,i){r.forEach(s=>Array.isArray(s)?te(s,i):i(s))}function De(r,i,s){i>=r.length?r.push(s):r.splice(i,0,s)}function Ve(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function vn(r,i,s){let u=ti(r,i);return u>=0?r[1|u]=s:(u=~u,function(r,i,s,u){let c=r.length;if(c==i)r.push(s,u);else if(1===c)r.push(u,r[0]),r[0]=s;else{for(c--,r.push(r[c-1],r[c]);c>i;)r[c]=r[c-2],c--;r[i]=s,r[i+1]=u}}(r,u,i,s)),u}function ui(r,i){const s=ti(r,i);if(s>=0)return r[1|s]}function ti(r,i){return function(r,i,s){let u=0,c=r.length>>s;for(;c!==u;){const d=u+(c-u>>1),m=r[d<<s];if(i===m)return d<<s;m>i?c=d:u=d+1}return~(c<<s)}(r,i,1)}const ra={},uu="__NG_DI_FLAG__",lu="ngTempTokenPath",yc=/\n/gm,rl="__source",ku=Q({provide:String,useValue:Q});let Aa;function Sa(r){const i=Aa;return Aa=r,i}function sd(r,i=Je.Default){if(void 0===Aa)throw new Error("inject() must be called from an injection context");return null===Aa?En(r,void 0,i):Aa.get(r,i&Je.Optional?null:void 0,i)}function Gr(r,i=Je.Default){return(In||sd)(Te(r),i)}function cu(r){const i=[];for(let s=0;s<r.length;s++){const u=Te(r[s]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let c,d=Je.Default;for(let m=0;m<u.length;m++){const _=u[m],D=_c(_);"number"==typeof D?-1===D?c=_.token:d|=D:c=_}i.push(Gr(c,d))}else i.push(Gr(u))}return i}function xa(r,i){return r[uu]=i,r.prototype[uu]=i,r}function _c(r){return r[uu]}function vc(r,i,s,u){const c=r[lu];throw i[rl]&&c.unshift(i[rl]),r.message=function(r,i,s,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let c=ye(i);if(Array.isArray(i))c=i.map(ye).join(" -> ");else if("object"==typeof i){let d=[];for(let m in i)if(i.hasOwnProperty(m)){let _=i[m];d.push(m+":"+("string"==typeof _?JSON.stringify(_):ye(_)))}c=`{${d.join(", ")}}`}return`${s}${u?"("+u+")":""}[${c}]: ${r.replace(yc,"\n  ")}`}("\n"+r.message,c,s,u),r.ngTokenPath=c,r[lu]=null,r}const sl=xa(mr("Inject",r=>({token:r})),-1),ho=xa(mr("Optional"),8),Na=xa(mr("SkipSelf"),4);let Ma;function sa(r){var i;return(null===(i=function(){if(void 0===Ma&&(Ma=null,ue.trustedTypes))try{Ma=ue.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return Ma}())||void 0===i?void 0:i.createHTML(r))||r}class qo{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class fd extends qo{getTypeName(){return"HTML"}}class om extends qo{getTypeName(){return"Style"}}class vr extends qo{getTypeName(){return"Script"}}class kn extends qo{getTypeName(){return"URL"}}class mh extends qo{getTypeName(){return"ResourceURL"}}function So(r){return r instanceof qo?r.changingThisBreaksApplicationSecurity:r}function Pr(r,i){const s=Vu(r);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===i}function Vu(r){return r instanceof qo&&r.getTypeName()||null}function es(r){return new fd(r)}function ni(r){return new om(r)}function Cc(r){return new vr(r)}function zf(r){return new kn(r)}function Ro(r){return new mh(r)}class pd{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const s=(new window.DOMParser).parseFromString(sa(i),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(i):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class qf{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const u=this.inertDocument.createElement("body");s.appendChild(u)}}getInertBodyElement(i){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=sa(i),s;const u=this.inertDocument.createElement("body");return u.innerHTML=sa(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const s=i.attributes;for(let c=s.length-1;0<c;c--){const m=s.item(c).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&i.removeAttribute(m)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Kf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,_h=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ua(r){return(r=String(r)).match(Kf)||r.match(_h)?r:"unsafe:"+r}function js(r){const i={};for(const s of r.split(","))i[s]=!0;return i}function la(...r){const i={};for(const s of r)for(const u in s)s.hasOwnProperty(u)&&(i[u]=!0);return i}const jl=js("area,br,col,hr,img,wbr"),gd=js("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),md=js("rp,rt"),_d=la(jl,la(gd,js("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),la(md,js("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),la(md,gd)),Dc=js("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),vd=js("srcset"),vh=la(Dc,vd,js("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),js("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),li=js("script,style,template");class Ed{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let s=i.firstChild,u=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?u=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,u&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let c=this.checkClobberedElement(s,s.nextSibling);if(c){s=c;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(i){const s=i.nodeName.toLowerCase();if(!_d.hasOwnProperty(s))return this.sanitizedSomething=!0,!li.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const u=i.attributes;for(let c=0;c<u.length;c++){const d=u.item(c),m=d.name,_=m.toLowerCase();if(!vh.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let D=d.value;Dc[_]&&(D=ua(D)),vd[_]&&(r=D,D=(r=String(r)).split(",").map(i=>ua(i.trim())).join(", ")),this.buf.push(" ",m,'="',Ko(D),'"')}var r;return this.buf.push(">"),!0}endElement(i){const s=i.nodeName.toLowerCase();_d.hasOwnProperty(s)&&!jl.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(i){this.buf.push(Ko(i))}checkClobberedElement(i,s){if(s&&(i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return s}}const wd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$l=/([^\#-~ |!])/g;function Ko(r){return r.replace(/&/g,"&amp;").replace(wd,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace($l,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cl;function bd(r,i){let s=null;try{cl=cl||function(r){const i=new qf(r);return function(){try{return!!(new window.DOMParser).parseFromString(sa(""),"text/html")}catch(r){return!1}}()?new pd(i):i}(r);let u=i?String(i):"";s=cl.getInertBodyElement(u);let c=5,d=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=d,d=s.innerHTML,s=cl.getInertBodyElement(u)}while(u!==d);return sa((new Ed).sanitizeChildren(du(s)||s))}finally{if(s){const u=du(s)||s;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function du(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Dr=(()=>((Dr=Dr||{})[Dr.NONE=0]="NONE",Dr[Dr.HTML=1]="HTML",Dr[Dr.STYLE=2]="STYLE",Dr[Dr.SCRIPT=3]="SCRIPT",Dr[Dr.URL=4]="URL",Dr[Dr.RESOURCE_URL=5]="RESOURCE_URL",Dr))();function Hl(r){const i=function(){const r=Ze();return r&&r[12]}();return i?i.sanitize(Dr.URL,r)||"":Pr(r,"URL")?So(r):ua(lt(r))}const Uu="__ngContext__";function ci(r,i){r[Uu]=i}function ps(r){const i=function(r){return r[Uu]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function B(r){return r.ngOriginalError}function we(r,...i){r.error(...i)}class $e{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i),u=this._findContext(i),c=(r=i)&&r.ngErrorLogger||we;var r;c(this._console,"ERROR",i),s&&c(this._console,"ORIGINAL ERROR",s),u&&c(this._console,"ERROR CONTEXT",u)}_findContext(i){return i?i.ngDebugContext||this._findContext(B(i)):null}_findOriginalError(i){let s=i&&B(i);for(;s&&B(s);)s=B(s);return s||null}}const ka=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ue))();function $s(r){return r instanceof Function?r():r}var Fa=(()=>((Fa=Fa||{})[Fa.Important=1]="Important",Fa[Fa.DashCase=2]="DashCase",Fa))();function Th(r,i){return undefined(r,i)}function fu(r){const i=r[3];return wn(i)?i[3]:i}function Nd(r){return np(r[13])}function tp(r){return np(r[4])}function np(r){for(;null!==r&&!wn(r);)r=r[4];return r}function Pc(r,i,s,u,c){if(null!=u){let d,m=!1;wn(u)?d=u:zr(u)&&(m=!0,u=u[0]);const _=A(u);0===r&&null!==s?null==c?sp(i,s,_):$u(i,s,_,c||null,!0):1===r&&null!==s?$u(i,s,_,c||null,!0):2===r?function(r,i,s){const u=xh(r,i);u&&function(r,i,s,u){Oe(r)?r.removeChild(i,s,u):i.removeChild(s)}(r,u,i,s)}(i,_,m):3===r&&i.destroyNode(_),null!=d&&function(r,i,s,u,c){const d=s[7];d!==A(s)&&Pc(i,r,u,d,c);for(let _=10;_<s.length;_++){const D=s[_];Zl(D[1],D,r,i,u,d)}}(i,r,d,s,c)}}function Ah(r,i,s){return Oe(r)?r.createElement(i,s):null===s?r.createElement(i):r.createElementNS(s,i)}function ql(r,i){const s=r[9],u=s.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,yo(c,-1)),s.splice(u,1)}function Rh(r,i){if(r.length<=10)return;const s=10+i,u=r[s];if(u){const c=u[17];null!==c&&c!==r&&ql(c,u),i>0&&(r[s-1][4]=u[4]);const d=Ve(r,10+i);!function(r,i){Zl(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const m=d[19];null!==m&&m.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function ml(r,i){if(!(256&i[2])){const s=i[11];Oe(s)&&s.destroyNode&&Zl(r,i,s,3,null,null),function(r){let i=r[13];if(!i)return ip(r[1],r);for(;i;){let s=null;if(zr(i))s=i[13];else{const u=i[10];u&&(s=u)}if(!s){for(;i&&!i[4]&&i!==r;)zr(i)&&ip(i[1],i),i=i[3];null===i&&(i=r),zr(i)&&ip(i[1],i),s=i&&i[4]}i=s}}(i)}}function ip(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(r,i){let s;if(null!=r&&null!=(s=r.destroyHooks))for(let u=0;u<s.length;u+=2){const c=i[s[u]];if(!(c instanceof lr)){const d=s[u+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const _=c[d[m]],D=d[m+1];try{D.call(_)}finally{}}else try{d.call(c)}finally{}}}}(r,i),function(r,i){const s=r.cleanup,u=i[7];let c=-1;if(null!==s)for(let d=0;d<s.length-1;d+=2)if("string"==typeof s[d]){const m=s[d+1],_="function"==typeof m?m(i):A(i[m]),D=u[c=s[d+2]],M=s[d+3];"boolean"==typeof M?_.removeEventListener(s[d],D,M):M>=0?u[c=M]():u[c=-M].unsubscribe(),d+=2}else{const m=u[c=s[d+1]];s[d].call(m)}if(null!==u){for(let d=c+1;d<u.length;d++)u[d]();i[7]=null}}(r,i),1===i[1].type&&Oe(i[11])&&i[11].destroy();const s=i[17];if(null!==s&&wn(i[3])){s!==i[3]&&ql(s,i);const u=i[19];null!==u&&u.detachView(r)}}}function ju(r,i,s){return function(r,i,s){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return s[0];if(2&u.flags){const c=r.data[u.directiveStart].encapsulation;if(c===Xn.None||c===Xn.Emulated)return null}return At(u,s)}(r,i.parent,s)}function $u(r,i,s,u,c){Oe(r)?r.insertBefore(i,s,u,c):i.insertBefore(s,u,c)}function sp(r,i,s){Oe(r)?r.appendChild(i,s):i.appendChild(s)}function pm(r,i,s,u,c){null!==u?$u(r,i,s,u,c):sp(r,i,s)}function xh(r,i){return Oe(r)?r.parentNode(i):i.parentNode}let op=function(r,i,s){return 40&r.type?At(r,s):null};function Pd(r,i,s,u){const c=ju(r,u,i),d=i[11],_=function(r,i,s){return op(r,i,s)}(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(s))for(let D=0;D<s.length;D++)pm(d,c,s[D],_,!1);else pm(d,c,s,_,!1)}function La(r,i){if(null!==i){const s=i.type;if(3&s)return At(i,r);if(4&s)return up(-1,r[i.index]);if(8&s){const u=i.child;if(null!==u)return La(r,u);{const c=r[i.index];return wn(c)?up(-1,c):A(c)}}if(32&s)return Th(i,r)()||A(r[i.index]);{const u=kd(r,i);return null!==u?Array.isArray(u)?u[0]:La(fu(r[16]),u):La(r,i.next)}}return null}function kd(r,i){return null!==i?r[16][6].projection[i.projection]:null}function up(r,i){const s=10+r+1;if(s<i.length){const u=i[s],c=u[1].firstChild;if(null!==c)return La(u,c)}return i[7]}function Fd(r,i,s,u,c,d,m){for(;null!=s;){const _=u[s.index],D=s.type;if(m&&0===i&&(_&&ci(A(_),u),s.flags|=4),64!=(64&s.flags))if(8&D)Fd(r,i,s.child,u,c,d,!1),Pc(i,r,c,_,d);else if(32&D){const M=Th(s,u);let j;for(;j=M();)Pc(i,r,c,j,d);Pc(i,r,c,_,d)}else 16&D?Vd(r,i,u,s,c,d):Pc(i,r,c,_,d);s=m?s.projectionNext:s.next}}function Zl(r,i,s,u,c,d){Fd(s,u,r.firstChild,i,c,d,!1)}function Vd(r,i,s,u,c,d){const m=s[16],D=m[6].projection[u.projection];if(Array.isArray(D))for(let M=0;M<D.length;M++)Pc(i,r,c,D[M],d);else Fd(r,i,D,m[3],c,d,!0)}function dp(r,i,s){Oe(r)?r.setAttribute(i,"style",s):i.style.cssText=s}function Ud(r,i,s){Oe(r)?""===s?r.removeAttribute(i,"class"):r.setAttribute(i,"class",s):i.className=s}function hp(r,i,s){let u=r.length;for(;;){const c=r.indexOf(i,s);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const d=i.length;if(c+d===u||r.charCodeAt(c+d)<=32)return c}s=c+1}}const fp="ng-template";function mm(r,i,s){let u=0;for(;u<r.length;){let c=r[u++];if(s&&"class"===c){if(c=r[u],-1!==hp(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function Nh(r){return 4===r.type&&r.value!==fp}function v_(r,i,s){return i===(4!==r.type||s?r.value:fp)}function ym(r,i,s){let u=4;const c=r.attrs||[],d=function(r){for(let i=0;i<r.length;i++)if(tu(r[i]))return i;return r.length}(c);let m=!1;for(let _=0;_<i.length;_++){const D=i[_];if("number"!=typeof D){if(!m)if(4&u){if(u=2|1&u,""!==D&&!v_(r,D,s)||""===D&&1===i.length){if(Va(u))return!1;m=!0}}else{const M=8&u?D:i[++_];if(8&u&&null!==r.attrs){if(!mm(r.attrs,M,s)){if(Va(u))return!1;m=!0}continue}const Z=_m(8&u?"class":D,c,Nh(r),s);if(-1===Z){if(Va(u))return!1;m=!0;continue}if(""!==M){let ee;ee=Z>d?"":c[Z+1].toLowerCase();const ae=8&u?ee:null;if(ae&&-1!==hp(ae,M,0)||2&u&&M!==ee){if(Va(u))return!1;m=!0}}}}else{if(!m&&!Va(u)&&!Va(D))return!1;if(m&&Va(D))continue;m=!1,u=D|1&u}}return Va(u)||m}function Va(r){return 0==(1&r)}function _m(r,i,s,u){if(null===i)return-1;let c=0;if(u||!s){let d=!1;for(;c<i.length;){const m=i[c];if(m===r)return c;if(3===m||6===m)d=!0;else{if(1===m||2===m){let _=i[++c];for(;"string"==typeof _;)_=i[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=d?1:2}return-1}return function(r,i){let s=r.indexOf(4);if(s>-1)for(s++;s<r.length;){const u=r[s];if("number"==typeof u)return-1;if(u===i)return s;s++}return-1}(i,r)}function vm(r,i,s=!1){for(let u=0;u<i.length;u++)if(ym(r,i[u],s))return!0;return!1}function gp(r,i){return r?":not("+i.trim()+")":i}function Em(r){let i=r[0],s=1,u=2,c="",d=!1;for(;s<r.length;){let m=r[s];if("string"==typeof m)if(2&u){const _=r[++s];c+="["+m+(_.length>0?'="'+_+'"':"")+"]"}else 8&u?c+="."+m:4&u&&(c+=" "+m);else""!==c&&!Va(m)&&(i+=gp(d,c),c=""),u=m,d=d||!Va(u);s++}return""!==c&&(i+=gp(d,c)),i}const cn={};function Oh(r){wm(Xt(),Ze(),jr()+r,Ii())}function wm(r,i,s,u){if(!u)if(3==(3&i[2])){const d=r.preOrderCheckHooks;null!==d&&Rs(i,d,s)}else{const d=r.preOrderHooks;null!==d&&na(i,d,0,s)}As(s)}function Vc(r,i){return r<<17|i<<2}function Ua(r){return r>>17&32767}function yp(r){return 2|r}function Hu(r){return(131068&r)>>2}function _p(r,i){return-131069&r|i<<2}function vp(r){return 1|r}function jh(r,i){const s=r.contentQueries;if(null!==s)for(let u=0;u<s.length;u+=2){const c=s[u],d=s[u+1];if(-1!==d){const m=r.data[d];_o(c),m.contentQueries(2,i[d],d)}}}function vl(r,i,s,u,c,d,m,_,D,M){const j=i.blueprint.slice();return j[0]=c,j[2]=140|u,mo(j),j[3]=j[15]=r,j[8]=s,j[10]=m||r&&r[10],j[11]=_||r&&r[11],j[12]=D||r&&r[12]||null,j[9]=M||r&&r[9]||null,j[6]=d,j[16]=2==i.type?r[16]:j,j}function El(r,i,s,u,c){let d=r.data[i];if(null===d)d=function(r,i,s,u,c){const d=_a(),m=Za(),D=r.data[i]=function(r,i,s,u,c,d){return{type:s,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,s,i,u,c);return null===r.firstChild&&(r.firstChild=D),null!==d&&(m?null==d.child&&null!==D.parent&&(d.child=D):null===d.next&&(d.next=D)),D}(r,i,s,u,c),Kt.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=s,d.value=u,d.attrs=c;const m=function(){const r=Kt.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return Yi(d,!0),d}function Ba(r,i,s,u){if(0===s)return-1;const c=i.length;for(let d=0;d<s;d++)i.push(u),r.blueprint.push(u),r.data.push(null);return c}function Xl(r,i,s){ta(i);try{const u=r.viewQuery;null!==u&&Wp(1,u,s);const c=r.template;null!==c&&Sp(r,i,c,1,s),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&jh(r,i),r.staticViewQueries&&Wp(2,r.viewQuery,s);const d=r.components;null!==d&&function(r,i){for(let s=0;s<i.length;s++)$p(r,i[s])}(i,d)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,ba()}}function Bc(r,i,s,u){const c=i[2];if(256==(256&c))return;ta(i);const d=Ii();try{mo(i),function(r){Kt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==s&&Sp(r,i,s,2,u);const m=3==(3&c);if(!d)if(m){const M=r.preOrderCheckHooks;null!==M&&Rs(i,M,null)}else{const M=r.preOrderHooks;null!==M&&na(i,M,0,null),Bo(i,0)}if(function(r){for(let i=Nd(r);null!==i;i=tp(i)){if(!i[2])continue;const s=i[9];for(let u=0;u<s.length;u++){const c=s[u],d=c[3];0==(1024&c[2])&&yo(d,1),c[2]|=1024}}}(i),function(r){for(let i=Nd(r);null!==i;i=tp(i))for(let s=10;s<i.length;s++){const u=i[s],c=u[1];Zi(u)&&Bc(c,u,c.template,u[8])}}(i),null!==r.contentQueries&&jh(r,i),!d)if(m){const M=r.contentCheckHooks;null!==M&&Rs(i,M)}else{const M=r.contentHooks;null!==M&&na(i,M,1),Bo(i,1)}!function(r,i){const s=r.hostBindingOpCodes;if(null!==s)try{for(let u=0;u<s.length;u++){const c=s[u];if(c<0)As(~c);else{const d=c,m=s[++u],_=s[++u];va(m,d),_(2,i[d])}}}finally{As(-1)}}(r,i);const _=r.components;null!==_&&function(r,i){for(let s=0;s<i.length;s++)Bp(r,i[s])}(i,_);const D=r.viewQuery;if(null!==D&&Wp(2,D,u),!d)if(m){const M=r.viewCheckHooks;null!==M&&Rs(i,M)}else{const M=r.viewHooks;null!==M&&na(i,M,2),Bo(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),d||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,yo(i[3],-1))}finally{ba()}}function A_(r,i,s,u){const c=i[10],d=!Ii(),m=ai(i);try{d&&!m&&c.begin&&c.begin(),m&&Xl(r,i,u),Bc(r,i,s,u)}finally{d&&!m&&c.end&&c.end()}}function Sp(r,i,s,u,c){const d=jr(),m=2&u;try{As(-1),m&&i.length>20&&wm(r,i,20,Ii()),s(u,c)}finally{As(d)}}function xp(r,i,s){!qa()||(function(r,i,s,u){const c=s.directiveStart,d=s.directiveEnd;r.firstCreatePass||St(s,i),ci(u,i);const m=s.initialInputs;for(let _=c;_<d;_++){const D=r.data[_],M=pr(D);M&&Om(i,s,D);const j=q(i,r,_,s);ci(j,i),null!==m&&O_(0,_-c,j,D,0,m),M&&(Nn(s.index,i)[8]=j)}}(r,i,s,At(s,i)),128==(128&s.flags)&&function(r,i,s){const u=s.directiveStart,c=s.directiveEnd,m=s.index,_=Kt.lFrame.currentDirectiveIndex;try{As(m);for(let D=u;D<c;D++){const M=r.data[D],j=i[D];ea(D),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&qh(M,j)}}finally{As(-1),ea(_)}}(r,i,s))}function $d(r,i,s=At){const u=i.localNames;if(null!==u){let c=i.index+1;for(let d=0;d<u.length;d+=2){const m=u[d+1],_=-1===m?s(i,r):r[m];r[c++]=_}}}function Sm(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=jc(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function jc(r,i,s,u,c,d,m,_,D,M){const j=20+u,Z=j+c,ee=function(r,i){const s=[];for(let u=0;u<i;u++)s.push(u<r?null:cn);return s}(j,Z),ae="function"==typeof M?M():M;return ee[1]={type:r,blueprint:ee,template:s,queries:null,viewQuery:_,declTNode:i,data:ee.slice().fill(null,j),bindingStartIndex:j,expandoStartIndex:Z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:D,consts:ae,incompleteFirstPass:!1}}function Wh(r,i,s,u){const c=Qh(i);null===s?c.push(u):(c.push(s),r.firstCreatePass&&tc(r).push(u,c.length-1))}function ec(r,i,s){for(let u in r)if(r.hasOwnProperty(u)){const c=r[u];(s=null===s?{}:s).hasOwnProperty(u)?s[u].push(i,c):s[u]=[i,c]}return s}function ms(r,i,s,u,c,d,m,_){const D=At(i,s);let j,M=i.inputs;!_&&null!=M&&(j=M[u])?(Lm(r,s,j,u,c),Gi(i)&&function(r,i){const s=Nn(i,r);16&s[2]||(s[2]|=64)}(s,i.index)):3&i.type&&(u=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=m?m(c,i.value||"",u):c,Oe(d)?d.setProperty(D,u,c):bo(u)||(D.setProperty?D.setProperty(u,c):D[u]=c))}function Gd(r,i,s,u){let c=!1;if(qa()){const d=function(r,i,s){const u=r.directiveRegistry;let c=null;if(u)for(let d=0;d<u.length;d++){const m=u[d];vm(s,m.selectors,!1)&&(c||(c=[]),je(St(s,i),r,m.type),pr(m)?(kp(r,s),c.unshift(m)):c.push(m))}return c}(r,i,s),m=null===u?null:{"":-1};if(null!==d){c=!0,Fp(s,r.data.length,d.length);for(let j=0;j<d.length;j++){const Z=d[j];Z.providersResolver&&Z.providersResolver(Z)}let _=!1,D=!1,M=Ba(r,i,d.length,null);for(let j=0;j<d.length;j++){const Z=d[j];s.mergedAttrs=Co(s.mergedAttrs,Z.hostAttrs),Lp(r,s,i,M,Z),Mm(M,Z,m),null!==Z.contentQueries&&(s.flags|=8),(null!==Z.hostBindings||null!==Z.hostAttrs||0!==Z.hostVars)&&(s.flags|=128);const ee=Z.type.prototype;!_&&(ee.ngOnChanges||ee.ngOnInit||ee.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(s.index),_=!0),!D&&(ee.ngOnChanges||ee.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(s.index),D=!0),M++}!function(r,i){const u=i.directiveEnd,c=r.data,d=i.attrs,m=[];let _=null,D=null;for(let M=i.directiveStart;M<u;M++){const j=c[M],Z=j.inputs,ee=null===d||Nh(i)?null:P_(Z,d);m.push(ee),_=ec(Z,M,_),D=ec(j.outputs,M,D)}null!==_&&(_.hasOwnProperty("class")&&(i.flags|=16),_.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=m,i.inputs=_,i.outputs=D}(r,s)}m&&function(r,i,s){if(i){const u=r.localNames=[];for(let c=0;c<i.length;c+=2){const d=s[i[c+1]];if(null==d)throw new Xe("301",`Export of name '${i[c+1]}' not found!`);u.push(i[c],d)}}}(s,u,m)}return s.mergedAttrs=Co(s.mergedAttrs,s.attrs),c}function zh(r,i,s,u,c,d){const m=d.hostBindings;if(m){let _=r.hostBindingOpCodes;null===_&&(_=r.hostBindingOpCodes=[]);const D=~i.index;(function(r){let i=r.length;for(;i>0;){const s=r[--i];if("number"==typeof s&&s<0)return s}return 0})(_)!=D&&_.push(D),_.push(u,c,m)}}function qh(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function kp(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function Mm(r,i,s){if(s){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)s[i.exportAs[u]]=r;pr(i)&&(s[""]=r)}}function Fp(r,i,s){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+s,r.providerIndexes=i}function Lp(r,i,s,u,c){r.data[u]=c;const d=c.factory||(c.factory=ii(c.type)),m=new lr(d,pr(c),null);r.blueprint[u]=m,s[u]=m,zh(r,i,0,u,Ba(r,s,c.hostVars,cn),c)}function Om(r,i,s){const u=At(i,r),c=Sm(s),d=r[10],m=Hc(r,vl(r,c,null,s.onPush?64:16,u,i,d,d.createRenderer(u,s),null,null));r[i.index]=m}function yu(r,i,s,u,c,d){const m=At(r,i);!function(r,i,s,u,c,d,m){if(null==d)Oe(r)?r.removeAttribute(i,c,s):i.removeAttribute(c);else{const _=null==m?lt(d):m(d,u||"",c);Oe(r)?r.setAttribute(i,c,_,s):s?i.setAttributeNS(s,c,_):i.setAttribute(c,_)}}(i[11],m,d,r.value,s,u,c)}function O_(r,i,s,u,c,d){const m=d[i];if(null!==m){const _=u.setInput;for(let D=0;D<m.length;){const M=m[D++],j=m[D++],Z=m[D++];null!==_?u.setInput(s,Z,M,j):s[j]=Z}}}function P_(r,i){let s=null,u=0;for(;u<i.length;){const c=i[u];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===s&&(s=[]),s.push(c,r[c],i[u+1])),u+=2}else u+=2;else u+=4}return s}function Kh(r,i,s,u){return new Array(r,!0,!1,i,null,0,u,s,null,null)}function Bp(r,i){const s=Nn(i,r);if(Zi(s)){const u=s[1];80&s[2]?Bc(u,s,u.template,s[8]):s[5]>0&&jp(s)}}function jp(r){for(let u=Nd(r);null!==u;u=tp(u))for(let c=10;c<u.length;c++){const d=u[c];if(1024&d[2]){const m=d[1];Bc(m,d,m.template,d[8])}else d[5]>0&&jp(d)}const s=r[1].components;if(null!==s)for(let u=0;u<s.length;u++){const c=Nn(s[u],r);Zi(c)&&c[5]>0&&jp(c)}}function $p(r,i){const s=Nn(i,r),u=s[1];(function(r,i){for(let s=i.length;s<r.blueprint.length;s++)i.push(r.blueprint[s])})(u,s),Xl(u,s,s[8])}function Hc(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function Zh(r){for(;r;){r[2]|=64;const i=fu(r);if(Wi(r)&&!i)return r;r=i}return null}function Hp(r,i,s){const u=i[10];u.begin&&u.begin();try{Bc(r,i,r.template,s)}catch(c){throw Jh(i,c),c}finally{u.end&&u.end()}}function Yh(r){!function(r){for(let i=0;i<r.components.length;i++){const s=r.components[i],u=ps(s),c=u[1];A_(c,u,c.template,s)}}(r[8])}function Wp(r,i,s){_o(0),i(r,s)}const zp=(()=>Promise.resolve(null))();function Qh(r){return r[7]||(r[7]=[])}function tc(r){return r.cleanup||(r.cleanup=[])}function Jh(r,i){const s=r[9],u=s?s.get($e,null):null;u&&u.handleError(i)}function Lm(r,i,s,u,c){for(let d=0;d<s.length;){const m=s[d++],_=s[d++],D=i[m],M=r.data[m];null!==M.setInput?M.setInput(D,c,u,_):D[_]=c}}function ja(r,i,s){const u=it(i,r);!function(r,i,s){Oe(r)?r.setValue(i,s):i.textContent=s}(r[11],u,s)}function da(r,i,s){let u=s?r.styles:null,c=s?r.classes:null,d=0;if(null!==i)for(let m=0;m<i.length;m++){const _=i[m];"number"==typeof _?d=_:1==d?c=_e(c,_):2==d&&(u=_e(u,_+": "+i[++m]+";"))}s?r.styles=u:r.stylesWithoutHost=u,s?r.classes=c:r.classesWithoutHost=c}const Gc=new zn("INJECTOR",-1);class Um{get(i,s=ra){if(s===ra){const u=new Error(`NullInjectorError: No provider for ${ye(i)}!`);throw u.name="NullInjectorError",u}return s}}const nc=new zn("Set Injector scope."),zd={},Zp={};let Yp;function Xh(){return void 0===Yp&&(Yp=new Um),Yp}function ef(r,i=null,s=null,u){return new Bm(r,s,i||Xh(),u)}class Bm{constructor(i,s,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];s&&te(s,_=>this.processProvider(_,i,s)),te([i],_=>this.processInjectorType(_,[],d)),this.records.set(Gc,bl(void 0,this));const m=this.records.get(nc);this.scope=null!=m?m.value:null,this.source=c||("object"==typeof i?null:ye(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,s=ra,u=Je.Default){this.assertNotDestroyed();const c=Sa(this),d=Mn(void 0);try{if(!(u&Je.SkipSelf)){let _=this.records.get(i);if(void 0===_){const D=("function"==typeof(r=i)||"object"==typeof r&&r instanceof zn)&&Dn(i);_=D&&this.injectableDefInScope(D)?bl(qd(i),zd):null,this.records.set(i,_)}if(null!=_)return this.hydrate(i,_)}return(u&Je.Self?Xh():this.parent).get(i,s=u&Je.Optional&&s===ra?null:s)}catch(m){if("NullInjectorError"===m.name){if((m[lu]=m[lu]||[]).unshift(ye(i)),c)throw m;return vc(m,i,"R3InjectorError",this.source)}throw m}finally{Mn(d),Sa(c)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,c)=>i.push(ye(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,s,u){if(!(i=Te(i)))return!1;let c=jn(i);const d=null==c&&i.ngModule||void 0,m=void 0===d?i:d,_=-1!==u.indexOf(m);if(void 0!==d&&(c=jn(d)),null==c)return!1;if(null!=c.imports&&!_){let j;u.push(m);try{te(c.imports,Z=>{this.processInjectorType(Z,s,u)&&(void 0===j&&(j=[]),j.push(Z))})}finally{}if(void 0!==j)for(let Z=0;Z<j.length;Z++){const{ngModule:ee,providers:ae}=j[Z];te(ae,Ee=>this.processProvider(Ee,ee,ae||vt))}}this.injectorDefTypes.add(m);const D=ii(m)||(()=>new m);this.records.set(m,bl(D,zd));const M=c.providers;if(null!=M&&!_){const j=i;te(M,Z=>this.processProvider(Z,j,M))}return void 0!==d&&void 0!==i.providers}processProvider(i,s,u){let c=Cl(i=Te(i))?i:Te(i&&i.provide);const d=Hm(r=i)?bl(void 0,r.useValue):bl($m(r),zd);var r;if(Cl(i)||!0!==i.multi)this.records.get(c);else{let m=this.records.get(c);m||(m=bl(void 0,zd,!0),m.factory=()=>cu(m.multi),this.records.set(c,m)),c=i,m.multi.push(i)}this.records.set(c,d)}hydrate(i,s){return s.value===zd&&(s.value=Zp,s.value=s.factory()),"object"==typeof s.value&&s.value&&null!==(r=s.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(s.value),s.value;var r}injectableDefInScope(i){if(!i.providedIn)return!1;const s=Te(i.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function qd(r){const i=Dn(r),s=null!==i?i.factory:ii(r);if(null!==s)return s;if(r instanceof zn)throw new Error(`Token ${ye(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const i=r.length;if(i>0){const u=function(r,i){const s=[];for(let u=0;u<r;u++)s.push(i);return s}(i,"?");throw new Error(`Can't resolve all parameters for ${ye(r)}: (${u.join(", ")}).`)}const s=function(r){const i=r&&(r[Pt]||r[Ar]);if(i){const s=function(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),i}return null}(r);return null!==s?()=>s.factory(r):()=>new r}(r);throw new Error("unreachable")}function $m(r,i,s){let u;if(Cl(r)){const c=Te(r);return ii(c)||qd(c)}if(Hm(r))u=()=>Te(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...cu(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))u=()=>Gr(Te(r.useExisting));else{const c=Te(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return ii(c)||qd(c);u=()=>new c(...cu(r.deps))}return u}function bl(r,i,s=!1){return{factory:r,value:i,multi:s?[]:void 0}}function Hm(r){return null!==r&&"object"==typeof r&&ku in r}function Cl(r){return"function"==typeof r}const Kd=function(r,i,s){return function(r,i=null,s=null,u){const c=ef(r,i,s,u);return c._resolveInjectorDefTypes(),c}({name:s},i,r,s)};let ri=(()=>{class r{static create(s,u){return Array.isArray(s)?Kd(s,u,""):Kd(s.providers,s.parent,s.name||"")}}return r.THROW_IF_NOT_FOUND=ra,r.NULL=new Um,r.\u0275prov=ln({token:r,providedIn:"any",factory:()=>Gr(Gc)}),r.__NG_ELEMENT_ID__=-1,r})();function iy(r,i){Vs(ps(r)[1],Gn())}function lf(r){let i=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),s=!0;const u=[r];for(;i;){let c;if(pr(r))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Error("Directives cannot inherit Components");c=i.\u0275dir}if(c){if(s){u.push(c);const m=r;m.inputs=sg(r.inputs),m.declaredInputs=sg(r.declaredInputs),m.outputs=sg(r.outputs);const _=c.hostBindings;_&&Y_(r,_);const D=c.viewQuery,M=c.contentQueries;if(D&&og(r,D),M&&Z_(r,M),he(r.inputs,c.inputs),he(r.declaredInputs,c.declaredInputs),he(r.outputs,c.outputs),pr(c)&&c.data.animation){const j=r.data;j.animation=(j.animation||[]).concat(c.data.animation)}}const d=c.features;if(d)for(let m=0;m<d.length;m++){const _=d[m];_&&_.ngInherit&&_(r),_===lf&&(s=!1)}}i=Object.getPrototypeOf(i)}!function(r){let i=0,s=null;for(let u=r.length-1;u>=0;u--){const c=r[u];c.hostVars=i+=c.hostVars,c.hostAttrs=Co(c.hostAttrs,s=Co(s,c.hostAttrs))}}(u)}function sg(r){return r===Ct?{}:r===vt?[]:r}function og(r,i){const s=r.viewQuery;r.viewQuery=s?(u,c)=>{i(u,c),s(u,c)}:i}function Z_(r,i){const s=r.contentQueries;r.contentQueries=s?(u,c,d)=>{i(u,c,d),s(u,c,d)}:i}function Y_(r,i){const s=r.hostBindings;r.hostBindings=s?(u,c)=>{i(u,c),s(u,c)}:i}let vi=null;function ic(){if(!vi){const r=ue.Symbol;if(r&&r.iterator)vi=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<i.length;++s){const u=i[s];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(vi=u)}}}return vi}function zc(r){return!!ag(r)&&(Array.isArray(r)||!(r instanceof Map)&&ic()in r)}function ag(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Hs(r,i,s){return!Object.is(r[i],s)&&(r[i]=s,!0)}function ay(r,i,s,u){const c=Ze();return Hs(c,Wn(),i)&&(Xt(),yu(nr(),c,r,i,s,u)),ay}function fa(r,i,s,u){return Hs(r,Wn(),s)?i+lt(s)+u:cn}function zu(r,i,s,u,c,d){const _=function(r,i,s,u){const c=Hs(r,i,s);return Hs(r,i+1,u)||c}(r,Kt.lFrame.bindingIndex,s,c);return tr(2),_?i+lt(s)+u+lt(c)+d:cn}function cg(r,i,s,u,c,d,m,_){const D=Ze(),M=Xt(),j=r+20,Z=M.firstCreatePass?function(r,i,s,u,c,d,m,_,D){const M=i.consts,j=El(i,r,4,m||null,Mr(M,_));Gd(i,s,j,Mr(M,D)),Vs(i,j);const Z=j.tViews=jc(2,j,u,c,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,M);return null!==i.queries&&(i.queries.template(i,j),Z.queries=i.queries.embeddedTView(j)),j}(j,M,D,i,s,u,c,d,m):M.data[j];Yi(Z,!1);const ee=D[11].createComment("");Pd(M,D,ee,Z),ci(ee,D),Hc(D,D[j]=Kh(ee,D,ee,Z)),fr(Z)&&xp(M,D,Z),null!=m&&$d(D,Z,_)}function dg(r){return function(r,i){return r[i]}(Kt.lFrame.contextLView,20+r)}function ih(r,i=Je.Default){const s=Ze();return null===s?Gr(r,i):R(Gn(),s,Te(r),i)}function wg(r,i,s){const u=Ze();return Hs(u,Wn(),i)&&ms(Xt(),nr(),u,r,i,u[11],s,!1),wg}function Rl(r,i,s,u,c){const m=c?"class":"style";Lm(r,s,i.inputs[m],m,u)}function Cg(r,i,s,u){const c=Ze(),d=Xt(),m=20+r,_=c[11],D=c[m]=Ah(_,i,Kt.lFrame.currentNamespace),M=d.firstCreatePass?function(r,i,s,u,c,d,m){const _=i.consts,M=El(i,r,2,c,Mr(_,d));return Gd(i,s,M,Mr(_,m)),null!==M.attrs&&da(M,M.attrs,!1),null!==M.mergedAttrs&&da(M,M.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,M),M}(m,d,c,0,i,s,u):d.data[m];Yi(M,!0);const j=M.mergedAttrs;null!==j&&rr(_,D,j);const Z=M.classes;null!==Z&&Ud(_,D,Z);const ee=M.styles;null!==ee&&dp(_,D,ee),64!=(64&M.flags)&&Pd(d,c,D,M),0===Kt.lFrame.elementDepthCount&&ci(D,c),Kt.lFrame.elementDepthCount++,fr(M)&&(xp(d,c,M),function(r,i,s){if(qr(i)){const c=i.directiveEnd;for(let d=i.directiveStart;d<c;d++){const m=r.data[d];m.contentQueries&&m.contentQueries(1,s[d],d)}}}(d,M,c)),null!==u&&$d(c,M)}function Ig(){let r=Gn();Za()?Kt.lFrame.isParent=!1:(r=r.parent,Yi(r,!1));const i=r;Kt.lFrame.elementDepthCount--;const s=Xt();s.firstCreatePass&&(Vs(s,r),qr(r)&&s.queries.elementEnd(r)),null!=i.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(i)&&Rl(s,i,Ze(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(i)&&Rl(s,i,Ze(),i.stylesWithoutHost,!1)}function wy(r,i,s,u){Cg(r,i,s,u),Ig()}function Iy(){return Ze()}function Dg(r){return!!r&&"function"==typeof r.then}function Dy(r){return!!r&&"function"==typeof r.subscribe}const sh=Dy;function vf(r,i,s,u){const c=Ze(),d=Xt(),m=Gn();return function(r,i,s,u,c,d,m,_){const D=fr(u),j=r.firstCreatePass&&tc(r),Z=i[8],ee=Qh(i);let ae=!0;if(3&u.type||_){const Ne=At(u,i),ct=_?_(Ne):Ne,Ke=ee.length,Ht=_?un=>_(A(un[u.index])):u.index;if(Oe(s)){let un=null;if(!_&&D&&(un=function(r,i,s,u){const c=r.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const m=c[d];if(m===s&&c[d+1]===u){const _=i[7],D=c[d+2];return _.length>D?_[D]:null}"string"==typeof m&&(d+=2)}return null}(r,i,c,u.index)),null!==un)(un.__ngLastListenerFn__||un).__ngNextListenerFn__=d,un.__ngLastListenerFn__=d,ae=!1;else{d=Ag(u,i,Z,d,!1);const Un=s.listen(ct,c,d);ee.push(d,Un),j&&j.push(c,Ht,Ke,Ke+1)}}else d=Ag(u,i,Z,d,!0),ct.addEventListener(c,d,m),ee.push(d),j&&j.push(c,Ht,Ke,m)}else d=Ag(u,i,Z,d,!1);const Ee=u.outputs;let He;if(ae&&null!==Ee&&(He=Ee[c])){const Ne=He.length;if(Ne)for(let ct=0;ct<Ne;ct+=2){const Ps=i[He[ct]][He[ct+1]].subscribe(d),Tu=ee.length;ee.push(d,Ps),j&&j.push(c,u.index,Tu,-(Tu+1))}}}(d,c,c[11],m,r,i,!!s,u),vf}function Ty(r,i,s,u){try{return!1!==s(u)}catch(c){return Jh(r,c),!1}}function Ag(r,i,s,u,c){return function d(m){if(m===Function)return u;const _=2&r.flags?Nn(r.index,i):i;0==(32&i[2])&&Zh(_);let D=Ty(i,0,u,m),M=d.__ngNextListenerFn__;for(;M;)D=Ty(i,0,M,m)&&D,M=M.__ngNextListenerFn__;return c&&!1===D&&(m.preventDefault(),m.returnValue=!1),D}}function Sg(r=1){return function(r){return(Kt.lFrame.contextLView=function(r,i){for(;r>0;)i=i[15],r--;return i}(r,Kt.lFrame.contextLView))[8]}(r)}function bf(r,i,s){return Eu(r,"",i,"",s),bf}function Eu(r,i,s,u,c){const d=Ze(),m=fa(d,i,s,u);return m!==cn&&ms(Xt(),nr(),d,r,m,d[11],c,!1),Eu}function Mo(r,i,s,u,c,d,m){const _=Ze(),D=zu(_,i,s,u,c,d);return D!==cn&&ms(Xt(),nr(),_,r,D,_[11],m,!1),Mo}function Cf(r,i,s,u,c){const d=r[s+1],m=null===i;let _=u?Ua(d):Hu(d),D=!1;for(;0!==_&&(!1===D||m);){const j=r[_+1];fc(r[_],i)&&(D=!0,r[_+1]=u?vp(j):yp(j)),_=u?Ua(j):Hu(j)}D&&(r[s+1]=u?yp(d):vp(d))}function fc(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&ti(r,i)>=0}function Df(r,i){return function(r,i,s,u){const c=Ze(),d=Xt(),m=tr(2);d.firstUpdatePass&&function(r,i,s,u){const c=r.data;if(null===c[s+1]){const d=c[jr()],m=function(r,i){return i>=r.expandoStartIndex}(r,s);(function(r,i){return 0!=(r.flags&(i?16:32))})(d,u)&&null===i&&!m&&(i=!1),i=function(r,i,s,u){const c=function(r){const i=Kt.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let d=u?i.residualClasses:i.residualStyles;if(null===c)0===(u?i.classBindings:i.styleBindings)&&(s=y(s=h(null,r,i,s,u),i.attrs,u),d=null);else{const m=i.directiveStylingLast;if(-1===m||r[m]!==c)if(s=h(c,r,i,s,u),null===d){let D=function(r,i,s){const u=s?i.classBindings:i.styleBindings;if(0!==Hu(u))return r[Ua(u)]}(r,i,u);void 0!==D&&Array.isArray(D)&&(D=h(null,r,i,D[1],u),D=y(D,i.attrs,u),function(r,i,s,u){r[Ua(s?i.classBindings:i.styleBindings)]=u}(r,i,u,D))}else d=function(r,i,s){let u;const c=i.directiveEnd;for(let d=1+i.directiveStylingLast;d<c;d++)u=y(u,r[d].hostAttrs,s);return y(u,i.attrs,s)}(r,i,u)}return void 0!==d&&(u?i.residualClasses=d:i.residualStyles=d),s}(c,d,i,u),function(r,i,s,u,c,d){let m=d?i.classBindings:i.styleBindings,_=Ua(m),D=Hu(m);r[u]=s;let j,M=!1;if(Array.isArray(s)){const Z=s;j=Z[1],(null===j||ti(Z,j)>0)&&(M=!0)}else j=s;if(c)if(0!==D){const ee=Ua(r[_+1]);r[u+1]=Vc(ee,_),0!==ee&&(r[ee+1]=_p(r[ee+1],u)),r[_+1]=function(r,i){return 131071&r|i<<17}(r[_+1],u)}else r[u+1]=Vc(_,0),0!==_&&(r[_+1]=_p(r[_+1],u)),_=u;else r[u+1]=Vc(D,0),0===_?_=u:r[D+1]=_p(r[D+1],u),D=u;M&&(r[u+1]=yp(r[u+1])),Cf(r,j,u,!0),Cf(r,j,u,!1),function(r,i,s,u,c){const d=c?r.residualClasses:r.residualStyles;null!=d&&"string"==typeof i&&ti(d,i)>=0&&(s[u+1]=vp(s[u+1]))}(i,j,r,u,d),m=Vc(_,D),d?i.classBindings=m:i.styleBindings=m}(c,d,i,s,m,u)}}(d,r,m,u),i!==cn&&Hs(c,m,i)&&function(r,i,s,u,c,d,m,_){if(!(3&i.type))return;const D=r.data,M=D[_+1];be(function(r){return 1==(1&r)}(M)?re(D,i,s,c,Hu(M),m):void 0)||(be(d)||function(r){return 2==(2&r)}(M)&&(d=re(D,null,s,c,_,m)),function(r,i,s,u,c){const d=Oe(r);if(i)c?d?r.addClass(s,u):s.classList.add(u):d?r.removeClass(s,u):s.classList.remove(u);else{let m=-1===u.indexOf("-")?void 0:Fa.DashCase;if(null==c)d?r.removeStyle(s,u,m):s.style.removeProperty(u);else{const _="string"==typeof c&&c.endsWith("!important");_&&(c=c.slice(0,-10),m|=Fa.Important),d?r.setStyle(s,u,c,m):s.style.setProperty(u,c,_?"important":"")}}}(u,m,it(jr(),s),c,d))}(d,d.data[jr()],c,c[11],r,c[m+1]=function(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=ye(So(r)))),r}(i,s),u,m)}(r,i,null,!0),Df}function h(r,i,s,u,c){let d=null;const m=s.directiveEnd;let _=s.directiveStylingLast;for(-1===_?_=s.directiveStart:_++;_<m&&(d=i[_],u=y(u,d.hostAttrs,c),d!==r);)_++;return null!==r&&(s.directiveStylingLast=_),u}function y(r,i,s){const u=s?1:2;let c=-1;if(null!==i)for(let d=0;d<i.length;d++){const m=i[d];"number"==typeof m?c=m:c===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),vn(r,m,!!s||i[++d]))}return void 0===r?null:r}function re(r,i,s,u,c,d){const m=null===i;let _;for(;c>0;){const D=r[c],M=Array.isArray(D),j=M?D[1]:D,Z=null===j;let ee=s[c+1];ee===cn&&(ee=Z?vt:void 0);let ae=Z?ui(ee,u):j===u?ee:void 0;if(M&&!be(ae)&&(ae=ui(D,u)),be(ae)&&(_=ae,m))return _;const Ee=r[c+1];c=m?Ua(Ee):Hu(Ee)}if(null!==i){let D=d?i.residualClasses:i.residualStyles;null!=D&&(_=ui(D,u))}return _}function be(r){return void 0!==r}function _t(r,i=""){const s=Ze(),u=Xt(),c=r+20,d=u.firstCreatePass?El(u,c,1,i,null):u.data[c],m=s[c]=function(r,i){return Oe(r)?r.createText(i):r.createTextNode(i)}(s[11],i);Pd(u,s,m,d),Yi(d,!1)}function Bt(r){return dn("",r,""),Bt}function dn(r,i,s){const u=Ze(),c=fa(u,r,i,s);return c!==cn&&ja(u,jr(),c),dn}function gv(r,i,s){const u=Ze();return Hs(u,Wn(),i)&&ms(Xt(),nr(),u,r,i,u[11],s,!0),gv}const uh=void 0;var cC=["en",[["a","p"],["AM","PM"],uh],[["AM","PM"],uh,uh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],uh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],uh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",uh,"{1} 'at' {0}",uh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const i=Math.floor(Math.abs(r)),s=r.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===s?1:5}];let Tf={};function mv(r){const i=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let s=d0(i);if(s)return s;const u=i.split("-")[0];if(s=d0(u),s)return s;if("en"===u)return cC;throw new Error(`Missing locale data for the locale "${r}".`)}function c0(r){return mv(r)[rn.PluralCase]}function d0(r){return r in Tf||(Tf[r]=ue.ng&&ue.ng.common&&ue.ng.common.locales&&ue.ng.common.locales[r]),Tf[r]}var rn=(()=>((rn=rn||{})[rn.LocaleId=0]="LocaleId",rn[rn.DayPeriodsFormat=1]="DayPeriodsFormat",rn[rn.DayPeriodsStandalone=2]="DayPeriodsStandalone",rn[rn.DaysFormat=3]="DaysFormat",rn[rn.DaysStandalone=4]="DaysStandalone",rn[rn.MonthsFormat=5]="MonthsFormat",rn[rn.MonthsStandalone=6]="MonthsStandalone",rn[rn.Eras=7]="Eras",rn[rn.FirstDayOfWeek=8]="FirstDayOfWeek",rn[rn.WeekendRange=9]="WeekendRange",rn[rn.DateFormat=10]="DateFormat",rn[rn.TimeFormat=11]="TimeFormat",rn[rn.DateTimeFormat=12]="DateTimeFormat",rn[rn.NumberSymbols=13]="NumberSymbols",rn[rn.NumberFormats=14]="NumberFormats",rn[rn.CurrencyCode=15]="CurrencyCode",rn[rn.CurrencySymbol=16]="CurrencySymbol",rn[rn.CurrencyName=17]="CurrencyName",rn[rn.Currencies=18]="Currencies",rn[rn.Directionality=19]="Directionality",rn[rn.PluralCase=20]="PluralCase",rn[rn.ExtraData=21]="ExtraData",rn))();const Uy="en-US";let h0=Uy;function yv(r){wt(r,"Expected localeId to be defined"),"string"==typeof r&&(h0=r.toLowerCase().replace(/_/g,"-"))}function Ev(r,i,s,u,c){if(r=Te(r),Array.isArray(r))for(let d=0;d<r.length;d++)Ev(r[d],i,s,u,c);else{const d=Xt(),m=Ze();let _=Cl(r)?r:Te(r.provide),D=$m(r);const M=Gn(),j=1048575&M.providerIndexes,Z=M.directiveStart,ee=M.providerIndexes>>20;if(Cl(r)||!r.multi){const ae=new lr(D,c,ih),Ee=bv(_,i,c?j:j+ee,Z);-1===Ee?(je(St(M,m),d,_),wv(d,r,i.length),i.push(_),M.directiveStart++,M.directiveEnd++,c&&(M.providerIndexes+=1048576),s.push(ae),m.push(ae)):(s[Ee]=ae,m[Ee]=ae)}else{const ae=bv(_,i,j+ee,Z),Ee=bv(_,i,j,j+ee),He=ae>=0&&s[ae],Ne=Ee>=0&&s[Ee];if(c&&!Ne||!c&&!He){je(St(M,m),d,_);const ct=function(r,i,s,u,c){const d=new lr(r,s,ih);return d.multi=[],d.index=i,d.componentProviders=0,F0(d,c,u&&!s),d}(c?aI:oI,s.length,c,u,D);!c&&Ne&&(s[Ee].providerFactory=ct),wv(d,r,i.length,0),i.push(_),M.directiveStart++,M.directiveEnd++,c&&(M.providerIndexes+=1048576),s.push(ct),m.push(ct)}else wv(d,r,ae>-1?ae:Ee,F0(s[c?Ee:ae],D,!c&&u));!c&&u&&Ne&&s[Ee].componentProviders++}}}function wv(r,i,s,u){const c=Cl(i);if(c||function(r){return!!r.useClass}(i)){const m=(i.useClass||i).prototype.ngOnDestroy;if(m){const _=r.destroyHooks||(r.destroyHooks=[]);if(!c&&i.multi){const D=_.indexOf(s);-1===D?_.push(s,[u,m]):_[D+1].push(u,m)}else _.push(s,m)}}}function F0(r,i,s){return s&&r.componentProviders++,r.multi.push(i)-1}function bv(r,i,s,u){for(let c=s;c<u;c++)if(i[c]===r)return c;return-1}function oI(r,i,s,u){return Cv(this.multi,[])}function aI(r,i,s,u){const c=this.multi;let d;if(this.providerFactory){const m=this.providerFactory.componentProviders,_=q(s,s[1],this.providerFactory.index,u);d=_.slice(0,m),Cv(c,d);for(let D=m;D<_.length;D++)d.push(_[D])}else d=[],Cv(c,d);return d}function Cv(r,i){for(let s=0;s<r.length;s++)i.push((0,r[s])());return i}function L0(r,i=[]){return s=>{s.providersResolver=(u,c)=>function(r,i,s){const u=Xt();if(u.firstCreatePass){const c=pr(r);Ev(s,u.data,u.blueprint,c,!0),Ev(i,u.data,u.blueprint,c,!1)}}(u,c?c(r):r,i)}}class V0{}const B0="ngComponent";class cI{resolveComponentFactory(i){throw function(r){const i=Error(`No component factory found for ${ye(r)}. Did you add it to @NgModule.entryComponents?`);return i[B0]=r,i}(i)}}let Sf=(()=>{class r{}return r.NULL=new cI,r})();function Gy(...r){}function Rf(r,i){return new Ml(At(r,i))}const fI=function(){return Rf(Gn(),Ze())};let Ml=(()=>{class r{constructor(s){this.nativeElement=s}}return r.__NG_ELEMENT_ID__=fI,r})();function j0(r){return r instanceof Ml?r.nativeElement:r}class Wy{}let pI=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>mI(),r})();const mI=function(){const r=Ze(),s=Nn(Gn().index,r);return function(r){return r[11]}(zr(s)?s:r)};let Dv=(()=>{class r{}return r.\u0275prov=ln({token:r,providedIn:"root",factory:()=>null}),r})();class $0{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Tv=new $0("12.2.9");class H0{constructor(){}supports(i){return zc(i)}create(i){return new EI(i)}}const vI=(r,i)=>i;class EI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||vI}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,u=this._removalsHead,c=0,d=null;for(;s||u;){const m=!u||s&&s.currentIndex<W0(u,c,d)?s:u,_=W0(m,c,d),D=m.currentIndex;if(m===u)c--,u=u._nextRemoved;else if(s=s._next,null==m.previousIndex)c++;else{d||(d=[]);const M=_-c,j=D-c;if(M!=j){for(let ee=0;ee<M;ee++){const ae=ee<d.length?d[ee]:d[ee]=0,Ee=ae+ee;j<=Ee&&Ee<M&&(d[ee]=ae+1)}d[m.previousIndex]=j-M}}_!==D&&i(m,_,D)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!zc(i))throw new Error(`Error trying to diff '${ye(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,d,m,s=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let _=0;_<this.length;_++)d=i[_],m=this._trackByFn(_,d),null!==s&&Object.is(s.trackById,m)?(u&&(s=this._verifyReinsertion(s,d,m,_)),Object.is(s.item,d)||this._addIdentityChange(s,d)):(s=this._mismatch(s,d,m,_),u=!0),s=s._next}else c=0,function(r,i){if(Array.isArray(r))for(let s=0;s<r.length;s++)i(r[s]);else{const s=r[ic()]();let u;for(;!(u=s.next()).done;)i(u.value)}}(i,_=>{m=this._trackByFn(c,_),null!==s&&Object.is(s.trackById,m)?(u&&(s=this._verifyReinsertion(s,_,m,c)),Object.is(s.item,_)||this._addIdentityChange(s,_)):(s=this._mismatch(s,_,m,c),u=!0),s=s._next,c++}),this.length=c;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,u,c){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,d,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,d,c)):i=this._addAfter(new wI(s,u),d,c),i}_verifyReinsertion(i,s,u,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?i=this._reinsertAfter(d,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,d=i._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(i,s,u),this._addToMoves(i,u),i}_moveAfter(i,s,u){return this._unlink(i),this._insertAfter(i,s,u),this._addToMoves(i,u),i}_addAfter(i,s,u){return this._insertAfter(i,s,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,u){const c=null===s?this._itHead:s._next;return i._next=c,i._prev=s,null===c?this._itTail=i:c._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new G0),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,u=i._next;return null===s?this._itHead=u:s._next=u,null===u?this._itTail=s:u._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new G0),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class wI{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===s||s<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const s=i._prevDup,u=i._nextDup;return null===s?this._head=u:s._nextDup=u,null===u?this._tail=s:u._prevDup=s,null===this._head}}class G0{constructor(){this.map=new Map}put(i){const s=i.trackById;let u=this.map.get(s);u||(u=new bI,this.map.set(s,u)),u.add(i)}get(i,s){const c=this.map.get(i);return c?c.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function W0(r,i,s){const u=r.previousIndex;if(null===u)return u;let c=0;return s&&u<s.length&&(c=s[u]),u+i+c}class z0{constructor(){}supports(i){return i instanceof Map||ag(i)}create(){return new CI}}class CI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||ag(i)))throw new Error(`Error trying to diff '${ye(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(s&&s.key===c)this._maybeAddToChanges(s,u),this._appendAfter=s,s=s._next;else{const d=this._getOrCreateRecordForKey(c,u);s=this._insertBeforeOrAppend(s,d)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let u=s;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const u=i._prev;return s._next=i,s._prev=u,i._prev=s,u&&(u._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,s);const d=c._prev,m=c._next;return d&&(d._next=m),m&&(m._prev=d),c._next=null,c._prev=null,c}const u=new II(i);return this._records.set(i,u),u.currentValue=s,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(u=>s(i[u],u))}}class II{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function q0(){return new zy([new H0])}let zy=(()=>{class r{constructor(s){this.factories=s}static create(s,u){if(null!=u){const c=u.factories.slice();s=s.concat(c)}return new r(s)}static extend(s){return{provide:r,useFactory:u=>r.create(s,u||q0()),deps:[[r,new Na,new ho]]}}find(s){const u=this.factories.find(c=>c.supports(s));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${s}' of type '${function(r){return r.name||typeof r}(s)}'`)}}return r.\u0275prov=ln({token:r,providedIn:"root",factory:q0}),r})();function K0(){return new qy([new z0])}let qy=(()=>{class r{constructor(s){this.factories=s}static create(s,u){if(u){const c=u.factories.slice();s=s.concat(c)}return new r(s)}static extend(s){return{provide:r,useFactory:u=>r.create(s,u||K0()),deps:[[r,new Na,new ho]]}}find(s){const u=this.factories.find(c=>c.supports(s));if(u)return u;throw new Error(`Cannot find a differ supporting object '${s}'`)}}return r.\u0275prov=ln({token:r,providedIn:"root",factory:K0}),r})();function Ky(r,i,s,u,c=!1){for(;null!==s;){const d=i[s.index];if(null!==d&&u.push(A(d)),wn(d))for(let _=10;_<d.length;_++){const D=d[_],M=D[1].firstChild;null!==M&&Ky(D[1],D,M,u)}const m=s.type;if(8&m)Ky(r,i,s.child,u);else if(32&m){const _=Th(s,i);let D;for(;D=_();)u.push(D)}else if(16&m){const _=kd(i,s);if(Array.isArray(_))u.push(..._);else{const D=fu(i[16]);Ky(D[1],D,_,u,!0)}}s=c?s.projectionNext:s.next}return u}class Ug{constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,s=i[1];return Ky(s,i,s.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(wn(i)){const s=i[8],u=s?s.indexOf(this):-1;u>-1&&(Rh(i,u),Ve(s,u))}this._attachedToViewContainer=!1}ml(this._lView[1],this._lView)}onDestroy(i){Wh(this._lView[1],this._lView,null,i)}markForCheck(){Zh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Hp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,i,s){ro(!0);try{Hp(r,i,s)}finally{ro(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,Zl(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class TI extends Ug{constructor(i){super(i),this._view=i}detectChanges(){Yh(this._view)}checkNoChanges(){!function(r){ro(!0);try{Yh(r)}finally{ro(!1)}}(this._view)}get context(){return null}}const SI=function(r){return function(r,i,s){if(Gi(r)&&!s){const u=Nn(r.index,i);return new Ug(u,u)}return 47&r.type?new Ug(i[16],i):null}(Gn(),Ze(),16==(16&r))};let RI=(()=>{class r{}return r.__NG_ELEMENT_ID__=SI,r})();const MI=[new z0],PI=new zy([new H0]),kI=new qy(MI),LI=function(){return Zy(Gn(),Ze())};let Bg=(()=>{class r{}return r.__NG_ELEMENT_ID__=LI,r})();const VI=Bg,UI=class extends VI{constructor(i,s,u){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=u}createEmbeddedView(i){const s=this._declarationTContainer.tViews,u=vl(this._declarationLView,s,i,16,null,s.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(s)),Xl(s,u,i),new Ug(u)}};function Zy(r,i){return 4&r.type?new UI(i,r,Rf(r,i)):null}class lh{}class Z0{}const $I=function(){return J0(Gn(),Ze())};let Yy=(()=>{class r{}return r.__NG_ELEMENT_ID__=$I,r})();const GI=Yy,Y0=class extends GI{constructor(i,s,u){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=u}get element(){return Rf(this._hostTNode,this._hostLView)}get injector(){return new gt(this._hostTNode,this._hostLView)}get parentInjector(){const i=mt(this._hostTNode,this._hostLView);if(xs(i)){const s=Qi(i,this._hostLView),u=ao(i);return new gt(s[1].data[u+8],s)}return new gt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=Q0(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,s,u){const c=i.createEmbeddedView(s||{});return this.insert(c,u),c}createComponent(i,s,u,c,d){const m=u||this.parentInjector;if(!d&&null==i.ngModule&&m){const D=m.get(lh,null);D&&(d=D)}const _=i.create(m,c,void 0,d);return this.insert(_.hostView,s),_}insert(i,s){const u=i._lView,c=u[1];if(wn(u[3])){const j=this.indexOf(i);if(-1!==j)this.detach(j);else{const Z=u[3],ee=new Y0(Z,Z[6],Z[3]);ee.detach(ee.indexOf(i))}}const d=this._adjustIndex(s),m=this._lContainer;!function(r,i,s,u){const c=10+u,d=s.length;u>0&&(s[c-1][4]=i),u<d-10?(i[4]=s[c],De(s,10+u,i)):(s.push(i),i[4]=null),i[3]=s;const m=i[17];null!==m&&s!==m&&function(r,i){const s=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===s?r[9]=[i]:s.push(i)}(m,i);const _=i[19];null!==_&&_.insertView(r),i[2]|=128}(c,u,m,d);const _=up(d,m),D=u[11],M=xh(D,m[7]);return null!==M&&function(r,i,s,u,c,d){u[0]=c,u[6]=i,Zl(r,u,s,1,c,d)}(c,m[6],D,u,M,_),i.attachToViewContainerRef(),De(Av(m),d,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=Q0(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),u=Rh(this._lContainer,s);u&&(Ve(Av(this._lContainer),s),ml(u[1],u))}detach(i){const s=this._adjustIndex(i,-1),u=Rh(this._lContainer,s);return u&&null!=Ve(Av(this._lContainer),s)?new Ug(u):null}_adjustIndex(i,s=0){return null==i?this.length+s:i}};function Q0(r){return r[8]}function Av(r){return r[8]||(r[8]=[])}function J0(r,i){let s;const u=i[r.index];if(wn(u))s=u;else{let c;if(8&r.type)c=A(u);else{const d=i[11];c=d.createComment("");const m=At(r,i);$u(d,xh(d,m),c,function(r,i){return Oe(r)?r.nextSibling(i):i.nextSibling}(d,m),!1)}i[r.index]=s=Kh(u,i,c,r),Hc(i,s)}return new Y0(s,r,i)}const Of={};class _w extends Sf{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=Mt(i);return new Ew(s,this.ngModule)}}function vw(r){const i=[];for(let s in r)r.hasOwnProperty(s)&&i.push({propName:r[s],templateName:s});return i}const BD=new zn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ka});class Ew extends V0{constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=i.selectors.map(Em).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return vw(this.componentDef.inputs)}get outputs(){return vw(this.componentDef.outputs)}create(i,s,u,c){const d=(c=c||this.ngModule)?function(r,i){return{get:(s,u,c)=>{const d=r.get(s,Of,c);return d!==Of||u===Of?d:i.get(s,u,c)}}}(i,c.injector):i,m=d.get(Wy,P),_=d.get(Dv,null),D=m.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",j=u?function(r,i,s){if(Oe(r))return r.selectRootElement(i,s===Xn.ShadowDom);let u="string"==typeof i?r.querySelector(i):i;return u.textContent="",u}(D,u,this.componentDef.encapsulation):Ah(m.createRenderer(null,this.componentDef),M,function(r){const i=r.toLowerCase();return"svg"===i?Ki:"math"===i?"http://www.w3.org/1998/MathML/":null}(M)),Z=this.componentDef.onPush?576:528,ee=function(r,i){return{components:[],scheduler:r||ka,clean:zp,playerHandler:i||null,flags:0}}(),ae=jc(0,null,null,1,0,null,null,null,null,null),Ee=vl(null,ae,ee,Z,null,null,m,D,_,d);let He,Ne;ta(Ee);try{const ct=function(r,i,s,u,c,d){const m=s[1];s[20]=r;const D=El(m,20,2,"#host",null),M=D.mergedAttrs=i.hostAttrs;null!==M&&(da(D,M,!0),null!==r&&(rr(c,r,M),null!==D.classes&&Ud(c,r,D.classes),null!==D.styles&&dp(c,r,D.styles)));const j=u.createRenderer(r,i),Z=vl(s,Sm(i),null,i.onPush?64:16,s[20],D,u,j,d||null,null);return m.firstCreatePass&&(je(St(D,s),m,i.type),kp(m,D),Fp(D,s.length,1)),Hc(s,Z),s[20]=Z}(j,this.componentDef,Ee,m,D);if(j)if(u)rr(D,j,["ng-version",Tv.full]);else{const{attrs:Ke,classes:Ht}=function(r){const i=[],s=[];let u=1,c=2;for(;u<r.length;){let d=r[u];if("string"==typeof d)2===c?""!==d&&i.push(d,r[++u]):8===c&&s.push(d);else{if(!Va(c))break;c=d}u++}return{attrs:i,classes:s}}(this.componentDef.selectors[0]);Ke&&rr(D,j,Ke),Ht&&Ht.length>0&&Ud(D,j,Ht.join(" "))}if(Ne=Yr(ae,20),void 0!==s){const Ke=Ne.projection=[];for(let Ht=0;Ht<this.ngContentSelectors.length;Ht++){const un=s[Ht];Ke.push(null!=un?Array.from(un):null)}}He=function(r,i,s,u,c){const d=s[1],m=function(r,i,s){const u=Gn();r.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Lp(r,u,i,Ba(r,i,1,null),s));const c=q(i,r,u.directiveStart,u);ci(c,i);const d=At(u,i);return d&&ci(d,i),c}(d,s,i);if(u.components.push(m),r[8]=m,c&&c.forEach(D=>D(m,i)),i.contentQueries){const D=Gn();i.contentQueries(1,m,D.directiveStart)}const _=Gn();return!d.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(As(_.index),zh(s[1],_,0,_.directiveStart,_.directiveEnd,i),qh(i,m)),m}(ct,this.componentDef,Ee,ee,[iy]),Xl(ae,Ee,null)}finally{ba()}return new HD(this.componentType,He,Rf(Ne,Ee),Ee,Ne)}}class HD extends class{}{constructor(i,s,u,c,d){super(),this.location=u,this._rootLView=c,this._tNode=d,this.instance=s,this.hostView=this.changeDetectorRef=new TI(c),this.componentType=i}get injector(){return new gt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const Pf=new Map;class zD extends lh{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _w(this);const u=Qn(i),c=i[pn]||null;c&&yv(c),this._bootstrapComponents=$s(u.bootstrap),this._r3Injector=ef(i,s,[{provide:lh,useValue:this},{provide:Sf,useValue:this.componentFactoryResolver}],ye(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,s=ri.THROW_IF_NOT_FOUND,u=Je.Default){return i===ri||i===lh||i===Gc?this:this._r3Injector.get(i,s,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Bv extends Z0{constructor(i){super(),this.moduleType=i,null!==Qn(i)&&function(r){const i=new Set;!function s(u){const c=Qn(u,!0),d=c.id;null!==d&&(function(r,i,s){if(i&&i!==s)throw new Error(`Duplicate module registered for ${r} - ${ye(i)} vs ${ye(i.name)}`)}(d,Pf.get(d),u),Pf.set(d,u));const m=$s(c.imports);for(const _ of m)i.has(_)||(i.add(_),s(_))}(r)}(i)}create(i){return new zD(this.moduleType,i)}}function jv(r){return i=>{setTimeout(r,void 0,i)}}const Ol=class extends w.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,u){var c,d,m;let _=i,D=s||(()=>null),M=u;if(i&&"object"==typeof i){const Z=i;_=null===(c=Z.next)||void 0===c?void 0:c.bind(Z),D=null===(d=Z.error)||void 0===d?void 0:d.bind(Z),M=null===(m=Z.complete)||void 0===m?void 0:m.bind(Z)}this.__isAsync&&(D=jv(D),_&&(_=jv(_)),M&&(M=jv(M)));const j=super.subscribe({next:_,error:D,complete:M});return i instanceof U.w&&i.add(j),j}};function dT(){return this._results[ic()]()}class t_{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=ic(),u=t_.prototype;u[s]||(u[s]=dT)}get changes(){return this._changes||(this._changes=new Ol)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const u=this;u.dirty=!1;const c=H(i);(this._changesDetected=!function(r,i,s){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],d=i[u];if(s&&(c=s(c),d=s(d)),d!==c)return!1}return!0}(u._results,c,s))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class $v{constructor(i){this.queryList=i,this.matches=null}clone(){return new $v(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hv{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const u=null!==i.contentQueries?i.contentQueries[0]:s.length,c=[];for(let d=0;d<u;d++){const m=s.getByIndex(d);c.push(this.queries[m.indexInDeclarationView].clone())}return new Hv(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==kw(i,s).matches&&this.queries[s].setDirty()}}class Sw{constructor(i,s,u=null){this.predicate=i,this.flags=s,this.read=u}}class Gv{constructor(i=[]){this.queries=i}elementStart(i,s){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let u=0;u<this.length;u++){const c=null!==s?s.length:0,d=this.getByIndex(u).embeddedTView(i,c);d&&(d.indexInDeclarationView=u,null!==s?s.push(d):s=[d])}return null!==s?new Gv(s):null}template(i,s){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Wv{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new Wv(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==s;)u=u.parent;return s===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const d=u[c];this.matchTNodeWithReadOption(i,s,pT(s,d)),this.matchTNodeWithReadOption(i,s,V(s,i,d,!1,!1))}else u===Bg?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,V(s,i,u,!1,!1))}matchTNodeWithReadOption(i,s,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Ml||c===Yy||c===Bg&&4&s.type)this.addMatch(s.index,-2);else{const d=V(s,i,c,!1,!1);null!==d&&this.addMatch(s.index,d)}else this.addMatch(s.index,u)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function pT(r,i){const s=r.localNames;if(null!==s)for(let u=0;u<s.length;u+=2)if(s[u]===i)return s[u+1];return null}function mT(r,i,s,u){return-1===s?function(r,i){return 11&r.type?Rf(r,i):4&r.type?Zy(r,i):null}(i,r):-2===s?function(r,i,s){return s===Ml?Rf(i,r):s===Bg?Zy(i,r):s===Yy?J0(i,r):void 0}(r,i,u):q(r,r[1],s,i)}function Rw(r,i,s,u){const c=i[19].queries[u];if(null===c.matches){const d=r.data,m=s.matches,_=[];for(let D=0;D<m.length;D+=2){const M=m[D];_.push(M<0?null:mT(i,d[M],m[D+1],s.metadata.read))}c.matches=_}return c.matches}function zv(r,i,s,u){const c=r.queries.getByIndex(s),d=c.matches;if(null!==d){const m=Rw(r,i,c,s);for(let _=0;_<d.length;_+=2){const D=d[_];if(D>0)u.push(m[_/2]);else{const M=d[_+1],j=i[-D];for(let Z=10;Z<j.length;Z++){const ee=j[Z];ee[17]===ee[3]&&zv(ee[1],ee,M,u)}if(null!==j[9]){const Z=j[9];for(let ee=0;ee<Z.length;ee++){const ae=Z[ee];zv(ae[1],ae,M,u)}}}}}return u}function xw(r){const i=Ze(),s=Xt(),u=io();_o(u+1);const c=kw(s,u);if(r.dirty&&ai(i)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const d=c.crossesNgTemplate?zv(s,i,u,[]):Rw(s,i,c,u);r.reset(d,j0),r.notifyOnChanges()}return!0}return!1}function Nw(r,i,s,u){const c=Xt();if(c.firstCreatePass){const d=Gn();(function(r,i,s){null===r.queries&&(r.queries=new Gv),r.queries.track(new Wv(i,s))})(c,new Sw(i,s,u),d.index),function(r,i){const s=r.contentQueries||(r.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(r.queries.length-1,i)}(c,r),2==(2&s)&&(c.staticContentQueries=!0)}!function(r,i,s){const u=new t_(4==(4&s));Wh(r,i,u,u.destroy),null===i[19]&&(i[19]=new Hv),i[19].queries.push(new $v(u))}(c,Ze(),s)}function Mw(){return r=Ze(),i=io(),r[19].queries[i].queryList;var r,i}function kw(r,i){return r.queries.getByIndex(i)}function Fw(r,i){return Zy(r,i)}const Jv=new zn("Application Initializer");let Ff=(()=>{class r{constructor(s){this.appInits=s,this.resolve=Gy,this.reject=Gy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const s=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if(Dg(d))s.push(d);else if(sh(d)){const m=new Promise((_,D)=>{d.subscribe({complete:_,error:D})});s.push(m)}}Promise.all(s).then(()=>{u()}).catch(c=>{this.reject(c)}),0===s.length&&u(),this.initialized=!0}}return r.\u0275fac=function(s){return new(s||r)(Gr(Jv,8))},r.\u0275prov=ln({token:r,factory:r.\u0275fac}),r})();const eb=new zn("AppId"),qT={provide:eb,useFactory:function(){return`${Xv()}${Xv()}${Xv()}`},deps:[]};function Xv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tb=new zn("Platform Initializer"),nb=new zn("Platform ID"),rb=new zn("appBootstrapListener");let ib=(()=>{class r{log(s){console.log(s)}warn(s){console.warn(s)}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=ln({token:r,factory:r.\u0275fac}),r})();const i_=new zn("LocaleId"),sb=new zn("DefaultCurrencyCode");class ZT{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}const eE=function(r){return new Bv(r)},YT=eE,QT=function(r){return Promise.resolve(eE(r))},ob=function(r){const i=eE(r),u=$s(Qn(r).declarations).reduce((c,d)=>{const m=Mt(d);return m&&c.push(new Ew(m)),c},[]);return new ZT(i,u)},JT=ob,XT=function(r){return Promise.resolve(ob(r))};let Jg=(()=>{class r{constructor(){this.compileModuleSync=YT,this.compileModuleAsync=QT,this.compileModuleAndAllComponentsSync=JT,this.compileModuleAndAllComponentsAsync=XT}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=ln({token:r,factory:r.\u0275fac}),r})();const nA=(()=>Promise.resolve(0))();function tE(r){"undefined"==typeof Zone?nA.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Wa{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ol(!1),this.onMicrotaskEmpty=new Ol(!1),this.onStable=new Ol(!1),this.onError=new Ol(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&s,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let r=ue.requestAnimationFrame,i=ue.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const s=r[Zone.__symbol__("OriginalDelegate")];s&&(r=s);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(r){const i=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(ue,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,rE(r),r.isCheckStableRunning=!0,nE(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),rE(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,u,c,d,m,_)=>{try{return ab(r),s.invokeTask(c,d,m,_)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&i(),ub(r)}},onInvoke:(s,u,c,d,m,_,D)=>{try{return ab(r),s.invoke(c,d,m,_,D)}finally{r.shouldCoalesceRunChangeDetection&&i(),ub(r)}},onHasTask:(s,u,c,d)=>{s.hasTask(c,d),u===c&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,rE(r),nE(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(s,u,c,d)=>(s.handleError(c,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wa.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Wa.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,s,u){return this._inner.run(i,s,u)}runTask(i,s,u,c){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+c,i,iA,Gy,Gy);try{return d.runTask(m,s,u)}finally{d.cancelTask(m)}}runGuarded(i,s,u){return this._inner.runGuarded(i,s,u)}runOutsideAngular(i){return this._outer.run(i)}}const iA={};function nE(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function rE(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function ab(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function ub(r){r._nesting--,nE(r)}class aA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ol,this.onMicrotaskEmpty=new Ol,this.onStable=new Ol,this.onError=new Ol}run(i,s,u){return i.apply(s,u)}runGuarded(i,s,u){return i.apply(s,u)}runOutsideAngular(i){return i()}runTask(i,s,u,c){return i.apply(s,u)}}let lb=(()=>{class r{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wa.assertNotInAngularZone(),tE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())tE(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(s)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,u,c){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),s(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:s,timeoutId:d,updateCb:c})}whenStable(s,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,u,c){return[]}}return r.\u0275fac=function(s){return new(s||r)(Gr(Wa))},r.\u0275prov=ln({token:r,factory:r.\u0275fac}),r})(),cb=(()=>{class r{constructor(){this._applications=new Map,iE.addToWindow(this)}registerApplication(s,u){this._applications.set(s,u)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,u=!0){return iE.findTestabilityInTree(this,s,u)}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=ln({token:r,factory:r.\u0275fac}),r})();class uA{addToWindow(i){}findTestabilityInTree(i,s,u){return null}}function lA(r){iE=r}let iE=new uA,db=!0,hb=!1;function sE(){return hb=!0,db}function cA(){if(hb)throw new Error("Cannot enable prod mode after platform setup.");db=!1}let Yu;const fb=new zn("AllowMultipleToken");class yA{constructor(i,s){this.name=i,this.token=s}}function pb(r,i,s=[]){const u=`Platform: ${i}`,c=new zn(u);return(d=[])=>{let m=gb();if(!m||m.injector.get(fb,!1))if(r)r(s.concat(d).concat({provide:c,useValue:!0}));else{const _=s.concat(d).concat({provide:c,useValue:!0},{provide:nc,useValue:"platform"});!function(r){if(Yu&&!Yu.destroyed&&!Yu.injector.get(fb,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Yu=r.get(mb);const i=r.get(tb,null);i&&i.forEach(s=>s())}(ri.create({providers:_,name:u}))}return function(r){const i=gb();if(!i)throw new Error("No platform exists!");if(!i.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(c)}}function gb(){return Yu&&!Yu.destroyed?Yu:null}let mb=(()=>{class r{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,u){const _=function(r,i){let s;return s="noop"===r?new aA:("zone.js"===r?void 0:r)||new Wa({enableLongStackTrace:sE(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),s}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),D=[{provide:Wa,useValue:_}];return _.run(()=>{const M=ri.create({providers:D,parent:this.injector,name:s.moduleType.name}),j=s.create(M),Z=j.injector.get($e,null);if(!Z)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return _.runOutsideAngular(()=>{const ee=_.onError.subscribe({next:ae=>{Z.handleError(ae)}});j.onDestroy(()=>{oE(this._modules,j),ee.unsubscribe()})}),function(r,i,s){try{const u=s();return Dg(u)?u.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(Z,_,()=>{const ee=j.injector.get(Ff);return ee.runInitializers(),ee.donePromise.then(()=>(yv(j.injector.get(i_,Uy)||Uy),this._moduleDoBootstrap(j),j))})})}bootstrapModule(s,u=[]){const c=yb({},u);return function(r,i,s){const u=new Bv(s);return Promise.resolve(u)}(0,0,s).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(s){const u=s.injector.get(Xg);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!s.instance.ngDoBootstrap)throw new Error(`The module ${ye(s.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);s.instance.ngDoBootstrap(u)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(s){return new(s||r)(Gr(ri))},r.\u0275prov=ln({token:r,factory:r.\u0275fac}),r})();function yb(r,i){return Array.isArray(i)?i.reduce(yb,r):Object.assign(Object.assign({},r),i)}let Xg=(()=>{class r{constructor(s,u,c,d,m){this._zone=s,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=d,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new ne.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),D=new ne.y(M=>{let j;this._zone.runOutsideAngular(()=>{j=this._zone.onStable.subscribe(()=>{Wa.assertNotInAngularZone(),tE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const Z=this._zone.onUnstable.subscribe(()=>{Wa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{j.unsubscribe(),Z.unsubscribe()}});this.isStable=(0,Re.T)(_,D.pipe(r=>(0,de.x)()(function(r,i){return function(u){let c;c="function"==typeof r?r:function(){return r};const d=Object.create(u,Ce.N);return d.source=u,d.subjectFactory=c,d}}(oe)(r))))}bootstrap(s,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=s instanceof V0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(c.componentType);const d=function(r){return r.isBoundToModule}(c)?void 0:this._injector.get(lh),_=c.create(ri.NULL,[],u||c.selector,d),D=_.location.nativeElement,M=_.injector.get(lb,null),j=M&&_.injector.get(cb);return M&&j&&j.registerApplication(D,M),_.onDestroy(()=>{this.detachView(_.hostView),oE(this.components,_),j&&j.unregisterApplication(D)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const u=s;this._views.push(u),u.attachToAppRef(this)}detachView(s){const u=s;oE(this._views,u),u.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(rb,[]).concat(this._bootstrapListeners).forEach(c=>c(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(s){return new(s||r)(Gr(Wa),Gr(ri),Gr($e),Gr(Sf),Gr(Ff))},r.\u0275prov=ln({token:r,factory:r.\u0275fac}),r})();function oE(r,i){const s=r.indexOf(i);s>-1&&r.splice(s,1)}class CA{}class DA{}const TA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let AA=(()=>{class r{constructor(s,u){this._compiler=s,this._config=u||TA}load(s){return this.loadAndCompile(s)}loadAndCompile(s){let[u,c]=s.split("#");return void 0===c&&(c="default"),$(8255)(u).then(d=>d[c]).then(d=>wb(d,u,c)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(s){let[u,c]=s.split("#"),d="NgFactory";return void 0===c&&(c="default",d=""),$(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(m=>m[c+d]).then(m=>wb(m,u,c))}}return r.\u0275fac=function(s){return new(s||r)(Gr(Jg),Gr(DA,8))},r.\u0275prov=ln({token:r,factory:r.\u0275fac}),r})();function wb(r,i,s){if(!r)throw new Error(`Cannot find '${s}' in '${i}'`);return r}const kA=function(r){return null},LA=pb(null,"core",[{provide:nb,useValue:"unknown"},{provide:mb,deps:[ri]},{provide:cb,deps:[]},{provide:ib,deps:[]}]),$A=[{provide:Xg,useClass:Xg,deps:[Wa,ri,$e,Sf,Ff]},{provide:BD,deps:[Wa],useFactory:function(r){let i=[];return r.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(s){i.push(s)}}},{provide:Ff,useClass:Ff,deps:[[new ho,Jv]]},{provide:Jg,useClass:Jg,deps:[]},qT,{provide:zy,useFactory:function(){return PI},deps:[]},{provide:qy,useFactory:function(){return kI},deps:[]},{provide:i_,useFactory:function(r){return yv(r=r||"undefined"!=typeof $localize&&$localize.locale||Uy),r},deps:[[new sl(i_),new ho,new Na]]},{provide:sb,useValue:"USD"}];let GA=(()=>{class r{constructor(s){}}return r.\u0275fac=function(s){return new(s||r)(Gr(Xg))},r.\u0275mod=Ei({type:r}),r.\u0275inj=wr({providers:$A}),r})()},8006:(bt,Be,$)=>{"use strict";$.d(Be,{zQ:()=>Et,ww:()=>Qt,rT:()=>xe,f7:()=>Ie,L6:()=>Le,_Q:()=>ge,lh:()=>ve,Qv:()=>Me,nw:()=>Ye});var w=$(3018),U=$(9765),ne=$(5917),Re=$(8891),Ce=$(4402),ce=$(6682),Se=$(7771),de=$(5319),oe=$(309),J=$(7971),Q=$(8858);class he extends U.xQ{constructor(dt=Number.POSITIVE_INFINITY,Ot=Number.POSITIVE_INFINITY,en){super(),this.scheduler=en,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=dt<1?1:dt,this._windowTime=Ot<1?1:Ot,Ot===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(dt){if(!this.isStopped){const Ot=this._events;Ot.push(dt),Ot.length>this._bufferSize&&Ot.shift()}super.next(dt)}nextTimeWindow(dt){this.isStopped||(this._events.push(new ye(this._getNow(),dt)),this._trimBufferThenGetEvents()),super.next(dt)}_subscribe(dt){const Ot=this._infiniteTimeWindow,en=Ot?this._events:this._trimBufferThenGetEvents(),Lt=this.scheduler,on=en.length;let wt;if(this.closed)throw new J.N;if(this.isStopped||this.hasError?wt=de.w.EMPTY:(this.observers.push(dt),wt=new Q.W(this,dt)),Lt&&dt.add(dt=new oe.ht(dt,Lt)),Ot)for(let pt=0;pt<on&&!dt.closed;pt++)dt.next(en[pt]);else for(let pt=0;pt<on&&!dt.closed;pt++)dt.next(en[pt].value);return this.hasError?dt.error(this.thrownError):this.isStopped&&dt.complete(),wt}_getNow(){return(this.scheduler||Se.c).now()}_trimBufferThenGetEvents(){const dt=this._getNow(),Ot=this._bufferSize,en=this._windowTime,Lt=this._events,on=Lt.length;let wt=0;for(;wt<on&&!(dt-Lt[wt].time<en);)wt++;return on>Ot&&(wt=Math.max(wt,on-Ot)),wt>0&&Lt.splice(0,wt),Lt}}class ye{constructor(dt,Ot){this.time=dt,this.value=Ot}}function _e(ut,dt,Ot){let en;return en=ut&&"object"==typeof ut?ut:{bufferSize:ut,windowTime:dt,refCount:!1,scheduler:Ot},Lt=>Lt.lift(function({bufferSize:ut=Number.POSITIVE_INFINITY,windowTime:dt=Number.POSITIVE_INFINITY,refCount:Ot,scheduler:en}){let Lt,wt,on=0,pt=!1,$t=!1;return function(Fn){let ln;on++,!Lt||pt?(pt=!1,Lt=new he(ut,dt,en),ln=Lt.subscribe(this),wt=Fn.subscribe({next(sr){Lt.next(sr)},error(sr){pt=!0,Lt.error(sr)},complete(){$t=!0,wt=void 0,Lt.complete()}}),$t&&(wt=void 0)):ln=Lt.subscribe(this),this.add(()=>{on--,ln.unsubscribe(),ln=void 0,wt&&!$t&&Ot&&0===on&&(wt.unsubscribe(),wt=void 0,Lt=void 0)})}}(en))}var Fe=$(3190);function Te(ut,dt){return dt?(0,Fe.w)(()=>ut,dt):(0,Fe.w)(()=>ut)}var ot=$(8002),st=$(8049),Xe=$(3101),rt=$(5435),se=$(9126),lt=$(8939),Wt=$(8583),Yt=$(7841);const Me=new w.OlP("angularfire2.auth.use-emulator"),Le=new w.OlP("angularfire2.auth.settings"),ge=new w.OlP("angularfire2.auth.tenant-id"),xe=new w.OlP("angularfire2.auth.langugage-code"),ve=new w.OlP("angularfire2.auth.use-device-language"),Ie=new w.OlP("angularfire.auth.persistence"),Ye=(ut,dt,Ot,en,Lt,on,wt,pt)=>(0,se.cc)(`${ut.name}.auth`,"AngularFireAuth",ut.name,()=>{const $t=dt.runOutsideAngular(()=>ut.auth());if(Ot&&$t.useEmulator(...Ot),en&&($t.tenantId=en),$t.languageCode=Lt,on&&$t.useDeviceLanguage(),wt)for(const[hn,Fn]of Object.entries(wt))$t.settings[hn]=Fn;return pt&&$t.setPersistence(pt),$t},[Ot,en,Lt,on,wt,pt]);let Et=(()=>{class ut{constructor(Ot,en,Lt,on,wt,pt,$t,hn,Fn,ln,sr){const wr=new U.xQ,Dn=(0,ne.of)(void 0).pipe((0,oe.QV)(wt.outsideAngular),(0,Fe.w)(()=>on.runOutsideAngular(()=>Promise.resolve().then($.bind($,5841)))),(0,ot.U)(()=>(0,lt.on)(Ot,on,en)),(0,ot.U)(Tn=>Ye(Tn,on,pt,hn,Fn,ln,$t,sr)),_e({bufferSize:1,refCount:!1}));if((0,Wt.PM)(Lt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ne.of)(null);else{Dn.pipe((0,st.P)()).subscribe();const An=Dn.pipe((0,Fe.w)(Pt=>Pt.getRedirectResult().then(Sn=>Sn,()=>null)),se.iC,_e({bufferSize:1,refCount:!1})),fn=Dn.pipe((0,Fe.w)(Pt=>new Re.y(Sn=>({unsubscribe:on.runOutsideAngular(()=>Pt.onAuthStateChanged(Ar=>Sn.next(Ar),Ar=>Sn.error(Ar),()=>Sn.complete()))})))),jn=Dn.pipe((0,Fe.w)(Pt=>new Re.y(Sn=>({unsubscribe:on.runOutsideAngular(()=>Pt.onIdTokenChanged(Ar=>Sn.next(Ar),Ar=>Sn.error(Ar),()=>Sn.complete()))}))));this.authState=An.pipe(Te(fn),(0,Xe.R)(wt.outsideAngular),(0,oe.QV)(wt.insideAngular)),this.user=An.pipe(Te(jn),(0,Xe.R)(wt.outsideAngular),(0,oe.QV)(wt.insideAngular)),this.idToken=this.user.pipe((0,Fe.w)(Pt=>Pt?(0,Ce.D)(Pt.getIdToken()):(0,ne.of)(null))),this.idTokenResult=this.user.pipe((0,Fe.w)(Pt=>Pt?(0,Ce.D)(Pt.getIdTokenResult()):(0,ne.of)(null))),this.credential=(0,ce.T)(An,wr,this.authState.pipe((0,rt.h)(Pt=>!Pt))).pipe((0,ot.U)(Pt=>(null==Pt?void 0:Pt.user)?Pt:null),(0,Xe.R)(wt.outsideAngular),(0,oe.QV)(wt.insideAngular))}return(0,lt.pX)(this,Dn,on,{spy:{apply:(Tn,An,fn)=>{(Tn.startsWith("signIn")||Tn.startsWith("createUser"))&&fn.then(jn=>wr.next(jn))}}})}}return ut.\u0275fac=function(Ot){return new(Ot||ut)(w.LFG(lt.Dh),w.LFG(lt.xv,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(se.HU),w.LFG(Me,8),w.LFG(Le,8),w.LFG(ge,8),w.LFG(xe,8),w.LFG(ve,8),w.LFG(Ie,8))},ut.\u0275prov=w.Yz7({token:ut,factory:ut.\u0275fac,providedIn:"any"}),ut})(),Qt=(()=>{class ut{constructor(){Yt.Z.registerVersion("angularfire",se.q4.full,"auth-compat")}}return ut.\u0275fac=function(Ot){return new(Ot||ut)},ut.\u0275mod=w.oAB({type:ut}),ut.\u0275inj=w.cJS({providers:[Et]}),ut})()},166:(bt,Be,$)=>{"use strict";$.d(Be,{ST:()=>Pg,yb:()=>Vy});var w=$(3018),U=$(3637),ne=$(8891),Re=$(4402),Ce=$(5917),ce=$(9126),Se=$(7393);function de(){return a=>a.lift(new oe)}class oe{call(n,o){return o.subscribe(new J(n))}}class J extends Se.L{constructor(n){super(n),this.hasPrev=!1}_next(n){let o;this.hasPrev?o=[this.prev,n]:this.hasPrev=!0,this.prev=n,o&&this.destination.next(o)}}class he{constructor(n,o){this.compare=n,this.keySelector=o}call(n,o){return o.subscribe(new ye(n,this.compare,this.keySelector))}}class ye extends Se.L{constructor(n,o,l){super(n),this.keySelector=l,this.hasKey=!1,"function"==typeof o&&(this.compare=o)}compare(n,o){return n===o}_next(n){let o;try{const{keySelector:h}=this;o=h?h(n):n}catch(h){return this.destination.error(h)}let l=!1;if(this.hasKey)try{const{compare:h}=this;l=h(this.key,o)}catch(h){return this.destination.error(h)}else this.hasKey=!0;l||(this.key=o,this.destination.next(n))}}var ge,_e=$(9761),We=$(8002),Fe=$(2145),Te=$(5435),ot=$(8939),st=$(8583),rt=($(5841),$(4486)),se=$(8239),lt=$(5452),Wt=$(6034),Yt=$(5601),Ue=$(3854),Me="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Le={},xe=xe||{},ve=Me||self;function Ie(){}function Ye(a){var n=typeof a;return"array"==(n="object"!=n?n:a?Array.isArray(a)?"array":n:"null")||"object"==n&&"number"==typeof a.length}function Et(a){var n=typeof a;return"object"==n&&null!=a||"function"==n}var ut="closure_uid_"+(1e9*Math.random()>>>0),dt=0;function Ot(a,n,o){return a.call.apply(a.bind,arguments)}function en(a,n,o){if(!a)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,l),a.apply(n,h)}}return function(){return a.apply(n,arguments)}}function Lt(a,n,o){return(Lt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ot:en).apply(null,arguments)}function on(a,n){var o=Array.prototype.slice.call(arguments,1);return function(){var l=o.slice();return l.push.apply(l,arguments),a.apply(this,l)}}function wt(a,n){function o(){}o.prototype=n.prototype,a.Z=n.prototype,a.prototype=new o,a.prototype.constructor=a,a.Vb=function(l,h,y){for(var I=Array(arguments.length-2),k=2;k<arguments.length;k++)I[k-2]=arguments[k];return n.prototype[h].apply(l,I)}}function pt(){this.s=this.s,this.o=this.o}var hn={};pt.prototype.s=!1,pt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var a=function(a){return Object.prototype.hasOwnProperty.call(a,ut)&&a[ut]||(a[ut]=++dt)}(this);delete hn[a]}},pt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Fn=Array.prototype.indexOf?function(a,n){return Array.prototype.indexOf.call(a,n,void 0)}:function(a,n){if("string"==typeof a)return"string"!=typeof n||1!=n.length?-1:a.indexOf(n,0);for(let o=0;o<a.length;o++)if(o in a&&a[o]===n)return o;return-1},ln=Array.prototype.forEach?function(a,n,o){Array.prototype.forEach.call(a,n,o)}:function(a,n,o){const l=a.length,h="string"==typeof a?a.split(""):a;for(let y=0;y<l;y++)y in h&&n.call(o,h[y],y,a)};function wr(a){return Array.prototype.concat.apply([],arguments)}function Dn(a){const n=a.length;if(0<n){const o=Array(n);for(let l=0;l<n;l++)o[l]=a[l];return o}return[]}function Tn(a){return/^[\s\xa0]*$/.test(a)}var Pt,An=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function fn(a,n){return-1!=a.indexOf(n)}function jn(a,n){return a<n?-1:a>n?1:0}e:{var Sn=ve.navigator;if(Sn){var Ar=Sn.userAgent;if(Ar){Pt=Ar;break e}}Pt=""}function jt(a,n,o){for(const l in a)n.call(o,a[l],l,a)}function Je(a){const n={};for(const o in a)n[o]=a[o];return n}var In="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bn(a,n){let o,l;for(let h=1;h<arguments.length;h++){for(o in l=arguments[h],l)a[o]=l[o];for(let y=0;y<In.length;y++)o=In[y],Object.prototype.hasOwnProperty.call(l,o)&&(a[o]=l[o])}}function Mn(a){return Mn[" "](a),a}Mn[" "]=Ie;var Ut,a,Rt=fn(Pt,"Opera"),Tt=fn(Pt,"Trident")||fn(Pt,"MSIE"),$n=fn(Pt,"Edge"),ys=$n||Tt,is=fn(Pt,"Gecko")&&!(fn(Pt.toLowerCase(),"webkit")&&!fn(Pt,"Edge"))&&!(fn(Pt,"Trident")||fn(Pt,"MSIE"))&&!fn(Pt,"Edge"),Xn=fn(Pt.toLowerCase(),"webkit")&&!fn(Pt,"Edge");function Fr(){var a=ve.document;return a?a.documentMode:void 0}e:{var pe="",fe=(a=Pt,is?/rv:([^\);]+)(\)|;)/.exec(a):$n?/Edge\/([\d\.]+)/.exec(a):Tt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Xn?/WebKit\/(\S+)/.exec(a):Rt?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(fe&&(pe=fe?fe[1]:""),Tt){var ue=Fr();if(null!=ue&&ue>parseFloat(pe)){Ut=String(ue);break e}}Ut=pe}var ze={};function Pe(){return n=ze,Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=function(){let a=0;const n=An(String(Ut)).split("."),o=An("9").split("."),l=Math.max(n.length,o.length);for(let I=0;0==a&&I<l;I++){var h=n[I]||"",y=o[I]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],y=/(\d*)(\D*)(.*)/.exec(y)||["","","",""],0==h[0].length&&0==y[0].length)break;a=jn(0==h[1].length?0:parseInt(h[1],10),0==y[1].length?0:parseInt(y[1],10))||jn(0==h[2].length,0==y[2].length)||jn(h[2],y[2]),h=h[3],y=y[3]}while(0==a)}return 0<=a}();var n}var sn=ve.document&&Tt&&(Fr()||parseInt(Ut,10))||void 0,Ln=function(){if(!ve.addEventListener||!Object.defineProperty)return!1;var a=!1,n=Object.defineProperty({},"passive",{get:function(){a=!0}});try{ve.addEventListener("test",Ie,n),ve.removeEventListener("test",Ie,n)}catch(o){}return a}();function tn(a,n){this.type=a,this.g=this.target=n,this.defaultPrevented=!1}function cr(a,n){if(tn.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var o=this.type=a.type,l=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=n,n=a.relatedTarget){if(is){e:{try{Mn(n.nodeName);var h=!0;break e}catch(y){}h=!1}h||(n=null)}}else"mouseover"==o?n=a.fromElement:"mouseout"==o&&(n=a.toElement);this.relatedTarget=n,l?(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:pn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&cr.Z.h.call(this)}}tn.prototype.h=function(){this.defaultPrevented=!0},wt(cr,tn);var pn={2:"touch",3:"pen",4:"mouse"};cr.prototype.h=function(){cr.Z.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Jt="closure_listenable_"+(1e6*Math.random()|0),Vn=0;function ks(a,n,o,l,h){this.listener=a,this.proxy=null,this.src=n,this.type=o,this.capture=!!l,this.ia=h,this.key=++Vn,this.ca=this.fa=!1}function _s(a){a.ca=!0,a.listener=null,a.proxy=null,a.src=null,a.ia=null}function vs(a){this.src=a,this.g={},this.h=0}function ss(a,n){var o=n.type;if(o in a.g){var y,l=a.g[o],h=Fn(l,n);(y=0<=h)&&Array.prototype.splice.call(l,h,1),y&&(_s(n),0==a.g[o].length&&(delete a.g[o],a.h--))}}function os(a,n,o,l){for(var h=0;h<a.length;++h){var y=a[h];if(!y.ca&&y.listener==n&&y.capture==!!o&&y.ia==l)return h}return-1}vs.prototype.add=function(a,n,o,l,h){var y=a.toString();(a=this.g[y])||(a=this.g[y]=[],this.h++);var I=os(a,n,l,h);return-1<I?(n=a[I],o||(n.fa=!1)):((n=new ks(n,this.src,y,!!l,h)).fa=o,a.push(n)),n};var Es="closure_lm_"+(1e6*Math.random()|0),Ei={};function dr(a,n,o,l,h){if(l&&l.once)return wi(a,n,o,l,h);if(Array.isArray(n)){for(var y=0;y<n.length;y++)dr(a,n[y],o,l,h);return null}return o=ht(o),a&&a[Jt]?a.N(n,o,Et(l)?!!l.capture:!!l,h):hr(a,n,o,!1,l,h)}function hr(a,n,o,l,h,y){if(!n)throw Error("Invalid event type");var I=Et(h)?!!h.capture:!!h,k=Zs(a);if(k||(a[Es]=k=new vs(a)),(o=k.add(n,o,l,I,y)).proxy)return o;if(l=function(){var n=Qn;return function a(o){return n.call(a.src,a.listener,o)}}(),o.proxy=l,l.src=a,l.listener=o,a.addEventListener)Ln||(h=I),void 0===h&&(h=!1),a.addEventListener(n.toString(),l,h);else if(a.attachEvent)a.attachEvent(Bi(n.toString()),l);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(l)}return o}function wi(a,n,o,l,h){if(Array.isArray(n)){for(var y=0;y<n.length;y++)wi(a,n[y],o,l,h);return null}return o=ht(o),a&&a[Jt]?a.O(n,o,Et(l)?!!l.capture:!!l,h):hr(a,n,o,!0,l,h)}function Mt(a,n,o,l,h){if(Array.isArray(n))for(var y=0;y<n.length;y++)Mt(a,n[y],o,l,h);else l=Et(l)?!!l.capture:!!l,o=ht(o),a&&a[Jt]?(a=a.i,(n=String(n).toString())in a.g&&-1<(o=os(y=a.g[n],o,l,h))&&(_s(y[o]),Array.prototype.splice.call(y,o,1),0==y.length&&(delete a.g[n],a.h--))):a&&(a=Zs(a))&&(n=a.g[n.toString()],a=-1,n&&(a=os(n,o,l,h)),(o=-1<a?n[a]:null)&&Sr(o))}function Sr(a){if("number"!=typeof a&&a&&!a.ca){var n=a.src;if(n&&n[Jt])ss(n.i,a);else{var o=a.type,l=a.proxy;n.removeEventListener?n.removeEventListener(o,l,a.capture):n.detachEvent?n.detachEvent(Bi(o),l):n.addListener&&n.removeListener&&n.removeListener(l),(o=Zs(n))?(ss(o,a),0==o.h&&(o.src=null,n[Es]=null)):_s(a)}}}function Bi(a){return a in Ei?Ei[a]:Ei[a]="on"+a}function Qn(a,n){if(a.ca)a=!0;else{n=new cr(n,this);var o=a.listener,l=a.ia||a.src;a.fa&&Sr(a),a=o.call(l,n)}return a}function Zs(a){return(a=a[Es])instanceof vs?a:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ht(a){return"function"==typeof a?a:(a[gn]||(a[gn]=function(n){return a.handleEvent(n)}),a[gn])}function xt(){pt.call(this),this.i=new vs(this),this.P=this,this.I=null}function zt(a,n){var o,l=a.I;if(l)for(o=[];l;l=l.I)o.push(l);if(a=a.P,l=n.type||n,"string"==typeof n)n=new tn(n,a);else if(n instanceof tn)n.target=n.target||a;else{var h=n;Bn(n=new tn(l,a),h)}if(h=!0,o)for(var y=o.length-1;0<=y;y--){var I=n.g=o[y];h=or(I,l,!0,n)&&h}if(h=or(I=n.g=a,l,!0,n)&&h,h=or(I,l,!1,n)&&h,o)for(y=0;y<o.length;y++)h=or(I=n.g=o[y],l,!1,n)&&h}function or(a,n,o,l){if(!(n=a.i.g[String(n)]))return!0;n=n.concat();for(var h=!0,y=0;y<n.length;++y){var I=n[y];if(I&&!I.ca&&I.capture==o){var k=I.listener,G=I.ia||I.src;I.fa&&ss(a.i,I),h=!1!==k.call(G,l)&&h}}return h&&!l.defaultPrevented}wt(xt,pt),xt.prototype[Jt]=!0,xt.prototype.removeEventListener=function(a,n,o,l){Mt(this,a,n,o,l)},xt.prototype.M=function(){if(xt.Z.M.call(this),this.i){var n,a=this.i;for(n in a.g){for(var o=a.g[n],l=0;l<o.length;l++)_s(o[l]);delete a.g[n],a.h--}}this.I=null},xt.prototype.N=function(a,n,o,l){return this.i.add(String(a),n,!1,o,l)},xt.prototype.O=function(a,n,o,l){return this.i.add(String(a),n,!0,o,l)};var Ri=ve.JSON.stringify;function On(){var a=Lr;let n=null;return a.g&&(n=a.g,a.g=a.g.next,a.g||(a.h=null),n.next=null),n}var Fs,xn=new class{constructor(a,n){this.i=a,this.j=n,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}(()=>new ji,a=>a.reset());class ji{constructor(){this.next=this.g=this.h=null}set(n,o){this.h=n,this.g=o,this.next=null}reset(){this.next=this.g=this.h=null}}function $i(a){ve.setTimeout(()=>{throw a},0)}function qt(a,n){Fs||function(){var a=ve.Promise.resolve(void 0);Fs=function(){a.then(Rr)}}(),us||(Fs(),us=!0),Lr.add(a,n)}var us=!1,Lr=new class{constructor(){this.h=this.g=null}add(n,o){const l=xn.get();l.set(n,o),this.h?this.h.next=l:this.g=l,this.h=l}};function Rr(){for(var a;a=On();){try{a.h.call(a.g)}catch(o){$i(o)}var n=xn;n.j(a),100>n.h&&(n.h++,a.next=n.g,n.g=a)}us=!1}function xi(a,n){xt.call(this),this.h=a||1,this.g=n||ve,this.j=Lt(this.kb,this),this.l=Date.now()}function Ni(a){a.da=!1,a.S&&(a.g.clearTimeout(a.S),a.S=null)}function Vr(a,n,o){if("function"==typeof a)o&&(a=Lt(a,o));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=Lt(a.handleEvent,a)}return 2147483647<Number(n)?-1:ve.setTimeout(a,n||0)}function Rn(a){a.g=Vr(()=>{a.g=null,a.i&&(a.i=!1,Rn(a))},a.j);const n=a.h;a.h=null,a.m.apply(null,n)}wt(xi,xt),(ge=xi.prototype).da=!1,ge.S=null,ge.kb=function(){if(this.da){var a=Date.now()-this.l;0<a&&a<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-a):(this.S&&(this.g.clearTimeout(this.S),this.S=null),zt(this,"tick"),this.da&&(Ni(this),this.start()))}},ge.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ge.M=function(){xi.Z.M.call(this),Ni(this),delete this.g};class ws extends pt{constructor(n,o){super(),this.m=n,this.j=o,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:Rn(this)}M(){super.M(),this.g&&(ve.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(a){pt.call(this),this.h=a,this.g={}}wt(Hi,pt);var bs=[];function hi(a,n,o,l){Array.isArray(o)||(o&&(bs[0]=o.toString()),o=bs);for(var h=0;h<o.length;h++){var y=dr(n,o[h],l||a.handleEvent,!1,a.h||a);if(!y)break;a.g[y.key]=y}}function bi(a){jt(a.g,function(n,o){this.g.hasOwnProperty(o)&&Sr(n)},a),a.g={}}function Mi(){this.g=!0}function Ur(a,n,o,l){a.info(function(){return"XMLHTTP TEXT ("+n+"): "+function(a,n){if(!a.g)return n;if(!n)return null;try{var o=JSON.parse(n);if(o)for(a=0;a<o.length;a++)if(Array.isArray(o[a])){var l=o[a];if(!(2>l.length)){var h=l[1];if(Array.isArray(h)&&!(1>h.length)){var y=h[0];if("noop"!=y&&"stop"!=y&&"close"!=y)for(var I=1;I<h.length;I++)h[I]=""}}}return Ri(o)}catch(k){return n}}(a,o)+(l?" "+l:"")})}Hi.prototype.M=function(){Hi.Z.M.call(this),bi(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mi.prototype.Aa=function(){this.g=!1},Mi.prototype.info=function(){};var qr={},Gi=null;function fr(){return Gi=Gi||new xt}function pr(a){tn.call(this,qr.Ma,a)}function Wi(a){const n=fr();zt(n,new pr(n,a))}function Ys(a,n){tn.call(this,qr.STAT_EVENT,a),this.stat=n}function ar(a){const n=fr();zt(n,new Ys(n,a))}function Cs(a,n){tn.call(this,qr.Na,a),this.size=n}function zi(a,n){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return ve.setTimeout(function(){a()},n)}qr.Ma="serverreachability",wt(pr,tn),qr.STAT_EVENT="statevent",wt(Ys,tn),qr.Na="timingevent",wt(Cs,tn);var ko={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Qo={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function go(){}function Qs(){}go.prototype.h=null;var Js,Is={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Kr(){tn.call(this,"d")}function Fo(){tn.call(this,"c")}function Hn(){}function Oi(a,n,o,l){this.l=a,this.j=n,this.m=o,this.X=l||1,this.V=new Hi(this),this.P=Xs,this.W=new xi(a=ys?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new xr}function xr(){this.i=null,this.g="",this.h=!1}wt(Kr,tn),wt(Fo,tn),wt(Hn,go),Hn.prototype.g=function(){return new XMLHttpRequest},Hn.prototype.i=function(){return{}},Js=new Hn;var Xs=45e3,Ds={},Pi={};function Jo(a,n,o){a.K=1,a.v=A(K(n)),a.s=o,a.U=!0,bn(a,null)}function bn(a,n){a.F=Date.now(),ls(a),a.A=K(a.v);var o=a.A,l=a.X;Array.isArray(l)||(l=[String(l)]),Kt(o.h,"t",l),a.C=0,o=a.l.H,a.h=new xr,a.g=lr(a.l,o?n:null,!a.s),0<a.O&&(a.L=new ws(Lt(a.Ia,a,a.g),a.O)),hi(a.V,a.g,"readystatechange",a.gb),n=a.H?Je(a.H):{},a.s?(a.u||(a.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.s,n)):(a.u="GET",a.g.ea(a.A,a.u,null,n)),Wi(1),function(a,n,o,l,h,y){a.info(function(){if(a.g)if(y)for(var I="",k=y.split("&"),G=0;G<k.length;G++){var X=k[G].split("=");if(1<X.length){var re=X[0];X=X[1];var be=re.split("_");I=2<=be.length&&"type"==be[1]?I+(re+"=")+X+"&":I+(re+"=redacted&")}}else I=null;else I=y;return"XMLHTTP REQ ("+l+") [attempt "+h+"]: "+n+"\n"+o+"\n"+I})}(a.j,a.u,a.A,a.m,a.X,a.s)}function Lo(a){return!!a.g&&"GET"==a.u&&2!=a.K&&a.l.Ba}function ii(a,n,o){let h,l=!0;for(;!a.I&&a.C<o.length;){if(h=Ts(a,o),h==Pi){4==n&&(a.o=4,ar(14),l=!1),Ur(a.j,a.m,null,"[Incomplete Response]");break}if(h==Ds){a.o=4,ar(15),Ur(a.j,a.m,o,"[Invalid Chunk]"),l=!1;break}Ur(a.j,a.m,h,null),Zr(a,h)}Lo(a)&&h!=Pi&&h!=Ds&&(a.h.g="",a.C=0),4!=n||0!=o.length||a.h.h||(a.o=1,ar(16),l=!1),a.i=a.i&&l,l?0<o.length&&!a.aa&&(a.aa=!0,(n=a.l).g==a&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+o.length),Xa(n),n.L=!0,ar(11))):(Ur(a.j,a.m,o,"[Invalid Chunked Response]"),Ci(a),to(a))}function Ts(a,n){var o=a.C,l=n.indexOf("\n",o);return-1==l?Pi:(o=Number(n.substring(o,l)),isNaN(o)?Ds:(l+=1)+o>n.length?Pi:(n=n.substr(l,o),a.C=l+o,n))}function ls(a){a.Y=Date.now()+a.P,eo(a,a.P)}function eo(a,n){if(null!=a.B)throw Error("WatchDog timer not null");a.B=zi(Lt(a.eb,a),n)}function Nr(a){a.B&&(ve.clearTimeout(a.B),a.B=null)}function to(a){0==a.l.G||a.I||na(a.l,a)}function Ci(a){Nr(a);var n=a.L;n&&"function"==typeof n.na&&n.na(),a.L=null,Ni(a.W),bi(a.V),a.g&&(n=a.g,a.g=null,n.abort(),n.na())}function Zr(a,n){try{var o=a.l;if(0!=o.G&&(o.g==a||Ze(o.i,a)))if(o.I=a.N,!a.J&&Ze(o.i,a)&&3==o.G){try{var l=o.Ca.g.parse(n)}catch(X){l=null}if(Array.isArray(l)&&3==l.length){var h=l;if(0==h[0])e:if(o.u)o.ta=h[1],0<o.ta-o.U&&37500>h[2]&&o.N&&0==o.A&&!o.v&&(o.v=zi(Lt(o.ab,o),6e3));else{if(o.g){if(!(o.g.F+3e3<a.F))break e;Rs(o),Nu(o)}Ja(o),ar(18)}if(1>=Su(o.i)&&o.ka){try{o.ka()}catch(X){}o.ka=void 0}}else Us(o,11)}else if((a.J||o.g==a)&&Rs(o),!Tn(n))for(h=o.Ca.g.parse(n),n=0;n<h.length;n++){let X=h[n];if(o.U=X[0],X=X[1],2==o.G)if("c"==X[0]){o.J=X[1],o.la=X[2];const re=X[3];null!=re&&(o.ma=re,o.h.info("VER="+o.ma));const be=X[4];null!=be&&(o.za=be,o.h.info("SVER="+o.za));const Ge=X[5];null!=Ge&&"number"==typeof Ge&&0<Ge&&(o.K=l=1.5*Ge,o.h.info("backChannelRequestTimeoutMs_="+l)),l=o;const Qe=a.g;if(Qe){const _t=Qe.g?Qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_t){var y=l.i;!y.g&&(fn(_t,"spdy")||fn(_t,"quic")||fn(_t,"h2"))&&(y.j=y.l,y.g=new Set,y.h&&(Xt(y,y.h),y.h=null))}if(l.D){const Bt=Qe.g?Qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Bt&&(l.sa=Bt,x(l.F,l.D,Bt))}}o.G=3,o.j&&o.j.xa(),o.$&&(o.O=Date.now()-a.F,o.h.info("Handshake RTT: "+o.O+"ms"));var I=a;if((l=o).oa=so(l,l.H?l.la:null,l.W),I.J){ya(l.i,I);var k=I,G=l.K;G&&k.setTimeout(G),k.B&&(Nr(k),ls(k)),l.g=I}else Uo(l);0<o.l.length&&As(o)}else"stop"!=X[0]&&"close"!=X[0]||Us(o,7);else 3==o.G&&("stop"==X[0]||"close"==X[0]?"stop"==X[0]?Us(o,7):ba(o):"noop"!=X[0]&&o.j&&o.j.wa(X),o.A=0)}Wi(4)}catch(X){}}function si(a,n){if(a.forEach&&"function"==typeof a.forEach)a.forEach(n,void 0);else if(Ye(a)||"string"==typeof a)ln(a,n,void 0);else{if(a.T&&"function"==typeof a.T)var o=a.T();else if(a.R&&"function"==typeof a.R)o=void 0;else if(Ye(a)||"string"==typeof a){o=[];for(var l=a.length,h=0;h<l;h++)o.push(h)}else for(h in o=[],l=0,a)o[l++]=h;h=(l=function(a){if(a.R&&"function"==typeof a.R)return a.R();if("string"==typeof a)return a.split("");if(Ye(a)){for(var n=[],o=a.length,l=0;l<o;l++)n.push(a[l]);return n}for(l in n=[],o=0,a)n[o++]=a[l];return n}(a)).length;for(var y=0;y<h;y++)n.call(void 0,l[y],o&&o[y],a)}}function qi(a,n){this.h={},this.g=[],this.i=0;var o=arguments.length;if(1<o){if(o%2)throw Error("Uneven number of arguments");for(var l=0;l<o;l+=2)this.set(arguments[l],arguments[l+1])}else if(a)if(a instanceof qi)for(o=a.T(),l=0;l<o.length;l++)this.set(o[l],a.get(o[l]));else for(l in a)this.set(l,a[l])}function oi(a){if(a.i!=a.g.length){for(var n=0,o=0;n<a.g.length;){var l=a.g[n];Ki(a.h,l)&&(a.g[o++]=l),n++}a.g.length=o}if(a.i!=a.g.length){var h={};for(o=n=0;n<a.g.length;)Ki(h,l=a.g[n])||(a.g[o++]=l,h[l]=1),n++;a.g.length=o}}function Ki(a,n){return Object.prototype.hasOwnProperty.call(a,n)}(ge=Oi.prototype).setTimeout=function(a){this.P=a},ge.gb=function(a){a=a.target;const n=this.L;n&&3==ds(a)?n.l():this.Ia(a)},ge.Ia=function(a){try{if(a==this.g)e:{const re=ds(this.g);var n=this.g.Da();const be=this.g.ba();if(!(3>re)&&(3!=re||ys||this.g&&(this.h.h||this.g.ga()||ta(this.g)))){this.I||4!=re||7==n||Wi(8==n||0>=be?3:2),Nr(this);var o=this.g.ba();this.N=o;t:if(Lo(this)){var l=ta(this.g);a="";var h=l.length,y=4==ds(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ci(this),to(this);var I="";break t}this.h.i=new ve.TextDecoder}for(n=0;n<h;n++)this.h.h=!0,a+=this.h.i.decode(l[n],{stream:y&&n==h-1});l.splice(0,h),this.h.g+=a,this.C=0,I=this.h.g}else I=this.g.ga();if(this.i=200==o,function(a,n,o,l,h,y,I){a.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+h+"]: "+n+"\n"+o+"\n"+y+" "+I})}(this.j,this.u,this.A,this.m,this.X,re,o),this.i){if(this.$&&!this.J){t:{if(this.g){var k,G=this.g;if((k=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tn(k)){var X=k;break t}}X=null}if(!(o=X)){this.i=!1,this.o=3,ar(12),Ci(this),to(this);break e}Ur(this.j,this.m,o,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Zr(this,o)}this.U?(ii(this,re,I),ys&&this.i&&3==re&&(hi(this.V,this.W,"tick",this.fb),this.W.start())):(Ur(this.j,this.m,I,null),Zr(this,I)),4==re&&Ci(this),this.i&&!this.I&&(4==re?na(this.l,this):(this.i=!1,ls(this)))}else 400==o&&0<I.indexOf("Unknown SID")?(this.o=3,ar(12)):(this.o=0,ar(13)),Ci(this),to(this)}}}catch(re){}},ge.fb=function(){if(this.g){var a=ds(this.g),n=this.g.ga();this.C<n.length&&(Nr(this),ii(this,a,n),this.i&&4!=a&&ls(this))}},ge.cancel=function(){this.I=!0,Ci(this)},ge.eb=function(){this.B=null;const a=Date.now();0<=a-this.Y?(function(a,n){a.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(Wi(3),ar(17)),Ci(this),this.o=2,to(this)):eo(this,this.Y-a)},(ge=qi.prototype).R=function(){oi(this);for(var a=[],n=0;n<this.g.length;n++)a.push(this.h[this.g[n]]);return a},ge.T=function(){return oi(this),this.g.concat()},ge.get=function(a,n){return Ki(this.h,a)?this.h[a]:n},ge.set=function(a,n){Ki(this.h,a)||(this.i++,this.g.push(a)),this.h[a]=n},ge.forEach=function(a,n){for(var o=this.T(),l=0;l<o.length;l++){var h=o[l],y=this.get(h);a.call(n,y,h,this)}};var L=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function F(a,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,a instanceof F){this.g=void 0!==n?n:a.g,le(this,a.j),this.s=a.s,Oe(this,a.i),et(this,a.m),this.l=a.l,n=a.h;var o=new ur;o.i=n.i,n.g&&(o.g=new qi(n.g),o.h=n.h),P(this,o),this.o=a.o}else a&&(o=String(a).match(L))?(this.g=!!n,le(this,o[1]||"",!0),this.s=it(o[2]||""),Oe(this,o[3]||"",!0),et(this,o[4]),this.l=it(o[5]||"",!0),P(this,o[6]||"",!0),this.o=it(o[7]||"")):(this.g=!!n,this.h=new ur(null,this.g))}function K(a){return new F(a)}function le(a,n,o){a.j=o?it(n,!0):n,a.j&&(a.j=a.j.replace(/:$/,""))}function Oe(a,n,o){a.i=o?it(n,!0):n}function et(a,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);a.m=n}else a.m=null}function P(a,n,o){n instanceof ur?(a.h=n,function(a,n){n&&!a.j&&(Mr(a),a.i=null,a.g.forEach(function(o,l){var h=l.toLowerCase();l!=h&&(mo(this,l),Kt(this,h,o))},a)),a.j=n}(a.h,a.g)):(o||(n=At(n,ai)),a.h=new ur(n,a.g))}function x(a,n,o){a.h.set(n,o)}function A(a){return x(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function it(a,n){return a?n?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function At(a,n,o){return"string"==typeof a?(a=encodeURI(a).replace(n,Pn),o&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Pn(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}F.prototype.toString=function(){var a=[],n=this.j;n&&a.push(At(n,Yr,!0),":");var o=this.i;return(o||"file"==n)&&(a.push("//"),(n=this.s)&&a.push(At(n,Yr,!0),"@"),a.push(encodeURIComponent(String(o)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(o=this.m)&&a.push(":",String(o))),(o=this.l)&&(this.i&&"/"!=o.charAt(0)&&a.push("/"),a.push(At(o,"/"==o.charAt(0)?Nn:Cr,!0))),(o=this.h.toString())&&a.push("?",o),(o=this.o)&&a.push("#",At(o,Zi)),a.join("")};var Yr=/[#\/\?@]/g,Cr=/[#\?:]/g,Nn=/[#\?]/g,ai=/[#\?@]/g,Zi=/#/g;function ur(a,n){this.h=this.g=null,this.i=a||null,this.j=!!n}function Mr(a){a.g||(a.g=new qi,a.h=0,a.i&&function(a,n){if(a){a=a.split("&");for(var o=0;o<a.length;o++){var l=a[o].indexOf("="),h=null;if(0<=l){var y=a[o].substring(0,l);h=a[o].substring(l+1)}else y=a[o];n(y,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(a.i,function(n,o){a.add(decodeURIComponent(n.replace(/\+/g," ")),o)}))}function mo(a,n){Mr(a),n=ma(a,n),Ki(a.g.h,n)&&(a.i=null,a.h-=a.g.get(n).length,Ki((a=a.g).h,n)&&(delete a.h[n],a.i--,a.g.length>2*a.i&&oi(a)))}function yo(a,n){return Mr(a),n=ma(a,n),Ki(a.g.h,n)}function Kt(a,n,o){mo(a,n),0<o.length&&(a.i=null,a.g.set(ma(a,n),Dn(o)),a.h+=o.length)}function ma(a,n){return n=String(n),a.j&&(n=n.toLowerCase()),n}function za(a){this.l=a||qa,a=ve.PerformanceNavigationTiming?0<(a=ve.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):!!(ve.g&&ve.g.Ea&&ve.g.Ea()&&ve.g.Ea().Zb),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ge=ur.prototype).add=function(a,n){Mr(this),this.i=null,a=ma(this,a);var o=this.g.get(a);return o||this.g.set(a,o=[]),o.push(n),this.h+=1,this},ge.forEach=function(a,n){Mr(this),this.g.forEach(function(o,l){ln(o,function(h){a.call(n,h,l,this)},this)},this)},ge.T=function(){Mr(this);for(var a=this.g.R(),n=this.g.T(),o=[],l=0;l<n.length;l++)for(var h=a[l],y=0;y<h.length;y++)o.push(n[l]);return o},ge.R=function(a){Mr(this);var n=[];if("string"==typeof a)yo(this,a)&&(n=wr(n,this.g.get(ma(this,a))));else{a=this.g.R();for(var o=0;o<a.length;o++)n=wr(n,a[o])}return n},ge.set=function(a,n){return Mr(this),this.i=null,yo(this,a=ma(this,a))&&(this.h-=this.g.get(a).length),this.g.set(a,[n]),this.h+=1,this},ge.get=function(a,n){return a&&0<(a=this.R(a)).length?String(a[0]):n},ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var a=[],n=this.g.T(),o=0;o<n.length;o++){var l=n[o],h=encodeURIComponent(String(l));l=this.R(l);for(var y=0;y<l.length;y++){var I=h;""!==l[y]&&(I+="="+encodeURIComponent(String(l[y]))),a.push(I)}}return this.i=a.join("&")};var qa=10;function Ka(a){return!!a.h||!!a.g&&a.g.size>=a.j}function Su(a){return a.h?1:a.g?a.g.size:0}function Ze(a,n){return a.h?a.h==n:!!a.g&&a.g.has(n)}function Xt(a,n){a.g?a.g.add(n):a.h=n}function ya(a,n){a.h&&a.h==n?a.h=null:a.g&&a.g.has(n)&&a.g.delete(n)}function Gn(a){if(null!=a.h)return a.i.concat(a.h.D);if(null!=a.g&&0!==a.g.size){let n=a.i;for(const o of a.g.values())n=n.concat(o.D);return n}return Dn(a.i)}function _a(){}function no(){this.g=new _a}function Yi(a,n,o){const l=o||"";try{si(a,function(h,y){let I=h;Et(h)&&(I=Ri(h)),n.push(l+y+"="+encodeURIComponent(I))})}catch(h){throw n.push(l+"type="+encodeURIComponent("_badmap")),h}}function cs(a,n,o,l,h){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,h(l)}catch(y){}}function Ya(a){this.l=a.$b||null,this.j=a.ib||!1}function Xo(a,n){xt.call(this),this.D=a,this.u=n,this.m=void 0,this.readyState=Ii,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}za.prototype.cancel=function(){if(this.i=Gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const a of this.g.values())a.cancel();this.g.clear()}},_a.prototype.stringify=function(a){return ve.JSON.stringify(a,void 0)},_a.prototype.parse=function(a){return ve.JSON.parse(a,void 0)},wt(Ya,go),Ya.prototype.g=function(){return new Xo(this.l,this.j)},Ya.prototype.i=function(a){return function(){return a}}({}),wt(Xo,xt);var Ii=0;function ro(a){a.j.read().then(a.Sa.bind(a)).catch(a.ha.bind(a))}function Br(a){a.readyState=4,a.l=null,a.j=null,a.A=null,pi(a)}function pi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}(ge=Xo.prototype).open=function(a,n){if(this.readyState!=Ii)throw this.abort(),Error("Error reopening a connection");this.C=a,this.B=n,this.readyState=1,pi(this)},ge.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};a&&(n.body=a),(this.D||ve).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Br(this)),this.readyState=Ii},ge.Va=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if("arraybuffer"===this.responseType)a.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ve.ReadableStream&&"body"in a){if(this.j=a.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ro(this)}else a.text().then(this.Ua.bind(this),this.ha.bind(this))},ge.Sa=function(a){if(this.g){if(this.u&&a.value)this.response.push(a.value);else if(!this.u){var n=a.value?a.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!a.done}))&&(this.response=this.responseText+=n)}a.done?Br(this):pi(this),3==this.readyState&&ro(this)}},ge.Ua=function(a){this.g&&(this.response=this.responseText=a,Br(this))},ge.Ta=function(a){this.g&&(this.response=a,Br(this))},ge.ha=function(){this.g&&Br(this)},ge.setRequestHeader=function(a,n){this.v.append(a,n)},ge.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},ge.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],n=this.h.entries();for(var o=n.next();!o.done;)a.push((o=o.value)[0]+": "+o[1]),o=n.next();return a.join("\r\n")},Object.defineProperty(Xo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(a){this.m=a?"include":"same-origin"}});var Ru=ve.JSON.parse;function Wn(a){xt.call(this),this.headers=new qi,this.u=a||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tr,this.K=this.L=!1}wt(Wn,xt);var tr="",Vo=/^https?$/i,el=["POST","PUT"];function tl(a){return"content-type"==a.toLowerCase()}function ea(a,n){a.h=!1,a.g&&(a.l=!0,a.g.abort(),a.l=!1),a.j=n,a.m=5,Ea(a),_o(a)}function Ea(a){a.D||(a.D=!0,zt(a,"complete"),zt(a,"error"))}function io(a){if(a.h&&void 0!==xe&&(!a.C[1]||4!=ds(a)||2!=a.ba()))if(a.v&&4==ds(a))Vr(a.Fa,0,a);else if(zt(a,"readystatechange"),4==ds(a)){a.h=!1;try{const k=a.ba();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var o;if(!(o=n)){var l;if(l=0===k){var h=String(a.H).match(L)[1]||null;if(!h&&ve.self&&ve.self.location){var y=ve.self.location.protocol;h=y.substr(0,y.length-1)}l=!Vo.test(h?h.toLowerCase():"")}o=l}if(o)zt(a,"complete"),zt(a,"success");else{a.m=6;try{var I=2<ds(a)?a.g.statusText:""}catch(G){I=""}a.j=I+" ["+a.ba()+"]",Ea(a)}}finally{_o(a)}}}function _o(a,n){if(a.g){Qa(a);const o=a.g,l=a.C[0]?Ie:null;a.g=null,a.C=null,n||zt(a,"ready");try{o.onreadystatechange=l}catch(h){}}}function Qa(a){a.g&&a.K&&(a.g.ontimeout=null),a.A&&(ve.clearTimeout(a.A),a.A=null)}function ds(a){return a.g?a.g.readyState:0}function ta(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.J){case tr:case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch(n){return null}}function hs(a,n,o){e:{for(l in o){var l=!1;break e}l=!0}l||(o=function(a){let n="";return jt(a,function(o,l){n+=l,n+=":",n+=o,n+="\r\n"}),n}(o),"string"==typeof a?null!=o&&encodeURIComponent(String(o)):x(a,n,o))}function ki(a,n,o){return o&&o.internalChannelParams&&o.internalChannelParams[a]||n}function wa(a){this.za=0,this.l=[],this.h=new Mi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ki("failFast",!1,a),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ki("baseRetryDelayMs",5e3,a),this.$a=ki("retryDelaySeedMs",1e4,a),this.Ya=ki("forwardChannelMaxRetries",2,a),this.ra=ki("forwardChannelRequestTimeoutMs",2e4,a),this.qa=a&&a.xmlHttpFactory||void 0,this.Ba=a&&a.Yb||!1,this.K=void 0,this.H=a&&a.supportsCrossDomainXhr||!1,this.J="",this.i=new za(a&&a.concurrentRequestLimit),this.Ca=new no,this.ja=a&&a.fastHandshake||!1,this.Ra=a&&a.Wb||!1,a&&a.Aa&&this.h.Aa(),a&&a.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&a&&a.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!a||!1!==a.Xb}function ba(a){if(vo(a),3==a.G){var n=a.V++,o=K(a.F);x(o,"SID",a.J),x(o,"RID",n),x(o,"TYPE","terminate"),Eo(a,o),(n=new Oi(a,a.h,n,void 0)).K=2,n.v=A(K(o)),o=!1,ve.navigator&&ve.navigator.sendBeacon&&(o=ve.navigator.sendBeacon(n.v.toString(),"")),!o&&ve.Image&&((new Image).src=n.v,o=!0),o||(n.g=lr(n.l,null),n.g.ea(n.v)),n.F=Date.now(),ls(n)}gi(a)}function Nu(a){a.g&&(Xa(a),a.g.cancel(),a.g=null)}function vo(a){Nu(a),a.u&&(ve.clearTimeout(a.u),a.u=null),Rs(a),a.i.cancel(),a.m&&("number"==typeof a.m&&ve.clearTimeout(a.m),a.m=null)}function jr(a,n){a.l.push(new class{constructor(a,n){this.h=a,this.g=n}}(a.Za++,n)),3==a.G&&As(a)}function As(a){Ka(a.i)||a.m||(a.m=!0,qt(a.Ha,a),a.C=0)}function Ss(a,n){var o;o=n?n.m:a.V++;const l=K(a.F);x(l,"SID",a.J),x(l,"RID",o),x(l,"AID",a.U),Eo(a,l),a.o&&a.s&&hs(l,a.o,a.s),o=new Oi(a,a.h,o,a.C+1),null===a.o&&(o.H=a.s),n&&(a.l=n.D.concat(a.l)),n=Mu(a,o,1e3),o.setTimeout(Math.round(.5*a.ra)+Math.round(.5*a.ra*Math.random())),Xt(a.i,o),Jo(o,l,n)}function Eo(a,n){a.j&&si({},function(o,l){x(n,l,o)})}function Mu(a,n,o){o=Math.min(a.l.length,o);var l=a.j?Lt(a.j.Oa,a.j,a):null;e:{var h=a.l;let y=-1;for(;;){const I=["count="+o];-1==y?0<o?(y=h[0].h,I.push("ofs="+y)):y=0:I.push("ofs="+y);let k=!0;for(let G=0;G<o;G++){let X=h[G].h;const re=h[G].g;if(X-=y,0>X)y=Math.max(0,h[G].h-100),k=!1;else try{Yi(re,I,"req"+X+"_")}catch(be){l&&l(re)}}if(k){l=I.join("&");break e}}}return a=a.l.splice(0,o),n.D=a,l}function Uo(a){a.g||a.u||(a.Y=1,qt(a.Ga,a),a.A=0)}function Ja(a){return!(a.g||a.u||3<=a.A||(a.Y++,a.u=zi(Lt(a.Ga,a),Bo(a,a.A)),a.A++,0))}function Xa(a){null!=a.B&&(ve.clearTimeout(a.B),a.B=null)}function Vs(a){a.g=new Oi(a,a.h,"rpc",a.Y),null===a.o&&(a.g.H=a.s),a.g.O=0;var n=K(a.oa);x(n,"RID","rpc"),x(n,"SID",a.J),x(n,"CI",a.N?"0":"1"),x(n,"AID",a.U),Eo(a,n),x(n,"TYPE","xmlhttp"),a.o&&a.s&&hs(n,a.o,a.s),a.K&&a.g.setTimeout(a.K);var o=a.g;a=a.la,o.K=1,o.v=A(K(n)),o.s=null,o.U=!0,bn(o,a)}function Rs(a){null!=a.v&&(ve.clearTimeout(a.v),a.v=null)}function na(a,n){var o=null;if(a.g==n){Rs(a),Xa(a),a.g=null;var l=2}else{if(!Ze(a.i,n))return;o=n.D,ya(a.i,n),l=1}if(a.I=n.N,0!=a.G)if(n.i)if(1==l){o=n.s?n.s.length:0,n=Date.now()-n.F;var h=a.C;zt(l=fr(),new Cs(l,o,n,h)),As(a)}else Uo(a);else if(3==(h=n.o)||0==h&&0<a.I||!(1==l&&function(a,n){return!(Su(a.i)>=a.i.j-(a.m?1:0)||(a.m?(a.l=n.D.concat(a.l),0):1==a.G||2==a.G||a.C>=(a.Xa?0:a.Ya)||(a.m=zi(Lt(a.Ha,a,n),Bo(a,a.C)),a.C++,0)))}(a,n)||2==l&&Ja(a)))switch(o&&0<o.length&&(n=a.i,n.i=n.i.concat(o)),h){case 1:Us(a,5);break;case 4:Us(a,10);break;case 3:Us(a,6);break;default:Us(a,2)}}function Bo(a,n){let o=a.Pa+Math.floor(Math.random()*a.$a);return a.j||(o*=2),o*n}function Us(a,n){if(a.h.info("Error code "+n),2==n){var o=null;a.j&&(o=null);var l=Lt(a.jb,a);o||(o=new F("//www.google.com/images/cleardot.gif"),ve.location&&"http"==ve.location.protocol||le(o,"https"),A(o)),function(a,n){const o=new Mi;if(ve.Image){const l=new Image;l.onload=on(cs,o,l,"TestLoadImage: loaded",!0,n),l.onerror=on(cs,o,l,"TestLoadImage: error",!1,n),l.onabort=on(cs,o,l,"TestLoadImage: abort",!1,n),l.ontimeout=on(cs,o,l,"TestLoadImage: timeout",!1,n),ve.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=a}else n(!1)}(o.toString(),l)}else ar(2);a.G=0,a.j&&a.j.va(n),gi(a),vo(a)}function gi(a){a.G=0,a.I=-1,a.j&&((0!=Gn(a.i).length||0!=a.l.length)&&(a.i.i.length=0,Dn(a.l),a.l.length=0),a.j.ua())}function so(a,n,o){let l=function(a){return a instanceof F?K(a):new F(a,void 0)}(o);if(""!=l.i)n&&Oe(l,n+"."+l.i),et(l,l.m);else{const h=ve.location;l=function(a,n,o,l){var h=new F(null,void 0);return a&&le(h,a),n&&Oe(h,n),o&&et(h,o),l&&(h.l=l),h}(h.protocol,n?n+"."+h.hostname:h.hostname,+h.port,o)}return a.aa&&jt(a.aa,function(h,y){x(l,y,h)}),o=a.sa,(n=a.D)&&o&&x(l,n,o),x(l,"VER",a.ma),Eo(a,l),l}function lr(a,n,o){if(n&&!a.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new Wn(o&&a.Ba&&!a.qa?new Ya({ib:!0}):a.qa)).L=a.H,n}function Ca(){}function Bs(){if(Tt&&!(10<=Number(sn)))throw Error("Environmental error: no available transport.")}function Zn(a,n){xt.call(this),this.g=new wa(n),this.l=a,this.h=n&&n.messageUrlParams||null,a=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.s=a,a=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(a?a["X-WebChannel-Content-Type"]=n.messageContentType:a={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(a?a["X-WebChannel-Client-Profile"]=n.ya:a={"X-WebChannel-Client-Profile":n.ya}),this.g.P=a,(a=n&&n.httpHeadersOverwriteParam)&&!Tn(a)&&(this.g.o=a),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!Tn(n)&&(this.g.D=n,null!==(a=this.h)&&n in a&&n in(a=this.h)&&delete a[n]),this.j=new oo(this)}function fs(a){Kr.call(this);var n=a.__sm__;if(n){e:{for(const o in n){a=o;break e}a=void 0}(this.i=a)&&(a=this.i,n=null!==n&&a in n?n[a]:void 0),this.data=n}else this.data=a}function wo(){Fo.call(this),this.status=1}function oo(a){this.g=a}(ge=Wn.prototype).ea=function(a,n,o,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+a);n=n?n.toUpperCase():"GET",this.H=a,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Js.g(),this.C=function(a){return a.h||(a.h=a.i())}(this.u?this.u:Js),this.g.onreadystatechange=Lt(this.Fa,this);try{this.F=!0,this.g.open(n,String(a),!0),this.F=!1}catch(y){return void ea(this,y)}a=o||"";const h=new qi(this.headers);l&&si(l,function(y,I){h.set(I,y)}),l=function(a){e:{var n=tl;const o=a.length,l="string"==typeof a?a.split(""):a;for(let h=0;h<o;h++)if(h in l&&n.call(void 0,l[h],h,a)){n=h;break e}n=-1}return 0>n?null:"string"==typeof a?a.charAt(n):a[n]}(h.T()),o=ve.FormData&&a instanceof ve.FormData,!(0<=Fn(el,n))||l||o||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(y,I){this.g.setRequestHeader(I,y)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Qa(this),0<this.B&&((this.K=function(a){return Tt&&Pe()&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Lt(this.pa,this)):this.A=Vr(this.pa,this.B,this)),this.v=!0,this.g.send(a),this.v=!1}catch(y){ea(this,y)}},ge.pa=function(){void 0!==xe&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zt(this,"timeout"),this.abort(8))},ge.abort=function(a){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=a||7,zt(this,"complete"),zt(this,"abort"),_o(this))},ge.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_o(this,!0)),Wn.Z.M.call(this)},ge.Fa=function(){this.s||(this.F||this.v||this.l?io(this):this.cb())},ge.cb=function(){io(this)},ge.ba=function(){try{return 2<ds(this)?this.g.status:-1}catch(a){return-1}},ge.ga=function(){try{return this.g?this.g.responseText:""}catch(a){return""}},ge.Qa=function(a){if(this.g){var n=this.g.responseText;return a&&0==n.indexOf(a)&&(n=n.substring(a.length)),Ru(n)}},ge.Da=function(){return this.m},ge.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ge=wa.prototype).ma=8,ge.G=1,ge.hb=function(a){try{this.h.info("Origin Trials invoked: "+a)}catch(n){}},ge.Ha=function(a){if(this.m)if(this.m=null,1==this.G){if(!a){this.V=Math.floor(1e5*Math.random()),a=this.V++;const h=new Oi(this,this.h,a,void 0);let y=this.s;if(this.P&&(y?(y=Je(y),Bn(y,this.P)):y=this.P),null===this.o&&(h.H=y),this.ja)e:{for(var n=0,o=0;o<this.l.length;o++){var l=this.l[o];if(void 0===(l="__data__"in l.g&&"string"==typeof(l=l.g.__data__)?l.length:void 0))break;if(4096<(n+=l)){n=o;break e}if(4096===n||o===this.l.length-1){n=o+1;break e}}n=1e3}else n=1e3;n=Mu(this,h,n),x(o=K(this.F),"RID",a),x(o,"CVER",22),this.D&&x(o,"X-HTTP-Session-Id",this.D),Eo(this,o),this.o&&y&&hs(o,this.o,y),Xt(this.i,h),this.Ra&&x(o,"TYPE","init"),this.ja?(x(o,"$req",n),x(o,"SID","null"),h.$=!0,Jo(h,o,null)):Jo(h,o,n),this.G=2}}else 3==this.G&&(a?Ss(this,a):0==this.l.length||Ka(this.i)||Ss(this))},ge.Ga=function(){if(this.u=null,Vs(this),this.$&&!(this.L||null==this.g||0>=this.O)){var a=2*this.O;this.h.info("BP detection timer enabled: "+a),this.B=zi(Lt(this.bb,this),a)}},ge.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ar(10),Nu(this),Vs(this))},ge.ab=function(){null!=this.v&&(this.v=null,Nu(this),Ja(this),ar(19))},ge.jb=function(a){a?(this.h.info("Successfully pinged google.com"),ar(2)):(this.h.info("Failed to ping google.com"),ar(1))},(ge=Ca.prototype).xa=function(){},ge.wa=function(){},ge.va=function(){},ge.ua=function(){},ge.Oa=function(){},Bs.prototype.g=function(a,n){return new Zn(a,n)},wt(Zn,xt),Zn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var a=this.g,n=this.l,o=this.h||void 0;a.Wa&&(a.h.info("Origin Trials enabled."),qt(Lt(a.hb,a,n))),ar(0),a.W=n,a.aa=o||{},a.N=a.X,a.F=so(a,null,a.W),As(a)},Zn.prototype.close=function(){ba(this.g)},Zn.prototype.u=function(a){if("string"==typeof a){var n={};n.__data__=a,jr(this.g,n)}else this.v?((n={}).__data__=Ri(a),jr(this.g,n)):jr(this.g,a)},Zn.prototype.M=function(){this.g.j=null,delete this.j,ba(this.g),delete this.g,Zn.Z.M.call(this)},wt(fs,Kr),wt(wo,Fo),wt(oo,Ca),oo.prototype.xa=function(){zt(this.g,"a")},oo.prototype.wa=function(a){zt(this.g,new fs(a))},oo.prototype.va=function(a){zt(this.g,new wo(a))},oo.prototype.ua=function(){zt(this.g,"b")},Bs.prototype.createWebChannel=Bs.prototype.g,Zn.prototype.send=Zn.prototype.u,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,Qo.COMPLETE="complete",Qs.EventType=Is,Is.OPEN="a",Is.CLOSE="b",Is.ERROR="c",Is.MESSAGE="d",xt.prototype.listen=xt.prototype.N,Wn.prototype.listenOnce=Wn.prototype.O,Wn.prototype.getLastError=Wn.prototype.La,Wn.prototype.getLastErrorCode=Wn.prototype.Da,Wn.prototype.getStatus=Wn.prototype.ba,Wn.prototype.getResponseJson=Wn.prototype.Qa,Wn.prototype.getResponseText=Wn.prototype.ga,Wn.prototype.send=Wn.prototype.ea;var eu=Le.createWebChannelTransport=function(){return new Bs},Pl=Le.getStatEventTarget=function(){return fr()},rr=Le.ErrorCode=ko,tu=Le.EventType=Qo,bo=Le.Event=qr,Co=Le.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ia=Le.FetchXmlHttpFactory=Ya,xs=Le.WebChannel=Qs,ao=Le.XhrIo=Wn;class Qr{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}Qr.UNAUTHENTICATED=new Qr(null),Qr.GOOGLE_CREDENTIALS=new Qr("google-credentials-uid"),Qr.FIRST_PARTY=new Qr("first-party-uid"),Qr.MOCK_USER=new Qr("mock-user");let Qi="9.1.0";const Ji=new Yt.Yd("@firebase/firestore");function uo(){return Ji.logLevel}function at(a,...n){if(Ji.logLevel<=Yt.in.DEBUG){const o=n.map(ru);Ji.debug(`Firestore (${Qi}): ${a}`,...o)}}function gr(a,...n){if(Ji.logLevel<=Yt.in.ERROR){const o=n.map(ru);Ji.error(`Firestore (${Qi}): ${a}`,...o)}}function Io(a,...n){if(Ji.logLevel<=Yt.in.WARN){const o=n.map(ru);Ji.warn(`Firestore (${Qi}): ${a}`,...o)}}function ru(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch(o){return a}}function St(a="Unexpected state"){const n=`FIRESTORE (${Qi}) INTERNAL ASSERTION FAILED: `+a;throw gr(n),new Error(n)}function Gt(a,n){a||St()}function mt(a,n){return a}const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends Error{constructor(n,o){super(o),this.code=n,this.message=o,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jr{constructor(){this.promise=new Promise((n,o)=>{this.resolve=n,this.reject=o})}}class jo{constructor(n,o){this.user=o,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${n}`}}class R{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,o){n.enqueueRetryable(()=>o(Qr.UNAUTHENTICATED))}shutdown(){}}class b{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,o){this.changeListener=o,n.enqueueRetryable(()=>o(this.token.user))}shutdown(){this.changeListener=null}}class E{constructor(n){this.t=n,this.currentUser=Qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,o){var l=this;let h=this.i;const y=X=>this.i!==h?(h=this.i,o(X)):Promise.resolve();let I=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new Jr,n.enqueueRetryable(()=>y(this.currentUser))};const k=()=>{const X=I;n.enqueueRetryable((0,se.Z)(function*(){yield X.promise,yield y(l.currentUser)}))},G=X=>{at("FirebaseCredentialsProvider","Auth detected"),this.auth=X,this.auth.addAuthTokenListener(this.o),k()};this.t.onInit(X=>G(X)),setTimeout(()=>{if(!this.auth){const X=this.t.getImmediate({optional:!0});X?G(X):(at("FirebaseCredentialsProvider","Auth not yet detected"),I.resolve(),I=new Jr)}},0),k()}getToken(){const n=this.i,o=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(o).then(l=>this.i!==n?(at("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):l?(Gt("string"==typeof l.accessToken),new jo(l.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return Gt(null===n||"string"==typeof n),new Qr(n)}}class O{constructor(n,o,l){this.h=n,this.l=o,this.m=l,this.type="FirstParty",this.user=Qr.FIRST_PARTY}get authHeaders(){const n={"X-Goog-AuthUser":this.l},o=this.h.auth.getAuthHeaderValueForFirstParty([]);return o&&(n.Authorization=o),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}class V{constructor(n,o,l){this.h=n,this.l=o,this.m=l}getToken(){return Promise.resolve(new O(this.h,this.l,this.m))}start(n,o){n.enqueueRetryable(()=>o(Qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=l=>this.g(l),this.p=l=>o.writeSequenceNumber(l))}g(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.p&&this.p(n),n}}function ie(a){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),o=new Uint8Array(a);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(o);else for(let l=0;l<a;l++)o[l]=Math.floor(256*Math.random());return o}q.T=-1;class me{static I(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=Math.floor(256/n.length)*n.length;let l="";for(;l.length<20;){const h=ie(40);for(let y=0;y<h.length;++y)l.length<20&&h[y]<o&&(l+=n.charAt(h[y]%n.length))}return l}}function ke(a,n){return a<n?-1:a>n?1:0}function gt(a,n,o){return a.length===n.length&&a.every((l,h)=>o(l,n[h]))}function Cn(a){return a+"\0"}class It{constructor(n,o){if(this.seconds=n,this.nanoseconds=o,o<0)throw new tt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+o);if(o>=1e9)throw new tt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+o);if(n<-62135596800)throw new tt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new tt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return It.fromMillis(Date.now())}static fromDate(n){return It.fromMillis(n.getTime())}static fromMillis(n){const o=Math.floor(n/1e3),l=Math.floor(1e6*(n-1e3*o));return new It(o,l)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?ke(this.nanoseconds,n.nanoseconds):ke(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(n){this.timestamp=n}static fromTimestamp(n){return new Dt(n)}static min(){return new Dt(new It(0,0))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function an(a){let n=0;for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&n++;return n}function $r(a,n){for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&n(o,a[o])}function Xr(a){for(const n in a)if(Object.prototype.hasOwnProperty.call(a,n))return!1;return!0}class Hr{constructor(n,o,l){void 0===o?o=0:o>n.length&&St(),void 0===l?l=n.length-o:l>n.length-o&&St(),this.segments=n,this.offset=o,this.len=l}get length(){return this.len}isEqual(n){return 0===Hr.comparator(this,n)}child(n){const o=this.segments.slice(this.offset,this.limit());return n instanceof Hr?n.forEach(l=>{o.push(l)}):o.push(n),this.construct(o)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let o=0;o<this.length;o++)if(this.get(o)!==n.get(o))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let o=0;o<this.length;o++)if(this.get(o)!==n.get(o))return!1;return!0}forEach(n){for(let o=this.offset,l=this.limit();o<l;o++)n(this.segments[o])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,o){const l=Math.min(n.length,o.length);for(let h=0;h<l;h++){const y=n.get(h),I=o.get(h);if(y<I)return-1;if(y>I)return 1}return n.length<o.length?-1:n.length>o.length?1:0}}class mn extends Hr{construct(n,o,l){return new mn(n,o,l)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const o=[];for(const l of n){if(l.indexOf("//")>=0)throw new tt(je.INVALID_ARGUMENT,`Invalid segment (${l}). Paths must not contain // in them.`);o.push(...l.split("/").filter(h=>h.length>0))}return new mn(o)}static emptyPath(){return new mn([])}}const mr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jn extends Hr{construct(n,o,l){return new Jn(n,o,l)}static isValidIdentifier(n){return mr.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jn.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Jn(["__name__"])}static fromServerFormat(n){const o=[];let l="",h=0;const y=()=>{if(0===l.length)throw new tt(je.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);o.push(l),l=""};let I=!1;for(;h<n.length;){const k=n[h];if("\\"===k){if(h+1===n.length)throw new tt(je.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const G=n[h+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new tt(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);l+=G,h+=2}else"`"===k?(I=!I,h++):"."!==k||I?(l+=k,h++):(y(),h++)}if(y(),I)throw new tt(je.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new Jn(o)}static emptyPath(){return new Jn([])}}class To{constructor(n){this.fields=n,n.sort(Jn.comparator)}covers(n){for(const o of this.fields)if(o.isPrefixOf(n))return!0;return!1}isEqual(n){return gt(this.fields,n.fields,(o,l)=>o.isEqual(l))}}class Di{constructor(n){this.binaryString=n}static fromBase64String(n){const o=atob(n);return new Di(o)}static fromUint8Array(n){const o=function(l){let h="";for(let y=0;y<l.length;++y)h+=String.fromCharCode(l[y]);return h}(n);return new Di(o)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let l=0;l<n.length;l++)o[l]=n.charCodeAt(l);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return ke(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}Di.EMPTY_BYTE_STRING=new Di("");const kl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zn(a){if(Gt(!!a),"string"==typeof a){let n=0;const o=kl.exec(a);if(Gt(!!o),o[1]){let h=o[1];h=(h+"000000000").substr(0,9),n=Number(h)}const l=new Date(a);return{seconds:Math.floor(l.getTime()/1e3),nanos:n}}return{seconds:Or(a.seconds),nanos:Or(a.nanos)}}function Or(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function Da(a){return"string"==typeof a?Di.fromBase64String(a):Di.fromUint8Array(a)}function Ou(a){var n,o;return"server_timestamp"===(null===(o=((null===(n=null==a?void 0:a.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===o?void 0:o.stringValue)}function nl(a){const n=a.mapValue.fields.__previous_value__;return Ou(n)?nl(n):n}function iu(a){const n=zn(a.mapValue.fields.__local_write_time__.timestampValue);return new It(n.seconds,n.nanos)}function $o(a){return null==a}function Pu(a){return 0===a&&1/a==-1/0}function id(a){return"number"==typeof a&&Number.isInteger(a)&&!Pu(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}class kt{constructor(n){this.path=n}static fromPath(n){return new kt(mn.fromString(n))}static fromName(n){return new kt(mn.fromString(n).popFirst(5))}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}isEqual(n){return null!==n&&0===mn.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,o){return mn.comparator(n.path,o.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new kt(new mn(n.slice()))}}function Ho(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Ou(a)?4:10:St()}function Xi(a,n){const o=Ho(a);if(o!==Ho(n))return!1;switch(o){case 0:return!0;case 1:return a.booleanValue===n.booleanValue;case 4:return iu(a).isEqual(iu(n));case 3:return function(l,h){if("string"==typeof l.timestampValue&&"string"==typeof h.timestampValue&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const y=zn(l.timestampValue),I=zn(h.timestampValue);return y.seconds===I.seconds&&y.nanos===I.nanos}(a,n);case 5:return a.stringValue===n.stringValue;case 6:return h=n,Da(a.bytesValue).isEqual(Da(h.bytesValue));case 7:return a.referenceValue===n.referenceValue;case 8:return function(l,h){return Or(l.geoPointValue.latitude)===Or(h.geoPointValue.latitude)&&Or(l.geoPointValue.longitude)===Or(h.geoPointValue.longitude)}(a,n);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return Or(l.integerValue)===Or(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const y=Or(l.doubleValue),I=Or(h.doubleValue);return y===I?Pu(y)===Pu(I):isNaN(y)&&isNaN(I)}return!1}(a,n);case 9:return gt(a.arrayValue.values||[],n.arrayValue.values||[],Xi);case 10:return function(l,h){const y=l.mapValue.fields||{},I=h.mapValue.fields||{};if(an(y)!==an(I))return!1;for(const k in y)if(y.hasOwnProperty(k)&&(void 0===I[k]||!Xi(y[k],I[k])))return!1;return!0}(a,n);default:return St()}var h}function lo(a,n){return void 0!==(a.values||[]).find(o=>Xi(o,n))}function su(a,n){const o=Ho(a),l=Ho(n);if(o!==l)return ke(o,l);switch(o){case 0:return 0;case 1:return ke(a.booleanValue,n.booleanValue);case 2:return function(h,y){const I=Or(h.integerValue||h.doubleValue),k=Or(y.integerValue||y.doubleValue);return I<k?-1:I>k?1:I===k?0:isNaN(I)?isNaN(k)?0:-1:1}(a,n);case 3:return ei(a.timestampValue,n.timestampValue);case 4:return ei(iu(a),iu(n));case 5:return ke(a.stringValue,n.stringValue);case 6:return function(h,y){const I=Da(h),k=Da(y);return I.compareTo(k)}(a.bytesValue,n.bytesValue);case 7:return function(h,y){const I=h.split("/"),k=y.split("/");for(let G=0;G<I.length&&G<k.length;G++){const X=ke(I[G],k[G]);if(0!==X)return X}return ke(I.length,k.length)}(a.referenceValue,n.referenceValue);case 8:return function(h,y){const I=ke(Or(h.latitude),Or(y.latitude));return 0!==I?I:ke(Or(h.longitude),Or(y.longitude))}(a.geoPointValue,n.geoPointValue);case 9:return function(h,y){const I=h.values||[],k=y.values||[];for(let G=0;G<I.length&&G<k.length;++G){const X=su(I[G],k[G]);if(X)return X}return ke(I.length,k.length)}(a.arrayValue,n.arrayValue);case 10:return function(h,y){const I=h.fields||{},k=Object.keys(I),G=y.fields||{},X=Object.keys(G);k.sort(),X.sort();for(let re=0;re<k.length&&re<X.length;++re){const be=ke(k[re],X[re]);if(0!==be)return be;const Ge=su(I[k[re]],G[X[re]]);if(0!==Ge)return Ge}return ke(k.length,X.length)}(a.mapValue,n.mapValue);default:throw St()}}function ei(a,n){if("string"==typeof a&&"string"==typeof n&&a.length===n.length)return ke(a,n);const o=zn(a),l=zn(n),h=ke(o.seconds,l.seconds);return 0!==h?h:ke(o.nanos,l.nanos)}function ou(a){return S(a)}function S(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(l){const h=zn(l);return`time(${h.seconds},${h.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?Da(a.bytesValue).toBase64():"referenceValue"in a?kt.fromName(a.referenceValue).toString():"geoPointValue"in a?`geo(${(n=a.geoPointValue).latitude},${n.longitude})`:"arrayValue"in a?function(l){let h="[",y=!0;for(const I of l.values||[])y?y=!1:h+=",",h+=S(I);return h+"]"}(a.arrayValue):"mapValue"in a?function(l){const h=Object.keys(l.fields||{}).sort();let y="{",I=!0;for(const k of h)I?I=!1:y+=",",y+=`${k}:${S(l.fields[k])}`;return y+"}"}(a.mapValue):St();var n}function T(a,n){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${n.path.canonicalString()}`}}function N(a){return!!a&&"integerValue"in a}function H(a){return!!a&&"arrayValue"in a}function te(a){return!!a&&"nullValue"in a}function De(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Ve(a){return!!a&&"mapValue"in a}function ft(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const n={mapValue:{fields:{}}};return $r(a.mapValue.fields,(o,l)=>n.mapValue.fields[o]=ft(l)),n}if(a.arrayValue){const n={arrayValue:{values:[]}};for(let o=0;o<(a.arrayValue.values||[]).length;++o)n.arrayValue.values[o]=ft(a.arrayValue.values[o]);return n}return Object.assign({},a)}class nt{constructor(n){this.value=n}static empty(){return new nt({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let o=this.value;for(let l=0;l<n.length-1;++l)if(o=(o.mapValue.fields||{})[n.get(l)],!Ve(o))return null;return o=(o.mapValue.fields||{})[n.lastSegment()],o||null}}set(n,o){this.getFieldsMap(n.popLast())[n.lastSegment()]=ft(o)}setAll(n){let o=Jn.emptyPath(),l={},h=[];n.forEach((I,k)=>{if(!o.isImmediateParentOf(k)){const G=this.getFieldsMap(o);this.applyChanges(G,l,h),l={},h=[],o=k.popLast()}I?l[k.lastSegment()]=ft(I):h.push(k.lastSegment())});const y=this.getFieldsMap(o);this.applyChanges(y,l,h)}delete(n){const o=this.field(n.popLast());Ve(o)&&o.mapValue.fields&&delete o.mapValue.fields[n.lastSegment()]}isEqual(n){return Xi(this.value,n.value)}getFieldsMap(n){let o=this.value;o.mapValue.fields||(o.mapValue={fields:{}});for(let l=0;l<n.length;++l){let h=o.mapValue.fields[n.get(l)];Ve(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},o.mapValue.fields[n.get(l)]=h),o=h}return o.mapValue.fields}applyChanges(n,o,l){$r(o,(h,y)=>n[h]=y);for(const h of l)delete n[h]}clone(){return new nt(ft(this.value))}}function Vt(a){const n=[];return $r(a.fields,(o,l)=>{const h=new Jn([o]);if(Ve(l)){const y=Vt(l.mapValue).fields;if(0===y.length)n.push(h);else for(const I of y)n.push(h.child(I))}else n.push(h)}),new To(n)}class Ft{constructor(n,o,l,h,y){this.key=n,this.documentType=o,this.version=l,this.data=h,this.documentState=y}static newInvalidDocument(n){return new Ft(n,0,Dt.min(),nt.empty(),0)}static newFoundDocument(n,o,l){return new Ft(n,1,o,l,0)}static newNoDocument(n,o){return new Ft(n,2,o,nt.empty(),0)}static newUnknownDocument(n,o){return new Ft(n,3,o,nt.empty(),2)}convertToFoundDocument(n,o){return this.version=n,this.documentType=1,this.data=o,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=nt.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof Ft&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}clone(){return new Ft(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qn{constructor(n,o=null,l=[],h=[],y=null,I=null,k=null){this.path=n,this.collectionGroup=o,this.orderBy=l,this.filters=h,this.limit=y,this.startAt=I,this.endAt=k,this.A=null}}function yr(a,n=null,o=[],l=[],h=null,y=null,I=null){return new qn(a,n,o,l,h,y,I)}function _r(a){const n=mt(a);if(null===n.A){let o=n.path.canonicalString();null!==n.collectionGroup&&(o+="|cg:"+n.collectionGroup),o+="|f:",o+=n.filters.map(l=>function(a){return a.field.canonicalString()+a.op.toString()+ou(a.value)}(l)).join(","),o+="|ob:",o+=n.orderBy.map(l=>{return(h=l).field.canonicalString()+h.dir;var h}).join(","),$o(n.limit)||(o+="|l:",o+=n.limit),n.startAt&&(o+="|lb:",o+=ra(n.startAt)),n.endAt&&(o+="|ub:",o+=ra(n.endAt)),n.A=o}return n.A}function ui(a,n){if(a.limit!==n.limit||a.orderBy.length!==n.orderBy.length)return!1;for(let h=0;h<a.orderBy.length;h++)if(!lu(a.orderBy[h],n.orderBy[h]))return!1;if(a.filters.length!==n.filters.length)return!1;for(let h=0;h<a.filters.length;h++)if((o=a.filters[h]).op!==(l=n.filters[h]).op||!o.field.isEqual(l.field)||!Xi(o.value,l.value))return!1;var o,l;return a.collectionGroup===n.collectionGroup&&!!a.path.isEqual(n.path)&&!!yc(a.startAt,n.startAt)&&yc(a.endAt,n.endAt)}function ti(a){return kt.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}class Ir extends class{}{constructor(n,o,l){super(),this.field=n,this.op=o,this.value=l}static create(n,o,l){return n.isKeyField()?"in"===o||"not-in"===o?this.R(n,o,l):new Ns(n,o,l):"array-contains"===o?new Fl(n,l):"in"===o?new Wo(n,l):"not-in"===o?new Ta(n,l):"array-contains-any"===o?new gc(n,l):new Ir(n,o,l)}static R(n,o,l){return"in"===o?new Ti(n,l):new au(n,l)}matches(n){const o=n.data.field(this.field);return"!="===this.op?null!==o&&this.P(su(o,this.value)):null!==o&&Ho(this.value)===Ho(o)&&this.P(su(o,this.value))}P(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return St()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ns extends Ir{constructor(n,o,l){super(n,o,l),this.key=kt.fromName(l.referenceValue)}matches(n){const o=kt.comparator(n.key,this.key);return this.P(o)}}class Ti extends Ir{constructor(n,o){super(n,"in",o),this.keys=Go(0,o)}matches(n){return this.keys.some(o=>o.isEqual(n.key))}}class au extends Ir{constructor(n,o){super(n,"not-in",o),this.keys=Go(0,o)}matches(n){return!this.keys.some(o=>o.isEqual(n.key))}}function Go(a,n){var o;return((null===(o=n.arrayValue)||void 0===o?void 0:o.values)||[]).map(l=>kt.fromName(l.referenceValue))}class Fl extends Ir{constructor(n,o){super(n,"array-contains",o)}matches(n){const o=n.data.field(this.field);return H(o)&&lo(o.arrayValue,this.value)}}class Wo extends Ir{constructor(n,o){super(n,"in",o)}matches(n){const o=n.data.field(this.field);return null!==o&&lo(this.value.arrayValue,o)}}class Ta extends Ir{constructor(n,o){super(n,"not-in",o)}matches(n){if(lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const o=n.data.field(this.field);return null!==o&&!lo(this.value.arrayValue,o)}}class gc extends Ir{constructor(n,o){super(n,"array-contains-any",o)}matches(n){const o=n.data.field(this.field);return!(!H(o)||!o.arrayValue.values)&&o.arrayValue.values.some(l=>lo(this.value.arrayValue,l))}}class mc{constructor(n,o){this.position=n,this.before=o}}function ra(a){return`${a.before?"b":"a"}:${a.position.map(n=>ou(n)).join(",")}`}class uu{constructor(n,o="asc"){this.field=n,this.dir=o}}function lu(a,n){return a.dir===n.dir&&a.field.isEqual(n.field)}function Ll(a,n,o){let l=0;for(let h=0;h<a.position.length;h++){const y=n[h],I=a.position[h];if(l=y.field.isKeyField()?kt.comparator(kt.fromName(I.referenceValue),o.key):su(I,o.data.field(y.field)),"desc"===y.dir&&(l*=-1),0!==l)break}return a.before?l<=0:l<0}function yc(a,n){if(null===a)return null===n;if(null===n||a.before!==n.before||a.position.length!==n.position.length)return!1;for(let o=0;o<a.position.length;o++)if(!Xi(a.position[o],n.position[o]))return!1;return!0}class ia{constructor(n,o=null,l=[],h=[],y=null,I="F",k=null,G=null){this.path=n,this.collectionGroup=o,this.explicitOrderBy=l,this.filters=h,this.limit=y,this.limitType=I,this.startAt=k,this.endAt=G,this.V=null,this.S=null}}function rl(a,n,o,l,h,y,I,k){return new ia(a,n,o,l,h,y,I,k)}function Vl(a){return new ia(a)}function ku(a){return!$o(a.limit)&&"F"===a.limitType}function Aa(a){return!$o(a.limit)&&"L"===a.limitType}function Sa(a){return a.explicitOrderBy.length>0?a.explicitOrderBy[0].field:null}function sd(a){for(const n of a.filters)if(n.v())return n.field;return null}function Gr(a){return null!==a.collectionGroup}function Ra(a){const n=mt(a);if(null===n.V){n.V=[];const o=sd(n),l=Sa(n);if(null!==o&&null===l)o.isKeyField()||n.V.push(new uu(o)),n.V.push(new uu(Jn.keyField(),"asc"));else{let h=!1;for(const y of n.explicitOrderBy)n.V.push(y),y.field.isKeyField()&&(h=!0);if(!h){const y=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.V.push(new uu(Jn.keyField(),y))}}}return n.V}function zo(a){const n=mt(a);if(!n.S)if("F"===n.limitType)n.S=yr(n.path,n.collectionGroup,Ra(n),n.filters,n.limit,n.startAt,n.endAt);else{const o=[];for(const y of Ra(n))o.push(new uu(y.field,"desc"===y.dir?"asc":"desc"));const l=n.endAt?new mc(n.endAt.position,!n.endAt.before):null,h=n.startAt?new mc(n.startAt.position,!n.startAt.before):null;n.S=yr(n.path,n.collectionGroup,o,n.filters,n.limit,l,h)}return n.S}function cu(a,n,o){return new ia(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),n,o,a.startAt,a.endAt)}function xa(a,n){return ui(zo(a),zo(n))&&a.limitType===n.limitType}function _c(a){return`${_r(zo(a))}|lt:${a.limitType}`}function vc(a){return`Query(target=${function(a){let n=a.path.canonicalString();return null!==a.collectionGroup&&(n+=" collectionGroup="+a.collectionGroup),a.filters.length>0&&(n+=`, filters: [${a.filters.map(o=>{return`${(l=o).field.canonicalString()} ${l.op} ${ou(l.value)}`;var l}).join(", ")}]`),$o(a.limit)||(n+=", limit: "+a.limit),a.orderBy.length>0&&(n+=`, orderBy: [${a.orderBy.map(o=>{return`${(l=o).field.canonicalString()} (${l.dir})`;var l}).join(", ")}]`),a.startAt&&(n+=", startAt: "+ra(a.startAt)),a.endAt&&(n+=", endAt: "+ra(a.endAt)),`Target(${n})`}(zo(a))}; limitType=${a.limitType})`}function il(a,n){return n.isFoundDocument()&&function(o,l){const h=l.key.path;return null!==o.collectionGroup?l.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(h):kt.isDocumentKey(o.path)?o.path.isEqual(h):o.path.isImmediateParentOf(h)}(a,n)&&function(o,l){for(const h of o.explicitOrderBy)if(!h.field.isKeyField()&&null===l.data.field(h.field))return!1;return!0}(a,n)&&function(o,l){for(const h of o.filters)if(!h.matches(l))return!1;return!0}(a,n)&&(l=n,!((o=a).startAt&&!Ll(o.startAt,Ra(o),l)||o.endAt&&Ll(o.endAt,Ra(o),l)));var o,l}function ph(a){return(n,o)=>{let l=!1;for(const h of Ra(a)){const y=sl(h,n,o);if(0!==y)return y;l=l||h.field.isKeyField()}return 0}}function sl(a,n,o){const l=a.field.isKeyField()?kt.comparator(n.key,o.key):function(h,y,I){const k=y.data.field(h),G=I.data.field(h);return null!==k&&null!==G?su(k,G):St()}(a.field,n,o);switch(a.dir){case"asc":return l;case"desc":return-1*l;default:return St()}}function ho(a,n){if(a.D){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(n)?"-0":n}}function Ul(a){return{integerValue:""+a}}function Na(a,n){return id(n)?Ul(n):ho(a,n)}class Ec{constructor(){this._=void 0}}function gh(a,n,o){return a instanceof Fu?function(l,h){const y={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&(y.fields.__previous_value__=h),{mapValue:y}}(o,n):a instanceof Lu?wc(a,n):a instanceof Ao?ol(a,n):function(l,h){const y=Bl(l,h),I=$f(y)+$f(l.C);return N(y)&&N(l.C)?Ul(I):ho(l.N,I)}(a,n)}function od(a,n,o){return a instanceof Lu?wc(a,n):a instanceof Ao?ol(a,n):o}function Bl(a,n){return a instanceof al?N(o=n)||(l=o)&&"doubleValue"in l?n:{integerValue:0}:null;var l,o}class Fu extends Ec{}class Lu extends Ec{constructor(n){super(),this.elements=n}}function wc(a,n){const o=ad(n);for(const l of a.elements)o.some(h=>Xi(h,l))||o.push(l);return{arrayValue:{values:o}}}class Ao extends Ec{constructor(n){super(),this.elements=n}}function ol(a,n){let o=ad(n);for(const l of a.elements)o=o.filter(h=>!Xi(h,l));return{arrayValue:{values:o}}}class al extends Ec{constructor(n,o){super(),this.N=n,this.C=o}}function $f(a){return Or(a.integerValue||a.doubleValue)}function ad(a){return H(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class ul{constructor(n,o){this.field=n,this.transform=o}}class Hf{constructor(n,o){this.version=n,this.transformResults=o}}class mi{constructor(n,o){this.updateTime=n,this.exists=o}static none(){return new mi}static exists(n){return new mi(void 0,n)}static updateTime(n){return new mi(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function bc(a,n){return void 0!==a.updateTime?n.isFoundDocument()&&n.version.isEqual(a.updateTime):void 0===a.exists||a.exists===n.isFoundDocument()}class Ma{}function ud(a,n,o){a instanceof oa?function(l,h,y){const I=l.value.clone(),k=dd(l.fieldTransforms,h,y.transformResults);I.setAll(k),h.convertToFoundDocument(y.version,I).setHasCommittedMutations()}(a,n,o):a instanceof aa?function(l,h,y){if(!bc(l.precondition,h))return void h.convertToUnknownDocument(y.version);const I=dd(l.fieldTransforms,h,y.transformResults),k=h.data;k.setAll(cd(l)),k.setAll(I),h.convertToFoundDocument(y.version,k).setHasCommittedMutations()}(a,n,o):n.convertToNoDocument(o.version).setHasCommittedMutations()}function sa(a,n,o){var h;a instanceof oa?function(l,h,y){if(!bc(l.precondition,h))return;const I=l.value.clone(),k=hd(l.fieldTransforms,y,h);I.setAll(k),h.convertToFoundDocument(Wf(h),I).setHasLocalMutations()}(a,n,o):a instanceof aa?function(l,h,y){if(!bc(l.precondition,h))return;const I=hd(l.fieldTransforms,y,h),k=h.data;k.setAll(cd(l)),k.setAll(I),h.convertToFoundDocument(Wf(h),k).setHasLocalMutations()}(a,n,o):bc(a.precondition,h=n)&&h.convertToNoDocument(Dt.min())}function Gf(a,n){let o=null;for(const l of a.fieldTransforms){const h=n.data.field(l.field),y=Bl(l.transform,h||null);null!=y&&(null==o&&(o=nt.empty()),o.set(l.field,y))}return o||null}function ld(a,n){return a.type===n.type&&!!a.key.isEqual(n.key)&&!!a.precondition.isEqual(n.precondition)&&(l=n.fieldTransforms,!!(void 0===(o=a.fieldTransforms)&&void 0===l||o&&l&&gt(o,l,(h,y)=>function(a,n){return a.field.isEqual(n.field)&&(l=n.transform,(o=a.transform)instanceof Lu&&l instanceof Lu||o instanceof Ao&&l instanceof Ao?gt(o.elements,l.elements,Xi):o instanceof al&&l instanceof al?Xi(o.C,l.C):o instanceof Fu&&l instanceof Fu);var o,l}(h,y))))&&(0===a.type?a.value.isEqual(n.value):1!==a.type||a.data.isEqual(n.data)&&a.fieldMask.isEqual(n.fieldMask));var o,l}function Wf(a){return a.isFoundDocument()?a.version:Dt.min()}class oa extends Ma{constructor(n,o,l,h=[]){super(),this.key=n,this.value=o,this.precondition=l,this.fieldTransforms=h,this.type=0}}class aa extends Ma{constructor(n,o,l,h,y=[]){super(),this.key=n,this.data=o,this.fieldMask=l,this.precondition=h,this.fieldTransforms=y,this.type=1}}function cd(a){const n=new Map;return a.fieldMask.fields.forEach(o=>{if(!o.isEmpty()){const l=a.data.field(o);n.set(o,l)}}),n}function dd(a,n,o){const l=new Map;Gt(a.length===o.length);for(let h=0;h<o.length;h++){const y=a[h],I=y.transform,k=n.data.field(y.field);l.set(y.field,od(I,k,o[h]))}return l}function hd(a,n,o){const l=new Map;for(const h of a){const y=h.transform,I=o.data.field(h.field);l.set(h.field,gh(y,I,n))}return l}class qo extends Ma{constructor(n,o){super(),this.key=n,this.precondition=o,this.type=2,this.fieldTransforms=[]}}class fd extends Ma{constructor(n,o){super(),this.key=n,this.precondition=o,this.type=3,this.fieldTransforms=[]}}class om{constructor(n){this.count=n}}var vr,kn;function mh(a){switch(a){case je.OK:return St();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0;default:return St()}}function So(a){if(void 0===a)return gr("GRPC error has no .code"),je.UNKNOWN;switch(a){case vr.OK:return je.OK;case vr.CANCELLED:return je.CANCELLED;case vr.UNKNOWN:return je.UNKNOWN;case vr.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case vr.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case vr.INTERNAL:return je.INTERNAL;case vr.UNAVAILABLE:return je.UNAVAILABLE;case vr.UNAUTHENTICATED:return je.UNAUTHENTICATED;case vr.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case vr.NOT_FOUND:return je.NOT_FOUND;case vr.ALREADY_EXISTS:return je.ALREADY_EXISTS;case vr.PERMISSION_DENIED:return je.PERMISSION_DENIED;case vr.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case vr.ABORTED:return je.ABORTED;case vr.OUT_OF_RANGE:return je.OUT_OF_RANGE;case vr.UNIMPLEMENTED:return je.UNIMPLEMENTED;case vr.DATA_LOSS:return je.DATA_LOSS;default:return St()}}(kn=vr||(vr={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";class Pr{constructor(n,o){this.comparator=n,this.root=o||es.EMPTY}insert(n,o){return new Pr(this.comparator,this.root.insert(n,o,this.comparator).copy(null,null,es.BLACK,null,null))}remove(n){return new Pr(this.comparator,this.root.remove(n,this.comparator).copy(null,null,es.BLACK,null,null))}get(n){let o=this.root;for(;!o.isEmpty();){const l=this.comparator(n,o.key);if(0===l)return o.value;l<0?o=o.left:l>0&&(o=o.right)}return null}indexOf(n){let o=0,l=this.root;for(;!l.isEmpty();){const h=this.comparator(n,l.key);if(0===h)return o+l.left.size;h<0?l=l.left:(o+=l.left.size+1,l=l.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((o,l)=>(n(o,l),!1))}toString(){const n=[];return this.inorderTraversal((o,l)=>(n.push(`${o}:${l}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new Vu(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new Vu(this.root,n,this.comparator,!1)}getReverseIterator(){return new Vu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new Vu(this.root,n,this.comparator,!0)}}class Vu{constructor(n,o,l,h){this.isReverse=h,this.nodeStack=[];let y=1;for(;!n.isEmpty();)if(y=o?l(n.key,o):1,h&&(y*=-1),y<0)n=this.isReverse?n.left:n.right;else{if(0===y){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const o={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return o}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class es{constructor(n,o,l,h,y){this.key=n,this.value=o,this.color=null!=l?l:es.RED,this.left=null!=h?h:es.EMPTY,this.right=null!=y?y:es.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,o,l,h,y){return new es(null!=n?n:this.key,null!=o?o:this.value,null!=l?l:this.color,null!=h?h:this.left,null!=y?y:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,o,l){let h=this;const y=l(n,h.key);return h=y<0?h.copy(null,null,null,h.left.insert(n,o,l),null):0===y?h.copy(null,o,null,null,null):h.copy(null,null,null,null,h.right.insert(n,o,l)),h.fixUp()}removeMin(){if(this.left.isEmpty())return es.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,o){let l,h=this;if(o(n,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(n,o),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===o(n,h.key)){if(h.right.isEmpty())return es.EMPTY;l=h.right.min(),h=h.copy(l.key,l.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(n,o))}return h.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,es.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,es.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,o)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw St();const n=this.left.check();if(n!==this.right.check())throw St();return n+(this.isRed()?0:1)}}es.EMPTY=null,es.RED=!0,es.BLACK=!1,es.EMPTY=new class{constructor(){this.size=0}get key(){throw St()}get value(){throw St()}get color(){throw St()}get left(){throw St()}get right(){throw St()}copy(a,n,o,l,h){return this}insert(a,n,o){return new es(a,n)}remove(a,n){return this}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ni{constructor(n){this.comparator=n,this.data=new Pr(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((o,l)=>(n(o),!1))}forEachInRange(n,o){const l=this.data.getIteratorFrom(n[0]);for(;l.hasNext();){const h=l.getNext();if(this.comparator(h.key,n[1])>=0)return;o(h.key)}}forEachWhile(n,o){let l;for(l=void 0!==o?this.data.getIteratorFrom(o):this.data.getIterator();l.hasNext();)if(!n(l.getNext().key))return}firstAfterOrEqual(n){const o=this.data.getIteratorFrom(n);return o.hasNext()?o.getNext().key:null}getIterator(){return new Cc(this.data.getIterator())}getIteratorFrom(n){return new Cc(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let o=this;return o.size<n.size&&(o=n,n=this),n.forEach(l=>{o=o.add(l)}),o}isEqual(n){if(!(n instanceof ni)||this.size!==n.size)return!1;const o=this.data.getIterator(),l=n.data.getIterator();for(;o.hasNext();){const h=o.getNext().key,y=l.getNext().key;if(0!==this.comparator(h,y))return!1}return!0}toArray(){const n=[];return this.forEach(o=>{n.push(o)}),n}toString(){const n=[];return this.forEach(o=>n.push(o)),"SortedSet("+n.toString()+")"}copy(n){const o=new ni(this.comparator);return o.data=n,o}}class Cc{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const zf=new Pr(kt.comparator);function Ro(){return zf}const Ic=new Pr(kt.comparator);function pd(){return Ic}const qf=new Pr(kt.comparator);function yh(){return qf}const Kf=new ni(kt.comparator);function ir(...a){let n=Kf;for(const o of a)n=n.add(o);return n}const _h=new ni(ke);function ua(){return _h}class ll{constructor(n,o,l,h,y){this.snapshotVersion=n,this.targetChanges=o,this.targetMismatches=l,this.documentUpdates=h,this.resolvedLimboDocuments=y}static createSynthesizedRemoteEventForCurrentChange(n,o){const l=new Map;return l.set(n,js.createSynthesizedTargetChangeForCurrentChange(n,o)),new ll(Dt.min(),l,ua(),Ro(),ir())}}class js{constructor(n,o,l,h,y){this.resumeToken=n,this.current=o,this.addedDocuments=l,this.modifiedDocuments=h,this.removedDocuments=y}static createSynthesizedTargetChangeForCurrentChange(n,o){return new js(Di.EMPTY_BYTE_STRING,o,ir(),ir(),ir())}}class la{constructor(n,o,l,h){this.k=n,this.removedTargetIds=o,this.key=l,this.$=h}}class jl{constructor(n,o){this.targetId=n,this.O=o}}class gd{constructor(n,o,l=Di.EMPTY_BYTE_STRING,h=null){this.state=n,this.targetIds=o,this.resumeToken=l,this.cause=h}}class md{constructor(){this.F=0,this.M=Yf(),this.L=Di.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}W(){let n=ir(),o=ir(),l=ir();return this.M.forEach((h,y)=>{switch(y){case 0:n=n.add(h);break;case 2:o=o.add(h);break;case 1:l=l.add(h);break;default:St()}}),new js(this.L,this.B,n,o,l)}G(){this.U=!1,this.M=Yf()}H(n,o){this.U=!0,this.M=this.M.insert(n,o)}J(n){this.U=!0,this.M=this.M.remove(n)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class yd{constructor(n){this.tt=n,this.et=new Map,this.nt=Ro(),this.st=Zf(),this.it=new ni(ke)}rt(n){for(const o of n.k)n.$&&n.$.isFoundDocument()?this.ot(o,n.$):this.at(o,n.key,n.$);for(const o of n.removedTargetIds)this.at(o,n.key,n.$)}ct(n){this.forEachTarget(n,o=>{const l=this.ut(o);switch(n.state){case 0:this.ht(o)&&l.j(n.resumeToken);break;case 1:l.X(),l.q||l.G(),l.j(n.resumeToken);break;case 2:l.X(),l.q||this.removeTarget(o);break;case 3:this.ht(o)&&(l.Z(),l.j(n.resumeToken));break;case 4:this.ht(o)&&(this.lt(o),l.j(n.resumeToken));break;default:St()}})}forEachTarget(n,o){n.targetIds.length>0?n.targetIds.forEach(o):this.et.forEach((l,h)=>{this.ht(h)&&o(h)})}ft(n){const o=n.targetId,l=n.O.count,h=this.dt(o);if(h){const y=h.target;if(ti(y))if(0===l){const I=new kt(y.path);this.at(o,I,Ft.newNoDocument(I,Dt.min()))}else Gt(1===l);else this.wt(o)!==l&&(this.lt(o),this.it=this.it.add(o))}}_t(n){const o=new Map;this.et.forEach((y,I)=>{const k=this.dt(I);if(k){if(y.current&&ti(k.target)){const G=new kt(k.target.path);null!==this.nt.get(G)||this.gt(I,G)||this.at(I,G,Ft.newNoDocument(G,n))}y.K&&(o.set(I,y.W()),y.G())}});let l=ir();this.st.forEach((y,I)=>{let k=!0;I.forEachWhile(G=>{const X=this.dt(G);return!X||2===X.purpose||(k=!1,!1)}),k&&(l=l.add(y))});const h=new ll(n,o,this.it,this.nt,l);return this.nt=Ro(),this.st=Zf(),this.it=new ni(ke),h}ot(n,o){if(!this.ht(n))return;const l=this.gt(n,o.key)?2:0;this.ut(n).H(o.key,l),this.nt=this.nt.insert(o.key,o),this.st=this.st.insert(o.key,this.yt(o.key).add(n))}at(n,o,l){if(!this.ht(n))return;const h=this.ut(n);this.gt(n,o)?h.H(o,1):h.J(o),this.st=this.st.insert(o,this.yt(o).delete(n)),l&&(this.nt=this.nt.insert(o,l))}removeTarget(n){this.et.delete(n)}wt(n){const o=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+o.addedDocuments.size-o.removedDocuments.size}Y(n){this.ut(n).Y()}ut(n){let o=this.et.get(n);return o||(o=new md,this.et.set(n,o)),o}yt(n){let o=this.st.get(n);return o||(o=new ni(ke),this.st=this.st.insert(n,o)),o}ht(n){const o=null!==this.dt(n);return o||at("WatchChangeAggregator","Detected inactive target",n),o}dt(n){const o=this.et.get(n);return o&&o.q?null:this.tt.Et(n)}lt(n){this.et.set(n,new md),this.tt.getRemoteKeysForTarget(n).forEach(o=>{this.at(n,o,null)})}gt(n,o){return this.tt.getRemoteKeysForTarget(n).has(o)}}function Zf(){return new Pr(kt.comparator)}function Yf(){return new Pr(kt.comparator)}const _d={asc:"ASCENDING",desc:"DESCENDING"},Dc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class vd{constructor(n,o){this.databaseId=n,this.D=o}}function Tc(a,n){return a.D?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function Qf(a,n){return a.D?n.toBase64():n.toUint8Array()}function vh(a,n){return Tc(a,n.toTimestamp())}function li(a){return Gt(!!a),Dt.fromTimestamp(function(n){const o=zn(n);return new It(o.seconds,o.nanos)}(a))}function Ed(a,n){return(o=a,new mn(["projects",o.projectId,"databases",o.database])).child("documents").child(n).canonicalString();var o}function wd(a){const n=mn.fromString(a);return Gt(Nc(n)),n}function $l(a,n){return Ed(a.databaseId,n.path)}function Ko(a,n){const o=wd(n);if(o.get(1)!==a.databaseId.projectId)throw new tt(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+o.get(1)+" vs "+a.databaseId.projectId);if(o.get(3)!==a.databaseId.database)throw new tt(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+o.get(3)+" vs "+a.databaseId.database);return new kt(Ac(o))}function cl(a,n){return Ed(a.databaseId,n)}function bd(a){const n=wd(a);return 4===n.length?mn.emptyPath():Ac(n)}function du(a){return new mn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Ac(a){return Gt(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function Dr(a,n,o){return{name:$l(a,n),fields:o.value.mapValue.fields}}function Cd(a,n,o){const l=Ko(a,n.name),h=li(n.updateTime),y=new nt({mapValue:{fields:n.fields}}),I=Ft.newFoundDocument(l,h,y);return o&&I.setHasCommittedMutations(),o?I.setHasCommittedMutations():I}function ts(a,n){let o;if(n instanceof oa)o={update:Dr(a,n.key,n.value)};else if(n instanceof qo)o={delete:$l(a,n.key)};else if(n instanceof aa)o={update:Dr(a,n.key,n.data),updateMask:Id(n.fieldMask)};else{if(!(n instanceof fd))return St();o={verify:$l(a,n.key)}}return n.fieldTransforms.length>0&&(o.updateTransforms=n.fieldTransforms.map(l=>function(h,y){const I=y.transform;if(I instanceof Fu)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(I instanceof Lu)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:I.elements}};if(I instanceof Ao)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:I.elements}};if(I instanceof al)return{fieldPath:y.field.canonicalString(),increment:I.C};throw St()}(0,l))),n.precondition.isNone||(o.currentDocument=void 0!==(h=n.precondition).updateTime?{updateTime:vh(a,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:St()),o;var h}function dl(a,n){const o=n.currentDocument?void 0!==(h=n.currentDocument).updateTime?mi.updateTime(li(h.updateTime)):void 0!==h.exists?mi.exists(h.exists):mi.none():mi.none(),l=n.updateTransforms?n.updateTransforms.map(h=>function(y,I){let k=null;"setToServerValue"in I?(Gt("REQUEST_TIME"===I.setToServerValue),k=new Fu):"appendMissingElements"in I?k=new Lu(I.appendMissingElements.values||[]):"removeAllFromArray"in I?k=new Ao(I.removeAllFromArray.values||[]):"increment"in I?k=new al(y,I.increment):St();const G=Jn.fromServerFormat(I.fieldPath);return new ul(G,k)}(a,h)):[];var h;if(n.update){const h=Ko(a,n.update.name),y=new nt({mapValue:{fields:n.update.fields}});if(n.updateMask){const I=new To((n.updateMask.fieldPaths||[]).map(X=>Jn.fromServerFormat(X)));return new aa(h,y,I,o,l)}return new oa(h,y,o,l)}if(n.delete){const h=Ko(a,n.delete);return new qo(h,o)}if(n.verify){const h=Ko(a,n.verify);return new fd(h,o)}return St()}function wh(a,n){return{documents:[cl(a,n.path)]}}function Sc(a,n){const o={structuredQuery:{}},l=n.path;null!==n.collectionGroup?(o.parent=cl(a,l),o.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(o.parent=cl(a,l.popLast()),o.structuredQuery.from=[{collectionId:l.lastSegment()}]);const h=function(k){if(0===k.length)return;const G=k.map(X=>function(re){if("=="===re.op){if(De(re.value))return{unaryFilter:{field:Uu(re.field),op:"IS_NAN"}};if(te(re.value))return{unaryFilter:{field:Uu(re.field),op:"IS_NULL"}}}else if("!="===re.op){if(De(re.value))return{unaryFilter:{field:Uu(re.field),op:"IS_NOT_NAN"}};if(te(re.value))return{unaryFilter:{field:Uu(re.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uu(re.field),op:Ch(re.op),value:re.value}}}(X));return 1===G.length?G[0]:{compositeFilter:{op:"AND",filters:G}}}(n.filters);h&&(o.structuredQuery.where=h);const y=function(k){if(0!==k.length)return k.map(G=>{return{field:Uu((X=G).field),direction:xc(X.dir)};var X})}(n.orderBy);y&&(o.structuredQuery.orderBy=y);const I=(G=n.limit,a.D||$o(G)?G:{value:G});var G;return null!==I&&(o.structuredQuery.limit=I),n.startAt&&(o.structuredQuery.startAt=hl(n.startAt)),n.endAt&&(o.structuredQuery.endAt=hl(n.endAt)),o}function Rc(a){let n=bd(a.parent);const o=a.structuredQuery,l=o.from?o.from.length:0;let h=null;if(l>0){Gt(1===l);const re=o.from[0];re.allDescendants?h=re.collectionId:n=n.child(re.collectionId)}let y=[];o.where&&(y=bh(o.where));let I=[];o.orderBy&&(I=o.orderBy.map(re=>{return new uu(ci((be=re).field),function(Ge){switch(Ge){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(be.direction));var be}));let k=null;o.limit&&(k=function(re){let be;return be="object"==typeof re?re.value:re,$o(be)?null:be}(o.limit));let G=null;o.startAt&&(G=Wr(o.startAt));let X=null;return o.endAt&&(X=Wr(o.endAt)),rl(n,h,I,y,k,"F",G,X)}function bh(a){return a?void 0!==a.unaryFilter?[ps(a)]:void 0!==a.fieldFilter?[fl(a)]:void 0!==a.compositeFilter?a.compositeFilter.filters.map(n=>bh(n)).reduce((n,o)=>n.concat(o)):St():[]}function hl(a){return{before:a.before,values:a.position}}function Wr(a){return new mc(a.values||[],!!a.before)}function xc(a){return _d[a]}function Ch(a){return Dc[a]}function Uu(a){return{fieldPath:a.canonicalString()}}function ci(a){return Jn.fromServerFormat(a.fieldPath)}function fl(a){return Ir.create(ci(a.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return St()}}(a.fieldFilter.op),a.fieldFilter.value)}function ps(a){switch(a.unaryFilter.op){case"IS_NAN":const n=ci(a.unaryFilter.field);return Ir.create(n,"==",{doubleValue:NaN});case"IS_NULL":const o=ci(a.unaryFilter.field);return Ir.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ci(a.unaryFilter.field);return Ir.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=ci(a.unaryFilter.field);return Ir.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return St()}}function Id(a){const n=[];return a.fields.forEach(o=>n.push(o.canonicalString())),{fieldPaths:n}}function Nc(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}function xo(a){let n="";for(let o=0;o<a.length;o++)n.length>0&&(n=Bu(n)),n=Oa(a.get(o),n);return Bu(n)}function Oa(a,n){let o=n;const l=a.length;for(let h=0;h<l;h++){const y=a.charAt(h);switch(y){case"\0":o+="\x01\x10";break;case"\x01":o+="\x01\x11";break;default:o+=y}}return o}function Bu(a){return a+"\x01\x01"}function ca(a){const n=a.length;if(Gt(n>=2),2===n)return Gt("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),mn.emptyPath();const o=n-2,l=[];let h="";for(let y=0;y<n;){const I=a.indexOf("\x01",y);switch((I<0||I>o)&&St(),a.charAt(I+1)){case"\x01":const k=a.substring(y,I);let G;0===h.length?G=k:(h+=k,G=h,h=""),l.push(G);break;case"\x10":h+=a.substring(y,I),h+="\0";break;case"\x11":h+=a.substring(y,I+1);break;default:St()}y=I+2}return new mn(l)}class Dd{constructor(n,o){this.seconds=n,this.nanoseconds=o}}class Ms{constructor(n,o,l){this.ownerId=n,this.allowTabSynchronization=o,this.leaseTimestampMs=l}}Ms.store="owner",Ms.key="owner";class hu{constructor(n,o,l){this.userId=n,this.lastAcknowledgedBatchId=o,this.lastStreamToken=l}}hu.store="mutationQueues",hu.keyPath="userId";class Tr{constructor(n,o,l,h,y){this.userId=n,this.batchId=o,this.localWriteTimeMs=l,this.baseMutations=h,this.mutations=y}}Tr.store="mutations",Tr.keyPath="batchId",Tr.userMutationsIndex="userMutationsIndex",Tr.userMutationsKeyPath=["userId","batchId"];class ns{constructor(){}static prefixForUser(n){return[n]}static prefixForPath(n,o){return[n,xo(o)]}static key(n,o,l){return[n,xo(o),l]}}ns.store="documentMutations",ns.PLACEHOLDER=new ns;class Td{constructor(n,o){this.path=n,this.readTime=o}}class v{constructor(n,o){this.path=n,this.version=o}}class f{constructor(n,o,l,h,y,I){this.unknownDocument=n,this.noDocument=o,this.document=l,this.hasCommittedMutations=h,this.readTime=y,this.parentPath=I}}f.store="remoteDocuments",f.readTimeIndex="readTimeIndex",f.readTimeIndexPath="readTime",f.collectionReadTimeIndex="collectionReadTimeIndex",f.collectionReadTimeIndexPath=["parentPath","readTime"];class g{constructor(n){this.byteSize=n}}g.store="remoteDocumentGlobal",g.key="remoteDocumentGlobalKey";class C{constructor(n,o,l,h,y,I,k){this.targetId=n,this.canonicalId=o,this.readTime=l,this.resumeToken=h,this.lastListenSequenceNumber=y,this.lastLimboFreeSnapshotVersion=I,this.query=k}}C.store="targets",C.keyPath="targetId",C.queryTargetsIndexName="queryTargetsIndex",C.queryTargetsKeyPath=["canonicalId","targetId"];class B{constructor(n,o,l){this.targetId=n,this.path=o,this.sequenceNumber=l}}B.store="targetDocuments",B.keyPath=["targetId","path"],B.documentTargetsIndex="documentTargetsIndex",B.documentTargetsKeyPath=["path","targetId"];class Y{constructor(n,o,l,h){this.highestTargetId=n,this.highestListenSequenceNumber=o,this.lastRemoteSnapshotVersion=l,this.targetCount=h}}Y.key="targetGlobalKey",Y.store="targetGlobal";class we{constructor(n,o){this.collectionId=n,this.parent=o}}we.store="collectionParents",we.keyPath=["collectionId","parent"];class $e{constructor(n,o,l,h){this.clientId=n,this.updateTimeMs=o,this.networkEnabled=l,this.inForeground=h}}$e.store="clientMetadata",$e.keyPath="clientId";class yt{constructor(n,o,l){this.bundleId=n,this.createTime=o,this.version=l}}yt.store="bundles",yt.keyPath="bundleId";class Nt{constructor(n,o,l){this.name=n,this.readTime=o,this.bundledQuery=l}}Nt.store="namedQueries",Nt.keyPath="name";const nn=[hu.store,Tr.store,ns.store,f.store,C.store,Ms.store,Y.store,B.store,$e.store,g.store,we.store,yt.store,Nt.store],Zt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}class qe{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(o=>{this.isDone=!0,this.result=o,this.nextCallback&&this.nextCallback(o)},o=>{this.isDone=!0,this.error=o,this.catchCallback&&this.catchCallback(o)})}catch(n){return this.next(void 0,n)}next(n,o){return this.callbackAttached&&St(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(o,this.error):this.wrapSuccess(n,this.result):new qe((l,h)=>{this.nextCallback=y=>{this.wrapSuccess(n,y).next(l,h)},this.catchCallback=y=>{this.wrapFailure(o,y).next(l,h)}})}toPromise(){return new Promise((n,o)=>{this.next(n,o)})}wrapUserFunction(n){try{const o=n();return o instanceof qe?o:qe.resolve(o)}catch(o){return qe.reject(o)}}wrapSuccess(n,o){return n?this.wrapUserFunction(()=>n(o)):qe.resolve(o)}wrapFailure(n,o){return n?this.wrapUserFunction(()=>n(o)):qe.reject(o)}static resolve(n){return new qe((o,l)=>{o(n)})}static reject(n){return new qe((o,l)=>{l(n)})}static waitFor(n){return new qe((o,l)=>{let h=0,y=0,I=!1;n.forEach(k=>{++h,k.next(()=>{++y,I&&y===h&&o()},G=>l(G))}),I=!0,y===h&&o()})}static or(n){let o=qe.resolve(!1);for(const l of n)o=o.next(h=>h?qe.resolve(h):l());return o}static forEach(n,o){const l=[];return n.forEach((h,y)=>{l.push(o.call(this,h,y))}),this.waitFor(l)}}class Fi{constructor(n,o){this.action=n,this.transaction=o,this.aborted=!1,this.Tt=new Jr,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{o.error?this.Tt.reject(new pl(n,o.error)):this.Tt.resolve()},this.transaction.onerror=l=>{const h=Gl(l.target.error);this.Tt.reject(new pl(n,h))}}static open(n,o,l,h){try{return new Fi(o,n.transaction(h,l))}catch(y){throw new pl(o,y)}}get It(){return this.Tt.promise}abort(n){n&&this.Tt.reject(n),this.aborted||(at("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(n){const o=this.transaction.objectStore(n);return new Ih(o)}}class fo{constructor(n,o,l){this.name=n,this.version=o,this.At=l,12.2===fo.Rt((0,Ue.z$)())&&gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return at("SimpleDb","Removing database:",n),ka(window.indexedDB.deleteDatabase(n)).toPromise()}static bt(){if(!(0,Ue.hl)())return!1;if(fo.Pt())return!0;const n=(0,Ue.z$)(),o=fo.Rt(n),l=0<o&&o<10,h=fo.vt(n),y=0<h&&h<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||l||y)}static Pt(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}static St(n,o){return n.store(o)}static Rt(n){const o=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),l=o?o[1].split("_").slice(0,2).join("."):"-1";return Number(l)}static vt(n){const o=n.match(/Android ([\d.]+)/i),l=o?o[1].split(".").slice(0,2).join("."):"-1";return Number(l)}Dt(n){var o=this;return(0,se.Z)(function*(){return o.db||(at("SimpleDb","Opening database:",o.name),o.db=yield new Promise((l,h)=>{const y=indexedDB.open(o.name,o.version);y.onsuccess=I=>{l(I.target.result)},y.onblocked=()=>{h(new pl(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},y.onerror=I=>{const k=I.target.error;h("VersionError"===k.name?new tt(je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===k.name?new tt(je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+k):new pl(n,k))},y.onupgradeneeded=I=>{at("SimpleDb",'Database "'+o.name+'" requires upgrade from version:',I.oldVersion),o.At.Ct(I.target.result,y.transaction,I.oldVersion,o.version).next(()=>{at("SimpleDb","Database upgrade to version "+o.version+" complete")})}})),o.Nt&&(o.db.onversionchange=l=>o.Nt(l)),o.db})()}xt(n){this.Nt=n,this.db&&(this.db.onversionchange=o=>n(o))}runTransaction(n,o,l,h){var y=this;return(0,se.Z)(function*(){const I="readonly"===o;let k=0;for(;;){++k;try{y.db=yield y.Dt(n);const G=Fi.open(y.db,n,I?"readonly":"readwrite",l),X=h(G).catch(re=>(G.abort(re),qe.reject(re))).toPromise();return X.catch(()=>{}),yield G.It,X}catch(G){const X="FirebaseError"!==G.name&&k<3;if(at("SimpleDb","Transaction failed with error:",G.message,"Retrying:",X),y.close(),!X)return Promise.reject(G)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ad{constructor(n){this.kt=n,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(n){this.kt=n}done(){this.$t=!0}Mt(n){this.Ot=n}delete(){return ka(this.kt.delete())}}class pl extends tt{constructor(n,o){super(je.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${o}`),this.name="IndexedDbTransactionError"}}function Pa(a){return"IndexedDbTransactionError"===a.name}class Ih{constructor(n){this.store=n}put(n,o){let l;return void 0!==o?(at("SimpleDb","PUT",this.store.name,n,o),l=this.store.put(o,n)):(at("SimpleDb","PUT",this.store.name,"<auto-key>",n),l=this.store.put(n)),ka(l)}add(n){return at("SimpleDb","ADD",this.store.name,n,n),ka(this.store.add(n))}get(n){return ka(this.store.get(n)).next(o=>(void 0===o&&(o=null),at("SimpleDb","GET",this.store.name,n,o),o))}delete(n){return at("SimpleDb","DELETE",this.store.name,n),ka(this.store.delete(n))}count(){return at("SimpleDb","COUNT",this.store.name),ka(this.store.count())}Lt(n,o){const l=this.cursor(this.options(n,o)),h=[];return this.Bt(l,(y,I)=>{h.push(I)}).next(()=>h)}Ut(n,o){at("SimpleDb","DELETE ALL",this.store.name);const l=this.options(n,o);l.qt=!1;const h=this.cursor(l);return this.Bt(h,(y,I,k)=>k.delete())}Kt(n,o){let l;o?l=n:(l={},o=n);const h=this.cursor(l);return this.Bt(h,o)}jt(n){const o=this.cursor({});return new qe((l,h)=>{o.onerror=y=>{const I=Gl(y.target.error);h(I)},o.onsuccess=y=>{const I=y.target.result;I?n(I.primaryKey,I.value).next(k=>{k?I.continue():l()}):l()}})}Bt(n,o){const l=[];return new qe((h,y)=>{n.onerror=I=>{y(I.target.error)},n.onsuccess=I=>{const k=I.target.result;if(!k)return void h();const G=new Ad(k),X=o(k.primaryKey,k.value,G);if(X instanceof qe){const re=X.catch(be=>(G.done(),qe.reject(be)));l.push(re)}G.isDone?h():null===G.Ft?k.continue():k.continue(G.Ft)}}).next(()=>qe.waitFor(l))}options(n,o){let l;return void 0!==n&&("string"==typeof n?l=n:o=n),{index:l,range:o}}cursor(n){let o="next";if(n.reverse&&(o="prev"),n.index){const l=this.store.index(n.index);return n.qt?l.openKeyCursor(n.range,o):l.openCursor(n.range,o)}return this.store.openCursor(n.range,o)}}function ka(a){return new qe((n,o)=>{a.onsuccess=l=>{n(l.target.result)},a.onerror=l=>{const h=Gl(l.target.error);o(h)}})}let Sd=!1;function Gl(a){const n=fo.Rt((0,Ue.z$)());if(n>=12.2&&n<13){const o="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(o)>=0){const l=new tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${o}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Sd||(Sd=!0,setTimeout(()=>{throw l},0)),l}}return a}class Rd extends yi{constructor(n,o){super(),this.Qt=n,this.currentSequenceNumber=o}}function Ai(a,n){const o=mt(a);return fo.St(o.Qt,n)}class $s{constructor(n,o,l,h){this.batchId=n,this.localWriteTime=o,this.baseMutations=l,this.mutations=h}applyToRemoteDocument(n,o){const l=o.mutationResults;for(let h=0;h<this.mutations.length;h++){const y=this.mutations[h];y.key.isEqual(n.key)&&ud(y,n,l[h])}}applyToLocalView(n){for(const o of this.baseMutations)o.key.isEqual(n.key)&&sa(o,n,this.localWriteTime);for(const o of this.mutations)o.key.isEqual(n.key)&&sa(o,n,this.localWriteTime)}applyToLocalDocumentSet(n){this.mutations.forEach(o=>{const l=n.get(o.key),h=l;this.applyToLocalView(h),l.isValidDocument()||h.convertToNoDocument(Dt.min())})}keys(){return this.mutations.reduce((n,o)=>n.add(o.key),ir())}isEqual(n){return this.batchId===n.batchId&&gt(this.mutations,n.mutations,(o,l)=>ld(o,l))&&gt(this.baseMutations,n.baseMutations,(o,l)=>ld(o,l))}}class Dh{constructor(n,o,l,h){this.batch=n,this.commitVersion=o,this.mutationResults=l,this.docVersions=h}static from(n,o,l){Gt(n.mutations.length===l.length);let h=yh();const y=n.mutations;for(let I=0;I<y.length;I++)h=h.insert(y[I].key,l[I].version);return new Dh(n,o,l,h)}}class Wl{constructor(n,o,l,h,y=Dt.min(),I=Dt.min(),k=Di.EMPTY_BYTE_STRING){this.target=n,this.targetId=o,this.purpose=l,this.sequenceNumber=h,this.snapshotVersion=y,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=k}withSequenceNumber(n){return new Wl(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,o){return new Wl(this.target,this.targetId,this.purpose,this.sequenceNumber,o,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new Wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class Xf{constructor(n){this.Wt=n}}function um(a,n){if(n.document)return Cd(a.Wt,n.document,!!n.hasCommittedMutations);if(n.noDocument){const o=kt.fromSegments(n.noDocument.path),l=zl(n.noDocument.readTime),h=Ft.newNoDocument(o,l);return n.hasCommittedMutations?h.setHasCommittedMutations():h}if(n.unknownDocument){const o=kt.fromSegments(n.unknownDocument.path),l=zl(n.unknownDocument.version);return Ft.newUnknownDocument(o,l)}return St()}function Fa(a,n,o){const l=xd(o),h=n.key.path.popLast().toArray();if(n.isFoundDocument()){const y={name:$l(k=a.Wt,(G=n).key),fields:G.data.value.mapValue.fields,updateTime:Tc(k,G.version.toTimestamp())};return new f(null,null,y,n.hasCommittedMutations,l,h)}var k,G;if(n.isNoDocument()){const y=n.key.path.toArray(),I=Mc(n.version),k=n.hasCommittedMutations;return new f(null,new Td(y,I),null,k,l,h)}if(n.isUnknownDocument()){const y=n.key.path.toArray(),I=Mc(n.version);return new f(new v(y,I),null,null,!0,l,h)}return St()}function xd(a){const n=a.toTimestamp();return[n.seconds,n.nanoseconds]}function Th(a){const n=new It(a[0],a[1]);return Dt.fromTimestamp(n)}function Mc(a){const n=a.toTimestamp();return new Dd(n.seconds,n.nanoseconds)}function zl(a){const n=new It(a.seconds,a.nanoseconds);return Dt.fromTimestamp(n)}function fu(a,n){const o=(n.baseMutations||[]).map(y=>dl(a.Wt,y));for(let y=0;y<n.mutations.length-1;++y){const I=n.mutations[y];y+1<n.mutations.length&&void 0!==n.mutations[y+1].transform&&(I.updateTransforms=n.mutations[y+1].transform.fieldTransforms,n.mutations.splice(y+1,1),++y)}const l=n.mutations.map(y=>dl(a.Wt,y)),h=It.fromMillis(n.localWriteTimeMs);return new $s(n.batchId,h,o,l)}function Oc(a){const n=zl(a.readTime),o=void 0!==a.lastLimboFreeSnapshotVersion?zl(a.lastLimboFreeSnapshotVersion):Dt.min();let l;var h;return void 0!==a.query.documents?(Gt(1===(h=a.query).documents.length),l=zo(Vl(bd(h.documents[0])))):l=zo(Rc(a.query)),new Wl(l,a.targetId,0,a.lastListenSequenceNumber,n,o,Di.fromBase64String(a.resumeToken))}function ep(a,n){const o=Mc(n.snapshotVersion),l=Mc(n.lastLimboFreeSnapshotVersion);let h;h=ti(n.target)?wh(a.Wt,n.target):Sc(a.Wt,n.target);const y=n.resumeToken.toBase64();return new C(n.targetId,_r(n.target),o,y,n.sequenceNumber,l,h)}function Nd(a){const n=Rc({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?cu(n,n.limit,"L"):n}class tp{getBundleMetadata(n,o){return np(n).get(o).next(l=>{if(l)return{id:(h=l).bundleId,createTime:zl(h.createTime),version:h.version};var h})}saveBundleMetadata(n,o){return np(n).put({bundleId:(l=o).id,createTime:Mc(li(l.createTime)),version:l.version});var l}getNamedQuery(n,o){return g_(n).get(o).next(l=>{if(l)return{name:(h=l).name,query:Nd(h.bundledQuery),readTime:zl(h.readTime)};var h})}saveNamedQuery(n,o){return g_(n).put({name:(l=o).name,readTime:Mc(li(l.readTime)),bundledQuery:l.bundledQuery});var l}}function np(a){return Ai(a,yt.store)}function g_(a){return Ai(a,Nt.store)}class Pc{constructor(){this.Gt=new Md}addToCollectionParentIndex(n,o){return this.Gt.add(o),qe.resolve()}getCollectionParents(n,o){return qe.resolve(this.Gt.getEntries(o))}}class Md{constructor(){this.index={}}add(n){const o=n.lastSegment(),l=n.popLast(),h=this.index[o]||new ni(mn.comparator),y=!h.has(l);return this.index[o]=h.add(l),y}has(n){const o=n.lastSegment(),l=n.popLast(),h=this.index[o];return h&&h.has(l)}getEntries(n){return(this.index[n]||new ni(mn.comparator)).toArray()}}class lm{constructor(){this.zt=new Md}addToCollectionParentIndex(n,o){if(!this.zt.has(o)){const l=o.lastSegment(),h=o.popLast();n.addOnCommittedListener(()=>{this.zt.add(o)});const y={collectionId:l,parent:xo(h)};return cm(n).put(y)}return qe.resolve()}getCollectionParents(n,o){const l=[],h=IDBKeyRange.bound([o,""],[Cn(o),""],!1,!0);return cm(n).Lt(h).next(y=>{for(const I of y){if(I.collectionId!==o)break;l.push(ca(I.parent))}return l})}}function cm(a){return Ai(a,we.store)}const Ah={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class No{constructor(n,o,l){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=o,this.maximumSequenceNumbersToCollect=l}static withCacheSize(n){return new No(n,No.DEFAULT_COLLECTION_PERCENTILE,No.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dm(a,n,o){const l=a.store(Tr.store),h=a.store(ns.store),y=[],I=IDBKeyRange.only(o.batchId);let k=0;const G=l.Kt({range:I},(re,be,Ge)=>(k++,Ge.delete()));y.push(G.next(()=>{Gt(1===k)}));const X=[];for(const re of o.mutations){const be=ns.key(n,re.key.path,o.batchId);y.push(h.delete(be)),X.push(re.key)}return qe.waitFor(y).next(()=>X)}function Sh(a){if(!a)return 0;let n;if(a.document)n=a.document;else if(a.unknownDocument)n=a.unknownDocument;else{if(!a.noDocument)throw St();n=a.noDocument}return JSON.stringify(n).length}No.DEFAULT_COLLECTION_PERCENTILE=10,No.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,No.DEFAULT=new No(41943040,No.DEFAULT_COLLECTION_PERCENTILE,No.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),No.DISABLED=new No(-1,0,0);class rp{constructor(n,o,l,h){this.userId=n,this.N=o,this.Ht=l,this.referenceDelegate=h,this.Jt={}}static Yt(n,o,l,h){Gt(""!==n.uid);const y=n.isAuthenticated()?n.uid:"";return new rp(y,o,l,h)}checkEmpty(n){let o=!0;const l=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gl(n).Kt({index:Tr.userMutationsIndex,range:l},(h,y,I)=>{o=!1,I.done()}).next(()=>o)}addMutationBatch(n,o,l,h){const y=ql(n),I=gl(n);return I.add({}).next(k=>{Gt("number"==typeof k);const G=new $s(k,o,l,h),X=function(Ge,Qe,_t){const Bt=_t.baseMutations.map(di=>ts(Ge.Wt,di)),dn=_t.mutations.map(di=>ts(Ge.Wt,di));return new Tr(Qe,_t.batchId,_t.localWriteTime.toMillis(),Bt,dn)}(this.N,this.userId,G),re=[];let be=new ni((Ge,Qe)=>ke(Ge.canonicalString(),Qe.canonicalString()));for(const Ge of h){const Qe=ns.key(this.userId,Ge.key.path,k);be=be.add(Ge.key.path.popLast()),re.push(I.put(X)),re.push(y.put(Qe,ns.PLACEHOLDER))}return be.forEach(Ge=>{re.push(this.Ht.addToCollectionParentIndex(n,Ge))}),n.addOnCommittedListener(()=>{this.Jt[k]=G.keys()}),qe.waitFor(re).next(()=>G)})}lookupMutationBatch(n,o){return gl(n).get(o).next(l=>l?(Gt(l.userId===this.userId),fu(this.N,l)):null)}Xt(n,o){return this.Jt[o]?qe.resolve(this.Jt[o]):this.lookupMutationBatch(n,o).next(l=>{if(l){const h=l.keys();return this.Jt[o]=h,h}return null})}getNextMutationBatchAfterBatchId(n,o){const l=o+1,h=IDBKeyRange.lowerBound([this.userId,l]);let y=null;return gl(n).Kt({index:Tr.userMutationsIndex,range:h},(I,k,G)=>{k.userId===this.userId&&(Gt(k.batchId>=l),y=fu(this.N,k)),G.done()}).next(()=>y)}getHighestUnacknowledgedBatchId(n){const o=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let l=-1;return gl(n).Kt({index:Tr.userMutationsIndex,range:o,reverse:!0},(h,y,I)=>{l=y.batchId,I.done()}).next(()=>l)}getAllMutationBatches(n){const o=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gl(n).Lt(Tr.userMutationsIndex,o).next(l=>l.map(h=>fu(this.N,h)))}getAllMutationBatchesAffectingDocumentKey(n,o){const l=ns.prefixForPath(this.userId,o.path),h=IDBKeyRange.lowerBound(l),y=[];return ql(n).Kt({range:h},(I,k,G)=>{const[X,re,be]=I,Ge=ca(re);if(X===this.userId&&o.path.isEqual(Ge))return gl(n).get(be).next(Qe=>{if(!Qe)throw St();Gt(Qe.userId===this.userId),y.push(fu(this.N,Qe))});G.done()}).next(()=>y)}getAllMutationBatchesAffectingDocumentKeys(n,o){let l=new ni(ke);const h=[];return o.forEach(y=>{const I=ns.prefixForPath(this.userId,y.path),k=IDBKeyRange.lowerBound(I),G=ql(n).Kt({range:k},(X,re,be)=>{const[Ge,Qe,_t]=X,Bt=ca(Qe);Ge===this.userId&&y.path.isEqual(Bt)?l=l.add(_t):be.done()});h.push(G)}),qe.waitFor(h).next(()=>this.Zt(n,l))}getAllMutationBatchesAffectingQuery(n,o){const l=o.path,h=l.length+1,y=ns.prefixForPath(this.userId,l),I=IDBKeyRange.lowerBound(y);let k=new ni(ke);return ql(n).Kt({range:I},(G,X,re)=>{const[be,Ge,Qe]=G,_t=ca(Ge);be===this.userId&&l.isPrefixOf(_t)?_t.length===h&&(k=k.add(Qe)):re.done()}).next(()=>this.Zt(n,k))}Zt(n,o){const l=[],h=[];return o.forEach(y=>{h.push(gl(n).get(y).next(I=>{if(null===I)throw St();Gt(I.userId===this.userId),l.push(fu(this.N,I))}))}),qe.waitFor(h).next(()=>l)}removeMutationBatch(n,o){return dm(n.Qt,this.userId,o).next(l=>(n.addOnCommittedListener(()=>{this.te(o.batchId)}),qe.forEach(l,h=>this.referenceDelegate.markPotentiallyOrphaned(n,h))))}te(n){delete this.Jt[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(o=>{if(!o)return qe.resolve();const l=IDBKeyRange.lowerBound(ns.prefixForUser(this.userId)),h=[];return ql(n).Kt({range:l},(y,I,k)=>{if(y[0]===this.userId){const G=ca(y[1]);h.push(G)}else k.done()}).next(()=>{Gt(0===h.length)})})}containsKey(n,o){return hm(n,this.userId,o)}ee(n){return Rh(n).get(this.userId).next(o=>o||new hu(this.userId,-1,""))}}function hm(a,n,o){const l=ns.prefixForPath(n,o.path),h=l[1],y=IDBKeyRange.lowerBound(l);let I=!1;return ql(a).Kt({range:y,qt:!0},(k,G,X)=>{const[re,be,Ge]=k;re===n&&be===h&&(I=!0),X.done()}).next(()=>I)}function gl(a){return Ai(a,Tr.store)}function ql(a){return Ai(a,ns.store)}function Rh(a){return Ai(a,hu.store)}class ml{constructor(n){this.ne=n}next(){return this.ne+=2,this.ne}static se(){return new ml(0)}static ie(){return new ml(-1)}}class ip{constructor(n,o){this.referenceDelegate=n,this.N=o}allocateTargetId(n){return this.re(n).next(o=>{const l=new ml(o.highestTargetId);return o.highestTargetId=l.next(),this.oe(n,o).next(()=>o.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.re(n).next(o=>Dt.fromTimestamp(new It(o.lastRemoteSnapshotVersion.seconds,o.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.re(n).next(o=>o.highestListenSequenceNumber)}setTargetsMetadata(n,o,l){return this.re(n).next(h=>(h.highestListenSequenceNumber=o,l&&(h.lastRemoteSnapshotVersion=l.toTimestamp()),o>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=o),this.oe(n,h)))}addTargetData(n,o){return this.ae(n,o).next(()=>this.re(n).next(l=>(l.targetCount+=1,this.ce(o,l),this.oe(n,l))))}updateTargetData(n,o){return this.ae(n,o)}removeTargetData(n,o){return this.removeMatchingKeysForTargetId(n,o.targetId).next(()=>kc(n).delete(o.targetId)).next(()=>this.re(n)).next(l=>(Gt(l.targetCount>0),l.targetCount-=1,this.oe(n,l)))}removeTargets(n,o,l){let h=0;const y=[];return kc(n).Kt((I,k)=>{const G=Oc(k);G.sequenceNumber<=o&&null===l.get(G.targetId)&&(h++,y.push(this.removeTargetData(n,G)))}).next(()=>qe.waitFor(y)).next(()=>h)}forEachTarget(n,o){return kc(n).Kt((l,h)=>{const y=Oc(h);o(y)})}re(n){return fm(n).get(Y.key).next(o=>(Gt(null!==o),o))}oe(n,o){return fm(n).put(Y.key,o)}ae(n,o){return kc(n).put(ep(this.N,o))}ce(n,o){let l=!1;return n.targetId>o.highestTargetId&&(o.highestTargetId=n.targetId,l=!0),n.sequenceNumber>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n.sequenceNumber,l=!0),l}getTargetCount(n){return this.re(n).next(o=>o.targetCount)}getTargetData(n,o){const l=_r(o),h=IDBKeyRange.bound([l,Number.NEGATIVE_INFINITY],[l,Number.POSITIVE_INFINITY]);let y=null;return kc(n).Kt({range:h,index:C.queryTargetsIndexName},(I,k,G)=>{const X=Oc(k);ui(o,X.target)&&(y=X,G.done())}).next(()=>y)}addMatchingKeys(n,o,l){const h=[],y=ju(n);return o.forEach(I=>{const k=xo(I.path);h.push(y.put(new B(l,k))),h.push(this.referenceDelegate.addReference(n,l,I))}),qe.waitFor(h)}removeMatchingKeys(n,o,l){const h=ju(n);return qe.forEach(o,y=>{const I=xo(y.path);return qe.waitFor([h.delete([l,I]),this.referenceDelegate.removeReference(n,l,y)])})}removeMatchingKeysForTargetId(n,o){const l=ju(n),h=IDBKeyRange.bound([o],[o+1],!1,!0);return l.delete(h)}getMatchingKeysForTargetId(n,o){const l=IDBKeyRange.bound([o],[o+1],!1,!0),h=ju(n);let y=ir();return h.Kt({range:l,qt:!0},(I,k,G)=>{const X=ca(I[1]),re=new kt(X);y=y.add(re)}).next(()=>y)}containsKey(n,o){const l=xo(o.path),h=IDBKeyRange.bound([l],[Cn(l)],!1,!0);let y=0;return ju(n).Kt({index:B.documentTargetsIndex,qt:!0,range:h},([I,k],G,X)=>{0!==I&&(y++,X.done())}).next(()=>y>0)}Et(n,o){return kc(n).get(o).next(l=>l?Oc(l):null)}}function kc(a){return Ai(a,C.store)}function fm(a){return Ai(a,Y.store)}function ju(a){return Ai(a,B.store)}function yl(a){return $u.apply(this,arguments)}function $u(){return($u=(0,se.Z)(function*(a){if(a.code!==je.FAILED_PRECONDITION||a.message!==Zt)throw a;at("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function sp([a,n],[o,l]){const h=ke(a,o);return 0===h?ke(n,l):h}class pm{constructor(n){this.ue=n,this.buffer=new ni(sp),this.he=0}le(){return++this.he}fe(n){const o=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(o);else{const l=this.buffer.last();sp(o,l)<0&&(this.buffer=this.buffer.delete(l).add(o))}}get maxValue(){return this.buffer.last()[0]}}class m_{constructor(n,o){this.garbageCollector=n,this.asyncQueue=o,this.de=!1,this.we=null}start(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(n){var o=this;const l=this.de?3e5:6e4;at("LruGarbageCollector",`Garbage collection scheduled in ${l}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",l,(0,se.Z)(function*(){o.we=null,o.de=!0;try{yield n.collectGarbage(o.garbageCollector)}catch(h){Pa(h)?at("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",h):yield yl(h)}yield o._e(n)}))}}class xh{constructor(n,o){this.me=n,this.params=o}calculateTargetCount(n,o){return this.me.ge(n).next(l=>Math.floor(o/100*l))}nthSequenceNumber(n,o){if(0===o)return qe.resolve(q.T);const l=new pm(o);return this.me.forEachTarget(n,h=>l.fe(h.sequenceNumber)).next(()=>this.me.ye(n,h=>l.fe(h))).next(()=>l.maxValue)}removeTargets(n,o,l){return this.me.removeTargets(n,o,l)}removeOrphanedDocuments(n,o){return this.me.removeOrphanedDocuments(n,o)}collect(n,o){return-1===this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector","Garbage collection skipped; disabled"),qe.resolve(Ah)):this.getCacheSize(n).next(l=>l<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${l} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ah):this.pe(n,o))}getCacheSize(n){return this.me.getCacheSize(n)}pe(n,o){let l,h,y,I,k,G,X;const re=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(be=>(be>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${be}`),h=this.params.maximumSequenceNumbersToCollect):h=be,I=Date.now(),this.nthSequenceNumber(n,h))).next(be=>(l=be,k=Date.now(),this.removeTargets(n,l,o))).next(be=>(y=be,G=Date.now(),this.removeOrphanedDocuments(n,l))).next(be=>(X=Date.now(),uo()<=Yt.in.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-re}ms\n\tDetermined least recently used ${h} in `+(k-I)+`ms\n\tRemoved ${y} targets in `+(G-k)+`ms\n\tRemoved ${be} documents in `+(X-G)+`ms\nTotal Duration: ${X-re}ms`),qe.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:y,documentsRemoved:be})))}}class y_{constructor(n,o){this.db=n,this.garbageCollector=new xh(this,o)}ge(n){const o=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(l=>o.next(h=>l+h))}Ee(n){let o=0;return this.ye(n,l=>{o++}).next(()=>o)}forEachTarget(n,o){return this.db.getTargetCache().forEachTarget(n,o)}ye(n,o){return this.Te(n,(l,h)=>o(h))}addReference(n,o,l){return Od(n,l)}removeReference(n,o,l){return Od(n,l)}removeTargets(n,o,l){return this.db.getTargetCache().removeTargets(n,o,l)}markPotentiallyOrphaned(n,o){return Od(n,o)}Ie(n,o){return function(l,h){let y=!1;return Rh(l).jt(I=>hm(l,I,h).next(k=>(k&&(y=!0),qe.resolve(!k)))).next(()=>y)}(n,o)}removeOrphanedDocuments(n,o){const l=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let y=0;return this.Te(n,(I,k)=>{if(k<=o){const G=this.Ie(n,I).next(X=>{if(!X)return y++,l.getEntry(n,I).next(()=>(l.removeEntry(I),ju(n).delete([0,xo(I.path)])))});h.push(G)}}).next(()=>qe.waitFor(h)).next(()=>l.apply(n)).next(()=>y)}removeTarget(n,o){const l=o.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,l)}updateLimboDocument(n,o){return Od(n,o)}Te(n,o){const l=ju(n);let h,y=q.T;return l.Kt({index:B.documentTargetsIndex},([I,k],{path:G,sequenceNumber:X})=>{0===I?(y!==q.T&&o(new kt(ca(h)),y),y=X,h=G):y=q.T}).next(()=>{y!==q.T&&o(new kt(ca(h)),y)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function Od(a,n){return ju(a).put((l=a.currentSequenceNumber,new B(0,xo(n.path),l)));var l}class Kl{constructor(n,o){this.mapKeyFn=n,this.equalsFn=o,this.inner={}}get(n){const o=this.mapKeyFn(n),l=this.inner[o];if(void 0!==l)for(const[h,y]of l)if(this.equalsFn(h,n))return y}has(n){return void 0!==this.get(n)}set(n,o){const l=this.mapKeyFn(n),h=this.inner[l];if(void 0!==h){for(let y=0;y<h.length;y++)if(this.equalsFn(h[y][0],n))return void(h[y]=[n,o]);h.push([n,o])}else this.inner[l]=[[n,o]]}delete(n){const o=this.mapKeyFn(n),l=this.inner[o];if(void 0===l)return!1;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],n))return 1===l.length?delete this.inner[o]:l.splice(h,1),!0;return!1}forEach(n){$r(this.inner,(o,l)=>{for(const[h,y]of l)n(h,y)})}isEmpty(){return Xr(this.inner)}}class op{constructor(){this.changes=new Kl(n=>n.toString(),(n,o)=>n.isEqual(o)),this.changesApplied=!1}getReadTime(n){const o=this.changes.get(n);return o?o.readTime:Dt.min()}addEntry(n,o){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:o})}removeEntry(n,o=null){this.assertNotApplied(),this.changes.set(n,{document:Ft.newInvalidDocument(n),readTime:o})}getEntry(n,o){this.assertNotApplied();const l=this.changes.get(o);return void 0!==l?qe.resolve(l.document):this.getFromCache(n,o)}getEntries(n,o){return this.getAllFromCache(n,o)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class ap{constructor(n,o){this.N=n,this.Ht=o}addEntry(n,o,l){return La(n).put(kd(o),l)}removeEntry(n,o){const l=La(n),h=kd(o);return l.delete(h)}updateMetadata(n,o){return this.getMetadata(n).next(l=>(l.byteSize+=o,this.Ae(n,l)))}getEntry(n,o){return La(n).get(kd(o)).next(l=>this.Re(o,l))}be(n,o){return La(n).get(kd(o)).next(l=>({document:this.Re(o,l),size:Sh(l)}))}getEntries(n,o){let l=Ro();return this.Pe(n,o,(h,y)=>{const I=this.Re(h,y);l=l.insert(h,I)}).next(()=>l)}ve(n,o){let l=Ro(),h=new Pr(kt.comparator);return this.Pe(n,o,(y,I)=>{const k=this.Re(y,I);l=l.insert(y,k),h=h.insert(y,Sh(I))}).next(()=>({documents:l,Ve:h}))}Pe(n,o,l){if(o.isEmpty())return qe.resolve();const h=IDBKeyRange.bound(o.first().path.toArray(),o.last().path.toArray()),y=o.getIterator();let I=y.getNext();return La(n).Kt({range:h},(k,G,X)=>{const re=kt.fromSegments(k);for(;I&&kt.comparator(I,re)<0;)l(I,null),I=y.getNext();I&&I.isEqual(re)&&(l(I,G),I=y.hasNext()?y.getNext():null),I?X.Mt(I.path.toArray()):X.done()}).next(()=>{for(;I;)l(I,null),I=y.hasNext()?y.getNext():null})}getDocumentsMatchingQuery(n,o,l){let h=Ro();const y=o.path.length+1,I={};if(l.isEqual(Dt.min())){const k=o.path.toArray();I.range=IDBKeyRange.lowerBound(k)}else{const k=o.path.toArray(),G=xd(l);I.range=IDBKeyRange.lowerBound([k,G],!0),I.index=f.collectionReadTimeIndex}return La(n).Kt(I,(k,G,X)=>{if(k.length!==y)return;const re=um(this.N,G);o.path.isPrefixOf(re.key.path)?il(o,re)&&(h=h.insert(re.key,re)):X.done()}).next(()=>h)}newChangeBuffer(n){return new gm(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(o=>o.byteSize)}getMetadata(n){return Pd(n).get(g.key).next(o=>(Gt(!!o),o))}Ae(n,o){return Pd(n).put(g.key,o)}Re(n,o){if(o){const l=um(this.N,o);if(!l.isNoDocument()||!l.version.isEqual(Dt.min()))return l}return Ft.newInvalidDocument(n)}}class gm extends op{constructor(n,o){super(),this.Se=n,this.trackRemovals=o,this.De=new Kl(l=>l.toString(),(l,h)=>l.isEqual(h))}applyChanges(n){const o=[];let l=0,h=new ni((y,I)=>ke(y.canonicalString(),I.canonicalString()));return this.changes.forEach((y,I)=>{const k=this.De.get(y);if(I.document.isValidDocument()){const G=Fa(this.Se.N,I.document,this.getReadTime(y));h=h.add(y.path.popLast()),l+=Sh(G)-k,o.push(this.Se.addEntry(n,y,G))}else if(l-=k,this.trackRemovals){const G=Fa(this.Se.N,Ft.newNoDocument(y,Dt.min()),this.getReadTime(y));o.push(this.Se.addEntry(n,y,G))}else o.push(this.Se.removeEntry(n,y))}),h.forEach(y=>{o.push(this.Se.Ht.addToCollectionParentIndex(n,y))}),o.push(this.Se.updateMetadata(n,l)),qe.waitFor(o)}getFromCache(n,o){return this.Se.be(n,o).next(l=>(this.De.set(o,l.size),l.document))}getAllFromCache(n,o){return this.Se.ve(n,o).next(({documents:l,Ve:h})=>(h.forEach((y,I)=>{this.De.set(y,I)}),l))}}function Pd(a){return Ai(a,g.store)}function La(a){return Ai(a,f.store)}function kd(a){return a.path.toArray()}class up{constructor(n){this.N=n}Ct(n,o,l,h){Gt(l<h&&l>=0&&h<=11);const y=new Fi("createOrUpgrade",o);var k;l<1&&h>=1&&(n.createObjectStore(Ms.store),(k=n).createObjectStore(hu.store,{keyPath:hu.keyPath}),k.createObjectStore(Tr.store,{keyPath:Tr.keyPath,autoIncrement:!0}).createIndex(Tr.userMutationsIndex,Tr.userMutationsKeyPath,{unique:!0}),k.createObjectStore(ns.store),lp(n),function(k){k.createObjectStore(f.store)}(n));let I=qe.resolve();return l<3&&h>=3&&(0!==l&&(function(k){k.deleteObjectStore(B.store),k.deleteObjectStore(C.store),k.deleteObjectStore(Y.store)}(n),lp(n)),I=I.next(()=>function(k){const G=k.store(Y.store),X=new Y(0,0,Dt.min().toTimestamp(),0);return G.put(Y.key,X)}(y))),l<4&&h>=4&&(0!==l&&(I=I.next(()=>function(k,G){return G.store(Tr.store).Lt().next(X=>{k.deleteObjectStore(Tr.store),k.createObjectStore(Tr.store,{keyPath:Tr.keyPath,autoIncrement:!0}).createIndex(Tr.userMutationsIndex,Tr.userMutationsKeyPath,{unique:!0});const re=G.store(Tr.store),be=X.map(Ge=>re.put(Ge));return qe.waitFor(be)})}(n,y))),I=I.next(()=>{!function(k){k.createObjectStore($e.store,{keyPath:$e.keyPath})}(n)})),l<5&&h>=5&&(I=I.next(()=>this.Ce(y))),l<6&&h>=6&&(I=I.next(()=>(function(k){k.createObjectStore(g.store)}(n),this.Ne(y)))),l<7&&h>=7&&(I=I.next(()=>this.xe(y))),l<8&&h>=8&&(I=I.next(()=>this.ke(n,y))),l<9&&h>=9&&(I=I.next(()=>{(function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")})(n),function(k){const G=k.objectStore(f.store);G.createIndex(f.readTimeIndex,f.readTimeIndexPath,{unique:!1}),G.createIndex(f.collectionReadTimeIndex,f.collectionReadTimeIndexPath,{unique:!1})}(o)})),l<10&&h>=10&&(I=I.next(()=>this.$e(y))),l<11&&h>=11&&(I=I.next(()=>{(function(k){k.createObjectStore(yt.store,{keyPath:yt.keyPath})})(n),function(k){k.createObjectStore(Nt.store,{keyPath:Nt.keyPath})}(n)})),I}Ne(n){let o=0;return n.store(f.store).Kt((l,h)=>{o+=Sh(h)}).next(()=>{const l=new g(o);return n.store(g.store).put(g.key,l)})}Ce(n){const o=n.store(hu.store),l=n.store(Tr.store);return o.Lt().next(h=>qe.forEach(h,y=>{const I=IDBKeyRange.bound([y.userId,-1],[y.userId,y.lastAcknowledgedBatchId]);return l.Lt(Tr.userMutationsIndex,I).next(k=>qe.forEach(k,G=>{Gt(G.userId===y.userId);const X=fu(this.N,G);return dm(n,y.userId,X).next(()=>{})}))}))}xe(n){const o=n.store(B.store),l=n.store(f.store);return n.store(Y.store).get(Y.key).next(h=>{const y=[];return l.Kt((I,k)=>{const G=new mn(I),X=[0,xo(G)];y.push(o.get(X).next(re=>re?qe.resolve():o.put(new B(0,xo(G),h.highestListenSequenceNumber))))}).next(()=>qe.waitFor(y))})}ke(n,o){n.createObjectStore(we.store,{keyPath:we.keyPath});const l=o.store(we.store),h=new Md,y=I=>{if(h.add(I)){const k=I.lastSegment(),G=I.popLast();return l.put({collectionId:k,parent:xo(G)})}};return o.store(f.store).Kt({qt:!0},(I,k)=>{const G=new mn(I);return y(G.popLast())}).next(()=>o.store(ns.store).Kt({qt:!0},([I,k,G],X)=>{const re=ca(k);return y(re.popLast())}))}$e(n){const o=n.store(C.store);return o.Kt((l,h)=>{const y=Oc(h),I=ep(this.N,y);return o.put(I)})}}function lp(a){a.createObjectStore(B.store,{keyPath:B.keyPath}).createIndex(B.documentTargetsIndex,B.documentTargetsKeyPath,{unique:!0}),a.createObjectStore(C.store,{keyPath:C.keyPath}).createIndex(C.queryTargetsIndexName,C.queryTargetsKeyPath,{unique:!0}),a.createObjectStore(Y.store)}const Fd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zl{constructor(n,o,l,h,y,I,k,G,X,re){if(this.allowTabSynchronization=n,this.persistenceKey=o,this.clientId=l,this.Oe=y,this.window=I,this.document=k,this.Fe=X,this.Me=re,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=be=>Promise.resolve(),!Zl.bt())throw new tt(je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new y_(this,h),this.We=o+"main",this.N=new Xf(G),this.Ge=new fo(this.We,11,new up(this.N)),this.ze=new ip(this.referenceDelegate,this.N),this.Ht=new lm,this.He=new ap(this.N,this.Ht),this.Je=new tp,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===re&&gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new tt(je.FAILED_PRECONDITION,Fd);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.ze.getHighestSequenceNumber(n))}).then(n=>{this.Le=new q(n,this.Fe)}).then(()=>{this.Be=!0}).catch(n=>(this.Ge&&this.Ge.close(),Promise.reject(n)))}nn(n){var o=this;return this.Qe=function(){var l=(0,se.Z)(function*(h){if(o.started)return n(h)});return function(h){return l.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.Ge.xt(function(){var o=(0,se.Z)(function*(l){null===l.newVersion&&(yield n())});return function(l){return o.apply(this,arguments)}}())}setNetworkEnabled(n){var o=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,se.Z)(function*(){o.started&&(yield o.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>Vd(n).put(new $e(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(n).next(o=>{o||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(n)).next(o=>this.isPrimary&&!o?this.on(n).next(()=>!1):!!o&&this.an(n).next(()=>!0))).catch(n=>{if(Pa(n))return at("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return at("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Oe.enqueueRetryable(()=>this.Qe(n)),this.isPrimary=n})}sn(n){return Ld(n).get(Ms.key).next(o=>qe.resolve(this.cn(o)))}un(n){return Vd(n).delete(this.clientId)}hn(){var n=this;return(0,se.Z)(function*(){if(n.isPrimary&&!n.ln(n.je,18e5)){n.je=Date.now();const o=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",l=>{const h=Ai(l,$e.store);return h.Lt().next(y=>{const I=n.fn(y,18e5),k=y.filter(G=>-1===I.indexOf(G));return qe.forEach(k,G=>h.delete(G.clientId)).next(()=>k)})}).catch(()=>[]);if(n.Ye)for(const l of o)n.Ye.removeItem(n.dn(l.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(n){return!!n&&n.ownerId===this.clientId}rn(n){return this.Me?qe.resolve(!0):Ld(n).get(Ms.key).next(o=>{if(null!==o&&this.ln(o.leaseTimestampMs,5e3)&&!this.wn(o.ownerId)){if(this.cn(o)&&this.networkEnabled)return!0;if(!this.cn(o)){if(!o.allowTabSynchronization)throw new tt(je.FAILED_PRECONDITION,Fd);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vd(n).Lt().next(l=>void 0===this.fn(l,5e3).find(h=>{if(this.clientId!==h.clientId){const I=!this.inForeground&&h.inForeground,k=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||I&&k)return!0}return!1}))}).next(o=>(this.isPrimary!==o&&at("IndexedDbPersistence",`Client ${o?"is":"is not"} eligible for a primary lease.`),o))}shutdown(){var n=this;return(0,se.Z)(function*(){n.Be=!1,n._n(),n.Ke&&(n.Ke.cancel(),n.Ke=null),n.mn(),n.gn(),yield n.Ge.runTransaction("shutdown","readwrite",[Ms.store,$e.store],o=>{const l=new Rd(o,q.T);return n.on(l).next(()=>n.un(l))}),n.Ge.close(),n.yn()})()}fn(n,o){return n.filter(l=>this.ln(l.updateTimeMs,o)&&!this.wn(l.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",n=>Vd(n).Lt().next(o=>this.fn(o,18e5).map(l=>l.clientId)))}get started(){return this.Be}getMutationQueue(n){return rp.Yt(n,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(n,o,l){let y;return at("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===o?"readonly":"readwrite",nn,I=>(y=new Rd(I,this.Le?this.Le.next():q.T),"readwrite-primary"===o?this.sn(y).next(k=>!!k||this.rn(y)).next(k=>{if(!k)throw gr(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new tt(je.FAILED_PRECONDITION,Zt);return l(y)}).next(k=>this.an(y).next(()=>k)):this.En(y).next(()=>l(y)))).then(I=>(y.raiseOnCommittedEvent(),I))}En(n){return Ld(n).get(Ms.key).next(o=>{if(null!==o&&this.ln(o.leaseTimestampMs,5e3)&&!this.wn(o.ownerId)&&!this.cn(o)&&!(this.Me||this.allowTabSynchronization&&o.allowTabSynchronization))throw new tt(je.FAILED_PRECONDITION,Fd)})}an(n){const o=new Ms(this.clientId,this.allowTabSynchronization,Date.now());return Ld(n).put(Ms.key,o)}static bt(){return fo.bt()}on(n){const o=Ld(n);return o.get(Ms.key).next(l=>this.cn(l)?(at("IndexedDbPersistence","Releasing primary lease."),o.delete(Ms.key)):qe.resolve())}ln(n,o){const l=Date.now();return!(n<l-o||n>l&&(gr(`Detected an update time that is in the future: ${n} > ${l}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Ue=()=>{this._n(),(0,Ue.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(n){var o;try{const l=null!==(null===(o=this.Ye)||void 0===o?void 0:o.getItem(this.dn(n)));return at("IndexedDbPersistence",`Client '${n}' ${l?"is":"is not"} zombied in LocalStorage`),l}catch(l){return gr("IndexedDbPersistence","Failed to get zombied client id.",l),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){gr("Failed to set zombie client id.",n)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}dn(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function Ld(a){return Ai(a,Ms.store)}function Vd(a){return Ai(a,$e.store)}function cp(a,n){let o=a.projectId;return a.isDefaultDatabase||(o+="."+a.database),"firestore/"+n+"/"+o+"/"}class __{constructor(n,o){this.progress=n,this.Tn=o}}class dp{constructor(n,o,l){this.He=n,this.In=o,this.Ht=l}An(n,o){return this.In.getAllMutationBatchesAffectingDocumentKey(n,o).next(l=>this.Rn(n,o,l))}Rn(n,o,l){return this.He.getEntry(n,o).next(h=>{for(const y of l)y.applyToLocalView(h);return h})}bn(n,o){n.forEach((l,h)=>{for(const y of o)y.applyToLocalView(h)})}Pn(n,o){return this.He.getEntries(n,o).next(l=>this.vn(n,l).next(()=>l))}vn(n,o){return this.In.getAllMutationBatchesAffectingDocumentKeys(n,o).next(l=>this.bn(o,l))}getDocumentsMatchingQuery(n,o,l){return kt.isDocumentKey((h=o).path)&&null===h.collectionGroup&&0===h.filters.length?this.Vn(n,o.path):Gr(o)?this.Sn(n,o,l):this.Dn(n,o,l);var h}Vn(n,o){return this.An(n,new kt(o)).next(l=>{let h=pd();return l.isFoundDocument()&&(h=h.insert(l.key,l)),h})}Sn(n,o,l){const h=o.collectionGroup;let y=pd();return this.Ht.getCollectionParents(n,h).next(I=>qe.forEach(I,k=>{const G=(X=o,re=k.child(h),new ia(re,null,X.explicitOrderBy.slice(),X.filters.slice(),X.limit,X.limitType,X.startAt,X.endAt));var X,re;return this.Dn(n,G,l).next(X=>{X.forEach((re,be)=>{y=y.insert(re,be)})})}).next(()=>y))}Dn(n,o,l){let h,y;return this.He.getDocumentsMatchingQuery(n,o,l).next(I=>(h=I,this.In.getAllMutationBatchesAffectingQuery(n,o))).next(I=>(y=I,this.Cn(n,y,h).next(k=>{h=k;for(const G of y)for(const X of G.mutations){const re=X.key;let be=h.get(re);null==be&&(be=Ft.newInvalidDocument(re),h=h.insert(re,be)),sa(X,be,G.localWriteTime),be.isFoundDocument()||(h=h.remove(re))}}))).next(()=>(h.forEach((I,k)=>{il(o,k)||(h=h.remove(I))}),h))}Cn(n,o,l){let h=ir();for(const I of o)for(const k of I.mutations)k instanceof aa&&null===l.get(k.key)&&(h=h.add(k.key));let y=l;return this.He.getEntries(n,h).next(I=>(I.forEach((k,G)=>{G.isFoundDocument()&&(y=y.insert(k,G))}),y))}}class Ud{constructor(n,o,l,h){this.targetId=n,this.fromCache=o,this.Nn=l,this.xn=h}static kn(n,o){let l=ir(),h=ir();for(const y of o.docChanges)switch(y.type){case 0:l=l.add(y.doc.key);break;case 1:h=h.add(y.doc.key)}return new Ud(n,o.fromCache,l,h)}}class hp{$n(n){this.On=n}getDocumentsMatchingQuery(n,o,l,h){return 0===(y=o).filters.length&&null===y.limit&&null==y.startAt&&null==y.endAt&&(0===y.explicitOrderBy.length||1===y.explicitOrderBy.length&&y.explicitOrderBy[0].field.isKeyField())||l.isEqual(Dt.min())?this.Fn(n,o):this.On.Pn(n,h).next(y=>{const I=this.Mn(o,y);return(ku(o)||Aa(o))&&this.Ln(o.limitType,I,h,l)?this.Fn(n,o):(uo()<=Yt.in.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),vc(o)),this.On.getDocumentsMatchingQuery(n,o,l).next(k=>(I.forEach(G=>{k=k.insert(G.key,G)}),k)))});var y}Mn(n,o){let l=new ni(ph(n));return o.forEach((h,y)=>{il(n,y)&&(l=l.add(y))}),l}Ln(n,o,l,h){if(l.size!==o.size)return!0;const y="F"===n?o.last():o.first();return!!y&&(y.hasPendingWrites||y.version.compareTo(h)>0)}Fn(n,o){return uo()<=Yt.in.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",vc(o)),this.On.getDocumentsMatchingQuery(n,o,Dt.min())}}class TE{constructor(n,o,l,h){this.persistence=n,this.Bn=o,this.N=h,this.Un=new Pr(ke),this.qn=new Kl(y=>_r(y),ui),this.Kn=Dt.min(),this.In=n.getMutationQueue(l),this.jn=n.getRemoteDocumentCache(),this.ze=n.getTargetCache(),this.Qn=new dp(this.jn,this.In,this.persistence.getIndexManager()),this.Je=n.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",o=>n.collect(o,this.Un))}}function fp(a,n,o,l){return new TE(a,n,o,l)}function mm(a,n){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,se.Z)(function*(a,n){const o=mt(a);let l=o.In,h=o.Qn;const y=yield o.persistence.runTransaction("Handle user change","readonly",I=>{let k;return o.In.getAllMutationBatches(I).next(G=>(k=G,l=o.persistence.getMutationQueue(n),h=new dp(o.jn,l,o.persistence.getIndexManager()),l.getAllMutationBatches(I))).next(G=>{const X=[],re=[];let be=ir();for(const Ge of k){X.push(Ge.batchId);for(const Qe of Ge.mutations)be=be.add(Qe.key)}for(const Ge of G){re.push(Ge.batchId);for(const Qe of Ge.mutations)be=be.add(Qe.key)}return h.Pn(I,be).next(Ge=>({Wn:Ge,removedBatchIds:X,addedBatchIds:re}))})});return o.In=l,o.Qn=h,o.Bn.$n(o.Qn),y})).apply(this,arguments)}function v_(a,n){const o=mt(a);return o.persistence.runTransaction("Acknowledge batch","readwrite-primary",l=>{const h=n.batch.keys(),y=o.jn.newChangeBuffer({trackRemovals:!0});return function(I,k,G,X){const re=G.batch,be=re.keys();let Ge=qe.resolve();return be.forEach(Qe=>{Ge=Ge.next(()=>X.getEntry(k,Qe)).next(_t=>{const Bt=G.docVersions.get(Qe);Gt(null!==Bt),_t.version.compareTo(Bt)<0&&(re.applyToRemoteDocument(_t,G),_t.isValidDocument()&&X.addEntry(_t,G.commitVersion))})}),Ge.next(()=>I.In.removeMutationBatch(k,re))}(o,l,n,y).next(()=>y.apply(l)).next(()=>o.In.performConsistencyCheck(l)).next(()=>o.Qn.Pn(l,h))})}function ym(a){const n=mt(a);return n.persistence.runTransaction("Get last remote snapshot version","readonly",o=>n.ze.getLastRemoteSnapshotVersion(o))}function Va(a,n){const o=mt(a),l=n.snapshotVersion;let h=o.Un;return o.persistence.runTransaction("Apply remote event","readwrite-primary",y=>{const I=o.jn.newChangeBuffer({trackRemovals:!0});h=o.Un;const k=[];n.targetChanges.forEach((X,re)=>{const be=h.get(re);if(!be)return;k.push(o.ze.removeMatchingKeys(y,X.removedDocuments,re).next(()=>o.ze.addMatchingKeys(y,X.addedDocuments,re)));const Ge=X.resumeToken;if(Ge.approximateByteSize()>0){const Qe=be.withResumeToken(Ge,l).withSequenceNumber(y.currentSequenceNumber);h=h.insert(re,Qe),_t=be,dn=X,Gt((Bt=Qe).resumeToken.approximateByteSize()>0),(0===_t.resumeToken.approximateByteSize()||Bt.snapshotVersion.toMicroseconds()-_t.snapshotVersion.toMicroseconds()>=3e8||dn.addedDocuments.size+dn.modifiedDocuments.size+dn.removedDocuments.size>0)&&k.push(o.ze.updateTargetData(y,Qe))}var _t,Bt,dn});let G=Ro();if(n.documentUpdates.forEach((X,re)=>{n.resolvedLimboDocuments.has(X)&&k.push(o.persistence.referenceDelegate.updateLimboDocument(y,X))}),k.push(_m(y,I,n.documentUpdates,l,void 0).next(X=>{G=X})),!l.isEqual(Dt.min())){const X=o.ze.getLastRemoteSnapshotVersion(y).next(re=>o.ze.setTargetsMetadata(y,y.currentSequenceNumber,l));k.push(X)}return qe.waitFor(k).next(()=>I.apply(y)).next(()=>o.Qn.vn(y,G)).next(()=>G)}).then(y=>(o.Un=h,y))}function _m(a,n,o,l,h){let y=ir();return o.forEach(I=>y=y.add(I)),n.getEntries(a,y).next(I=>{let k=Ro();return o.forEach((G,X)=>{const re=I.get(G),be=(null==h?void 0:h.get(G))||l;X.isNoDocument()&&X.version.isEqual(Dt.min())?(n.removeEntry(G,be),k=k.insert(G,X)):!re.isValidDocument()||X.version.compareTo(re.version)>0||0===X.version.compareTo(re.version)&&re.hasPendingWrites?(n.addEntry(X,be),k=k.insert(G,X)):at("LocalStore","Ignoring outdated watch update for ",G,". Current version:",re.version," Watch version:",X.version)}),k})}function vm(a,n){const o=mt(a);return o.persistence.runTransaction("Get next mutation batch","readonly",l=>(void 0===n&&(n=-1),o.In.getNextMutationBatchAfterBatchId(l,n)))}function Fc(a,n){const o=mt(a);return o.persistence.runTransaction("Allocate target","readwrite",l=>{let h;return o.ze.getTargetData(l,n).next(y=>y?(h=y,qe.resolve(h)):o.ze.allocateTargetId(l).next(I=>(h=new Wl(n,I,0,l.currentSequenceNumber),o.ze.addTargetData(l,h).next(()=>h))))}).then(l=>{const h=o.Un.get(l.targetId);return(null===h||l.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(o.Un=o.Un.insert(l.targetId,l),o.qn.set(n,l.targetId)),l})}function Lc(a,n,o){return pp.apply(this,arguments)}function pp(){return(pp=(0,se.Z)(function*(a,n,o){const l=mt(a),h=l.Un.get(n),y=o?"readwrite":"readwrite-primary";try{o||(yield l.persistence.runTransaction("Release target",y,I=>l.persistence.referenceDelegate.removeTarget(I,h)))}catch(I){if(!Pa(I))throw I;at("LocalStore",`Failed to update sequence numbers for target ${n}: ${I}`)}l.Un=l.Un.remove(n),l.qn.delete(h.target)})).apply(this,arguments)}function Mh(a,n,o){const l=mt(a);let h=Dt.min(),y=ir();return l.persistence.runTransaction("Execute query","readonly",I=>function(k,G,X){const re=mt(k),be=re.qn.get(X);return void 0!==be?qe.resolve(re.Un.get(be)):re.ze.getTargetData(G,X)}(l,I,zo(n)).next(k=>{if(k)return h=k.lastLimboFreeSnapshotVersion,l.ze.getMatchingKeysForTargetId(I,k.targetId).next(G=>{y=G})}).next(()=>l.Bn.getDocumentsMatchingQuery(I,n,o?h:Dt.min(),o?y:ir())).next(k=>({documents:k,Gn:y})))}function gp(a,n){const o=mt(a),l=mt(o.ze),h=o.Un.get(n);return h?Promise.resolve(h.target):o.persistence.runTransaction("Get target data","readonly",y=>l.Et(y,n).next(I=>I?I.target:null))}function Em(a){const n=mt(a);return n.persistence.runTransaction("Get new document changes","readonly",o=>function(l,h,y){const I=mt(l);let k=Ro(),G=xd(y);const X=La(h),re=IDBKeyRange.lowerBound(G,!0);return X.Kt({index:f.readTimeIndex,range:re},(be,Ge)=>{const Qe=um(I.N,Ge);k=k.insert(Qe.key,Qe),G=Ge.readTime}).next(()=>({Tn:k,readTime:Th(G)}))}(n.jn,o,n.Kn)).then(({Tn:o,readTime:l})=>(n.Kn=l,o))}function mp(){return(mp=(0,se.Z)(function*(a){const n=mt(a);return n.persistence.runTransaction("Synchronize last document change read time","readonly",o=>function(l){const h=La(l);let y=Dt.min();return h.Kt({index:f.readTimeIndex,reverse:!0},(I,k,G)=>{k.readTime&&(y=Th(k.readTime)),G.done()}).next(()=>y)}(o)).then(o=>{n.Kn=o})})).apply(this,arguments)}function Oh(){return(Oh=(0,se.Z)(function*(a,n,o,l){const h=mt(a);let y=ir(),I=Ro(),k=yh();for(const re of o){const be=n.zn(re.metadata.name);re.document&&(y=y.add(be)),I=I.insert(be,n.Hn(re)),k=k.insert(be,n.Jn(re.metadata.readTime))}const G=h.jn.newChangeBuffer({trackRemovals:!0}),X=yield Fc(h,(re=l,zo(Vl(mn.fromString(`__bundle__/docs/${re}`)))));var re;return h.persistence.runTransaction("Apply bundle documents","readwrite",re=>_m(re,G,I,Dt.min(),k).next(be=>(G.apply(re),be)).next(be=>h.ze.removeMatchingKeysForTargetId(re,X.targetId).next(()=>h.ze.addMatchingKeys(re,y,X.targetId)).next(()=>h.Qn.vn(re,be)).next(()=>be)))})).apply(this,arguments)}function wm(a,n){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,se.Z)(function*(a,n,o=ir()){const l=yield Fc(a,zo(Nd(n.bundledQuery))),h=mt(a);return h.persistence.runTransaction("Save named query","readwrite",y=>{const I=li(n.readTime);if(l.snapshotVersion.compareTo(I)>=0)return h.Je.saveNamedQuery(y,n);const k=l.withResumeToken(Di.EMPTY_BYTE_STRING,I);return h.Un=h.Un.insert(k.targetId,k),h.ze.updateTargetData(y,k).next(()=>h.ze.removeMatchingKeysForTargetId(y,l.targetId)).next(()=>h.ze.addMatchingKeys(y,o,l.targetId)).next(()=>h.Je.saveNamedQuery(y,n))})})).apply(this,arguments)}class Ua{constructor(n){this.N=n,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(n,o){return qe.resolve(this.Yn.get(o))}saveBundleMetadata(n,o){var l;return this.Yn.set(o.id,{id:(l=o).id,version:l.version,createTime:li(l.createTime)}),qe.resolve()}getNamedQuery(n,o){return qe.resolve(this.Xn.get(o))}saveNamedQuery(n,o){return this.Xn.set(o.name,{name:(l=o).name,query:Nd(l.bundledQuery),readTime:li(l.readTime)}),qe.resolve();var l}}class Ph{constructor(){this.Zn=new ni(gs.ts),this.es=new ni(gs.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(n,o){const l=new gs(n,o);this.Zn=this.Zn.add(l),this.es=this.es.add(l)}ss(n,o){n.forEach(l=>this.addReference(l,o))}removeReference(n,o){this.rs(new gs(n,o))}os(n,o){n.forEach(l=>this.removeReference(l,o))}cs(n){const o=new kt(new mn([])),l=new gs(o,n),h=new gs(o,n+1),y=[];return this.es.forEachInRange([l,h],I=>{this.rs(I),y.push(I.key)}),y}us(){this.Zn.forEach(n=>this.rs(n))}rs(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}hs(n){const o=new kt(new mn([])),l=new gs(o,n),h=new gs(o,n+1);let y=ir();return this.es.forEachInRange([l,h],I=>{y=y.add(I.key)}),y}containsKey(n){const o=new gs(n,0),l=this.Zn.firstAfterOrEqual(o);return null!==l&&n.isEqual(l.key)}}class gs{constructor(n,o){this.key=n,this.ls=o}static ts(n,o){return kt.comparator(n.key,o.key)||ke(n.ls,o.ls)}static ns(n,o){return ke(n.ls,o.ls)||kt.comparator(n.key,o.key)}}class yp{constructor(n,o){this.Ht=n,this.referenceDelegate=o,this.In=[],this.fs=1,this.ds=new ni(gs.ts)}checkEmpty(n){return qe.resolve(0===this.In.length)}addMutationBatch(n,o,l,h){const y=this.fs;this.fs++;const I=new $s(y,o,l,h);this.In.push(I);for(const k of h)this.ds=this.ds.add(new gs(k.key,y)),this.Ht.addToCollectionParentIndex(n,k.key.path.popLast());return qe.resolve(I)}lookupMutationBatch(n,o){return qe.resolve(this.ws(o))}getNextMutationBatchAfterBatchId(n,o){const h=this._s(o+1),y=h<0?0:h;return qe.resolve(this.In.length>y?this.In[y]:null)}getHighestUnacknowledgedBatchId(){return qe.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(n){return qe.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(n,o){const l=new gs(o,0),h=new gs(o,Number.POSITIVE_INFINITY),y=[];return this.ds.forEachInRange([l,h],I=>{const k=this.ws(I.ls);y.push(k)}),qe.resolve(y)}getAllMutationBatchesAffectingDocumentKeys(n,o){let l=new ni(ke);return o.forEach(h=>{const y=new gs(h,0),I=new gs(h,Number.POSITIVE_INFINITY);this.ds.forEachInRange([y,I],k=>{l=l.add(k.ls)})}),qe.resolve(this.gs(l))}getAllMutationBatchesAffectingQuery(n,o){const l=o.path,h=l.length+1;let y=l;kt.isDocumentKey(y)||(y=y.child(""));const I=new gs(new kt(y),0);let k=new ni(ke);return this.ds.forEachWhile(G=>{const X=G.key.path;return!!l.isPrefixOf(X)&&(X.length===h&&(k=k.add(G.ls)),!0)},I),qe.resolve(this.gs(k))}gs(n){const o=[];return n.forEach(l=>{const h=this.ws(l);null!==h&&o.push(h)}),o}removeMutationBatch(n,o){Gt(0===this.ys(o.batchId,"removed")),this.In.shift();let l=this.ds;return qe.forEach(o.mutations,h=>{const y=new gs(h.key,o.batchId);return l=l.delete(y),this.referenceDelegate.markPotentiallyOrphaned(n,h.key)}).next(()=>{this.ds=l})}te(n){}containsKey(n,o){const l=new gs(o,0),h=this.ds.firstAfterOrEqual(l);return qe.resolve(o.isEqual(h&&h.key))}performConsistencyCheck(n){return qe.resolve()}ys(n,o){return this._s(n)}_s(n){return 0===this.In.length?0:n-this.In[0].batchId}ws(n){const o=this._s(n);return o<0||o>=this.In.length?null:this.In[o]}}class Hu{constructor(n,o){this.Ht=n,this.ps=o,this.docs=new Pr(kt.comparator),this.size=0}addEntry(n,o,l){const h=o.key,y=this.docs.get(h),I=y?y.size:0,k=this.ps(o);return this.docs=this.docs.insert(h,{document:o.clone(),size:k,readTime:l}),this.size+=k-I,this.Ht.addToCollectionParentIndex(n,h.path.popLast())}removeEntry(n){const o=this.docs.get(n);o&&(this.docs=this.docs.remove(n),this.size-=o.size)}getEntry(n,o){const l=this.docs.get(o);return qe.resolve(l?l.document.clone():Ft.newInvalidDocument(o))}getEntries(n,o){let l=Ro();return o.forEach(h=>{const y=this.docs.get(h);l=l.insert(h,y?y.document.clone():Ft.newInvalidDocument(h))}),qe.resolve(l)}getDocumentsMatchingQuery(n,o,l){let h=Ro();const y=new kt(o.path.child("")),I=this.docs.getIteratorFrom(y);for(;I.hasNext();){const{key:k,value:{document:G,readTime:X}}=I.getNext();if(!o.path.isPrefixOf(k.path))break;X.compareTo(l)<=0||il(o,G)&&(h=h.insert(G.key,G.clone()))}return qe.resolve(h)}Es(n,o){return qe.forEach(this.docs,l=>o(l))}newChangeBuffer(n){return new _p(this)}getSize(n){return qe.resolve(this.size)}}class _p extends op{constructor(n){super(),this.Se=n}applyChanges(n){const o=[];return this.changes.forEach((l,h)=>{h.document.isValidDocument()?o.push(this.Se.addEntry(n,h.document,this.getReadTime(l))):this.Se.removeEntry(l)}),qe.waitFor(o)}getFromCache(n,o){return this.Se.getEntry(n,o)}getAllFromCache(n,o){return this.Se.getEntries(n,o)}}class bm{constructor(n){this.persistence=n,this.Ts=new Kl(o=>_r(o),ui),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Is=0,this.As=new Ph,this.targetCount=0,this.Rs=ml.se()}forEachTarget(n,o){return this.Ts.forEach((l,h)=>o(h)),qe.resolve()}getLastRemoteSnapshotVersion(n){return qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return qe.resolve(this.Is)}allocateTargetId(n){return this.highestTargetId=this.Rs.next(),qe.resolve(this.highestTargetId)}setTargetsMetadata(n,o,l){return l&&(this.lastRemoteSnapshotVersion=l),o>this.Is&&(this.Is=o),qe.resolve()}ae(n){this.Ts.set(n.target,n);const o=n.targetId;o>this.highestTargetId&&(this.Rs=new ml(o),this.highestTargetId=o),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}addTargetData(n,o){return this.ae(o),this.targetCount+=1,qe.resolve()}updateTargetData(n,o){return this.ae(o),qe.resolve()}removeTargetData(n,o){return this.Ts.delete(o.target),this.As.cs(o.targetId),this.targetCount-=1,qe.resolve()}removeTargets(n,o,l){let h=0;const y=[];return this.Ts.forEach((I,k)=>{k.sequenceNumber<=o&&null===l.get(k.targetId)&&(this.Ts.delete(I),y.push(this.removeMatchingKeysForTargetId(n,k.targetId)),h++)}),qe.waitFor(y).next(()=>h)}getTargetCount(n){return qe.resolve(this.targetCount)}getTargetData(n,o){const l=this.Ts.get(o)||null;return qe.resolve(l)}addMatchingKeys(n,o,l){return this.As.ss(o,l),qe.resolve()}removeMatchingKeys(n,o,l){this.As.os(o,l);const h=this.persistence.referenceDelegate,y=[];return h&&o.forEach(I=>{y.push(h.markPotentiallyOrphaned(n,I))}),qe.waitFor(y)}removeMatchingKeysForTargetId(n,o){return this.As.cs(o),qe.resolve()}getMatchingKeysForTargetId(n,o){const l=this.As.hs(o);return qe.resolve(l)}containsKey(n,o){return qe.resolve(this.As.containsKey(o))}}class vp{constructor(n,o){this.bs={},this.Le=new q(0),this.Be=!1,this.Be=!0,this.referenceDelegate=n(this),this.ze=new bm(this),this.Ht=new Pc,this.He=new Hu(this.Ht,l=>this.referenceDelegate.Ps(l)),this.N=new Xf(o),this.Je=new Ua(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(n){let o=this.bs[n.toKey()];return o||(o=new yp(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=o),o}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(n,o,l){at("MemoryPersistence","Starting transaction:",n);const h=new AE(this.Le.next());return this.referenceDelegate.vs(),l(h).next(y=>this.referenceDelegate.Vs(h).next(()=>y)).toPromise().then(y=>(h.raiseOnCommittedEvent(),y))}Ss(n,o){return qe.or(Object.values(this.bs).map(l=>()=>l.containsKey(n,o)))}}class AE extends yi{constructor(n){super(),this.currentSequenceNumber=n}}class kh{constructor(n){this.persistence=n,this.Ds=new Ph,this.Cs=null}static Ns(n){return new kh(n)}get xs(){if(this.Cs)return this.Cs;throw St()}addReference(n,o,l){return this.Ds.addReference(l,o),this.xs.delete(l.toString()),qe.resolve()}removeReference(n,o,l){return this.Ds.removeReference(l,o),this.xs.add(l.toString()),qe.resolve()}markPotentiallyOrphaned(n,o){return this.xs.add(o.toString()),qe.resolve()}removeTarget(n,o){this.Ds.cs(o.targetId).forEach(h=>this.xs.add(h.toString()));const l=this.persistence.getTargetCache();return l.getMatchingKeysForTargetId(n,o.targetId).next(h=>{h.forEach(y=>this.xs.add(y.toString()))}).next(()=>l.removeTargetData(n,o))}vs(){this.Cs=new Set}Vs(n){const o=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qe.forEach(this.xs,l=>{const h=kt.fromPath(l);return this.ks(n,h).next(y=>{y||o.removeEntry(h)})}).next(()=>(this.Cs=null,o.apply(n)))}updateLimboDocument(n,o){return this.ks(n,o).next(l=>{l?this.xs.delete(o.toString()):this.xs.add(o.toString())})}Ps(n){return 0}ks(n,o){return qe.or([()=>qe.resolve(this.Ds.containsKey(o)),()=>this.persistence.getTargetCache().containsKey(n,o),()=>this.persistence.Ss(n,o)])}}function w_(a,n){return`firestore_clients_${a}_${n}`}function pu(a,n,o){let l=`firestore_mutations_${a}_${o}`;return n.isAuthenticated()&&(l+=`_${n.uid}`),l}function Uc(a,n){return`firestore_targets_${a}_${n}`}class Yl{constructor(n,o,l,h){this.user=n,this.batchId=o,this.state=l,this.error=h}static $s(n,o,l){const h=JSON.parse(l);let y,I="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return I&&h.error&&(I="string"==typeof h.error.message&&"string"==typeof h.error.code,I&&(y=new tt(h.error.code,h.error.message))),I?new Yl(n,o,h.state,y):(gr("SharedClientState",`Failed to parse mutation state for ID '${o}': ${l}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Ql{constructor(n,o,l){this.targetId=n,this.state=o,this.error=l}static $s(n,o){const l=JSON.parse(o);let h,y="object"==typeof l&&-1!==["not-current","current","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return y&&l.error&&(y="string"==typeof l.error.message&&"string"==typeof l.error.code,y&&(h=new tt(l.error.code,l.error.message))),y?new Ql(n,l.state,h):(gr("SharedClientState",`Failed to parse target state for ID '${n}': ${o}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Ep{constructor(n,o){this.clientId=n,this.activeTargetIds=o}static $s(n,o){const l=JSON.parse(o);let h="object"==typeof l&&l.activeTargetIds instanceof Array,y=ua();for(let I=0;h&&I<l.activeTargetIds.length;++I)h=id(l.activeTargetIds[I]),y=y.add(l.activeTargetIds[I]);return h?new Ep(n,y):(gr("SharedClientState",`Failed to parse client data for instance '${n}': ${o}`),null)}}class wp{constructor(n,o){this.clientId=n,this.onlineState=o}static $s(n){const o=JSON.parse(n);return"object"==typeof o&&-1!==["Unknown","Online","Offline"].indexOf(o.onlineState)&&"string"==typeof o.clientId?new wp(o.clientId,o.onlineState):(gr("SharedClientState",`Failed to parse online state: ${n}`),null)}}class Fh{constructor(){this.activeTargetIds=ua()}Fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Ms(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Os(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class Cm{constructor(n,o,l,h,y){this.window=n,this.Oe=o,this.persistenceKey=l,this.Ls=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Pr(ke),this.started=!1,this.Ks=[];const I=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=y,this.js=w_(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new Fh),this.Ws=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(k){return`firestore_bundle_loaded_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,se.Z)(function*(){const o=yield n.syncEngine.pn();for(const h of o){if(h===n.Ls)continue;const y=n.getItem(w_(n.persistenceKey,h));if(y){const I=Ep.$s(h,y);I&&(n.qs=n.qs.insert(I.clientId,I))}}n.Ys();const l=n.storage.getItem(n.Hs);if(l){const h=n.Xs(l);h&&n.Zs(h)}for(const h of n.Ks)n.Us(h);n.Ks=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Qs,JSON.stringify(n))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(n){let o=!1;return this.qs.forEach((l,h)=>{h.activeTargetIds.has(n)&&(o=!0)}),o}addPendingMutation(n){this.ei(n,"pending")}updateMutationState(n,o,l){this.ei(n,o,l),this.ni(n)}addLocalQueryTarget(n){let o="not-current";if(this.isActiveQueryTarget(n)){const l=this.storage.getItem(Uc(this.persistenceKey,n));if(l){const h=Ql.$s(n,l);h&&(o=h.state)}}return this.si.Fs(n),this.Ys(),o}removeLocalQueryTarget(n){this.si.Ms(n),this.Ys()}isLocalQueryTarget(n){return this.si.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(Uc(this.persistenceKey,n))}updateQueryState(n,o,l){this.ii(n,o,l)}handleUserChange(n,o,l){o.forEach(h=>{this.ni(h)}),this.currentUser=n,l.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(n){this.ri(n)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(n){const o=this.storage.getItem(n);return at("SharedClientState","READ",n,o),o}setItem(n,o){at("SharedClientState","SET",n,o),this.storage.setItem(n,o)}removeItem(n){at("SharedClientState","REMOVE",n),this.storage.removeItem(n)}Us(n){var o=this;const l=n;if(l.storageArea===this.storage){if(at("SharedClientState","EVENT",l.key,l.newValue),l.key===this.js)return void gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,se.Z)(function*(){if(o.started){if(null!==l.key)if(o.Ws.test(l.key)){if(null==l.newValue){const h=o.ai(l.key);return o.ci(h,null)}{const h=o.ui(l.key,l.newValue);if(h)return o.ci(h.clientId,h)}}else if(o.Gs.test(l.key)){if(null!==l.newValue){const h=o.hi(l.key,l.newValue);if(h)return o.li(h)}}else if(o.zs.test(l.key)){if(null!==l.newValue){const h=o.fi(l.key,l.newValue);if(h)return o.di(h)}}else if(l.key===o.Hs){if(null!==l.newValue){const h=o.Xs(l.newValue);if(h)return o.Zs(h)}}else if(l.key===o.Qs){const h=function(y){let I=q.T;if(null!=y)try{const k=JSON.parse(y);Gt("number"==typeof k),I=k}catch(k){gr("SharedClientState","Failed to read sequence number from WebStorage",k)}return I}(l.newValue);h!==q.T&&o.sequenceNumberHandler(h)}else if(l.key===o.Js)return o.syncEngine.wi()}else o.Ks.push(l)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(n,o,l){const h=new Yl(this.currentUser,n,o,l),y=pu(this.persistenceKey,this.currentUser,n);this.setItem(y,h.Os())}ni(n){const o=pu(this.persistenceKey,this.currentUser,n);this.removeItem(o)}ri(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}ii(n,o,l){const h=Uc(this.persistenceKey,n),y=new Ql(n,o,l);this.setItem(h,y.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(n){const o=this.Ws.exec(n);return o?o[1]:null}ui(n,o){const l=this.ai(n);return Ep.$s(l,o)}hi(n,o){const l=this.Gs.exec(n),h=Number(l[1]);return Yl.$s(new Qr(void 0!==l[2]?l[2]:null),h,o)}fi(n,o){const l=this.zs.exec(n),h=Number(l[1]);return Ql.$s(h,o)}Xs(n){return wp.$s(n)}li(n){var o=this;return(0,se.Z)(function*(){if(n.user.uid===o.currentUser.uid)return o.syncEngine._i(n.batchId,n.state,n.error);at("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}di(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}ci(n,o){const l=o?this.qs.insert(n,o):this.qs.remove(n),h=this.ti(this.qs),y=this.ti(l),I=[],k=[];return y.forEach(G=>{h.has(G)||I.push(G)}),h.forEach(G=>{y.has(G)||k.push(G)}),this.syncEngine.gi(I,k).then(()=>{this.qs=l})}Zs(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}ti(n){let o=ua();return n.forEach((l,h)=>{o=o.unionWith(h.activeTargetIds)}),o}}class Im{constructor(){this.yi=new Fh,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,o,l){}addLocalQueryTarget(n){return this.yi.Fs(n),this.pi[n]||"not-current"}updateQueryState(n,o,l){this.pi[n]=o}removeLocalQueryTarget(n){this.yi.Ms(n)}isLocalQueryTarget(n){return this.yi.activeTargetIds.has(n)}clearQueryState(n){delete this.pi[n]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(n){return this.yi.activeTargetIds.has(n)}start(){return this.yi=new Fh,Promise.resolve()}handleUserChange(n,o,l){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(){}}class SE{Ei(n){}shutdown(){}}class bp{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(n){this.bi.push(n)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){at("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.bi)n(0)}Ri(){at("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.bi)n(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Dm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class b_{constructor(n){this.vi=n.vi,this.Vi=n.Vi}Si(n){this.Di=n}Ci(n){this.Ni=n}onMessage(n){this.xi=n}close(){this.Vi()}send(n){this.vi(n)}ki(){this.Di()}$i(n){this.Ni(n)}Oi(n){this.xi(n)}}class Cp extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.Fi=(n.ssl?"https":"http")+"://"+n.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(n,o,l,h){const y=this.Bi(n,o);at("RestConnection","Sending: ",y,l);const I={};return this.Ui(I,h),this.qi(n,y,I,l).then(k=>(at("RestConnection","Received: ",k),k),k=>{throw Io("RestConnection",`${n} failed with error: `,k,"url: ",y,"request:",l),k})}Ki(n,o,l,h){return this.Li(n,o,l,h)}Ui(n,o){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+Qi,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o)for(const l in o.authHeaders)o.authHeaders.hasOwnProperty(l)&&(n[l]=o.authHeaders[l])}Bi(n,o){return`${this.Fi}/v1/${o}:${Dm[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}qi(n,o,l,h){return new Promise((y,I)=>{const k=new ao;k.listenOnce(tu.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case rr.NO_ERROR:const X=k.getResponseJson();at("Connection","XHR received:",JSON.stringify(X)),y(X);break;case rr.TIMEOUT:at("Connection",'RPC "'+n+'" timed out'),I(new tt(je.DEADLINE_EXCEEDED,"Request time out"));break;case rr.HTTP_ERROR:const re=k.getStatus();if(at("Connection",'RPC "'+n+'" failed with status:',re,"response text:",k.getResponseText()),re>0){const be=k.getResponseJson().error;if(be&&be.status&&be.message){const Ge=function(Qe){const _t=Qe.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(_t)>=0?_t:je.UNKNOWN}(be.status);I(new tt(Ge,be.message))}else I(new tt(je.UNKNOWN,"Server responded with status "+k.getStatus()))}else I(new tt(je.UNAVAILABLE,"Connection failed."));break;default:St()}}finally{at("Connection",'RPC "'+n+'" completed.')}});const G=JSON.stringify(h);k.send(o,"POST",G,l,15)})}ji(n,o){const l=[this.Fi,"/","google.firestore.v1.Firestore","/",n,"/channel"],h=eu(),y=Pl(),I={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(I.xmlHttpFactory=new Ia({})),this.Ui(I.initMessageHeaders,o),(0,Ue.uI)()||(0,Ue.b$)()||(0,Ue.d)()||(0,Ue.w1)()||(0,Ue.Mn)()||(0,Ue.ru)()||(I.httpHeadersOverwriteParam="$httpHeaders");const k=l.join("");at("Connection","Creating WebChannel: "+k,I);const G=h.createWebChannel(k,I);let X=!1,re=!1;const be=new b_({vi:Qe=>{re?at("Connection","Not sending because WebChannel is closed:",Qe):(X||(at("Connection","Opening WebChannel transport."),G.open(),X=!0),at("Connection","WebChannel sending:",Qe),G.send(Qe))},Vi:()=>G.close()}),Ge=(Qe,_t,Bt)=>{Qe.listen(_t,dn=>{try{Bt(dn)}catch(di){setTimeout(()=>{throw di},0)}})};return Ge(G,xs.EventType.OPEN,()=>{re||at("Connection","WebChannel transport opened.")}),Ge(G,xs.EventType.CLOSE,()=>{re||(re=!0,at("Connection","WebChannel transport closed"),be.$i())}),Ge(G,xs.EventType.ERROR,Qe=>{re||(re=!0,Io("Connection","WebChannel transport errored:",Qe),be.$i(new tt(je.UNAVAILABLE,"The operation could not be completed")))}),Ge(G,xs.EventType.MESSAGE,Qe=>{var _t;if(!re){const Bt=Qe.data[0];Gt(!!Bt);const dn=Bt,di=dn.error||(null===(_t=dn[0])||void 0===_t?void 0:_t.error);if(di){at("Connection","WebChannel received error:",di);const zs=di.status;let Cu=function(ed){const ah=vr[ed];if(void 0!==ah)return So(ah)}(zs),ga=di.message;void 0===Cu&&(Cu=je.INTERNAL,ga="Unknown error status: "+zs+" with message "+di.message),re=!0,be.$i(new tt(Cu,ga)),G.close()}else at("Connection","WebChannel received:",Bt),be.Oi(Bt)}}),Ge(y,bo.STAT_EVENT,Qe=>{Qe.stat===Co.PROXY?at("Connection","Detected buffering proxy"):Qe.stat===Co.NOPROXY&&at("Connection","Detected no buffering proxy")}),setTimeout(()=>{be.ki()},0),be}}function C_(){return"undefined"!=typeof window?window:null}function Ip(){return"undefined"!=typeof document?document:null}function Lh(a){return new vd(a,!0)}class Tm{constructor(n,o,l=1e3,h=1.5,y=6e4){this.Oe=n,this.timerId=o,this.Qi=l,this.Wi=h,this.Gi=y,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(n){this.cancel();const o=Math.floor(this.zi+this.Zi()),l=Math.max(0,Date.now()-this.Ji),h=Math.max(0,o-l);h>0&&at("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.zi} ms, delay with jitter: ${o} ms, last attempt: ${l} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,h,()=>(this.Ji=Date.now(),n())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class I_{constructor(n,o,l,h,y,I){this.Oe=n,this.er=l,this.nr=h,this.credentialsProvider=y,this.listener=I,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Tm(n,o)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var n=this;return(0,se.Z)(function*(){n.ar()&&(yield n.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(n){this._r(),this.stream.send(n)}dr(){var n=this;return(0,se.Z)(function*(){if(n.cr())return n.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(n,o){var l=this;return(0,se.Z)(function*(){l._r(),l.rr.cancel(),l.sr++,3!==n?l.rr.reset():o&&o.code===je.RESOURCE_EXHAUSTED?(gr(o.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),l.rr.Yi()):o&&o.code===je.UNAUTHENTICATED&&l.credentialsProvider.invalidateToken(),null!==l.stream&&(l.mr(),l.stream.close(),l.stream=null),l.state=n,yield l.listener.Ci(o)})()}mr(){}auth(){this.state=1;const n=this.gr(this.sr),o=this.sr;this.credentialsProvider.getToken().then(l=>{this.sr===o&&this.yr(l)},l=>{n(()=>{const h=new tt(je.UNKNOWN,"Fetching auth token failed: "+l.message);return this.pr(h)})})}yr(n){const o=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(()=>{o(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(l=>{o(()=>this.pr(l))}),this.stream.onMessage(l=>{o(()=>this.onMessage(l))})}ur(){var n=this;this.state=4,this.rr.Xi((0,se.Z)(function*(){n.state=0,n.start()}))}pr(n){return at("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(3,n)}gr(n){return o=>{this.Oe.enqueueAndForget(()=>this.sr===n?o():(at("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RE extends I_{constructor(n,o,l,h,y){super(n,"listen_stream_connection_backoff","listen_stream_idle",o,l,y),this.N=h}Er(n){return this.nr.ji("Listen",n)}onMessage(n){this.rr.reset();const o=function(a,n){let o;if("targetChange"in n){const l="NO_CHANGE"===(G=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:St(),h=n.targetChange.targetIds||[],y=function(G,X){return G.D?(Gt(void 0===X||"string"==typeof X),Di.fromBase64String(X||"")):(Gt(void 0===X||X instanceof Uint8Array),Di.fromUint8Array(X||new Uint8Array))}(a,n.targetChange.resumeToken),I=n.targetChange.cause,k=I&&function(G){const X=void 0===G.code?je.UNKNOWN:So(G.code);return new tt(X,G.message||"")}(I);o=new gd(l,h,y,k||null)}else if("documentChange"in n){const l=n.documentChange,h=Ko(a,l.document.name),y=li(l.document.updateTime),I=new nt({mapValue:{fields:l.document.fields}}),k=Ft.newFoundDocument(h,y,I);o=new la(l.targetIds||[],l.removedTargetIds||[],k.key,k)}else if("documentDelete"in n){const l=n.documentDelete,h=Ko(a,l.document),y=l.readTime?li(l.readTime):Dt.min(),I=Ft.newNoDocument(h,y);o=new la([],l.removedTargetIds||[],I.key,I)}else if("documentRemove"in n){const l=n.documentRemove,h=Ko(a,l.document);o=new la([],l.removedTargetIds||[],h,null)}else{if(!("filter"in n))return St();{const l=n.filter,y=new om(l.count||0);o=new jl(l.targetId,y)}}var G;return o}(this.N,n),l=function(h){if(!("targetChange"in h))return Dt.min();const y=h.targetChange;return y.targetIds&&y.targetIds.length?Dt.min():y.readTime?li(y.readTime):Dt.min()}(n);return this.listener.Tr(o,l)}Ir(n){const o={};o.database=du(this.N),o.addTarget=function(h,y){let I;const k=y.target;return I=ti(k)?{documents:wh(h,k)}:{query:Sc(h,k)},I.targetId=y.targetId,y.resumeToken.approximateByteSize()>0?I.resumeToken=Qf(h,y.resumeToken):y.snapshotVersion.compareTo(Dt.min())>0&&(I.readTime=Tc(h,y.snapshotVersion.toTimestamp())),I}(this.N,n);const l=function(a,n){const o=function(l,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return St()}}(0,n.purpose);return null==o?null:{"goog-listen-tags":o}}(0,n);l&&(o.labels=l),this.wr(o)}Ar(n){const o={};o.database=du(this.N),o.removeTarget=n,this.wr(o)}}class xE extends I_{constructor(n,o,l,h,y){super(n,"write_stream_connection_backoff","write_stream_idle",o,l,y),this.N=h,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(n){return this.nr.ji("Write",n)}onMessage(n){if(Gt(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Rr){this.rr.reset();const o=function(a,n){return a&&a.length>0?(Gt(void 0!==n),a.map(o=>function(l,h){let y=li(l.updateTime?l.updateTime:h);return y.isEqual(Dt.min())&&(y=li(h)),new Hf(y,l.transformResults||[])}(o,n))):[]}(n.writeResults,n.commitTime),l=li(n.commitTime);return this.listener.vr(l,o)}return Gt(!n.writeResults||0===n.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const n={};n.database=du(this.N),this.wr(n)}Pr(n){const o={streamToken:this.lastStreamToken,writes:n.map(l=>ts(this.N,l))};this.wr(o)}}class NE extends class{}{constructor(n,o,l){super(),this.credentials=n,this.nr=o,this.N=l,this.Dr=!1}Cr(){if(this.Dr)throw new tt(je.FAILED_PRECONDITION,"The client has already been terminated.")}Li(n,o,l){return this.Cr(),this.credentials.getToken().then(h=>this.nr.Li(n,o,l,h)).catch(h=>{throw"FirebaseError"===h.name?(h.code===je.UNAUTHENTICATED&&this.credentials.invalidateToken(),h):new tt(je.UNKNOWN,h.toString())})}Ki(n,o,l){return this.Cr(),this.credentials.getToken().then(h=>this.nr.Ki(n,o,l,h)).catch(h=>{throw"FirebaseError"===h.name?(h.code===je.UNAUTHENTICATED&&this.credentials.invalidateToken(),h):new tt(je.UNKNOWN,h.toString())})}terminate(){this.Dr=!0}}class ME{constructor(n,o){this.asyncQueue=n,this.onlineStateHandler=o,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.Fr("Offline")))}set(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}Fr(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}Mr(n){const o=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(gr(o),this.$r=!1):at("OnlineStateTracker",o)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class OE{constructor(n,o,l,h,y){var I=this;this.localStore=n,this.datastore=o,this.asyncQueue=l,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=y,this.Qr.Ei(k=>{l.enqueueAndForget((0,se.Z)(function*(){var G;Gu(I)&&(at("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,se.Z)(function*(X){const re=mt(X);re.Kr.add(4),yield _l(re),re.Wr.set("Unknown"),re.Kr.delete(4),yield Vh(re)}),function(X){return G.apply(this,arguments)})(I))}))}),this.Wr=new ME(l,h)}}function Vh(a){return gu.apply(this,arguments)}function gu(){return(gu=(0,se.Z)(function*(a){if(Gu(a))for(const n of a.jr)yield n(!0)})).apply(this,arguments)}function _l(a){return Dp.apply(this,arguments)}function Dp(){return(Dp=(0,se.Z)(function*(a){for(const n of a.jr)yield n(!1)})).apply(this,arguments)}function Bd(a,n){const o=mt(a);o.qr.has(n.targetId)||(o.qr.set(n.targetId,n),mu(o)?Tp(o):ec(o).cr()&&Uh(o,n))}function Jl(a,n){const o=mt(a),l=ec(o);o.qr.delete(n),l.cr()&&Bh(o,n),0===o.qr.size&&(l.cr()?l.lr():Gu(o)&&o.Wr.set("Unknown"))}function Uh(a,n){a.Gr.Y(n.targetId),ec(a).Ir(n)}function Bh(a,n){a.Gr.Y(n),ec(a).Ar(n)}function Tp(a){a.Gr=new yd({getRemoteKeysForTarget:n=>a.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>a.qr.get(n)||null}),ec(a).start(),a.Wr.Or()}function mu(a){return Gu(a)&&!ec(a).ar()&&a.qr.size>0}function Gu(a){return 0===mt(a).Kr.size}function Am(a){a.Gr=void 0}function PE(a){return jd.apply(this,arguments)}function jd(){return(jd=(0,se.Z)(function*(a){a.qr.forEach((n,o)=>{Uh(a,n)})})).apply(this,arguments)}function D_(a,n){return jh.apply(this,arguments)}function jh(){return(jh=(0,se.Z)(function*(a,n){Am(a),mu(a)?(a.Wr.Lr(n),Tp(a)):a.Wr.set("Unknown")})).apply(this,arguments)}function T_(a,n,o){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,se.Z)(function*(a,n,o){if(a.Wr.set("Online"),n instanceof gd&&2===n.state&&n.cause)try{yield(l=(0,se.Z)(function*(h,y){const I=y.cause;for(const k of y.targetIds)h.qr.has(k)&&(yield h.remoteSyncer.rejectListen(k,I),h.qr.delete(k),h.Gr.removeTarget(k))}),function(h,y){return l.apply(this,arguments)})(a,n)}catch(l){at("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),l),yield vl(a,l)}else if(n instanceof la?a.Gr.rt(n):n instanceof jl?a.Gr.ft(n):a.Gr.ct(n),!o.isEqual(Dt.min()))try{const l=yield ym(a.localStore);o.compareTo(l)>=0&&(yield function(h,y){const I=h.Gr._t(y);return I.targetChanges.forEach((k,G)=>{if(k.resumeToken.approximateByteSize()>0){const X=h.qr.get(G);X&&h.qr.set(G,X.withResumeToken(k.resumeToken,y))}}),I.targetMismatches.forEach(k=>{const G=h.qr.get(k);if(!G)return;h.qr.set(k,G.withResumeToken(Di.EMPTY_BYTE_STRING,G.snapshotVersion)),Bh(h,k);const X=new Wl(G.target,k,1,G.sequenceNumber);Uh(h,X)}),h.remoteSyncer.applyRemoteEvent(I)}(a,o))}catch(l){at("RemoteStore","Failed to raise snapshot:",l),yield vl(a,l)}var l})).apply(this,arguments)}function vl(a,n,o){return El.apply(this,arguments)}function El(){return(El=(0,se.Z)(function*(a,n,o){if(!Pa(n))throw n;a.Kr.add(1),yield _l(a),a.Wr.set("Offline"),o||(o=()=>ym(a.localStore)),a.asyncQueue.enqueueRetryable((0,se.Z)(function*(){at("RemoteStore","Retrying IndexedDB access"),yield o(),a.Kr.delete(1),yield Vh(a)}))})).apply(this,arguments)}function $h(a,n){return n().catch(o=>vl(a,o,n))}function Ba(a){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,se.Z)(function*(a){const n=mt(a),o=wl(n);let l=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;for(;Bc(n);)try{const h=yield vm(n.localStore,l);if(null===h){0===n.Ur.length&&o.lr();break}l=h.batchId,A_(n,h)}catch(h){yield vl(n,h)}Sp(n)&&Rp(n)})).apply(this,arguments)}function Bc(a){return Gu(a)&&a.Ur.length<10}function A_(a,n){a.Ur.push(n);const o=wl(a);o.cr()&&o.br&&o.Pr(n.mutations)}function Sp(a){return Gu(a)&&!wl(a).ar()&&a.Ur.length>0}function Rp(a){wl(a).start()}function xp(a){return $d.apply(this,arguments)}function $d(){return($d=(0,se.Z)(function*(a){wl(a).Sr()})).apply(this,arguments)}function Sm(a){return jc.apply(this,arguments)}function jc(){return(jc=(0,se.Z)(function*(a){const n=wl(a);for(const o of a.Ur)n.Pr(o.mutations)})).apply(this,arguments)}function S_(a,n,o){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,se.Z)(function*(a,n,o){const l=a.Ur.shift(),h=Dh.from(l,n,o);yield $h(a,()=>a.remoteSyncer.applySuccessfulWrite(h)),yield Ba(a)})).apply(this,arguments)}function kE(a,n){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,se.Z)(function*(a,n){var o;n&&wl(a).br&&(yield(o=(0,se.Z)(function*(l,h){if(mh(y=h.code)&&y!==je.ABORTED){const I=l.Ur.shift();wl(l).hr(),yield $h(l,()=>l.remoteSyncer.rejectFailedWrite(I.batchId,h)),yield Ba(l)}var y}),function(l,h){return o.apply(this,arguments)})(a,n)),Sp(a)&&Rp(a)})).apply(this,arguments)}function Wh(a,n){return Np.apply(this,arguments)}function Np(){return(Np=(0,se.Z)(function*(a,n){const o=mt(a);n?(o.Kr.delete(2),yield Vh(o)):n||(o.Kr.add(2),yield _l(o),o.Wr.set("Unknown"))})).apply(this,arguments)}function ec(a){return a.zr||(a.zr=function(n,o,l){const h=mt(n);return h.Cr(),new RE(o,h.nr,h.credentials,h.N,l)}(a.datastore,a.asyncQueue,{Si:PE.bind(null,a),Ci:D_.bind(null,a),Tr:T_.bind(null,a)}),a.jr.push(function(){var n=(0,se.Z)(function*(o){o?(a.zr.hr(),mu(a)?Tp(a):a.Wr.set("Unknown")):(yield a.zr.stop(),Am(a))});return function(o){return n.apply(this,arguments)}}())),a.zr}function wl(a){return a.Hr||(a.Hr=function(n,o,l){const h=mt(n);return h.Cr(),new xE(o,h.nr,h.credentials,h.N,l)}(a.datastore,a.asyncQueue,{Si:xp.bind(null,a),Ci:kE.bind(null,a),Vr:Sm.bind(null,a),vr:S_.bind(null,a)}),a.jr.push(function(){var n=(0,se.Z)(function*(o){o?(a.Hr.hr(),yield Ba(a)):(yield a.Hr.stop(),a.Ur.length>0&&(at("RemoteStore",`Stopping write stream with ${a.Ur.length} pending writes`),a.Ur=[]))});return function(o){return n.apply(this,arguments)}}())),a.Hr}class Mp{constructor(n,o,l,h,y){this.asyncQueue=n,this.timerId=o,this.targetTimeMs=l,this.op=h,this.removalCallback=y,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}static createAndSchedule(n,o,l,h,y){const I=Date.now()+l,k=new Mp(n,o,I,h,y);return k.start(l),k}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tt(je.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ms(a,n){if(gr("AsyncQueue",`${n}: ${a}`),Pa(a))return new tt(je.UNAVAILABLE,`${n}: ${a}`);throw a}class $c{constructor(n){this.comparator=n?(o,l)=>n(o,l)||kt.comparator(o.key,l.key):(o,l)=>kt.comparator(o.key,l.key),this.keyedMap=pd(),this.sortedSet=new Pr(this.comparator)}static emptySet(n){return new $c(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const o=this.keyedMap.get(n);return o?this.sortedSet.indexOf(o):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((o,l)=>(n(o),!1))}add(n){const o=this.delete(n.key);return o.copy(o.keyedMap.insert(n.key,n),o.sortedSet.insert(n,null))}delete(n){const o=this.get(n);return o?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(o)):this}isEqual(n){if(!(n instanceof $c)||this.size!==n.size)return!1;const o=this.sortedSet.getIterator(),l=n.sortedSet.getIterator();for(;o.hasNext();){const h=o.getNext().key,y=l.getNext().key;if(!h.isEqual(y))return!1}return!0}toString(){const n=[];return this.forEach(o=>{n.push(o.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,o){const l=new $c;return l.comparator=this.comparator,l.keyedMap=n,l.sortedSet=o,l}}class Rm{constructor(){this.Jr=new Pr(kt.comparator)}track(n){const o=n.doc.key,l=this.Jr.get(o);l?0!==n.type&&3===l.type?this.Jr=this.Jr.insert(o,n):3===n.type&&1!==l.type?this.Jr=this.Jr.insert(o,{type:l.type,doc:n.doc}):2===n.type&&2===l.type?this.Jr=this.Jr.insert(o,{type:2,doc:n.doc}):2===n.type&&0===l.type?this.Jr=this.Jr.insert(o,{type:0,doc:n.doc}):1===n.type&&0===l.type?this.Jr=this.Jr.remove(o):1===n.type&&2===l.type?this.Jr=this.Jr.insert(o,{type:1,doc:l.doc}):0===n.type&&1===l.type?this.Jr=this.Jr.insert(o,{type:2,doc:n.doc}):St():this.Jr=this.Jr.insert(o,n)}Yr(){const n=[];return this.Jr.inorderTraversal((o,l)=>{n.push(l)}),n}}class Hd{constructor(n,o,l,h,y,I,k,G){this.query=n,this.docs=o,this.oldDocs=l,this.docChanges=h,this.mutatedKeys=y,this.fromCache=I,this.syncStateChanged=k,this.excludesMetadataChanges=G}static fromInitialDocuments(n,o,l,h){const y=[];return o.forEach(I=>{y.push({type:0,doc:I})}),new Hd(n,o,$c.emptySet(o),y,l,h,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&xa(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const o=this.docChanges,l=n.docChanges;if(o.length!==l.length)return!1;for(let h=0;h<o.length;h++)if(o[h].type!==l[h].type||!o[h].doc.isEqual(l[h].doc))return!1;return!0}}class FE{constructor(){this.Xr=void 0,this.listeners=[]}}class xm{constructor(){this.queries=new Kl(n=>_c(n),xa),this.onlineState="Unknown",this.Zr=new Set}}function Nm(a,n){return Op.apply(this,arguments)}function Op(){return(Op=(0,se.Z)(function*(a,n){const o=mt(a),l=n.query;let h=!1,y=o.queries.get(l);if(y||(h=!0,y=new FE),h)try{y.Xr=yield o.onListen(l)}catch(I){const k=ms(I,`Initialization of query '${vc(n.query)}' failed`);return void n.onError(k)}o.queries.set(l,y),y.listeners.push(n),n.eo(o.onlineState),y.Xr&&n.no(y.Xr)&&Pp(o)})).apply(this,arguments)}function Gd(a,n){return zh.apply(this,arguments)}function zh(){return(zh=(0,se.Z)(function*(a,n){const o=mt(a),l=n.query;let h=!1;const y=o.queries.get(l);if(y){const I=y.listeners.indexOf(n);I>=0&&(y.listeners.splice(I,1),h=0===y.listeners.length)}if(h)return o.queries.delete(l),o.onUnlisten(l)})).apply(this,arguments)}function R_(a,n){const o=mt(a);let l=!1;for(const h of n){const I=o.queries.get(h.query);if(I){for(const k of I.listeners)k.no(h)&&(l=!0);I.Xr=h}}l&&Pp(o)}function x_(a,n,o){const l=mt(a),h=l.queries.get(n);if(h)for(const y of h.listeners)y.onError(o);l.queries.delete(n)}function Pp(a){a.Zr.forEach(n=>{n.next()})}class qh{constructor(n,o,l){this.query=n,this.so=o,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=l||{}}no(n){if(!this.options.includeMetadataChanges){const l=[];for(const h of n.docChanges)3!==h.type&&l.push(h);n=new Hd(n.query,n.docs,n.oldDocs,l,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}let o=!1;return this.io?this.oo(n)&&(this.so.next(n),o=!0):this.ao(n,this.onlineState)&&(this.co(n),o=!0),this.ro=n,o}onError(n){this.so.error(n)}eo(n){this.onlineState=n;let o=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),o=!0),o}ao(n,o){return!n.fromCache||!(this.options.uo&&"Offline"!==o||n.docs.isEmpty()&&"Offline"!==o)}oo(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(n){n=Hd.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}class N_{constructor(n,o){this.payload=n,this.byteLength=o}ho(){return"metadata"in this.payload}}class kp{constructor(n){this.N=n}zn(n){return Ko(this.N,n)}Hn(n){return n.metadata.exists?Cd(this.N,n.document,!1):Ft.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}Jn(n){return li(n)}}class M_{constructor(n,o,l){this.lo=n,this.localStore=o,this.N=l,this.queries=[],this.documents=[],this.progress=Mm(n)}fo(n){this.progress.bytesLoaded+=n.byteLength;let o=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++o):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++o),o!==this.progress.documentsLoaded?(this.progress.documentsLoaded=o,Object.assign({},this.progress)):null}wo(n){const o=new Map,l=new kp(this.N);for(const h of n)if(h.metadata.queries){const y=l.zn(h.metadata.name);for(const I of h.metadata.queries){const k=(o.get(I)||ir()).add(y);o.set(I,k)}}return o}complete(){var n=this;return(0,se.Z)(function*(){const o=yield function(a,n,o,l){return Oh.apply(this,arguments)}(n.localStore,new kp(n.N),n.documents,n.lo.id),l=n.wo(n.documents);for(const h of n.queries)yield wm(n.localStore,h,l.get(h.name));return n.progress.taskState="Success",new __(Object.assign({},n.progress),o)})()}}function Mm(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class Fp{constructor(n){this.key=n}}class Lp{constructor(n){this.key=n}}class Om{constructor(n,o){this.query=n,this._o=o,this.mo=null,this.current=!1,this.yo=ir(),this.mutatedKeys=ir(),this.po=ph(n),this.Eo=new $c(this.po)}get To(){return this._o}Io(n,o){const l=o?o.Ao:new Rm,h=o?o.Eo:this.Eo;let y=o?o.mutatedKeys:this.mutatedKeys,I=h,k=!1;const G=ku(this.query)&&h.size===this.query.limit?h.last():null,X=Aa(this.query)&&h.size===this.query.limit?h.first():null;if(n.inorderTraversal((re,be)=>{const Ge=h.get(re),Qe=il(this.query,be)?be:null,_t=!!Ge&&this.mutatedKeys.has(Ge.key),Bt=!!Qe&&(Qe.hasLocalMutations||this.mutatedKeys.has(Qe.key)&&Qe.hasCommittedMutations);let dn=!1;Ge&&Qe?Ge.data.isEqual(Qe.data)?_t!==Bt&&(l.track({type:3,doc:Qe}),dn=!0):this.Ro(Ge,Qe)||(l.track({type:2,doc:Qe}),dn=!0,(G&&this.po(Qe,G)>0||X&&this.po(Qe,X)<0)&&(k=!0)):!Ge&&Qe?(l.track({type:0,doc:Qe}),dn=!0):Ge&&!Qe&&(l.track({type:1,doc:Ge}),dn=!0,(G||X)&&(k=!0)),dn&&(Qe?(I=I.add(Qe),y=Bt?y.add(re):y.delete(re)):(I=I.delete(re),y=y.delete(re)))}),ku(this.query)||Aa(this.query))for(;I.size>this.query.limit;){const re=ku(this.query)?I.last():I.first();I=I.delete(re.key),y=y.delete(re.key),l.track({type:1,doc:re})}return{Eo:I,Ao:l,Ln:k,mutatedKeys:y}}Ro(n,o){return n.hasLocalMutations&&o.hasCommittedMutations&&!o.hasLocalMutations}applyChanges(n,o,l){const h=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;const y=n.Ao.Yr();y.sort((X,re)=>function(be,Ge){const Qe=_t=>{switch(_t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St()}};return Qe(be)-Qe(Ge)}(X.type,re.type)||this.po(X.doc,re.doc)),this.bo(l);const I=o?this.Po():[],k=0===this.yo.size&&this.current?1:0,G=k!==this.mo;return this.mo=k,0!==y.length||G?{snapshot:new Hd(this.query,n.Eo,h,y,n.mutatedKeys,0===k,G,!1),vo:I}:{vo:I}}eo(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Rm,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}bo(n){n&&(n.addedDocuments.forEach(o=>this._o=this._o.add(o)),n.modifiedDocuments.forEach(o=>{}),n.removedDocuments.forEach(o=>this._o=this._o.delete(o)),this.current=n.current)}Po(){if(!this.current)return[];const n=this.yo;this.yo=ir(),this.Eo.forEach(l=>{this.Vo(l.key)&&(this.yo=this.yo.add(l.key))});const o=[];return n.forEach(l=>{this.yo.has(l)||o.push(new Lp(l))}),this.yo.forEach(l=>{n.has(l)||o.push(new Fp(l))}),o}So(n){this._o=n.Gn,this.yo=ir();const o=this.Io(n.documents);return this.applyChanges(o,!0)}Do(){return Hd.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class yu{constructor(n,o,l){this.query=n,this.targetId=o,this.view=l}}class Vp{constructor(n){this.key=n,this.Co=!1}}class O_{constructor(n,o,l,h,y,I){this.localStore=n,this.remoteStore=o,this.eventManager=l,this.sharedClientState=h,this.currentUser=y,this.maxConcurrentLimboResolutions=I,this.No={},this.xo=new Kl(k=>_c(k),xa),this.ko=new Map,this.$o=new Set,this.Oo=new Pr(kt.comparator),this.Fo=new Map,this.Mo=new Ph,this.Lo={},this.Bo=new Map,this.Uo=ml.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function P_(a,n){return Pm.apply(this,arguments)}function Pm(){return(Pm=(0,se.Z)(function*(a,n){const o=Jp(a);let l,h;const y=o.xo.get(n);if(y)l=y.targetId,o.sharedClientState.addLocalQueryTarget(l),h=y.view.Do();else{const I=yield Fc(o.localStore,zo(n)),k=o.sharedClientState.addLocalQueryTarget(I.targetId);l=I.targetId,h=yield Kh(o,n,l,"current"===k),o.isPrimaryClient&&Bd(o.remoteStore,I)}return h})).apply(this,arguments)}function Kh(a,n,o,l){return Up.apply(this,arguments)}function Up(){return(Up=(0,se.Z)(function*(a,n,o,l){a.Ko=(re,be,Ge)=>{return(Qe=(0,se.Z)(function*(_t,Bt,dn,di){let zs=Bt.view.Io(dn);zs.Ln&&(zs=yield Mh(_t.localStore,Bt.query,!1).then(({documents:ed})=>Bt.view.Io(ed,zs)));const Cu=di&&di.targetChanges.get(Bt.targetId),ga=Bt.view.applyChanges(zs,_t.isPrimaryClient,Cu);return Jh(_t,Bt.targetId,ga.vo),ga.snapshot}),function(_t,Bt,dn,di){return Qe.apply(this,arguments)})(a,re,be,Ge);var Qe};const h=yield Mh(a.localStore,n,!0),y=new Om(n,h.Gn),I=y.Io(h.documents),k=js.createSynthesizedTargetChangeForCurrentChange(o,l&&"Offline"!==a.onlineState),G=y.applyChanges(I,a.isPrimaryClient,k);Jh(a,o,G.vo);const X=new yu(n,o,y);return a.xo.set(n,X),a.ko.has(o)?a.ko.get(o).push(n):a.ko.set(o,[n]),G.snapshot})).apply(this,arguments)}function k_(a,n){return Bp.apply(this,arguments)}function Bp(){return(Bp=(0,se.Z)(function*(a,n){const o=mt(a),l=o.xo.get(n),h=o.ko.get(l.targetId);if(h.length>1)return o.ko.set(l.targetId,h.filter(y=>!xa(y,n))),void o.xo.delete(n);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(l.targetId),o.sharedClientState.isActiveQueryTarget(l.targetId)||(yield Lc(o.localStore,l.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(l.targetId),Jl(o.remoteStore,l.targetId),tc(o,l.targetId)}).catch(yl))):(tc(o,l.targetId),yield Lc(o.localStore,l.targetId,!0))})).apply(this,arguments)}function $p(){return($p=(0,se.Z)(function*(a,n,o){const l=Cl(a);try{const h=yield function(y,I){const k=mt(y),G=It.now(),X=I.reduce((be,Ge)=>be.add(Ge.key),ir());let re;return k.persistence.runTransaction("Locally write mutations","readwrite",be=>k.Qn.Pn(be,X).next(Ge=>{re=Ge;const Qe=[];for(const _t of I){const Bt=Gf(_t,re.get(_t.key));null!=Bt&&Qe.push(new aa(_t.key,Bt,Vt(Bt.value.mapValue),mi.exists(!0)))}return k.In.addMutationBatch(be,G,Qe,I)})).then(be=>(be.applyToLocalDocumentSet(re),{batchId:be.batchId,changes:re}))}(l.localStore,n);l.sharedClientState.addPendingMutation(h.batchId),function(y,I,k){let G=y.Lo[y.currentUser.toKey()];G||(G=new Pr(ke)),G=G.insert(I,k),y.Lo[y.currentUser.toKey()]=G}(l,h.batchId,o),yield da(l,h.changes),yield Ba(l.remoteStore)}catch(h){const y=ms(h,"Failed to persist write");o.reject(y)}})).apply(this,arguments)}function km(a,n){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,se.Z)(function*(a,n){const o=mt(a);try{const l=yield Va(o.localStore,n);n.targetChanges.forEach((h,y)=>{const I=o.Fo.get(y);I&&(Gt(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?I.Co=!0:h.modifiedDocuments.size>0?Gt(I.Co):h.removedDocuments.size>0&&(Gt(I.Co),I.Co=!1))}),yield da(o,l,n)}catch(l){yield yl(l)}})).apply(this,arguments)}function Zh(a,n,o){const l=mt(a);if(l.isPrimaryClient&&0===o||!l.isPrimaryClient&&1===o){const h=[];l.xo.forEach((y,I)=>{const k=I.view.eo(n);k.snapshot&&h.push(k.snapshot)}),function(y,I){const k=mt(y);k.onlineState=I;let G=!1;k.queries.forEach((X,re)=>{for(const be of re.listeners)be.eo(I)&&(G=!0)}),G&&Pp(k)}(l.eventManager,n),h.length&&l.No.Tr(h),l.onlineState=n,l.isPrimaryClient&&l.sharedClientState.setOnlineState(n)}}function F_(a,n,o){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,se.Z)(function*(a,n,o){const l=mt(a);l.sharedClientState.updateQueryState(n,"rejected",o);const h=l.Fo.get(n),y=h&&h.key;if(y){let I=new Pr(kt.comparator);I=I.insert(y,Ft.newNoDocument(y,Dt.min()));const k=ir().add(y),G=new ll(Dt.min(),new Map,new ni(ke),I,k);yield km(l,G),l.Oo=l.Oo.remove(y),l.Fo.delete(n),ja(l)}else yield Lc(l.localStore,n,!1).then(()=>tc(l,n,o)).catch(yl)})).apply(this,arguments)}function Hp(a,n){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,se.Z)(function*(a,n){const o=mt(a),l=n.batch.batchId;try{const h=yield v_(o.localStore,n);Qh(o,l,null),zp(o,l),o.sharedClientState.updateMutationState(l,"acknowledged"),yield da(o,h)}catch(h){yield yl(h)}})).apply(this,arguments)}function L_(a,n,o){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,se.Z)(function*(a,n,o){const l=mt(a);try{const h=yield function(y,I){const k=mt(y);return k.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let X;return k.In.lookupMutationBatch(G,I).next(re=>(Gt(null!==re),X=re.keys(),k.In.removeMutationBatch(G,re))).next(()=>k.In.performConsistencyCheck(G)).next(()=>k.Qn.Pn(G,X))})}(l.localStore,n);Qh(l,n,o),zp(l,n),l.sharedClientState.updateMutationState(n,"rejected",o),yield da(l,h)}catch(h){yield yl(h)}})).apply(this,arguments)}function Fm(){return(Fm=(0,se.Z)(function*(a,n){const o=mt(a);Gu(o.remoteStore)||at("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const l=yield function(y){const I=mt(y);return I.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>I.In.getHighestUnacknowledgedBatchId(k))}(o.localStore);if(-1===l)return void n.resolve();const h=o.Bo.get(l)||[];h.push(n),o.Bo.set(l,h)}catch(l){const h=ms(l,"Initialization of waitForPendingWrites() operation failed");n.reject(h)}})).apply(this,arguments)}function zp(a,n){(a.Bo.get(n)||[]).forEach(o=>{o.resolve()}),a.Bo.delete(n)}function Qh(a,n,o){const l=mt(a);let h=l.Lo[l.currentUser.toKey()];if(h){const y=h.get(n);y&&(o?y.reject(o):y.resolve(),h=h.remove(n)),l.Lo[l.currentUser.toKey()]=h}}function tc(a,n,o=null){a.sharedClientState.removeLocalQueryTarget(n);for(const l of a.ko.get(n))a.xo.delete(l),o&&a.No.jo(l,o);a.ko.delete(n),a.isPrimaryClient&&a.Mo.cs(n).forEach(l=>{a.Mo.containsKey(l)||qp(a,l)})}function qp(a,n){a.$o.delete(n.path.canonicalString());const o=a.Oo.get(n);null!==o&&(Jl(a.remoteStore,o),a.Oo=a.Oo.remove(n),a.Fo.delete(o),ja(a))}function Jh(a,n,o){for(const l of o)l instanceof Fp?(a.Mo.addReference(l.key,n),Lm(a,l)):l instanceof Lp?(at("SyncEngine","Document no longer in limbo: "+l.key),a.Mo.removeReference(l.key,n),a.Mo.containsKey(l.key)||qp(a,l.key)):St()}function Lm(a,n){const o=n.key,l=o.path.canonicalString();a.Oo.get(o)||a.$o.has(l)||(at("SyncEngine","New document in limbo: "+o),a.$o.add(l),ja(a))}function ja(a){for(;a.$o.size>0&&a.Oo.size<a.maxConcurrentLimboResolutions;){const n=a.$o.values().next().value;a.$o.delete(n);const o=new kt(mn.fromString(n)),l=a.Uo.next();a.Fo.set(l,new Vp(o)),a.Oo=a.Oo.insert(o,l),Bd(a.remoteStore,new Wl(zo(Vl(o.path)),l,2,q.T))}}function da(a,n,o){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,se.Z)(function*(a,n,o){const l=mt(a),h=[],y=[],I=[];var k;l.xo.isEmpty()||(l.xo.forEach((k,G)=>{I.push(l.Ko(G,n,o).then(X=>{if(X){l.isPrimaryClient&&l.sharedClientState.updateQueryState(G.targetId,X.fromCache?"not-current":"current"),h.push(X);const re=Ud.kn(G.targetId,X);y.push(re)}}))}),yield Promise.all(I),l.No.Tr(h),yield(k=(0,se.Z)(function*(G,X){const re=mt(G);try{yield re.persistence.runTransaction("notifyLocalViewChanges","readwrite",be=>qe.forEach(X,Ge=>qe.forEach(Ge.Nn,Qe=>re.persistence.referenceDelegate.addReference(be,Ge.targetId,Qe)).next(()=>qe.forEach(Ge.xn,Qe=>re.persistence.referenceDelegate.removeReference(be,Ge.targetId,Qe)))))}catch(be){if(!Pa(be))throw be;at("LocalStore","Failed to update sequence numbers: "+be)}for(const be of X){const Ge=be.targetId;if(!be.fromCache){const Qe=re.Un.get(Ge),Bt=Qe.withLastLimboFreeSnapshotVersion(Qe.snapshotVersion);re.Un=re.Un.insert(Ge,Bt)}}}),function(G,X){return k.apply(this,arguments)})(l.localStore,y))})).apply(this,arguments)}function V_(a,n){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,se.Z)(function*(a,n){const o=mt(a);if(!o.currentUser.isEqual(n)){at("SyncEngine","User change. New user:",n.toKey());const l=yield mm(o.localStore,n);o.currentUser=n,(h=o).Bo.forEach(I=>{I.forEach(k=>{k.reject(new tt(je.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.Bo.clear(),o.sharedClientState.handleUserChange(n,l.removedBatchIds,l.addedBatchIds),yield da(o,l.Wn)}var h})).apply(this,arguments)}function Gc(a,n){const o=mt(a),l=o.Fo.get(n);if(l&&l.Co)return ir().add(l.key);{let h=ir();const y=o.ko.get(n);if(!y)return h;for(const I of y){const k=o.xo.get(I);h=h.unionWith(k.view.To)}return h}}function Um(a,n){return nc.apply(this,arguments)}function nc(){return(nc=(0,se.Z)(function*(a,n){const o=mt(a),l=yield Mh(o.localStore,n.query,!0),h=n.view.So(l);return o.isPrimaryClient&&Jh(o,n.targetId,h.vo),h})).apply(this,arguments)}function zd(a){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,se.Z)(function*(a){const n=mt(a);return Em(n.localStore).then(o=>da(n,o))})).apply(this,arguments)}function Yp(a,n,o,l){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,se.Z)(function*(a,n,o,l){const h=mt(a),y=yield function(I,k){const G=mt(I),X=mt(G.In);return G.persistence.runTransaction("Lookup mutation documents","readonly",re=>X.Xt(re,k).next(be=>be?G.Qn.Pn(re,be):qe.resolve(null)))}(h.localStore,n);var k;null!==y?("pending"===o?yield Ba(h.remoteStore):"acknowledged"===o||"rejected"===o?(Qh(h,n,l||null),zp(h,n),k=n,mt(mt(h.localStore).In).te(k)):St(),yield da(h,y)):at("SyncEngine","Cannot apply mutation batch with id: "+n)})).apply(this,arguments)}function ef(){return(ef=(0,se.Z)(function*(a,n){const o=mt(a);if(Jp(o),Cl(o),!0===n&&!0!==o.qo){const l=o.sharedClientState.getAllActiveQueryTargets(),h=yield Bm(o,l.toArray());o.qo=!0,yield Wh(o.remoteStore,!0);for(const y of h)Bd(o.remoteStore,y)}else if(!1===n&&!1!==o.qo){const l=[];let h=Promise.resolve();o.ko.forEach((y,I)=>{o.sharedClientState.isLocalQueryTarget(I)?l.push(I):h=h.then(()=>(tc(o,I),Lc(o.localStore,I,!0))),Jl(o.remoteStore,I)}),yield h,yield Bm(o,l),function(y){const I=mt(y);I.Fo.forEach((k,G)=>{Jl(I.remoteStore,G)}),I.Mo.us(),I.Fo=new Map,I.Oo=new Pr(kt.comparator)}(o),o.qo=!1,yield Wh(o.remoteStore,!1)}})).apply(this,arguments)}function Bm(a,n,o){return qd.apply(this,arguments)}function qd(){return(qd=(0,se.Z)(function*(a,n,o){const l=mt(a),h=[],y=[];for(const I of n){let k;const G=l.ko.get(I);if(G&&0!==G.length){k=yield Fc(l.localStore,zo(G[0]));for(const X of G){const re=l.xo.get(X),be=yield Um(l,re);be.snapshot&&y.push(be.snapshot)}}else{const X=yield gp(l.localStore,I);k=yield Fc(l.localStore,X),yield Kh(l,jm(X),I,!1)}h.push(k)}return l.No.Tr(y),h})).apply(this,arguments)}function jm(a){return rl(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function B_(a){const n=mt(a);return mt(mt(n.localStore).persistence).pn()}function $m(a,n,o,l){return bl.apply(this,arguments)}function bl(){return(bl=(0,se.Z)(function*(a,n,o,l){const h=mt(a);if(h.qo)at("SyncEngine","Ignoring unexpected query state notification.");else if(h.ko.has(n))switch(o){case"current":case"not-current":{const y=yield Em(h.localStore),I=ll.createSynthesizedRemoteEventForCurrentChange(n,"current"===o);yield da(h,y,I);break}case"rejected":yield Lc(h.localStore,n,!0),tc(h,n,l);break;default:St()}})).apply(this,arguments)}function Hm(a,n,o){return Qp.apply(this,arguments)}function Qp(){return(Qp=(0,se.Z)(function*(a,n,o){const l=Jp(a);if(l.qo){for(const h of n){if(l.ko.has(h)){at("SyncEngine","Adding an already active target "+h);continue}const y=yield gp(l.localStore,h),I=yield Fc(l.localStore,y);yield Kh(l,jm(y),I.targetId,!1),Bd(l.remoteStore,I)}for(const h of o)l.ko.has(h)&&(yield Lc(l.localStore,h,!1).then(()=>{Jl(l.remoteStore,h),tc(l,h)}).catch(yl))}})).apply(this,arguments)}function Jp(a){const n=mt(a);return n.remoteStore.remoteSyncer.applyRemoteEvent=km.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gc.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=F_.bind(null,n),n.No.Tr=R_.bind(null,n.eventManager),n.No.jo=x_.bind(null,n.eventManager),n}function Cl(a){const n=mt(a);return n.remoteStore.remoteSyncer.applySuccessfulWrite=Hp.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=L_.bind(null,n),n}class Gm{constructor(){this.synchronizeTabs=!1}initialize(n){var o=this;return(0,se.Z)(function*(){o.N=Lh(n.databaseInfo.databaseId),o.sharedClientState=o.Wo(n),o.persistence=o.Go(n),yield o.persistence.start(),o.gcScheduler=o.zo(n),o.localStore=o.Ho(n)})()}zo(n){return null}Ho(n){return fp(this.persistence,new hp,n.initialUser,this.N)}Go(n){return new vp(kh.Ns,this.N)}Wo(n){return new Im}terminate(){var n=this;return(0,se.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class Wm extends Gm{constructor(n,o,l){super(),this.Jo=n,this.cacheSizeBytes=o,this.forceOwnership=l,this.synchronizeTabs=!1}initialize(n){var o=()=>super.initialize,l=this;return(0,se.Z)(function*(){yield o().call(l,n),yield function(a){return mp.apply(this,arguments)}(l.localStore),yield l.Jo.initialize(l,n),yield Cl(l.Jo.syncEngine),yield Ba(l.Jo.remoteStore),yield l.persistence.nn(()=>(l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(l.localStore),Promise.resolve()))})()}Ho(n){return fp(this.persistence,new hp,n.initialUser,this.N)}zo(n){return new m_(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)}Go(n){const o=cp(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),l=void 0!==this.cacheSizeBytes?No.withCacheSize(this.cacheSizeBytes):No.DEFAULT;return new Zl(this.synchronizeTabs,o,n.clientId,l,n.asyncQueue,C_(),Ip(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(n){return new Im}}class $_ extends Wm{constructor(n,o){super(n,o,!1),this.Jo=n,this.cacheSizeBytes=o,this.synchronizeTabs=!0}initialize(n){var o=()=>super.initialize,l=this;return(0,se.Z)(function*(){yield o().call(l,n);const h=l.Jo.syncEngine;l.sharedClientState instanceof Cm&&(l.sharedClientState.syncEngine={_i:Yp.bind(null,h),mi:$m.bind(null,h),gi:Hm.bind(null,h),pn:B_.bind(null,h),wi:zd.bind(null,h)},yield l.sharedClientState.start()),yield l.persistence.nn(function(){var y=(0,se.Z)(function*(I){yield function(a,n){return ef.apply(this,arguments)}(l.Jo.syncEngine,I),l.gcScheduler&&(I&&!l.gcScheduler.started?l.gcScheduler.start(l.localStore):I||l.gcScheduler.stop())});return function(I){return y.apply(this,arguments)}}())})()}Wo(n){const o=C_();if(!Cm.bt(o))throw new tt(je.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const l=cp(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new Cm(o,n.asyncQueue,l,n.clientId,n.initialUser)}}class zm{initialize(n,o){var l=this;return(0,se.Z)(function*(){l.localStore||(l.localStore=n.localStore,l.sharedClientState=n.sharedClientState,l.datastore=l.createDatastore(o),l.remoteStore=l.createRemoteStore(o),l.eventManager=l.createEventManager(o),l.syncEngine=l.createSyncEngine(o,!n.synchronizeTabs),l.sharedClientState.onlineStateHandler=h=>Zh(l.syncEngine,h,1),l.remoteStore.remoteSyncer.handleCredentialChange=V_.bind(null,l.syncEngine),yield Wh(l.remoteStore,l.syncEngine.isPrimaryClient))})()}createEventManager(n){return new xm}createDatastore(n){const o=Lh(n.databaseInfo.databaseId),l=new Cp(n.databaseInfo);return new NE(n.credentials,l,o)}createRemoteStore(n){return o=this.localStore,l=this.datastore,h=n.asyncQueue,y=k=>Zh(this.syncEngine,k,0),I=bp.bt()?new bp:new SE,new OE(o,l,h,y,I);var o,l,h,y,I}createSyncEngine(n,o){return function(l,h,y,I,k,G,X){const re=new O_(l,h,y,I,k,G);return X&&(re.qo=!0),re}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,o)}terminate(){return(n=(0,se.Z)(function*(o){const l=mt(o);at("RemoteStore","RemoteStore shutting down."),l.Kr.add(5),yield _l(l),l.Qr.shutdown(),l.Wr.set("Unknown")}),function(o){return n.apply(this,arguments)})(this.remoteStore);var n}}function qm(a,n=10240){let o=0;return{read:()=>(0,se.Z)(function*(){if(o<a.byteLength){const l={value:a.slice(o,o+n),done:!1};return o+=n,l}return{done:!0}})(),cancel:()=>(0,se.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Kd{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Yo(this.observer.next,n)}error(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}Xo(){this.muted=!0}Yo(n,o){this.muted||setTimeout(()=>{this.muted||n(o)},0)}}class ri{constructor(n,o){this.Zo=n,this.N=o,this.metadata=new Jr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(l=>{l&&l.ho()?this.metadata.resolve(l.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==l?void 0:l.payload)}`))},l=>this.metadata.reject(l))}close(){return this.Zo.cancel()}getMetadata(){var n=this;return(0,se.Z)(function*(){return n.metadata.promise})()}Qo(){var n=this;return(0,se.Z)(function*(){return yield n.getMetadata(),n.ea()})()}ea(){var n=this;return(0,se.Z)(function*(){const o=yield n.na();if(null===o)return null;const l=n.ta.decode(o),h=Number(l);isNaN(h)&&n.sa(`length string (${l}) is not valid number`);const y=yield n.ia(h);return new N_(JSON.parse(y),o.length+h)})()}ra(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}na(){var n=this;return(0,se.Z)(function*(){for(;n.ra()<0&&!(yield n.oa()););if(0===n.buffer.length)return null;const o=n.ra();o<0&&n.sa("Reached the end of bundle when a length string is expected.");const l=n.buffer.slice(0,o);return n.buffer=n.buffer.slice(o),l})()}ia(n){var o=this;return(0,se.Z)(function*(){for(;o.buffer.length<n;)(yield o.oa())&&o.sa("Reached the end of bundle when more is expected.");const l=o.ta.decode(o.buffer.slice(0,n));return o.buffer=o.buffer.slice(n),l})()}sa(n){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${n}`)}oa(){var n=this;return(0,se.Z)(function*(){const o=yield n.Zo.read();if(!o.done){const l=new Uint8Array(n.buffer.length+o.value.length);l.set(n.buffer),l.set(o.value,n.buffer.length),n.buffer=l}return o.done})()}}class Xp{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var o=this;return(0,se.Z)(function*(){if(o.ensureCommitNotCalled(),o.mutations.length>0)throw new tt(je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const l=yield(h=(0,se.Z)(function*(y,I){const k=mt(y),G=du(k.N)+"/documents",X={documents:I.map(Qe=>$l(k.N,Qe))},re=yield k.Ki("BatchGetDocuments",G,X),be=new Map;re.forEach(Qe=>{const _t=function(a,n){return"found"in n?function(o,l){Gt(!!l.found);const h=Ko(o,l.found.name),y=li(l.found.updateTime),I=new nt({mapValue:{fields:l.found.fields}});return Ft.newFoundDocument(h,y,I)}(a,n):"missing"in n?function(o,l){Gt(!!l.missing),Gt(!!l.readTime);const h=Ko(o,l.missing),y=li(l.readTime);return Ft.newNoDocument(h,y)}(a,n):St()}(k.N,Qe);be.set(_t.key.toString(),_t)});const Ge=[];return I.forEach(Qe=>{const _t=be.get(Qe.toString());Gt(!!_t),Ge.push(_t)}),Ge}),function(y,I){return h.apply(this,arguments)})(o.datastore,n);var h;return l.forEach(h=>o.recordVersion(h)),l})()}set(n,o){this.write(o.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,o){try{this.write(o.toMutation(n,this.preconditionForUpdate(n)))}catch(l){this.lastWriteError=l}this.writtenDocs.add(n.toString())}delete(n){this.write(new qo(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,se.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const o=n.readVersions;var l;n.mutations.forEach(l=>{o.delete(l.key.toString())}),o.forEach((l,h)=>{const y=kt.fromPath(h);n.mutations.push(new fd(y,n.precondition(y)))}),yield(l=(0,se.Z)(function*(h,y){const I=mt(h),k=du(I.N)+"/documents",G={writes:y.map(X=>ts(I.N,X))};yield I.Li("Commit",k,G)}),function(h,y){return l.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let o;if(n.isFoundDocument())o=n.version;else{if(!n.isNoDocument())throw St();o=Dt.min()}const l=this.readVersions.get(n.key.toString());if(l){if(!o.isEqual(l))throw new tt(je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),o)}precondition(n){const o=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&o?mi.updateTime(o):mi.none()}preconditionForUpdate(n){const o=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&o){if(o.isEqual(Dt.min()))throw new tt(je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mi.updateTime(o)}return mi.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class LE{constructor(n,o,l,h){this.asyncQueue=n,this.datastore=o,this.updateFunction=l,this.deferred=h,this.aa=5,this.rr=new Tm(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var n=this;this.rr.Xi((0,se.Z)(function*(){const o=new Xp(n.datastore),l=n.ua(o);l&&l.then(h=>{n.asyncQueue.enqueueAndForget(()=>o.commit().then(()=>{n.deferred.resolve(h)}).catch(y=>{n.ha(y)}))}).catch(h=>{n.ha(h)})}))}ua(n){try{const o=this.updateFunction(n);return!$o(o)&&o.catch&&o.then?o:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(o){return this.deferred.reject(o),null}}ha(n){this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(n)}la(n){if("FirebaseError"===n.name){const o=n.code;return"aborted"===o||"failed-precondition"===o||!mh(o)}return!1}}class Wu{constructor(n,o,l){var h=this;this.credentials=n,this.asyncQueue=o,this.databaseInfo=l,this.user=Qr.UNAUTHENTICATED,this.clientId=me.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(o,function(){var y=(0,se.Z)(function*(I){at("FirestoreClient","Received user=",I.uid),yield h.credentialListener(I),h.user=I});return function(I){return y.apply(this,arguments)}}())}getConfiguration(){var n=this;return(0,se.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,credentials:n.credentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.credentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new tt(je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const o=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,se.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.credentials.shutdown(),o.resolve()}catch(l){const h=ms(l,"Failed to shutdown persistence");o.reject(h)}})),o.promise}}function tf(a,n){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,se.Z)(function*(a,n){a.asyncQueue.verifyOperationInProgress(),at("FirestoreClient","Initializing OfflineComponentProvider");const o=yield a.getConfiguration();yield n.initialize(o);let l=o.initialUser;a.setCredentialChangeListener(function(){var h=(0,se.Z)(function*(y){l.isEqual(y)||(yield mm(n.localStore,y),l=y)});return function(y){return h.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>a.terminate()),a.offlineComponents=n})).apply(this,arguments)}function H_(a,n){return eg.apply(this,arguments)}function eg(){return(eg=(0,se.Z)(function*(a,n){a.asyncQueue.verifyOperationInProgress();const o=yield tg(a);at("FirestoreClient","Initializing OnlineComponentProvider");const l=yield a.getConfiguration();yield n.initialize(o,l),a.setCredentialChangeListener(h=>{return(y=(0,se.Z)(function*(I,k){const G=mt(I);G.asyncQueue.verifyOperationInProgress(),at("RemoteStore","RemoteStore received new credentials");const X=Gu(G);G.Kr.add(3),yield _l(G),X&&G.Wr.set("Unknown"),yield G.remoteSyncer.handleCredentialChange(k),G.Kr.delete(3),yield Vh(G)}),function(I,k){return y.apply(this,arguments)})(n.remoteStore,h);var y}),a.onlineComponents=n})).apply(this,arguments)}function tg(a){return nf.apply(this,arguments)}function nf(){return(nf=(0,se.Z)(function*(a){return a.offlineComponents||(at("FirestoreClient","Using default OfflineComponentProvider"),yield tf(a,new Gm)),a.offlineComponents})).apply(this,arguments)}function Yd(a){return rf.apply(this,arguments)}function rf(){return(rf=(0,se.Z)(function*(a){return a.onlineComponents||(at("FirestoreClient","Using default OnlineComponentProvider"),yield H_(a,new zm)),a.onlineComponents})).apply(this,arguments)}function ng(a){return tg(a).then(n=>n.persistence)}function rg(a){return tg(a).then(n=>n.localStore)}function Km(a){return Yd(a).then(n=>n.remoteStore)}function rc(a){return Yd(a).then(n=>n.syncEngine)}function Il(a){return sf.apply(this,arguments)}function sf(){return(sf=(0,se.Z)(function*(a){const n=yield Yd(a),o=n.eventManager;return o.onListen=P_.bind(null,n.syncEngine),o.onUnlisten=k_.bind(null,n.syncEngine),o})).apply(this,arguments)}function Jm(a,n,o={}){const l=new Jr;return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(h,y,I,k,G){const X=new Kd({next:be=>{y.enqueueAndForget(()=>Gd(h,re));const Ge=be.docs.has(I);!Ge&&be.fromCache?G.reject(new tt(je.UNAVAILABLE,"Failed to get document because the client is offline.")):Ge&&be.fromCache&&k&&"server"===k.source?G.reject(new tt(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(be)},error:be=>G.reject(be)}),re=new qh(Vl(I.path),X,{includeMetadataChanges:!0,uo:!0});return Nm(h,re)}(yield Il(a),a.asyncQueue,n,o,l)})),l.promise}function Xm(a,n,o={}){const l=new Jr;return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(h,y,I,k,G){const X=new Kd({next:be=>{y.enqueueAndForget(()=>Gd(h,re)),be.fromCache&&"server"===k.source?G.reject(new tt(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(be)},error:be=>G.reject(be)}),re=new qh(I,X,{includeMetadataChanges:!0,uo:!0});return Nm(h,re)}(yield Il(a),a.asyncQueue,n,o,l)})),l.promise}class z_{constructor(n,o,l,h,y,I,k,G){this.databaseId=n,this.appId=o,this.persistenceKey=l,this.host=h,this.ssl=y,this.forceLongPolling=I,this.autoDetectLongPolling=k,this.useFetchStreams=G}}class Wc{constructor(n,o){this.projectId=n,this.database=o||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof Wc&&n.projectId===this.projectId&&n.database===this.database}}const q_=new Map;function ny(a,n,o){if(!o)throw new tt(je.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${n}.`)}function af(a,n,o,l){if(!0===n&&!0===l)throw new tt(je.INVALID_ARGUMENT,`${a} and ${o} cannot be used together.`)}function ry(a){if(!kt.isDocumentKey(a))throw new tt(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function ig(a){if(kt.isDocumentKey(a))throw new tt(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Qd(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const n=(o=a).constructor?o.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var o;return"function"==typeof a?"a function":St()}function Yn(a,n){if("_delegate"in a&&(a=a._delegate),!(a instanceof n)){if(n.name===a.constructor.name)throw new tt(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const o=Qd(a);throw new tt(je.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${o}`)}}return a}function ha(a,n){if(n<=0)throw new tt(je.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${n}.`)}class K_{constructor(n){var o;if(void 0===n.host){if(void 0!==n.ssl)throw new tt(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(o=n.ssl)||void 0===o||o;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new tt(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,af("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class uf{constructor(n,o){this._credentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K_({}),this._settingsFrozen=!1,n instanceof Wc?this._databaseId=n:(this._app=n,this._databaseId=function(l){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new tt(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wc(l.options.projectId)}(n))}get app(){if(!this._app)throw new tt(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new tt(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K_(n),void 0!==n.credentials&&(this._credentials=function(o){if(!o)return new R;switch(o.type){case"gapi":const l=o.client;return Gt(!("object"!=typeof l||null===l||!l.auth||!l.auth.getAuthHeaderValueForFirstParty)),new V(l,o.sessionIndex||"0",o.iamToken||null);case"provider":return o.client;default:throw new tt(je.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=q_.get(n);o&&(at("ComponentProvider","Removing Datastore"),q_.delete(n),o.terminate())}(this),Promise.resolve()}}class kr{constructor(n,o,l){this.converter=o,this._key=l,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $a(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new kr(this.firestore,n,this._key)}}class Os{constructor(n,o,l){this.converter=o,this._query=l,this.type="query",this.firestore=n}withConverter(n){return new Os(this.firestore,n,this._query)}}class $a extends Os{constructor(n,o,l){super(n,o,Vl(l)),this._path=l,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new kr(this.firestore,null,new kt(n))}withConverter(n){return new $a(this.firestore,n,this._path)}}function iy(a,n,...o){if(a=(0,Ue.m9)(a),ny("collection","path",n),a instanceof uf){const l=mn.fromString(n,...o);return ig(l),new $a(a,null,l)}{if(!(a instanceof kr||a instanceof $a))throw new tt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=a._path.child(mn.fromString(n,...o));return ig(l),new $a(a.firestore,null,l)}}function Jd(a,n,...o){if(a=(0,Ue.m9)(a),1===arguments.length&&(n=me.I()),ny("doc","path",n),a instanceof uf){const l=mn.fromString(n,...o);return ry(l),new kr(a,null,new kt(l))}{if(!(a instanceof kr||a instanceof $a))throw new tt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=a._path.child(mn.fromString(n,...o));return ry(l),new kr(a.firestore,a instanceof $a?a.converter:null,new kt(l))}}function lf(a,n){return a=(0,Ue.m9)(a),n=(0,Ue.m9)(n),(a instanceof kr||a instanceof $a)&&(n instanceof kr||n instanceof $a)&&a.firestore===n.firestore&&a.path===n.path&&a.converter===n.converter}function sy(a,n){return a=(0,Ue.m9)(a),n=(0,Ue.m9)(n),a instanceof Os&&n instanceof Os&&a.firestore===n.firestore&&xa(a._query,n._query)&&a.converter===n.converter}class sg{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Tm(this,"async_queue_retry"),this.Ea=()=>{const o=Ip();o&&at("AsyncQueue","Visibility state changed to "+o.visibilityState),this.rr.tr()};const n=Ip();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Ta(),this.Ia(n)}enterRestrictedMode(n){if(!this.wa){this.wa=!0,this.ya=n||!1;const o=Ip();o&&"function"==typeof o.removeEventListener&&o.removeEventListener("visibilitychange",this.Ea)}}enqueue(n){if(this.Ta(),this.wa)return new Promise(()=>{});const o=new Jr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(n().then(o.resolve,o.reject),o.promise)).then(()=>o.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.da.push(n),this.Aa()))}Aa(){var n=this;return(0,se.Z)(function*(){if(0!==n.da.length){try{yield n.da[0](),n.da.shift(),n.rr.reset()}catch(o){if(!Pa(o))throw o;at("AsyncQueue","Operation failed with retryable error: "+o)}n.da.length>0&&n.rr.Xi(()=>n.Aa())}})()}Ia(n){const o=this.fa.then(()=>(this.ga=!0,n().catch(l=>{throw this.ma=l,this.ga=!1,gr("INTERNAL UNHANDLED ERROR: ",function(h){let y=h.message||"";return h.stack&&(y=h.stack.includes(h.message)?h.stack:h.message+"\n"+h.stack),y}(l)),l}).then(l=>(this.ga=!1,l))));return this.fa=o,o}enqueueAfterDelay(n,o,l){this.Ta(),this.pa.indexOf(n)>-1&&(o=0);const h=Mp.createAndSchedule(this,n,o,l,y=>this.Ra(y));return this._a.push(h),h}Ta(){this.ma&&St()}verifyOperationInProgress(){}ba(){var n=this;return(0,se.Z)(function*(){let o;do{o=n.fa,yield o}while(o!==n.fa)})()}Pa(n){for(const o of this._a)if(o.timerId===n)return!0;return!1}va(n){return this.ba().then(()=>{this._a.sort((o,l)=>o.targetTimeMs-l.targetTimeMs);for(const o of this._a)if(o.skipDelay(),"all"!==n&&o.timerId===n)break;return this.ba()})}Va(n){this.pa.push(n)}Ra(n){const o=this._a.indexOf(n);this._a.splice(o,1)}}function og(a){return function(n,o){if("object"!=typeof n||null===n)return!1;const l=n;for(const h of["next","error","complete"])if(h in l&&"function"==typeof l[h])return!0;return!1}(a)}class Z_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,o,l){this._progressObserver={next:n,error:o,complete:l}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,o){return this._taskCompletionResolver.promise.then(n,o)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class _i extends uf{constructor(n,o){super(n,o),this.type="firestore",this._queue=new sg,this._persistenceKey="name"in n?n.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ic(this),this._firestoreClient.terminate()}}function vi(a){return a._firestoreClient||ic(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function ic(a){var n;const o=a._freezeSettings(),l=(y=(null===(n=a._app)||void 0===n?void 0:n.options.appId)||"",new z_(a._databaseId,y,a._persistenceKey,(k=o).host,k.ssl,k.experimentalForceLongPolling,k.experimentalAutoDetectLongPolling,k.useFetchStreams));var y,k;a._firestoreClient=new Wu(a._credentials,a._queue,l)}function zc(a,n,o){const l=new Jr;return a.asyncQueue.enqueue((0,se.Z)(function*(){try{yield tf(a,o),yield H_(a,n),l.resolve()}catch(h){if(!("FirebaseError"===(y=h).name?y.code===je.FAILED_PRECONDITION||y.code===je.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&y instanceof DOMException)||22===y.code||20===y.code||11===y.code))throw h;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+h),l.reject(h)}var y})).then(()=>l.promise)}function Xd(a){if(a._initialized||a._terminated)throw new tt(je.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Li{constructor(...n){for(let o=0;o<n.length;++o)if(0===n[o].length)throw new tt(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class po{constructor(n){this._byteString=n}static fromBase64String(n){try{return new po(Di.fromBase64String(n))}catch(o){throw new tt(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+o)}}static fromUint8Array(n){return new po(Di.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class fa{constructor(n){this._methodName=n}}class zu{constructor(n,o){if(!isFinite(n)||n<-90||n>90)throw new tt(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(o)||o<-180||o>180)throw new tt(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+o);this._lat=n,this._long=o}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return ke(this._lat,n._lat)||ke(this._long,n._long)}}const qc=/^__.*__$/;class Kc{constructor(n,o,l){this.data=n,this.fieldMask=o,this.fieldTransforms=l}toMutation(n,o){return null!==this.fieldMask?new aa(n,this.data,this.fieldMask,o,this.fieldTransforms):new oa(n,this.data,o,this.fieldTransforms)}}class oc{constructor(n,o,l){this.data=n,this.fieldMask=o,this.fieldTransforms=l}toMutation(n,o){return new aa(n,this.data,this.fieldMask,o,this.fieldTransforms)}}function ac(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St()}}class qu{constructor(n,o,l,h,y,I){this.settings=n,this.databaseId=o,this.N=l,this.ignoreUndefinedProperties=h,void 0===y&&this.Sa(),this.fieldTransforms=y||[],this.fieldMask=I||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(n){return new qu(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(n){var o;const l=null===(o=this.path)||void 0===o?void 0:o.child(n),h=this.Ca({path:l,xa:!1});return h.ka(n),h}$a(n){var o;const l=null===(o=this.path)||void 0===o?void 0:o.child(n),h=this.Ca({path:l,xa:!1});return h.Sa(),h}Oa(n){return this.Ca({path:void 0,xa:!0})}Fa(n){return pf(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(n){return void 0!==this.fieldMask.find(o=>n.isPrefixOf(o))||void 0!==this.fieldTransforms.find(o=>n.isPrefixOf(o.field))}Sa(){if(this.path)for(let n=0;n<this.path.length;n++)this.ka(this.path.get(n))}ka(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(ac(this.Da)&&qc.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}class Zc{constructor(n,o,l){this.databaseId=n,this.ignoreUndefinedProperties=o,this.N=l||Lh(n)}Ba(n,o,l,h=!1){return new qu({Da:n,methodName:o,La:l,path:Jn.emptyPath(),xa:!1,Ma:h},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Dl(a){const n=a._freezeSettings(),o=Lh(a._databaseId);return new Zc(a._databaseId,!!n.ignoreUndefinedProperties,o)}function eh(a,n,o,l,h,y={}){const I=a.Ba(y.merge||y.mergeFields?2:0,n,o,h);fg("Data must be an object, but it was:",I,l);const k=dg(l,I);let G,X;if(y.merge)G=new To(I.fieldMask),X=I.fieldTransforms;else if(y.mergeFields){const re=[];for(const be of y.mergeFields){const Ge=dy(n,be,o);if(!I.contains(Ge))throw new tt(je.INVALID_ARGUMENT,`Field '${Ge}' is specified in your field mask but missing from your input data.`);pg(re,Ge)||re.push(Ge)}G=new To(re),X=I.fieldTransforms.filter(be=>G.covers(be.field))}else G=null,X=I.fieldTransforms;return new Kc(new nt(k),G,X)}class Yc extends fa{_toFieldTransform(n){if(2!==n.Da)throw n.Fa(1===n.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof Yc}}function ug(a,n,o){return new qu({Da:3,La:n.settings.La,methodName:a._methodName,xa:o},n.databaseId,n.N,n.ignoreUndefinedProperties)}class df extends fa{_toFieldTransform(n){return new ul(n.path,new Fu)}isEqual(n){return n instanceof df}}class uy extends fa{constructor(n,o){super(n),this.Ua=o}_toFieldTransform(n){const o=ug(this,n,!0),l=this.Ua.map(y=>uc(y,o)),h=new Lu(l);return new ul(n.path,h)}isEqual(n){return this===n}}class ly extends fa{constructor(n,o){super(n),this.Ua=o}_toFieldTransform(n){const o=ug(this,n,!0),l=this.Ua.map(y=>uc(y,o)),h=new Ao(l);return new ul(n.path,h)}isEqual(n){return this===n}}class cy extends fa{constructor(n,o){super(n),this.qa=o}_toFieldTransform(n){const o=new al(n.N,Na(n.N,this.qa));return new ul(n.path,o)}isEqual(n){return this===n}}function hf(a,n,o,l){const h=a.Ba(1,n,o);fg("Data must be an object, but it was:",h,l);const y=[],I=nt.empty();$r(l,(G,X)=>{const re=ff(n,G,o);X=(0,Ue.m9)(X);const be=h.$a(re);if(X instanceof Yc)y.push(re);else{const Ge=uc(X,be);null!=Ge&&(y.push(re),I.set(re,Ge))}});const k=new To(y);return new oc(I,k,h.fieldTransforms)}function lg(a,n,o,l,h,y){const I=a.Ba(1,n,o),k=[dy(n,l,o)],G=[h];if(y.length%2!=0)throw new tt(je.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ge=0;Ge<y.length;Ge+=2)k.push(dy(n,y[Ge])),G.push(y[Ge+1]);const X=[],re=nt.empty();for(let Ge=k.length-1;Ge>=0;--Ge)if(!pg(X,k[Ge])){const Qe=k[Ge];let _t=G[Ge];_t=(0,Ue.m9)(_t);const Bt=I.$a(Qe);if(_t instanceof Yc)X.push(Qe);else{const dn=uc(_t,Bt);null!=dn&&(X.push(Qe),re.set(Qe,dn))}}const be=new To(X);return new oc(re,be,I.fieldTransforms)}function cg(a,n,o,l=!1){return uc(o,a.Ba(l?4:3,n))}function uc(a,n){if(hg(a=(0,Ue.m9)(a)))return fg("Unsupported field value:",n,a),dg(a,n);if(a instanceof fa)return function(o,l){if(!ac(l.Da))throw l.Fa(`${o._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Fa(`${o._methodName}() is not currently supported inside arrays`);const h=o._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(a,n),null;if(void 0===a&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),a instanceof Array){if(n.settings.xa&&4!==n.Da)throw n.Fa("Nested arrays are not supported");return function(o,l){const h=[];let y=0;for(const I of o){let k=uc(I,l.Oa(y));null==k&&(k={nullValue:"NULL_VALUE"}),h.push(k),y++}return{arrayValue:{values:h}}}(a,n)}return function(o,l){if(null===(o=(0,Ue.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Na(l.N,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const h=It.fromDate(o);return{timestampValue:Tc(l.N,h)}}if(o instanceof It){const h=new It(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Tc(l.N,h)}}if(o instanceof zu)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof po)return{bytesValue:Qf(l.N,o._byteString)};if(o instanceof kr){const h=l.databaseId,y=o.firestore._databaseId;if(!y.isEqual(h))throw l.Fa(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Ed(o.firestore._databaseId||l.databaseId,o._key.path)}}throw l.Fa(`Unsupported field value: ${Qd(o)}`)}(a,n)}function dg(a,n){const o={};return Xr(a)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):$r(a,(l,h)=>{const y=uc(h,n.Na(l));null!=y&&(o[l]=y)}),{mapValue:{fields:o}}}function hg(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof It||a instanceof zu||a instanceof po||a instanceof kr||a instanceof fa)}function fg(a,n,o){if(!hg(o)||"object"!=typeof(l=o)||null===l||Object.getPrototypeOf(l)!==Object.prototype&&null!==Object.getPrototypeOf(l)){const l=Qd(o);throw n.Fa("an object"===l?a+" a custom object":a+" "+l)}var l}function dy(a,n,o){if((n=(0,Ue.m9)(n))instanceof Li)return n._internalPath;if("string"==typeof n)return ff(a,n);throw pf("Field path arguments must be of type string or FieldPath.",a,!1,void 0,o)}const X_=new RegExp("[~\\*/\\[\\]]");function ff(a,n,o){if(n.search(X_)>=0)throw pf(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,o);try{return new Li(...n.split("."))._internalPath}catch(l){throw pf(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,o)}}function pf(a,n,o,l,h){const y=l&&!l.isEmpty(),I=void 0!==h;let k=`Function ${n}() called with invalid data`;o&&(k+=" (via `toFirestore()`)"),k+=". ";let G="";return(y||I)&&(G+=" (found",y&&(G+=` in field ${l}`),I&&(G+=` in document ${h}`),G+=")"),new tt(je.INVALID_ARGUMENT,k+a+G)}function pg(a,n){return a.some(o=>o.isEqual(n))}class th{constructor(n,o,l,h,y){this._firestore=n,this._userDataWriter=o,this._key=l,this._document=h,this._converter=y}get id(){return this._key.path.lastSegment()}get ref(){return new kr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new ev(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const o=this._document.data.field(gg("DocumentSnapshot.get",n));if(null!==o)return this._userDataWriter.convertValue(o)}}}class ev extends th{data(){return super.data()}}function gg(a,n){return"string"==typeof n?ff(a,n):n instanceof Li?n._internalPath:n._delegate._internalPath}class lc{constructor(n,o){this.hasPendingWrites=n,this.fromCache=o}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class vu extends th{constructor(n,o,l,h,y,I){super(n,o,l,h,I),this._firestore=n,this._firestoreImpl=n,this.metadata=y}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const o=new gf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(o,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,o={}){if(this._document){const l=this._document.data.field(gg("DocumentSnapshot.get",n));if(null!==l)return this._userDataWriter.convertValue(l,o.serverTimestamps)}}}class gf extends vu{data(n={}){return super.data(n)}}class cc{constructor(n,o,l,h){this._firestore=n,this._userDataWriter=o,this._snapshot=h,this.metadata=new lc(h.hasPendingWrites,h.fromCache),this.query=l}get docs(){const n=[];return this.forEach(o=>n.push(o)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,o){this._snapshot.docs.forEach(l=>{n.call(o,new gf(this._firestore,this._userDataWriter,l.key,l,new lc(this._snapshot.mutatedKeys.has(l.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const o=!!n.includeMetadataChanges;if(o&&this._snapshot.excludesMetadataChanges)throw new tt(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===o||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let y=0;return l._snapshot.docChanges.map(I=>({type:"added",doc:new gf(l._firestore,l._userDataWriter,I.doc.key,I.doc,new lc(l._snapshot.mutatedKeys.has(I.doc.key),l._snapshot.fromCache),l.query.converter),oldIndex:-1,newIndex:y++}))}{let y=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(I=>h||3!==I.type).map(I=>{const k=new gf(l._firestore,l._userDataWriter,I.doc.key,I.doc,new lc(l._snapshot.mutatedKeys.has(I.doc.key),l._snapshot.fromCache),l.query.converter);let G=-1,X=-1;return 0!==I.type&&(G=y.indexOf(I.doc.key),y=y.delete(I.doc.key)),1!==I.type&&(y=y.add(I.doc),X=y.indexOf(I.doc.key)),{type:HE(I.type),doc:k,oldIndex:G,newIndex:X}})}}(this,o),this._cachedChangesIncludeMetadataChanges=o),this._cachedChanges}}function HE(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return St()}}function hy(a,n){return a instanceof vu&&n instanceof vu?a._firestore===n._firestore&&a._key.isEqual(n._key)&&(null===a._document?null===n._document:a._document.isEqual(n._document))&&a._converter===n._converter:a instanceof cc&&n instanceof cc&&a._firestore===n._firestore&&sy(a.query,n.query)&&a.metadata.isEqual(n.metadata)&&a._snapshot.isEqual(n._snapshot)}function tv(a){if(Aa(a)&&0===a.explicitOrderBy.length)throw new tt(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nh{}function Tl(a,...n){for(const o of n)a=o._apply(a);return a}class mg extends nh{constructor(n,o,l){super(),this.Ka=n,this.ja=o,this.Qa=l,this.type="where"}_apply(n){const o=Dl(n.firestore),l=function(h,y,I,k,G,X,re){let be;if(G.isKeyField()){if("array-contains"===X||"array-contains-any"===X)throw new tt(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${X}' queries on FieldPath.documentId().`);if("in"===X||"not-in"===X){rh(re,X);const Qe=[];for(const _t of re)Qe.push(vg(k,h,_t));be={arrayValue:{values:Qe}}}else be=vg(k,h,re)}else"in"!==X&&"not-in"!==X&&"array-contains-any"!==X||rh(re,X),be=cg(I,"where",re,"in"===X||"not-in"===X);const Ge=Ir.create(G,X,be);return function(Qe,_t){if(_t.v()){const dn=sd(Qe);if(null!==dn&&!dn.isEqual(_t.field))throw new tt(je.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${dn.toString()}' and '${_t.field.toString()}'`);const di=Sa(Qe);null!==di&&gy(0,_t.field,di)}const Bt=function(dn,di){for(const zs of dn.filters)if(di.indexOf(zs.op)>=0)return zs.op;return null}(Qe,function(dn){switch(dn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(_t.op));if(null!==Bt)throw new tt(je.INVALID_ARGUMENT,Bt===_t.op?`Invalid query. You cannot use more than one '${_t.op.toString()}' filter.`:`Invalid query. You cannot use '${_t.op.toString()}' filters with '${Bt.toString()}' filters.`)}(h,Ge),Ge}(n._query,0,o,n.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Os(n.firestore,n.converter,function(h,y){const I=h.filters.concat([y]);return new ia(h.path,h.collectionGroup,h.explicitOrderBy.slice(),I,h.limit,h.limitType,h.startAt,h.endAt)}(n._query,l))}}class nv extends nh{constructor(n,o){super(),this.Ka=n,this.Wa=o,this.type="orderBy"}_apply(n){const o=function(l,h,y){if(null!==l.startAt)throw new tt(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==l.endAt)throw new tt(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const I=new uu(h,y);return function(k,G){if(null===Sa(k)){const X=sd(k);null!==X&&gy(0,X,G.field)}}(l,I),I}(n._query,this.Ka,this.Wa);return new Os(n.firestore,n.converter,function(l,h){const y=l.explicitOrderBy.concat([h]);return new ia(l.path,l.collectionGroup,y,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n._query,o))}}class rv extends nh{constructor(n,o,l){super(),this.type=n,this.Ga=o,this.za=l}_apply(n){return new Os(n.firestore,n.converter,cu(n._query,this.Ga,this.za))}}class _g extends nh{constructor(n,o,l){super(),this.type=n,this.Ha=o,this.Ja=l}_apply(n){const o=py(n,this.type,this.Ha,this.Ja);return new Os(n.firestore,n.converter,(h=o,new ia((l=n._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,h,l.endAt)));var l,h}}class dc extends nh{constructor(n,o,l){super(),this.type=n,this.Ha=o,this.Ja=l}_apply(n){const o=py(n,this.type,this.Ha,this.Ja);return new Os(n.firestore,n.converter,(h=o,new ia((l=n._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,h)));var l,h}}function py(a,n,o,l){if(o[0]=(0,Ue.m9)(o[0]),o[0]instanceof th)return function(h,y,I,k,G){if(!k)throw new tt(je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${I}().`);const X=[];for(const re of Ra(h))if(re.field.isKeyField())X.push(T(y,k.key));else{const be=k.data.field(re.field);if(Ou(be))throw new tt(je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+re.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===be){const Ge=re.field.canonicalString();throw new tt(je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ge}' (used as the orderBy) does not exist.`)}X.push(be)}return new mc(X,G)}(a._query,a.firestore._databaseId,n,o[0]._document,l);{const h=Dl(a.firestore);return function(y,I,k,G,X,re){const be=y.explicitOrderBy;if(X.length>be.length)throw new tt(je.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ge=[];for(let Qe=0;Qe<X.length;Qe++){const _t=X[Qe];if(be[Qe].field.isKeyField()){if("string"!=typeof _t)throw new tt(je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof _t}`);if(!Gr(y)&&-1!==_t.indexOf("/"))throw new tt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${G}() must be a plain document ID, but '${_t}' contains a slash.`);const Bt=y.path.child(mn.fromString(_t));if(!kt.isDocumentKey(Bt))throw new tt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${G}() must result in a valid document path, but '${Bt}' is not because it contains an odd number of segments.`);const dn=new kt(Bt);Ge.push(T(I,dn))}else{const Bt=cg(k,G,_t);Ge.push(Bt)}}return new mc(Ge,re)}(a._query,a.firestore._databaseId,h,n,o,l)}}function vg(a,n,o){if("string"==typeof(o=(0,Ue.m9)(o))){if(""===o)throw new tt(je.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gr(n)&&-1!==o.indexOf("/"))throw new tt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${o}' contains a '/' character.`);const l=n.path.child(mn.fromString(o));if(!kt.isDocumentKey(l))throw new tt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${l}' is not because it has an odd number of segments (${l.length}).`);return T(a,new kt(l))}if(o instanceof kr)return T(a,o._key);throw new tt(je.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qd(o)}.`)}function rh(a,n){if(!Array.isArray(a)||0===a.length)throw new tt(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(a.length>10)throw new tt(je.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function gy(a,n,o){if(!o.isEqual(n))throw new tt(je.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${o.toString()}' instead.`)}class mf{convertValue(n,o="none"){switch(Ho(n)){case 0:return null;case 1:return n.booleanValue;case 2:return Or(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,o);case 5:return n.stringValue;case 6:return this.convertBytes(Da(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,o);case 10:return this.convertObject(n.mapValue,o);default:throw St()}}convertObject(n,o){const l={};return $r(n.fields,(h,y)=>{l[h]=this.convertValue(y,o)}),l}convertGeoPoint(n){return new zu(Or(n.latitude),Or(n.longitude))}convertArray(n,o){return(n.values||[]).map(l=>this.convertValue(l,o))}convertServerTimestamp(n,o){switch(o){case"previous":const l=nl(n);return null==l?null:this.convertValue(l,o);case"estimate":return this.convertTimestamp(iu(n));default:return null}}convertTimestamp(n){const o=zn(n);return new It(o.seconds,o.nanos)}convertDocumentKey(n,o){const l=mn.fromString(n);Gt(Nc(l));const h=new Wc(l.get(1),l.get(3)),y=new kt(l.popFirst(5));return h.isEqual(o)||gr(`Document ${y} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${o.projectId}/${o.database}) instead.`),y}}function yf(a,n,o){let l;return l=a?o&&(o.merge||o.mergeFields)?a.toFirestore(n,o):a.toFirestore(n):n,l}class av extends mf{constructor(n){super(),this.firestore=n}convertBytes(n){return new po(n)}convertReference(n){const o=this.convertDocumentKey(n,this.firestore._databaseId);return new kr(this.firestore,null,o)}}class my{constructor(n,o){this._firestore=n,this._commitHandler=o,this._mutations=[],this._committed=!1,this._dataReader=Dl(n)}set(n,o,l){this._verifyNotCommitted();const h=Al(n,this._firestore),y=yf(h.converter,o,l),I=eh(this._dataReader,"WriteBatch.set",h._key,y,null!==h.converter,l);return this._mutations.push(I.toMutation(h._key,mi.none())),this}update(n,o,l,...h){this._verifyNotCommitted();const y=Al(n,this._firestore);let I;return I="string"==typeof(o=(0,Ue.m9)(o))||o instanceof Li?lg(this._dataReader,"WriteBatch.update",y._key,o,l,h):hf(this._dataReader,"WriteBatch.update",y._key,o),this._mutations.push(I.toMutation(y._key,mi.exists(!0))),this}delete(n){this._verifyNotCommitted();const o=Al(n,this._firestore);return this._mutations=this._mutations.concat(new qo(o._key,mi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new tt(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Al(a,n){if((a=(0,Ue.m9)(a)).firestore!==n)throw new tt(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class Sl extends mf{constructor(n){super(),this.firestore=n}convertBytes(n){return new po(n)}convertReference(n){const o=this.convertDocumentKey(n,this.firestore._databaseId);return new kr(this.firestore,null,o)}}function _f(a,n,o){a=Yn(a,kr);const l=Yn(a.firestore,_i),h=yf(a.converter,n,o);return Rl(l,[eh(Dl(l),"setDoc",a._key,h,null!==a.converter,o).toMutation(a._key,mi.none())])}function vy(a,n,o,...l){a=Yn(a,kr);const h=Yn(a.firestore,_i),y=Dl(h);let I;return I="string"==typeof(n=(0,Ue.m9)(n))||n instanceof Li?lg(y,"updateDoc",a._key,n,o,l):hf(y,"updateDoc",a._key,n),Rl(h,[I.toMutation(a._key,mi.exists(!0))])}function Ey(a,...n){var o,l,h;a=(0,Ue.m9)(a);let y={includeMetadataChanges:!1},I=0;"object"!=typeof n[I]||og(n[I])||(y=n[I],I++);const k={includeMetadataChanges:y.includeMetadataChanges};if(og(n[I])){const be=n[I];n[I]=null===(o=be.next)||void 0===o?void 0:o.bind(be),n[I+1]=null===(l=be.error)||void 0===l?void 0:l.bind(be),n[I+2]=null===(h=be.complete)||void 0===h?void 0:h.bind(be)}let G,X,re;if(a instanceof kr)X=Yn(a.firestore,_i),re=Vl(a._key.path),G={next:be=>{n[I]&&n[I](bg(X,a,be))},error:n[I+1],complete:n[I+2]};else{const be=Yn(a,Os);X=Yn(be.firestore,_i),re=be._query;const Ge=new Sl(X);G={next:Qe=>{n[I]&&n[I](new cc(X,Ge,be,Qe))},error:n[I+1],complete:n[I+2]},tv(a._query)}return function(be,Ge,Qe,_t){const Bt=new Kd(_t),dn=new qh(Ge,Bt,Qe);return be.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return Nm(yield Il(be),dn)})),()=>{Bt.Xo(),be.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return Gd(yield Il(be),dn)}))}}(vi(X),re,k,G)}function Rl(a,n){return function(o,l){const h=new Jr;return o.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(a,n,o){return $p.apply(this,arguments)}(yield rc(o),l,h)})),h.promise}(vi(a),n)}function bg(a,n,o){const l=o.docs.get(n._key),h=new Sl(a);return new vu(a,h,n._key,l,new lc(o.hasPendingWrites,o.fromCache),n.converter)}class Cg extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=Dl(n)}get(n){const o=Al(n,this._firestore),l=new av(this._firestore);return this._transaction.lookup([o._key]).then(h=>{if(!h||1!==h.length)return St();const y=h[0];if(y.isFoundDocument())return new th(this._firestore,l,y.key,y,o.converter);if(y.isNoDocument())return new th(this._firestore,l,o._key,null,o.converter);throw St()})}set(n,o,l){const h=Al(n,this._firestore),y=yf(h.converter,o,l),I=eh(this._dataReader,"Transaction.set",h._key,y,null!==h.converter,l);return this._transaction.set(h._key,I),this}update(n,o,l,...h){const y=Al(n,this._firestore);let I;return I="string"==typeof(o=(0,Ue.m9)(o))||o instanceof Li?lg(this._dataReader,"Transaction.update",y._key,o,l,h):hf(this._dataReader,"Transaction.update",y._key,o),this._transaction.update(y._key,I),this}delete(n){const o=Al(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(n,o){super(n,o),this._firestore=n}get(n){const o=Al(n,this._firestore),l=new Sl(this._firestore);return super.get(n).then(h=>new vu(this._firestore,l,o._key,h._document,new lc(!1,!1),o.converter))}}function sh(a,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new tt("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return n}function vf(){if("undefined"==typeof Uint8Array)throw new tt("unimplemented","Uint8Arrays are not available in this environment.")}function Tg(){if("undefined"==typeof atob)throw new tt("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(a){Qi=a})(lt.SDK_VERSION),(0,lt._registerComponent)(new Wt.wA("firestore",(a,{options:n})=>{const o=a.getProvider("app").getImmediate(),l=new _i(o,new E(a.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),l._setSettings(n),l},"PUBLIC")),(0,lt.registerVersion)("@firebase/firestore","3.1.0",void 0);class oh{constructor(n){this._delegate=n}static fromBase64String(n){return Tg(),new oh(po.fromBase64String(n))}static fromUint8Array(n){return vf(),new oh(po.fromUint8Array(n))}toBase64(){return Tg(),this._delegate.toBase64()}toUint8Array(){return vf(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ef(a){return function(a,n){if("object"!=typeof a||null===a)return!1;const o=a;for(const l of["next","error","complete"])if(l in o&&"function"==typeof o[l])return!0;return!1}(a)}class Ag{enableIndexedDbPersistence(n,o){return function(a,n){Xd(a=Yn(a,_i));const o=vi(a),l=a._freezeSettings(),h=new zm;return zc(o,h,new Wm(h,l.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(n._delegate,{forceOwnership:o})}enableMultiTabIndexedDbPersistence(n){return function(a){Xd(a=Yn(a,_i));const n=vi(a),o=a._freezeSettings(),l=new zm;return zc(n,l,new $_(l,o.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function(a){if(a._initialized&&!a._terminated)throw new tt(je.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new Jr;return a._queue.enqueueAndForgetEvenWhileRestricted((0,se.Z)(function*(){try{yield(o=(0,se.Z)(function*(l){if(!fo.bt())return Promise.resolve();const h=l+"main";yield fo.delete(h)}),function(l){return o.apply(this,arguments)})(cp(a._databaseId,a._persistenceKey)),n.resolve()}catch(o){n.reject(o)}var o})),n.promise}(n._delegate)}}class Sg{constructor(n,o,l){this._delegate=o,this._persistenceProvider=l,this.INTERNAL={delete:()=>this.terminate()},n instanceof Wc||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const o=this._delegate._getSettings();!n.merge&&o.host!==n.host&&Io("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},o),n)).merge,this._delegate._setSettings(n)}useEmulator(n,o,l={}){!function(a,n,o,l={}){var h;const y=(a=Yn(a,uf))._getSettings();if("firestore.googleapis.com"!==y.host&&y.host!==n&&Io("Host has been set in both settings() and useEmulator(), emulator host will be used"),a._setSettings(Object.assign(Object.assign({},y),{host:`${n}:${o}`,ssl:!1})),l.mockUserToken){let I,k;if("string"==typeof l.mockUserToken)I=l.mockUserToken,k=Qr.MOCK_USER;else{I=(0,Ue.Sg)(l.mockUserToken,null===(h=a._app)||void 0===h?void 0:h.options.projectId);const G=l.mockUserToken.sub||l.mockUserToken.user_id;if(!G)throw new tt(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new Qr(G)}a._credentials=new b(new jo(I,k))}}(this._delegate,n,o,l)}enableNetwork(){return function(a){return function(a){return a.asyncQueue.enqueue((0,se.Z)(function*(){const n=yield ng(a),o=yield Km(a);return n.setNetworkEnabled(!0),function(l){const h=mt(l);return h.Kr.delete(0),Vh(h)}(o)}))}(vi(a=Yn(a,_i)))}(this._delegate)}disableNetwork(){return function(a){return function(a){return a.asyncQueue.enqueue((0,se.Z)(function*(){const n=yield ng(a),o=yield Km(a);return n.setNetworkEnabled(!1),(l=(0,se.Z)(function*(h){const y=mt(h);y.Kr.add(0),yield _l(y),y.Wr.set("Offline")}),function(h){return l.apply(this,arguments)})(o);var l}))}(vi(a=Yn(a,_i)))}(this._delegate)}enablePersistence(n){let o=!1,l=!1;return n&&(o=!!n.synchronizeTabs,l=!!n.experimentalForceOwningTab,af("synchronizeTabs",o,"experimentalForceOwningTab",l)),o?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,l)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(a){return function(n){const o=new Jr;return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(a,n){return Fm.apply(this,arguments)}(yield rc(n),o)})),o.promise}(vi(a=Yn(a,_i)))}(this._delegate)}onSnapshotsInSync(n){return function(a,n){return function(a,n){const o=new Kd(n);return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return l=yield Il(a),h=o,mt(l).Zr.add(h),void h.next();var l,h})),()=>{o.Xo(),a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return l=yield Il(a),h=o,void mt(l).Zr.delete(h);var l,h}))}}(vi(a=Yn(a,_i)),og(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new tt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new Xc(this,iy(this._delegate,n))}catch(o){throw Gs(o,"collection()","Firestore.collection()")}}doc(n){try{return new Mo(this,Jd(this._delegate,n))}catch(o){throw Gs(o,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new Ws(this,function(a,n){if(a=Yn(a,uf),ny("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new tt(je.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Os(a,null,(o=n,new ia(mn.emptyPath(),o)));var o}(this._delegate,n))}catch(o){throw Gs(o,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function(a,n){return function(a,n){const o=new Jr;return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){const l=yield(h=a,Yd(h).then(y=>y.datastore));var h;new LE(a.asyncQueue,l,n,o).run()})),o.promise}(vi(a),o=>n(new Cg(a,o)))}(this._delegate,o=>n(new Ay(this,o)))}batch(){return vi(this._delegate),new bf(new my(this._delegate,n=>Rl(this._delegate,n)))}loadBundle(n){return function(a,n){const o=vi(a=Yn(a,_i)),l=new Z_;return function(a,n,o,l){const h=function(y,I){let k;return k="string"==typeof y?(new TextEncoder).encode(y):y,G=function(G,X){if(G instanceof Uint8Array)return qm(G,X);if(G instanceof ArrayBuffer)return qm(new Uint8Array(G),X);if(G instanceof ReadableStream)return G.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new ri(G,I);var G}(o,Lh(n));a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){!function(a,n,o){const l=mt(a);var h;(h=(0,se.Z)(function*(y,I,k){try{const G=yield I.getMetadata();if(yield function(Ge,Qe){const _t=mt(Ge),Bt=li(Qe.createTime);return _t.persistence.runTransaction("hasNewerBundle","readonly",dn=>_t.Je.getBundleMetadata(dn,Qe.id)).then(dn=>!!dn&&dn.createTime.compareTo(Bt)>=0)}(y.localStore,G))return yield I.close(),void k._completeWith((Ge=G,{taskState:"Success",documentsLoaded:Ge.totalDocuments,bytesLoaded:Ge.totalBytes,totalDocuments:Ge.totalDocuments,totalBytes:Ge.totalBytes}));k._updateProgress(Mm(G));const X=new M_(G,y.localStore,I.N);let re=yield I.Qo();for(;re;){const Ge=yield X.fo(re);Ge&&k._updateProgress(Ge),re=yield I.Qo()}const be=yield X.complete();yield da(y,be.Tn,void 0),yield function(Ge,Qe){const _t=mt(Ge);return _t.persistence.runTransaction("Save bundle","readwrite",Bt=>_t.Je.saveBundleMetadata(Bt,Qe))}(y.localStore,G),k._completeWith(be.progress)}catch(G){Io("SyncEngine",`Loading bundle failed with ${G}`),k._failWith(G)}var Ge}),function(y,I,k){return h.apply(this,arguments)})(l,n,o).then(()=>{l.sharedClientState.notifyBundleLoaded()})}(yield rc(a),h,l)}))}(o,a._databaseId,n,l),l}(this._delegate,n)}namedQuery(n){return function(a,n){return function(a,n){return a.asyncQueue.enqueue((0,se.Z)(function*(){return function(o,l){const h=mt(o);return h.persistence.runTransaction("Get named query","readonly",y=>h.Je.getNamedQuery(y,l))}(yield rg(a),n)}))}(vi(a=Yn(a,_i)),n).then(o=>o?new Os(a,null,o.query):null)}(this._delegate,n).then(o=>o?new Ws(this,o):null)}}class wf extends mf{constructor(n){super(),this.firestore=n}convertBytes(n){return new oh(new po(n))}convertReference(n){const o=this.convertDocumentKey(n,this.firestore._databaseId);return Mo.forKey(o,this.firestore,null)}}class Ay{constructor(n,o){this._firestore=n,this._delegate=o,this._userDataWriter=new wf(n)}get(n){const o=hc(n);return this._delegate.get(o).then(l=>new Qc(this._firestore,new vu(this._firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,o.converter)))}set(n,o,l){const h=hc(n);return l?(sh("Transaction.set",l),this._delegate.set(h,o,l)):this._delegate.set(h,o),this}update(n,o,l,...h){const y=hc(n);return 2===arguments.length?this._delegate.update(y,o):this._delegate.update(y,o,l,...h),this}delete(n){const o=hc(n);return this._delegate.delete(o),this}}class bf{constructor(n){this._delegate=n}set(n,o,l){const h=hc(n);return l?(sh("WriteBatch.set",l),this._delegate.set(h,o,l)):this._delegate.set(h,o),this}update(n,o,l,...h){const y=hc(n);return 2===arguments.length?this._delegate.update(y,o):this._delegate.update(y,o,l,...h),this}delete(n){const o=hc(n);return this._delegate.delete(o),this}commit(){return this._delegate.commit()}}class Eu{constructor(n,o,l){this._firestore=n,this._userDataWriter=o,this._delegate=l}fromFirestore(n,o){const l=new gf(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new Jc(this._firestore,l),null!=o?o:{})}toFirestore(n,o){return o?this._delegate.toFirestore(n,o):this._delegate.toFirestore(n)}static getInstance(n,o){const l=Eu.INSTANCES;let h=l.get(n);h||(h=new WeakMap,l.set(n,h));let y=h.get(o);return y||(y=new Eu(n,new wf(n),o),h.set(o,y)),y}}Eu.INSTANCES=new WeakMap;class Mo{constructor(n,o){this.firestore=n,this._delegate=o,this._userDataWriter=new wf(n)}static forPath(n,o,l){if(n.length%2!=0)throw new tt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new Mo(o,new kr(o._delegate,l,new kt(n)))}static forKey(n,o,l){return new Mo(o,new kr(o._delegate,l,n))}get id(){return this._delegate.id}get parent(){return new Xc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new Xc(this.firestore,iy(this._delegate,n))}catch(o){throw Gs(o,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,Ue.m9)(n))instanceof kr&&lf(this._delegate,n)}set(n,o){o=sh("DocumentReference.set",o);try{return o?_f(this._delegate,n,o):_f(this._delegate,n)}catch(l){throw Gs(l,"setDoc()","DocumentReference.set()")}}update(n,o,...l){try{return 1===arguments.length?vy(this._delegate,n):vy(this._delegate,n,o,...l)}catch(h){throw Gs(h,"updateDoc()","DocumentReference.update()")}}delete(){return function(a){return Rl(Yn(a.firestore,_i),[new qo(a._key,mi.none())])}(this._delegate)}onSnapshot(...n){const o=Rg(n),l=xg(n,h=>new Qc(this.firestore,new vu(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return Ey(this._delegate,o,l)}get(n){let o;return o="cache"===(null==n?void 0:n.source)?function(a){a=Yn(a,kr);const n=Yn(a.firestore,_i),o=vi(n),l=new Sl(n);return function(a,n){const o=new Jr;return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return(l=(0,se.Z)(function*(h,y,I){try{const k=yield function(G,X){const re=mt(G);return re.persistence.runTransaction("read document","readonly",be=>re.Qn.An(be,X))}(h,y);k.isFoundDocument()?I.resolve(k):k.isNoDocument()?I.resolve(null):I.reject(new tt(je.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const G=ms(k,`Failed to get document '${y} from cache`);I.reject(G)}}),function(h,y,I){return l.apply(this,arguments)})(yield rg(a),n,o);var l})),o.promise}(o,a._key).then(h=>new vu(n,l,a._key,h,new lc(null!==h&&h.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===(null==n?void 0:n.source)?function(a){a=Yn(a,kr);const n=Yn(a.firestore,_i);return Jm(vi(n),a._key,{source:"server"}).then(o=>bg(n,a,o))}(this._delegate):function(a){a=Yn(a,kr);const n=Yn(a.firestore,_i);return Jm(vi(n),a._key).then(o=>bg(n,a,o))}(this._delegate),o.then(l=>new Qc(this.firestore,new vu(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)))}withConverter(n){return new Mo(this.firestore,this._delegate.withConverter(n?Eu.getInstance(this.firestore,n):null))}}function Gs(a,n,o){return a.message=a.message.replace(n,o),a}function Rg(a){for(const n of a)if("object"==typeof n&&!Ef(n))return n;return{}}function xg(a,n){var o,l;let h;return h=Ef(a[0])?a[0]:Ef(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:y=>{h.next&&h.next(n(y))},error:null===(o=h.error)||void 0===o?void 0:o.bind(h),complete:null===(l=h.complete)||void 0===l?void 0:l.bind(h)}}class Qc{constructor(n,o){this._firestore=n,this._delegate=o}get ref(){return new Mo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,o){return this._delegate.get(n,o)}isEqual(n){return hy(this._delegate,n._delegate)}}class Jc extends Qc{data(n){const o=this._delegate.data(n);return function(a,n){a||St()}(void 0!==o),o}}class Ws{constructor(n,o){this.firestore=n,this._delegate=o,this._userDataWriter=new wf(n)}where(n,o,l){try{return new Ws(this.firestore,Tl(this._delegate,function(a,n,o){const l=n,h=gg("where",a);return new mg(h,l,o)}(n,o,l)))}catch(h){throw Gs(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,o){try{return new Ws(this.firestore,Tl(this._delegate,function(a,n="asc"){const o=n,l=gg("orderBy",a);return new nv(l,o)}(n,o)))}catch(l){throw Gs(l,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new Ws(this.firestore,Tl(this._delegate,function(a){return ha("limit",a),new rv("limit",a,"F")}(n)))}catch(o){throw Gs(o,"limit()","Query.limit()")}}limitToLast(n){try{return new Ws(this.firestore,Tl(this._delegate,function(a){return ha("limitToLast",a),new rv("limitToLast",a,"L")}(n)))}catch(o){throw Gs(o,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new Ws(this.firestore,Tl(this._delegate,function(...a){return new _g("startAt",a,!0)}(...n)))}catch(o){throw Gs(o,"startAt()","Query.startAt()")}}startAfter(...n){try{return new Ws(this.firestore,Tl(this._delegate,function(...a){return new _g("startAfter",a,!1)}(...n)))}catch(o){throw Gs(o,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new Ws(this.firestore,Tl(this._delegate,function(...a){return new dc("endBefore",a,!0)}(...n)))}catch(o){throw Gs(o,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new Ws(this.firestore,Tl(this._delegate,function(...a){return new dc("endAt",a,!1)}(...n)))}catch(o){throw Gs(o,"endAt()","Query.endAt()")}}isEqual(n){return sy(this._delegate,n._delegate)}get(n){let o;return o="cache"===(null==n?void 0:n.source)?function(a){a=Yn(a,Os);const n=Yn(a.firestore,_i),o=vi(n),l=new Sl(n);return function(a,n){const o=new Jr;return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return(l=(0,se.Z)(function*(h,y,I){try{const k=yield Mh(h,y,!0),G=new Om(y,k.Gn),X=G.Io(k.documents),re=G.applyChanges(X,!1);I.resolve(re.snapshot)}catch(k){const G=ms(k,`Failed to execute query '${y} against cache`);I.reject(G)}}),function(h,y,I){return l.apply(this,arguments)})(yield rg(a),n,o);var l})),o.promise}(o,a._query).then(h=>new cc(n,l,a,h))}(this._delegate):"server"===(null==n?void 0:n.source)?function(a){a=Yn(a,Os);const n=Yn(a.firestore,_i),o=vi(n),l=new Sl(n);return Xm(o,a._query,{source:"server"}).then(h=>new cc(n,l,a,h))}(this._delegate):function(a){a=Yn(a,Os);const n=Yn(a.firestore,_i),o=vi(n),l=new Sl(n);return tv(a._query),Xm(o,a._query).then(h=>new cc(n,l,a,h))}(this._delegate),o.then(l=>new Ry(this.firestore,new cc(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)))}onSnapshot(...n){const o=Rg(n),l=xg(n,h=>new Ry(this.firestore,new cc(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return Ey(this._delegate,o,l)}withConverter(n){return new Ws(this.firestore,this._delegate.withConverter(n?Eu.getInstance(this.firestore,n):null))}}class Sy{constructor(n,o){this._firestore=n,this._delegate=o}get type(){return this._delegate.type}get doc(){return new Jc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ry{constructor(n,o){this._firestore=n,this._delegate=o}get query(){return new Ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new Jc(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(o=>new Sy(this._firestore,o))}forEach(n,o){this._delegate.forEach(l=>{n.call(o,new Jc(this._firestore,l))})}isEqual(n){return hy(this._delegate,n._delegate)}}class Xc extends Ws{constructor(n,o){super(n,o),this.firestore=n,this._delegate=o}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new Mo(this.firestore,n):null}doc(n){try{return new Mo(this.firestore,void 0===n?Jd(this._delegate):Jd(this._delegate,n))}catch(o){throw Gs(o,"doc()","CollectionReference.doc()")}}add(n){return function(a,n){const o=Yn(a.firestore,_i),l=Jd(a),h=yf(a.converter,n);return Rl(o,[eh(Dl(a.firestore),"addDoc",l._key,h,null!==a.converter,{}).toMutation(l._key,mi.exists(!1))]).then(()=>l)}(this._delegate,n).then(o=>new Mo(this.firestore,o))}isEqual(n){return lf(this._delegate,n._delegate)}withConverter(n){return new Xc(this.firestore,this._delegate.withConverter(n?Eu.getInstance(this.firestore,n):null))}}function hc(a){return Yn(a,kr)}class Cf{constructor(...n){this._delegate=new Li(...n)}static documentId(){return new Cf(Jn.keyField().canonicalString())}isEqual(n){return(n=(0,Ue.m9)(n))instanceof Li&&this._delegate._internalPath.isEqual(n._internalPath)}}class fc{constructor(n){this._delegate=n}static serverTimestamp(){const n=new df("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new fc(n)}static delete(){const n=new Yc("deleteField");return n._methodName="FieldValue.delete",new fc(n)}static arrayUnion(...n){const o=function(...a){return new uy("arrayUnion",a)}(...n);return o._methodName="FieldValue.arrayUnion",new fc(o)}static arrayRemove(...n){const o=function(...a){return new ly("arrayRemove",a)}(...n);return o._methodName="FieldValue.arrayRemove",new fc(o)}static increment(n){const o=function(a){return new cy("increment",a)}(n);return o._methodName="FieldValue.increment",new fc(o)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const rs={Firestore:Sg,GeoPoint:zu,Timestamp:It,Blob:oh,Transaction:Ay,WriteBatch:bf,DocumentReference:Mo,DocumentSnapshot:Qc,Query:Ws,QueryDocumentSnapshot:Jc,QuerySnapshot:Ry,CollectionReference:Xc,FieldPath:Cf,FieldValue:fc,setLogLevel:function(a){!function(a){Ji.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function(a){(function(a,n){a.INTERNAL.registerComponent(new Wt.wA("firestore-compat",o=>((n,o)=>new Sg(n,o,new Ag))(o.getProvider("app-compat").getImmediate(),o.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},rs)))})(a),a.registerVersion("@firebase/firestore-compat","0.1.3")}(rt.Z);var xl=$(8006),Ny=$(7841);function Ng(a,n){return function(a,n=U.z){return new ne.y(o=>{let l;return null!=n?n.schedule(()=>{l=a.onSnapshot({includeMetadataChanges:!0},o)}):l=a.onSnapshot({includeMetadataChanges:!0},o),()=>{null!=l&&l()}})}(a,n)}function Nl(a,n){return Ng(a,n).pipe((0,We.U)(o=>({payload:o,type:"query"})))}function If(a,n){return Nl(a,n).pipe((0,_e.O)(void 0),de(),(0,We.U)(([o,l])=>{const h=l.payload.docChanges(),y=h.map(I=>({type:I.type,payload:I}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(l.payload.metadata)&&l.payload.docs.forEach((I,k)=>{const G=h.find(re=>re.doc.ref.isEqual(I.ref)),X=null==o?void 0:o.payload.docs.find(re=>re.ref.isEqual(I.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(I.metadata)||!G&&X&&JSON.stringify(X.metadata)===JSON.stringify(I.metadata)||y.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:I}})}),y}))}function Oy(a,n,o){return If(a,o).pipe((0,Fe.R)((l,h)=>function(a,n,o){return n.forEach(l=>{o.indexOf(l.type)>-1&&(a=function(a,n){switch(n.type){case"added":if(!a[n.newIndex]||!a[n.newIndex].doc.ref.isEqual(n.doc.ref))return Mg(a,n.newIndex,0,n);break;case"modified":if(null==a[n.oldIndex]||a[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const o=a.slice();return o.splice(n.oldIndex,1),o.splice(n.newIndex,0,n),o}return Mg(a,n.newIndex,1,n)}break;case"removed":if(a[n.oldIndex]&&a[n.oldIndex].doc.ref.isEqual(n.doc.ref))return Mg(a,n.oldIndex,1)}return a}(a,l))}),a}(l,h.map(y=>y.payload),n),[]),o=>o.lift(new he(void 0,void 0)),(0,We.U)(l=>l.map(h=>({type:h.type,payload:h}))))}function Mg(a,n,o,...l){const h=a.slice();return h.splice(n,o,...l),h}function pv(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class Og{constructor(n,o,l){this.ref=n,this.query=o,this.afs=l}stateChanges(n){let o=If(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(o=o.pipe((0,We.U)(l=>l.filter(h=>n.indexOf(h.type)>-1)))),o.pipe((0,_e.O)(void 0),de(),(0,Te.h)(([l,h])=>h.length>0||!l),(0,We.U)(([l,h])=>h),ce.iC)}auditTrail(n){return this.stateChanges(n).pipe((0,Fe.R)((o,l)=>[...o,...l],[]))}snapshotChanges(n){const o=pv(n);return Oy(this.query,o,this.afs.schedulers.outsideAngular).pipe(ce.iC)}valueChanges(n={}){return Nl(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(o=>o.payload.docs.map(l=>n.idField?Object.assign(Object.assign({},l.data()),{[n.idField]:l.id}):l.data())),ce.iC)}get(n){return(0,Re.D)(this.query.get(n)).pipe(ce.iC)}add(n){return this.ref.add(n)}doc(n){return new Df(this.ref.doc(n),this.afs)}}class Df{constructor(n,o){this.ref=n,this.afs=o}set(n,o){return this.ref.set(n,o)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,o){const l=this.ref.collection(n),{ref:h,query:y}=pa(l,o);return new Og(h,y,this.afs)}snapshotChanges(){return function(a,n){return Ng(a,n).pipe((0,_e.O)(void 0),de(),(0,We.U)(([o,l])=>l.exists?(null==o?void 0:o.exists)?{payload:l,type:"modified"}:{payload:l,type:"added"}:{payload:l,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ce.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,We.U)(({payload:o})=>n.idField?Object.assign(Object.assign({},o.data()),{[n.idField]:o.id}):o.data()))}get(n){return(0,Re.D)(this.ref.get(n)).pipe(ce.iC)}}class wu{constructor(n,o){this.query=n,this.afs=o}stateChanges(n){return n&&0!==n.length?If(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(o=>o.filter(l=>n.indexOf(l.type)>-1)),(0,Te.h)(o=>o.length>0),ce.iC):If(this.query,this.afs.schedulers.outsideAngular).pipe(ce.iC)}auditTrail(n){return this.stateChanges(n).pipe((0,Fe.R)((o,l)=>[...o,...l],[]))}snapshotChanges(n){const o=pv(n);return Oy(this.query,o,this.afs.schedulers.outsideAngular).pipe(ce.iC)}valueChanges(n={}){return Nl(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(l=>l.payload.docs.map(h=>n.idField?Object.assign({[n.idField]:h.id},h.data()):h.data())),ce.iC)}get(n){return(0,Re.D)(this.query.get(n)).pipe(ce.iC)}}const Fy=new w.OlP("angularfire2.enableFirestorePersistence"),Ly=new w.OlP("angularfire2.firestore.persistenceSettings"),bu=new w.OlP("angularfire2.firestore.settings"),Ga=new w.OlP("angularfire2.firestore.use-emulator");function pa(a,n=(o=>o)){return{query:n(a),ref:a}}let Pg=(()=>{class a{constructor(o,l,h,y,I,k,G,X,re,be,Ge,Qe,_t,Bt,dn,di){this.schedulers=G;const zs=(0,ot.on)(o,k,l),Cu=re;be&&(0,xl.nw)(zs,k,Ge,_t,Bt,dn,Qe,di),[this.firestore,this.persistenceEnabled$]=(0,ce.cc)(`${zs.name}.firestore`,"AngularFirestore",zs.name,()=>{const ga=k.runOutsideAngular(()=>zs.firestore());if(y&&ga.settings(y),Cu&&ga.useEmulator(...Cu),h&&!(0,st.PM)(I)){const ed=()=>{try{return(0,Re.D)(ga.enablePersistence(X||void 0).then(()=>!0,()=>!1))}catch(ah){return"undefined"!=typeof console&&console.warn(ah),(0,Ce.of)(!1)}};return[ga,k.runOutsideAngular(ed)]}return[ga,(0,Ce.of)(!1)]},[y,Cu,h])}collection(o,l){let h;h="string"==typeof o?this.firestore.collection(o):o;const{ref:y,query:I}=pa(h,l),k=this.schedulers.ngZone.run(()=>y);return new Og(k,I,this)}collectionGroup(o,l){const h=l||(I=>I),y=this.firestore.collectionGroup(o);return new wu(h(y),this)}doc(o){let l;l="string"==typeof o?this.firestore.doc(o):o;const h=this.schedulers.ngZone.run(()=>l);return new Df(h,this)}createId(){return this.firestore.collection("_").doc().id}}return a.\u0275fac=function(o){return new(o||a)(w.LFG(ot.Dh),w.LFG(ot.xv,8),w.LFG(Fy,8),w.LFG(bu,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(ce.HU),w.LFG(Ly,8),w.LFG(Ga,8),w.LFG(xl.zQ,8),w.LFG(xl.Qv,8),w.LFG(xl.L6,8),w.LFG(xl._Q,8),w.LFG(xl.rT,8),w.LFG(xl.lh,8),w.LFG(xl.f7,8))},a.\u0275prov=w.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"}),a})(),Vy=(()=>{class a{constructor(){Ny.Z.registerVersion("angularfire",ce.q4.full,"fst-compat")}static enablePersistence(o){return{ngModule:a,providers:[{provide:Fy,useValue:!0},{provide:Ly,useValue:o}]}}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=w.oAB({type:a}),a.\u0275inj=w.cJS({providers:[Pg]}),a})()},8939:(bt,Be,$)=>{"use strict";$.d(Be,{hO:()=>ye,xv:()=>oe,Dh:()=>de,GT:()=>ce,on:()=>J,pX:()=>Ce});var w=$(3018),U=$(7841),ne=$(9126);bt=$.hmd(bt);const Re=["ngOnDestroy"],Ce=(_e,We,Fe,Te={})=>new Proxy(_e,{get:(ot,st)=>Fe.runOutsideAngular(()=>{var Xe;if(_e[st])return(null===(Xe=null==Te?void 0:Te.spy)||void 0===Xe?void 0:Xe.get)&&Te.spy.get(st,_e[st]),_e[st];if(Re.indexOf(st)>-1)return()=>{};const rt=We.toPromise().then(se=>{const lt=se&&se[st];return"function"==typeof lt?lt.bind(se):lt&&lt.then?lt.then(Wt=>Fe.run(()=>Wt)):Fe.run(()=>lt)});return new Proxy(()=>{},{get:(se,lt)=>rt[lt],apply:(se,lt,Wt)=>rt.then(Yt=>{var Ue;const Me=Yt&&Yt(...Wt);return(null===(Ue=null==Te?void 0:Te.spy)||void 0===Ue?void 0:Ue.apply)&&Te.spy.apply(st,Wt,Me),Me})})})}),ce=(_e,We)=>{We.forEach(Fe=>{Object.getOwnPropertyNames(Fe.prototype||Fe).forEach(Te=>{Object.defineProperty(_e.prototype,Te,Object.getOwnPropertyDescriptor(Fe.prototype||Fe,Te))})})};class Se{constructor(We){return We}}const de=new w.OlP("angularfire2.app.options"),oe=new w.OlP("angularfire2.app.name");function J(_e,We,Fe){const ot="object"==typeof Fe&&Fe||{};ot.name=ot.name||"string"==typeof Fe&&Fe||"[DEFAULT]";const Xe=U.Z.apps.filter(rt=>rt&&rt.name===ot.name)[0]||We.runOutsideAngular(()=>U.Z.initializeApp(_e,ot));try{JSON.stringify(_e)!==JSON.stringify(Xe.options)&&Q("error",`${Xe.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(rt){}return new Se(Xe)}const Q=(_e,...We)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[_e](...We)},he={provide:Se,useFactory:J,deps:[de,w.R0b,[new w.FiY,oe]]};let ye=(()=>{class _e{constructor(Fe){U.Z.registerVersion("angularfire",ne.q4.full,"core"),U.Z.registerVersion("angularfire",ne.q4.full,"app-compat"),U.Z.registerVersion("angular",w.q4F.full,Fe.toString())}static initializeApp(Fe,Te){return{ngModule:_e,providers:[{provide:de,useValue:Fe},{provide:oe,useValue:Te}]}}}return _e.\u0275fac=function(Fe){return new(Fe||_e)(w.LFG(w.Lbi))},_e.\u0275mod=w.oAB({type:_e}),_e.\u0275inj=w.cJS({providers:[he]}),_e})()},9126:(bt,Be,$)=>{"use strict";$.d(Be,{q4:()=>J,iC:()=>Me,fc:()=>Yt,HU:()=>rt,cc:()=>ye});var w=$(3018);(0,$(5452).registerVersion)("firebase","9.1.2","app");var Ce=$(7771),ce=$(3637),Se=$(3342),de=$(309),oe=$(3101);bt=$.hmd(bt);const J=new w.GfV("7.0.4"),Q=!!bt.hot,he=(ve,...Ie)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[ve](...Ie)};function ye(ve,Ie,Ye,Et,Qt){const[,ut,dt]=globalThis.\u0275AngularfireInstanceCache.find(Ot=>Ot[0]===ve)||[];if(ut)return function(ve,Ie){try{return ve.toString()===Ie.toString()}catch(Ye){return ve===Ie}}(Qt,dt)||(he("error",`${Ie} was already initialized on the ${Ye} Firebase App with different settings.${Q?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:Qt,was:dt})),ut;{const Ot=Et();return globalThis.\u0275AngularfireInstanceCache.push([ve,Ot,Qt]),Ot}}function ot(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class st{constructor(Ie,Ye=Ce.N){this.zone=Ie,this.delegate=Ye}now(){return this.delegate.now()}schedule(Ie,Ye,Et){const Qt=this.zone;return this.delegate.schedule(function(dt){Qt.runGuarded(()=>{Ie.apply(this,[dt])})},Ye,Et)}}class Xe{constructor(Ie){this.zone=Ie,this.task=null}call(Ie,Ye){const Et=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ot,{},ot,ot)),Ye.pipe((0,Se.b)({next:Et,complete:Et,error:Et})).subscribe(Ie).add(Et)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let rt=(()=>{class ve{constructor(Ye){this.ngZone=Ye,this.outsideAngular=Ye.runOutsideAngular(()=>new st(Zone.current)),this.insideAngular=Ye.run(()=>new st(Zone.current,ce.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return ve.\u0275fac=function(Ye){return new(Ye||ve)(w.LFG(w.R0b))},ve.\u0275prov=w.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})();function se(){const ve=globalThis.\u0275AngularFireScheduler;if(!ve)throw new Error("AngularFireModule has not been provided");return ve}function Yt(ve){return ve.pipe((0,de.QV)(se().outsideAngular))}function Me(ve){return se(),function(ve){return function(Ye){return(Ye=Ye.lift(new Xe(ve.ngZone))).pipe((0,oe.R)(ve.outsideAngular),(0,de.QV)(ve.insideAngular))}}(se())(ve)}},665:(bt,Be,$)=>{"use strict";$.d(Be,{Wl:()=>_e,Fj:()=>ot,qu:()=>Oe,u:()=>zi,sg:()=>Gi,u5:()=>F,nD:()=>Ls,wO:()=>Ci,JJ:()=>Ar,JL:()=>jt,On:()=>Ni,wV:()=>ws,c5:()=>qi,UX:()=>K,Q7:()=>Ts,kI:()=>Wt,_Y:()=>Vr});var w=$(3018),U=$(8583),ne=$(8891),Re=$(9796),Ce=$(8002),ce=$(1555),Se=$(4402);function oe(P,x){return new ne.y(A=>{const W=P.length;if(0===W)return void A.complete();const Ae=new Array(W);let it=0,At=0;for(let Pn=0;Pn<W;Pn++){const Yr=(0,Se.D)(P[Pn]);let Cr=!1;A.add(Yr.subscribe({next:Nn=>{Cr||(Cr=!0,At++),Ae[Pn]=Nn},error:Nn=>A.error(Nn),complete:()=>{it++,(it===W||!Cr)&&(At===W&&A.next(x?x.reduce((Nn,ai,Zi)=>(Nn[ai]=Ae[Zi],Nn),{}):Ae),A.complete())}}))}})}let J=(()=>{class P{constructor(A,W){this._renderer=A,this._elementRef=W,this.onChange=Ae=>{},this.onTouched=()=>{}}setProperty(A,W){this._renderer.setProperty(this._elementRef.nativeElement,A,W)}registerOnTouched(A){this.onTouched=A}registerOnChange(A){this.onChange=A}setDisabledState(A){this.setProperty("disabled",A)}}return P.\u0275fac=function(A){return new(A||P)(w.Y36(w.Qsj),w.Y36(w.SBq))},P.\u0275dir=w.lG2({type:P}),P})(),Q=(()=>{class P extends J{}return P.\u0275fac=function(){let x;return function(W){return(x||(x=w.n5z(P)))(W||P)}}(),P.\u0275dir=w.lG2({type:P,features:[w.qOj]}),P})();const he=new w.OlP("NgValueAccessor"),ye={provide:he,useExisting:(0,w.Gpc)(()=>_e),multi:!0};let _e=(()=>{class P extends Q{writeValue(A){this.setProperty("checked",A)}}return P.\u0275fac=function(){let x;return function(W){return(x||(x=w.n5z(P)))(W||P)}}(),P.\u0275dir=w.lG2({type:P,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(A,W){1&A&&w.NdJ("change",function(it){return W.onChange(it.target.checked)})("blur",function(){return W.onTouched()})},features:[w._Bn([ye]),w.qOj]}),P})();const We={provide:he,useExisting:(0,w.Gpc)(()=>ot),multi:!0},Te=new w.OlP("CompositionEventMode");let ot=(()=>{class P extends J{constructor(A,W,Ae){super(A,W),this._compositionMode=Ae,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const P=(0,U.q)()?(0,U.q)().getUserAgent():"";return/android (\d+)/.test(P.toLowerCase())}())}writeValue(A){this.setProperty("value",null==A?"":A)}_handleInput(A){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(A)}_compositionStart(){this._composing=!0}_compositionEnd(A){this._composing=!1,this._compositionMode&&this.onChange(A)}}return P.\u0275fac=function(A){return new(A||P)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(Te,8))},P.\u0275dir=w.lG2({type:P,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(A,W){1&A&&w.NdJ("input",function(it){return W._handleInput(it.target.value)})("blur",function(){return W.onTouched()})("compositionstart",function(){return W._compositionStart()})("compositionend",function(it){return W._compositionEnd(it.target.value)})},features:[w._Bn([We]),w.qOj]}),P})();function st(P){return null==P||0===P.length}function Xe(P){return null!=P&&"number"==typeof P.length}const rt=new w.OlP("NgValidators"),se=new w.OlP("NgAsyncValidators"),lt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Wt{static min(x){return P=x,x=>{if(st(x.value)||st(P))return null;const A=parseFloat(x.value);return!isNaN(A)&&A<P?{min:{min:P,actual:x.value}}:null};var P}static max(x){return P=x,x=>{if(st(x.value)||st(P))return null;const A=parseFloat(x.value);return!isNaN(A)&&A>P?{max:{max:P,actual:x.value}}:null};var P}static required(x){return Me(x)}static requiredTrue(x){return!0===x.value?null:{required:!0}}static email(x){return st((P=x).value)||lt.test(P.value)?null:{email:!0};var P}static minLength(x){return xe(x)}static maxLength(x){return ve(x)}static pattern(x){return Ie(x)}static nullValidator(x){return null}static compose(x){return Lt(x)}static composeAsync(x){return wt(x)}}function Me(P){return st(P.value)?{required:!0}:null}function xe(P){return x=>st(x.value)||!Xe(x.value)?null:x.value.length<P?{minlength:{requiredLength:P,actualLength:x.value.length}}:null}function ve(P){return x=>Xe(x.value)&&x.value.length>P?{maxlength:{requiredLength:P,actualLength:x.value.length}}:null}function Ie(P){if(!P)return Ye;let x,A;return"string"==typeof P?(A="","^"!==P.charAt(0)&&(A+="^"),A+=P,"$"!==P.charAt(P.length-1)&&(A+="$"),x=new RegExp(A)):(A=P.toString(),x=P),W=>{if(st(W.value))return null;const Ae=W.value;return x.test(Ae)?null:{pattern:{requiredPattern:A,actualValue:Ae}}}}function Ye(P){return null}function Et(P){return null!=P}function Qt(P){const x=(0,w.QGY)(P)?(0,Se.D)(P):P;return(0,w.CqO)(x),x}function ut(P){let x={};return P.forEach(A=>{x=null!=A?Object.assign(Object.assign({},x),A):x}),0===Object.keys(x).length?null:x}function dt(P,x){return x.map(A=>A(P))}function en(P){return P.map(x=>function(P){return!P.validate}(x)?x:A=>x.validate(A))}function Lt(P){if(!P)return null;const x=P.filter(Et);return 0==x.length?null:function(A){return ut(dt(A,x))}}function on(P){return null!=P?Lt(en(P)):null}function wt(P){if(!P)return null;const x=P.filter(Et);return 0==x.length?null:function(A){return function(...P){if(1===P.length){const x=P[0];if((0,Re.k)(x))return oe(x,null);if((0,ce.K)(x)&&Object.getPrototypeOf(x)===Object.prototype){const A=Object.keys(x);return oe(A.map(W=>x[W]),A)}}if("function"==typeof P[P.length-1]){const x=P.pop();return oe(P=1===P.length&&(0,Re.k)(P[0])?P[0]:P,null).pipe((0,Ce.U)(A=>x(...A)))}return oe(P,null)}(dt(A,x).map(Qt)).pipe((0,Ce.U)(ut))}}function pt(P){return null!=P?wt(en(P)):null}function $t(P,x){return null===P?[x]:Array.isArray(P)?[...P,x]:[P,x]}function hn(P){return P._rawValidators}function Fn(P){return P._rawAsyncValidators}function ln(P){return P?Array.isArray(P)?P:[P]:[]}function sr(P,x){return Array.isArray(P)?P.includes(x):P===x}function wr(P,x){const A=ln(x);return ln(P).forEach(Ae=>{sr(A,Ae)||A.push(Ae)}),A}function Dn(P,x){return ln(x).filter(A=>!sr(P,A))}let Tn=(()=>{class P{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(A){this._rawValidators=A||[],this._composedValidatorFn=on(this._rawValidators)}_setAsyncValidators(A){this._rawAsyncValidators=A||[],this._composedAsyncValidatorFn=pt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(A){this._onDestroyCallbacks.push(A)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(A=>A()),this._onDestroyCallbacks=[]}reset(A){this.control&&this.control.reset(A)}hasError(A,W){return!!this.control&&this.control.hasError(A,W)}getError(A,W){return this.control?this.control.getError(A,W):null}}return P.\u0275fac=function(A){return new(A||P)},P.\u0275dir=w.lG2({type:P}),P})(),An=(()=>{class P extends Tn{get formDirective(){return null}get path(){return null}}return P.\u0275fac=function(){let x;return function(W){return(x||(x=w.n5z(P)))(W||P)}}(),P.\u0275dir=w.lG2({type:P,features:[w.qOj]}),P})();class fn extends Tn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class jn{constructor(x){this._cd=x}is(x){var A,W,Ae;return"submitted"===x?!!(null===(A=this._cd)||void 0===A?void 0:A.submitted):!!(null===(Ae=null===(W=this._cd)||void 0===W?void 0:W.control)||void 0===Ae?void 0:Ae[x])}}let Ar=(()=>{class P extends jn{constructor(A){super(A)}}return P.\u0275fac=function(A){return new(A||P)(w.Y36(fn,2))},P.\u0275dir=w.lG2({type:P,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(A,W){2&A&&w.ekj("ng-untouched",W.is("untouched"))("ng-touched",W.is("touched"))("ng-pristine",W.is("pristine"))("ng-dirty",W.is("dirty"))("ng-valid",W.is("valid"))("ng-invalid",W.is("invalid"))("ng-pending",W.is("pending"))},features:[w.qOj]}),P})(),jt=(()=>{class P extends jn{constructor(A){super(A)}}return P.\u0275fac=function(A){return new(A||P)(w.Y36(An,10))},P.\u0275dir=w.lG2({type:P,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(A,W){2&A&&w.ekj("ng-untouched",W.is("untouched"))("ng-touched",W.is("touched"))("ng-pristine",W.is("pristine"))("ng-dirty",W.is("dirty"))("ng-valid",W.is("valid"))("ng-invalid",W.is("invalid"))("ng-pending",W.is("pending"))("ng-submitted",W.is("submitted"))},features:[w.qOj]}),P})();function Ut(P,x){return[...x.path,P]}function pe(P,x){Pe(P,x),x.valueAccessor.writeValue(P.value),function(P,x){x.valueAccessor.registerOnChange(A=>{P._pendingValue=A,P._pendingChange=!0,P._pendingDirty=!0,"change"===P.updateOn&&Ln(P,x)})}(P,x),function(P,x){const A=(W,Ae)=>{x.valueAccessor.writeValue(W),Ae&&x.viewToModelUpdate(W)};P.registerOnChange(A),x._registerOnDestroy(()=>{P._unregisterOnChange(A)})}(P,x),function(P,x){x.valueAccessor.registerOnTouched(()=>{P._pendingTouched=!0,"blur"===P.updateOn&&P._pendingChange&&Ln(P,x),"submit"!==P.updateOn&&P.markAsTouched()})}(P,x),function(P,x){if(x.valueAccessor.setDisabledState){const A=W=>{x.valueAccessor.setDisabledState(W)};P.registerOnDisabledChange(A),x._registerOnDestroy(()=>{P._unregisterOnDisabledChange(A)})}}(P,x)}function fe(P,x,A=!0){const W=()=>{};x.valueAccessor&&(x.valueAccessor.registerOnChange(W),x.valueAccessor.registerOnTouched(W)),Ct(P,x),P&&(x._invokeOnDestroyCallbacks(),P._registerOnCollectionChange(()=>{}))}function ue(P,x){P.forEach(A=>{A.registerOnValidatorChange&&A.registerOnValidatorChange(x)})}function Pe(P,x){const A=hn(P);null!==x.validator?P.setValidators($t(A,x.validator)):"function"==typeof A&&P.setValidators([A]);const W=Fn(P);null!==x.asyncValidator?P.setAsyncValidators($t(W,x.asyncValidator)):"function"==typeof W&&P.setAsyncValidators([W]);const Ae=()=>P.updateValueAndValidity();ue(x._rawValidators,Ae),ue(x._rawAsyncValidators,Ae)}function Ct(P,x){let A=!1;if(null!==P){if(null!==x.validator){const Ae=hn(P);if(Array.isArray(Ae)&&Ae.length>0){const it=Ae.filter(At=>At!==x.validator);it.length!==Ae.length&&(A=!0,P.setValidators(it))}}if(null!==x.asyncValidator){const Ae=Fn(P);if(Array.isArray(Ae)&&Ae.length>0){const it=Ae.filter(At=>At!==x.asyncValidator);it.length!==Ae.length&&(A=!0,P.setAsyncValidators(it))}}}const W=()=>{};return ue(x._rawValidators,W),ue(x._rawAsyncValidators,W),A}function Ln(P,x){P._pendingDirty&&P.markAsDirty(),P.setValue(P._pendingValue,{emitModelToViewChange:!1}),x.viewToModelUpdate(P._pendingValue),P._pendingChange=!1}function ks(P,x){if(!P.hasOwnProperty("model"))return!1;const A=P.model;return!!A.isFirstChange()||!Object.is(x,A.currentValue)}function ss(P,x){if(!x)return null;let A,W,Ae;return Array.isArray(x),x.forEach(it=>{it.constructor===ot?A=it:function(P){return Object.getPrototypeOf(P.constructor)===Q}(it)?W=it:Ae=it}),Ae||W||A||null}function os(P,x){const A=P.indexOf(x);A>-1&&P.splice(A,1)}const Ei="VALID",dr="INVALID",hr="PENDING",Ui="DISABLED";function Mt(P){return(Zs(P)?P.validators:P)||null}function Sr(P){return Array.isArray(P)?on(P):P||null}function Bi(P,x){return(Zs(x)?x.asyncValidators:P)||null}function Qn(P){return Array.isArray(P)?pt(P):P||null}function Zs(P){return null!=P&&!Array.isArray(P)&&"object"==typeof P}class gn{constructor(x,A){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=x,this._rawAsyncValidators=A,this._composedValidatorFn=Sr(this._rawValidators),this._composedAsyncValidatorFn=Qn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(x){this._rawValidators=this._composedValidatorFn=x}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(x){this._rawAsyncValidators=this._composedAsyncValidatorFn=x}get parent(){return this._parent}get valid(){return this.status===Ei}get invalid(){return this.status===dr}get pending(){return this.status==hr}get disabled(){return this.status===Ui}get enabled(){return this.status!==Ui}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(x){this._rawValidators=x,this._composedValidatorFn=Sr(x)}setAsyncValidators(x){this._rawAsyncValidators=x,this._composedAsyncValidatorFn=Qn(x)}addValidators(x){this.setValidators(wr(x,this._rawValidators))}addAsyncValidators(x){this.setAsyncValidators(wr(x,this._rawAsyncValidators))}removeValidators(x){this.setValidators(Dn(x,this._rawValidators))}removeAsyncValidators(x){this.setAsyncValidators(Dn(x,this._rawAsyncValidators))}hasValidator(x){return sr(this._rawValidators,x)}hasAsyncValidator(x){return sr(this._rawAsyncValidators,x)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(x={}){this.touched=!0,this._parent&&!x.onlySelf&&this._parent.markAsTouched(x)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(x=>x.markAllAsTouched())}markAsUntouched(x={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(A=>{A.markAsUntouched({onlySelf:!0})}),this._parent&&!x.onlySelf&&this._parent._updateTouched(x)}markAsDirty(x={}){this.pristine=!1,this._parent&&!x.onlySelf&&this._parent.markAsDirty(x)}markAsPristine(x={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(A=>{A.markAsPristine({onlySelf:!0})}),this._parent&&!x.onlySelf&&this._parent._updatePristine(x)}markAsPending(x={}){this.status=hr,!1!==x.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!x.onlySelf&&this._parent.markAsPending(x)}disable(x={}){const A=this._parentMarkedDirty(x.onlySelf);this.status=Ui,this.errors=null,this._forEachChild(W=>{W.disable(Object.assign(Object.assign({},x),{onlySelf:!0}))}),this._updateValue(),!1!==x.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},x),{skipPristineCheck:A})),this._onDisabledChange.forEach(W=>W(!0))}enable(x={}){const A=this._parentMarkedDirty(x.onlySelf);this.status=Ei,this._forEachChild(W=>{W.enable(Object.assign(Object.assign({},x),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:x.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},x),{skipPristineCheck:A})),this._onDisabledChange.forEach(W=>W(!1))}_updateAncestors(x){this._parent&&!x.onlySelf&&(this._parent.updateValueAndValidity(x),x.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(x){this._parent=x}updateValueAndValidity(x={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ei||this.status===hr)&&this._runAsyncValidator(x.emitEvent)),!1!==x.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!x.onlySelf&&this._parent.updateValueAndValidity(x)}_updateTreeValidity(x={emitEvent:!0}){this._forEachChild(A=>A._updateTreeValidity(x)),this.updateValueAndValidity({onlySelf:!0,emitEvent:x.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ui:Ei}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(x){if(this.asyncValidator){this.status=hr,this._hasOwnPendingAsyncValidator=!0;const A=Qt(this.asyncValidator(this));this._asyncValidationSubscription=A.subscribe(W=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(W,{emitEvent:x})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(x,A={}){this.errors=x,this._updateControlsErrors(!1!==A.emitEvent)}get(x){return function(P,x,A){if(null==x||(Array.isArray(x)||(x=x.split(".")),Array.isArray(x)&&0===x.length))return null;let W=P;return x.forEach(Ae=>{W=W instanceof xt?W.controls.hasOwnProperty(Ae)?W.controls[Ae]:null:W instanceof zt&&W.at(Ae)||null}),W}(this,x)}getError(x,A){const W=A?this.get(A):this;return W&&W.errors?W.errors[x]:null}hasError(x,A){return!!this.getError(x,A)}get root(){let x=this;for(;x._parent;)x=x._parent;return x}_updateControlsErrors(x){this.status=this._calculateStatus(),x&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(x)}_initObservables(){this.valueChanges=new w.vpe,this.statusChanges=new w.vpe}_calculateStatus(){return this._allControlsDisabled()?Ui:this.errors?dr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hr)?hr:this._anyControlsHaveStatus(dr)?dr:Ei}_anyControlsHaveStatus(x){return this._anyControls(A=>A.status===x)}_anyControlsDirty(){return this._anyControls(x=>x.dirty)}_anyControlsTouched(){return this._anyControls(x=>x.touched)}_updatePristine(x={}){this.pristine=!this._anyControlsDirty(),this._parent&&!x.onlySelf&&this._parent._updatePristine(x)}_updateTouched(x={}){this.touched=this._anyControlsTouched(),this._parent&&!x.onlySelf&&this._parent._updateTouched(x)}_isBoxedValue(x){return"object"==typeof x&&null!==x&&2===Object.keys(x).length&&"value"in x&&"disabled"in x}_registerOnCollectionChange(x){this._onCollectionChange=x}_setUpdateStrategy(x){Zs(x)&&null!=x.updateOn&&(this._updateOn=x.updateOn)}_parentMarkedDirty(x){return!x&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ht extends gn{constructor(x=null,A,W){super(Mt(A),Bi(W,A)),this._onChange=[],this._applyFormState(x),this._setUpdateStrategy(A),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(x,A={}){this.value=this._pendingValue=x,this._onChange.length&&!1!==A.emitModelToViewChange&&this._onChange.forEach(W=>W(this.value,!1!==A.emitViewToModelChange)),this.updateValueAndValidity(A)}patchValue(x,A={}){this.setValue(x,A)}reset(x=null,A={}){this._applyFormState(x),this.markAsPristine(A),this.markAsUntouched(A),this.setValue(this.value,A),this._pendingChange=!1}_updateValue(){}_anyControls(x){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(x){this._onChange.push(x)}_unregisterOnChange(x){os(this._onChange,x)}registerOnDisabledChange(x){this._onDisabledChange.push(x)}_unregisterOnDisabledChange(x){os(this._onDisabledChange,x)}_forEachChild(x){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(x){this._isBoxedValue(x)?(this.value=this._pendingValue=x.value,x.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=x}}class xt extends gn{constructor(x,A,W){super(Mt(A),Bi(W,A)),this.controls=x,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(x,A){return this.controls[x]?this.controls[x]:(this.controls[x]=A,A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange),A)}addControl(x,A,W={}){this.registerControl(x,A),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}removeControl(x,A={}){this.controls[x]&&this.controls[x]._registerOnCollectionChange(()=>{}),delete this.controls[x],this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}setControl(x,A,W={}){this.controls[x]&&this.controls[x]._registerOnCollectionChange(()=>{}),delete this.controls[x],A&&this.registerControl(x,A),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}contains(x){return this.controls.hasOwnProperty(x)&&this.controls[x].enabled}setValue(x,A={}){this._checkAllValuesPresent(x),Object.keys(x).forEach(W=>{this._throwIfControlMissing(W),this.controls[W].setValue(x[W],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(x,A={}){null!=x&&(Object.keys(x).forEach(W=>{this.controls[W]&&this.controls[W].patchValue(x[W],{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(x={},A={}){this._forEachChild((W,Ae)=>{W.reset(x[Ae],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this._reduceChildren({},(x,A,W)=>(x[W]=A instanceof ht?A.value:A.getRawValue(),x))}_syncPendingControls(){let x=this._reduceChildren(!1,(A,W)=>!!W._syncPendingControls()||A);return x&&this.updateValueAndValidity({onlySelf:!0}),x}_throwIfControlMissing(x){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[x])throw new Error(`Cannot find form control with name: ${x}.`)}_forEachChild(x){Object.keys(this.controls).forEach(A=>{const W=this.controls[A];W&&x(W,A)})}_setUpControls(){this._forEachChild(x=>{x.setParent(this),x._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(x){for(const A of Object.keys(this.controls)){const W=this.controls[A];if(this.contains(A)&&x(W))return!0}return!1}_reduceValue(){return this._reduceChildren({},(x,A,W)=>((A.enabled||this.disabled)&&(x[W]=A.value),x))}_reduceChildren(x,A){let W=x;return this._forEachChild((Ae,it)=>{W=A(W,Ae,it)}),W}_allControlsDisabled(){for(const x of Object.keys(this.controls))if(this.controls[x].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(x){this._forEachChild((A,W)=>{if(void 0===x[W])throw new Error(`Must supply a value for form control with name: '${W}'.`)})}}class zt extends gn{constructor(x,A,W){super(Mt(A),Bi(W,A)),this.controls=x,this._initObservables(),this._setUpdateStrategy(A),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(x){return this.controls[x]}push(x,A={}){this.controls.push(x),this._registerControl(x),this.updateValueAndValidity({emitEvent:A.emitEvent}),this._onCollectionChange()}insert(x,A,W={}){this.controls.splice(x,0,A),this._registerControl(A),this.updateValueAndValidity({emitEvent:W.emitEvent})}removeAt(x,A={}){this.controls[x]&&this.controls[x]._registerOnCollectionChange(()=>{}),this.controls.splice(x,1),this.updateValueAndValidity({emitEvent:A.emitEvent})}setControl(x,A,W={}){this.controls[x]&&this.controls[x]._registerOnCollectionChange(()=>{}),this.controls.splice(x,1),A&&(this.controls.splice(x,0,A),this._registerControl(A)),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(x,A={}){this._checkAllValuesPresent(x),x.forEach((W,Ae)=>{this._throwIfControlMissing(Ae),this.at(Ae).setValue(W,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A)}patchValue(x,A={}){null!=x&&(x.forEach((W,Ae)=>{this.at(Ae)&&this.at(Ae).patchValue(W,{onlySelf:!0,emitEvent:A.emitEvent})}),this.updateValueAndValidity(A))}reset(x=[],A={}){this._forEachChild((W,Ae)=>{W.reset(x[Ae],{onlySelf:!0,emitEvent:A.emitEvent})}),this._updatePristine(A),this._updateTouched(A),this.updateValueAndValidity(A)}getRawValue(){return this.controls.map(x=>x instanceof ht?x.value:x.getRawValue())}clear(x={}){this.controls.length<1||(this._forEachChild(A=>A._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:x.emitEvent}))}_syncPendingControls(){let x=this.controls.reduce((A,W)=>!!W._syncPendingControls()||A,!1);return x&&this.updateValueAndValidity({onlySelf:!0}),x}_throwIfControlMissing(x){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(x))throw new Error(`Cannot find form control at index ${x}`)}_forEachChild(x){this.controls.forEach((A,W)=>{x(A,W)})}_updateValue(){this.value=this.controls.filter(x=>x.enabled||this.disabled).map(x=>x.value)}_anyControls(x){return this.controls.some(A=>A.enabled&&x(A))}_setUpControls(){this._forEachChild(x=>this._registerControl(x))}_checkAllValuesPresent(x){this._forEachChild((A,W)=>{if(void 0===x[W])throw new Error(`Must supply a value for form control at index: ${W}.`)})}_allControlsDisabled(){for(const x of this.controls)if(x.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(x){x.setParent(this),x._registerOnCollectionChange(this._onCollectionChange)}}const Lr={provide:fn,useExisting:(0,w.Gpc)(()=>Ni)},xi=(()=>Promise.resolve(null))();let Ni=(()=>{class P extends fn{constructor(A,W,Ae,it){super(),this.control=new ht,this._registered=!1,this.update=new w.vpe,this._parent=A,this._setValidators(W),this._setAsyncValidators(Ae),this.valueAccessor=ss(0,it)}ngOnChanges(A){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in A&&this._updateDisabled(A),ks(A,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Ut(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){pe(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(A){xi.then(()=>{this.control.setValue(A,{emitViewToModelChange:!1})})}_updateDisabled(A){const W=A.isDisabled.currentValue,Ae=""===W||W&&"false"!==W;xi.then(()=>{Ae&&!this.control.disabled?this.control.disable():!Ae&&this.control.disabled&&this.control.enable()})}}return P.\u0275fac=function(A){return new(A||P)(w.Y36(An,9),w.Y36(rt,10),w.Y36(se,10),w.Y36(he,10))},P.\u0275dir=w.lG2({type:P,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[w._Bn([Lr]),w.qOj,w.TTD]}),P})(),Vr=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275dir=w.lG2({type:P,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),P})();const Rn={provide:he,useExisting:(0,w.Gpc)(()=>ws),multi:!0};let ws=(()=>{class P extends Q{writeValue(A){this.setProperty("value",null==A?"":A)}registerOnChange(A){this.onChange=W=>{A(""==W?null:parseFloat(W))}}}return P.\u0275fac=function(){let x;return function(W){return(x||(x=w.n5z(P)))(W||P)}}(),P.\u0275dir=w.lG2({type:P,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(A,W){1&A&&w.NdJ("input",function(it){return W.onChange(it.target.value)})("blur",function(){return W.onTouched()})},features:[w._Bn([Rn]),w.qOj]}),P})(),hi=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275mod=w.oAB({type:P}),P.\u0275inj=w.cJS({}),P})();const Ur=new w.OlP("NgModelWithFormControlWarning"),qr={provide:An,useExisting:(0,w.Gpc)(()=>Gi)};let Gi=(()=>{class P extends An{constructor(A,W){super(),this.validators=A,this.asyncValidators=W,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new w.vpe,this._setValidators(A),this._setAsyncValidators(W)}ngOnChanges(A){this._checkFormPresent(),A.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ct(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(A){const W=this.form.get(A.path);return pe(W,A),W.updateValueAndValidity({emitEvent:!1}),this.directives.push(A),W}getControl(A){return this.form.get(A.path)}removeControl(A){fe(A.control||null,A,!1),os(this.directives,A)}addFormGroup(A){this._setUpFormContainer(A)}removeFormGroup(A){this._cleanUpFormContainer(A)}getFormGroup(A){return this.form.get(A.path)}addFormArray(A){this._setUpFormContainer(A)}removeFormArray(A){this._cleanUpFormContainer(A)}getFormArray(A){return this.form.get(A.path)}updateModel(A,W){this.form.get(A.path).setValue(W)}onSubmit(A){return this.submitted=!0,function(P,x){P._syncPendingControls(),x.forEach(A=>{const W=A.control;"submit"===W.updateOn&&W._pendingChange&&(A.viewToModelUpdate(W._pendingValue),W._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(A),!1}onReset(){this.resetForm()}resetForm(A){this.form.reset(A),this.submitted=!1}_updateDomValue(){this.directives.forEach(A=>{const W=A.control,Ae=this.form.get(A.path);W!==Ae&&(fe(W||null,A),Ae instanceof ht&&(pe(Ae,A),A.control=Ae))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(A){const W=this.form.get(A.path);(function(P,x){Pe(P,x)})(W,A),W.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(A){if(this.form){const W=this.form.get(A.path);W&&function(P,x){return Ct(P,x)}(W,A)&&W.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Pe(this.form,this),this._oldForm&&Ct(this._oldForm,this)}_checkFormPresent(){}}return P.\u0275fac=function(A){return new(A||P)(w.Y36(rt,10),w.Y36(se,10))},P.\u0275dir=w.lG2({type:P,selectors:[["","formGroup",""]],hostBindings:function(A,W){1&A&&w.NdJ("submit",function(it){return W.onSubmit(it)})("reset",function(){return W.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([qr]),w.qOj,w.TTD]}),P})();const Cs={provide:fn,useExisting:(0,w.Gpc)(()=>zi)};let zi=(()=>{class P extends fn{constructor(A,W,Ae,it,At){super(),this._ngModelWarningConfig=At,this._added=!1,this.update=new w.vpe,this._ngModelWarningSent=!1,this._parent=A,this._setValidators(W),this._setAsyncValidators(Ae),this.valueAccessor=ss(0,it)}set isDisabled(A){}ngOnChanges(A){this._added||this._setUpControl(),ks(A,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(A){this.viewModel=A,this.update.emit(A)}get path(){return Ut(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return P.\u0275fac=function(A){return new(A||P)(w.Y36(An,13),w.Y36(rt,10),w.Y36(se,10),w.Y36(he,10),w.Y36(Ur,8))},P.\u0275dir=w.lG2({type:P,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[w._Bn([Cs]),w.qOj,w.TTD]}),P._ngModelWarningSentOnce=!1,P})();function xr(P){return"number"==typeof P?P:parseInt(P,10)}const Lo={provide:rt,useExisting:(0,w.Gpc)(()=>Ts),multi:!0};let Ts=(()=>{class P{constructor(){this._required=!1}get required(){return this._required}set required(A){this._required=null!=A&&!1!==A&&"false"!=`${A}`,this._onChange&&this._onChange()}validate(A){return this.required?Me(A):null}registerOnValidatorChange(A){this._onChange=A}}return P.\u0275fac=function(A){return new(A||P)},P.\u0275dir=w.lG2({type:P,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(A,W){2&A&&w.uIk("required",W.required?"":null)},inputs:{required:"required"},features:[w._Bn([Lo])]}),P})();const to={provide:rt,useExisting:(0,w.Gpc)(()=>Ci),multi:!0};let Ci=(()=>{class P{constructor(){this._validator=Ye}ngOnChanges(A){"minlength"in A&&(this._createValidator(),this._onChange&&this._onChange())}validate(A){return this.enabled()?this._validator(A):null}registerOnValidatorChange(A){this._onChange=A}_createValidator(){this._validator=this.enabled()?xe(xr(this.minlength)):Ye}enabled(){return null!=this.minlength}}return P.\u0275fac=function(A){return new(A||P)},P.\u0275dir=w.lG2({type:P,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(A,W){2&A&&w.uIk("minlength",W.enabled()?W.minlength:null)},inputs:{minlength:"minlength"},features:[w._Bn([to]),w.TTD]}),P})();const Zr={provide:rt,useExisting:(0,w.Gpc)(()=>Ls),multi:!0};let Ls=(()=>{class P{constructor(){this._validator=Ye}ngOnChanges(A){"maxlength"in A&&(this._createValidator(),this._onChange&&this._onChange())}validate(A){return this.enabled()?this._validator(A):null}registerOnValidatorChange(A){this._onChange=A}_createValidator(){this._validator=this.enabled()?ve(xr(this.maxlength)):Ye}enabled(){return null!=this.maxlength}}return P.\u0275fac=function(A){return new(A||P)},P.\u0275dir=w.lG2({type:P,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(A,W){2&A&&w.uIk("maxlength",W.enabled()?W.maxlength:null)},inputs:{maxlength:"maxlength"},features:[w._Bn([Zr]),w.TTD]}),P})();const si={provide:rt,useExisting:(0,w.Gpc)(()=>qi),multi:!0};let qi=(()=>{class P{constructor(){this._validator=Ye}ngOnChanges(A){"pattern"in A&&(this._createValidator(),this._onChange&&this._onChange())}validate(A){return this._validator(A)}registerOnValidatorChange(A){this._onChange=A}_createValidator(){this._validator=Ie(this.pattern)}}return P.\u0275fac=function(A){return new(A||P)},P.\u0275dir=w.lG2({type:P,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(A,W){2&A&&w.uIk("pattern",W.pattern?W.pattern:null)},inputs:{pattern:"pattern"},features:[w._Bn([si]),w.TTD]}),P})(),z=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275mod=w.oAB({type:P}),P.\u0275inj=w.cJS({imports:[[hi]]}),P})(),F=(()=>{class P{}return P.\u0275fac=function(A){return new(A||P)},P.\u0275mod=w.oAB({type:P}),P.\u0275inj=w.cJS({imports:[z]}),P})(),K=(()=>{class P{static withConfig(A){return{ngModule:P,providers:[{provide:Ur,useValue:A.warnOnNgModelWithFormControl}]}}}return P.\u0275fac=function(A){return new(A||P)},P.\u0275mod=w.oAB({type:P}),P.\u0275inj=w.cJS({imports:[z]}),P})(),Oe=(()=>{class P{group(A,W=null){const Ae=this._reduceControls(A);let Pn,it=null,At=null;return null!=W&&(function(P){return void 0!==P.asyncValidators||void 0!==P.validators||void 0!==P.updateOn}(W)?(it=null!=W.validators?W.validators:null,At=null!=W.asyncValidators?W.asyncValidators:null,Pn=null!=W.updateOn?W.updateOn:void 0):(it=null!=W.validator?W.validator:null,At=null!=W.asyncValidator?W.asyncValidator:null)),new xt(Ae,{asyncValidators:At,updateOn:Pn,validators:it})}control(A,W,Ae){return new ht(A,W,Ae)}array(A,W,Ae){const it=A.map(At=>this._createControl(At));return new zt(it,W,Ae)}_reduceControls(A){const W={};return Object.keys(A).forEach(Ae=>{W[Ae]=this._createControl(A[Ae])}),W}_createControl(A){return A instanceof ht||A instanceof xt||A instanceof zt?A:Array.isArray(A)?this.control(A[0],A.length>1?A[1]:null,A.length>2?A[2]:null):this.control(A)}}return P.\u0275fac=function(A){return new(A||P)},P.\u0275prov=(0,w.Yz7)({factory:function(){return new P},token:P,providedIn:K}),P})()},6575:(bt,Be,$)=>{"use strict";$.d(Be,{F0:()=>gi,yS:()=>Bs,Bz:()=>uo,lC:()=>oo});var w=$(8583),U=$(3018),ne=$(9765),Re=$(7971);class Ce extends ne.xQ{constructor(b){super(),this._value=b}get value(){return this.getValue()}_subscribe(b){const E=super._subscribe(b);return E&&!E.closed&&b.next(this._value),E}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Re.N;return this._value}next(b){super.next(this._value=b)}}var ce=$(4869),Se=$(9796),de=$(7393);class oe extends de.L{notifyNext(b,E,O,V,q){this.destination.next(E)}notifyError(b,E){this.destination.error(b)}notifyComplete(b){this.destination.complete()}}class J extends de.L{constructor(b,E,O){super(),this.parent=b,this.outerValue=E,this.outerIndex=O,this.index=0}_next(b){this.parent.notifyNext(this.outerValue,b,this.outerIndex,this.index++,this)}_error(b){this.parent.notifyError(b,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Q=$(7444),he=$(8891);function ye(R,b,E,O,V=new J(R,E,O)){if(!V.closed)return b instanceof he.y?b.subscribe(V):(0,Q.s)(b)(V)}var _e=$(6693);const We={};class Te{constructor(b){this.resultSelector=b}call(b,E){return E.subscribe(new ot(b,this.resultSelector))}}class ot extends oe{constructor(b,E){super(b),this.resultSelector=E,this.active=0,this.values=[],this.observables=[]}_next(b){this.values.push(We),this.observables.push(b)}_complete(){const b=this.observables,E=b.length;if(0===E)this.destination.complete();else{this.active=E,this.toRespond=E;for(let O=0;O<E;O++)this.add(ye(this,b[O],void 0,O))}}notifyComplete(b){0==(this.active-=1)&&this.destination.complete()}notifyNext(b,E,O){const V=this.values,ie=this.toRespond?V[O]===We?--this.toRespond:this.toRespond:0;V[O]=E,0===ie&&(this.resultSelector?this._tryResultSelector(V):this.destination.next(V.slice()))}_tryResultSelector(b){let E;try{E=this.resultSelector.apply(this,b)}catch(O){return void this.destination.error(O)}this.destination.next(E)}}var st=$(4402),Xe=$(9193);function rt(R){return new he.y(b=>{let E;try{E=R()}catch(V){return void b.error(V)}return(E?(0,st.D)(E):(0,Xe.c)()).subscribe(b)})}var se=$(5917),lt=$(3410),Wt=$(8071),Yt=$(2441),Ue=$(5345);function Me(R){return function(E){const O=new Le(R),V=E.lift(O);return O.caught=V}}class Le{constructor(b){this.selector=b}call(b,E){return E.subscribe(new ge(b,this.selector,this.caught))}}class ge extends Ue.Ds{constructor(b,E,O){super(b),this.selector=E,this.caught=O}error(b){if(!this.isStopped){let E;try{E=this.selector(b,this.caught)}catch(q){return void super.error(q)}this._unsubscribeAndRecycle();const O=new Ue.IY(this);this.add(O);const V=(0,Ue.ft)(E,O);V!==O&&this.add(V)}}}var xe=$(9773);function ve(R,b){return(0,xe.zg)(R,b,1)}var Ie=$(5435),Ye=$(7108);function Et(R){return function(E){return 0===R?(0,Xe.c)():E.lift(new Qt(R))}}class Qt{constructor(b){if(this.total=b,this.total<0)throw new Ye.W}call(b,E){return E.subscribe(new ut(b,this.total))}}class ut extends de.L{constructor(b,E){super(b),this.total=E,this.ring=new Array,this.count=0}_next(b){const E=this.ring,O=this.total,V=this.count++;E.length<O?E.push(b):E[V%O]=b}_complete(){const b=this.destination;let E=this.count;if(E>0){const O=this.count>=this.total?this.total:this.count,V=this.ring;for(let q=0;q<O;q++){const ie=E++%O;b.next(V[ie])}}b.complete()}}var dt=$(4635),Ot=$(5242),en=$(4487),on=$(5319);class pt{constructor(b){this.callback=b}call(b,E){return E.subscribe(new $t(b,this.callback))}}class $t extends de.L{constructor(b,E){super(b),this.add(new on.w(E))}}var hn=$(8002),Fn=$(3190),ln=$(5257),sr=$(9761),wr=$(2145),Dn=$(8049),Tn=$(3342),An=$(1307),fn=$(3282);class jn{constructor(b,E){this.id=b,this.url=E}}class Pt extends jn{constructor(b,E,O="imperative",V=null){super(b,E),this.navigationTrigger=O,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sn extends jn{constructor(b,E,O){super(b,E),this.urlAfterRedirects=O}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ar extends jn{constructor(b,E,O){super(b,E),this.reason=O}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jt extends jn{constructor(b,E,O){super(b,E),this.error=O}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Je extends jn{constructor(b,E,O,V){super(b,E),this.urlAfterRedirects=O,this.state=V}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class In extends jn{constructor(b,E,O,V){super(b,E),this.urlAfterRedirects=O,this.state=V}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bn extends jn{constructor(b,E,O,V,q){super(b,E),this.urlAfterRedirects=O,this.state=V,this.shouldActivate=q}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Mn extends jn{constructor(b,E,O,V){super(b,E),this.urlAfterRedirects=O,this.state=V}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class En extends jn{constructor(b,E,O,V){super(b,E),this.urlAfterRedirects=O,this.state=V}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rt{constructor(b){this.route=b}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Tt{constructor(b){this.route=b}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $n{constructor(b){this.snapshot=b}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ys{constructor(b){this.snapshot=b}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class is{constructor(b){this.snapshot=b}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xn{constructor(b){this.snapshot=b}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fr{constructor(b,E,O){this.routerEvent=b,this.position=E,this.anchor=O}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ut="primary";class pe{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const E=this.params[b];return Array.isArray(E)?E[0]:E}return null}getAll(b){if(this.has(b)){const E=this.params[b];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function fe(R){return new pe(R)}const ue="ngNavigationCancelingError";function ze(R){const b=Error("NavigationCancelingError: "+R);return b[ue]=!0,b}function Ct(R,b,E){const O=E.path.split("/");if(O.length>R.length||"full"===E.pathMatch&&(b.hasChildren()||O.length<R.length))return null;const V={};for(let q=0;q<O.length;q++){const ie=O[q],me=R[q];if(ie.startsWith(":"))V[ie.substring(1)]=me;else if(ie!==me.path)return null}return{consumed:R.slice(0,O.length),posParams:V}}function sn(R,b){const E=R?Object.keys(R):void 0,O=b?Object.keys(b):void 0;if(!E||!O||E.length!=O.length)return!1;let V;for(let q=0;q<E.length;q++)if(V=E[q],!Ln(R[V],b[V]))return!1;return!0}function Ln(R,b){if(Array.isArray(R)&&Array.isArray(b)){if(R.length!==b.length)return!1;const E=[...R].sort(),O=[...b].sort();return E.every((V,q)=>O[q]===V)}return R===b}function tn(R){return Array.prototype.concat.apply([],R)}function cr(R){return R.length>0?R[R.length-1]:null}function Jt(R,b){for(const E in R)R.hasOwnProperty(E)&&b(R[E],E)}function Vn(R){return(0,U.CqO)(R)?R:(0,U.QGY)(R)?(0,st.D)(Promise.resolve(R)):(0,se.of)(R)}const _s={exact:function Es(R,b,E){if(!Qn(R.segments,b.segments)||!Ui(R.segments,b.segments,E)||R.numberOfChildren!==b.numberOfChildren)return!1;for(const O in b.children)if(!R.children[O]||!Es(R.children[O],b.children[O],E))return!1;return!0},subset:dr},vs={exact:function(R,b){return sn(R,b)},subset:function(R,b){return Object.keys(b).length<=Object.keys(R).length&&Object.keys(b).every(E=>Ln(R[E],b[E]))},ignored:()=>!0};function ss(R,b,E){return _s[E.paths](R.root,b.root,E.matrixParams)&&vs[E.queryParams](R.queryParams,b.queryParams)&&!("exact"===E.fragment&&R.fragment!==b.fragment)}function dr(R,b,E){return hr(R,b,b.segments,E)}function hr(R,b,E,O){if(R.segments.length>E.length){const V=R.segments.slice(0,E.length);return!(!Qn(V,E)||b.hasChildren()||!Ui(V,E,O))}if(R.segments.length===E.length){if(!Qn(R.segments,E)||!Ui(R.segments,E,O))return!1;for(const V in b.children)if(!R.children[V]||!dr(R.children[V],b.children[V],O))return!1;return!0}{const V=E.slice(0,R.segments.length),q=E.slice(R.segments.length);return!!(Qn(R.segments,V)&&Ui(R.segments,V,O)&&R.children[Ut])&&hr(R.children[Ut],b,q,O)}}function Ui(R,b,E){return b.every((O,V)=>vs[E](R[V].parameters,O.parameters))}class wi{constructor(b,E,O){this.root=b,this.queryParams=E,this.fragment=O}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fe(this.queryParams)),this._queryParamMap}toString(){return xt.serialize(this)}}class Mt{constructor(b,E){this.segments=b,this.children=E,this.parent=null,Jt(E,(O,V)=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zt(this)}}class Sr{constructor(b,E){this.path=b,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=fe(this.parameters)),this._parameterMap}toString(){return qt(this)}}function Qn(R,b){return R.length===b.length&&R.every((E,O)=>E.path===b[O].path)}class gn{}class ht{parse(b){const E=new Rn(b);return new wi(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(b){var R;return`${`/${or(b.root,!0)}`}${function(R){const b=Object.keys(R).map(E=>{const O=R[E];return Array.isArray(O)?O.map(V=>`${On(E)}=${On(V)}`).join("&"):`${On(E)}=${On(O)}`}).filter(E=>!!E);return b.length?`?${b.join("&")}`:""}(b.queryParams)}${"string"==typeof b.fragment?`#${R=b.fragment,encodeURI(R)}`:""}`}}const xt=new ht;function zt(R){return R.segments.map(b=>qt(b)).join("/")}function or(R,b){if(!R.hasChildren())return zt(R);if(b){const E=R.children[Ut]?or(R.children[Ut],!1):"",O=[];return Jt(R.children,(V,q)=>{q!==Ut&&O.push(`${q}:${or(V,!1)}`)}),O.length>0?`${E}(${O.join("//")})`:E}{const E=function(R,b){let E=[];return Jt(R.children,(O,V)=>{V===Ut&&(E=E.concat(b(O,V)))}),Jt(R.children,(O,V)=>{V!==Ut&&(E=E.concat(b(O,V)))}),E}(R,(O,V)=>V===Ut?[or(R.children[Ut],!1)]:[`${V}:${or(O,!1)}`]);return 1===Object.keys(R.children).length&&null!=R.children[Ut]?`${zt(R)}/${E[0]}`:`${zt(R)}/(${E.join("//")})`}}function Ri(R){return encodeURIComponent(R).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function On(R){return Ri(R).replace(/%3B/gi,";")}function xn(R){return Ri(R).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ji(R){return decodeURIComponent(R)}function $i(R){return ji(R.replace(/\+/g,"%20"))}function qt(R){return`${xn(R.path)}${function(R){return Object.keys(R).map(b=>`;${xn(b)}=${xn(R[b])}`).join("")}(R.parameters)}`}const us=/^[^\/()?;=#]+/;function Lr(R){const b=R.match(us);return b?b[0]:""}const Rr=/^[^=?&#]+/,Ni=/^[^?&#]+/;class Rn{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mt([],{}):new Mt([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(b.length>0||Object.keys(E).length>0)&&(O[Ut]=new Mt(b,E)),O}parseSegment(){const b=Lr(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(b),new Sr(ji(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const E=Lr(this.remaining);if(!E)return;this.capture(E);let O="";if(this.consumeOptional("=")){const V=Lr(this.remaining);V&&(O=V,this.capture(O))}b[ji(E)]=ji(O)}parseQueryParam(b){const E=function(R){const b=R.match(Rr);return b?b[0]:""}(this.remaining);if(!E)return;this.capture(E);let O="";if(this.consumeOptional("=")){const ie=function(R){const b=R.match(Ni);return b?b[0]:""}(this.remaining);ie&&(O=ie,this.capture(O))}const V=$i(E),q=$i(O);if(b.hasOwnProperty(V)){let ie=b[V];Array.isArray(ie)||(ie=[ie],b[V]=ie),ie.push(q)}else b[V]=q}parseParens(b){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=Lr(this.remaining),V=this.remaining[O.length];if("/"!==V&&")"!==V&&";"!==V)throw new Error(`Cannot parse url '${this.url}'`);let q;O.indexOf(":")>-1?(q=O.substr(0,O.indexOf(":")),this.capture(q),this.capture(":")):b&&(q=Ut);const ie=this.parseChildren();E[q]=1===Object.keys(ie).length?ie[Ut]:new Mt([],ie),this.consumeOptional("//")}return E}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new Error(`Expected "${b}".`)}}class ws{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const E=this.pathFromRoot(b);return E.length>1?E[E.length-2]:null}children(b){const E=Hi(b,this._root);return E?E.children.map(O=>O.value):[]}firstChild(b){const E=Hi(b,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(b){const E=bs(b,this._root);return E.length<2?[]:E[E.length-2].children.map(V=>V.value).filter(V=>V!==b)}pathFromRoot(b){return bs(b,this._root).map(E=>E.value)}}function Hi(R,b){if(R===b.value)return b;for(const E of b.children){const O=Hi(R,E);if(O)return O}return null}function bs(R,b){if(R===b.value)return[b];for(const E of b.children){const O=bs(R,E);if(O.length)return O.unshift(b),O}return[]}class hi{constructor(b,E){this.value=b,this.children=E}toString(){return`TreeNode(${this.value})`}}function bi(R){const b={};return R&&R.children.forEach(E=>b[E.value.outlet]=E),b}class Mi extends ws{constructor(b,E){super(b),this.snapshot=E,fr(this,b)}toString(){return this.snapshot.toString()}}function er(R,b){const E=function(R,b){const ie=new qr([],{},{},"",{},Ut,b,null,R.root,-1,{});return new Gi("",new hi(ie,[]))}(R,b),O=new Ce([new Sr("",{})]),V=new Ce({}),q=new Ce({}),ie=new Ce({}),me=new Ce(""),ke=new Ur(O,V,ie,me,q,Ut,b,E.root);return ke.snapshot=E.root,new Mi(new hi(ke,[]),E)}class Ur{constructor(b,E,O,V,q,ie,me,ke){this.url=b,this.params=E,this.queryParams=O,this.fragment=V,this.data=q,this.outlet=ie,this.component=me,this._futureSnapshot=ke}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,hn.U)(b=>fe(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,hn.U)(b=>fe(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zr(R,b="emptyOnly"){const E=R.pathFromRoot;let O=0;if("always"!==b)for(O=E.length-1;O>=1;){const V=E[O],q=E[O-1];if(V.routeConfig&&""===V.routeConfig.path)O--;else{if(q.component)break;O--}}return function(R){return R.reduce((b,E)=>({params:Object.assign(Object.assign({},b.params),E.params),data:Object.assign(Object.assign({},b.data),E.data),resolve:Object.assign(Object.assign({},b.resolve),E._resolvedData)}),{params:{},data:{},resolve:{}})}(E.slice(O))}class qr{constructor(b,E,O,V,q,ie,me,ke,gt,Cn,It){this.url=b,this.params=E,this.queryParams=O,this.fragment=V,this.data=q,this.outlet=ie,this.component=me,this.routeConfig=ke,this._urlSegment=gt,this._lastPathIndex=Cn,this._resolve=It}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gi extends ws{constructor(b,E){super(E),this.url=b,fr(this,E)}toString(){return pr(this._root)}}function fr(R,b){b.value._routerState=R,b.children.forEach(E=>fr(R,E))}function pr(R){const b=R.children.length>0?` { ${R.children.map(pr).join(", ")} } `:"";return`${R.value}${b}`}function Wi(R){if(R.snapshot){const b=R.snapshot,E=R._futureSnapshot;R.snapshot=E,sn(b.queryParams,E.queryParams)||R.queryParams.next(E.queryParams),b.fragment!==E.fragment&&R.fragment.next(E.fragment),sn(b.params,E.params)||R.params.next(E.params),function(R,b){if(R.length!==b.length)return!1;for(let E=0;E<R.length;++E)if(!sn(R[E],b[E]))return!1;return!0}(b.url,E.url)||R.url.next(E.url),sn(b.data,E.data)||R.data.next(E.data)}else R.snapshot=R._futureSnapshot,R.data.next(R._futureSnapshot.data)}function Ys(R,b){return sn(R.params,b.params)&&function(R,b){return Qn(R,b)&&R.every((E,O)=>sn(E.parameters,b[O].parameters))}(R.url,b.url)&&!(!R.parent!=!b.parent)&&(!R.parent||Ys(R.parent,b.parent))}function Cs(R,b,E){if(E&&R.shouldReuseRoute(b.value,E.value.snapshot)){const O=E.value;O._futureSnapshot=b.value;const V=function(R,b,E){return b.children.map(O=>{for(const V of E.children)if(R.shouldReuseRoute(O.value,V.value.snapshot))return Cs(R,O,V);return Cs(R,O)})}(R,b,E);return new hi(O,V)}{if(R.shouldAttach(b.value)){const q=R.retrieve(b.value);if(null!==q){const ie=q.route;return zi(b,ie),ie}}const O=function(R){return new Ur(new Ce(R.url),new Ce(R.params),new Ce(R.queryParams),new Ce(R.fragment),new Ce(R.data),R.outlet,R.component,R)}(b.value),V=b.children.map(q=>Cs(R,q));return new hi(O,V)}}function zi(R,b){if(R.value.routeConfig!==b.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(R.children.length!==b.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");b.value._futureSnapshot=R.value;for(let E=0;E<R.children.length;++E)zi(R.children[E],b.children[E])}function fi(R){return"object"==typeof R&&null!=R&&!R.outlets&&!R.segmentPath}function Qs(R){return"object"==typeof R&&null!=R&&R.outlets}function Is(R,b,E,O,V){let q={};return O&&Jt(O,(ie,me)=>{q[me]=Array.isArray(ie)?ie.map(ke=>`${ke}`):`${ie}`}),new wi(E.root===R?b:Kr(E.root,R,b),q,V)}function Kr(R,b,E){const O={};return Jt(R.children,(V,q)=>{O[q]=V===b?E:Kr(V,b,E)}),new Mt(R.segments,O)}class Fo{constructor(b,E,O){if(this.isAbsolute=b,this.numberOfDoubleDots=E,this.commands=O,b&&O.length>0&&fi(O[0]))throw new Error("Root segment cannot have matrix parameters");const V=O.find(Qs);if(V&&V!==cr(O))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hn{constructor(b,E,O){this.segmentGroup=b,this.processChildren=E,this.index=O}}function Ds(R,b,E){if(R||(R=new Mt([],{})),0===R.segments.length&&R.hasChildren())return Pi(R,b,E);const O=function(R,b,E){let O=0,V=b;const q={match:!1,pathIndex:0,commandIndex:0};for(;V<R.segments.length;){if(O>=E.length)return q;const ie=R.segments[V],me=E[O];if(Qs(me))break;const ke=`${me}`,gt=O<E.length-1?E[O+1]:null;if(V>0&&void 0===ke)break;if(ke&&gt&&"object"==typeof gt&&void 0===gt.outlets){if(!Ts(ke,gt,ie))return q;O+=2}else{if(!Ts(ke,{},ie))return q;O++}V++}return{match:!0,pathIndex:V,commandIndex:O}}(R,b,E),V=E.slice(O.commandIndex);if(O.match&&O.pathIndex<R.segments.length){const q=new Mt(R.segments.slice(0,O.pathIndex),{});return q.children[Ut]=new Mt(R.segments.slice(O.pathIndex),R.children),Pi(q,0,V)}return O.match&&0===V.length?new Mt(R.segments,{}):O.match&&!R.hasChildren()?bn(R,b,E):O.match?Pi(R,0,V):bn(R,b,E)}function Pi(R,b,E){if(0===E.length)return new Mt(R.segments,{});{const O=function(R){return Qs(R[0])?R[0].outlets:{[Ut]:R}}(E),V={};return Jt(O,(q,ie)=>{"string"==typeof q&&(q=[q]),null!==q&&(V[ie]=Ds(R.children[ie],b,q))}),Jt(R.children,(q,ie)=>{void 0===O[ie]&&(V[ie]=q)}),new Mt(R.segments,V)}}function bn(R,b,E){const O=R.segments.slice(0,b);let V=0;for(;V<E.length;){const q=E[V];if(Qs(q)){const ke=Lo(q.outlets);return new Mt(O,ke)}if(0===V&&fi(E[0])){O.push(new Sr(R.segments[b].path,ii(E[0]))),V++;continue}const ie=Qs(q)?q.outlets[Ut]:`${q}`,me=V<E.length-1?E[V+1]:null;ie&&me&&fi(me)?(O.push(new Sr(ie,ii(me))),V+=2):(O.push(new Sr(ie,{})),V++)}return new Mt(O,{})}function Lo(R){const b={};return Jt(R,(E,O)=>{"string"==typeof E&&(E=[E]),null!==E&&(b[O]=bn(new Mt([],{}),0,E))}),b}function ii(R){const b={};return Jt(R,(E,O)=>b[O]=`${E}`),b}function Ts(R,b,E){return R==E.path&&sn(b,E.parameters)}class eo{constructor(b,E,O,V){this.routeReuseStrategy=b,this.futureState=E,this.currState=O,this.forwardEvent=V}activate(b){const E=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,O,b),Wi(this.futureState.root),this.activateChildRoutes(E,O,b)}deactivateChildRoutes(b,E,O){const V=bi(E);b.children.forEach(q=>{const ie=q.value.outlet;this.deactivateRoutes(q,V[ie],O),delete V[ie]}),Jt(V,(q,ie)=>{this.deactivateRouteAndItsChildren(q,O)})}deactivateRoutes(b,E,O){const V=b.value,q=E?E.value:null;if(V===q)if(V.component){const ie=O.getContext(V.outlet);ie&&this.deactivateChildRoutes(b,E,ie.children)}else this.deactivateChildRoutes(b,E,O);else q&&this.deactivateRouteAndItsChildren(E,O)}deactivateRouteAndItsChildren(b,E){this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,E):this.deactivateRouteAndOutlet(b,E)}detachAndStoreRouteSubtree(b,E){const O=E.getContext(b.value.outlet);if(O&&O.outlet){const V=O.outlet.detach(),q=O.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:V,route:b,contexts:q})}}deactivateRouteAndOutlet(b,E){const O=E.getContext(b.value.outlet),V=O&&b.value.component?O.children:E,q=bi(b);for(const ie of Object.keys(q))this.deactivateRouteAndItsChildren(q[ie],V);O&&O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated(),O.attachRef=null,O.resolver=null,O.route=null)}activateChildRoutes(b,E,O){const V=bi(E);b.children.forEach(q=>{this.activateRoutes(q,V[q.value.outlet],O),this.forwardEvent(new Xn(q.value.snapshot))}),b.children.length&&this.forwardEvent(new ys(b.value.snapshot))}activateRoutes(b,E,O){const V=b.value,q=E?E.value:null;if(Wi(V),V===q)if(V.component){const ie=O.getOrCreateContext(V.outlet);this.activateChildRoutes(b,E,ie.children)}else this.activateChildRoutes(b,E,O);else if(V.component){const ie=O.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const me=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),ie.children.onOutletReAttached(me.contexts),ie.attachRef=me.componentRef,ie.route=me.route.value,ie.outlet&&ie.outlet.attach(me.componentRef,me.route.value),Nr(me.route)}else{const me=function(R){for(let b=R.parent;b;b=b.parent){const E=b.routeConfig;if(E&&E._loadedConfig)return E._loadedConfig;if(E&&E.component)return null}return null}(V.snapshot),ke=me?me.module.componentFactoryResolver:null;ie.attachRef=null,ie.route=V,ie.resolver=ke,ie.outlet&&ie.outlet.activateWith(V,ke),this.activateChildRoutes(b,null,ie.children)}}else this.activateChildRoutes(b,null,O)}}function Nr(R){Wi(R.value),R.children.forEach(Nr)}class Ci{constructor(b,E){this.routes=b,this.module=E}}function Zr(R){return"function"==typeof R}function si(R){return R instanceof wi}const z=Symbol("INITIAL_VALUE");function F(){return(0,Fn.w)(R=>function(...R){let b,E;return(0,ce.K)(R[R.length-1])&&(E=R.pop()),"function"==typeof R[R.length-1]&&(b=R.pop()),1===R.length&&(0,Se.k)(R[0])&&(R=R[0]),(0,_e.n)(R,E).lift(new Te(b))}(R.map(b=>b.pipe((0,ln.q)(1),(0,sr.O)(z)))).pipe((0,wr.R)((b,E)=>{let O=!1;return E.reduce((V,q,ie)=>V!==z?V:(q===z&&(O=!0),O||!1!==q&&ie!==E.length-1&&!si(q)?V:q),b)},z),(0,Ie.h)(b=>b!==z),(0,hn.U)(b=>si(b)?b:!0===b),(0,ln.q)(1)))}let K=(()=>{class R{}return R.\u0275fac=function(E){return new(E||R)},R.\u0275cmp=U.Xpm({type:R,selectors:[["ng-component"]],decls:1,vars:0,template:function(E,O){1&E&&U._UZ(0,"router-outlet")},directives:function(){return[oo]},encapsulation:2}),R})();function le(R,b=""){for(let E=0;E<R.length;E++){const O=R[E];Oe(O,et(b,O))}}function Oe(R,b){R.children&&le(R.children,b)}function et(R,b){return b?R||b.path?R&&!b.path?`${R}/`:!R&&b.path?b.path:`${R}/${b.path}`:"":R}function P(R){const b=R.children&&R.children.map(P),E=b?Object.assign(Object.assign({},R),{children:b}):Object.assign({},R);return!E.component&&(b||E.loadChildren)&&E.outlet&&E.outlet!==Ut&&(E.component=K),E}function x(R){return R.outlet||Ut}function A(R,b){const E=R.filter(O=>x(O)===b);return E.push(...R.filter(O=>x(O)!==b)),E}const W={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ae(R,b,E){var O;if(""===b.path)return"full"===b.pathMatch&&(R.hasChildren()||E.length>0)?Object.assign({},W):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const q=(b.matcher||Ct)(E,R,b);if(!q)return Object.assign({},W);const ie={};Jt(q.posParams,(ke,gt)=>{ie[gt]=ke.path});const me=q.consumed.length>0?Object.assign(Object.assign({},ie),q.consumed[q.consumed.length-1].parameters):ie;return{matched:!0,consumedSegments:q.consumed,lastChild:q.consumed.length,parameters:me,positionalParamSegments:null!==(O=q.posParams)&&void 0!==O?O:{}}}function it(R,b,E,O,V="corrected"){if(E.length>0&&function(R,b,E){return E.some(O=>Nn(R,b,O)&&x(O)!==Ut)}(R,E,O)){const ie=new Mt(b,function(R,b,E,O){const V={};V[Ut]=O,O._sourceSegment=R,O._segmentIndexShift=b.length;for(const q of E)if(""===q.path&&x(q)!==Ut){const ie=new Mt([],{});ie._sourceSegment=R,ie._segmentIndexShift=b.length,V[x(q)]=ie}return V}(R,b,O,new Mt(E,R.children)));return ie._sourceSegment=R,ie._segmentIndexShift=b.length,{segmentGroup:ie,slicedSegments:[]}}if(0===E.length&&function(R,b,E){return E.some(O=>Nn(R,b,O))}(R,E,O)){const ie=new Mt(R.segments,function(R,b,E,O,V,q){const ie={};for(const me of O)if(Nn(R,E,me)&&!V[x(me)]){const ke=new Mt([],{});ke._sourceSegment=R,ke._segmentIndexShift="legacy"===q?R.segments.length:b.length,ie[x(me)]=ke}return Object.assign(Object.assign({},V),ie)}(R,b,E,O,R.children,V));return ie._sourceSegment=R,ie._segmentIndexShift=b.length,{segmentGroup:ie,slicedSegments:E}}const q=new Mt(R.segments,R.children);return q._sourceSegment=R,q._segmentIndexShift=b.length,{segmentGroup:q,slicedSegments:E}}function Nn(R,b,E){return(!(R.hasChildren()||b.length>0)||"full"!==E.pathMatch)&&""===E.path}function ai(R,b,E,O){return!!(x(R)===O||O!==Ut&&Nn(b,E,R))&&("**"===R.path||Ae(b,R,E).matched)}function Zi(R,b,E){return 0===b.length&&!R.children[E]}class ur{constructor(b){this.segmentGroup=b||null}}class Mr{constructor(b){this.urlTree=b}}function mo(R){return new he.y(b=>b.error(new ur(R)))}function yo(R){return new he.y(b=>b.error(new Mr(R)))}function Kt(R){return new he.y(b=>b.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${R}'`)))}class Xu{constructor(b,E,O,V,q){this.configLoader=E,this.urlSerializer=O,this.urlTree=V,this.config=q,this.allowRedirects=!0,this.ngModule=b.get(U.h0i)}apply(){const b=it(this.urlTree.root,[],[],this.config).segmentGroup,E=new Mt(b.segments,b.children);return this.expandSegmentGroup(this.ngModule,this.config,E,Ut).pipe((0,hn.U)(q=>this.createUrlTree(qa(q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Me(q=>{if(q instanceof Mr)return this.allowRedirects=!1,this.match(q.urlTree);throw q instanceof ur?this.noMatchError(q):q}))}match(b){return this.expandSegmentGroup(this.ngModule,this.config,b.root,Ut).pipe((0,hn.U)(V=>this.createUrlTree(qa(V),b.queryParams,b.fragment))).pipe(Me(V=>{throw V instanceof ur?this.noMatchError(V):V}))}noMatchError(b){return new Error(`Cannot match any routes. URL Segment: '${b.segmentGroup}'`)}createUrlTree(b,E,O){const V=b.segments.length>0?new Mt([],{[Ut]:b}):b;return new wi(V,E,O)}expandSegmentGroup(b,E,O,V){return 0===O.segments.length&&O.hasChildren()?this.expandChildren(b,E,O).pipe((0,hn.U)(q=>new Mt([],q))):this.expandSegment(b,O,E,O.segments,V,!0)}expandChildren(b,E,O){const V=[];for(const q of Object.keys(O.children))"primary"===q?V.unshift(q):V.push(q);return(0,st.D)(V).pipe(ve(q=>{const ie=O.children[q],me=A(E,q);return this.expandSegmentGroup(b,me,ie,q).pipe((0,hn.U)(ke=>({segment:ke,outlet:q})))}),(0,wr.R)((q,ie)=>(q[ie.outlet]=ie.segment,q),{}),function(R,b){const E=arguments.length>=2;return O=>O.pipe(R?(0,Ie.h)((V,q)=>R(V,q,O)):en.y,Et(1),E?(0,Ot.d)(b):(0,dt.T)(()=>new lt.K))}())}expandSegment(b,E,O,V,q,ie){return(0,st.D)(O).pipe(ve(me=>this.expandSegmentAgainstRoute(b,E,O,me,V,q,ie).pipe(Me(gt=>{if(gt instanceof ur)return(0,se.of)(null);throw gt}))),(0,Dn.P)(me=>!!me),Me((me,ke)=>{if(me instanceof lt.K||"EmptyError"===me.name){if(Zi(E,V,q))return(0,se.of)(new Mt([],{}));throw new ur(E)}throw me}))}expandSegmentAgainstRoute(b,E,O,V,q,ie,me){return ai(V,E,q,ie)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(b,E,V,q,ie):me&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,E,O,V,q,ie):mo(E):mo(E)}expandSegmentAgainstRouteUsingRedirect(b,E,O,V,q,ie){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,O,V,ie):this.expandRegularSegmentAgainstRouteUsingRedirect(b,E,O,V,q,ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,E,O,V){const q=this.applyRedirectCommands([],O.redirectTo,{});return O.redirectTo.startsWith("/")?yo(q):this.lineralizeSegments(O,q).pipe((0,xe.zg)(ie=>{const me=new Mt(ie,{});return this.expandSegment(b,me,E,ie,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,E,O,V,q,ie){const{matched:me,consumedSegments:ke,lastChild:gt,positionalParamSegments:Cn}=Ae(E,V,q);if(!me)return mo(E);const It=this.applyRedirectCommands(ke,V.redirectTo,Cn);return V.redirectTo.startsWith("/")?yo(It):this.lineralizeSegments(V,It).pipe((0,xe.zg)(Dt=>this.expandSegment(b,E,O,Dt.concat(q.slice(gt)),ie,!1)))}matchSegmentAgainstRoute(b,E,O,V,q){if("**"===O.path)return O.loadChildren?(O._loadedConfig?(0,se.of)(O._loadedConfig):this.configLoader.load(b.injector,O)).pipe((0,hn.U)(Dt=>(O._loadedConfig=Dt,new Mt(V,{})))):(0,se.of)(new Mt(V,{}));const{matched:ie,consumedSegments:me,lastChild:ke}=Ae(E,O,V);if(!ie)return mo(E);const gt=V.slice(ke);return this.getChildConfig(b,O,V).pipe((0,xe.zg)(It=>{const Dt=It.module,an=It.routes,{segmentGroup:$r,slicedSegments:Xr}=it(E,me,gt,an),Hr=new Mt($r.segments,$r.children);if(0===Xr.length&&Hr.hasChildren())return this.expandChildren(Dt,an,Hr).pipe((0,hn.U)(To=>new Mt(me,To)));if(0===an.length&&0===Xr.length)return(0,se.of)(new Mt(me,{}));const mn=x(O)===q;return this.expandSegment(Dt,Hr,an,Xr,mn?Ut:q,!0).pipe((0,hn.U)(Jn=>new Mt(me.concat(Jn.segments),Jn.children)))}))}getChildConfig(b,E,O){return E.children?(0,se.of)(new Ci(E.children,b)):E.loadChildren?void 0!==E._loadedConfig?(0,se.of)(E._loadedConfig):this.runCanLoadGuards(b.injector,E,O).pipe((0,xe.zg)(V=>{return V?this.configLoader.load(b.injector,E).pipe((0,hn.U)(q=>(E._loadedConfig=q,q))):(R=E,new he.y(b=>b.error(ze(`Cannot load children because the guard of the route "path: '${R.path}'" returned false`))));var R})):(0,se.of)(new Ci([],b))}runCanLoadGuards(b,E,O){const V=E.canLoad;if(!V||0===V.length)return(0,se.of)(!0);const q=V.map(ie=>{const me=b.get(ie);let ke;if((R=me)&&Zr(R.canLoad))ke=me.canLoad(E,O);else{if(!Zr(me))throw new Error("Invalid CanLoad guard");ke=me(E,O)}var R;return Vn(ke)});return(0,se.of)(q).pipe(F(),(0,Tn.b)(ie=>{if(!si(ie))return;const me=ze(`Redirecting to "${this.urlSerializer.serialize(ie)}"`);throw me.url=ie,me}),(0,hn.U)(ie=>!0===ie))}lineralizeSegments(b,E){let O=[],V=E.root;for(;;){if(O=O.concat(V.segments),0===V.numberOfChildren)return(0,se.of)(O);if(V.numberOfChildren>1||!V.children[Ut])return Kt(b.redirectTo);V=V.children[Ut]}}applyRedirectCommands(b,E,O){return this.applyRedirectCreatreUrlTree(E,this.urlSerializer.parse(E),b,O)}applyRedirectCreatreUrlTree(b,E,O,V){const q=this.createSegmentGroup(b,E.root,O,V);return new wi(q,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(b,E){const O={};return Jt(b,(V,q)=>{if("string"==typeof V&&V.startsWith(":")){const me=V.substring(1);O[q]=E[me]}else O[q]=V}),O}createSegmentGroup(b,E,O,V){const q=this.createSegments(b,E.segments,O,V);let ie={};return Jt(E.children,(me,ke)=>{ie[ke]=this.createSegmentGroup(b,me,O,V)}),new Mt(q,ie)}createSegments(b,E,O,V){return E.map(q=>q.path.startsWith(":")?this.findPosParam(b,q,V):this.findOrReturn(q,O))}findPosParam(b,E,O){const V=O[E.path.substring(1)];if(!V)throw new Error(`Cannot redirect to '${b}'. Cannot find '${E.path}'.`);return V}findOrReturn(b,E){let O=0;for(const V of E){if(V.path===b.path)return E.splice(O),V;O++}return b}}function qa(R){const b={};for(const O of Object.keys(R.children)){const q=qa(R.children[O]);(q.segments.length>0||q.hasChildren())&&(b[O]=q)}return function(R){if(1===R.numberOfChildren&&R.children[Ut]){const b=R.children[Ut];return new Mt(R.segments.concat(b.segments),b.children)}return R}(new Mt(R.segments,b))}class Su{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class Ze{constructor(b,E){this.component=b,this.route=E}}function Xt(R,b,E){const O=R._root;return no(O,b?b._root:null,E,[O.value])}function Gn(R,b,E){const O=function(R){if(!R)return null;for(let b=R.parent;b;b=b.parent){const E=b.routeConfig;if(E&&E._loadedConfig)return E._loadedConfig}return null}(b);return(O?O.module.injector:E).get(R)}function no(R,b,E,O,V={canDeactivateChecks:[],canActivateChecks:[]}){const q=bi(b);return R.children.forEach(ie=>{(function(R,b,E,O,V={canDeactivateChecks:[],canActivateChecks:[]}){const q=R.value,ie=b?b.value:null,me=E?E.getContext(R.value.outlet):null;if(ie&&q.routeConfig===ie.routeConfig){const ke=function(R,b,E){if("function"==typeof E)return E(R,b);switch(E){case"pathParamsChange":return!Qn(R.url,b.url);case"pathParamsOrQueryParamsChange":return!Qn(R.url,b.url)||!sn(R.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ys(R,b)||!sn(R.queryParams,b.queryParams);case"paramsChange":default:return!Ys(R,b)}}(ie,q,q.routeConfig.runGuardsAndResolvers);ke?V.canActivateChecks.push(new Su(O)):(q.data=ie.data,q._resolvedData=ie._resolvedData),no(R,b,q.component?me?me.children:null:E,O,V),ke&&me&&me.outlet&&me.outlet.isActivated&&V.canDeactivateChecks.push(new Ze(me.outlet.component,ie))}else ie&&cs(b,me,V),V.canActivateChecks.push(new Su(O)),no(R,null,q.component?me?me.children:null:E,O,V)})(ie,q[ie.value.outlet],E,O.concat([ie.value]),V),delete q[ie.value.outlet]}),Jt(q,(ie,me)=>cs(ie,E.getContext(me),V)),V}function cs(R,b,E){const O=bi(R),V=R.value;Jt(O,(q,ie)=>{cs(q,V.component?b?b.children.getContext(ie):null:b,E)}),E.canDeactivateChecks.push(new Ze(V.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,V))}class tr{}function Vo(R){return new he.y(b=>b.error(R))}class va{constructor(b,E,O,V,q,ie){this.rootComponentType=b,this.config=E,this.urlTree=O,this.url=V,this.paramsInheritanceStrategy=q,this.relativeLinkResolution=ie}recognize(){const b=it(this.urlTree.root,[],[],this.config.filter(ie=>void 0===ie.redirectTo),this.relativeLinkResolution).segmentGroup,E=this.processSegmentGroup(this.config,b,Ut);if(null===E)return null;const O=new qr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ut,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new hi(O,E),q=new Gi(this.url,V);return this.inheritParamsAndData(q._root),q}inheritParamsAndData(b){const E=b.value,O=zr(E,this.paramsInheritanceStrategy);E.params=Object.freeze(O.params),E.data=Object.freeze(O.data),b.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(b,E,O){return 0===E.segments.length&&E.hasChildren()?this.processChildren(b,E):this.processSegment(b,E,E.segments,O)}processChildren(b,E){const O=[];for(const q of Object.keys(E.children)){const ie=E.children[q],me=A(b,q),ke=this.processSegmentGroup(me,ie,q);if(null===ke)return null;O.push(...ke)}const V=io(O);return V.sort((b,E)=>b.value.outlet===Ut?-1:E.value.outlet===Ut?1:b.value.outlet.localeCompare(E.value.outlet)),V}processSegment(b,E,O,V){for(const q of b){const ie=this.processSegmentAgainstRoute(q,E,O,V);if(null!==ie)return ie}return Zi(E,O,V)?[]:null}processSegmentAgainstRoute(b,E,O,V){if(b.redirectTo||!ai(b,E,O,V))return null;let q,ie=[],me=[];if("**"===b.path){const an=O.length>0?cr(O).parameters:{};q=new qr(O,an,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ta(b),x(b),b.component,b,Qa(E),ds(E)+O.length,xu(b))}else{const an=Ae(E,b,O);if(!an.matched)return null;ie=an.consumedSegments,me=O.slice(an.lastChild),q=new qr(ie,an.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ta(b),x(b),b.component,b,Qa(E),ds(E)+ie.length,xu(b))}const ke=(R=b).children?R.children:R.loadChildren?R._loadedConfig.routes:[],{segmentGroup:gt,slicedSegments:Cn}=it(E,ie,me,ke.filter(an=>void 0===an.redirectTo),this.relativeLinkResolution);var R;if(0===Cn.length&&gt.hasChildren()){const an=this.processChildren(ke,gt);return null===an?null:[new hi(q,an)]}if(0===ke.length&&0===Cn.length)return[new hi(q,[])];const It=x(b)===V,Dt=this.processSegment(ke,gt,Cn,It?Ut:V);return null===Dt?null:[new hi(q,Dt)]}}function Ea(R){const b=R.value.routeConfig;return b&&""===b.path&&void 0===b.redirectTo}function io(R){const b=[],E=new Set;for(const O of R){if(!Ea(O)){b.push(O);continue}const V=b.find(q=>O.value.routeConfig===q.value.routeConfig);void 0!==V?(V.children.push(...O.children),E.add(V)):b.push(O)}for(const O of E){const V=io(O.children);b.push(new hi(O.value,V))}return b.filter(O=>!E.has(O))}function Qa(R){let b=R;for(;b._sourceSegment;)b=b._sourceSegment;return b}function ds(R){let b=R,E=b._segmentIndexShift?b._segmentIndexShift:0;for(;b._sourceSegment;)b=b._sourceSegment,E+=b._segmentIndexShift?b._segmentIndexShift:0;return E-1}function ta(R){return R.data||{}}function xu(R){return R.resolve||{}}function vo(R){return(0,Fn.w)(b=>{const E=R(b);return E?(0,st.D)(E).pipe((0,hn.U)(()=>b)):(0,se.of)(b)})}class nr extends class{shouldDetach(b){return!1}store(b,E){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,E){return b.routeConfig===E.routeConfig}}{}const Ss=new U.OlP("ROUTES");class Eo{constructor(b,E,O,V){this.loader=b,this.compiler=E,this.onLoadStartListener=O,this.onLoadEndListener=V}load(b,E){if(E._loader$)return E._loader$;this.onLoadStartListener&&this.onLoadStartListener(E);const V=this.loadModuleFactory(E.loadChildren).pipe((0,hn.U)(q=>{this.onLoadEndListener&&this.onLoadEndListener(E);const ie=q.create(b);return new Ci(tn(ie.injector.get(Ss,void 0,U.XFs.Self|U.XFs.Optional)).map(P),ie)}),Me(q=>{throw E._loader$=void 0,q}));return E._loader$=new Yt.c(V,()=>new ne.xQ).pipe((0,An.x)()),E._loader$}loadModuleFactory(b){return"string"==typeof b?(0,st.D)(this.loader.load(b)):Vn(b()).pipe((0,xe.zg)(E=>E instanceof U.YKP?(0,se.of)(E):(0,st.D)(this.compiler.compileModuleAsync(E))))}}class Mu{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Uo,this.attachRef=null}}class Uo{constructor(){this.contexts=new Map}onChildOutletCreated(b,E){const O=this.getOrCreateContext(b);O.outlet=E,this.contexts.set(b,O)}onChildOutletDestroyed(b){const E=this.getContext(b);E&&(E.outlet=null,E.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let E=this.getContext(b);return E||(E=new Mu,this.contexts.set(b,E)),E}getContext(b){return this.contexts.get(b)||null}}class Xa{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,E){return b}}function Vs(R){throw R}function Rs(R,b,E){return b.parse("/")}function na(R,b){return(0,se.of)(null)}const Bo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Us={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gi=(()=>{class R{constructor(E,O,V,q,ie,me,ke,gt){this.rootComponentType=E,this.urlSerializer=O,this.rootContexts=V,this.location=q,this.config=gt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ne.xQ,this.errorHandler=Vs,this.malformedUriErrorHandler=Rs,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:na,afterPreactivation:na},this.urlHandlingStrategy=new Xa,this.routeReuseStrategy=new nr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ie.get(U.h0i),this.console=ie.get(U.c2e);const Dt=ie.get(U.R0b);this.isNgZoneEnabled=Dt instanceof U.R0b&&U.R0b.isInAngularZone(),this.resetConfig(gt),this.currentUrlTree=new wi(new Mt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Eo(me,ke,an=>this.triggerEvent(new Rt(an)),an=>this.triggerEvent(new Tt(an))),this.routerState=er(this.currentUrlTree,this.rootComponentType),this.transitions=new Ce({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var E;return null===(E=this.location.getState())||void 0===E?void 0:E.\u0275routerPageId}setupNavigations(E){const O=this.events;return E.pipe((0,Ie.h)(V=>0!==V.id),(0,hn.U)(V=>Object.assign(Object.assign({},V),{extractedUrl:this.urlHandlingStrategy.extract(V.rawUrl)})),(0,Fn.w)(V=>{let q=!1,ie=!1;return(0,se.of)(V).pipe((0,Tn.b)(me=>{this.currentNavigation={id:me.id,initialUrl:me.currentRawUrl,extractedUrl:me.extractedUrl,trigger:me.source,extras:me.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Fn.w)(me=>{const ke=this.browserUrlTree.toString(),gt=!this.navigated||me.extractedUrl.toString()!==ke||ke!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||gt)&&this.urlHandlingStrategy.shouldProcessUrl(me.rawUrl))return lr(me.source)&&(this.browserUrlTree=me.extractedUrl),(0,se.of)(me).pipe((0,Fn.w)(It=>{const Dt=this.transitions.getValue();return O.next(new Pt(It.id,this.serializeUrl(It.extractedUrl),It.source,It.restoredState)),Dt!==this.transitions.getValue()?Xe.E:Promise.resolve(It)}),function(R,b,E,O){return(0,Fn.w)(V=>function(R,b,E,O,V){return new Xu(R,b,E,O,V).apply()}(R,b,E,V.extractedUrl,O).pipe((0,hn.U)(q=>Object.assign(Object.assign({},V),{urlAfterRedirects:q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Tn.b)(It=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:It.urlAfterRedirects})}),function(R,b,E,O,V){return(0,xe.zg)(q=>function(R,b,E,O,V="emptyOnly",q="legacy"){try{const ie=new va(R,b,E,O,V,q).recognize();return null===ie?Vo(new tr):(0,se.of)(ie)}catch(ie){return Vo(ie)}}(R,b,q.urlAfterRedirects,E(q.urlAfterRedirects),O,V).pipe((0,hn.U)(ie=>Object.assign(Object.assign({},q),{targetSnapshot:ie}))))}(this.rootComponentType,this.config,It=>this.serializeUrl(It),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Tn.b)(It=>{"eager"===this.urlUpdateStrategy&&(It.extras.skipLocationChange||this.setBrowserUrl(It.urlAfterRedirects,It),this.browserUrlTree=It.urlAfterRedirects);const Dt=new Je(It.id,this.serializeUrl(It.extractedUrl),this.serializeUrl(It.urlAfterRedirects),It.targetSnapshot);O.next(Dt)}));if(gt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Dt,extractedUrl:an,source:$r,restoredState:Xr,extras:Hr}=me,mn=new Pt(Dt,this.serializeUrl(an),$r,Xr);O.next(mn);const mr=er(an,this.rootComponentType).snapshot;return(0,se.of)(Object.assign(Object.assign({},me),{targetSnapshot:mr,urlAfterRedirects:an,extras:Object.assign(Object.assign({},Hr),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=me.rawUrl,this.browserUrlTree=me.urlAfterRedirects,me.resolve(null),Xe.E}),vo(me=>{const{targetSnapshot:ke,id:gt,extractedUrl:Cn,rawUrl:It,extras:{skipLocationChange:Dt,replaceUrl:an}}=me;return this.hooks.beforePreactivation(ke,{navigationId:gt,appliedUrlTree:Cn,rawUrlTree:It,skipLocationChange:!!Dt,replaceUrl:!!an})}),(0,Tn.b)(me=>{const ke=new In(me.id,this.serializeUrl(me.extractedUrl),this.serializeUrl(me.urlAfterRedirects),me.targetSnapshot);this.triggerEvent(ke)}),(0,hn.U)(me=>Object.assign(Object.assign({},me),{guards:Xt(me.targetSnapshot,me.currentSnapshot,this.rootContexts)})),function(R,b){return(0,xe.zg)(E=>{const{targetSnapshot:O,currentSnapshot:V,guards:{canActivateChecks:q,canDeactivateChecks:ie}}=E;return 0===ie.length&&0===q.length?(0,se.of)(Object.assign(Object.assign({},E),{guardsResult:!0})):function(R,b,E,O){return(0,st.D)(R).pipe((0,xe.zg)(V=>function(R,b,E,O,V){const q=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,se.of)(!0);const ie=q.map(me=>{const ke=Gn(me,b,V);let gt;if(function(R){return R&&Zr(R.canDeactivate)}(ke))gt=Vn(ke.canDeactivate(R,b,E,O));else{if(!Zr(ke))throw new Error("Invalid CanDeactivate guard");gt=Vn(ke(R,b,E,O))}return gt.pipe((0,Dn.P)())});return(0,se.of)(ie).pipe(F())}(V.component,V.route,E,b,O)),(0,Dn.P)(V=>!0!==V,!0))}(ie,O,V,R).pipe((0,xe.zg)(me=>me&&function(R){return"boolean"==typeof R}(me)?function(R,b,E,O){return(0,st.D)(b).pipe(ve(V=>(0,Wt.z)(function(R,b){return null!==R&&b&&b(new $n(R)),(0,se.of)(!0)}(V.route.parent,O),function(R,b){return null!==R&&b&&b(new is(R)),(0,se.of)(!0)}(V.route,O),function(R,b,E){const O=b[b.length-1],q=b.slice(0,b.length-1).reverse().map(ie=>function(R){const b=R.routeConfig?R.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:R,guards:b}:null}(ie)).filter(ie=>null!==ie).map(ie=>rt(()=>{const me=ie.guards.map(ke=>{const gt=Gn(ke,ie.node,E);let Cn;if(function(R){return R&&Zr(R.canActivateChild)}(gt))Cn=Vn(gt.canActivateChild(O,R));else{if(!Zr(gt))throw new Error("Invalid CanActivateChild guard");Cn=Vn(gt(O,R))}return Cn.pipe((0,Dn.P)())});return(0,se.of)(me).pipe(F())}));return(0,se.of)(q).pipe(F())}(R,V.path,E),function(R,b,E){const O=b.routeConfig?b.routeConfig.canActivate:null;if(!O||0===O.length)return(0,se.of)(!0);const V=O.map(q=>rt(()=>{const ie=Gn(q,b,E);let me;if(function(R){return R&&Zr(R.canActivate)}(ie))me=Vn(ie.canActivate(b,R));else{if(!Zr(ie))throw new Error("Invalid CanActivate guard");me=Vn(ie(b,R))}return me.pipe((0,Dn.P)())}));return(0,se.of)(V).pipe(F())}(R,V.route,E))),(0,Dn.P)(V=>!0!==V,!0))}(O,q,R,b):(0,se.of)(me)),(0,hn.U)(me=>Object.assign(Object.assign({},E),{guardsResult:me})))})}(this.ngModule.injector,me=>this.triggerEvent(me)),(0,Tn.b)(me=>{if(si(me.guardsResult)){const gt=ze(`Redirecting to "${this.serializeUrl(me.guardsResult)}"`);throw gt.url=me.guardsResult,gt}const ke=new Bn(me.id,this.serializeUrl(me.extractedUrl),this.serializeUrl(me.urlAfterRedirects),me.targetSnapshot,!!me.guardsResult);this.triggerEvent(ke)}),(0,Ie.h)(me=>!!me.guardsResult||(this.restoreHistory(me),this.cancelNavigationTransition(me,""),!1)),vo(me=>{if(me.guards.canActivateChecks.length)return(0,se.of)(me).pipe((0,Tn.b)(ke=>{const gt=new Mn(ke.id,this.serializeUrl(ke.extractedUrl),this.serializeUrl(ke.urlAfterRedirects),ke.targetSnapshot);this.triggerEvent(gt)}),(0,Fn.w)(ke=>{let gt=!1;return(0,se.of)(ke).pipe(function(R,b){return(0,xe.zg)(E=>{const{targetSnapshot:O,guards:{canActivateChecks:V}}=E;if(!V.length)return(0,se.of)(E);let q=0;return(0,st.D)(V).pipe(ve(ie=>function(R,b,E,O){return function(R,b,E,O){const V=Object.keys(R);if(0===V.length)return(0,se.of)({});const q={};return(0,st.D)(V).pipe((0,xe.zg)(ie=>function(R,b,E,O){const V=Gn(R,b,O);return Vn(V.resolve?V.resolve(b,E):V(b,E))}(R[ie],b,E,O).pipe((0,Tn.b)(me=>{q[ie]=me}))),Et(1),(0,xe.zg)(()=>Object.keys(q).length===V.length?(0,se.of)(q):Xe.E))}(R._resolve,R,b,O).pipe((0,hn.U)(q=>(R._resolvedData=q,R.data=Object.assign(Object.assign({},R.data),zr(R,E).resolve),null)))}(ie.route,O,R,b)),(0,Tn.b)(()=>q++),Et(1),(0,xe.zg)(ie=>q===V.length?(0,se.of)(E):Xe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Tn.b)({next:()=>gt=!0,complete:()=>{gt||(this.restoreHistory(ke),this.cancelNavigationTransition(ke,"At least one route resolver didn't emit any value."))}}))}),(0,Tn.b)(ke=>{const gt=new En(ke.id,this.serializeUrl(ke.extractedUrl),this.serializeUrl(ke.urlAfterRedirects),ke.targetSnapshot);this.triggerEvent(gt)}))}),vo(me=>{const{targetSnapshot:ke,id:gt,extractedUrl:Cn,rawUrl:It,extras:{skipLocationChange:Dt,replaceUrl:an}}=me;return this.hooks.afterPreactivation(ke,{navigationId:gt,appliedUrlTree:Cn,rawUrlTree:It,skipLocationChange:!!Dt,replaceUrl:!!an})}),(0,hn.U)(me=>{const ke=function(R,b,E){const O=Cs(R,b._root,E?E._root:void 0);return new Mi(O,b)}(this.routeReuseStrategy,me.targetSnapshot,me.currentRouterState);return Object.assign(Object.assign({},me),{targetRouterState:ke})}),(0,Tn.b)(me=>{this.currentUrlTree=me.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(me.urlAfterRedirects,me.rawUrl),this.routerState=me.targetRouterState,"deferred"===this.urlUpdateStrategy&&(me.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,me),this.browserUrlTree=me.urlAfterRedirects)}),((R,b,E)=>(0,hn.U)(O=>(new eo(b,O.targetRouterState,O.currentRouterState,E).activate(R),O)))(this.rootContexts,this.routeReuseStrategy,me=>this.triggerEvent(me)),(0,Tn.b)({next(){q=!0},complete(){q=!0}}),function(R){return b=>b.lift(new pt(R))}(()=>{if(!q&&!ie){const me=`Navigation ID ${V.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(V),this.cancelNavigationTransition(V,me)):this.cancelNavigationTransition(V,me)}this.currentNavigation=null}),Me(me=>{if(ie=!0,function(R){return R&&R[ue]}(me)){const ke=si(me.url);ke||(this.navigated=!0,this.restoreHistory(V,!0));const gt=new Ar(V.id,this.serializeUrl(V.extractedUrl),me.message);O.next(gt),ke?setTimeout(()=>{const Cn=this.urlHandlingStrategy.merge(me.url,this.rawUrlTree),It={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||lr(V.source)};this.scheduleNavigation(Cn,"imperative",null,It,{resolve:V.resolve,reject:V.reject,promise:V.promise})},0):V.resolve(!1)}else{this.restoreHistory(V,!0);const ke=new jt(V.id,this.serializeUrl(V.extractedUrl),me);O.next(ke);try{V.resolve(this.errorHandler(me))}catch(gt){V.reject(gt)}}return Xe.E}))}))}resetRootComponentType(E){this.rootComponentType=E,this.routerState.root.component=this.rootComponentType}getTransition(){const E=this.transitions.value;return E.urlAfterRedirects=this.browserUrlTree,E}setTransition(E){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),E))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const O=this.extractLocationChangeInfoFromEvent(E);this.shouldScheduleNavigation(this.lastLocationChangeInfo,O)&&setTimeout(()=>{const{source:V,state:q,urlTree:ie}=O,me={replaceUrl:!0};if(q){const ke=Object.assign({},q);delete ke.navigationId,delete ke.\u0275routerPageId,0!==Object.keys(ke).length&&(me.state=ke)}this.scheduleNavigation(ie,V,q,me)},0),this.lastLocationChangeInfo=O}))}extractLocationChangeInfoFromEvent(E){var O;return{source:"popstate"===E.type?"popstate":"hashchange",urlTree:this.parseUrl(E.url),state:(null===(O=E.state)||void 0===O?void 0:O.navigationId)?E.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(E,O){if(!E)return!0;const V=O.urlTree.toString()===E.urlTree.toString();return O.transitionId!==E.transitionId||!V||!("hashchange"===O.source&&"popstate"===E.source||"popstate"===O.source&&"hashchange"===E.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(E){this.events.next(E)}resetConfig(E){le(E),this.config=E.map(P),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(E,O={}){const{relativeTo:V,queryParams:q,fragment:ie,queryParamsHandling:me,preserveFragment:ke}=O,gt=V||this.routerState.root,Cn=ke?this.currentUrlTree.fragment:ie;let It=null;switch(me){case"merge":It=Object.assign(Object.assign({},this.currentUrlTree.queryParams),q);break;case"preserve":It=this.currentUrlTree.queryParams;break;default:It=q||null}return null!==It&&(It=this.removeEmptyProps(It)),function(R,b,E,O,V){if(0===E.length)return Is(b.root,b.root,b,O,V);const q=function(R){if("string"==typeof R[0]&&1===R.length&&"/"===R[0])return new Fo(!0,0,R);let b=0,E=!1;const O=R.reduce((V,q,ie)=>{if("object"==typeof q&&null!=q){if(q.outlets){const me={};return Jt(q.outlets,(ke,gt)=>{me[gt]="string"==typeof ke?ke.split("/"):ke}),[...V,{outlets:me}]}if(q.segmentPath)return[...V,q.segmentPath]}return"string"!=typeof q?[...V,q]:0===ie?(q.split("/").forEach((me,ke)=>{0==ke&&"."===me||(0==ke&&""===me?E=!0:".."===me?b++:""!=me&&V.push(me))}),V):[...V,q]},[]);return new Fo(E,b,O)}(E);if(q.toRoot())return Is(b.root,new Mt([],{}),b,O,V);const ie=function(R,b,E){if(R.isAbsolute)return new Hn(b.root,!0,0);if(-1===E.snapshot._lastPathIndex){const q=E.snapshot._urlSegment;return new Hn(q,q===b.root,0)}const O=fi(R.commands[0])?0:1;return function(R,b,E){let O=R,V=b,q=E;for(;q>V;){if(q-=V,O=O.parent,!O)throw new Error("Invalid number of '../'");V=O.segments.length}return new Hn(O,!1,V-q)}(E.snapshot._urlSegment,E.snapshot._lastPathIndex+O,R.numberOfDoubleDots)}(q,b,R),me=ie.processChildren?Pi(ie.segmentGroup,ie.index,q.commands):Ds(ie.segmentGroup,ie.index,q.commands);return Is(ie.segmentGroup,me,b,O,V)}(gt,this.currentUrlTree,E,It,null!=Cn?Cn:null)}navigateByUrl(E,O={skipLocationChange:!1}){const V=si(E)?E:this.parseUrl(E),q=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(q,"imperative",null,O)}navigate(E,O={skipLocationChange:!1}){return function(R){for(let b=0;b<R.length;b++){const E=R[b];if(null==E)throw new Error(`The requested path contains ${E} segment at index ${b}`)}}(E),this.navigateByUrl(this.createUrlTree(E,O),O)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let O;try{O=this.urlSerializer.parse(E)}catch(V){O=this.malformedUriErrorHandler(V,this.urlSerializer,E)}return O}isActive(E,O){let V;if(V=!0===O?Object.assign({},Bo):!1===O?Object.assign({},Us):O,si(E))return ss(this.currentUrlTree,E,V);const q=this.parseUrl(E);return ss(this.currentUrlTree,q,V)}removeEmptyProps(E){return Object.keys(E).reduce((O,V)=>{const q=E[V];return null!=q&&(O[V]=q),O},{})}processNavigations(){this.navigations.subscribe(E=>{this.navigated=!0,this.lastSuccessfulId=E.id,this.currentPageId=E.targetPageId,this.events.next(new Sn(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,E.resolve(!0)},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)})}scheduleNavigation(E,O,V,q,ie){var me,ke;if(this.disposed)return Promise.resolve(!1);const gt=this.getTransition(),Cn=lr(O)&&gt&&!lr(gt.source),an=(this.lastSuccessfulId===gt.id||this.currentNavigation?gt.rawUrl:gt.urlAfterRedirects).toString()===E.toString();if(Cn&&an)return Promise.resolve(!0);let $r,Xr,Hr;ie?($r=ie.resolve,Xr=ie.reject,Hr=ie.promise):Hr=new Promise((Jn,To)=>{$r=Jn,Xr=To});const mn=++this.navigationId;let mr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(V=this.location.getState()),mr=V&&V.\u0275routerPageId?V.\u0275routerPageId:q.replaceUrl||q.skipLocationChange?null!==(me=this.browserPageId)&&void 0!==me?me:0:(null!==(ke=this.browserPageId)&&void 0!==ke?ke:0)+1):mr=0,this.setTransition({id:mn,targetPageId:mr,source:O,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:E,extras:q,resolve:$r,reject:Xr,promise:Hr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Hr.catch(Jn=>Promise.reject(Jn))}setBrowserUrl(E,O){const V=this.urlSerializer.serialize(E),q=Object.assign(Object.assign({},O.extras.state),this.generateNgRouterState(O.id,O.targetPageId));this.location.isCurrentPathEqualTo(V)||O.extras.replaceUrl?this.location.replaceState(V,"",q):this.location.go(V,"",q)}restoreHistory(E,O=!1){var V,q;if("computed"===this.canceledNavigationResolution){const ie=this.currentPageId-E.targetPageId;"popstate"!==E.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(V=this.currentNavigation)||void 0===V?void 0:V.finalUrl)||0===ie?this.currentUrlTree===(null===(q=this.currentNavigation)||void 0===q?void 0:q.finalUrl)&&0===ie&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ie)}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(E,O){const V=new Ar(E.id,this.serializeUrl(E.extractedUrl),O);this.triggerEvent(V),E.resolve(!1)}generateNgRouterState(E,O){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:O}:{navigationId:E}}}return R.\u0275fac=function(E){return new(E||R)(U.LFG(U.DyG),U.LFG(gn),U.LFG(Uo),U.LFG(w.Ye),U.LFG(U.zs3),U.LFG(U.v3s),U.LFG(U.Sil),U.LFG(void 0))},R.\u0275prov=U.Yz7({token:R,factory:R.\u0275fac}),R})();function lr(R){return"imperative"!==R}let Bs=(()=>{class R{constructor(E,O,V){this.router=E,this.route=O,this.locationStrategy=V,this.commands=[],this.onChanges=new ne.xQ,this.subscription=E.events.subscribe(q=>{q instanceof Sn&&this.updateTargetUrlAndHref()})}set routerLink(E){this.commands=null!=E?Array.isArray(E)?E:[E]:[]}ngOnChanges(E){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(E,O,V,q,ie){if(0!==E||O||V||q||ie||"string"==typeof this.target&&"_self"!=this.target)return!0;const me={skipLocationChange:Zn(this.skipLocationChange),replaceUrl:Zn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,me),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Zn(this.preserveFragment)})}}return R.\u0275fac=function(E){return new(E||R)(U.Y36(gi),U.Y36(Ur),U.Y36(w.S$))},R.\u0275dir=U.lG2({type:R,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(E,O){1&E&&U.NdJ("click",function(q){return O.onClick(q.button,q.ctrlKey,q.shiftKey,q.altKey,q.metaKey)}),2&E&&(U.Ikx("href",O.href,U.LSH),U.uIk("target",O.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[U.TTD]}),R})();function Zn(R){return""===R||!!R}let oo=(()=>{class R{constructor(E,O,V,q,ie){this.parentContexts=E,this.location=O,this.resolver=V,this.changeDetector=ie,this.activated=null,this._activatedRoute=null,this.activateEvents=new U.vpe,this.deactivateEvents=new U.vpe,this.name=q||Ut,E.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const E=this.parentContexts.getContext(this.name);E&&E.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,E}attach(E,O){this.activated=E,this._activatedRoute=O,this.location.insert(E.hostView)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,O){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=E;const ie=(O=O||this.resolver).resolveComponentFactory(E._futureSnapshot.routeConfig.component),me=this.parentContexts.getOrCreateContext(this.name).children,ke=new eu(E,me,this.location.injector);this.activated=this.location.createComponent(ie,this.location.length,ke),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return R.\u0275fac=function(E){return new(E||R)(U.Y36(Uo),U.Y36(U.s_b),U.Y36(U._Vd),U.$8M("name"),U.Y36(U.sBO))},R.\u0275dir=U.lG2({type:R,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),R})();class eu{constructor(b,E,O){this.route=b,this.childContexts=E,this.parent=O}get(b,E){return b===Ur?this.route:b===Uo?this.childContexts:this.parent.get(b,E)}}class Pl{}class tu{preload(b,E){return(0,se.of)(null)}}let bo=(()=>{class R{constructor(E,O,V,q,ie){this.router=E,this.injector=q,this.preloadingStrategy=ie,this.loader=new Eo(O,V,gt=>E.triggerEvent(new Rt(gt)),gt=>E.triggerEvent(new Tt(gt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ie.h)(E=>E instanceof Sn),ve(()=>this.preload())).subscribe(()=>{})}preload(){const E=this.injector.get(U.h0i);return this.processRoutes(E,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,O){const V=[];for(const q of O)if(q.loadChildren&&!q.canLoad&&q._loadedConfig){const ie=q._loadedConfig;V.push(this.processRoutes(ie.module,ie.routes))}else q.loadChildren&&!q.canLoad?V.push(this.preloadConfig(E,q)):q.children&&V.push(this.processRoutes(E,q.children));return(0,st.D)(V).pipe((0,fn.J)(),(0,hn.U)(q=>{}))}preloadConfig(E,O){return this.preloadingStrategy.preload(O,()=>(O._loadedConfig?(0,se.of)(O._loadedConfig):this.loader.load(E.injector,O)).pipe((0,xe.zg)(q=>(O._loadedConfig=q,this.processRoutes(q.module,q.routes)))))}}return R.\u0275fac=function(E){return new(E||R)(U.LFG(gi),U.LFG(U.v3s),U.LFG(U.Sil),U.LFG(U.zs3),U.LFG(Pl))},R.\u0275prov=U.Yz7({token:R,factory:R.\u0275fac}),R})(),Co=(()=>{class R{constructor(E,O,V={}){this.router=E,this.viewportScroller=O,this.options=V,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},V.scrollPositionRestoration=V.scrollPositionRestoration||"disabled",V.anchorScrolling=V.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(E=>{E instanceof Pt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof Sn&&(this.lastId=E.id,this.scheduleScrollEvent(E,this.router.parseUrl(E.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(E=>{E instanceof Fr&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,O){this.router.triggerEvent(new Fr(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,O))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return R.\u0275fac=function(E){return new(E||R)(U.LFG(gi),U.LFG(w.EM),U.LFG(void 0))},R.\u0275prov=U.Yz7({token:R,factory:R.\u0275fac}),R})();const xs=new U.OlP("ROUTER_CONFIGURATION"),ao=new U.OlP("ROUTER_FORROOT_GUARD"),Qi=[w.Ye,{provide:gn,useClass:ht},{provide:gi,useFactory:function(R,b,E,O,V,q,ie,me={},ke,gt){const Cn=new gi(null,R,b,E,O,V,q,tn(ie));return ke&&(Cn.urlHandlingStrategy=ke),gt&&(Cn.routeReuseStrategy=gt),function(R,b){R.errorHandler&&(b.errorHandler=R.errorHandler),R.malformedUriErrorHandler&&(b.malformedUriErrorHandler=R.malformedUriErrorHandler),R.onSameUrlNavigation&&(b.onSameUrlNavigation=R.onSameUrlNavigation),R.paramsInheritanceStrategy&&(b.paramsInheritanceStrategy=R.paramsInheritanceStrategy),R.relativeLinkResolution&&(b.relativeLinkResolution=R.relativeLinkResolution),R.urlUpdateStrategy&&(b.urlUpdateStrategy=R.urlUpdateStrategy)}(me,Cn),me.enableTracing&&Cn.events.subscribe(It=>{var Dt,an;null===(Dt=console.group)||void 0===Dt||Dt.call(console,`Router Event: ${It.constructor.name}`),console.log(It.toString()),console.log(It),null===(an=console.groupEnd)||void 0===an||an.call(console)}),Cn},deps:[gn,Uo,w.Ye,U.zs3,U.v3s,U.Sil,Ss,xs,[class{},new U.FiY],[class{},new U.FiY]]},Uo,{provide:Ur,useFactory:function(R){return R.routerState.root},deps:[gi]},{provide:U.v3s,useClass:U.EAV},bo,tu,class{preload(b,E){return E().pipe(Me(()=>(0,se.of)(null)))}},{provide:xs,useValue:{enableTracing:!1}}];function Ji(){return new U.PXZ("Router",gi)}let uo=(()=>{class R{constructor(E,O){}static forRoot(E,O){return{ngModule:R,providers:[Qi,Io(E),{provide:ao,useFactory:gr,deps:[[gi,new U.FiY,new U.tp0]]},{provide:xs,useValue:O||{}},{provide:w.S$,useFactory:at,deps:[w.lw,[new U.tBr(w.mr),new U.FiY],xs]},{provide:Co,useFactory:nu,deps:[gi,w.EM,xs]},{provide:Pl,useExisting:O&&O.preloadingStrategy?O.preloadingStrategy:tu},{provide:U.PXZ,multi:!0,useFactory:Ji},[Do,{provide:U.ip1,multi:!0,useFactory:mt,deps:[Do]},{provide:tt,useFactory:je,deps:[Do]},{provide:U.tb,multi:!0,useExisting:tt}]]}}static forChild(E){return{ngModule:R,providers:[Io(E)]}}}return R.\u0275fac=function(E){return new(E||R)(U.LFG(ao,8),U.LFG(gi,8))},R.\u0275mod=U.oAB({type:R}),R.\u0275inj=U.cJS({}),R})();function nu(R,b,E){return E.scrollOffset&&b.setOffset(E.scrollOffset),new Co(R,b,E)}function at(R,b,E={}){return E.useHash?new w.Do(R,b):new w.b0(R,b)}function gr(R){return"guarded"}function Io(R){return[{provide:U.deG,multi:!0,useValue:R},{provide:Ss,multi:!0,useValue:R}]}let Do=(()=>{class R{constructor(E){this.injector=E,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ne.xQ}appInitializer(){return this.injector.get(w.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let O=null;const V=new Promise(me=>O=me),q=this.injector.get(gi),ie=this.injector.get(xs);return"disabled"===ie.initialNavigation?(q.setUpLocationChangeListener(),O(!0)):"enabled"===ie.initialNavigation||"enabledBlocking"===ie.initialNavigation?(q.hooks.afterPreactivation=()=>this.initNavigation?(0,se.of)(null):(this.initNavigation=!0,O(!0),this.resultOfPreactivationDone),q.initialNavigation()):O(!0),V})}bootstrapListener(E){const O=this.injector.get(xs),V=this.injector.get(bo),q=this.injector.get(Co),ie=this.injector.get(gi),me=this.injector.get(U.z2F);E===me.components[0]&&(("enabledNonBlocking"===O.initialNavigation||void 0===O.initialNavigation)&&ie.initialNavigation(),V.setUpPreloading(),q.init(),ie.resetRootComponentType(me.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return R.\u0275fac=function(E){return new(E||R)(U.LFG(U.zs3))},R.\u0275prov=U.Yz7({token:R,factory:R.\u0275fac}),R})();function mt(R){return R.appInitializer.bind(R)}function je(R){return R.bootstrapListener.bind(R)}const tt=new U.OlP("Router Initializer")},4486:(bt,Be,$)=>{"use strict";$.d(Be,{Z:()=>We});var w=$(3854),U=$(6034),ne=$(5452),Re=$(5601);class Ce{constructor(Te,ot){this._delegate=Te,this.firebase=ot,(0,ne._addComponent)(Te,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=Te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this._delegate.automaticDataCollectionEnabled=Te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Te=>{this._delegate.checkDestroyed(),Te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ne.deleteApp)(this._delegate)))}_getService(Te,ot=ne._DEFAULT_ENTRY_NAME){var st;this._delegate.checkDestroyed();const Xe=this._delegate.container.getProvider(Te);return!Xe.isInitialized()&&"EXPLICIT"===(null===(st=Xe.getComponent())||void 0===st?void 0:st.instantiationMode)&&Xe.initialize(),Xe.getImmediate({identifier:ot})}_removeServiceInstance(Te,ot=ne._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Te).clearInstance(ot)}_addComponent(Te){(0,ne._addComponent)(this._delegate,Te)}_addOrOverwriteComponent(Te){(0,ne._addOrOverwriteComponent)(this._delegate,Te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Se=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),J=function oe(){const Fe=function(Fe){const Te={},ot={__esModule:!0,initializeApp:function(Yt,Ue={}){const Me=ne.initializeApp(Yt,Ue);if((0,w.r3)(Te,Me.name))return Te[Me.name];const Le=new Fe(Me,ot);return Te[Me.name]=Le,Le},app:Xe,registerVersion:ne.registerVersion,setLogLevel:ne.setLogLevel,onLog:ne.onLog,apps:null,SDK_VERSION:ne.SDK_VERSION,INTERNAL:{registerComponent:function(Yt){const Ue=Yt.name,Me=Ue.replace("-compat","");if(ne._registerComponent(Yt)&&"PUBLIC"===Yt.type){const Le=(ge=Xe())=>{if("function"!=typeof ge[Me])throw Se.create("invalid-app-argument",{appName:Ue});return ge[Me]()};void 0!==Yt.serviceProps&&(0,w.ZB)(Le,Yt.serviceProps),ot[Me]=Le,Fe.prototype[Me]=function(...ge){return this._getService.bind(this,Ue).apply(this,Yt.multipleInstances?ge:[])}}return"PUBLIC"===Yt.type?ot[Me]:null},removeApp:function(Yt){delete Te[Yt]},useAsService:function(Yt,Ue){return"serverAuth"===Ue?null:Ue},modularAPIs:ne}};function Xe(Yt){if(!(0,w.r3)(Te,Yt=Yt||ne._DEFAULT_ENTRY_NAME))throw Se.create("no-app",{appName:Yt});return Te[Yt]}return ot.default=ot,Object.defineProperty(ot,"apps",{get:function(){return Object.keys(Te).map(Yt=>Te[Yt])}}),Xe.App=Fe,ot}(Ce);return Fe.INTERNAL=Object.assign(Object.assign({},Fe.INTERNAL),{createFirebaseNamespace:oe,extendNamespace:function(ot){(0,w.ZB)(Fe,ot)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),Fe}(),Q=new Re.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){Q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Fe=self.firebase.SDK_VERSION;Fe&&Fe.indexOf("LITE")>=0&&Q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=J;(0,ne.registerVersion)("@firebase/app-compat","0.1.4",undefined)},5452:(bt,Be,$)=>{"use strict";$.r(Be),$.d(Be,{FirebaseError:()=>Re.ZR,SDK_VERSION:()=>sr,_DEFAULT_ENTRY_NAME:()=>Qt,_addComponent:()=>en,_addOrOverwriteComponent:()=>Lt,_apps:()=>dt,_clearComponents:()=>$t,_components:()=>Ot,_getProvider:()=>wt,_registerComponent:()=>on,_removeServiceInstance:()=>pt,deleteApp:()=>An,getApp:()=>Dn,getApps:()=>Tn,initializeApp:()=>wr,onLog:()=>Pt,registerVersion:()=>jn,setLogLevel:()=>Sn});var w=$(8239),U=$(6034),ne=$(5601),Re=$(3854);class Ce{constructor(Je){this.container=Je}getPlatformInfoString(){return this.container.getProviders().map(In=>{if(function(jt){const Je=jt.getComponent();return"VERSION"===(null==Je?void 0:Je.type)}(In)){const Bn=In.getImmediate();return`${Bn.library}/${Bn.version}`}return null}).filter(In=>In).join(" ")}}const Se="@firebase/app",oe=new ne.Yd("@firebase/app"),Qt="[DEFAULT]",ut={[Se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dt=new Map,Ot=new Map;function en(jt,Je){try{jt.container.addComponent(Je)}catch(In){oe.debug(`Component ${Je.name} failed to register with FirebaseApp ${jt.name}`,In)}}function Lt(jt,Je){jt.container.addOrOverwriteComponent(Je)}function on(jt){const Je=jt.name;if(Ot.has(Je))return oe.debug(`There were multiple attempts to register component ${Je}.`),!1;Ot.set(Je,jt);for(const In of dt.values())en(In,jt);return!0}function wt(jt,Je){return jt.container.getProvider(Je)}function pt(jt,Je,In=Qt){wt(jt,Je).clearInstance(In)}function $t(){Ot.clear()}const Fn=new Re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class ln{constructor(Je,In,Bn){this._isDeleted=!1,this._options=Object.assign({},Je),this._config=Object.assign({},In),this._name=In.name,this._automaticDataCollectionEnabled=In.automaticDataCollectionEnabled,this._container=Bn,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this.checkDestroyed(),this._automaticDataCollectionEnabled=Je}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Je){this._isDeleted=Je}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}const sr="9.1.2";function wr(jt,Je={}){"object"!=typeof Je&&(Je={name:Je});const In=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},Je),Bn=In.name;if("string"!=typeof Bn||!Bn)throw Fn.create("bad-app-name",{appName:String(Bn)});const Mn=dt.get(Bn);if(Mn){if((0,Re.vZ)(jt,Mn.options)&&(0,Re.vZ)(In,Mn.config))return Mn;throw Fn.create("duplicate-app",{appName:Bn})}const En=new U.H0(Bn);for(const Tt of Ot.values())En.addComponent(Tt);const Rt=new ln(jt,In,En);return dt.set(Bn,Rt),Rt}function Dn(jt=Qt){const Je=dt.get(jt);if(!Je)throw Fn.create("no-app",{appName:jt});return Je}function Tn(){return Array.from(dt.values())}function An(jt){return fn.apply(this,arguments)}function fn(){return(fn=(0,w.Z)(function*(jt){const Je=jt.name;dt.has(Je)&&(dt.delete(Je),yield Promise.all(jt.container.getProviders().map(In=>In.delete())),jt.isDeleted=!0)})).apply(this,arguments)}function jn(jt,Je,In){var Bn;let Mn=null!==(Bn=ut[jt])&&void 0!==Bn?Bn:jt;In&&(Mn+=`-${In}`);const En=Mn.match(/\s|\//),Rt=Je.match(/\s|\//);if(En||Rt){const Tt=[`Unable to register library "${Mn}" with version "${Je}":`];return En&&Tt.push(`library name "${Mn}" contains illegal characters (whitespace or "/")`),En&&Rt&&Tt.push("and"),Rt&&Tt.push(`version name "${Je}" contains illegal characters (whitespace or "/")`),void oe.warn(Tt.join(" "))}on(new U.wA(`${Mn}-version`,()=>({library:Mn,version:Je}),"VERSION"))}function Pt(jt,Je){if(null!==jt&&"function"!=typeof jt)throw Fn.create("invalid-log-argument");(0,ne.Am)(jt,Je)}function Sn(jt){(0,ne.Ub)(jt)}on(new U.wA("platform-logger",Je=>new Ce(Je),"PRIVATE")),jn(Se,"0.7.3",undefined),jn("fire-js","")},6034:(bt,Be,$)=>{"use strict";$.d(Be,{wA:()=>ne,H0:()=>de});var w=$(4762),U=$(3854),ne=function(){function oe(J,Q,he){this.name=J,this.instanceFactory=Q,this.type=he,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return oe.prototype.setInstantiationMode=function(J){return this.instantiationMode=J,this},oe.prototype.setMultipleInstances=function(J){return this.multipleInstances=J,this},oe.prototype.setServiceProps=function(J){return this.serviceProps=J,this},oe.prototype.setInstanceCreatedCallback=function(J){return this.onInstanceCreated=J,this},oe}(),Re="[DEFAULT]",Ce=function(){function oe(J,Q){this.name=J,this.container=Q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return oe.prototype.get=function(J){var Q=this.normalizeInstanceIdentifier(J);if(!this.instancesDeferred.has(Q)){var he=new U.BH;if(this.instancesDeferred.set(Q,he),this.isInitialized(Q)||this.shouldAutoInitialize())try{var ye=this.getOrInitializeService({instanceIdentifier:Q});ye&&he.resolve(ye)}catch(_e){}}return this.instancesDeferred.get(Q).promise},oe.prototype.getImmediate=function(J){var Q,he=this.normalizeInstanceIdentifier(null==J?void 0:J.identifier),ye=null!==(Q=null==J?void 0:J.optional)&&void 0!==Q&&Q;if(!this.isInitialized(he)&&!this.shouldAutoInitialize()){if(ye)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:he})}catch(_e){if(ye)return null;throw _e}},oe.prototype.getComponent=function(){return this.component},oe.prototype.setComponent=function(J){var Q,he;if(J.name!==this.name)throw Error("Mismatching Component "+J.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=J,this.shouldAutoInitialize()){if(function(oe){return"EAGER"===oe.instantiationMode}(J))try{this.getOrInitializeService({instanceIdentifier:Re})}catch(Xe){}try{for(var ye=(0,w.XA)(this.instancesDeferred.entries()),_e=ye.next();!_e.done;_e=ye.next()){var We=(0,w.CR)(_e.value,2),Te=We[1],ot=this.normalizeInstanceIdentifier(We[0]);try{var st=this.getOrInitializeService({instanceIdentifier:ot});Te.resolve(st)}catch(Xe){}}}catch(Xe){Q={error:Xe}}finally{try{_e&&!_e.done&&(he=ye.return)&&he.call(ye)}finally{if(Q)throw Q.error}}}},oe.prototype.clearInstance=function(J){void 0===J&&(J=Re),this.instancesDeferred.delete(J),this.instancesOptions.delete(J),this.instances.delete(J)},oe.prototype.delete=function(){return(0,w.mG)(this,void 0,void 0,function(){var J;return(0,w.Jh)(this,function(Q){switch(Q.label){case 0:return J=Array.from(this.instances.values()),[4,Promise.all((0,w.ev)((0,w.ev)([],(0,w.CR)(J.filter(function(he){return"INTERNAL"in he}).map(function(he){return he.INTERNAL.delete()}))),(0,w.CR)(J.filter(function(he){return"_delete"in he}).map(function(he){return he._delete()}))))];case 1:return Q.sent(),[2]}})})},oe.prototype.isComponentSet=function(){return null!=this.component},oe.prototype.isInitialized=function(J){return void 0===J&&(J=Re),this.instances.has(J)},oe.prototype.getOptions=function(J){return void 0===J&&(J=Re),this.instancesOptions.get(J)||{}},oe.prototype.initialize=function(J){var Q,he;void 0===J&&(J={});var ye=J.options,_e=void 0===ye?{}:ye,We=this.normalizeInstanceIdentifier(J.instanceIdentifier);if(this.isInitialized(We))throw Error(this.name+"("+We+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Fe=this.getOrInitializeService({instanceIdentifier:We,options:_e});try{for(var Te=(0,w.XA)(this.instancesDeferred.entries()),ot=Te.next();!ot.done;ot=Te.next()){var st=(0,w.CR)(ot.value,2),rt=st[1];We===this.normalizeInstanceIdentifier(st[0])&&rt.resolve(Fe)}}catch(lt){Q={error:lt}}finally{try{ot&&!ot.done&&(he=Te.return)&&he.call(Te)}finally{if(Q)throw Q.error}}return Fe},oe.prototype.onInit=function(J,Q){var he,ye=this.normalizeInstanceIdentifier(Q),_e=null!==(he=this.onInitCallbacks.get(ye))&&void 0!==he?he:new Set;_e.add(J),this.onInitCallbacks.set(ye,_e);var We=this.instances.get(ye);return We&&J(We,ye),function(){_e.delete(J)}},oe.prototype.invokeOnInitCallbacks=function(J,Q){var he,ye,_e=this.onInitCallbacks.get(Q);if(_e)try{for(var We=(0,w.XA)(_e),Fe=We.next();!Fe.done;Fe=We.next()){var Te=Fe.value;try{Te(J,Q)}catch(ot){}}}catch(ot){he={error:ot}}finally{try{Fe&&!Fe.done&&(ye=We.return)&&ye.call(We)}finally{if(he)throw he.error}}},oe.prototype.getOrInitializeService=function(J){var Q=J.instanceIdentifier,he=J.options,ye=void 0===he?{}:he,_e=this.instances.get(Q);if(!_e&&this.component&&(_e=this.component.instanceFactory(this.container,{instanceIdentifier:ce(Q),options:ye}),this.instances.set(Q,_e),this.instancesOptions.set(Q,ye),this.invokeOnInitCallbacks(_e,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,_e)}catch(We){}return _e||null},oe.prototype.normalizeInstanceIdentifier=function(J){return void 0===J&&(J=Re),this.component?this.component.multipleInstances?J:Re:J},oe.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},oe}();function ce(oe){return oe===Re?void 0:oe}var de=function(){function oe(J){this.name=J,this.providers=new Map}return oe.prototype.addComponent=function(J){var Q=this.getProvider(J.name);if(Q.isComponentSet())throw new Error("Component "+J.name+" has already been registered with "+this.name);Q.setComponent(J)},oe.prototype.addOrOverwriteComponent=function(J){this.getProvider(J.name).isComponentSet()&&this.providers.delete(J.name),this.addComponent(J)},oe.prototype.getProvider=function(J){if(this.providers.has(J))return this.providers.get(J);var Q=new Ce(J,this);return this.providers.set(J,Q),Q},oe.prototype.getProviders=function(){return Array.from(this.providers.values())},oe}()},5601:(bt,Be,$)=>{"use strict";$.d(Be,{in:()=>U,Yd:()=>Se,Ub:()=>de,Am:()=>oe});const w=[];var U=(()=>{return(J=U||(U={}))[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT",U;var J})();const ne={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},Re=U.INFO,Ce={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},ce=(J,Q,...he)=>{if(Q<J.logLevel)return;const ye=(new Date).toISOString(),_e=Ce[Q];if(!_e)throw new Error(`Attempted to log a message with an invalid logType (value: ${Q})`);console[_e](`[${ye}]  ${J.name}:`,...he)};class Se{constructor(Q){this.name=Q,this._logLevel=Re,this._logHandler=ce,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(Q){if(!(Q in U))throw new TypeError(`Invalid value "${Q}" assigned to \`logLevel\``);this._logLevel=Q}setLogLevel(Q){this._logLevel="string"==typeof Q?ne[Q]:Q}get logHandler(){return this._logHandler}set logHandler(Q){if("function"!=typeof Q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Q}get userLogHandler(){return this._userLogHandler}set userLogHandler(Q){this._userLogHandler=Q}debug(...Q){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...Q),this._logHandler(this,U.DEBUG,...Q)}log(...Q){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...Q),this._logHandler(this,U.VERBOSE,...Q)}info(...Q){this._userLogHandler&&this._userLogHandler(this,U.INFO,...Q),this._logHandler(this,U.INFO,...Q)}warn(...Q){this._userLogHandler&&this._userLogHandler(this,U.WARN,...Q),this._logHandler(this,U.WARN,...Q)}error(...Q){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...Q),this._logHandler(this,U.ERROR,...Q)}}function de(J){w.forEach(Q=>{Q.setLogLevel(J)})}function oe(J,Q){for(const he of w){let ye=null;Q&&Q.level&&(ye=ne[Q.level]),he.userLogHandler=null===J?null:(_e,We,...Fe)=>{const Te=Fe.map(ot=>{if(null==ot)return null;if("string"==typeof ot)return ot;if("number"==typeof ot||"boolean"==typeof ot)return ot.toString();if(ot instanceof Error)return ot.message;try{return JSON.stringify(ot)}catch(st){return null}}).filter(ot=>ot).join(" ");We>=(null!=ye?ye:_e.logLevel)&&J({level:U[We].toLowerCase(),message:Te,args:Fe,type:_e.name})}}}},3854:(bt,Be,$)=>{"use strict";$.d(Be,{BH:()=>ye,LL:()=>Ie,ZR:()=>ve,tV:()=>oe,r3:()=>wt,Sg:()=>_e,ne:()=>An,vZ:()=>Fn,ZB:()=>Q,pd:()=>Dn,m9:()=>Ut,z$:()=>We,jU:()=>ot,ru:()=>st,d:()=>rt,xb:()=>$t,w1:()=>se,hl:()=>Ue,uI:()=>Fe,UG:()=>Te,b$:()=>Xe,G6:()=>Yt,Mn:()=>lt,xO:()=>sr,zd:()=>wr});const Re=function(pe){const fe=[];let ue=0;for(let ze=0;ze<pe.length;ze++){let Pe=pe.charCodeAt(ze);Pe<128?fe[ue++]=Pe:Pe<2048?(fe[ue++]=Pe>>6|192,fe[ue++]=63&Pe|128):55296==(64512&Pe)&&ze+1<pe.length&&56320==(64512&pe.charCodeAt(ze+1))?(Pe=65536+((1023&Pe)<<10)+(1023&pe.charCodeAt(++ze)),fe[ue++]=Pe>>18|240,fe[ue++]=Pe>>12&63|128,fe[ue++]=Pe>>6&63|128,fe[ue++]=63&Pe|128):(fe[ue++]=Pe>>12|224,fe[ue++]=Pe>>6&63|128,fe[ue++]=63&Pe|128)}return fe},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(pe,fe){if(!Array.isArray(pe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ue=fe?this.byteToCharMapWebSafe_:this.byteToCharMap_,ze=[];for(let Pe=0;Pe<pe.length;Pe+=3){const Ct=pe[Pe],vt=Pe+1<pe.length,sn=vt?pe[Pe+1]:0,Ln=Pe+2<pe.length,tn=Ln?pe[Pe+2]:0;let Jt=(15&sn)<<2|tn>>6,Vn=63&tn;Ln||(Vn=64,vt||(Jt=64)),ze.push(ue[Ct>>2],ue[(3&Ct)<<4|sn>>4],ue[Jt],ue[Vn])}return ze.join("")},encodeString(pe,fe){return this.HAS_NATIVE_SUPPORT&&!fe?btoa(pe):this.encodeByteArray(Re(pe),fe)},decodeString(pe,fe){return this.HAS_NATIVE_SUPPORT&&!fe?atob(pe):function(pe){const fe=[];let ue=0,ze=0;for(;ue<pe.length;){const Pe=pe[ue++];if(Pe<128)fe[ze++]=String.fromCharCode(Pe);else if(Pe>191&&Pe<224){const Ct=pe[ue++];fe[ze++]=String.fromCharCode((31&Pe)<<6|63&Ct)}else if(Pe>239&&Pe<365){const Ln=((7&Pe)<<18|(63&pe[ue++])<<12|(63&pe[ue++])<<6|63&pe[ue++])-65536;fe[ze++]=String.fromCharCode(55296+(Ln>>10)),fe[ze++]=String.fromCharCode(56320+(1023&Ln))}else{const Ct=pe[ue++],vt=pe[ue++];fe[ze++]=String.fromCharCode((15&Pe)<<12|(63&Ct)<<6|63&vt)}}return fe.join("")}(this.decodeStringToByteArray(pe,fe))},decodeStringToByteArray(pe,fe){this.init_();const ue=fe?this.charToByteMapWebSafe_:this.charToByteMap_,ze=[];for(let Pe=0;Pe<pe.length;){const Ct=ue[pe.charAt(Pe++)],sn=Pe<pe.length?ue[pe.charAt(Pe)]:0;++Pe;const tn=Pe<pe.length?ue[pe.charAt(Pe)]:64;++Pe;const pn=Pe<pe.length?ue[pe.charAt(Pe)]:64;if(++Pe,null==Ct||null==sn||null==tn||null==pn)throw Error();ze.push(Ct<<2|sn>>4),64!==tn&&(ze.push(sn<<4&240|tn>>2),64!==pn&&ze.push(tn<<6&192|pn))}return ze},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let pe=0;pe<this.ENCODED_VALS.length;pe++)this.byteToCharMap_[pe]=this.ENCODED_VALS.charAt(pe),this.charToByteMap_[this.byteToCharMap_[pe]]=pe,this.byteToCharMapWebSafe_[pe]=this.ENCODED_VALS_WEBSAFE.charAt(pe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[pe]]=pe,pe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(pe)]=pe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(pe)]=pe)}}},de=function(pe){return function(pe){const fe=Re(pe);return ce.encodeByteArray(fe,!0)}(pe).replace(/\./g,"")},oe=function(pe){try{return ce.decodeString(pe,!0)}catch(fe){console.error("base64Decode failed: ",fe)}return null};function Q(pe,fe){if(!(fe instanceof Object))return fe;switch(fe.constructor){case Date:return new Date(fe.getTime());case Object:void 0===pe&&(pe={});break;case Array:pe=[];break;default:return fe}for(const ue in fe)!fe.hasOwnProperty(ue)||!he(ue)||(pe[ue]=Q(pe[ue],fe[ue]));return pe}function he(pe){return"__proto__"!==pe}class ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((fe,ue)=>{this.resolve=fe,this.reject=ue})}wrapCallback(fe){return(ue,ze)=>{ue?this.reject(ue):this.resolve(ze),"function"==typeof fe&&(this.promise.catch(()=>{}),1===fe.length?fe(ue):fe(ue,ze))}}}function _e(pe,fe){if(pe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ze=fe||"demo-project",Pe=pe.iat||0,Ct=pe.sub||pe.user_id;if(!Ct)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${ze}`,aud:ze,iat:Pe,exp:Pe+3600,auth_time:Pe,sub:Ct,user_id:Ct,firebase:{sign_in_provider:"custom",identities:{}}},pe);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(vt)),""].join(".")}function We(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Te(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(pe){return!1}}function ot(){return"object"==typeof self&&self.self===self}function st(){const pe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof pe&&void 0!==pe.id}function Xe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rt(){return We().indexOf("Electron/")>=0}function se(){const pe=We();return pe.indexOf("MSIE ")>=0||pe.indexOf("Trident/")>=0}function lt(){return We().indexOf("MSAppHost/")>=0}function Yt(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ue(){return"object"==typeof indexedDB}class ve extends Error{constructor(fe,ue,ze){super(ue),this.code=fe,this.customData=ze,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ie.prototype.create)}}class Ie{constructor(fe,ue,ze){this.service=fe,this.serviceName=ue,this.errors=ze}create(fe,...ue){const ze=ue[0]||{},Pe=`${this.service}/${fe}`,Ct=this.errors[fe],vt=Ct?function(pe,fe){return pe.replace(Et,(ue,ze)=>{const Pe=fe[ze];return null!=Pe?String(Pe):`<${ze}?>`})}(Ct,ze):"Error";return new ve(Pe,`${this.serviceName}: ${vt} (${Pe}).`,ze)}}const Et=/\{\$([^}]+)}/g;function wt(pe,fe){return Object.prototype.hasOwnProperty.call(pe,fe)}function $t(pe){for(const fe in pe)if(Object.prototype.hasOwnProperty.call(pe,fe))return!1;return!0}function Fn(pe,fe){if(pe===fe)return!0;const ue=Object.keys(pe),ze=Object.keys(fe);for(const Pe of ue){if(!ze.includes(Pe))return!1;const Ct=pe[Pe],vt=fe[Pe];if(ln(Ct)&&ln(vt)){if(!Fn(Ct,vt))return!1}else if(Ct!==vt)return!1}for(const Pe of ze)if(!ue.includes(Pe))return!1;return!0}function ln(pe){return null!==pe&&"object"==typeof pe}function sr(pe){const fe=[];for(const[ue,ze]of Object.entries(pe))Array.isArray(ze)?ze.forEach(Pe=>{fe.push(encodeURIComponent(ue)+"="+encodeURIComponent(Pe))}):fe.push(encodeURIComponent(ue)+"="+encodeURIComponent(ze));return fe.length?"&"+fe.join("&"):""}function wr(pe){const fe={};return pe.replace(/^\?/,"").split("&").forEach(ze=>{if(ze){const[Pe,Ct]=ze.split("=");fe[decodeURIComponent(Pe)]=decodeURIComponent(Ct)}}),fe}function Dn(pe){const fe=pe.indexOf("?");if(!fe)return"";const ue=pe.indexOf("#",fe);return pe.substring(fe,ue>0?ue:void 0)}function An(pe,fe){const ue=new fn(pe,fe);return ue.subscribe.bind(ue)}class fn{constructor(fe,ue){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ue,this.task.then(()=>{fe(this)}).catch(ze=>{this.error(ze)})}next(fe){this.forEachObserver(ue=>{ue.next(fe)})}error(fe){this.forEachObserver(ue=>{ue.error(fe)}),this.close(fe)}complete(){this.forEachObserver(fe=>{fe.complete()}),this.close()}subscribe(fe,ue,ze){let Pe;if(void 0===fe&&void 0===ue&&void 0===ze)throw new Error("Missing Observer.");Pe=function(pe,fe){if("object"!=typeof pe||null===pe)return!1;for(const ue of["next","error","complete"])if(ue in pe&&"function"==typeof pe[ue])return!0;return!1}(fe)?fe:{next:fe,error:ue,complete:ze},void 0===Pe.next&&(Pe.next=Sn),void 0===Pe.error&&(Pe.error=Sn),void 0===Pe.complete&&(Pe.complete=Sn);const Ct=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Pe.error(this.finalError):Pe.complete()}catch(vt){}}),this.observers.push(Pe),Ct}unsubscribeOne(fe){void 0===this.observers||void 0===this.observers[fe]||(delete this.observers[fe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(fe){if(!this.finalized)for(let ue=0;ue<this.observers.length;ue++)this.sendOne(ue,fe)}sendOne(fe,ue){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[fe])try{ue(this.observers[fe])}catch(ze){"undefined"!=typeof console&&console.error&&console.error(ze)}})}close(fe){this.finalized||(this.finalized=!0,void 0!==fe&&(this.finalError=fe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sn(){}function Ut(pe){return pe&&pe._delegate?pe._delegate:pe}},7841:(bt,Be,$)=>{"use strict";$.d(Be,{Z:()=>w.Z});var w=$(4486);w.Z.registerVersion("firebase","9.1.2","app-compat")},5841:(bt,Be,$)=>{"use strict";$.r(Be);var w=$(8239),U=$(4486),ne=$(3854),Re=$(5452),Ce=$(4762),ce=$(5601),Se=$(6034);const We=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Te=new ne.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),st=new ce.Yd("@firebase/auth");function Xe(v,...f){st.logLevel<=ce.in.ERROR&&st.error(`Auth (${Re.SDK_VERSION}): ${v}`,...f)}function rt(v,...f){throw Yt(v,...f)}function se(v,...f){return Yt(v,...f)}function lt(v,f,g){const C=Object.assign(Object.assign({},Fe()),{[f]:g});return new ne.LL("auth","Firebase",C).create(f,{appName:v.name})}function Wt(v,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&rt(v,"argument-error"),lt(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yt(v,...f){if("string"!=typeof v){const g=f[0],C=[...f.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(g,...C)}return Te.create(v,...f)}function Ue(v,f,...g){if(!v)throw Yt(f,...g)}function Me(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Xe(f),new Error(f)}function Le(v,f){v||Me(f)}const ge=new Map;function xe(v){Le(v instanceof Function,"Expected a class definition");let f=ge.get(v);return f?(Le(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,ge.set(v,f),f)}function Ye(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Et(){return"http:"===Qt()||"https:"===Qt()}function Qt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ot{constructor(f,g){this.shortDelay=f,this.longDelay=g,Le(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,ne.uI)()||(0,ne.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Et()||(0,ne.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function en(v,f){Le(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Lt{static initialize(f,g,C){this.fetchImpl=f,g&&(this.headersImpl=g),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},wt=new Ot(3e4,6e4);function pt(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function $t(v,f,g,C){return hn.apply(this,arguments)}function hn(){return(hn=(0,w.Z)(function*(v,f,g,C,B={}){return Fn(v,B,()=>{let Y={},we={};C&&("GET"===f?we=C:Y={body:JSON.stringify(C)});const $e=(0,ne.xO)(Object.assign({key:v.config.apiKey},we)).slice(1),yt=new(Lt.headers());return yt.set("Content-Type","application/json"),yt.set("X-Client-Version",v._getSdkClientVersion()),v.languageCode&&yt.set("X-Firebase-Locale",v.languageCode),Lt.fetch()(Dn(v,v.config.apiHost,g,$e),Object.assign({method:f,headers:yt,referrerPolicy:"no-referrer"},Y))})})).apply(this,arguments)}function Fn(v,f,g){return ln.apply(this,arguments)}function ln(){return(ln=(0,w.Z)(function*(v,f,g){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},on),f);try{const B=new Tn(v),Y=yield Promise.race([g(),B.promise]);B.clearNetworkTimeout();const we=yield Y.json();if("needConfirmation"in we)throw An(v,"account-exists-with-different-credential",we);if(Y.ok&&!("errorMessage"in we))return we;{const $e=Y.ok?we.errorMessage:we.error.message,[yt,Nt]=$e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===yt)throw An(v,"credential-already-in-use",we);if("EMAIL_EXISTS"===yt)throw An(v,"email-already-in-use",we);const nn=C[yt]||yt.toLowerCase().replace(/[_\s]+/g,"-");if(Nt)throw lt(v,nn,Nt);rt(v,nn)}}catch(B){if(B instanceof ne.ZR)throw B;rt(v,"network-request-failed")}})).apply(this,arguments)}function sr(v,f,g,C){return wr.apply(this,arguments)}function wr(){return(wr=(0,w.Z)(function*(v,f,g,C,B={}){const Y=yield $t(v,f,g,C,B);return"mfaPendingCredential"in Y&&rt(v,"multi-factor-auth-required",{serverResponse:Y}),Y})).apply(this,arguments)}function Dn(v,f,g,C){const B=`${f}${g}?${C}`;return v.config.emulator?en(v.config,B):`${v.config.apiScheme}://${B}`}class Tn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,C)=>{this.timer=setTimeout(()=>C(se(this.auth,"timeout")),wt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function An(v,f,g){const C={appName:v.name};g.email&&(C.email=g.email),g.phoneNumber&&(C.phoneNumber=g.phoneNumber);const B=se(v,f,C);return B.customData._tokenResponse=g,B}function jn(){return(jn=(0,w.Z)(function*(v,f){return $t(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Pt(v,f){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,w.Z)(function*(v,f){return $t(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ar(v,f){return jt.apply(this,arguments)}function jt(){return(jt=(0,w.Z)(function*(v,f){return $t(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Je(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Mn(){return(Mn=(0,w.Z)(function*(v,f=!1){const g=(0,ne.m9)(v),C=yield g.getIdToken(f),B=Rt(C);Ue(B&&B.exp&&B.auth_time&&B.iat,g.auth,"internal-error");const Y="object"==typeof B.firebase?B.firebase:void 0,we=null==Y?void 0:Y.sign_in_provider;return{claims:B,token:C,authTime:Je(En(B.auth_time)),issuedAtTime:Je(En(B.iat)),expirationTime:Je(En(B.exp)),signInProvider:we||null,signInSecondFactor:(null==Y?void 0:Y.sign_in_second_factor)||null}})).apply(this,arguments)}function En(v){return 1e3*Number(v)}function Rt(v){const[f,g,C]=v.split(".");if(void 0===f||void 0===g||void 0===C)return Xe("JWT malformed, contained fewer than 3 sections"),null;try{const B=(0,ne.tV)(g);return B?JSON.parse(B):(Xe("Failed to decode base64 JWT payload"),null)}catch(B){return Xe("Caught error parsing JWT payload as JSON",B),null}}function $n(v,f){return ys.apply(this,arguments)}function ys(){return(ys=(0,w.Z)(function*(v,f,g=!1){if(g)return f;try{return yield f}catch(C){throw C instanceof ne.ZR&&is(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}function is({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Xn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const B=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,B)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const C=this.getInterval(f);this.timerId=setTimeout((0,w.Z)(function*(){yield g.iteration()}),C)}iteration(){var f=this;return(0,w.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class Fr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Je(this.lastLoginAt),this.creationTime=Je(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ut(v){return pe.apply(this,arguments)}function pe(){return(pe=(0,w.Z)(function*(v){var f;const g=v.auth,C=yield v.getIdToken(),B=yield $n(v,Ar(g,{idToken:C}));Ue(null==B?void 0:B.users.length,g,"internal-error");const Y=B.users[0];v._notifyReloadListener(Y);const we=(null===(f=Y.providerUserInfo)||void 0===f?void 0:f.length)?Pe(Y.providerUserInfo):[],$e=ze(v.providerData,we),nn=!!v.isAnonymous&&!(v.email&&Y.passwordHash||(null==$e?void 0:$e.length)),Zt={uid:Y.localId,displayName:Y.displayName||null,photoURL:Y.photoUrl||null,email:Y.email||null,emailVerified:Y.emailVerified||!1,phoneNumber:Y.phoneNumber||null,tenantId:Y.tenantId||null,providerData:$e,metadata:new Fr(Y.createdAt,Y.lastLoginAt),isAnonymous:nn};Object.assign(v,Zt)})).apply(this,arguments)}function ue(){return(ue=(0,w.Z)(function*(v){const f=(0,ne.m9)(v);yield Ut(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ze(v,f){return[...v.filter(C=>!f.some(B=>B.providerId===C.providerId)),...f]}function Pe(v){return v.map(f=>{var{providerId:g}=f,C=(0,Ce._T)(f,["providerId"]);return{providerId:g,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function vt(){return(vt=(0,w.Z)(function*(v,f){const g=yield Fn(v,{},()=>{const C=(0,ne.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:B,apiKey:Y}=v.config,we=Dn(v,B,"/v1/token",`key=${Y}`);return Lt.fetch()(we,{method:"POST",headers:{"X-Client-Version":v._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:C})});return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class sn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Ue(f.idToken,"internal-error"),Ue(void 0!==f.idToken,"internal-error"),Ue(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(v){const f=Rt(v);return Ue(f,"internal-error"),Ue(void 0!==f.exp,"internal-error"),Ue(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var C=this;return(0,w.Z)(function*(){return Ue(!C.accessToken||C.refreshToken,f,"user-token-expired"),g||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(f,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var C=this;return(0,w.Z)(function*(){const{accessToken:B,refreshToken:Y,expiresIn:we}=yield function(v,f){return vt.apply(this,arguments)}(f,g);C.updateTokensAndExpiration(B,Y,Number(we))})()}updateTokensAndExpiration(f,g,C){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(f,g){const{refreshToken:C,accessToken:B,expirationTime:Y}=g,we=new sn;return C&&(Ue("string"==typeof C,"internal-error",{appName:f}),we.refreshToken=C),B&&(Ue("string"==typeof B,"internal-error",{appName:f}),we.accessToken=B),Y&&(Ue("number"==typeof Y,"internal-error",{appName:f}),we.expirationTime=Y),we}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new sn,this.toJSON())}_performRefresh(){return Me("not implemented")}}function Ln(v,f){Ue("string"==typeof v||void 0===v,"internal-error",{appName:f})}class tn{constructor(f){var{uid:g,auth:C,stsTokenManager:B}=f,Y=(0,Ce._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Xn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=C,this.stsTokenManager=B,this.accessToken=B.accessToken,this.displayName=Y.displayName||null,this.email=Y.email||null,this.emailVerified=Y.emailVerified||!1,this.phoneNumber=Y.phoneNumber||null,this.photoURL=Y.photoURL||null,this.isAnonymous=Y.isAnonymous||!1,this.tenantId=Y.tenantId||null,this.metadata=new Fr(Y.createdAt||void 0,Y.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,w.Z)(function*(){const C=yield $n(g,g.stsTokenManager.getToken(g.auth,f));return Ue(C,g.auth,"internal-error"),g.accessToken!==C&&(g.accessToken=C,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),C})()}getIdTokenResult(f){return function(v){return Mn.apply(this,arguments)}(this,f)}reload(){return function(v){return ue.apply(this,arguments)}(this)}_assign(f){this!==f&&(Ue(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new tn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var C=this;return(0,w.Z)(function*(){let B=!1;f.idToken&&f.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(f),B=!0),g&&(yield Ut(C)),yield C.auth._persistUserIfCurrent(C),B&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var f=this;return(0,w.Z)(function*(){const g=yield f.getIdToken();return yield $n(f,function(v,f){return jn.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var C,B,Y,we,$e,yt,Nt,nn;const Zt=null!==(C=g.displayName)&&void 0!==C?C:void 0,yi=null!==(B=g.email)&&void 0!==B?B:void 0,qe=null!==(Y=g.phoneNumber)&&void 0!==Y?Y:void 0,Fi=null!==(we=g.photoURL)&&void 0!==we?we:void 0,fo=null!==($e=g.tenantId)&&void 0!==$e?$e:void 0,Ad=null!==(yt=g._redirectEventId)&&void 0!==yt?yt:void 0,pl=null!==(Nt=g.createdAt)&&void 0!==Nt?Nt:void 0,Pa=null!==(nn=g.lastLoginAt)&&void 0!==nn?nn:void 0,{uid:Ih,emailVerified:ka,isAnonymous:Sd,providerData:Gl,stsTokenManager:Rd}=g;Ue(Ih&&Rd,f,"internal-error");const Ai=sn.fromJSON(this.name,Rd);Ue("string"==typeof Ih,f,"internal-error"),Ln(Zt,f.name),Ln(yi,f.name),Ue("boolean"==typeof ka,f,"internal-error"),Ue("boolean"==typeof Sd,f,"internal-error"),Ln(qe,f.name),Ln(Fi,f.name),Ln(fo,f.name),Ln(Ad,f.name),Ln(pl,f.name),Ln(Pa,f.name);const $s=new tn({uid:Ih,auth:f,email:yi,emailVerified:ka,displayName:Zt,isAnonymous:Sd,photoURL:Fi,phoneNumber:qe,tenantId:fo,stsTokenManager:Ai,createdAt:pl,lastLoginAt:Pa});return Gl&&Array.isArray(Gl)&&($s.providerData=Gl.map(Dh=>Object.assign({},Dh))),Ad&&($s._redirectEventId=Ad),$s}static _fromIdTokenResponse(f,g,C=!1){return(0,w.Z)(function*(){const B=new sn;B.updateFromServerResponse(g);const Y=new tn({uid:g.localId,auth:f,stsTokenManager:B,isAnonymous:C});return yield Ut(Y),Y})()}}const pn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(g,C){var B=this;return(0,w.Z)(function*(){B.storage[g]=C})()}_get(g){var C=this;return(0,w.Z)(function*(){const B=C.storage[g];return void 0===B?null:B})()}_remove(g){var C=this;return(0,w.Z)(function*(){delete C.storage[g]})()}_addListener(g,C){}_removeListener(g,C){}}return v.type="NONE",v})();function Jt(v,f,g){return`firebase:${v}:${f}:${g}`}class Vn{constructor(f,g,C){this.persistence=f,this.auth=g,this.userKey=C;const{config:B,name:Y}=this.auth;this.fullUserKey=Jt(this.userKey,B.apiKey,Y),this.fullPersistenceKey=Jt("persistence",B.apiKey,Y),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,w.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?tn._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,w.Z)(function*(){if(g.persistence===f)return;const C=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,C?g.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,C="authUser"){return(0,w.Z)(function*(){if(!g.length)return new Vn(xe(pn),f,C);const B=(yield Promise.all(g.map(function(){var Nt=(0,w.Z)(function*(nn){if(yield nn._isAvailable())return nn});return function(nn){return Nt.apply(this,arguments)}}()))).filter(Nt=>Nt);let Y=B[0]||xe(pn);const we=Jt(C,f.config.apiKey,f.name);let $e=null;for(const Nt of g)try{const nn=yield Nt._get(we);if(nn){const Zt=tn._fromJSON(f,nn);Nt!==Y&&($e=Zt),Y=Nt;break}}catch(nn){}const yt=B.filter(Nt=>Nt._shouldAllowMigration);return Y._shouldAllowMigration&&yt.length?(Y=yt[0],$e&&(yield Y._set(we,$e.toJSON())),yield Promise.all(g.map(function(){var Nt=(0,w.Z)(function*(nn){if(nn!==Y)try{yield nn._remove(we)}catch(Zt){}});return function(nn){return Nt.apply(this,arguments)}}())),new Vn(Y,f,C)):new Vn(Y,f,C)})()}}function ks(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(os(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(_s(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ei(f))return"Blackberry";if(dr(f))return"Webos";if(vs(f))return"Safari";if((f.includes("chrome/")||ss(f))&&!f.includes("edge/"))return"Chrome";if(Es(f))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function _s(v=(0,ne.z$)()){return/firefox\//i.test(v)}function vs(v=(0,ne.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ss(v=(0,ne.z$)()){return/crios\//i.test(v)}function os(v=(0,ne.z$)()){return/iemobile/i.test(v)}function Es(v=(0,ne.z$)()){return/android/i.test(v)}function Ei(v=(0,ne.z$)()){return/blackberry/i.test(v)}function dr(v=(0,ne.z$)()){return/webos/i.test(v)}function hr(v=(0,ne.z$)()){return/iphone|ipad|ipod/i.test(v)}function Sr(v=(0,ne.z$)()){return hr(v)||Es(v)||dr(v)||Ei(v)||/windows phone/i.test(v)||os(v)}function Qn(v,f=[]){let g;switch(v){case"Browser":g=ks((0,ne.z$)());break;case"Worker":g=`${ks((0,ne.z$)())}-${v}`;break;default:g=v}const C=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${Re.SDK_VERSION}/${C}`}class Zs{constructor(f,g){this.app=f,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ht(this),this.idTokenSubscription=new ht(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Te,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(f,g){var C=this;return g&&(this._popupRedirectResolver=xe(g)),this._initializationPromise=this.queue((0,w.Z)(function*(){var B;C._deleted||(C.persistenceManager=yield Vn.create(C,f),!C._deleted&&((null===(B=C._popupRedirectResolver)||void 0===B?void 0:B._shouldInitProactively)&&(yield C._popupRedirectResolver._initialize(C)),yield C.initializeCurrentUser(g),!C._deleted&&(C._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,w.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,w.Z)(function*(){var C;let B=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Y=null===(C=g.redirectUser)||void 0===C?void 0:C._redirectEventId,we=null==B?void 0:B._redirectEventId,$e=yield g.tryRedirectSignIn(f);(!Y||Y===we)&&(null==$e?void 0:$e.user)&&(B=$e.user)}return B?B._redirectEventId?(Ue(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===B._redirectEventId?g.directlySetCurrentUser(B):g.reloadAndSetCurrentUserOrClear(B)):g.reloadAndSetCurrentUserOrClear(B):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,w.Z)(function*(){let C=null;try{C=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(B){yield g._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,w.Z)(function*(){try{yield Ut(f)}catch(C){if("auth/network-request-failed"!==C.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,w.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,w.Z)(function*(){const C=f?(0,ne.m9)(f):null;return C&&Ue(C.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(C&&C._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,w.Z)(function*(){if(!g._deleted)return f&&Ue(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,w.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,w.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,w.Z)(function*(){yield g.assertedPersistence.setPersistence(xe(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new ne.LL("auth","Firebase",f())}onAuthStateChanged(f,g,C){return this.registerStateListener(this.authStateSubscription,f,g,C)}onIdTokenChanged(f,g,C){return this.registerStateListener(this.idTokenSubscription,f,g,C)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var C=this;return(0,w.Z)(function*(){const B=yield C.getOrInitRedirectPersistenceManager(g);return null===f?B.removeCurrentUser():B.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,w.Z)(function*(){if(!g.redirectPersistenceManager){const C=f&&xe(f)||g._popupRedirectResolver;Ue(C,g,"argument-error"),g.redirectPersistenceManager=yield Vn.create(g,[xe(C._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,w.Z)(function*(){var C,B;return g._isInitialized&&(yield g.queue((0,w.Z)(function*(){}))),(null===(C=g._currentUser)||void 0===C?void 0:C._redirectEventId)===f?g._currentUser:(null===(B=g.redirectUser)||void 0===B?void 0:B._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,w.Z)(function*(){if(f===g.currentUser)return g.queue((0,w.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,C,B){if(this._deleted)return()=>{};const Y="function"==typeof g?g:g.next.bind(g),we=this._isInitialized?Promise.resolve():this._initializationPromise;return Ue(we,this,"internal-error"),we.then(()=>Y(this.currentUser)),"function"==typeof g?f.addObserver(g,C,B):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,w.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Qn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function gn(v){return(0,ne.m9)(v)}class ht{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,ne.ne)(g=>this.observer=g)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zt(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Ri(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Kn{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Me("not implemented")}_getIdTokenResponse(f){return Me("not implemented")}_linkToIdToken(f,g){return Me("not implemented")}_getReauthenticationResolver(f){return Me("not implemented")}}function xn(v,f){return ji.apply(this,arguments)}function ji(){return(ji=(0,w.Z)(function*(v,f){return $t(v,"POST","/v1/accounts:resetPassword",pt(v,f))})).apply(this,arguments)}function $i(v,f){return qt.apply(this,arguments)}function qt(){return(qt=(0,w.Z)(function*(v,f){return $t(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Fs(v,f){return as.apply(this,arguments)}function as(){return(as=(0,w.Z)(function*(v,f){return $t(v,"POST","/v1/accounts:update",pt(v,f))})).apply(this,arguments)}function Lr(){return(Lr=(0,w.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithPassword",pt(v,f))})).apply(this,arguments)}function Rr(v,f){return xi.apply(this,arguments)}function xi(){return(xi=(0,w.Z)(function*(v,f){return $t(v,"POST","/v1/accounts:sendOobCode",pt(v,f))})).apply(this,arguments)}function Ni(v,f){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,w.Z)(function*(v,f){return Rr(v,f)})).apply(this,arguments)}function Rn(v,f){return ws.apply(this,arguments)}function ws(){return(ws=(0,w.Z)(function*(v,f){return Rr(v,f)})).apply(this,arguments)}function Hi(v,f){return bs.apply(this,arguments)}function bs(){return(bs=(0,w.Z)(function*(v,f){return Rr(v,f)})).apply(this,arguments)}function hi(v,f){return bi.apply(this,arguments)}function bi(){return(bi=(0,w.Z)(function*(v,f){return Rr(v,f)})).apply(this,arguments)}function er(){return(er=(0,w.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithEmailLink",pt(v,f))})).apply(this,arguments)}function Ur(){return(Ur=(0,w.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithEmailLink",pt(v,f))})).apply(this,arguments)}class zr extends Kn{constructor(f,g,C,B=null){super("password",C),this._email=f,this._password=g,this._tenantId=B}static _fromEmailAndPassword(f,g){return new zr(f,g,"password")}static _fromEmailAndCode(f,g,C=null){return new zr(f,g,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,w.Z)(function*(){switch(g.signInMethod){case"password":return function(v,f){return Lr.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(v,f){return er.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:rt(f,"internal-error")}})()}_linkToIdToken(f,g){var C=this;return(0,w.Z)(function*(){switch(C.signInMethod){case"password":return $i(f,{idToken:g,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function(v,f){return Ur.apply(this,arguments)}(f,{idToken:g,email:C._email,oobCode:C._password});default:rt(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function wn(v,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,w.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithIdp",pt(v,f))})).apply(this,arguments)}class fr extends Kn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new fr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):rt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:C,signInMethod:B}=g,Y=(0,Ce._T)(g,["providerId","signInMethod"]);if(!C||!B)return null;const we=new fr(C,B);return we.idToken=Y.idToken||void 0,we.accessToken=Y.accessToken||void 0,we.secret=Y.secret,we.nonce=Y.nonce,we.pendingToken=Y.pendingToken||null,we}_getIdTokenResponse(f){return wn(f,this.buildRequest())}_linkToIdToken(f,g){const C=this.buildRequest();return C.idToken=g,wn(f,C)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,wn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,ne.xO)(g)}return f}}function pr(v,f){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,w.Z)(function*(v,f){return $t(v,"POST","/v1/accounts:sendVerificationCode",pt(v,f))})).apply(this,arguments)}function ar(){return(ar=(0,w.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithPhoneNumber",pt(v,f))})).apply(this,arguments)}function zi(){return(zi=(0,w.Z)(function*(v,f){const g=yield sr(v,"POST","/v1/accounts:signInWithPhoneNumber",pt(v,f));if(g.temporaryProof)throw An(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const ko={USER_NOT_FOUND:"user-not-found"};function go(){return(go=(0,w.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithPhoneNumber",pt(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ko)})).apply(this,arguments)}class fi extends Kn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new fi({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new fi({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function(v,f){return ar.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function(v,f){return zi.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(v,f){return go.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:C,verificationCode:B}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:C,code:B}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:C,phoneNumber:B,temporaryProof:Y}=f;return C||g||B||Y?new fi({verificationId:g,verificationCode:C,phoneNumber:B,temporaryProof:Y}):null}}class Kr{constructor(f){var g,C,B,Y,we,$e;const yt=(0,ne.zd)((0,ne.pd)(f)),Nt=null!==(g=yt.apiKey)&&void 0!==g?g:null,nn=null!==(C=yt.oobCode)&&void 0!==C?C:null,Zt=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(B=yt.mode)&&void 0!==B?B:null);Ue(Nt&&nn&&Zt,"argument-error"),this.apiKey=Nt,this.operation=Zt,this.code=nn,this.continueUrl=null!==(Y=yt.continueUrl)&&void 0!==Y?Y:null,this.languageCode=null!==(we=yt.languageCode)&&void 0!==we?we:null,this.tenantId=null!==($e=yt.tenantId)&&void 0!==$e?$e:null}static parseLink(f){const g=function(v){const f=(0,ne.zd)((0,ne.pd)(v)).link,g=f?(0,ne.zd)((0,ne.pd)(f)).deep_link_id:null,C=(0,ne.zd)((0,ne.pd)(v)).deep_link_id;return(C?(0,ne.zd)((0,ne.pd)(C)).link:null)||C||g||f||v}(f);try{return new Kr(g)}catch(C){return null}}}let Js=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,C){return zr._fromEmailAndPassword(g,C)}static credentialWithLink(g,C){const B=Kr.parseLink(C);return Ue(B,"argument-error"),zr._fromEmailAndCode(g,B.code,B.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Hn{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Oi extends Hn{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class xr extends Oi{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Ue("providerId"in g&&"signInMethod"in g,"argument-error"),fr._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Ue(f.idToken||f.accessToken,"argument-error"),fr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return xr.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return xr.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:C,oauthTokenSecret:B,pendingToken:Y,nonce:we,providerId:$e}=f;if(!C&&!B&&!g&&!Y||!$e)return null;try{return new xr($e)._credential({idToken:g,accessToken:C,nonce:we,pendingToken:Y})}catch(yt){return null}}}let Xs=(()=>{class v extends Oi{constructor(){super("facebook.com")}static credential(g){return fr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(C){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ds=(()=>{class v extends Oi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,C){return fr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:C})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:C,oauthAccessToken:B}=g;if(!C&&!B)return null;try{return v.credential(C,B)}catch(Y){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Pi=(()=>{class v extends Oi{constructor(){super("github.com")}static credential(g){return fr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(C){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class bn extends Kn{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return wn(f,this.buildRequest())}_linkToIdToken(f,g){const C=this.buildRequest();return C.idToken=g,wn(f,C)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,wn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:C,signInMethod:B,pendingToken:Y}=g;return C&&B&&Y&&C===B?new bn(C,Y):null}static _create(f,g){return new bn(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Ts=(()=>{class v extends Oi{constructor(){super("twitter.com")}static credential(g,C){return fr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:C})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:C,oauthTokenSecret:B}=g;if(!C||!B)return null;try{return v.credential(C,B)}catch(Y){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function ls(v,f){return eo.apply(this,arguments)}function eo(){return(eo=(0,w.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signUp",pt(v,f))})).apply(this,arguments)}class Nr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,C,B=!1){return(0,w.Z)(function*(){const Y=yield tn._fromIdTokenResponse(f,C,B),we=to(C);return new Nr({user:Y,providerId:we,_tokenResponse:C,operationType:g})})()}static _forOperation(f,g,C){return(0,w.Z)(function*(){yield f._updateTokensIfNecessary(C,!0);const B=to(C);return new Nr({user:f,providerId:B,_tokenResponse:C,operationType:g})})()}}function to(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Zr(){return(Zr=(0,w.Z)(function*(v){var f;const g=gn(v);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new Nr({user:g.currentUser,providerId:null,operationType:"signIn"});const C=yield ls(g,{returnSecureToken:!0}),B=yield Nr._fromIdTokenResponse(g,"signIn",C,!0);return yield g._updateCurrentUser(B.user),B})).apply(this,arguments)}class Ls extends ne.ZR{constructor(f,g,C,B){var Y;super(g.code,g.message),this.operationType=C,this.user=B,this.name="FirebaseError",Object.setPrototypeOf(this,Ls.prototype),this.appName=f.name,this.code=g.code,this.tenantId=null!==(Y=f.tenantId)&&void 0!==Y?Y:void 0,this.serverResponse=g.customData.serverResponse}static _fromErrorAndOperation(f,g,C,B){return new Ls(f,g,C,B)}}function si(v,f,g,C){return("reauthenticate"===f?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(Y=>{throw"auth/multi-factor-auth-required"===Y.code?Ls._fromErrorAndOperation(v,Y,f,C):Y})}function qi(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function Ki(){return(Ki=(0,w.Z)(function*(v,f){const g=(0,ne.m9)(v);yield F(!0,g,f);const{providerUserInfo:C}=yield Pt(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),B=qi(C||[]);return g.providerData=g.providerData.filter(Y=>B.has(Y.providerId)),B.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function L(v,f){return z.apply(this,arguments)}function z(){return(z=(0,w.Z)(function*(v,f,g=!1){const C=yield $n(v,f._linkToIdToken(v.auth,yield v.getIdToken()),g);return Nr._forOperation(v,"link",C)})).apply(this,arguments)}function F(v,f,g){return K.apply(this,arguments)}function K(){return(K=(0,w.Z)(function*(v,f,g){yield Ut(f);const B=!1===v?"provider-already-linked":"no-such-provider";Ue(qi(f.providerData).has(g)===v,f.auth,B)})).apply(this,arguments)}function le(v,f){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,w.Z)(function*(v,f,g=!1){const{auth:C}=v,B="reauthenticate";try{const Y=yield $n(v,si(C,B,f,v),g);Ue(Y.idToken,C,"internal-error");const we=Rt(Y.idToken);Ue(we,C,"internal-error");const{sub:$e}=we;return Ue(v.uid===$e,C,"user-mismatch"),Nr._forOperation(v,B,Y)}catch(Y){throw"auth/user-not-found"===(null==Y?void 0:Y.code)&&rt(C,"user-mismatch"),Y}})).apply(this,arguments)}function et(v,f){return P.apply(this,arguments)}function P(){return(P=(0,w.Z)(function*(v,f,g=!1){const C="signIn",B=yield si(v,C,f),Y=yield Nr._fromIdTokenResponse(v,C,B);return g||(yield v._updateCurrentUser(Y.user)),Y})).apply(this,arguments)}function x(v,f){return A.apply(this,arguments)}function A(){return(A=(0,w.Z)(function*(v,f){return et(gn(v),f)})).apply(this,arguments)}function W(v,f){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,w.Z)(function*(v,f){const g=(0,ne.m9)(v);return yield F(!1,g,f.providerId),L(g,f)})).apply(this,arguments)}function it(v,f){return At.apply(this,arguments)}function At(){return(At=(0,w.Z)(function*(v,f){return le((0,ne.m9)(v),f)})).apply(this,arguments)}function Pn(v,f){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,w.Z)(function*(v,f){return sr(v,"POST","/v1/accounts:signInWithCustomToken",pt(v,f))})).apply(this,arguments)}function Nn(){return(Nn=(0,w.Z)(function*(v,f){const g=gn(v),C=yield Pn(g,{token:f,returnSecureToken:!0}),B=yield Nr._fromIdTokenResponse(g,"signIn",C);return yield g._updateCurrentUser(B.user),B})).apply(this,arguments)}class ai{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Zi._fromServerResponse(f,g):rt(f,"internal-error")}}class Zi extends ai{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Zi(g)}}function ur(v,f,g){var C;Ue((null===(C=g.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),Ue(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Ue(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Ue(g.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function mo(){return(mo=(0,w.Z)(function*(v,f,g){const C=(0,ne.m9)(v),B={requestType:"PASSWORD_RESET",email:f};g&&ur(C,B,g),yield Rn(C,B)})).apply(this,arguments)}function Kt(){return(Kt=(0,w.Z)(function*(v,f,g){yield xn((0,ne.m9)(v),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Au(){return(Au=(0,w.Z)(function*(v,f){yield Fs((0,ne.m9)(v),{oobCode:f})})).apply(this,arguments)}function Xu(v,f){return za.apply(this,arguments)}function za(){return(za=(0,w.Z)(function*(v,f){const g=(0,ne.m9)(v),C=yield xn(g,{oobCode:f}),B=C.requestType;switch(Ue(B,g,"internal-error"),B){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ue(C.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ue(C.mfaInfo,g,"internal-error");default:Ue(C.email,g,"internal-error")}let Y=null;return C.mfaInfo&&(Y=ai._fromServerResponse(gn(g),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:Y},operation:B}})).apply(this,arguments)}function Ka(){return(Ka=(0,w.Z)(function*(v,f){const{data:g}=yield Xu((0,ne.m9)(v),f);return g.email})).apply(this,arguments)}function Ze(){return(Ze=(0,w.Z)(function*(v,f,g){const C=gn(v),B=yield ls(C,{returnSecureToken:!0,email:f,password:g}),Y=yield Nr._fromIdTokenResponse(C,"signIn",B);return yield C._updateCurrentUser(Y.user),Y})).apply(this,arguments)}function Gn(){return(Gn=(0,w.Z)(function*(v,f,g){const C=(0,ne.m9)(v),B={requestType:"EMAIL_SIGNIN",email:f};Ue(g.handleCodeInApp,C,"argument-error"),g&&ur(C,B,g),yield Hi(C,B)})).apply(this,arguments)}function Yi(){return(Yi=(0,w.Z)(function*(v,f,g){const C=(0,ne.m9)(v),B=Js.credentialWithLink(f,g||Ye());return Ue(B._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),x(C,B)})).apply(this,arguments)}function Za(v,f){return cs.apply(this,arguments)}function cs(){return(cs=(0,w.Z)(function*(v,f){return $t(v,"POST","/v1/accounts:createAuthUri",pt(v,f))})).apply(this,arguments)}function Xo(){return(Xo=(0,w.Z)(function*(v,f){const C={identifier:f,continueUri:Et()?Ye():"http://localhost"},{signinMethods:B}=yield Za((0,ne.m9)(v),C);return B||[]})).apply(this,arguments)}function ro(){return(ro=(0,w.Z)(function*(v,f){const g=(0,ne.m9)(v),B={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&ur(g.auth,B,f);const{email:Y}=yield Ni(g.auth,B);Y!==v.email&&(yield v.reload())})).apply(this,arguments)}function pi(){return(pi=(0,w.Z)(function*(v,f,g){const C=(0,ne.m9)(v),Y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};g&&ur(C.auth,Y,g);const{email:we}=yield hi(C.auth,Y);we!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ru(v,f){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,w.Z)(function*(v,f){return $t(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Vo(){return(Vo=(0,w.Z)(function*(v,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const C=(0,ne.m9)(v),Y={idToken:yield C.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},we=yield $n(C,Ru(C.auth,Y));C.displayName=we.displayName||null,C.photoURL=we.photoUrl||null;const $e=C.providerData.find(({providerId:yt})=>"password"===yt);$e&&($e.displayName=C.displayName,$e.photoURL=C.photoURL),yield C._updateTokensIfNecessary(we)})).apply(this,arguments)}function tl(v,f,g){return ea.apply(this,arguments)}function ea(){return(ea=(0,w.Z)(function*(v,f,g){const{auth:C}=v,Y={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(Y.email=f),g&&(Y.password=g);const we=yield $n(v,$i(C,Y));yield v._updateTokensIfNecessary(we,!0)})).apply(this,arguments)}class io{constructor(f,g,C={}){this.isNewUser=f,this.providerId=g,this.profile=C}}class _o extends io{constructor(f,g,C,B){super(f,g,C),this.username=B}}class Qa extends io{constructor(f,g){super(f,"facebook.com",g)}}class ds extends _o{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class ta extends io{constructor(f,g){super(f,"google.com",g)}}class xu extends _o{constructor(f,g,C){super(f,"twitter.com",g,C)}}function hs(v){const{user:f,_tokenResponse:g}=v;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(v){var f,g;if(!v)return null;const{providerId:C}=v,B=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},Y=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&(null==v?void 0:v.idToken)){const we=null===(g=null===(f=Rt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(we)return new io(Y,"anonymous"!==we&&"custom"!==we?we:null)}if(!C)return null;switch(C){case"facebook.com":return new Qa(Y,B);case"github.com":return new ds(Y,B);case"google.com":return new ta(Y,B);case"twitter.com":return new xu(Y,B,v.screenName||null);case"custom":case"anonymous":return new io(Y,null);default:return new io(Y,C,B)}}(g)}class Ss{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Ss("enroll",f)}static _fromMfaPendingCredential(f){return new Ss("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,C;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Ss._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(C=f.multiFactorSession)||void 0===C?void 0:C.idToken)return Ss._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Eo{constructor(f,g,C){this.session=f,this.hints=g,this.signInResolver=C}static _fromError(f,g){const C=gn(f),B=(g.serverResponse.mfaInfo||[]).map(we=>ai._fromServerResponse(C,we));Ue(g.serverResponse.mfaPendingCredential,C,"internal-error");const Y=Ss._fromMfaPendingCredential(g.serverResponse.mfaPendingCredential);return new Eo(Y,B,function(){var we=(0,w.Z)(function*($e){const yt=yield $e._process(C,Y);delete g.serverResponse.mfaInfo,delete g.serverResponse.mfaPendingCredential;const Nt=Object.assign(Object.assign({},g.serverResponse),{idToken:yt.idToken,refreshToken:yt.refreshToken});switch(g.operationType){case"signIn":const nn=yield Nr._fromIdTokenResponse(C,g.operationType,Nt);return yield C._updateCurrentUser(nn.user),nn;case"reauthenticate":return Ue(g.user,C,"internal-error"),Nr._forOperation(g.user,g.operationType,Nt);default:rt(C,"internal-error")}});return function($e){return we.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,w.Z)(function*(){return g.signInResolver(f)})()}}function Uo(v,f){return $t(v,"POST","/v2/accounts/mfaEnrollment:start",pt(v,f))}class Vs{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(C=>ai._fromServerResponse(f.auth,C)))})}static _fromUser(f){return new Vs(f)}getSession(){var f=this;return(0,w.Z)(function*(){return Ss._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var C=this;return(0,w.Z)(function*(){const B=f,Y=yield C.getSession(),we=yield $n(C.user,B._process(C.user.auth,Y,g));return yield C.user._updateTokensIfNecessary(we),C.user.reload()})()}unenroll(f){var g=this;return(0,w.Z)(function*(){const C="string"==typeof f?f:f.uid,B=yield g.user.getIdToken(),Y=yield $n(g.user,function(v,f){return $t(v,"POST","/v2/accounts/mfaEnrollment:withdraw",pt(v,f))}(g.user.auth,{idToken:B,mfaEnrollmentId:C}));g.enrolledFactors=g.enrolledFactors.filter(({uid:we})=>we!==C),yield g.user._updateTokensIfNecessary(Y);try{yield g.user.reload()}catch(we){if("auth/user-token-expired"!==we.code)throw we}})()}}const Rs=new WeakMap,Bo="__sak";class Us{constructor(f,g){this.storage=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Bo,"1"),this.storage.removeItem(Bo),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}}const Bs=(()=>{class v extends Us{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(g,C)=>this.onStorageEvent(g,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,ne.z$)();return vs(v)||hr(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Sr(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const C of Object.keys(this.listeners)){const B=this.storage.getItem(C),Y=this.localCache[C];B!==Y&&g(C,Y,B)}}onStorageEvent(g,C=!1){if(!g.key)return void this.forAllChangedKeys(($e,yt,Nt)=>{this.notifyListeners($e,Nt)});const B=g.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const $e=this.storage.getItem(B);if(g.newValue!==$e)null!==g.newValue?this.storage.setItem(B,g.newValue):this.storage.removeItem(B);else if(this.localCache[B]===g.newValue&&!C)return}const Y=()=>{const $e=this.storage.getItem(B);!C&&this.localCache[B]===$e||this.notifyListeners(B,$e)},we=this.storage.getItem(B);(0,ne.w1)()&&10===document.documentMode&&we!==g.newValue&&g.newValue!==g.oldValue?setTimeout(Y,10):Y()}notifyListeners(g,C){this.localCache[g]=C;const B=this.listeners[g];if(B)for(const Y of Array.from(B))Y(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,C,B)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:C,newValue:B}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(C)}_removeListener(g,C){this.listeners[g]&&(this.listeners[g].delete(C),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,C){var B=()=>super._set,Y=this;return(0,w.Z)(function*(){yield B().call(Y,g,C),Y.localCache[g]=JSON.stringify(C)})()}_get(g){var C=()=>super._get,B=this;return(0,w.Z)(function*(){const Y=yield C().call(B,g);return B.localCache[g]=JSON.stringify(Y),Y})()}_remove(g){var C=()=>super._remove,B=this;return(0,w.Z)(function*(){yield C().call(B,g),delete B.localCache[g]})()}}return v.type="LOCAL",v})(),fs=(()=>{class v extends Us{constructor(){super(window.sessionStorage,"SESSION")}_addListener(g,C){}_removeListener(g,C){}}return v.type="SESSION",v})();let oo=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const C=this.receivers.find(Y=>Y.isListeningto(g));if(C)return C;const B=new v(g);return this.receivers.push(B),B}isListeningto(g){return this.eventTarget===g}handleEvent(g){var C=this;return(0,w.Z)(function*(){const B=g,{eventId:Y,eventType:we,data:$e}=B.data,yt=C.handlersMap[we];if(!(null==yt?void 0:yt.size))return;B.ports[0].postMessage({status:"ack",eventId:Y,eventType:we});const Nt=Array.from(yt).map(function(){var Zt=(0,w.Z)(function*(yi){return yi(B.origin,$e)});return function(yi){return Zt.apply(this,arguments)}}()),nn=yield function(v){return Promise.all(v.map(function(){var f=(0,w.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(C){return{fulfilled:!1,reason:C}}});return function(g){return f.apply(this,arguments)}}()))}(Nt);B.ports[0].postMessage({status:"done",eventId:Y,eventType:we,response:nn})})()}_subscribe(g,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(C)}_unsubscribe(g,C){this.handlersMap[g]&&C&&this.handlersMap[g].delete(C),(!C||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function eu(v="",f=10){let g="";for(let C=0;C<f;C++)g+=Math.floor(10*Math.random());return v+g}class Pl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,C=50){var B=this;return(0,w.Z)(function*(){const Y="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Y)throw new Error("connection_unavailable");let we,$e;return new Promise((yt,Nt)=>{const nn=eu("",20);Y.port1.start();const Zt=setTimeout(()=>{Nt(new Error("unsupported_event"))},C);$e={messageChannel:Y,onMessage(yi){const qe=yi;if(qe.data.eventId===nn)switch(qe.data.status){case"ack":clearTimeout(Zt),we=setTimeout(()=>{Nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(we),yt(qe.data.response);break;default:clearTimeout(Zt),clearTimeout(we),Nt(new Error("invalid_response"))}}},B.handlers.add($e),Y.port1.addEventListener("message",$e.onMessage),B.target.postMessage({eventType:f,eventId:nn,data:g},[Y.port2])}).finally(()=>{$e&&B.removeMessageHandler($e)})})()}}function rr(){return window}function bo(){return void 0!==rr().WorkerGlobalScope&&"function"==typeof rr().importScripts}function Ia(){return(Ia=(0,w.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Qr="firebaseLocalStorageDb",Ji="firebaseLocalStorage",uo="fbase_key";class nu{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function at(v,f){return v.transaction([Ji],f?"readwrite":"readonly").objectStore(Ji)}function Io(){const v=indexedDB.open(Qr,1);return new Promise((f,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(Ji,{keyPath:uo})}catch(B){g(B)}}),v.addEventListener("success",(0,w.Z)(function*(){const C=v.result;C.objectStoreNames.contains(Ji)?f(C):(C.close(),yield function(){const v=indexedDB.deleteDatabase(Qr);return new nu(v).toPromise()}(),f(yield Io()))}))})}function ru(v,f,g){return St.apply(this,arguments)}function St(){return(St=(0,w.Z)(function*(v,f,g){const C=at(v,!0).put({[uo]:f,value:g});return new nu(C).toPromise()})).apply(this,arguments)}function Do(){return(Do=(0,w.Z)(function*(v,f){const g=at(v,!1).get(f),C=yield new nu(g).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function mt(v,f){const g=at(v,!0).delete(f);return new nu(g).toPromise()}const jo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,w.Z)(function*(){return g.db||(g.db=yield Io()),g.db})()}_withRetries(g){var C=this;return(0,w.Z)(function*(){let B=0;for(;;)try{const Y=yield C._openDb();return yield g(Y)}catch(Y){if(B++>3)throw Y;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,w.Z)(function*(){return bo()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,w.Z)(function*(){g.receiver=oo._getInstance(bo()?self:null),g.receiver._subscribe("keyChanged",function(){var C=(0,w.Z)(function*(B,Y){return{keyProcessed:(yield g._poll()).includes(Y.key)}});return function(B,Y){return C.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var C=(0,w.Z)(function*(B,Y){return["keyChanged"]});return function(B,Y){return C.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,w.Z)(function*(){var C,B;if(g.activeServiceWorker=yield function(){return Ia.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Pl(g.activeServiceWorker);const Y=yield g.sender._send("ping",{},800);!Y||(null===(C=Y[0])||void 0===C?void 0:C.fulfilled)&&(null===(B=Y[0])||void 0===B?void 0:B.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var C=this;return(0,w.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:g},C.serviceWorkerReceiverAvailable?800:50)}catch(B){}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Io();return yield ru(g,Bo,"1"),yield mt(g,Bo),!0}catch(g){}return!1})()}_withPendingWrite(g){var C=this;return(0,w.Z)(function*(){C.pendingWrites++;try{yield g()}finally{C.pendingWrites--}})()}_set(g,C){var B=this;return(0,w.Z)(function*(){return B._withPendingWrite((0,w.Z)(function*(){return yield B._withRetries(Y=>ru(Y,g,C)),B.localCache[g]=C,B.notifyServiceWorker(g)}))})()}_get(g){var C=this;return(0,w.Z)(function*(){const B=yield C._withRetries(Y=>function(v,f){return Do.apply(this,arguments)}(Y,g));return C.localCache[g]=B,B})()}_remove(g){var C=this;return(0,w.Z)(function*(){return C._withPendingWrite((0,w.Z)(function*(){return yield C._withRetries(B=>mt(B,g)),delete C.localCache[g],C.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,w.Z)(function*(){const C=yield g._withRetries(we=>{const $e=at(we,!1).getAll();return new nu($e).toPromise()});if(!C)return[];if(0!==g.pendingWrites)return[];const B=[],Y=new Set;for(const{fbase_key:we,value:$e}of C)Y.add(we),JSON.stringify(g.localCache[we])!==JSON.stringify($e)&&(g.notifyListeners(we,$e),B.push(we));for(const we of Object.keys(g.localCache))g.localCache[we]&&!Y.has(we)&&(g.notifyListeners(we,null),B.push(we));return B})()}notifyListeners(g,C){this.localCache[g]=C;const B=this.listeners[g];if(B)for(const Y of Array.from(B))Y(C)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(C)}_removeListener(g,C){this.listeners[g]&&(this.listeners[g].delete(C),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function R(v,f){return $t(v,"POST","/v2/accounts/mfaSignIn:start",pt(v,f))}function O(){return(O=(0,w.Z)(function*(v){return(yield $t(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function q(v){return new Promise((f,g)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=f,C.onerror=B=>{const Y=se("internal-error");Y.customData=B,g(Y)},C.type="text/javascript",C.charset="UTF-8",function(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(C)})}function ie(v){return`__${v}${Math.floor(1e6*Math.random())}`}const gt=1e12;class Cn{constructor(f){this.auth=f,this.counter=gt,this._widgets=new Map}render(f,g){const C=this.counter;return this._widgets.set(C,new It(f,this.auth.name,g||{})),this.counter++,C}reset(f){var g;const C=f||gt;null===(g=this._widgets.get(C))||void 0===g||g.delete(),this._widgets.delete(C)}getResponse(f){var g;return(null===(g=this._widgets.get(f||gt))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,w.Z)(function*(){var C;return null===(C=g._widgets.get(f||gt))||void 0===C||C.execute(),""})()}}class It{constructor(f,g,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const B="string"==typeof f?document.getElementById(f):f;Ue(B,"argument-error",{appName:g}),this.container=B,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<50;C++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}();const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const an=ie("rcb"),$r=new Ot(3e4,6e4);class Hr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!rr().grecaptcha}load(f,g=""){return Ue((v=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(rr().grecaptcha):new Promise((C,B)=>{const Y=rr().setTimeout(()=>{B(se(f,"network-request-failed"))},$r.get());rr()[an]=()=>{rr().clearTimeout(Y),delete rr()[an];const $e=rr().grecaptcha;if(!$e)return void B(se(f,"internal-error"));const yt=$e.render;$e.render=(Nt,nn)=>{const Zt=yt(Nt,nn);return this.counter++,Zt},this.hostLanguage=g,C($e)},q(`https://www.google.com/recaptcha/api.js??${(0,ne.xO)({onload:an,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(Y),B(se(f,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!rr().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mr{load(f){return(0,w.Z)(function*(){return new Cn(f)})()}clearedOneInstance(){}}const Jn="recaptcha",To={theme:"light",type:"image"};class rd{constructor(f,g=Object.assign({},To),C){this.parameters=g,this.type=Jn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gn(C),this.isInvisible="invisible"===this.parameters.size,Ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const B="string"==typeof f?document.getElementById(f):f;Ue(B,this.auth,"argument-error"),this.container=B,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mr:new Hr,this.validateStartingState()}verify(){var f=this;return(0,w.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),C=f.getAssertedRecaptcha();return C.getResponse(g)||new Promise(Y=>{const we=$e=>{!$e||(f.tokenChangeListeners.delete(we),Y($e))};f.tokenChangeListeners.add(we),f.isInvisible&&C.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Ue(!this.parameters.sitekey,this.auth,"argument-error"),Ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(C=>C(g)),"function"==typeof f)f(g);else if("string"==typeof f){const C=rr()[f];"function"==typeof C&&C(g)}}}assertNotDestroyed(){Ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,w.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const C=document.createElement("div");g.appendChild(C),g=C}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,w.Z)(function*(){Ue(Et()&&!bo(),f.auth,"internal-error"),yield function(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function(v){return O.apply(this,arguments)}(f.auth);Ue(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class kl{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=fi._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Or(){return(Or=(0,w.Z)(function*(v,f,g){const C=gn(v),B=yield $o(C,f,(0,ne.m9)(g));return new kl(B,Y=>x(C,Y))})).apply(this,arguments)}function Ou(){return(Ou=(0,w.Z)(function*(v,f,g){const C=(0,ne.m9)(v);yield F(!1,C,"phone");const B=yield $o(C.auth,f,(0,ne.m9)(g));return new kl(B,Y=>W(C,Y))})).apply(this,arguments)}function iu(){return(iu=(0,w.Z)(function*(v,f,g){const C=(0,ne.m9)(v),B=yield $o(C.auth,f,(0,ne.m9)(g));return new kl(B,Y=>it(C,Y))})).apply(this,arguments)}function $o(v,f,g){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,w.Z)(function*(v,f,g){var C;const B=yield g.verify();try{let Y;if(Ue("string"==typeof B,v,"argument-error"),Ue(g.type===Jn,v,"argument-error"),Y="string"==typeof f?{phoneNumber:f}:f,"session"in Y){const we=Y.session;if("phoneNumber"in Y)return Ue("enroll"===we.type,v,"internal-error"),(yield Uo(v,{idToken:we.credential,phoneEnrollmentInfo:{phoneNumber:Y.phoneNumber,recaptchaToken:B}})).phoneSessionInfo.sessionInfo;{Ue("signin"===we.type,v,"internal-error");const $e=(null===(C=Y.multiFactorHint)||void 0===C?void 0:C.uid)||Y.multiFactorUid;return Ue($e,v,"missing-multi-factor-info"),(yield R(v,{mfaPendingCredential:we.credential,mfaEnrollmentId:$e,phoneSignInInfo:{recaptchaToken:B}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:we}=yield pr(v,{phoneNumber:Y.phoneNumber,recaptchaToken:B});return we}}finally{g._reset()}})).apply(this,arguments)}function kt(){return(kt=(0,w.Z)(function*(v,f){yield L((0,ne.m9)(v),f)})).apply(this,arguments)}let Ho=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=gn(g)}verifyPhoneNumber(g,C){return $o(this.auth,g,(0,ne.m9)(C))}static credential(g,C){return fi._fromVerification(g,C)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:C,temporaryProof:B}=g;return C&&B?fi._fromTokenResponse(C,B):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Xi(v,f){return f?xe(f):(Ue(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class lo extends Kn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return wn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return wn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return wn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function su(v){return et(v.auth,new lo(v),v.bypassAuthState)}function ei(v){const{auth:f,user:g}=v;return Ue(g,f,"internal-error"),le(g,new lo(v),v.bypassAuthState)}function ou(v){return S.apply(this,arguments)}function S(){return(S=(0,w.Z)(function*(v){const{auth:f,user:g}=v;return Ue(g,f,"internal-error"),L(g,new lo(v),v.bypassAuthState)})).apply(this,arguments)}class T{constructor(f,g,C,B,Y=!1){this.auth=f,this.resolver=C,this.user=B,this.bypassAuthState=Y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,w.Z)(function*(C,B){f.pendingPromise={resolve:C,reject:B};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(Y){f.reject(Y)}});return function(C,B){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,w.Z)(function*(){const{urlResponse:C,sessionId:B,postBody:Y,tenantId:we,error:$e,type:yt}=f;if($e)return void g.reject($e);const Nt={auth:g.auth,requestUri:C,sessionId:B,tenantId:we||void 0,postBody:Y||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(yt)(Nt))}catch(nn){g.reject(nn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return su;case"linkViaPopup":case"linkViaRedirect":return ou;case"reauthViaPopup":case"reauthViaRedirect":return ei;default:rt(this.auth,"internal-error")}}resolve(f){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const N=new Ot(2e3,1e4);function te(){return(te=(0,w.Z)(function*(v,f,g){const C=gn(v);Wt(v,f,Hn);const B=Xi(C,g);return new Vt(C,"signInViaPopup",f,B).executeNotNull()})).apply(this,arguments)}function Ve(){return(Ve=(0,w.Z)(function*(v,f,g){const C=(0,ne.m9)(v);Wt(C.auth,f,Hn);const B=Xi(C.auth,g);return new Vt(C.auth,"reauthViaPopup",f,B,C).executeNotNull()})).apply(this,arguments)}function nt(){return(nt=(0,w.Z)(function*(v,f,g){const C=(0,ne.m9)(v);Wt(C.auth,f,Hn);const B=Xi(C.auth,g);return new Vt(C.auth,"linkViaPopup",f,B,C).executeNotNull()})).apply(this,arguments)}let Vt=(()=>{class v extends T{constructor(g,C,B,Y,we){super(g,C,Y,we),this.provider=B,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,w.Z)(function*(){const C=yield g.execute();return Ue(C,g.auth,"internal-error"),C})()}onExecution(){var g=this;return(0,w.Z)(function*(){Le(1===g.filter.length,"Popup operations only handle one event");const C=eu();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],C),g.authWindow.associatedEvent=C,g.resolver._originValidation(g.auth).catch(B=>{g.reject(B)}),g.resolver._isIframeWebStorageSupported(g.auth,B=>{B||g.reject(se(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var C,B;this.pollId=(null===(B=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===B?void 0:B.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(se(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,N.get())};g()}}return v.currentPopupAction=null,v})();const qn=new Map;class yr extends T{constructor(f,g,C=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,C),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,w.Z)(function*(){let C=qn.get(g.auth._key());if(!C){try{const Y=(yield function(v,f){return vn.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;C=()=>Promise.resolve(Y)}catch(B){C=()=>Promise.reject(B)}qn.set(g.auth._key(),C)}return C()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,C=this;return(0,w.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(C,f);if("unknown"!==f.type){if(f.eventId){const B=yield C.auth._redirectUserForId(f.eventId);if(B)return C.user=B,g().call(C,f);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function vn(){return(vn=(0,w.Z)(function*(v,f){const g=Ns(f),C="true"===(yield co(v)._get(g));return yield co(v)._remove(g),C})).apply(this,arguments)}function ui(v,f){return ti.apply(this,arguments)}function ti(){return(ti=(0,w.Z)(function*(v,f){return co(v)._set(Ns(f),"true")})).apply(this,arguments)}function co(v){return xe(v._redirectPersistence)}function Ns(v){return Jt("pendingRedirect",v.config.apiKey,v.name)}function Go(){return(Go=(0,w.Z)(function*(v,f,g){const C=gn(v);Wt(v,f,Hn);const B=Xi(C,g);return yield ui(B,C),B._openRedirect(C,f,"signInViaRedirect")})).apply(this,arguments)}function Ta(){return(Ta=(0,w.Z)(function*(v,f,g){const C=(0,ne.m9)(v);Wt(C.auth,f,Hn);const B=Xi(C.auth,g);yield ui(B,C.auth);const Y=yield ia(C);return B._openRedirect(C.auth,f,"reauthViaRedirect",Y)})).apply(this,arguments)}function ra(){return(ra=(0,w.Z)(function*(v,f,g){const C=(0,ne.m9)(v);Wt(C.auth,f,Hn);const B=Xi(C.auth,g);yield F(!1,C,f.providerId),yield ui(B,C.auth);const Y=yield ia(C);return B._openRedirect(C.auth,f,"linkViaRedirect",Y)})).apply(this,arguments)}function lu(){return(lu=(0,w.Z)(function*(v,f){return yield gn(v)._initializationPromise,Ll(v,f,!1)})).apply(this,arguments)}function Ll(v,f){return yc.apply(this,arguments)}function yc(){return(yc=(0,w.Z)(function*(v,f,g=!1){const C=gn(v),B=Xi(C,f),we=yield new yr(C,B,g).execute();return we&&!g&&(delete we.user._redirectEventId,yield C._persistUserIfCurrent(we.user),yield C._setRedirectUser(null,f)),we})).apply(this,arguments)}function ia(v){return rl.apply(this,arguments)}function rl(){return(rl=(0,w.Z)(function*(v){const f=eu(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class ku{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(f,C)&&(g=!0,this.sendToConsumer(f,C),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sa(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var C;if(f.error&&!Sa(f)){const B=(null===(C=f.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";g.onError(se(this.auth,B))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const C=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&C}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Aa(f))}saveEventToCache(f){this.cachedEventUids.add(Aa(f)),this.lastProcessedEventTime=Date.now()}}function Aa(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function Sa({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Gr(v){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,w.Z)(function*(v,f={}){return $t(v,"GET","/v1/projects",f)})).apply(this,arguments)}const zo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cu=/^https?/;function _c(){return(_c=(0,w.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield Gr(v);for(const g of f)try{if(vc(g))return}catch(C){}rt(v,"unauthorized-domain")})).apply(this,arguments)}function vc(v){const f=Ye(),{protocol:g,hostname:C}=new URL(f);if(v.startsWith("chrome-extension://")){const we=new URL(v);return""===we.hostname&&""===C?"chrome-extension:"===g&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&we.hostname===C}if(!cu.test(g))return!1;if(zo.test(v))return C===v;const B=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+B+"|"+B+")$","i").test(C)}const il=new Ot(3e4,6e4);function ph(){const v=rr().___jsl;if(null==v?void 0:v.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let ho=null;function Ul(v){return ho=ho||function(v){return new Promise((f,g)=>{var C,B,Y;function we(){ph(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ph(),g(se(v,"network-request-failed"))},timeout:il.get()})}if(null===(B=null===(C=rr().gapi)||void 0===C?void 0:C.iframes)||void 0===B?void 0:B.Iframe)f(gapi.iframes.getContext());else{if(!(null===(Y=rr().gapi)||void 0===Y?void 0:Y.load)){const $e=ie("iframefcb");return rr()[$e]=()=>{gapi.load?we():g(se(v,"network-request-failed"))},q(`https://apis.google.com/js/api.js?onload=${$e}`)}we()}}).catch(f=>{throw ho=null,f})}(v),ho}const Na=new Ot(5e3,15e3),od={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Bl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fu(v){const f=v.config;Ue(f.authDomain,v,"auth-domain-config-required");const g=f.emulator?en(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,C={apiKey:f.apiKey,appName:v.name,v:Re.SDK_VERSION},B=Bl.get(v.config.apiHost);B&&(C.eid=B);const Y=v._getFrameworks();return Y.length&&(C.fw=Y.join(",")),`${g}?${(0,ne.xO)(C).slice(1)}`}function wc(){return(wc=(0,w.Z)(function*(v){const f=yield Ul(v),g=rr().gapi;return Ue(g,v,"internal-error"),f.open({where:document.body,url:Fu(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:od,dontclear:!0},C=>new Promise(function(){var B=(0,w.Z)(function*(Y,we){yield C.restyle({setHideOnLeave:!1});const $e=se(v,"network-request-failed"),yt=rr().setTimeout(()=>{we($e)},Na.get());function Nt(){rr().clearTimeout(yt),Y(C)}C.ping(Nt).then(Nt,()=>{we($e)})});return function(Y,we){return B.apply(this,arguments)}}()))})).apply(this,arguments)}const Ao={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ul{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Ma(v,f,g,C,B,Y){Ue(v.config.authDomain,v,"auth-domain-config-required"),Ue(v.config.apiKey,v,"invalid-api-key");const we={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:C,v:Re.SDK_VERSION,eventId:B};if(f instanceof Hn){f.setDefaultLanguage(v.languageCode),we.providerId=f.providerId||"",(0,ne.xb)(f.getCustomParameters())||(we.customParameters=JSON.stringify(f.getCustomParameters()));for(const[yt,Nt]of Object.entries(Y||{}))we[yt]=Nt}if(f instanceof Oi){const yt=f.getScopes().filter(Nt=>""!==Nt);yt.length>0&&(we.scopes=yt.join(","))}v.tenantId&&(we.tid=v.tenantId);const $e=we;for(const yt of Object.keys($e))void 0===$e[yt]&&delete $e[yt];return`${function({config:v}){return v.emulator?en(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,ne.xO)($e).slice(1)}`}const sa="webStorageSupport";class oa extends class{constructor(f){this.factorId=f}_process(f,g,C){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,C);case"signin":return this._finalizeSignIn(f,g.credential);default:return Me("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new oa(f)}_finalizeEnroll(f,g,C){return function(v,f){return $t(v,"POST","/v2/accounts/mfaEnrollment:finalize",pt(v,f))}(f,{idToken:g,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function(v,f){return $t(v,"POST","/v2/accounts/mfaSignIn:finalize",pt(v,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let aa=(()=>{class v{constructor(){}static assertion(g){return oa._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var v;class hd{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,w.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(C=>{var B;f((null===(B=C)||void 0===B?void 0:B.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vr(){return window}function So(){return(So=(0,w.Z)(function*(v,f,g){var C;const{BuildInfo:B}=vr();Le(f.sessionId,"AuthEvent did not contain a session ID");const Y=yield Ro(f.sessionId),we={};return hr()?we.ibi=B.packageName:Es()?we.apn=B.packageName:rt(v,"operation-not-supported-in-this-environment"),B.displayName&&(we.appDisplayName=B.displayName),we.sessionId=Y,Ma(v,g,f.type,void 0,null!==(C=f.eventId)&&void 0!==C?C:void 0,we)})).apply(this,arguments)}function Vu(){return(Vu=(0,w.Z)(function*(v){const{BuildInfo:f}=vr(),g={};hr()?g.iosBundleId=f.packageName:Es()?g.androidPackageName=f.packageName:rt(v,"operation-not-supported-in-this-environment"),yield Gr(v,g)})).apply(this,arguments)}function Cc(){return(Cc=(0,w.Z)(function*(v,f,g){const{cordova:C}=vr();let B=()=>{};try{yield new Promise((Y,we)=>{let $e=null;function yt(){var Zt;Y();const yi=null===(Zt=C.plugins.browsertab)||void 0===Zt?void 0:Zt.close;"function"==typeof yi&&yi(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Nt(){$e||($e=window.setTimeout(()=>{we(se(v,"redirect-cancelled-by-user"))},2e3))}function nn(){"visible"===(null==document?void 0:document.visibilityState)&&Nt()}f.addPassiveListener(yt),document.addEventListener("resume",Nt,!1),Es()&&document.addEventListener("visibilitychange",nn,!1),B=()=>{f.removePassiveListener(yt),document.removeEventListener("resume",Nt,!1),document.removeEventListener("visibilitychange",nn,!1),$e&&window.clearTimeout($e)}})}finally{B()}})).apply(this,arguments)}function Ro(v){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,w.Z)(function*(v){const f=pd(v),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(B=>B.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function pd(v){if(Le(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),g=new Uint8Array(f);for(let C=0;C<v.length;C++)g[C]=v.charCodeAt(C);return g}v="Browser",(0,Re._registerComponent)(new Se.wA("auth",(f,{options:g})=>{const C=f.getProvider("app").getImmediate(),{apiKey:B,authDomain:Y}=C.options;return(we=>{Ue(B&&!B.includes(":"),"invalid-api-key",{appName:we.name}),Ue(!(null==Y?void 0:Y.includes(":")),"argument-error",{appName:we.name});const $e={apiKey:B,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qn(v)},yt=new Zs(we,$e);return function(v,f){const g=(null==f?void 0:f.persistence)||[],C=(Array.isArray(g)?g:[g]).map(xe);(null==f?void 0:f.errorMap)&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(C,null==f?void 0:f.popupRedirectResolver)}(yt,g),yt})(C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,C)=>{f.getProvider("auth-internal").initialize()})),(0,Re._registerComponent)(new Se.wA("auth-internal",f=>{const g=gn(f.getProvider("auth").getImmediate());return new hd(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Re.registerVersion)("@firebase/auth","0.18.2",void 0);class yh extends ku{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,w.Z)(function*(){yield f.initPromise})()}}function _h(v){return ua.apply(this,arguments)}function ua(){return(ua=(0,w.Z)(function*(v){const f=yield la()._get(jl(v));return f&&(yield la()._remove(jl(v))),f})).apply(this,arguments)}function js(){const v=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const C=Math.floor(Math.random()*f.length);v.push(f.charAt(C))}return v.join("")}function la(){return xe(Bs)}function jl(v){return Jt("authEvent",v.config.apiKey,v.name)}function yd(v){if(!(null==v?void 0:v.includes("?")))return{};const[f,...g]=v.split("?");return(0,ne.zd)(g.join("?"))}function Dc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:se("no-auth-event")}}function li(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function wd(v=(0,ne.z$)()){return!("file:"!==li()&&"ionic:"!==li()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function du(){try{const v=self.localStorage,f=eu();if(v)return v.setItem(f,"1"),v.removeItem(f),!function(v=(0,ne.z$)()){return(0,ne.w1)()&&11===(null==document?void 0:document.documentMode)||function(v=(0,ne.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,ne.hl)()}catch(v){return Ac()&&(0,ne.hl)()}return!1}function Ac(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dr(){return("http:"===li()||"https:"===li()||(0,ne.ru)()||wd())&&!((0,ne.b$)()||(0,ne.UG)())&&du()&&!Ac()}function Cd(){return wd()&&"undefined"!=typeof document}function Hl(){return(Hl=(0,w.Z)(function*(){return!!Cd()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const ts={LOCAL:"local",NONE:"none",SESSION:"session"},dl=Ue,Eh="persistence";function Sc(v){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,w.Z)(function*(v){yield v._initializationPromise;const f=bh(),g=Jt(Eh,v.config.apiKey,v.name);(null==f?void 0:f.sessionStorage)&&f.sessionStorage.setItem(g,v._getPersistence())})).apply(this,arguments)}function bh(){return"undefined"!=typeof window?window:null}const hl=Ue;class Wr{constructor(){this.browserResolver=xe(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fs,this._completeRedirectFn=Ll}_openPopup(f,g,C,B){var Y=this;return(0,w.Z)(function*(){var we;Le(null===(we=Y.eventManagers[f._key()])||void 0===we?void 0:we.manager,"_initialize() not called before _openPopup()");const $e=Ma(f,g,C,Ye(),B);return function(v,f,g,C=500,B=600){const Y=Math.max((window.screen.availHeight-B)/2,0).toString(),we=Math.max((window.screen.availWidth-C)/2,0).toString();let $e="";const yt=Object.assign(Object.assign({},Ao),{width:C.toString(),height:B.toString(),top:Y,left:we}),Nt=(0,ne.z$)().toLowerCase();g&&($e=ss(Nt)?"_blank":g),_s(Nt)&&(f=f||"http://localhost",yt.scrollbars="yes");const nn=Object.entries(yt).reduce((yi,[qe,Fi])=>`${yi}${qe}=${Fi},`,"");if(function(v=(0,ne.z$)()){var f;return hr(v)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Nt)&&"_self"!==$e)return function(v,f){const g=document.createElement("a");g.href=v,g.target=f;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(C)}(f||"",$e),new ul(null);const Zt=window.open(f||"",$e,nn);Ue(Zt,v,"popup-blocked");try{Zt.focus()}catch(yi){}return new ul(Zt)}(f,$e,eu())})()}_openRedirect(f,g,C,B){var Y=this;return(0,w.Z)(function*(){return yield Y._originValidation(f),v=Ma(f,g,C,Ye(),B),rr().location.href=v,new Promise(()=>{});var v})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:B,promise:Y}=this.eventManagers[g];return B?Promise.resolve(B):(Le(Y,"If manager is not set, promise should be"),Y)}const C=this.initAndGetManager(f);return this.eventManagers[g]={promise:C},C}initAndGetManager(f){var g=this;return(0,w.Z)(function*(){const C=yield function(v){return wc.apply(this,arguments)}(f),B=new ku(f);return C.register("authEvent",Y=>(Ue(null==Y?void 0:Y.authEvent,f,"invalid-auth-event"),{status:B.onEvent(Y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:B},g.iframes[f._key()]=C,B})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(sa,{type:sa},B=>{var Y;const we=null===(Y=null==B?void 0:B[0])||void 0===Y?void 0:Y[sa];void 0!==we&&g(!!we),rt(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(v){return _c.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Sr()||vs()||hr()}}),this.cordovaResolver=xe(class{constructor(){this._redirectPersistence=fs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ll}_initialize(f){var g=this;return(0,w.Z)(function*(){const C=f._key();let B=g.eventManagers.get(C);return B||(B=new yh(f),g.eventManagers.set(C,B),g.attachCallbackListeners(f,B)),B})()}_openPopup(f){rt(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,C,B){var Y=this;return(0,w.Z)(function*(){!function(v){var f,g,C,B,Y,we,$e,yt,Nt,nn;const Zt=vr();Ue("function"==typeof(null===(f=null==Zt?void 0:Zt.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ue(void 0!==(null===(g=null==Zt?void 0:Zt.BuildInfo)||void 0===g?void 0:g.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ue("function"==typeof(null===(Y=null===(B=null===(C=null==Zt?void 0:Zt.cordova)||void 0===C?void 0:C.plugins)||void 0===B?void 0:B.browsertab)||void 0===Y?void 0:Y.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ue("function"==typeof(null===(yt=null===($e=null===(we=null==Zt?void 0:Zt.cordova)||void 0===we?void 0:we.plugins)||void 0===$e?void 0:$e.browsertab)||void 0===yt?void 0:yt.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ue("function"==typeof(null===(nn=null===(Nt=null==Zt?void 0:Zt.cordova)||void 0===Nt?void 0:Nt.InAppBrowser)||void 0===nn?void 0:nn.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const we=yield Y._initialize(f);yield we.initialized(),we.resetRedirect(),qn.clear(),yield Y._originValidation(f);const $e=function(v,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:js(),postBody:null,tenantId:v.tenantId,error:se(v,"no-auth-event")}}(f,C,B);yield function(v,f){return la()._set(jl(v),f)}(f,$e);const yt=yield function(v,f,g){return So.apply(this,arguments)}(f,$e,g),Nt=yield function(v){const{cordova:f}=vr();return new Promise(g=>{f.plugins.browsertab.isAvailable(C=>{let B=null;C?f.plugins.browsertab.openUrl(v):B=f.InAppBrowser.open(v,function(v=(0,ne.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(B)})})}(yt);return function(v,f,g){return Cc.apply(this,arguments)}(f,we,Nt)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(v){return Vu.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:C,handleOpenURL:B,BuildInfo:Y}=vr(),we=setTimeout((0,w.Z)(function*(){yield _h(f),g.onEvent(Dc())}),500),$e=function(){var nn=(0,w.Z)(function*(Zt){clearTimeout(we);const yi=yield _h(f);let qe=null;yi&&(null==Zt?void 0:Zt.url)&&(qe=function(v,f){var g,C;const B=function(v){const f=yd(v),g=f.link?decodeURIComponent(f.link):void 0,C=yd(g).link,B=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return yd(B).link||B||C||g||v}(f);if(B.includes("/__/auth/callback")){const Y=yd(B),we=Y.firebaseError?function(v){try{return JSON.parse(v)}catch(f){return null}}(decodeURIComponent(Y.firebaseError)):null,$e=null===(C=null===(g=null==we?void 0:we.code)||void 0===g?void 0:g.split("auth/"))||void 0===C?void 0:C[1],yt=$e?se($e):null;return yt?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:yt,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:B,postBody:null}}return null}(yi,Zt.url)),g.onEvent(qe||Dc())});return function(yi){return nn.apply(this,arguments)}}();void 0!==C&&"function"==typeof C.subscribe&&C.subscribe(null,$e);const yt=B,Nt=`${Y.packageName.toLowerCase()}://`;vr().handleOpenURL=function(){var nn=(0,w.Z)(function*(Zt){if(Zt.toLowerCase().startsWith(Nt)&&$e({url:Zt}),"function"==typeof yt)try{yt(Zt)}catch(yi){console.error(yi)}});return function(Zt){return nn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=fs,this._completeRedirectFn=Ll}_initialize(f){var g=this;return(0,w.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,C,B){var Y=this;return(0,w.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openPopup(f,g,C,B)})()}_openRedirect(f,g,C,B){var Y=this;return(0,w.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openRedirect(f,g,C,B)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Cd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,w.Z)(function*(){if(f.underlyingResolver)return;const g=yield function(){return Hl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function xc(v){return v.unwrap()}function Uu(v){return fl(v)}function fl(v){const{_tokenResponse:f}=v instanceof ne.ZR?v.customData:v;if(!f)return null;if(!(v instanceof ne.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ho.credentialFromResult(v);const g=f.providerId;if(!g||"password"===g)return null;let C;switch(g){case"google.com":C=Ds;break;case"facebook.com":C=Xs;break;case"github.com":C=Pi;break;case"twitter.com":C=Ts;break;default:const{oauthIdToken:B,oauthAccessToken:Y,oauthTokenSecret:we,pendingToken:$e,nonce:yt}=f;return Y||we||B||$e?$e?g.startsWith("saml.")?bn._create(g,$e):fr._fromParams({providerId:g,signInMethod:g,pendingToken:$e,idToken:B,accessToken:Y}):new xr(g).credential({idToken:B,accessToken:Y,rawNonce:yt}):null}return v instanceof ne.ZR?C.credentialFromError(v):C.credentialFromResult(v)}function ps(v,f){return f.catch(g=>{throw g instanceof ne.ZR&&function(v,f){var g;const C=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new xo(v,function(v,f){var g;const C=(0,ne.m9)(v),B=f;return Ue(f.operationType,C,"argument-error"),Ue(null===(g=B.serverResponse)||void 0===g?void 0:g.mfaPendingCredential,C,"argument-error"),Eo._fromError(C,B)}(v,f));else if(C){const B=fl(f),Y=f;B&&(Y.credential=B,Y.tenantId=C.tenantId||void 0,Y.email=C.email||void 0,Y.phoneNumber=C.phoneNumber||void 0)}}(v,g),g}).then(g=>{const B=g.user;return{operationType:g.operationType,credential:Uu(g),additionalUserInfo:hs(g),user:Oa.getOrCreate(B)}})}function Id(v,f){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,w.Z)(function*(v,f){const g=yield f;return{verificationId:g.verificationId,confirm:C=>ps(v,g.confirm(C))}})).apply(this,arguments)}class xo{constructor(f,g){this.resolver=g,this.auth=function(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ps(xc(this.auth),this.resolver.resolveSignIn(f))}}class Oa{constructor(f){this._delegate=f,this.multiFactor=function(v){const f=(0,ne.m9)(v);return Rs.has(f)||Rs.set(f,Vs._fromUser(f)),Rs.get(f)}(f)}static getOrCreate(f){return Oa.USER_MAP.has(f)||Oa.USER_MAP.set(f,new Oa(f)),Oa.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,w.Z)(function*(){return ps(g.auth,W(g._delegate,f))})()}linkWithPhoneNumber(f,g){var C=this;return(0,w.Z)(function*(){return Id(C.auth,function(v,f,g){return Ou.apply(this,arguments)}(C._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,w.Z)(function*(){return ps(g.auth,function(v,f,g){return nt.apply(this,arguments)}(g._delegate,f,Wr))})()}linkWithRedirect(f){var g=this;return(0,w.Z)(function*(){return yield Sc(gn(g.auth)),function(v,f,g){return function(v,f,g){return ra.apply(this,arguments)}(v,f,g)}(g._delegate,f,Wr)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,w.Z)(function*(){return ps(g.auth,it(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Id(this.auth,function(v,f,g){return iu.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return ps(this.auth,function(v,f,g){return Ve.apply(this,arguments)}(this._delegate,f,Wr))}reauthenticateWithRedirect(f){var g=this;return(0,w.Z)(function*(){return yield Sc(gn(g.auth)),function(v,f,g){return function(v,f,g){return Ta.apply(this,arguments)}(v,f,g)}(g._delegate,f,Wr)})()}sendEmailVerification(f){return function(v,f){return ro.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,w.Z)(function*(){return yield function(v,f){return Ki.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function(v,f){return tl((0,ne.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function(v,f){return tl((0,ne.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function(v,f){return kt.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function(v,f){return Vo.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function(v,f,g){return pi.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oa.USER_MAP=new WeakMap;const Bu=Ue;let ca=(()=>{class v{constructor(g,C){if(this.app=g,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:B}=g.options;Bu(B,"invalid-api-key",{appName:g.name});let Y=[pn];if("undefined"!=typeof window){Y=function(v,f){const g=bh();if(!(null==g?void 0:g.sessionStorage))return[];const C=Jt(Eh,v,f);switch(g.sessionStorage.getItem(C)){case ts.NONE:return[pn];case ts.LOCAL:return[jo,fs];case ts.SESSION:return[fs];default:return[]}}(B,g.name);for(const $e of[jo,Bs,fs])Y.includes($e)||Y.push($e)}Bu(B,"invalid-api-key",{appName:g.name});const we="undefined"!=typeof window?Wr:void 0;this._delegate=C.initialize({options:{persistence:Y,popupRedirectResolver:we}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,C){!function(v,f,g){const C=gn(v);Ue(C._canInitEmulator,C,"emulator-config-failed"),Ue(/^https?:\/\//.test(f),C,"invalid-emulator-scheme");const B=!!(null==g?void 0:g.disableWarnings),Y=zt(f),{host:we,port:$e}=function(v){const f=zt(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!g)return{host:"",port:null};const C=g[2].split("@").pop()||"",B=/^(\[[^\]]+\])(:|$)/.exec(C);if(B){const Y=B[1];return{host:Y,port:Ri(C.substr(Y.length+1))}}{const[Y,we]=C.split(":");return{host:Y,port:Ri(we)}}}(f);C.config.emulator={url:`${Y}//${we}${null===$e?"":`:${$e}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:we,port:$e,protocol:Y.replace(":",""),options:Object.freeze({disableWarnings:B})}),B||function(){function v(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,C)}applyActionCode(g){return function(v,f){return Au.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Xu(this._delegate,g)}confirmPasswordReset(g,C){return function(v,f,g){return Kt.apply(this,arguments)}(this._delegate,g,C)}createUserWithEmailAndPassword(g,C){var B=this;return(0,w.Z)(function*(){return ps(B._delegate,function(v,f,g){return Ze.apply(this,arguments)}(B._delegate,g,C))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(v,f){return Xo.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(v,f){const g=Kr.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,w.Z)(function*(){Bu(Dr(),g._delegate,"operation-not-supported-in-this-environment");const C=yield function(v,f){return lu.apply(this,arguments)}(g._delegate,Wr);return C?ps(g._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(v,f){gn(v)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,C,B){const{next:Y,error:we,complete:$e}=Dd(g,C,B);return this._delegate.onAuthStateChanged(Y,we,$e)}onIdTokenChanged(g,C,B){const{next:Y,error:we,complete:$e}=Dd(g,C,B);return this._delegate.onIdTokenChanged(Y,we,$e)}sendSignInLinkToEmail(g,C){return function(v,f,g){return Gn.apply(this,arguments)}(this._delegate,g,C)}sendPasswordResetEmail(g,C){return function(v,f,g){return mo.apply(this,arguments)}(this._delegate,g,C||void 0)}setPersistence(g){var C=this;return(0,w.Z)(function*(){let B;switch(function(v,f){dl(Object.values(ts).includes(f),v,"invalid-persistence-type"),(0,ne.b$)()?dl(f!==ts.SESSION,v,"unsupported-persistence-type"):(0,ne.UG)()?dl(f===ts.NONE,v,"unsupported-persistence-type"):Ac()?dl(f===ts.NONE||f===ts.LOCAL&&(0,ne.hl)(),v,"unsupported-persistence-type"):dl(f===ts.NONE||du(),v,"unsupported-persistence-type")}(C._delegate,g),g){case ts.SESSION:B=fs;break;case ts.LOCAL:B=(yield xe(jo)._isAvailable())?jo:Bs;break;case ts.NONE:B=pn;break;default:return rt("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(B)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ps(this._delegate,function(v){return Zr.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ps(this._delegate,x(this._delegate,g))}signInWithCustomToken(g){return ps(this._delegate,function(v,f){return Nn.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,C){return ps(this._delegate,function(v,f,g){return x((0,ne.m9)(v),Js.credential(f,g))}(this._delegate,g,C))}signInWithEmailLink(g,C){return ps(this._delegate,function(v,f,g){return Yi.apply(this,arguments)}(this._delegate,g,C))}signInWithPhoneNumber(g,C){return Id(this._delegate,function(v,f,g){return Or.apply(this,arguments)}(this._delegate,g,C))}signInWithPopup(g){var C=this;return(0,w.Z)(function*(){return Bu(Dr(),C._delegate,"operation-not-supported-in-this-environment"),ps(C._delegate,function(v,f,g){return te.apply(this,arguments)}(C._delegate,g,Wr))})()}signInWithRedirect(g){var C=this;return(0,w.Z)(function*(){return Bu(Dr(),C._delegate,"operation-not-supported-in-this-environment"),yield Sc(C._delegate),function(v,f,g){return function(v,f,g){return Go.apply(this,arguments)}(v,f,g)}(C._delegate,g,Wr)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(v,f){return Ka.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=ts,v})();function Dd(v,f,g){let C=v;"function"!=typeof v&&({next:C,error:f,complete:g}=v);const B=C;return{next:we=>B(we&&Oa.getOrCreate(we)),error:f,complete:g}}class Ms{constructor(){this.providerId="phone",this._delegate=new Ho(xc(U.Z.auth()))}static credential(f,g){return Ho.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Ms.PHONE_SIGN_IN_METHOD=Ho.PHONE_SIGN_IN_METHOD,Ms.PROVIDER_ID=Ho.PROVIDER_ID;const hu=Ue;class Tr{constructor(f,g,C=U.Z.app()){var B;hu(null===(B=C.options)||void 0===B?void 0:B.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new rd(f,g,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(v){v.INTERNAL.registerComponent(new Se.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),C=f.getProvider("auth");return new ca(g,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Js,FacebookAuthProvider:Xs,GithubAuthProvider:Pi,GoogleAuthProvider:Ds,OAuthProvider:xr,PhoneAuthProvider:Ms,PhoneMultiFactorGenerator:aa,RecaptchaVerifier:Tr,TwitterAuthProvider:Ts,Auth:ca,AuthCredential:Kn,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.1.5")}(U.Z)},8891:(bt,Be,$)=>{"use strict";$.d(Be,{y:()=>oe});var w=$(7393),ne=$(9181),Re=$(6490),ce=$(6554),Se=$(4022),de=$(2494);let oe=(()=>{class Q{constructor(ye){this._isScalar=!1,ye&&(this._subscribe=ye)}lift(ye){const _e=new Q;return _e.source=this,_e.operator=ye,_e}subscribe(ye,_e,We){const{operator:Fe}=this,Te=function(Q,he,ye){if(Q){if(Q instanceof w.L)return Q;if(Q[ne.b])return Q[ne.b]()}return Q||he||ye?new w.L(Q,he,ye):new w.L(Re.c)}(ye,_e,We);if(Te.add(Fe?Fe.call(Te,this.source):this.source||de.v.useDeprecatedSynchronousErrorHandling&&!Te.syncErrorThrowable?this._subscribe(Te):this._trySubscribe(Te)),de.v.useDeprecatedSynchronousErrorHandling&&Te.syncErrorThrowable&&(Te.syncErrorThrowable=!1,Te.syncErrorThrown))throw Te.syncErrorValue;return Te}_trySubscribe(ye){try{return this._subscribe(ye)}catch(_e){de.v.useDeprecatedSynchronousErrorHandling&&(ye.syncErrorThrown=!0,ye.syncErrorValue=_e),function(Q){for(;Q;){const{closed:he,destination:ye,isStopped:_e}=Q;if(he||_e)return!1;Q=ye&&ye instanceof w.L?ye:null}return!0}(ye)?ye.error(_e):console.warn(_e)}}forEach(ye,_e){return new(_e=J(_e))((We,Fe)=>{let Te;Te=this.subscribe(ot=>{try{ye(ot)}catch(st){Fe(st),Te&&Te.unsubscribe()}},Fe,We)})}_subscribe(ye){const{source:_e}=this;return _e&&_e.subscribe(ye)}[ce.L](){return this}pipe(...ye){return 0===ye.length?this:(0,Se.U)(ye)(this)}toPromise(ye){return new(ye=J(ye))((_e,We)=>{let Fe;this.subscribe(Te=>Fe=Te,Te=>We(Te),()=>_e(Fe))})}}return Q.create=he=>new Q(he),Q})();function J(Q){if(Q||(Q=de.v.Promise||Promise),!Q)throw new Error("no Promise impl found");return Q}},6490:(bt,Be,$)=>{"use strict";$.d(Be,{c:()=>ne});var w=$(2494),U=$(4449);const ne={closed:!0,next(Re){},error(Re){if(w.v.useDeprecatedSynchronousErrorHandling)throw Re;(0,U.z)(Re)},complete(){}}},9765:(bt,Be,$)=>{"use strict";$.d(Be,{Yc:()=>Se,xQ:()=>de});var w=$(8891),U=$(7393),ne=$(5319),Re=$(7971),Ce=$(8858),ce=$(9181);class Se extends U.L{constructor(Q){super(Q),this.destination=Q}}let de=(()=>{class J extends w.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ce.b](){return new Se(this)}lift(he){const ye=new oe(this,this);return ye.operator=he,ye}next(he){if(this.closed)throw new Re.N;if(!this.isStopped){const{observers:ye}=this,_e=ye.length,We=ye.slice();for(let Fe=0;Fe<_e;Fe++)We[Fe].next(he)}}error(he){if(this.closed)throw new Re.N;this.hasError=!0,this.thrownError=he,this.isStopped=!0;const{observers:ye}=this,_e=ye.length,We=ye.slice();for(let Fe=0;Fe<_e;Fe++)We[Fe].error(he);this.observers.length=0}complete(){if(this.closed)throw new Re.N;this.isStopped=!0;const{observers:he}=this,ye=he.length,_e=he.slice();for(let We=0;We<ye;We++)_e[We].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(he){if(this.closed)throw new Re.N;return super._trySubscribe(he)}_subscribe(he){if(this.closed)throw new Re.N;return this.hasError?(he.error(this.thrownError),ne.w.EMPTY):this.isStopped?(he.complete(),ne.w.EMPTY):(this.observers.push(he),new Ce.W(this,he))}asObservable(){const he=new w.y;return he.source=this,he}}return J.create=(Q,he)=>new oe(Q,he),J})();class oe extends de{constructor(Q,he){super(),this.destination=Q,this.source=he}next(Q){const{destination:he}=this;he&&he.next&&he.next(Q)}error(Q){const{destination:he}=this;he&&he.error&&this.destination.error(Q)}complete(){const{destination:Q}=this;Q&&Q.complete&&this.destination.complete()}_subscribe(Q){const{source:he}=this;return he?this.source.subscribe(Q):ne.w.EMPTY}}},8858:(bt,Be,$)=>{"use strict";$.d(Be,{W:()=>U});var w=$(5319);class U extends w.w{constructor(Re,Ce){super(),this.subject=Re,this.subscriber=Ce,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Re=this.subject,Ce=Re.observers;if(this.subject=null,!Ce||0===Ce.length||Re.isStopped||Re.closed)return;const ce=Ce.indexOf(this.subscriber);-1!==ce&&Ce.splice(ce,1)}}},7393:(bt,Be,$)=>{"use strict";$.d(Be,{L:()=>Se});var w=$(9105),U=$(6490),ne=$(5319),Re=$(9181),Ce=$(2494),ce=$(4449);class Se extends ne.w{constructor(J,Q,he){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=U.c;break;case 1:if(!J){this.destination=U.c;break}if("object"==typeof J){J instanceof Se?(this.syncErrorThrowable=J.syncErrorThrowable,this.destination=J,J.add(this)):(this.syncErrorThrowable=!0,this.destination=new de(this,J));break}default:this.syncErrorThrowable=!0,this.destination=new de(this,J,Q,he)}}[Re.b](){return this}static create(J,Q,he){const ye=new Se(J,Q,he);return ye.syncErrorThrowable=!1,ye}next(J){this.isStopped||this._next(J)}error(J){this.isStopped||(this.isStopped=!0,this._error(J))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(J){this.destination.next(J)}_error(J){this.destination.error(J),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:J}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=J,this}}class de extends Se{constructor(J,Q,he,ye){super(),this._parentSubscriber=J;let _e,We=this;(0,w.m)(Q)?_e=Q:Q&&(_e=Q.next,he=Q.error,ye=Q.complete,Q!==U.c&&(We=Object.create(Q),(0,w.m)(We.unsubscribe)&&this.add(We.unsubscribe.bind(We)),We.unsubscribe=this.unsubscribe.bind(this))),this._context=We,this._next=_e,this._error=he,this._complete=ye}next(J){if(!this.isStopped&&this._next){const{_parentSubscriber:Q}=this;Ce.v.useDeprecatedSynchronousErrorHandling&&Q.syncErrorThrowable?this.__tryOrSetError(Q,this._next,J)&&this.unsubscribe():this.__tryOrUnsub(this._next,J)}}error(J){if(!this.isStopped){const{_parentSubscriber:Q}=this,{useDeprecatedSynchronousErrorHandling:he}=Ce.v;if(this._error)he&&Q.syncErrorThrowable?(this.__tryOrSetError(Q,this._error,J),this.unsubscribe()):(this.__tryOrUnsub(this._error,J),this.unsubscribe());else if(Q.syncErrorThrowable)he?(Q.syncErrorValue=J,Q.syncErrorThrown=!0):(0,ce.z)(J),this.unsubscribe();else{if(this.unsubscribe(),he)throw J;(0,ce.z)(J)}}}complete(){if(!this.isStopped){const{_parentSubscriber:J}=this;if(this._complete){const Q=()=>this._complete.call(this._context);Ce.v.useDeprecatedSynchronousErrorHandling&&J.syncErrorThrowable?(this.__tryOrSetError(J,Q),this.unsubscribe()):(this.__tryOrUnsub(Q),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(J,Q){try{J.call(this._context,Q)}catch(he){if(this.unsubscribe(),Ce.v.useDeprecatedSynchronousErrorHandling)throw he;(0,ce.z)(he)}}__tryOrSetError(J,Q,he){if(!Ce.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Q.call(this._context,he)}catch(ye){return Ce.v.useDeprecatedSynchronousErrorHandling?(J.syncErrorValue=ye,J.syncErrorThrown=!0,!0):((0,ce.z)(ye),!0)}return!1}_unsubscribe(){const{_parentSubscriber:J}=this;this._context=null,this._parentSubscriber=null,J.unsubscribe()}}},5319:(bt,Be,$)=>{"use strict";$.d(Be,{w:()=>ce});var w=$(9796),U=$(1555),ne=$(9105);const Ce=(()=>{function de(oe){return Error.call(this),this.message=oe?`${oe.length} errors occurred during unsubscription:\n${oe.map((J,Q)=>`${Q+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=oe,this}return de.prototype=Object.create(Error.prototype),de})();class ce{constructor(oe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,oe&&(this._ctorUnsubscribe=!0,this._unsubscribe=oe)}unsubscribe(){let oe;if(this.closed)return;let{_parentOrParents:J,_ctorUnsubscribe:Q,_unsubscribe:he,_subscriptions:ye}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,J instanceof ce)J.remove(this);else if(null!==J)for(let _e=0;_e<J.length;++_e)J[_e].remove(this);if((0,ne.m)(he)){Q&&(this._unsubscribe=void 0);try{he.call(this)}catch(_e){oe=_e instanceof Ce?Se(_e.errors):[_e]}}if((0,w.k)(ye)){let _e=-1,We=ye.length;for(;++_e<We;){const Fe=ye[_e];if((0,U.K)(Fe))try{Fe.unsubscribe()}catch(Te){oe=oe||[],Te instanceof Ce?oe=oe.concat(Se(Te.errors)):oe.push(Te)}}}if(oe)throw new Ce(oe)}add(oe){let J=oe;if(!oe)return ce.EMPTY;switch(typeof oe){case"function":J=new ce(oe);case"object":if(J===this||J.closed||"function"!=typeof J.unsubscribe)return J;if(this.closed)return J.unsubscribe(),J;if(!(J instanceof ce)){const ye=J;J=new ce,J._subscriptions=[ye]}break;default:throw new Error("unrecognized teardown "+oe+" added to Subscription.")}let{_parentOrParents:Q}=J;if(null===Q)J._parentOrParents=this;else if(Q instanceof ce){if(Q===this)return J;J._parentOrParents=[Q,this]}else{if(-1!==Q.indexOf(this))return J;Q.push(this)}const he=this._subscriptions;return null===he?this._subscriptions=[J]:he.push(J),J}remove(oe){const J=this._subscriptions;if(J){const Q=J.indexOf(oe);-1!==Q&&J.splice(Q,1)}}}var de;function Se(de){return de.reduce((oe,J)=>oe.concat(J instanceof Ce?J.errors:J),[])}ce.EMPTY=((de=new ce).closed=!0,de)},2494:(bt,Be,$)=>{"use strict";$.d(Be,{v:()=>U});let w=!1;const U={Promise:void 0,set useDeprecatedSynchronousErrorHandling(ne){if(ne){const Re=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Re.stack)}else w&&console.log("RxJS: Back to a better error behavior. Thank you. <3");w=ne},get useDeprecatedSynchronousErrorHandling(){return w}}},5345:(bt,Be,$)=>{"use strict";$.d(Be,{IY:()=>Re,Ds:()=>ce,ft:()=>de});var w=$(7393),U=$(8891),ne=$(7444);class Re extends w.L{constructor(J){super(),this.parent=J}_next(J){this.parent.notifyNext(J)}_error(J){this.parent.notifyError(J),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ce extends w.L{notifyNext(J){this.destination.next(J)}notifyError(J){this.destination.error(J)}notifyComplete(){this.destination.complete()}}function de(oe,J){if(J.closed)return;if(oe instanceof U.y)return oe.subscribe(J);let Q;try{Q=(0,ne.s)(oe)(J)}catch(he){J.error(he)}return Q}},2441:(bt,Be,$)=>{"use strict";$.d(Be,{c:()=>Ce,N:()=>ce});var w=$(9765),U=$(8891),ne=$(5319),Re=$(1307);class Ce extends U.y{constructor(Q,he){super(),this.source=Q,this.subjectFactory=he,this._refCount=0,this._isComplete=!1}_subscribe(Q){return this.getSubject().subscribe(Q)}getSubject(){const Q=this._subject;return(!Q||Q.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Q=this._connection;return Q||(this._isComplete=!1,Q=this._connection=new ne.w,Q.add(this.source.subscribe(new Se(this.getSubject(),this))),Q.closed&&(this._connection=null,Q=ne.w.EMPTY)),Q}refCount(){return(0,Re.x)()(this)}}const ce=(()=>{const J=Ce.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:J._subscribe},_isComplete:{value:J._isComplete,writable:!0},getSubject:{value:J.getSubject},connect:{value:J.connect},refCount:{value:J.refCount}}})();class Se extends w.Yc{constructor(Q,he){super(Q),this.connectable=he}_error(Q){this._unsubscribe(),super._error(Q)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Q=this.connectable;if(Q){this.connectable=null;const he=Q._connection;Q._refCount=0,Q._subject=null,Q._connection=null,he&&he.unsubscribe()}}}},8071:(bt,Be,$)=>{"use strict";$.d(Be,{z:()=>Re});var w=$(5917),U=$(3282);function Re(...Ce){return(0,U.J)(1)((0,w.of)(...Ce))}},9193:(bt,Be,$)=>{"use strict";$.d(Be,{E:()=>U,c:()=>ne});var w=$(8891);const U=new w.y(Ce=>Ce.complete());function ne(Ce){return Ce?function(Ce){return new w.y(ce=>Ce.schedule(()=>ce.complete()))}(Ce):U}},4402:(bt,Be,$)=>{"use strict";$.d(Be,{D:()=>We});var w=$(8891),U=$(7444),ne=$(5319),Re=$(6554),Se=$(4087),de=$(377),Q=$(4072),he=$(9489);function We(Fe,Te){return Te?function(Fe,Te){if(null!=Fe){if(function(Fe){return Fe&&"function"==typeof Fe[Re.L]}(Fe))return function(Fe,Te){return new w.y(ot=>{const st=new ne.w;return st.add(Te.schedule(()=>{const Xe=Fe[Re.L]();st.add(Xe.subscribe({next(rt){st.add(Te.schedule(()=>ot.next(rt)))},error(rt){st.add(Te.schedule(()=>ot.error(rt)))},complete(){st.add(Te.schedule(()=>ot.complete()))}}))})),st})}(Fe,Te);if((0,Q.t)(Fe))return function(Fe,Te){return new w.y(ot=>{const st=new ne.w;return st.add(Te.schedule(()=>Fe.then(Xe=>{st.add(Te.schedule(()=>{ot.next(Xe),st.add(Te.schedule(()=>ot.complete()))}))},Xe=>{st.add(Te.schedule(()=>ot.error(Xe)))}))),st})}(Fe,Te);if((0,he.z)(Fe))return(0,Se.r)(Fe,Te);if(function(Fe){return Fe&&"function"==typeof Fe[de.hZ]}(Fe)||"string"==typeof Fe)return function(Fe,Te){if(!Fe)throw new Error("Iterable cannot be null");return new w.y(ot=>{const st=new ne.w;let Xe;return st.add(()=>{Xe&&"function"==typeof Xe.return&&Xe.return()}),st.add(Te.schedule(()=>{Xe=Fe[de.hZ](),st.add(Te.schedule(function(){if(ot.closed)return;let rt,se;try{const lt=Xe.next();rt=lt.value,se=lt.done}catch(lt){return void ot.error(lt)}se?ot.complete():(ot.next(rt),this.schedule())}))})),st})}(Fe,Te)}throw new TypeError((null!==Fe&&typeof Fe||Fe)+" is not observable")}(Fe,Te):Fe instanceof w.y?Fe:new w.y((0,U.s)(Fe))}},6693:(bt,Be,$)=>{"use strict";$.d(Be,{n:()=>Re});var w=$(8891),U=$(5015),ne=$(4087);function Re(Ce,ce){return ce?(0,ne.r)(Ce,ce):new w.y((0,U.V)(Ce))}},6682:(bt,Be,$)=>{"use strict";$.d(Be,{T:()=>Ce});var w=$(8891),U=$(4869),ne=$(3282),Re=$(6693);function Ce(...ce){let Se=Number.POSITIVE_INFINITY,de=null,oe=ce[ce.length-1];return(0,U.K)(oe)?(de=ce.pop(),ce.length>1&&"number"==typeof ce[ce.length-1]&&(Se=ce.pop())):"number"==typeof oe&&(Se=ce.pop()),null===de&&1===ce.length&&ce[0]instanceof w.y?ce[0]:(0,ne.J)(Se)((0,Re.n)(ce,de))}},5917:(bt,Be,$)=>{"use strict";$.d(Be,{of:()=>Re});var w=$(4869),U=$(6693),ne=$(4087);function Re(...Ce){let ce=Ce[Ce.length-1];return(0,w.K)(ce)?(Ce.pop(),(0,ne.r)(Ce,ce)):(0,U.n)(Ce)}},5242:(bt,Be,$)=>{"use strict";$.d(Be,{d:()=>U});var w=$(7393);function U(Ce=null){return ce=>ce.lift(new ne(Ce))}class ne{constructor(ce){this.defaultValue=ce}call(ce,Se){return Se.subscribe(new Re(ce,this.defaultValue))}}class Re extends w.L{constructor(ce,Se){super(ce),this.defaultValue=Se,this.isEmpty=!0}_next(ce){this.isEmpty=!1,this.destination.next(ce)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5435:(bt,Be,$)=>{"use strict";$.d(Be,{h:()=>U});var w=$(7393);function U(Ce,ce){return function(de){return de.lift(new ne(Ce,ce))}}class ne{constructor(ce,Se){this.predicate=ce,this.thisArg=Se}call(ce,Se){return Se.subscribe(new Re(ce,this.predicate,this.thisArg))}}class Re extends w.L{constructor(ce,Se,de){super(ce),this.predicate=Se,this.thisArg=de,this.count=0}_next(ce){let Se;try{Se=this.predicate.call(this.thisArg,ce,this.count++)}catch(de){return void this.destination.error(de)}Se&&this.destination.next(ce)}}},8049:(bt,Be,$)=>{"use strict";$.d(Be,{P:()=>Se});var w=$(3410),U=$(5435),ne=$(5257),Re=$(5242),Ce=$(4635),ce=$(4487);function Se(de,oe){const J=arguments.length>=2;return Q=>Q.pipe(de?(0,U.h)((he,ye)=>de(he,ye,Q)):ce.y,(0,ne.q)(1),J?(0,Re.d)(oe):(0,Ce.T)(()=>new w.K))}},8002:(bt,Be,$)=>{"use strict";$.d(Be,{U:()=>U});var w=$(7393);function U(Ce,ce){return function(de){if("function"!=typeof Ce)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return de.lift(new ne(Ce,ce))}}class ne{constructor(ce,Se){this.project=ce,this.thisArg=Se}call(ce,Se){return Se.subscribe(new Re(ce,this.project,this.thisArg))}}class Re extends w.L{constructor(ce,Se,de){super(ce),this.project=Se,this.count=0,this.thisArg=de||this}_next(ce){let Se;try{Se=this.project.call(this.thisArg,ce,this.count++)}catch(de){return void this.destination.error(de)}this.destination.next(Se)}}},3282:(bt,Be,$)=>{"use strict";$.d(Be,{J:()=>ne});var w=$(9773),U=$(4487);function ne(Re=Number.POSITIVE_INFINITY){return(0,w.zg)(U.y,Re)}},9773:(bt,Be,$)=>{"use strict";$.d(Be,{zg:()=>Re});var w=$(8002),U=$(4402),ne=$(5345);function Re(de,oe,J=Number.POSITIVE_INFINITY){return"function"==typeof oe?Q=>Q.pipe(Re((he,ye)=>(0,U.D)(de(he,ye)).pipe((0,w.U)((_e,We)=>oe(he,_e,ye,We))),J)):("number"==typeof oe&&(J=oe),Q=>Q.lift(new Ce(de,J)))}class Ce{constructor(oe,J=Number.POSITIVE_INFINITY){this.project=oe,this.concurrent=J}call(oe,J){return J.subscribe(new ce(oe,this.project,this.concurrent))}}class ce extends ne.Ds{constructor(oe,J,Q=Number.POSITIVE_INFINITY){super(oe),this.project=J,this.concurrent=Q,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(oe){this.active<this.concurrent?this._tryNext(oe):this.buffer.push(oe)}_tryNext(oe){let J;const Q=this.index++;try{J=this.project(oe,Q)}catch(he){return void this.destination.error(he)}this.active++,this._innerSub(J)}_innerSub(oe){const J=new ne.IY(this),Q=this.destination;Q.add(J);const he=(0,ne.ft)(oe,J);he!==J&&Q.add(he)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(oe){this.destination.next(oe)}notifyComplete(){const oe=this.buffer;this.active--,oe.length>0?this._next(oe.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(bt,Be,$)=>{"use strict";$.d(Be,{ht:()=>Q,QV:()=>oe});var w=$(7393),U=$(9193),ne=$(5917),Re=$(8891);class de{constructor(_e,We,Fe){this.kind=_e,this.value=We,this.error=Fe,this.hasValue="N"===_e}observe(_e){switch(this.kind){case"N":return _e.next&&_e.next(this.value);case"E":return _e.error&&_e.error(this.error);case"C":return _e.complete&&_e.complete()}}do(_e,We,Fe){switch(this.kind){case"N":return _e&&_e(this.value);case"E":return We&&We(this.error);case"C":return Fe&&Fe()}}accept(_e,We,Fe){return _e&&"function"==typeof _e.next?this.observe(_e):this.do(_e,We,Fe)}toObservable(){switch(this.kind){case"N":return(0,ne.of)(this.value);case"E":return ye=this.error,new Re.y(We=>We.error(ye));case"C":return(0,U.c)()}var ye;throw new Error("unexpected notification kind value")}static createNext(_e){return void 0!==_e?new de("N",_e):de.undefinedValueNotification}static createError(_e){return new de("E",void 0,_e)}static createComplete(){return de.completeNotification}}function oe(ye,_e=0){return function(Fe){return Fe.lift(new J(ye,_e))}}de.completeNotification=new de("C"),de.undefinedValueNotification=new de("N",void 0);class J{constructor(_e,We=0){this.scheduler=_e,this.delay=We}call(_e,We){return We.subscribe(new Q(_e,this.scheduler,this.delay))}}class Q extends w.L{constructor(_e,We,Fe=0){super(_e),this.scheduler=We,this.delay=Fe}static dispatch(_e){const{notification:We,destination:Fe}=_e;We.observe(Fe),this.unsubscribe()}scheduleMessage(_e){this.destination.add(this.scheduler.schedule(Q.dispatch,this.delay,new he(_e,this.destination)))}_next(_e){this.scheduleMessage(de.createNext(_e))}_error(_e){this.scheduleMessage(de.createError(_e)),this.unsubscribe()}_complete(){this.scheduleMessage(de.createComplete()),this.unsubscribe()}}class he{constructor(_e,We){this.notification=_e,this.destination=We}}},1307:(bt,Be,$)=>{"use strict";$.d(Be,{x:()=>U});var w=$(7393);function U(){return function(ce){return ce.lift(new ne(ce))}}class ne{constructor(ce){this.connectable=ce}call(ce,Se){const{connectable:de}=this;de._refCount++;const oe=new Re(ce,de),J=Se.subscribe(oe);return oe.closed||(oe.connection=de.connect()),J}}class Re extends w.L{constructor(ce,Se){super(ce),this.connectable=Se}_unsubscribe(){const{connectable:ce}=this;if(!ce)return void(this.connection=null);this.connectable=null;const Se=ce._refCount;if(Se<=0)return void(this.connection=null);if(ce._refCount=Se-1,Se>1)return void(this.connection=null);const{connection:de}=this,oe=ce._connection;this.connection=null,oe&&(!de||oe===de)&&oe.unsubscribe()}}},2145:(bt,Be,$)=>{"use strict";$.d(Be,{R:()=>U});var w=$(7393);function U(Ce,ce){let Se=!1;return arguments.length>=2&&(Se=!0),function(oe){return oe.lift(new ne(Ce,ce,Se))}}class ne{constructor(ce,Se,de=!1){this.accumulator=ce,this.seed=Se,this.hasSeed=de}call(ce,Se){return Se.subscribe(new Re(ce,this.accumulator,this.seed,this.hasSeed))}}class Re extends w.L{constructor(ce,Se,de,oe){super(ce),this.accumulator=Se,this._seed=de,this.hasSeed=oe,this.index=0}get seed(){return this._seed}set seed(ce){this.hasSeed=!0,this._seed=ce}_next(ce){if(this.hasSeed)return this._tryNext(ce);this.seed=ce,this.destination.next(ce)}_tryNext(ce){const Se=this.index++;let de;try{de=this.accumulator(this.seed,ce,Se)}catch(oe){this.destination.error(oe)}this.seed=de,this.destination.next(de)}}},9761:(bt,Be,$)=>{"use strict";$.d(Be,{O:()=>ne});var w=$(8071),U=$(4869);function ne(...Re){const Ce=Re[Re.length-1];return(0,U.K)(Ce)?(Re.pop(),ce=>(0,w.z)(Re,ce,Ce)):ce=>(0,w.z)(Re,ce)}},3101:(bt,Be,$)=>{"use strict";$.d(Be,{R:()=>Te});var w=$(8891);let U=1;const ne=Promise.resolve(),Re={};function Ce(st){return st in Re&&(delete Re[st],!0)}const ce={setImmediate(st){const Xe=U++;return Re[Xe]=!0,ne.then(()=>Ce(Xe)&&st()),Xe},clearImmediate(st){Ce(st)}};var de=$(6465),J=$(6102);const ye=new class extends J.v{flush(Xe){this.active=!0,this.scheduled=void 0;const{actions:rt}=this;let se,lt=-1,Wt=rt.length;Xe=Xe||rt.shift();do{if(se=Xe.execute(Xe.state,Xe.delay))break}while(++lt<Wt&&(Xe=rt.shift()));if(this.active=!1,se){for(;++lt<Wt&&(Xe=rt.shift());)Xe.unsubscribe();throw se}}}(class extends de.o{constructor(Xe,rt){super(Xe,rt),this.scheduler=Xe,this.work=rt}requestAsyncId(Xe,rt,se=0){return null!==se&&se>0?super.requestAsyncId(Xe,rt,se):(Xe.actions.push(this),Xe.scheduled||(Xe.scheduled=ce.setImmediate(Xe.flush.bind(Xe,null))))}recycleAsyncId(Xe,rt,se=0){if(null!==se&&se>0||null===se&&this.delay>0)return super.recycleAsyncId(Xe,rt,se);0===Xe.actions.length&&(ce.clearImmediate(rt),Xe.scheduled=void 0)}});var _e=$(9796);class Fe extends w.y{constructor(Xe,rt=0,se=ye){var st;super(),this.source=Xe,this.delayTime=rt,this.scheduler=se,(!(!(0,_e.k)(st=rt)&&st-parseFloat(st)+1>=0)||rt<0)&&(this.delayTime=0),(!se||"function"!=typeof se.schedule)&&(this.scheduler=ye)}static create(Xe,rt=0,se=ye){return new Fe(Xe,rt,se)}static dispatch(Xe){const{source:rt,subscriber:se}=Xe;return this.add(rt.subscribe(se))}_subscribe(Xe){return this.scheduler.schedule(Fe.dispatch,this.delayTime,{source:this.source,subscriber:Xe})}}function Te(st,Xe=0){return function(se){return se.lift(new ot(st,Xe))}}class ot{constructor(Xe,rt){this.scheduler=Xe,this.delay=rt}call(Xe,rt){return new Fe(rt,this.delay,this.scheduler).subscribe(Xe)}}},3190:(bt,Be,$)=>{"use strict";$.d(Be,{w:()=>Re});var w=$(8002),U=$(4402),ne=$(5345);function Re(Se,de){return"function"==typeof de?oe=>oe.pipe(Re((J,Q)=>(0,U.D)(Se(J,Q)).pipe((0,w.U)((he,ye)=>de(J,he,Q,ye))))):oe=>oe.lift(new Ce(Se))}class Ce{constructor(de){this.project=de}call(de,oe){return oe.subscribe(new ce(de,this.project))}}class ce extends ne.Ds{constructor(de,oe){super(de),this.project=oe,this.index=0}_next(de){let oe;const J=this.index++;try{oe=this.project(de,J)}catch(Q){return void this.destination.error(Q)}this._innerSub(oe)}_innerSub(de){const oe=this.innerSubscription;oe&&oe.unsubscribe();const J=new ne.IY(this),Q=this.destination;Q.add(J),this.innerSubscription=(0,ne.ft)(de,J),this.innerSubscription!==J&&Q.add(this.innerSubscription)}_complete(){const{innerSubscription:de}=this;(!de||de.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(de){this.destination.next(de)}}},5257:(bt,Be,$)=>{"use strict";$.d(Be,{q:()=>Re});var w=$(7393),U=$(7108),ne=$(9193);function Re(Se){return de=>0===Se?(0,ne.c)():de.lift(new Ce(Se))}class Ce{constructor(de){if(this.total=de,this.total<0)throw new U.W}call(de,oe){return oe.subscribe(new ce(de,this.total))}}class ce extends w.L{constructor(de,oe){super(de),this.total=oe,this.count=0}_next(de){const oe=this.total,J=++this.count;J<=oe&&(this.destination.next(de),J===oe&&(this.destination.complete(),this.unsubscribe()))}}},3342:(bt,Be,$)=>{"use strict";$.d(Be,{b:()=>Re});var w=$(7393);function U(){}var ne=$(9105);function Re(Se,de,oe){return function(Q){return Q.lift(new Ce(Se,de,oe))}}class Ce{constructor(de,oe,J){this.nextOrObserver=de,this.error=oe,this.complete=J}call(de,oe){return oe.subscribe(new ce(de,this.nextOrObserver,this.error,this.complete))}}class ce extends w.L{constructor(de,oe,J,Q){super(de),this._tapNext=U,this._tapError=U,this._tapComplete=U,this._tapError=J||U,this._tapComplete=Q||U,(0,ne.m)(oe)?(this._context=this,this._tapNext=oe):oe&&(this._context=oe,this._tapNext=oe.next||U,this._tapError=oe.error||U,this._tapComplete=oe.complete||U)}_next(de){try{this._tapNext.call(this._context,de)}catch(oe){return void this.destination.error(oe)}this.destination.next(de)}_error(de){try{this._tapError.call(this._context,de)}catch(oe){return void this.destination.error(oe)}this.destination.error(de)}_complete(){try{this._tapComplete.call(this._context)}catch(de){return void this.destination.error(de)}return this.destination.complete()}}},4635:(bt,Be,$)=>{"use strict";$.d(Be,{T:()=>ne});var w=$(3410),U=$(7393);function ne(Se=ce){return de=>de.lift(new Re(Se))}class Re{constructor(de){this.errorFactory=de}call(de,oe){return oe.subscribe(new Ce(de,this.errorFactory))}}class Ce extends U.L{constructor(de,oe){super(de),this.errorFactory=oe,this.hasValue=!1}_next(de){this.hasValue=!0,this.destination.next(de)}_complete(){if(this.hasValue)return this.destination.complete();{let de;try{de=this.errorFactory()}catch(oe){de=oe}this.destination.error(de)}}}function ce(){return new w.K}},4087:(bt,Be,$)=>{"use strict";$.d(Be,{r:()=>ne});var w=$(8891),U=$(5319);function ne(Re,Ce){return new w.y(ce=>{const Se=new U.w;let de=0;return Se.add(Ce.schedule(function(){de!==Re.length?(ce.next(Re[de++]),ce.closed||Se.add(this.schedule())):ce.complete()})),Se})}},6465:(bt,Be,$)=>{"use strict";$.d(Be,{o:()=>ne});var w=$(5319);class U extends w.w{constructor(Ce,ce){super()}schedule(Ce,ce=0){return this}}class ne extends U{constructor(Ce,ce){super(Ce,ce),this.scheduler=Ce,this.work=ce,this.pending=!1}schedule(Ce,ce=0){if(this.closed)return this;this.state=Ce;const Se=this.id,de=this.scheduler;return null!=Se&&(this.id=this.recycleAsyncId(de,Se,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(de,this.id,ce),this}requestAsyncId(Ce,ce,Se=0){return setInterval(Ce.flush.bind(Ce,this),Se)}recycleAsyncId(Ce,ce,Se=0){if(null!==Se&&this.delay===Se&&!1===this.pending)return ce;clearInterval(ce)}execute(Ce,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Se=this._execute(Ce,ce);if(Se)return Se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,ce){let de,Se=!1;try{this.work(Ce)}catch(oe){Se=!0,de=!!oe&&oe||new Error(oe)}if(Se)return this.unsubscribe(),de}_unsubscribe(){const Ce=this.id,ce=this.scheduler,Se=ce.actions,de=Se.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==de&&Se.splice(de,1),null!=Ce&&(this.id=this.recycleAsyncId(ce,Ce,null)),this.delay=null}}},6102:(bt,Be,$)=>{"use strict";$.d(Be,{v:()=>U});let w=(()=>{class ne{constructor(Ce,ce=ne.now){this.SchedulerAction=Ce,this.now=ce}schedule(Ce,ce=0,Se){return new this.SchedulerAction(this,Ce).schedule(Se,ce)}}return ne.now=()=>Date.now(),ne})();class U extends w{constructor(Re,Ce=w.now){super(Re,()=>U.delegate&&U.delegate!==this?U.delegate.now():Ce()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Re,Ce=0,ce){return U.delegate&&U.delegate!==this?U.delegate.schedule(Re,Ce,ce):super.schedule(Re,Ce,ce)}flush(Re){const{actions:Ce}=this;if(this.active)return void Ce.push(Re);let ce;this.active=!0;do{if(ce=Re.execute(Re.state,Re.delay))break}while(Re=Ce.shift());if(this.active=!1,ce){for(;Re=Ce.shift();)Re.unsubscribe();throw ce}}}},3637:(bt,Be,$)=>{"use strict";$.d(Be,{z:()=>ne,P:()=>Re});var w=$(6465);const ne=new($(6102).v)(w.o),Re=ne},7771:(bt,Be,$)=>{"use strict";$.d(Be,{c:()=>ce,N:()=>Ce});var w=$(6465),ne=$(6102);const Ce=new class extends ne.v{}(class extends w.o{constructor(de,oe){super(de,oe),this.scheduler=de,this.work=oe}schedule(de,oe=0){return oe>0?super.schedule(de,oe):(this.delay=oe,this.state=de,this.scheduler.flush(this),this)}execute(de,oe){return oe>0||this.closed?super.execute(de,oe):this._execute(de,oe)}requestAsyncId(de,oe,J=0){return null!==J&&J>0||null===J&&this.delay>0?super.requestAsyncId(de,oe,J):de.flush(this)}}),ce=Ce},377:(bt,Be,$)=>{"use strict";$.d(Be,{hZ:()=>U});const U="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(bt,Be,$)=>{"use strict";$.d(Be,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(bt,Be,$)=>{"use strict";$.d(Be,{b:()=>w});const w="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(bt,Be,$)=>{"use strict";$.d(Be,{W:()=>U});const U=(()=>{function ne(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return ne.prototype=Object.create(Error.prototype),ne})()},3410:(bt,Be,$)=>{"use strict";$.d(Be,{K:()=>U});const U=(()=>{function ne(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return ne.prototype=Object.create(Error.prototype),ne})()},7971:(bt,Be,$)=>{"use strict";$.d(Be,{N:()=>U});const U=(()=>{function ne(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ne.prototype=Object.create(Error.prototype),ne})()},4449:(bt,Be,$)=>{"use strict";function w(U){setTimeout(()=>{throw U},0)}$.d(Be,{z:()=>w})},4487:(bt,Be,$)=>{"use strict";function w(U){return U}$.d(Be,{y:()=>w})},9796:(bt,Be,$)=>{"use strict";$.d(Be,{k:()=>w});const w=Array.isArray||(U=>U&&"number"==typeof U.length)},9489:(bt,Be,$)=>{"use strict";$.d(Be,{z:()=>w});const w=U=>U&&"number"==typeof U.length&&"function"!=typeof U},9105:(bt,Be,$)=>{"use strict";function w(U){return"function"==typeof U}$.d(Be,{m:()=>w})},1555:(bt,Be,$)=>{"use strict";function w(U){return null!==U&&"object"==typeof U}$.d(Be,{K:()=>w})},4072:(bt,Be,$)=>{"use strict";function w(U){return!!U&&"function"!=typeof U.subscribe&&"function"==typeof U.then}$.d(Be,{t:()=>w})},4869:(bt,Be,$)=>{"use strict";function w(U){return U&&"function"==typeof U.schedule}$.d(Be,{K:()=>w})},4022:(bt,Be,$)=>{"use strict";$.d(Be,{z:()=>U,U:()=>ne});var w=$(4487);function U(...Re){return ne(Re)}function ne(Re){return 0===Re.length?w.y:1===Re.length?Re[0]:function(ce){return Re.reduce((Se,de)=>de(Se),ce)}}},7444:(bt,Be,$)=>{"use strict";$.d(Be,{s:()=>Q});var w=$(5015),U=$(4449),Re=$(377),ce=$(6554),de=$(9489),oe=$(4072),J=$(1555);const Q=he=>{if(he&&"function"==typeof he[ce.L])return(he=>ye=>{const _e=he[ce.L]();if("function"!=typeof _e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return _e.subscribe(ye)})(he);if((0,de.z)(he))return(0,w.V)(he);if((0,oe.t)(he))return(he=>ye=>(he.then(_e=>{ye.closed||(ye.next(_e),ye.complete())},_e=>ye.error(_e)).then(null,U.z),ye))(he);if(he&&"function"==typeof he[Re.hZ])return(he=>ye=>{const _e=he[Re.hZ]();for(;;){let We;try{We=_e.next()}catch(Fe){return ye.error(Fe),ye}if(We.done){ye.complete();break}if(ye.next(We.value),ye.closed)break}return"function"==typeof _e.return&&ye.add(()=>{_e.return&&_e.return()}),ye})(he);{const _e=`You provided ${(0,J.K)(he)?"an invalid object":`'${he}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(_e)}}},5015:(bt,Be,$)=>{"use strict";$.d(Be,{V:()=>w});const w=U=>ne=>{for(let Re=0,Ce=U.length;Re<Ce&&!ne.closed;Re++)ne.next(U[Re]);ne.complete()}},7556:(bt,Be,$)=>{"use strict";$.d(Be,{e:()=>Re});var w=$(8239),U=$(3018),ne=$(8006);let Re=(()=>{class Ce{constructor(Se){var de=this;this.angularFireAuth=Se,this.signIn=function(){var oe=(0,w.Z)(function*(J,Q){return yield de.angularFireAuth.signInWithEmailAndPassword(J,Q).then(he=>he).catch(he=>{throw"auth/user-disabled"===he.code?new Error("El usuario ha sido deshabilitado."):"auth/user-not-found"===he.code?new Error("No existe un usuario con estos datos."):new Error("Datos incorrectos.")})});return function(J,Q){return oe.apply(this,arguments)}}(),this.signOut=(0,w.Z)(function*(){yield de.angularFireAuth.signOut()}),this.user=Se.authState}get authUserObservable(){return this.angularFireAuth.authState}get authenticated(){return null!=this.user}get currentUser(){return this.user}}return Ce.\u0275fac=function(Se){return new(Se||Ce)(U.LFG(ne.zQ))},Ce.\u0275prov=U.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})()},3773:(bt,Be,$)=>{"use strict";$.d(Be,{M:()=>Re});var w=$(8239),U=$(3018),ne=$(166);let Re=(()=>{class Ce{constructor(Se){var de=this;this.db=Se,this.errorMessage="Error interno. Operaci\xf3n no realizada.",this.notExist="La busqueda no arroj\xf3 resultados.",this.set=function(){var oe=(0,w.Z)(function*(J,Q){yield de.db.collection(J).add(Q).then(he=>he.id).catch(he=>{throw console.log(he),new Error(de.errorMessage)})});return function(J,Q){return oe.apply(this,arguments)}}(),this.setWithId=function(){var oe=(0,w.Z)(function*(J,Q,he){yield de.db.collection(J).doc(Q).set(he).catch(ye=>{throw console.log(ye),new Error(de.errorMessage)})});return function(J,Q,he){return oe.apply(this,arguments)}}(),this.delete=function(){var oe=(0,w.Z)(function*(J,Q){yield de.db.collection(J).doc(Q).delete()});return function(J,Q){return oe.apply(this,arguments)}}()}getObserver(Se){return this.db.firestore.collection(Se)}}return Ce.\u0275fac=function(Se){return new(Se||Ce)(U.LFG(ne.ST))},Ce.\u0275prov=U.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})()},9891:(bt,Be,$)=>{"use strict";var w=$(8583),U=$(3018);class ne extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Re extends ne{static makeCurrent(){(0,w.HT)(new Re)}onAndCancel(T,N,H){return T.addEventListener(N,H,!1),()=>{T.removeEventListener(N,H,!1)}}dispatchEvent(T,N){T.dispatchEvent(N)}remove(T){T.parentNode&&T.parentNode.removeChild(T)}createElement(T,N){return(N=N||this.getDefaultDocument()).createElement(T)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(T){return T.nodeType===Node.ELEMENT_NODE}isShadowRoot(T){return T instanceof DocumentFragment}getGlobalEventTarget(T,N){return"window"===N?window:"document"===N?T:"body"===N?T.body:null}getBaseHref(T){const N=(Ce=Ce||document.querySelector("base"),Ce?Ce.getAttribute("href"):null);return null==N?null:function(S){Se=Se||document.createElement("a"),Se.setAttribute("href",S);const T=Se.pathname;return"/"===T.charAt(0)?T:`/${T}`}(N)}resetBaseElement(){Ce=null}getUserAgent(){return window.navigator.userAgent}getCookie(T){return(0,w.Mx)(document.cookie,T)}}let Se,Ce=null;const oe=new U.OlP("TRANSITION_ID"),Q=[{provide:U.ip1,useFactory:function(S,T,N){return()=>{N.get(U.CZH).donePromise.then(()=>{const H=(0,w.q)(),te=T.querySelectorAll(`style[ng-transition="${S}"]`);for(let De=0;De<te.length;De++)H.remove(te[De])})}},deps:[oe,w.K0,U.zs3],multi:!0}];class he{static init(){(0,U.VLi)(new he)}addToWindow(T){U.dqk.getAngularTestability=(H,te=!0)=>{const De=T.findTestabilityInTree(H,te);if(null==De)throw new Error("Could not find testability for element.");return De},U.dqk.getAllAngularTestabilities=()=>T.getAllTestabilities(),U.dqk.getAllAngularRootElements=()=>T.getAllRootElements(),U.dqk.frameworkStabilizers||(U.dqk.frameworkStabilizers=[]),U.dqk.frameworkStabilizers.push(H=>{const te=U.dqk.getAllAngularTestabilities();let De=te.length,Ve=!1;const ft=function(nt){Ve=Ve||nt,De--,0==De&&H(Ve)};te.forEach(function(nt){nt.whenStable(ft)})})}findTestabilityInTree(T,N,H){if(null==N)return null;const te=T.getTestability(N);return null!=te?te:H?(0,w.q)().isShadowRoot(N)?this.findTestabilityInTree(T,N.host,!0):this.findTestabilityInTree(T,N.parentElement,!0):null}}let ye=(()=>{class S{build(){return new XMLHttpRequest}}return S.\u0275fac=function(N){return new(N||S)},S.\u0275prov=U.Yz7({token:S,factory:S.\u0275fac}),S})();const ge=new U.OlP("EventManagerPlugins");let xe=(()=>{class S{constructor(N,H){this._zone=H,this._eventNameToPlugin=new Map,N.forEach(te=>te.manager=this),this._plugins=N.slice().reverse()}addEventListener(N,H,te){return this._findPluginFor(H).addEventListener(N,H,te)}addGlobalEventListener(N,H,te){return this._findPluginFor(H).addGlobalEventListener(N,H,te)}getZone(){return this._zone}_findPluginFor(N){const H=this._eventNameToPlugin.get(N);if(H)return H;const te=this._plugins;for(let De=0;De<te.length;De++){const Ve=te[De];if(Ve.supports(N))return this._eventNameToPlugin.set(N,Ve),Ve}throw new Error(`No event manager plugin found for event ${N}`)}}return S.\u0275fac=function(N){return new(N||S)(U.LFG(ge),U.LFG(U.R0b))},S.\u0275prov=U.Yz7({token:S,factory:S.\u0275fac}),S})();class ve{constructor(T){this._doc=T}addGlobalEventListener(T,N,H){const te=(0,w.q)().getGlobalEventTarget(this._doc,T);if(!te)throw new Error(`Unsupported event target ${te} for event ${N}`);return this.addEventListener(te,N,H)}}let Ie=(()=>{class S{constructor(){this._stylesSet=new Set}addStyles(N){const H=new Set;N.forEach(te=>{this._stylesSet.has(te)||(this._stylesSet.add(te),H.add(te))}),this.onStylesAdded(H)}onStylesAdded(N){}getAllStyles(){return Array.from(this._stylesSet)}}return S.\u0275fac=function(N){return new(N||S)},S.\u0275prov=U.Yz7({token:S,factory:S.\u0275fac}),S})(),Ye=(()=>{class S extends Ie{constructor(N){super(),this._doc=N,this._hostNodes=new Map,this._hostNodes.set(N.head,[])}_addStylesToHost(N,H,te){N.forEach(De=>{const Ve=this._doc.createElement("style");Ve.textContent=De,te.push(H.appendChild(Ve))})}addHost(N){const H=[];this._addStylesToHost(this._stylesSet,N,H),this._hostNodes.set(N,H)}removeHost(N){const H=this._hostNodes.get(N);H&&H.forEach(Et),this._hostNodes.delete(N)}onStylesAdded(N){this._hostNodes.forEach((H,te)=>{this._addStylesToHost(N,te,H)})}ngOnDestroy(){this._hostNodes.forEach(N=>N.forEach(Et))}}return S.\u0275fac=function(N){return new(N||S)(U.LFG(w.K0))},S.\u0275prov=U.Yz7({token:S,factory:S.\u0275fac}),S})();function Et(S){(0,w.q)().remove(S)}const Qt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ut=/%COMP%/g;function pt(S,T,N){for(let H=0;H<T.length;H++){let te=T[H];Array.isArray(te)?pt(S,te,N):(te=te.replace(ut,S),N.push(te))}return N}function $t(S){return T=>{if("__ngUnwrap__"===T)return S;!1===S(T)&&(T.preventDefault(),T.returnValue=!1)}}let Fn=(()=>{class S{constructor(N,H,te){this.eventManager=N,this.sharedStylesHost=H,this.appId=te,this.rendererByCompId=new Map,this.defaultRenderer=new ln(N)}createRenderer(N,H){if(!N||!H)return this.defaultRenderer;switch(H.encapsulation){case U.ifc.Emulated:{let te=this.rendererByCompId.get(H.id);return te||(te=new Tn(this.eventManager,this.sharedStylesHost,H,this.appId),this.rendererByCompId.set(H.id,te)),te.applyToHost(N),te}case 1:case U.ifc.ShadowDom:return new An(this.eventManager,this.sharedStylesHost,N,H);default:if(!this.rendererByCompId.has(H.id)){const te=pt(H.id,H.styles,[]);this.sharedStylesHost.addStyles(te),this.rendererByCompId.set(H.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return S.\u0275fac=function(N){return new(N||S)(U.LFG(xe),U.LFG(Ye),U.LFG(U.AFp))},S.\u0275prov=U.Yz7({token:S,factory:S.\u0275fac}),S})();class ln{constructor(T){this.eventManager=T,this.data=Object.create(null)}destroy(){}createElement(T,N){return N?document.createElementNS(Qt[N]||N,T):document.createElement(T)}createComment(T){return document.createComment(T)}createText(T){return document.createTextNode(T)}appendChild(T,N){T.appendChild(N)}insertBefore(T,N,H){T&&T.insertBefore(N,H)}removeChild(T,N){T&&T.removeChild(N)}selectRootElement(T,N){let H="string"==typeof T?document.querySelector(T):T;if(!H)throw new Error(`The selector "${T}" did not match any elements`);return N||(H.textContent=""),H}parentNode(T){return T.parentNode}nextSibling(T){return T.nextSibling}setAttribute(T,N,H,te){if(te){N=te+":"+N;const De=Qt[te];De?T.setAttributeNS(De,N,H):T.setAttribute(N,H)}else T.setAttribute(N,H)}removeAttribute(T,N,H){if(H){const te=Qt[H];te?T.removeAttributeNS(te,N):T.removeAttribute(`${H}:${N}`)}else T.removeAttribute(N)}addClass(T,N){T.classList.add(N)}removeClass(T,N){T.classList.remove(N)}setStyle(T,N,H,te){te&(U.JOm.DashCase|U.JOm.Important)?T.style.setProperty(N,H,te&U.JOm.Important?"important":""):T.style[N]=H}removeStyle(T,N,H){H&U.JOm.DashCase?T.style.removeProperty(N):T.style[N]=""}setProperty(T,N,H){T[N]=H}setValue(T,N){T.nodeValue=N}listen(T,N,H){return"string"==typeof T?this.eventManager.addGlobalEventListener(T,N,$t(H)):this.eventManager.addEventListener(T,N,$t(H))}}class Tn extends ln{constructor(T,N,H,te){super(T),this.component=H;const De=pt(te+"-"+H.id,H.styles,[]);N.addStyles(De),this.contentAttr="_ngcontent-%COMP%".replace(ut,te+"-"+H.id),this.hostAttr="_nghost-%COMP%".replace(ut,te+"-"+H.id)}applyToHost(T){super.setAttribute(T,this.hostAttr,"")}createElement(T,N){const H=super.createElement(T,N);return super.setAttribute(H,this.contentAttr,""),H}}class An extends ln{constructor(T,N,H,te){super(T),this.sharedStylesHost=N,this.hostEl=H,this.shadowRoot=H.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const De=pt(te.id,te.styles,[]);for(let Ve=0;Ve<De.length;Ve++){const ft=document.createElement("style");ft.textContent=De[Ve],this.shadowRoot.appendChild(ft)}}nodeOrShadowRoot(T){return T===this.hostEl?this.shadowRoot:T}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(T,N){return super.appendChild(this.nodeOrShadowRoot(T),N)}insertBefore(T,N,H){return super.insertBefore(this.nodeOrShadowRoot(T),N,H)}removeChild(T,N){return super.removeChild(this.nodeOrShadowRoot(T),N)}parentNode(T){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(T)))}}let fn=(()=>{class S extends ve{constructor(N){super(N)}supports(N){return!0}addEventListener(N,H,te){return N.addEventListener(H,te,!1),()=>this.removeEventListener(N,H,te)}removeEventListener(N,H,te){return N.removeEventListener(H,te)}}return S.\u0275fac=function(N){return new(N||S)(U.LFG(w.K0))},S.\u0275prov=U.Yz7({token:S,factory:S.\u0275fac}),S})();const En=["alt","control","meta","shift"],Tt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$n={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ut={alt:S=>S.altKey,control:S=>S.ctrlKey,meta:S=>S.metaKey,shift:S=>S.shiftKey};let pe=(()=>{class S extends ve{constructor(N){super(N)}supports(N){return null!=S.parseEventName(N)}addEventListener(N,H,te){const De=S.parseEventName(H),Ve=S.eventCallback(De.fullKey,te,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(N,De.domEventName,Ve))}static parseEventName(N){const H=N.toLowerCase().split("."),te=H.shift();if(0===H.length||"keydown"!==te&&"keyup"!==te)return null;const De=S._normalizeKey(H.pop());let Ve="";if(En.forEach(nt=>{const Vt=H.indexOf(nt);Vt>-1&&(H.splice(Vt,1),Ve+=nt+".")}),Ve+=De,0!=H.length||0===De.length)return null;const ft={};return ft.domEventName=te,ft.fullKey=Ve,ft}static getEventFullKey(N){let H="",te=function(S){let T=S.key;if(null==T){if(T=S.keyIdentifier,null==T)return"Unidentified";T.startsWith("U+")&&(T=String.fromCharCode(parseInt(T.substring(2),16)),3===S.location&&$n.hasOwnProperty(T)&&(T=$n[T]))}return Tt[T]||T}(N);return te=te.toLowerCase()," "===te?te="space":"."===te&&(te="dot"),En.forEach(De=>{De!=te&&Ut[De](N)&&(H+=De+".")}),H+=te,H}static eventCallback(N,H,te){return De=>{S.getEventFullKey(De)===N&&te.runGuarded(()=>H(De))}}static _normalizeKey(N){switch(N){case"esc":return"escape";default:return N}}}return S.\u0275fac=function(N){return new(N||S)(U.LFG(w.K0))},S.\u0275prov=U.Yz7({token:S,factory:S.\u0275fac}),S})();const Vn=(0,U.eFA)(U._c5,"browser",[{provide:U.Lbi,useValue:w.bD},{provide:U.g9A,useValue:function(){Re.makeCurrent(),he.init()},multi:!0},{provide:w.K0,useFactory:function(){return(0,U.RDi)(document),document},deps:[]}]),ks=[[],{provide:U.zSh,useValue:"root"},{provide:U.qLn,useFactory:function(){return new U.qLn},deps:[]},{provide:ge,useClass:fn,multi:!0,deps:[w.K0,U.R0b,U.Lbi]},{provide:ge,useClass:pe,multi:!0,deps:[w.K0]},[],{provide:Fn,useClass:Fn,deps:[xe,Ye,U.AFp]},{provide:U.FYo,useExisting:Fn},{provide:Ie,useExisting:Ye},{provide:Ye,useClass:Ye,deps:[w.K0]},{provide:U.dDg,useClass:U.dDg,deps:[U.R0b]},{provide:xe,useClass:xe,deps:[ge,U.R0b]},{provide:w.JF,useClass:ye,deps:[]},[]];let _s=(()=>{class S{constructor(N){if(N)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(N){return{ngModule:S,providers:[{provide:U.AFp,useValue:N.appId},{provide:oe,useExisting:U.AFp},Q]}}}return S.\u0275fac=function(N){return new(N||S)(U.LFG(S,12))},S.\u0275mod=U.oAB({type:S}),S.\u0275inj=U.cJS({providers:ks,imports:[w.ez,U.hGG]}),S})();"undefined"!=typeof window&&window;var Kn=$(6575);let xn=(()=>{class S{constructor(){}ngOnInit(){}}return S.\u0275fac=function(N){return new(N||S)},S.\u0275cmp=U.Xpm({type:S,selectors:[["app-error"]],decls:11,vars:0,consts:[[1,"page"],[1,"page-wrap","d-flex","flex-row","align-items-center"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-12","text-center"],[1,"display-1","d-block"],[1,"mb-4","lead"],["routerLink","../home",1,"btn","btn-link"]],template:function(N,H){1&N&&(U.TgZ(0,"section",0),U.TgZ(1,"div",1),U.TgZ(2,"div",2),U.TgZ(3,"div",3),U.TgZ(4,"div",4),U.TgZ(5,"span",5),U._uU(6,"Error 404"),U.qZA(),U.TgZ(7,"div",6),U._uU(8,"No se encontr\xf3 el sitio. Probablemente te fuiste de la p\xe1gina."),U.qZA(),U.TgZ(9,"a",7),U._uU(10,"Volver a la p\xe1gina principal"),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA(),U.qZA())},directives:[Kn.yS],styles:[".page[_ngcontent-%COMP%]{background:#dedede}.page-wrap[_ngcontent-%COMP%]{min-height:100vh}"]}),S})();var ji=$(4022),$i=$(8002),qt=$(5257),Fs=$(8006),as=$(7841);const us=(0,$i.U)(S=>!!S);let Lr=(()=>{class S{constructor(N,H){this.router=N,this.auth=H,this.canActivate=(te,De)=>{const Ve=te.data.authGuardPipe||(()=>us);return this.auth.user.pipe((0,qt.q)(1),Ve(te,De),(0,$i.U)(ft=>"boolean"==typeof ft?ft:Array.isArray(ft)?this.router.createUrlTree(ft):this.router.parseUrl(ft)))}}}return S.\u0275fac=function(N){return new(N||S)(U.LFG(Kn.F0),U.LFG(Fs.zQ))},S.\u0275prov=U.Yz7({token:S,factory:S.\u0275fac,providedIn:"any"}),S})();var er=$(8239),br=$(7556),Ur=$(3773);const wn=()=>{return S=["/login"],(0,ji.z)(us,(0,$i.U)(T=>T||S));var S},qr=[{path:"home",loadChildren:()=>$.e(262).then($.bind($,5262)).then(S=>S.BienvenidaModule).catch(S=>{console.log(S)})},{path:"login",loadChildren:()=>$.e(545).then($.bind($,7545)).then(S=>S.LoginModule).catch(S=>{console.log(S)})},{path:"producto/alta",canActivate:[Lr],data:{authGuardPipe:wn},loadChildren:()=>Promise.all([$.e(592),$.e(17)]).then($.bind($,3017)).then(S=>S.AltaProductoModule).catch(S=>{console.log(S)})},{path:"producto/detalle",canActivate:[Lr],data:{authGuardPipe:wn},loadChildren:()=>Promise.all([$.e(592),$.e(486)]).then($.bind($,6486)).then(S=>S.DetalleProductoModule)},{path:"container/abm",canActivate:[(()=>{class S{constructor(N,H,te){var De=this;this.auth=N,this.router=H,this.db=te,this.canActivate=function(){var Ve=(0,er.Z)(function*(ft){const nt=ft.data.expectedType;return new Promise(Vt=>{De.auth.authUserObservable.subscribe(function(){var Ft=(0,er.Z)(function*(qn){qn||De.declineAccess(Vt),yield De.db.getObserver("usuarios").doc(qn.uid).get().then(yr=>{yr.data().tipo===nt?Vt(!0):De.declineAccess(Vt)})});return function(qn){return Ft.apply(this,arguments)}}())})});return function(ft){return Ve.apply(this,arguments)}}()}declineAccess(N){N(!1),this.router.navigate(["/home"])}}return S.\u0275fac=function(N){return new(N||S)(U.LFG(br.e),U.LFG(Kn.F0),U.LFG(Ur.M))},S.\u0275prov=U.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()],data:{expectedType:1},loadChildren:()=>$.e(933).then($.bind($,5933)).then(S=>S.AbmContainerModule)},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",component:xn}];let Gi=(()=>{class S{}return S.\u0275fac=function(N){return new(N||S)},S.\u0275mod=U.oAB({type:S}),S.\u0275inj=U.cJS({imports:[[Kn.Bz.forRoot(qr)],Kn.Bz]}),S})(),fr=(()=>{class S{constructor(){this.title="PP-LaboIV"}}return S.\u0275fac=function(N){return new(N||S)},S.\u0275cmp=U.Xpm({type:S,selectors:[["app-root"]],decls:1,vars:0,template:function(N,H){1&N&&U._UZ(0,"router-outlet")},directives:[Kn.lC],styles:[""]}),S})();var pr=$(8939),Wi=$(166),Ys=$(8891),ar=$(5917),Cs=$(4402),zi=$(7393),ko=$(3637);class go{constructor(T,N){this.dueTime=T,this.scheduler=N}call(T,N){return N.subscribe(new fi(T,this.dueTime,this.scheduler))}}class fi extends zi.L{constructor(T,N,H){super(T),this.dueTime=N,this.scheduler=H,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(T){this.clearDebounce(),this.lastValue=T,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Qs,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:T}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(T)}}clearDebounce(){const T=this.debouncedSubscription;null!==T&&(this.remove(T),T.unsubscribe(),this.debouncedSubscription=null)}}function Qs(S){S.debouncedNext()}var Is=$(3190),Kr=$(9126),Fo=$(4486),Js=$(5452),Hn=$(3854),Oi=$(6034),xr=(()=>{return(S=xr||(xr={}))[S.NO_ERROR=0]="NO_ERROR",S[S.NETWORK_ERROR=1]="NETWORK_ERROR",S[S.ABORT=2]="ABORT",xr;var S})();const Xs="firebasestorage.googleapis.com",Ds="storageBucket";class bn extends Hn.ZR{constructor(T,N){super(Lo(T),`Firebase Storage: ${N} (${Lo(T)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bn.prototype)}_codeEquals(T){return Lo(T)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(T){this.customData.serverResponse=T,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Lo(S){return"storage/"+S}function ii(){return new bn("unknown","An unknown error occurred, please check the error payload for server response.")}function Zr(){return new bn("canceled","User canceled the upload/download.")}function oi(){return new bn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function L(){return new bn("no-download-url","The given file does not have any download URLs.")}function z(S){return new bn("invalid-argument",S)}function F(){return new bn("app-deleted","The Firebase app was deleted.")}function K(S){return new bn("invalid-root-operation","The operation '"+S+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function le(S,T){return new bn("invalid-format","String does not match format '"+S+"': "+T)}function Oe(S){throw new bn("internal-error","Internal error: "+S)}class et{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=xr.NO_ERROR,this.sendPromise_=new Promise(T=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xr.ABORT,T()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xr.NETWORK_ERROR,T()}),this.xhr_.addEventListener("load",()=>{T()})})}send(T,N,H,te){if(this.sent_)throw Oe("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(N,T,!0),void 0!==te)for(const De in te)te.hasOwnProperty(De)&&this.xhr_.setRequestHeader(De,te[De].toString());return void 0!==H?this.xhr_.send(H):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oe("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oe("cannot .getStatus() before sending");try{return this.xhr_.status}catch(T){return-1}}getResponseText(){if(!this.sent_)throw Oe("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(T){return this.xhr_.getResponseHeader(T)}addUploadProgressListener(T){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",T)}removeUploadProgressListener(T){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",T)}}class x{createConnection(){return new et}}class A{constructor(T,N){this.bucket=T,this.path_=N}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const T=encodeURIComponent;return"/b/"+T(this.bucket)+"/o/"+T(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(T,N){let H;try{H=A.makeFromUrl(T,N)}catch(te){return new A(T,"")}if(""===H.path)return H;throw new bn("invalid-default-bucket","Invalid default bucket '"+T+"'.")}static makeFromUrl(T,N){let H=null;const te="([A-Za-z0-9.\\-_]+)",ft=new RegExp("^gs://"+te+"(/(.*))?$","i");function Vt(Ti){Ti.path_=decodeURIComponent(Ti.path)}const qn=N.replace(/[.]/g,"\\."),Ns=[{regex:ft,indices:{bucket:1,path:3},postModify:function(Ti){"/"===Ti.path.charAt(Ti.path.length-1)&&(Ti.path_=Ti.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${qn}/v[A-Za-z0-9_]+/b/${te}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Vt},{regex:new RegExp(`^https?://${N===Xs?"(?:storage.googleapis.com|storage.cloud.google.com)":N}/${te}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Vt}];for(let Ti=0;Ti<Ns.length;Ti++){const au=Ns[Ti],Go=au.regex.exec(T);if(Go){let Wo=Go[au.indices.path];Wo||(Wo=""),H=new A(Go[au.indices.bucket],Wo),au.postModify(H);break}}if(null==H)throw new bn("invalid-url","Invalid URL '"+T+"'.");return H}}class W{constructor(T){this.promise_=Promise.reject(T)}getPromise(){return this.promise_}cancel(T=!1){}}function Cr(S){return"string"==typeof S||S instanceof String}function Nn(S){return ai()&&S instanceof Blob}function ai(){return"undefined"!=typeof Blob}function Zi(S,T,N,H){if(H<T)throw z(`Invalid value for '${S}'. Expected ${T} or greater.`);if(H>N)throw z(`Invalid value for '${S}'. Expected ${N} or less.`)}function ur(S,T,N){let H=T;return null==N&&(H=`https://${T}`),`${N}://${H}/v0${S}`}function Mr(S){const T=encodeURIComponent;let N="?";for(const H in S)S.hasOwnProperty(H)&&(N=N+(T(H)+"=")+T(S[H])+"&");return N=N.slice(0,-1),N}class mo{constructor(T,N,H,te,De,Ve,ft,nt,Vt,Ft,qn){this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=T,this.method_=N,this.headers_=H,this.body_=te,this.successCodes_=De.slice(),this.additionalRetryCodes_=Ve.slice(),this.callback_=ft,this.errorCallback_=nt,this.progressCallback_=Ft,this.timeout_=Vt,this.pool_=qn,this.promise_=new Promise((yr,_r)=>{this.resolve_=yr,this.reject_=_r,this.start_()})}start_(){const T=this;function H(te,De){const Ve=T.resolve_,ft=T.reject_,nt=De.connection;if(De.wasSuccessCode)try{const Vt=T.callback_(nt,nt.getResponseText());void 0!==Vt?Ve(Vt):Ve()}catch(Vt){ft(Vt)}else if(null!==nt){const Vt=ii();Vt.serverResponse=nt.getResponseText(),ft(T.errorCallback_?T.errorCallback_(nt,Vt):Vt)}else ft(De.canceled?T.appDelete_?F():Zr():new bn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?H(0,new yo(!1,null,!0)):this.backoffId_=function(S,T,N){let H=1,te=null,De=!1,Ve=0;function ft(){return 2===Ve}let nt=!1;function Vt(...vn){nt||(nt=!0,T.apply(null,vn))}function Ft(vn){te=setTimeout(()=>{te=null,S(qn,ft())},vn)}function qn(vn,...ui){if(nt)return;if(vn)return void Vt.call(null,vn,...ui);if(ft()||De)return void Vt.call(null,vn,...ui);let Ir;H<64&&(H*=2),1===Ve?(Ve=2,Ir=0):Ir=1e3*(H+Math.random()),Ft(Ir)}let yr=!1;function _r(vn){yr||(yr=!0,!nt&&(null!==te?(vn||(Ve=2),clearTimeout(te),Ft(0)):vn||(Ve=1)))}return Ft(0),setTimeout(()=>{De=!0,_r(!0)},N),_r}(function(te,De){if(De)return void te(!1,new yo(!1,null,!0));const Ve=T.pool_.createConnection();function ft(nt){null!==T.progressCallback_&&T.progressCallback_(nt.loaded,nt.lengthComputable?nt.total:-1)}T.pendingConnection_=Ve,null!==T.progressCallback_&&Ve.addUploadProgressListener(ft),Ve.send(T.url_,T.method_,T.body_,T.headers_).then(()=>{null!==T.progressCallback_&&Ve.removeUploadProgressListener(ft),T.pendingConnection_=null;const nt=Ve.getErrorCode()===xr.NO_ERROR,Vt=Ve.getStatus();if(!nt||T.isRetryStatusCode_(Vt)){const qn=Ve.getErrorCode()===xr.ABORT;return void te(!1,new yo(!1,null,qn))}const Ft=-1!==T.successCodes_.indexOf(Vt);te(!0,new yo(Ft,Ve))})},H,this.timeout_)}getPromise(){return this.promise_}cancel(T){this.canceled_=!0,this.appDelete_=T||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(T){const N=T>=500&&T<600,te=-1!==[408,429].indexOf(T),De=-1!==this.additionalRetryCodes_.indexOf(T);return N||te||De}}class yo{constructor(T,N,H){this.wasSuccessCode=T,this.connection=N,this.canceled=!!H}}function Ka(...S){const T="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==T){const N=new T;for(let H=0;H<S.length;H++)N.append(S[H]);return N.getBlob()}if(ai())return new Blob(S);throw new bn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Xt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ya{constructor(T,N){this.data=T,this.contentType=N||null}}function Gn(S,T){switch(S){case Xt.RAW:return new ya(_a(T));case Xt.BASE64:case Xt.BASE64URL:return new ya(Yi(S,T));case Xt.DATA_URL:return new ya(function(S){const T=new Za(S);return T.base64?Yi(Xt.BASE64,T.rest):function(S){let T;try{T=decodeURIComponent(S)}catch(N){throw le(Xt.DATA_URL,"Malformed data URL.")}return _a(T)}(T.rest)}(T),function(S){return new Za(S).contentType}(T))}throw ii()}function _a(S){const T=[];for(let N=0;N<S.length;N++){let H=S.charCodeAt(N);H<=127?T.push(H):H<=2047?T.push(192|H>>6,128|63&H):55296==(64512&H)?N<S.length-1&&56320==(64512&S.charCodeAt(N+1))?(H=65536|(1023&H)<<10|1023&S.charCodeAt(++N),T.push(240|H>>18,128|H>>12&63,128|H>>6&63,128|63&H)):T.push(239,191,189):56320==(64512&H)?T.push(239,191,189):T.push(224|H>>12,128|H>>6&63,128|63&H)}return new Uint8Array(T)}function Yi(S,T){switch(S){case Xt.BASE64:{const te=-1!==T.indexOf("-"),De=-1!==T.indexOf("_");if(te||De)throw le(S,"Invalid character '"+(te?"-":"_")+"' found: is it base64url encoded?");break}case Xt.BASE64URL:{const te=-1!==T.indexOf("+"),De=-1!==T.indexOf("/");if(te||De)throw le(S,"Invalid character '"+(te?"+":"/")+"' found: is it base64 encoded?");T=T.replace(/-/g,"+").replace(/_/g,"/");break}}let N;try{N=function(S){return atob(S)}(T)}catch(te){throw le(S,"Invalid character found")}const H=new Uint8Array(N.length);for(let te=0;te<N.length;te++)H[te]=N.charCodeAt(te);return H}class Za{constructor(T){this.base64=!1,this.contentType=null;const N=T.match(/^data:([^,]+)?,/);if(null===N)throw le(Xt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const H=N[1]||null;null!=H&&(this.base64=function(S,T){return S.length>=T.length&&S.substring(S.length-T.length)===T}(H,";base64"),this.contentType=this.base64?H.substring(0,H.length-";base64".length):H),this.rest=T.substring(T.indexOf(",")+1)}}class Ii{constructor(T,N){let H=0,te="";Nn(T)?(this.data_=T,H=T.size,te=T.type):T instanceof ArrayBuffer?(N?this.data_=new Uint8Array(T):(this.data_=new Uint8Array(T.byteLength),this.data_.set(new Uint8Array(T))),H=this.data_.length):T instanceof Uint8Array&&(N?this.data_=T:(this.data_=new Uint8Array(T.length),this.data_.set(T)),H=T.length),this.size_=H,this.type_=te}size(){return this.size_}type(){return this.type_}slice(T,N){if(Nn(this.data_)){const te=function(S,T,N){return S.webkitSlice?S.webkitSlice(T,N):S.mozSlice?S.mozSlice(T,N):S.slice?S.slice(T,N):null}(this.data_,T,N);return null===te?null:new Ii(te)}{const H=new Uint8Array(this.data_.buffer,T,N-T);return new Ii(H,!0)}}static getBlob(...T){if(ai()){const N=T.map(H=>H instanceof Ii?H.data_:H);return new Ii(Ka.apply(null,N))}{const N=T.map(Ve=>Cr(Ve)?Gn(Xt.RAW,Ve).data:Ve.data_);let H=0;N.forEach(Ve=>{H+=Ve.byteLength});const te=new Uint8Array(H);let De=0;return N.forEach(Ve=>{for(let ft=0;ft<Ve.length;ft++)te[De++]=Ve[ft]}),new Ii(te,!0)}}uploadData(){return this.data_}}function ro(S){let T;try{T=JSON.parse(S)}catch(N){return null}return function(S){return"object"==typeof S&&!Array.isArray(S)}(T)?T:null}function Ru(S){const T=S.lastIndexOf("/",S.length-2);return-1===T?S:S.slice(T+1)}function Wn(S,T){return T}class tr{constructor(T,N,H,te){this.server=T,this.local=N||T,this.writable=!!H,this.xform=te||Wn}}let Vo=null;function va(){if(Vo)return Vo;const S=[];S.push(new tr("bucket")),S.push(new tr("generation")),S.push(new tr("metageneration")),S.push(new tr("name","fullPath",!0));const N=new tr("name");N.xform=function(De,Ve){return function(S){return!Cr(S)||S.length<2?S:Ru(S)}(Ve)},S.push(N);const te=new tr("size");return te.xform=function(De,Ve){return void 0!==Ve?Number(Ve):Ve},S.push(te),S.push(new tr("timeCreated")),S.push(new tr("updated")),S.push(new tr("md5Hash",null,!0)),S.push(new tr("cacheControl",null,!0)),S.push(new tr("contentDisposition",null,!0)),S.push(new tr("contentEncoding",null,!0)),S.push(new tr("contentLanguage",null,!0)),S.push(new tr("contentType",null,!0)),S.push(new tr("metadata","customMetadata",!0)),Vo=S,Vo}function Ea(S,T,N){const H=ro(T);return null===H?null:function(S,T,N){const H={type:"file"},te=N.length;for(let De=0;De<te;De++){const Ve=N[De];H[Ve.local]=Ve.xform(H,T[Ve.server])}return function(S,T){Object.defineProperty(S,"ref",{get:function(){const De=new A(S.bucket,S.fullPath);return T._makeStorageReference(De)}})}(H,S),H}(S,H,N)}function _o(S,T){const N={},H=T.length;for(let te=0;te<H;te++){const De=T[te];De.writable&&(N[De.server]=S[De.local])}return JSON.stringify(N)}const Qa="prefixes";class hs{constructor(T,N,H,te){this.url=T,this.method=N,this.handler=H,this.timeout=te,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ki(S){if(!S)throw ii()}function wa(S,T){return function(H,te){const De=Ea(S,te,T);return ki(null!==De),De}}function vo(S){return function(N,H){let te;return te=401===N.getStatus()?N.getResponseText().includes("Firebase App Check token is invalid")?new bn("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new bn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===N.getStatus()?function(S){return new bn("quota-exceeded","Quota for bucket '"+S+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(S.bucket):403===N.getStatus()?function(S){return new bn("unauthorized","User does not have permission to access '"+S+"'.")}(S.path):H,te.serverResponse=H.serverResponse,te}}function jr(S){const T=vo(S);return function(H,te){let De=T(H,te);return 404===H.getStatus()&&(De=function(S){return new bn("object-not-found","Object '"+S+"' does not exist.")}(S.path)),De.serverResponse=te.serverResponse,De}}function As(S,T,N){const te=ur(T.fullServerUrl(),S.host,S._protocol),Ve=S.maxOperationRetryTime,ft=new hs(te,"GET",wa(S,N),Ve);return ft.errorHandler=jr(T),ft}function nr(S,T,N,H,te){const De={};De.prefix=T.isRoot?"":T.path+"/",N&&N.length>0&&(De.delimiter=N),H&&(De.pageToken=H),te&&(De.maxResults=te);const ft=ur(T.bucketOnlyServerUrl(),S.host,S._protocol),Vt=S.maxOperationRetryTime,Ft=new hs(ft,"GET",function(S,T){return function(H,te){const De=function(S,T,N){const H=ro(N);return null===H?null:function(S,T,N){const H={prefixes:[],items:[],nextPageToken:N.nextPageToken};if(N[Qa])for(const te of N[Qa]){const De=te.replace(/\/$/,""),Ve=S._makeStorageReference(new A(T,De));H.prefixes.push(Ve)}if(N.items)for(const te of N.items){const De=S._makeStorageReference(new A(T,te.name));H.items.push(De)}return H}(S,T,H)}(S,T,te);return ki(null!==De),De}}(S,T.bucket),Vt);return Ft.urlParams=De,Ft.errorHandler=vo(T),Ft}function Ss(S,T,N){const te=ur(T.fullServerUrl(),S.host,S._protocol),Ve=S.maxOperationRetryTime,ft=new hs(te,"GET",function(S,T){return function(H,te){const De=Ea(S,te,T);return ki(null!==De),function(S,T,N,H){const te=ro(T);if(null===te||!Cr(te.downloadTokens))return null;const De=te.downloadTokens;if(0===De.length)return null;const Ve=encodeURIComponent;return De.split(",").map(Vt=>{const qn=S.fullPath;return ur("/b/"+Ve(S.bucket)+"/o/"+Ve(qn),N,H)+Mr({alt:"media",token:Vt})})[0]}(De,te,S.host,S._protocol)}}(S,N),Ve);return ft.errorHandler=jr(T),ft}function Eo(S,T,N,H){const De=ur(T.fullServerUrl(),S.host,S._protocol),ft=_o(N,H),Vt=S.maxOperationRetryTime,Ft=new hs(De,"PATCH",wa(S,H),Vt);return Ft.headers={"Content-Type":"application/json; charset=utf-8"},Ft.body=ft,Ft.errorHandler=jr(T),Ft}function Mu(S,T){const H=ur(T.fullServerUrl(),S.host,S._protocol),ft=new hs(H,"DELETE",function(nt,Vt){},S.maxOperationRetryTime);return ft.successCodes=[200,204],ft.errorHandler=jr(T),ft}function Ja(S,T,N){const H=Object.assign({},N);return H.fullPath=S.path,H.size=T.size(),H.contentType||(H.contentType=function(S,T){return T&&T.type()||"application/octet-stream"}(0,T)),H}class Vs{constructor(T,N,H,te){this.current=T,this.total=N,this.finalized=!!H,this.metadata=te||null}}function Rs(S,T){let N=null;try{N=S.getResponseHeader("X-Goog-Upload-Status")}catch(te){ki(!1)}return ki(!!N&&-1!==(T||["active"]).indexOf(N)),N}const so={STATE_CHANGED:"state_changed"},lr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ca(S){switch(S){case"running":case"pausing":case"canceling":return lr.RUNNING;case"paused":return lr.PAUSED;case"success":return lr.SUCCESS;case"canceled":return lr.CANCELED;case"error":default:return lr.ERROR}}class Bs{constructor(T,N,H){if("function"==typeof T||null!=N||null!=H)this.next=T,this.error=null!=N?N:void 0,this.complete=null!=H?H:void 0;else{const De=T;this.next=De.next,this.error=De.error,this.complete=De.complete}}}function Zn(S){return(...T)=>{Promise.resolve().then(()=>S(...T))}}class fs{constructor(T,N,H=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=T,this._blob=N,this._metadata=H,this._mappings=va(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=te=>{this._request=void 0,this._chunkMultiplier=1,te._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=te,this._transition("error"))},this._metadataErrorHandler=te=>{this._request=void 0,te._codeEquals("canceled")?this.completeTransitions_():(this._error=te,this._transition("error"))},this._promise=new Promise((te,De)=>{this._resolve=te,this._reject=De,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const T=this._transferred;return N=>this._updateProgress(T+N)}_shouldDoResumable(T){return T.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(T){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([N,H])=>{switch(this._state){case"running":T(N,H);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((T,N)=>{const H=function(S,T,N,H,te){const De=T.bucketOnlyServerUrl(),Ve=Ja(T,H,te),ft={name:Ve.fullPath},nt=ur(De,S.host,S._protocol),Ft={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${H.size()}`,"X-Goog-Upload-Header-Content-Type":Ve.contentType,"Content-Type":"application/json; charset=utf-8"},qn=_o(Ve,N),vn=new hs(nt,"POST",function(ui){let ti;Rs(ui);try{ti=ui.getResponseHeader("X-Goog-Upload-URL")}catch(Ir){ki(!1)}return ki(Cr(ti)),ti},S.maxUploadRetryTime);return vn.urlParams=ft,vn.headers=Ft,vn.body=qn,vn.errorHandler=vo(T),vn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),te=this._ref.storage._makeRequest(H,T,N);this._request=te,te.getPromise().then(De=>{this._request=void 0,this._uploadUrl=De,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const T=this._uploadUrl;this._resolveToken((N,H)=>{const te=function(S,T,N,H){const nt=new hs(N,"POST",function(Vt){const Ft=Rs(Vt,["active","final"]);let qn=null;try{qn=Vt.getResponseHeader("X-Goog-Upload-Size-Received")}catch(_r){ki(!1)}qn||ki(!1);const yr=Number(qn);return ki(!isNaN(yr)),new Vs(yr,H.size(),"final"===Ft)},S.maxUploadRetryTime);return nt.headers={"X-Goog-Upload-Command":"query"},nt.errorHandler=vo(T),nt}(this._ref.storage,this._ref._location,T,this._blob),De=this._ref.storage._makeRequest(te,N,H);this._request=De,De.getPromise().then(Ve=>{Ve=Ve,this._request=void 0,this._updateProgress(Ve.current),this._needToFetchStatus=!1,Ve.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const T=262144*this._chunkMultiplier,N=new Vs(this._transferred,this._blob.size()),H=this._uploadUrl;this._resolveToken((te,De)=>{let Ve;try{Ve=function(S,T,N,H,te,De,Ve,ft){const nt=new Vs(0,0);if(Ve?(nt.current=Ve.current,nt.total=Ve.total):(nt.current=0,nt.total=H.size()),H.size()!==nt.total)throw new bn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const Vt=nt.total-nt.current;let Ft=Vt;te>0&&(Ft=Math.min(Ft,te));const qn=nt.current,vn={"X-Goog-Upload-Command":Ft===Vt?"upload, finalize":"upload","X-Goog-Upload-Offset":`${nt.current}`},ui=H.slice(qn,qn+Ft);if(null===ui)throw oi();const Ns=new hs(N,"POST",function(Ti,au){const Go=Rs(Ti,["active","final"]),Fl=nt.current+Ft,Wo=H.size();let Ta;return Ta="final"===Go?wa(T,De)(Ti,au):null,new Vs(Fl,Wo,"final"===Go,Ta)},T.maxUploadRetryTime);return Ns.headers=vn,Ns.body=ui.uploadData(),Ns.progressCallback=ft||null,Ns.errorHandler=vo(S),Ns}(this._ref._location,this._ref.storage,H,this._blob,T,this._mappings,N,this._makeProgressCallback())}catch(nt){return this._error=nt,void this._transition("error")}const ft=this._ref.storage._makeRequest(Ve,te,De);this._request=ft,ft.getPromise().then(nt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(nt.current),nt.finalized?(this._metadata=nt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((T,N)=>{const H=As(this._ref.storage,this._ref._location,this._mappings),te=this._ref.storage._makeRequest(H,T,N);this._request=te,te.getPromise().then(De=>{this._request=void 0,this._metadata=De,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((T,N)=>{const H=function(S,T,N,H,te){const De=T.bucketOnlyServerUrl(),Ve={"X-Goog-Upload-Protocol":"multipart"},nt=function(){let Ns="";for(let Ti=0;Ti<2;Ti++)Ns+=Math.random().toString().slice(2);return Ns}();Ve["Content-Type"]="multipart/related; boundary="+nt;const Vt=Ja(T,H,te),Ft=_o(Vt,N),_r=Ii.getBlob("--"+nt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ft+"\r\n--"+nt+"\r\nContent-Type: "+Vt.contentType+"\r\n\r\n",H,"\r\n--"+nt+"--");if(null===_r)throw oi();const vn={name:Vt.fullPath},ui=ur(De,S.host,S._protocol),Ir=S.maxUploadRetryTime,co=new hs(ui,"POST",wa(S,N),Ir);return co.urlParams=vn,co.headers=Ve,co.body=_r.uploadData(),co.errorHandler=vo(T),co}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),te=this._ref.storage._makeRequest(H,T,N);this._request=te,te.getPromise().then(De=>{this._request=void 0,this._metadata=De,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(T){const N=this._transferred;this._transferred=T,this._transferred!==N&&this._notifyObservers()}_transition(T){if(this._state!==T)switch(T){case"canceling":case"pausing":this._state=T,void 0!==this._request&&this._request.cancel();break;case"running":const N="paused"===this._state;this._state=T,N&&(this._notifyObservers(),this._start());break;case"paused":this._state=T,this._notifyObservers();break;case"canceled":this._error=Zr(),this._state=T,this._notifyObservers();break;case"error":case"success":this._state=T,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const T=Ca(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:T,metadata:this._metadata,task:this,ref:this._ref}}on(T,N,H,te){const De=new Bs(N||void 0,H||void 0,te||void 0);return this._addObserver(De),()=>{this._removeObserver(De)}}then(T,N){return this._promise.then(T,N)}catch(T){return this.then(null,T)}_addObserver(T){this._observers.push(T),this._notifyObserver(T)}_removeObserver(T){const N=this._observers.indexOf(T);-1!==N&&this._observers.splice(N,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(N=>{this._notifyObserver(N)})}_finishPromise(){if(void 0!==this._resolve){let T=!0;switch(Ca(this._state)){case lr.SUCCESS:Zn(this._resolve.bind(null,this.snapshot))();break;case lr.CANCELED:case lr.ERROR:Zn(this._reject.bind(null,this._error))();break;default:T=!1}T&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(T){switch(Ca(this._state)){case lr.RUNNING:case lr.PAUSED:T.next&&Zn(T.next.bind(T,this.snapshot))();break;case lr.SUCCESS:T.complete&&Zn(T.complete.bind(T))();break;case lr.CANCELED:case lr.ERROR:T.error&&Zn(T.error.bind(T,this._error))();break;default:T.error&&Zn(T.error.bind(T,this._error))()}}resume(){const T="paused"===this._state||"pausing"===this._state;return T&&this._transition("running"),T}pause(){const T="running"===this._state;return T&&this._transition("pausing"),T}cancel(){const T="running"===this._state||"pausing"===this._state;return T&&this._transition("canceling"),T}}class wo{constructor(T,N){this._service=T,this._location=N instanceof A?N:A.makeFromUrl(N,T.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(T,N){return new wo(T,N)}get root(){const T=new A(this._location.bucket,"");return this._newRef(this._service,T)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ru(this._location.path)}get storage(){return this._service}get parent(){const T=function(S){if(0===S.length)return null;const T=S.lastIndexOf("/");return-1===T?"":S.slice(0,T)}(this._location.path);if(null===T)return null;const N=new A(this._location.bucket,T);return new wo(this._service,N)}_throwIfRoot(T){if(""===this._location.path)throw K(T)}}function tu(S,T,N){return bo.apply(this,arguments)}function bo(){return(bo=(0,er.Z)(function*(S,T,N){const te=yield Co(S,{pageToken:N});T.prefixes.push(...te.prefixes),T.items.push(...te.items),null!=te.nextPageToken&&(yield tu(S,T,te.nextPageToken))})).apply(this,arguments)}function Co(S,T){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,er.Z)(function*(S,T){null!=T&&"number"==typeof T.maxResults&&Zi("options.maxResults",1,1e3,T.maxResults);const N=T||{},H=nr(S.storage,S._location,"/",N.pageToken,N.maxResults);return(yield S.storage.makeRequestWithTokens(H)).getPromise()})).apply(this,arguments)}function ao(){return(ao=(0,er.Z)(function*(S){S._throwIfRoot("getMetadata");const T=As(S.storage,S._location,va());return(yield S.storage.makeRequestWithTokens(T)).getPromise()})).apply(this,arguments)}function Qi(){return(Qi=(0,er.Z)(function*(S,T){S._throwIfRoot("updateMetadata");const N=Eo(S.storage,S._location,T,va());return(yield S.storage.makeRequestWithTokens(N)).getPromise()})).apply(this,arguments)}function uo(){return(uo=(0,er.Z)(function*(S){S._throwIfRoot("getDownloadURL");const T=Ss(S.storage,S._location,va());return(yield S.storage.makeRequestWithTokens(T)).getPromise().then(N=>{if(null===N)throw L();return N})})).apply(this,arguments)}function at(){return(at=(0,er.Z)(function*(S){S._throwIfRoot("deleteObject");const T=Mu(S.storage,S._location);return(yield S.storage.makeRequestWithTokens(T)).getPromise()})).apply(this,arguments)}function gr(S,T){const N=function(S,T){const N=T.split("/").filter(H=>H.length>0).join("/");return 0===S.length?N:S+"/"+N}(S._location.path,T),H=new A(S._location.bucket,N);return new wo(S.storage,H)}function St(S,T){if(S instanceof je){const N=S;if(null==N._bucket)throw new bn("no-default-bucket","No default bucket found. Did you set the '"+Ds+"' property when initializing the app?");const H=new wo(N,N._bucket);return null!=T?St(H,T):H}return void 0!==T?gr(S,T):S}function Gt(S,T){if(T&&function(S){return/^[A-Za-z]+:\/\//.test(S)}(T)){if(S instanceof je)return function(S,T){return new wo(S,T)}(S,T);throw z("To use ref(service, url), the first argument must be a Storage instance.")}return St(S,T)}function Do(S,T){const N=null==T?void 0:T[Ds];return null==N?null:A.makeFromBucketSpec(N,S)}class je{constructor(T,N,H,te,De,Ve){this.app=T,this._authProvider=N,this._appCheckProvider=H,this._pool=te,this._url=De,this._firebaseVersion=Ve,this._bucket=null,this._host=Xs,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=De?A.makeFromBucketSpec(De,this._host):Do(this._host,this.app.options)}get host(){return this._host}set host(T){this._host=T,this._bucket=null!=this._url?A.makeFromBucketSpec(this._url,T):Do(T,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(T){Zi("time",0,Number.POSITIVE_INFINITY,T),this._maxUploadRetryTime=T}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(T){Zi("time",0,Number.POSITIVE_INFINITY,T),this._maxOperationRetryTime=T}_getAuthToken(){var T=this;return(0,er.Z)(function*(){if(T._overrideAuthToken)return T._overrideAuthToken;const N=T._authProvider.getImmediate({optional:!0});if(N){const H=yield N.getToken();if(null!==H)return H.accessToken}return null})()}_getAppCheckToken(){var T=this;return(0,er.Z)(function*(){const N=T._appCheckProvider.getImmediate({optional:!0});return N?(yield N.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(T=>T.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(T){return new wo(this,T)}_makeRequest(T,N,H){if(this._deleted)return new W(F());{const te=function(S,T,N,H,te,De){const Ve=Mr(S.urlParams),ft=S.url+Ve,nt=Object.assign({},S.headers);return function(S,T){T&&(S["X-Firebase-GMPID"]=T)}(nt,T),function(S,T){null!==T&&T.length>0&&(S.Authorization="Firebase "+T)}(nt,N),function(S,T){S["X-Firebase-Storage-Version"]="webjs/"+(null!=T?T:"AppManager")}(nt,De),function(S,T){null!==T&&(S["X-Firebase-AppCheck"]=T)}(nt,H),new mo(ft,S.method,nt,S.body,S.successCodes,S.additionalRetryCodes,S.handler,S.errorHandler,S.timeout,S.progressCallback,te)}(T,this._appId,N,H,this._pool,this._firebaseVersion);return this._requests.add(te),te.getPromise().then(()=>this._requests.delete(te),()=>this._requests.delete(te)),te}}makeRequestWithTokens(T){var N=this;return(0,er.Z)(function*(){const[H,te]=yield Promise.all([N._getAuthToken(),N._getAppCheckToken()]);return N._makeRequest(T,H,te)})()}}function gt(S,T){return Gt(S=(0,Hn.m9)(S),T)}(0,Js._registerComponent)(new Oi.wA("storage",function(S,{instanceIdentifier:T}){const N=S.getProvider("app").getImmediate(),H=S.getProvider("auth-internal"),te=S.getProvider("app-check-internal");return new je(N,H,te,new x,T,Js.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Js.registerVersion)("@firebase/storage","0.8.3");class Xr{constructor(T,N,H){this._delegate=T,this.task=N,this.ref=H}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Hr{constructor(T,N){this._delegate=T,this._ref=N,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Xr(this._delegate.snapshot,this,this._ref)}then(T,N){return this._delegate.then(H=>{if(T)return T(new Xr(H,this,this._ref))},N)}on(T,N,H,te){let De;return N&&(De="function"==typeof N?Ve=>N(new Xr(Ve,this,this._ref)):{next:N.next?Ve=>N.next(new Xr(Ve,this,this._ref)):void 0,complete:N.complete||void 0,error:N.error||void 0}),this._delegate.on(T,De,H||void 0,te||void 0)}}class mn{constructor(T,N){this._delegate=T,this._service=N}get prefixes(){return this._delegate.prefixes.map(T=>new mr(T,this._service))}get items(){return this._delegate.items.map(T=>new mr(T,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class mr{constructor(T,N){this._delegate=T,this.storage=N}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(T){const N=function(S,T){return gr(S,T)}(this._delegate,T);return new mr(N,this.storage)}get root(){return new mr(this._delegate.root,this.storage)}get parent(){const T=this._delegate.parent;return null==T?null:new mr(T,this.storage)}put(T,N){return this._throwIfRoot("put"),new Hr(function(S,T,N){return function(S,T,N){return S._throwIfRoot("uploadBytesResumable"),new fs(S,new Ii(T),N)}(S=(0,Hn.m9)(S),T,N)}(this._delegate,T,N),this)}putString(T,N=Xt.RAW,H){this._throwIfRoot("putString");const te=Gn(N,T),De=Object.assign({},H);return null==De.contentType&&null!=te.contentType&&(De.contentType=te.contentType),new Hr(new fs(this._delegate,new Ii(te.data,!0),De),this)}listAll(){return(S=this._delegate,function(S){const T={prefixes:[],items:[]};return tu(S,T).then(()=>T)}(S=(0,Hn.m9)(S))).then(T=>new mn(T,this.storage));var S}list(T){return function(S,T){return Co(S=(0,Hn.m9)(S),T)}(this._delegate,T||void 0).then(N=>new mn(N,this.storage))}getMetadata(){return function(S){return ao.apply(this,arguments)}((0,Hn.m9)(this._delegate))}updateMetadata(T){return function(S,T){return function(S,T){return Qi.apply(this,arguments)}(S=(0,Hn.m9)(S),T)}(this._delegate,T)}getDownloadURL(){return function(S){return uo.apply(this,arguments)}((0,Hn.m9)(this._delegate))}delete(){return this._throwIfRoot("delete"),function(S){return at.apply(this,arguments)}((0,Hn.m9)(this._delegate))}_throwIfRoot(T){if(""===this._delegate._location.path)throw K(T)}}class Jn{constructor(T,N){this.app=T,this._delegate=N}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(T){if(To(T))throw z("ref() expected a child path but got a URL, use refFromURL instead.");return new mr(gt(this._delegate,T),this)}refFromURL(T){if(!To(T))throw z("refFromURL() expected a full URL but got a child path, use ref() instead.");try{A.makeFromUrl(T,this._delegate.host)}catch(N){throw z("refFromUrl() expected a valid full URL but got an invalid one.")}return new mr(gt(this._delegate,T),this)}setMaxUploadRetryTime(T){this._delegate.maxUploadRetryTime=T}setMaxOperationRetryTime(T){this._delegate.maxOperationRetryTime=T}useEmulator(T,N,H={}){!function(S,T,N,H={}){!function(S,T,N,H={}){S.host=`${T}:${N}`,S._protocol="http";const{mockUserToken:te}=H;te&&(S._overrideAuthToken="string"==typeof te?te:(0,Hn.Sg)(te,S.app.options.projectId))}(S,T,N,H)}(this._delegate,T,N,H)}}function To(S){return/^[A-Za-z]+:\/\//.test(S)}function zn(S,{instanceIdentifier:T}){const N=S.getProvider("app-compat").getImmediate(),H=S.getProvider("storage").getImmediate({identifier:T});return new Jn(N,H)}function Ou(S){const T=function(S){return new Ys.y(T=>{const N=Ve=>T.next(Ve);N(S.snapshot);const De=S.on("state_changed",N);return S.then(Ve=>{N(Ve),T.complete()},Ve=>{N(S.snapshot),(Ve=>{T.error(Ve)})(Ve)}),function(){De()}}).pipe(function(S,T=ko.P){return N=>N.lift(new go(S,T))}(0))}(S);return{task:S,then:S.then.bind(S),catch:S.catch.bind(S),pause:S.pause.bind(S),cancel:S.cancel.bind(S),resume:S.resume.bind(S),snapshotChanges:()=>T,percentageChanges:()=>T.pipe((0,$i.U)(N=>N.bytesTransferred/N.totalBytes*100))}}function nl(S){return{getDownloadURL:()=>(0,ar.of)(void 0).pipe(Kr.fc,(0,Is.w)(()=>S.getDownloadURL()),Kr.iC),getMetadata:()=>(0,ar.of)(void 0).pipe(Kr.fc,(0,Is.w)(()=>S.getMetadata()),Kr.iC),delete:()=>(0,Cs.D)(S.delete()),child:T=>nl(S.child(T)),updateMetadata:T=>(0,Cs.D)(S.updateMetadata(T)),put:(T,N)=>Ou(S.put(T,N)),putString:(T,N,H)=>Ou(S.putString(T,N,H)),listAll:()=>(0,Cs.D)(S.listAll())}}!function(S){const T={TaskState:lr,TaskEvent:so,StringFormat:Xt,Storage:Jn,Reference:mr};S.INTERNAL.registerComponent(new Oi.wA("storage-compat",zn,"PUBLIC").setServiceProps(T).setMultipleInstances(!0)),S.registerVersion("@firebase/storage-compat","0.1.3")}(Fo.Z);const iu=new U.OlP("angularfire2.storageBucket"),$o=new U.OlP("angularfire2.storage.maxUploadRetryTime"),Pu=new U.OlP("angularfire2.storage.maxOperationRetryTime"),id=new U.OlP("angularfire2.storage.use-emulator");let kt=(()=>{class S{constructor(N,H,te,De,Ve,ft,nt,Vt,Ft){const qn=(0,pr.on)(N,Ve,H);this.storage=(0,Kr.cc)(`${qn.name}.storage.${te}`,"AngularFireStorage",qn.name,()=>{const yr=Ve.runOutsideAngular(()=>qn.storage(te||void 0)),_r=Ft;return _r&&yr.useEmulator(..._r),nt&&yr.setMaxUploadRetryTime(nt),Vt&&yr.setMaxOperationRetryTime(Vt),yr},[nt,Vt])}ref(N){return nl(this.storage.ref(N))}refFromURL(N){return nl(this.storage.refFromURL(N))}upload(N,H,te){return nl(this.storage.ref(N)).put(H,te)}}return S.\u0275fac=function(N){return new(N||S)(U.LFG(pr.Dh),U.LFG(pr.xv,8),U.LFG(iu,8),U.LFG(U.Lbi),U.LFG(U.R0b),U.LFG(Kr.HU),U.LFG($o,8),U.LFG(Pu,8),U.LFG(id,8))},S.\u0275prov=U.Yz7({token:S,factory:S.\u0275fac,providedIn:"any"}),S})(),Xi=(()=>{class S{}return S.\u0275fac=function(N){return new(N||S)},S.\u0275mod=U.oAB({type:S}),S.\u0275inj=U.cJS({}),S})(),lo=(()=>{class S{constructor(){as.Z.registerVersion("angularfire",Kr.q4.full,"gcs-compat")}}return S.\u0275fac=function(N){return new(N||S)},S.\u0275mod=U.oAB({type:S}),S.\u0275inj=U.cJS({providers:[kt],imports:[Xi]}),S})();const su_firebaseConfig={apiKey:"AIzaSyDATiSbv3bcp_VDukjbWSILIpVFSW6_t-4",authDomain:"pp-lavoiv.firebaseapp.com",projectId:"pp-lavoiv",storageBucket:"pp-lavoiv.appspot.com",messagingSenderId:"711234699975",appId:"1:711234699975:web:311363ff429227fa4a34e2"};var ei=$(665);let ou=(()=>{class S{}return S.\u0275fac=function(N){return new(N||S)},S.\u0275mod=U.oAB({type:S,bootstrap:[fr]}),S.\u0275inj=U.cJS({providers:[],imports:[[_s,Gi,pr.hO.initializeApp(su_firebaseConfig),Wi.yb,Fs.ww,lo,ei.UX]]}),S})();(0,U.G48)(),Vn().bootstrapModule(ou).catch(S=>console.error(S))},4762:(bt,Be,$)=>{"use strict";function Re(Me,Le){var ge={};for(var xe in Me)Object.prototype.hasOwnProperty.call(Me,xe)&&Le.indexOf(xe)<0&&(ge[xe]=Me[xe]);if(null!=Me&&"function"==typeof Object.getOwnPropertySymbols){var ve=0;for(xe=Object.getOwnPropertySymbols(Me);ve<xe.length;ve++)Le.indexOf(xe[ve])<0&&Object.prototype.propertyIsEnumerable.call(Me,xe[ve])&&(ge[xe[ve]]=Me[xe[ve]])}return ge}function de(Me,Le,ge,xe){return new(ge||(ge=Promise))(function(Ie,Ye){function Et(dt){try{ut(xe.next(dt))}catch(Ot){Ye(Ot)}}function Qt(dt){try{ut(xe.throw(dt))}catch(Ot){Ye(Ot)}}function ut(dt){dt.done?Ie(dt.value):function(Ie){return Ie instanceof ge?Ie:new ge(function(Ye){Ye(Ie)})}(dt.value).then(Et,Qt)}ut((xe=xe.apply(Me,Le||[])).next())})}function oe(Me,Le){var xe,ve,Ie,Ye,ge={label:0,sent:function(){if(1&Ie[0])throw Ie[1];return Ie[1]},trys:[],ops:[]};return Ye={next:Et(0),throw:Et(1),return:Et(2)},"function"==typeof Symbol&&(Ye[Symbol.iterator]=function(){return this}),Ye;function Et(ut){return function(dt){return function(ut){if(xe)throw new TypeError("Generator is already executing.");for(;ge;)try{if(xe=1,ve&&(Ie=2&ut[0]?ve.return:ut[0]?ve.throw||((Ie=ve.return)&&Ie.call(ve),0):ve.next)&&!(Ie=Ie.call(ve,ut[1])).done)return Ie;switch(ve=0,Ie&&(ut=[2&ut[0],Ie.value]),ut[0]){case 0:case 1:Ie=ut;break;case 4:return ge.label++,{value:ut[1],done:!1};case 5:ge.label++,ve=ut[1],ut=[0];continue;case 7:ut=ge.ops.pop(),ge.trys.pop();continue;default:if(!(Ie=(Ie=ge.trys).length>0&&Ie[Ie.length-1])&&(6===ut[0]||2===ut[0])){ge=0;continue}if(3===ut[0]&&(!Ie||ut[1]>Ie[0]&&ut[1]<Ie[3])){ge.label=ut[1];break}if(6===ut[0]&&ge.label<Ie[1]){ge.label=Ie[1],Ie=ut;break}if(Ie&&ge.label<Ie[2]){ge.label=Ie[2],ge.ops.push(ut);break}Ie[2]&&ge.ops.pop(),ge.trys.pop();continue}ut=Le.call(Me,ge)}catch(dt){ut=[6,dt],ve=0}finally{xe=Ie=0}if(5&ut[0])throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}}([ut,dt])}}}function he(Me){var Le="function"==typeof Symbol&&Symbol.iterator,ge=Le&&Me[Le],xe=0;if(ge)return ge.call(Me);if(Me&&"number"==typeof Me.length)return{next:function(){return Me&&xe>=Me.length&&(Me=void 0),{value:Me&&Me[xe++],done:!Me}}};throw new TypeError(Le?"Object is not iterable.":"Symbol.iterator is not defined.")}function ye(Me,Le){var ge="function"==typeof Symbol&&Me[Symbol.iterator];if(!ge)return Me;var ve,Ye,xe=ge.call(Me),Ie=[];try{for(;(void 0===Le||Le-- >0)&&!(ve=xe.next()).done;)Ie.push(ve.value)}catch(Et){Ye={error:Et}}finally{try{ve&&!ve.done&&(ge=xe.return)&&ge.call(xe)}finally{if(Ye)throw Ye.error}}return Ie}function Fe(Me,Le,ge){if(ge||2===arguments.length)for(var Ie,xe=0,ve=Le.length;xe<ve;xe++)(Ie||!(xe in Le))&&(Ie||(Ie=Array.prototype.slice.call(Le,0,xe)),Ie[xe]=Le[xe]);return Me.concat(Ie||Array.prototype.slice.call(Le))}$.d(Be,{_T:()=>Re,mG:()=>de,Jh:()=>oe,XA:()=>he,CR:()=>ye,ev:()=>Fe})},8239:(bt,Be,$)=>{"use strict";function w(ne,Re,Ce,ce,Se,de,oe){try{var J=ne[de](oe),Q=J.value}catch(he){return void Ce(he)}J.done?Re(Q):Promise.resolve(Q).then(ce,Se)}function U(ne){return function(){var Re=this,Ce=arguments;return new Promise(function(ce,Se){var de=ne.apply(Re,Ce);function oe(Q){w(de,ce,Se,oe,J,"next",Q)}function J(Q){w(de,ce,Se,oe,J,"throw",Q)}oe(void 0)})}}$.d(Be,{Z:()=>U})}},bt=>{bt(bt.s=9891)}]);