(self.webpackChunkpp_labo_iv=self.webpackChunkpp_labo_iv||[]).push([[179],{8255:bt=>{function Ge(G){return Promise.resolve().then(()=>{var w=new Error("Cannot find module '"+G+"'");throw w.code="MODULE_NOT_FOUND",w})}Ge.keys=()=>[],Ge.resolve=Ge,Ge.id=8255,bt.exports=Ge},8583:(bt,Ge,G)=>{"use strict";G.d(Ge,{mr:()=>Qe,ez:()=>io,K0:()=>Fe,Do:()=>st,V_:()=>ee,Ye:()=>se,S$:()=>Ae,sg:()=>Gr,O5:()=>Oi,b0:()=>Je,lw:()=>ge,EM:()=>oi,JF:()=>Ar,PM:()=>so,w_:()=>he,bD:()=>Fi,q:()=>ne,Mx:()=>zt,HT:()=>Te});var w=G(3018);let j=null;function ne(){return j}function Te(L){j||(j=L)}class he{}const Fe=new w.OlP("DocumentToken");let ge=(()=>{class L{historyGo(F){throw new Error("Not implemented")}}return L.\u0275fac=function(F){return new(F||L)},L.\u0275prov=(0,w.Yz7)({factory:oe,token:L,providedIn:"platform"}),L})();function oe(){return(0,w.LFG)(te)}const ee=new w.OlP("Location Initialized");let te=(()=>{class L extends ge{constructor(F){super(),this._doc=F,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ne().getBaseHref(this._doc)}onPopState(F){const K=ne().getGlobalEventTarget(this._doc,"window");return K.addEventListener("popstate",F,!1),()=>K.removeEventListener("popstate",F)}onHashChange(F){const K=ne().getGlobalEventTarget(this._doc,"window");return K.addEventListener("hashchange",F,!1),()=>K.removeEventListener("hashchange",F)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(F){this.location.pathname=F}pushState(F,K,le){me()?this._history.pushState(F,K,le):this.location.hash=le}replaceState(F,K,le){me()?this._history.replaceState(F,K,le):this.location.hash=le}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}}return L.\u0275fac=function(F){return new(F||L)(w.LFG(Fe))},L.\u0275prov=(0,w.Yz7)({factory:ve,token:L,providedIn:"platform"}),L})();function me(){return!!window.history.pushState}function ve(){return new te((0,w.LFG)(Fe))}function be(L,z){if(0==L.length)return z;if(0==z.length)return L;let F=0;return L.endsWith("/")&&F++,z.startsWith("/")&&F++,2==F?L+z.substring(1):1==F?L+z:L+"/"+z}function Ue(L){const z=L.match(/#|\?|$/),F=z&&z.index||L.length;return L.slice(0,F-("/"===L[F-1]?1:0))+L.slice(F)}function Se(L){return L&&"?"!==L[0]?"?"+L:L}let Ae=(()=>{class L{historyGo(F){throw new Error("Not implemented")}}return L.\u0275fac=function(F){return new(F||L)},L.\u0275prov=(0,w.Yz7)({factory:it,token:L,providedIn:"root"}),L})();function it(L){const z=(0,w.LFG)(Fe).location;return new Je((0,w.LFG)(ge),z&&z.origin||"")}const Qe=new w.OlP("appBaseHref");let Je=(()=>{class L extends Ae{constructor(F,K){if(super(),this._platformLocation=F,this._removeListenerFns=[],null==K&&(K=this._platformLocation.getBaseHrefFromDOM()),null==K)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=K}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return be(this._baseHref,F)}path(F=!1){const K=this._platformLocation.pathname+Se(this._platformLocation.search),le=this._platformLocation.hash;return le&&F?`${K}${le}`:K}pushState(F,K,le,ke){const rt=this.prepareExternalUrl(le+Se(ke));this._platformLocation.pushState(F,K,rt)}replaceState(F,K,le,ke){const rt=this.prepareExternalUrl(le+Se(ke));this._platformLocation.replaceState(F,K,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(F=0){var K,le;null===(le=(K=this._platformLocation).historyGo)||void 0===le||le.call(K,F)}}return L.\u0275fac=function(F){return new(F||L)(w.LFG(ge),w.LFG(Qe,8))},L.\u0275prov=w.Yz7({token:L,factory:L.\u0275fac}),L})(),st=(()=>{class L extends Ae{constructor(F,K){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=K&&(this._baseHref=K)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){let K=this._platformLocation.hash;return null==K&&(K="#"),K.length>0?K.substring(1):K}prepareExternalUrl(F){const K=be(this._baseHref,F);return K.length>0?"#"+K:K}pushState(F,K,le,ke){let rt=this.prepareExternalUrl(le+Se(ke));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.pushState(F,K,rt)}replaceState(F,K,le,ke){let rt=this.prepareExternalUrl(le+Se(ke));0==rt.length&&(rt=this._platformLocation.pathname),this._platformLocation.replaceState(F,K,rt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(F=0){var K,le;null===(le=(K=this._platformLocation).historyGo)||void 0===le||le.call(K,F)}}return L.\u0275fac=function(F){return new(F||L)(w.LFG(ge),w.LFG(Qe,8))},L.\u0275prov=w.Yz7({token:L,factory:L.\u0275fac}),L})(),se=(()=>{class L{constructor(F,K){this._subject=new w.vpe,this._urlChangeListeners=[],this._platformStrategy=F;const le=this._platformStrategy.getBaseHref();this._platformLocation=K,this._baseHref=Ue(Zt(le)),this._platformStrategy.onPopState(ke=>{this._subject.emit({url:this.path(!0),pop:!0,state:ke.state,type:ke.type})})}path(F=!1){return this.normalize(this._platformStrategy.path(F))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(F,K=""){return this.path()==this.normalize(F+Se(K))}normalize(F){return L.stripTrailingSlash(function(L,z){return L&&z.startsWith(L)?z.substring(L.length):z}(this._baseHref,Zt(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._platformStrategy.prepareExternalUrl(F)}go(F,K="",le=null){this._platformStrategy.pushState(le,"",F,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+Se(K)),le)}replaceState(F,K="",le=null){this._platformStrategy.replaceState(le,"",F,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+Se(K)),le)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(F=0){var K,le;null===(le=(K=this._platformStrategy).historyGo)||void 0===le||le.call(K,F)}onUrlChange(F){this._urlChangeListeners.push(F),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(K=>{this._notifyUrlChangeListeners(K.url,K.state)}))}_notifyUrlChangeListeners(F="",K){this._urlChangeListeners.forEach(le=>le(F,K))}subscribe(F,K,le){return this._subject.subscribe({next:F,error:K,complete:le})}}return L.\u0275fac=function(F){return new(F||L)(w.LFG(Ae),w.LFG(ge))},L.normalizeQueryParams=Se,L.joinWithSlash=be,L.stripTrailingSlash=Ue,L.\u0275prov=(0,w.Yz7)({factory:ut,token:L,providedIn:"root"}),L})();function ut(){return new se((0,w.LFG)(Ae),(0,w.LFG)(ge))}function Zt(L){return L.replace(/\/index.html$/,"")}var Le=(()=>((Le=Le||{})[Le.Zero=0]="Zero",Le[Le.One=1]="One",Le[Le.Two=2]="Two",Le[Le.Few=3]="Few",Le[Le.Many=4]="Many",Le[Le.Other=5]="Other",Le))();const Dn=w.kL8;class Jn{}let $i=(()=>{class L extends Jn{constructor(F){super(),this.locale=F}getPluralCategory(F,K){switch(Dn(K||this.locale)(F)){case Le.Zero:return"zero";case Le.One:return"one";case Le.Two:return"two";case Le.Few:return"few";case Le.Many:return"many";default:return"other"}}}return L.\u0275fac=function(F){return new(F||L)(w.LFG(w.soG))},L.\u0275prov=w.Yz7({token:L,factory:L.\u0275fac}),L})();function zt(L,z){z=encodeURIComponent(z);for(const F of L.split(";")){const K=F.indexOf("="),[le,ke]=-1==K?[F,""]:[F.slice(0,K),F.slice(K+1)];if(le.trim()===z)return decodeURIComponent(ke)}return null}class Us{constructor(z,F,K,le){this.$implicit=z,this.ngForOf=F,this.index=K,this.count=le}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gr=(()=>{class L{constructor(F,K,le){this._viewContainer=F,this._template=K,this._differs=le,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(F){this._ngForOf=F,this._ngForOfDirty=!0}set ngForTrackBy(F){this._trackByFn=F}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(F){F&&(this._template=F)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const F=this._ngForOf;if(!this._differ&&F)try{this._differ=this._differs.find(F).create(this.ngForTrackBy)}catch(K){throw new Error(`Cannot find a differ supporting object '${F}' of type '${function(L){return L.name||typeof L}(F)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const F=this._differ.diff(this._ngForOf);F&&this._applyChanges(F)}}_applyChanges(F){const K=[];F.forEachOperation((le,ke,rt)=>{if(null==le.previousIndex){const P=this._viewContainer.createEmbeddedView(this._template,new Us(null,this._ngForOf,-1,-1),null===rt?void 0:rt),x=new or(le,P);K.push(x)}else if(null==rt)this._viewContainer.remove(null===ke?void 0:ke);else if(null!==ke){const P=this._viewContainer.get(ke);this._viewContainer.move(P,rt);const x=new or(le,P);K.push(x)}});for(let le=0;le<K.length;le++)this._perViewChange(K[le].view,K[le].record);for(let le=0,ke=this._viewContainer.length;le<ke;le++){const rt=this._viewContainer.get(le);rt.context.index=le,rt.context.count=ke,rt.context.ngForOf=this._ngForOf}F.forEachIdentityChange(le=>{this._viewContainer.get(le.currentIndex).context.$implicit=le.item})}_perViewChange(F,K){F.context.$implicit=K.item}static ngTemplateContextGuard(F,K){return!0}}return L.\u0275fac=function(F){return new(F||L)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))},L.\u0275dir=w.lG2({type:L,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),L})();class or{constructor(z,F){this.record=z,this.view=F}}let Oi=(()=>{class L{constructor(F,K){this._viewContainer=F,this._context=new Tr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=K}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){Rn("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){Rn("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,K){return!0}}return L.\u0275fac=function(F){return new(F||L)(w.Y36(w.s_b),w.Y36(w.Rgc))},L.\u0275dir=w.lG2({type:L,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),L})();class Tr{constructor(){this.$implicit=null,this.ngIf=null}}function Rn(L,z){if(z&&!z.createEmbeddedView)throw new Error(`${L} must be a TemplateRef, but received '${(0,w.AaK)(z)}'.`)}let io=(()=>{class L{}return L.\u0275fac=function(F){return new(F||L)},L.\u0275mod=w.oAB({type:L}),L.\u0275inj=w.cJS({providers:[{provide:Jn,useClass:$i}]}),L})();const Fi="browser";function so(L){return"server"===L}let oi=(()=>{class L{}return L.\u0275prov=(0,w.Yz7)({token:L,providedIn:"root",factory:()=>new zi((0,w.LFG)(Fe),window)}),L})();class zi{constructor(z,F){this.document=z,this.window=F,this.offset=()=>[0,0]}setOffset(z){this.offset=Array.isArray(z)?()=>z:z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(z){this.supportsScrolling()&&this.window.scrollTo(z[0],z[1])}scrollToAnchor(z){if(!this.supportsScrolling())return;const F=function(L,z){const F=L.getElementById(z)||L.getElementsByName(z)[0];if(F)return F;if("function"==typeof L.createTreeWalker&&L.body&&(L.body.createShadowRoot||L.body.attachShadow)){const K=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let le=K.currentNode;for(;le;){const ke=le.shadowRoot;if(ke){const rt=ke.getElementById(z)||ke.querySelector(`[name="${z}"]`);if(rt)return rt}le=K.nextNode()}}return null}(this.document,z);F&&(this.scrollToElement(F),this.attemptFocus(F))}setHistoryScrollRestoration(z){if(this.supportScrollRestoration()){const F=this.window.history;F&&F.scrollRestoration&&(F.scrollRestoration=z)}}scrollToElement(z){const F=z.getBoundingClientRect(),K=F.left+this.window.pageXOffset,le=F.top+this.window.pageYOffset,ke=this.offset();this.window.scrollTo(K-ke[0],le-ke[1])}attemptFocus(z){return z.focus(),this.document.activeElement===z}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const z=Zr(this.window.history)||Zr(Object.getPrototypeOf(this.window.history));return!(!z||!z.writable&&!z.set)}catch(z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(z){return!1}}}function Zr(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class Ar{}},3018:(bt,Ge,G)=>{"use strict";G.d(Ge,{deG:()=>Q,tb:()=>nC,AFp:()=>Xw,ip1:()=>Qv,CZH:()=>xf,hGG:()=>HS,z2F:()=>Jg,sBO:()=>AI,Sil:()=>Qg,_Vd:()=>Cf,EJc:()=>iC,SBq:()=>Dl,qLn:()=>$e,vpe:()=>Tl,gxx:()=>Bc,tBr:()=>Ju,XFs:()=>tt,OlP:()=>$,zs3:()=>si,ZZ4:()=>Wy,aQg:()=>zy,soG:()=>r_,YKP:()=>K0,v3s:()=>CS,h0i:()=>rh,PXZ:()=>mS,R0b:()=>ja,FiY:()=>po,Lbi:()=>tC,g9A:()=>eC,Qsj:()=>fI,FYo:()=>Gy,JOm:()=>Ma,Tiy:()=>Iv,q3G:()=>Cr,tp0:()=>Sa,EAV:()=>TS,Rgc:()=>Ug,dDg:()=>uC,DyG:()=>Ms,q4F:()=>Dv,GfV:()=>j0,s_b:()=>Zy,ifc:()=>Qn,eFA:()=>fC,G48:()=>lS,Gpc:()=>Se,X6Q:()=>iE,_c5:()=>FS,VLi:()=>uS,c2e:()=>rC,zSh:()=>Zl,wAp:()=>tn,vHH:()=>Je,EiD:()=>md,mCW:()=>la,qzn:()=>Nr,JVY:()=>Yi,pB0:()=>Do,eBb:()=>vc,L6k:()=>ii,LAX:()=>Gf,cg1:()=>gv,Tjo:()=>PS,kL8:()=>l0,yhl:()=>Ru,dqk:()=>ue,sIi:()=>$c,CqO:()=>Xd,QGY:()=>bg,F4k:()=>Iy,RDi:()=>F,AaK:()=>ve,z3N:()=>Io,qOj:()=>rf,TTD:()=>us,_Bn:()=>F0,xp6:()=>Rh,uIk:()=>oy,ekj:()=>vf,Suo:()=>xw,Xpm:()=>vs,lG2:()=>Bi,Yz7:()=>un,cJS:()=>yr,oAB:()=>Ei,Yjl:()=>wi,Y36:()=>Jd,_UZ:()=>Ey,qZA:()=>Cg,TgZ:()=>wg,EpF:()=>by,n5z:()=>Cn,Ikx:()=>pv,LFG:()=>$r,$8M:()=>Tt,NdJ:()=>pf,CRH:()=>Nw,kcU:()=>Za,O4$:()=>Ss,oxw:()=>Tg,Q6J:()=>vg,MGl:()=>pu,iGM:()=>Rw,MAs:()=>lg,CHM:()=>Ga,LSH:()=>Fl,kYT:()=>lr,YNc:()=>ug,W1O:()=>kw,_uU:()=>_t,Oqu:()=>Ut,hij:()=>cn});var w=G(9765),j=G(5319),ne=G(7574),Oe=G(6682),Te=G(2441);var ge=G(1307);function oe(){return new w.xQ}function te(r){for(let i in r)if(r[i]===te)return i;throw Error("Could not find renamed property on target object.")}function me(r,i){for(const s in i)i.hasOwnProperty(s)&&!r.hasOwnProperty(s)&&(r[s]=i[s])}function ve(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ve).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function be(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const Ue=te({__forward_ref__:te});function Se(r){return r.__forward_ref__=Se,r.toString=function(){return ve(this())},r}function Ae(r){return it(r)?r():r}function it(r){return"function"==typeof r&&r.hasOwnProperty(Ue)&&r.__forward_ref__===Se}class Je extends Error{constructor(i,s){super(function(r,i){return`${r?`NG0${r}: `:""}${i}`}(i,s)),this.code=i}}function ut(r){return"string"==typeof r?r:null==r?"":String(r)}function Gt(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():ut(r)}function Le(r,i){const s=i?` in ${i}`:"";throw new Je("201",`No provider for ${Gt(r)} found${s}`)}function wt(r,i){null==r&&function(r,i,s,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${s} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function un(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function yr(r){return{providers:r.providers||[],imports:r.imports||[]}}function Dn(r){return Tn(r,kt)||Tn(r,Ir)}function Tn(r,i){return r.hasOwnProperty(i)?r[i]:null}function Hn(r){return r&&(r.hasOwnProperty(An)||r.hasOwnProperty(Bt))?r[An]:null}const kt=te({\u0275prov:te}),An=te({\u0275inj:te}),Ir=te({ngInjectableDef:te}),Bt=te({ngInjectorDef:te});var tt=(()=>((tt=tt||{})[tt.Default=0]="Default",tt[tt.Host=1]="Host",tt[tt.Self=2]="Self",tt[tt.SkipSelf=4]="SkipSelf",tt[tt.Optional=8]="Optional",tt))();let bn;function Mn(r){const i=bn;return bn=r,i}function wn(r,i,s){const u=Dn(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:s&tt.Optional?null:void 0!==i?i:void Le(ve(r),"Injector")}function St(r){return{toString:r}.toString()}var Gn=(()=>((Gn=Gn||{})[Gn.OnPush=0]="OnPush",Gn[Gn.Default=1]="Default",Gn))(),Qn=(()=>((Qn=Qn||{})[Qn.Emulated=0]="Emulated",Qn[Qn.None=2]="None",Qn[Qn.ShadowDom=3]="ShadowDom",Qn))();const Or="undefined"!=typeof globalThis&&globalThis,Vt="undefined"!=typeof window&&window,de="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ue=Or||"undefined"!=typeof global&&global||Vt||de,Ct={},vt=[],nn=te({\u0275cmp:te}),Ln=te({\u0275dir:te}),Xt=te({\u0275pipe:te}),ur=te({\u0275mod:te}),fn=te({\u0275loc:te}),Qt=te({\u0275fac:te}),Vn=te({__NG_ELEMENT_ID__:te});let Ls=0;function vs(r){return St(()=>{const s={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Gn.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||vt,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Qn.Emulated,id:"c",styles:r.styles||vt,_:null,setInput:null,schemas:r.schemas||null,tView:null},c=r.directives,d=r.features,m=r.pipes;return u.id+=Ls++,u.inputs=cr(r.inputs,s),u.outputs=cr(r.outputs),d&&d.forEach(_=>_(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(ts):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(ns):null,u})}function ts(r){return Ot(r)||function(r){return r[Ln]||null}(r)}function ns(r){return function(r){return r[Xt]||null}(r)}const ws={};function Ei(r){return St(()=>{const i={type:r.type,bootstrap:r.bootstrap||vt,declarations:r.declarations||vt,imports:r.imports||vt,exports:r.exports||vt,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(ws[r.id]=r.type),i})}function lr(r,i){return St(()=>{const s=Kn(r,!0);s.declarations=i.declarations||vt,s.imports=i.imports||vt,s.exports=i.exports||vt})}function cr(r,i){if(null==r)return Ct;const s={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),s[c]=u,i&&(i[c]=d)}return s}const Bi=vs;function wi(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Ot(r){return r[nn]||null}function Kn(r,i){const s=r[ur]||null;if(!s&&!0===i)throw new Error(`Type ${ve(r)} does not have '\u0275mod' property.`);return s}function Pr(r){return Array.isArray(r)&&"object"==typeof r[1]}function on(r){return Array.isArray(r)&&!0===r[1]}function kr(r){return 0!=(8&r.flags)}function ki(r){return 2==(2&r.flags)}function hr(r){return 1==(1&r.flags)}function Fr(r){return null!==r.template}function In(r){return 0!=(512&r[2])}function bi(r,i){return r.hasOwnProperty(Qt)?r[Qt]:null}class zn{constructor(i,s,u){this.previousValue=i,this.currentValue=s,this.firstChange=u}isFirstChange(){return this.firstChange}}function us(){return so}function so(r){return r.type.prototype.ngOnChanges&&(r.setInput=oo),Sr}function Sr(){const r=oi(this),i=null==r?void 0:r.current;if(i){const s=r.previous;if(s===Ct)r.previous=i;else for(let u in i)s[u]=i[u];r.current=null,this.ngOnChanges(i)}}function oo(r,i,s,u){const c=oi(r)||function(r,i){return r[Ii]=i}(r,{previous:Ct,current:null}),d=c.current||(c.current={}),m=c.previous,_=this.declaredInputs[s],D=m[_];d[_]=new zn(D&&D.currentValue,i,m===Ct),r[u]=i}us.ngInherit=!0;const Ii="__ngSimpleChanges__";function oi(r){return r[Ii]||null}const Ar="http://www.w3.org/2000/svg";let z;function F(r){z=r}function ke(r){return!!r.listen}const P={createRenderer:(r,i)=>void 0!==z?z:"undefined"!=typeof document?document:void 0};function S(r){for(;Array.isArray(r);)r=r[0];return r}function nt(r,i){return S(i[r])}function Dt(r,i){return S(i[r.index])}function Lr(r,i){return r.data[i]}function Nn(r,i){const s=i[r];return Pr(s)?s:s[0]}function pi(r){return 4==(4&r[2])}function Is(r){return 128==(128&r[2])}function Vr(r,i){return null==i?null:r[i]}function ai(r){r[18]=0}function Mo(r,i){r[5]+=i;let s=r,u=r[3];for(;null!==u&&(1===i&&1===s[5]||-1===i&&0===s[5]);)u[5]+=i,s=u,u=u[3]}const qt={lFrame:za(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Oo(){return qt.bindingsEnabled}function Ze(){return qt.lFrame.lView}function vn(){return qt.lFrame.tView}function Ga(r){return qt.lFrame.contextLView=r,r[8]}function Zn(){let r=ea();for(;null!==r&&64===r.type;)r=r.parent;return r}function ea(){return qt.lFrame.currentTNode}function qi(r,i){const s=qt.lFrame;s.currentTNode=r,s.isParent=i}function wu(){return qt.lFrame.isParent}function ao(){return qt.isInCheckNoChangesMode}function ko(r){qt.isInCheckNoChangesMode=r}function $n(){return qt.lFrame.bindingIndex++}function Sl(r,i){const s=qt.lFrame;s.bindingIndex=s.bindingRootIndex=r,Fo(i)}function Fo(r){qt.lFrame.currentDirectiveIndex=r}function ds(){return qt.lFrame.currentQueryIndex}function vo(r){qt.lFrame.currentQueryIndex=r}function Cu(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function Ds(r,i,s){if(s&tt.SkipSelf){let c=i,d=r;for(;!(c=c.parent,null!==c||s&tt.Host||(c=Cu(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;i=c,r=d}const u=qt.lFrame=bu();return u.currentTNode=i,u.lView=r,!0}function Lo(r){const i=bu(),s=r[1];qt.lFrame=i,i.currentTNode=s.firstChild,i.lView=r,i.tView=s,i.contextLView=r,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function bu(){const r=qt.lFrame,i=null===r?null:r.child;return null===i?za(r):i}function za(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Br(){const r=qt.lFrame;return qt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const qa=Br;function wa(){const r=Br();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function fr(){return qt.lFrame.selectedIndex}function Ts(r){qt.lFrame.selectedIndex=r}function er(){const r=qt.lFrame;return Lr(r.tView,r.selectedIndex)}function Ss(){qt.lFrame.currentNamespace=Ar}function Za(){qt.lFrame.currentNamespace=null}function Vo(r,i){for(let s=i.directiveStart,u=i.directiveEnd;s<u;s++){const d=r.data[s].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:_,ngAfterViewInit:D,ngAfterViewChecked:N,ngOnDestroy:B}=d;m&&(r.contentHooks||(r.contentHooks=[])).push(-s,m),_&&((r.contentHooks||(r.contentHooks=[])).push(s,_),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(s,_)),D&&(r.viewHooks||(r.viewHooks=[])).push(-s,D),N&&((r.viewHooks||(r.viewHooks=[])).push(s,N),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(s,N)),null!=B&&(r.destroyHooks||(r.destroyHooks=[])).push(s,B)}}function As(r,i,s){co(r,i,3,s)}function ta(r,i,s,u){(3&r[2])===s&&co(r,i,s,u)}function lo(r,i){let s=r[2];(3&s)===i&&(s&=2047,s+=1,r[2]=s)}function co(r,i,s,u){const d=null!=u?u:-1,m=i.length-1;let _=0;for(let D=void 0!==u?65535&r[18]:0;D<m;D++)if("number"==typeof i[D+1]){if(_=i[D],null!=u&&_>=u)break}else i[D]<0&&(r[18]+=65536),(_<d||-1==d)&&(Xr(r,s,i,D),r[18]=(4294901760&r[18])+D+2),D++}function Xr(r,i,s,u){const c=s[u]<0,d=s[u+1],_=r[c?-s[u]:s[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{d.call(_)}finally{}}}else try{d.call(_)}finally{}}class Rs{constructor(i,s,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=u}}function tr(r,i,s){const u=ke(r);let c=0;for(;c<s.length;){const d=s[c];if("number"==typeof d){if(0!==d)break;c++;const m=s[c++],_=s[c++],D=s[c++];u?r.setAttribute(i,_,D,m):i.setAttributeNS(m,_,D)}else{const m=d,_=s[++c];Uo(m)?u&&r.setProperty(i,m,_):u?r.setAttribute(i,m,_):i.setAttribute(m,_),c++}}return c}function Du(r){return 3===r||4===r||6===r}function Uo(r){return 64===r.charCodeAt(0)}function na(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let s=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?s=c:0===s||Ku(r,s,c,null,-1===s||2===s?i[++u]:null)}}return r}function Ku(r,i,s,u,c){let d=0,m=r.length;if(-1===i)m=-1;else for(;d<r.length;){const _=r[d++];if("number"==typeof _){if(_===i){m=-1;break}if(_>i){m=d-1;break}}}for(;d<r.length;){const _=r[d];if("number"==typeof _)break;if(_===s){if(null===u)return void(null!==c&&(r[d+1]=c));if(u===r[d+1])return void(r[d+2]=c)}d++,null!==u&&d++,null!==c&&d++}-1!==m&&(r.splice(m,0,i),d=m+1),r.splice(d++,0,s),null!==u&&r.splice(d++,0,u),null!==c&&r.splice(d++,0,c)}function xs(r){return-1!==r}function Bo(r){return 32767&r}function Ns(r,i){let s=function(r){return r>>16}(r),u=i;for(;s>0;)u=u[15],s--;return u}let Ki=!0;function jo(r){const i=Ki;return Ki=r,i}let $o=0;function Rt(r,i){const s=Ws(r,i);if(-1!==s)return s;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,Ht(u.data,r),Ht(i,null),Ht(u.blueprint,null));const c=ft(r,i),d=r.injectorIndex;if(xs(c)){const m=Bo(c),_=Ns(c,i),D=_[1].data;for(let N=0;N<8;N++)i[d+N]=_[m+N]|D[m+N]}return i[d+8]=c,d}function Ht(r,i){r.push(0,0,0,0,0,0,0,0,i)}function Ws(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function ft(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let s=0,u=null,c=i;for(;null!==c;){const d=c[1],m=d.type;if(u=2===m?d.declTNode:1===m?c[6]:null,null===u)return-1;if(s++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|s<<16}return-1}function Be(r,i,s){!function(r,i,s){let u;"string"==typeof s?u=s.charCodeAt(0)||0:s.hasOwnProperty(Vn)&&(u=s[Vn]),null==u&&(u=s[Vn]=$o++);const c=255&u;i.data[r+(c>>5)]|=1<<c}(r,i,s)}function jr(r,i,s){if(s&tt.Optional)return r;Le(i,"NodeInjector")}function Ho(r,i,s,u){if(s&tt.Optional&&void 0===u&&(u=null),0==(s&(tt.Self|tt.Host))){const c=r[9],d=Mn(void 0);try{return c?c.get(i,u,s&tt.Optional):wn(i,u,s&tt.Optional)}finally{Mn(d)}}return jr(u,i,s)}function A(r,i,s,u=tt.Default,c){if(null!==r){const d=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Vn)?r[Vn]:void 0;return"number"==typeof i?i>=0?255&i:E:i}(s);if("function"==typeof d){if(!Ds(i,r,u))return u&tt.Host?jr(c,s,u):Ho(i,s,u,c);try{const m=d(u);if(null!=m||u&tt.Optional)return m;Le(s)}finally{qa()}}else if("number"==typeof d){let m=null,_=Ws(r,i),D=-1,N=u&tt.Host?i[16][6]:null;for((-1===_||u&tt.SkipSelf)&&(D=-1===_?ft(r,i):i[_+8],-1!==D&&Me(u,!1)?(m=i[1],_=Bo(D),i=Ns(D,i)):_=-1);-1!==_;){const B=i[1];if(pe(d,_,B.data)){const Z=O(_,i,s,m,u,N);if(Z!==C)return Z}D=i[_+8],-1!==D&&Me(u,i[1].data[_+8]===N)&&pe(d,_,i)?(m=B,_=Bo(D),i=Ns(D,i)):_=-1}}}return Ho(i,s,u,c)}const C={};function E(){return new pt(Zn(),Ze())}function O(r,i,s,u,c,d){const m=i[1],_=m.data[r+8],B=V(_,m,s,null==u?ki(_)&&Ki:u!=m&&0!=(3&_.type),c&tt.Host&&d===_);return null!==B?q(i,m,B,_):C}function V(r,i,s,u,c){const d=r.providerIndexes,m=i.data,_=1048575&d,D=r.directiveStart,B=d>>20,X=c?_+B:r.directiveEnd;for(let ae=u?_:_+B;ae<X;ae++){const _e=m[ae];if(ae<D&&s===_e||ae>=D&&_e.type===s)return ae}if(c){const ae=m[D];if(ae&&Fr(ae)&&ae.type===s)return D}return null}function q(r,i,s,u){let c=r[s];const d=i.data;if(function(r){return r instanceof Rs}(c)){const m=c;m.resolving&&function(r,i){throw new Je("200",`Circular dependency in DI detected for ${r}`)}(Gt(d[s]));const _=jo(m.canSeeViewProviders);m.resolving=!0;const D=m.injectImpl?Mn(m.injectImpl):null;Ds(r,u,tt.Default);try{c=r[s]=m.factory(void 0,d,r,u),i.firstCreatePass&&s>=u.directiveStart&&function(r,i,s){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:d}=i.type.prototype;if(u){const m=so(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(r,m),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(r,m)}c&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-r,c),d&&((s.preOrderHooks||(s.preOrderHooks=[])).push(r,d),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(r,d))}(s,d[s],i)}finally{null!==D&&Mn(D),jo(_),m.resolving=!1,qa()}}return c}function pe(r,i,s){return!!(s[i+(r>>5)]&1<<r)}function Me(r,i){return!(r&tt.Self||r&tt.Host&&i)}class pt{constructor(i,s){this._tNode=i,this._lView=s}get(i,s){return A(this._tNode,this._lView,i,void 0,s)}}function Cn(r){return St(()=>{const i=r.prototype.constructor,s=i[Qt]||It(i),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const d=c[Qt]||It(c);if(d&&d!==s)return d;c=Object.getPrototypeOf(c)}return d=>new d})}function It(r){return it(r)?()=>{const i=It(Ae(r));return i&&i()}:bi(r)}function Tt(r){return function(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const s=r.attrs;if(s){const u=s.length;let c=0;for(;c<u;){const d=s[c];if(Du(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<u&&"string"==typeof s[c];)c++;else{if(d===i)return s[c+1];c+=2}}}return null}(Zn(),r)}const ti="__parameters__";function Ai(r,i,s){return St(()=>{const u=function(r){return function(...s){if(r){const u=r(...s);for(const c in u)this[c]=u[c]}}}(i);function c(...d){if(this instanceof c)return u.apply(this,d),this;const m=new c(...d);return _.annotation=m,_;function _(D,N,B){const Z=D.hasOwnProperty(ti)?D[ti]:Object.defineProperty(D,ti,{value:[]})[ti];for(;Z.length<=B;)Z.push(null);return(Z[B]=Z[B]||[]).push(m),D}}return s&&(c.prototype=Object.create(s.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class ${constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=un({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Q=new $("AnalyzeForEntryComponents"),Ms=Function;function li(r,i){void 0===i&&(i=r);for(let s=0;s<r.length;s++){let u=r[s];Array.isArray(u)?(i===r&&(i=r.slice(0,s)),li(u,i)):i!==r&&i.push(u)}return i}function Zi(r,i){r.forEach(s=>Array.isArray(s)?Zi(s,i):i(s))}function Wo(r,i,s){i>=r.length?r.push(s):r.splice(i,0,s)}function ps(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function Os(r,i,s){let u=zo(r,i);return u>=0?r[1|u]=s:(u=~u,function(r,i,s,u){let c=r.length;if(c==i)r.push(s,u);else if(1===c)r.push(u,r[0]),r[0]=s;else{for(c--,r.push(r[c-1],r[c]);c>i;)r[c]=r[c-2],c--;r[i]=s,r[i+1]=u}}(r,u,i,s)),u}function tu(r,i){const s=zo(r,i);if(s>=0)return r[1|s]}function zo(r,i){return function(r,i,s){let u=0,c=r.length>>s;for(;c!==u;){const d=u+(c-u>>1),m=r[d<<s];if(i===m)return d<<s;m>i?c=d:u=d+1}return~(c<<s)}(r,i,1)}const ia={},nu="__NG_DI_FLAG__",ru="ngTempTokenPath",fc=/\n/gm,Yu="__source",Tu=te({provide:String,useValue:te});let ba;function Ia(r){const i=ba;return ba=r,i}function Xc(r,i=tt.Default){if(void 0===ba)throw new Error("inject() must be called from an injection context");return null===ba?wn(r,void 0,i):ba.get(r,i&tt.Optional?null:void 0,i)}function $r(r,i=tt.Default){return(bn||Xc)(Ae(r),i)}function iu(r){const i=[];for(let s=0;s<r.length;s++){const u=Ae(r[s]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let c,d=tt.Default;for(let m=0;m<u.length;m++){const _=u[m],D=pc(_);"number"==typeof D?-1===D?c=_.token:d|=D:c=_}i.push($r(c,d))}else i.push($r(u))}return i}function Ta(r,i){return r[nu]=i,r.prototype[nu]=i,r}function pc(r){return r[nu]}function gc(r,i,s,u){const c=r[ru];throw i[Yu]&&c.unshift(i[Yu]),r.message=function(r,i,s,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let c=ve(i);if(Array.isArray(i))c=i.map(ve).join(" -> ");else if("object"==typeof i){let d=[];for(let m in i)if(i.hasOwnProperty(m)){let _=i[m];d.push(m+":"+("string"==typeof _?JSON.stringify(_):ve(_)))}c=`{${d.join(", ")}}`}return`${s}${u?"("+u+")":""}[${c}]: ${r.replace(fc,"\n  ")}`}("\n"+r.message,c,s,u),r.ngTokenPath=c,r[ru]=null,r}const Ju=Ta(Ai("Inject",r=>({token:r})),-1),po=Ta(Ai("Optional"),8),Sa=Ta(Ai("SkipSelf"),4);let Aa;function oa(r){var i;return(null===(i=function(){if(void 0===Aa&&(Aa=null,ue.trustedTypes))try{Aa=ue.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return Aa}())||void 0===i?void 0:i.createHTML(r))||r}class Ko{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ad extends Ko{getTypeName(){return"HTML"}}class sm extends Ko{getTypeName(){return"Style"}}class gr extends Ko{getTypeName(){return"Script"}}class kn extends Ko{getTypeName(){return"URL"}}class hh extends Ko{getTypeName(){return"ResourceURL"}}function Io(r){return r instanceof Ko?r.changingThisBreaksApplicationSecurity:r}function Nr(r,i){const s=Ru(r);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===i}function Ru(r){return r instanceof Ko&&r.getTypeName()||null}function Yi(r){return new ad(r)}function ii(r){return new sm(r)}function vc(r){return new gr(r)}function Gf(r){return new kn(r)}function Do(r){return new hh(r)}class ud{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const s=(new window.DOMParser).parseFromString(oa(i),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(i):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class Wf{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const u=this.inertDocument.createElement("body");s.appendChild(u)}}getInertBodyElement(i){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=oa(i),s;const u=this.inertDocument.createElement("body");return u.innerHTML=oa(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const s=i.attributes;for(let c=s.length-1;0<c;c--){const m=s.item(c).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&i.removeAttribute(m)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const zf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ph=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function la(r){return(r=String(r)).match(zf)||r.match(ph)?r:"unsafe:"+r}function qs(r){const i={};for(const s of r.split(","))i[s]=!0;return i}function ca(...r){const i={};for(const s of r)for(const u in s)s.hasOwnProperty(u)&&(i[u]=!0);return i}const Pl=qs("area,br,col,hr,img,wbr"),ld=qs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cd=qs("rp,rt"),hd=ca(Pl,ca(ld,qs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ca(cd,qs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ca(cd,ld)),wc=qs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fd=qs("srcset"),gh=ca(wc,fd,qs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ci=qs("script,style,template");class pd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let s=i.firstChild,u=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?u=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,u&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let c=this.checkClobberedElement(s,s.nextSibling);if(c){s=c;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(i){const s=i.nodeName.toLowerCase();if(!hd.hasOwnProperty(s))return this.sanitizedSomething=!0,!ci.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const u=i.attributes;for(let c=0;c<u.length;c++){const d=u.item(c),m=d.name,_=m.toLowerCase();if(!gh.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let D=d.value;wc[_]&&(D=la(D)),fd[_]&&(r=D,D=(r=String(r)).split(",").map(i=>la(i.trim())).join(", ")),this.buf.push(" ",m,'="',Zo(D),'"')}var r;return this.buf.push(">"),!0}endElement(i){const s=i.nodeName.toLowerCase();hd.hasOwnProperty(s)&&!Pl.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(i){this.buf.push(Zo(i))}checkClobberedElement(i,s){if(s&&(i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return s}}const gd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kl=/([^\#-~ |!])/g;function Zo(r){return r.replace(/&/g,"&amp;").replace(gd,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(kl,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rl;function md(r,i){let s=null;try{rl=rl||function(r){const i=new Wf(r);return function(){try{return!!(new window.DOMParser).parseFromString(oa(""),"text/html")}catch(r){return!1}}()?new ud(i):i}(r);let u=i?String(i):"";s=rl.getInertBodyElement(u);let c=5,d=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=d,d=s.innerHTML,s=rl.getInertBodyElement(u)}while(u!==d);return oa((new pd).sanitizeChildren(su(s)||s))}finally{if(s){const u=su(s)||s;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function su(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Cr=(()=>((Cr=Cr||{})[Cr.NONE=0]="NONE",Cr[Cr.HTML=1]="HTML",Cr[Cr.STYLE=2]="STYLE",Cr[Cr.SCRIPT=3]="SCRIPT",Cr[Cr.URL=4]="URL",Cr[Cr.RESOURCE_URL=5]="RESOURCE_URL",Cr))();function Fl(r){const i=function(){const r=Ze();return r&&r[12]}();return i?i.sanitize(Cr.URL,r)||"":Nr(r,"URL")?Io(r):la(ut(r))}const xu="__ngContext__";function di(r,i){r[xu]=i}function gs(r){const i=function(r){return r[xu]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function U(r){return r.ngOriginalError}function Ee(r,...i){r.error(...i)}class $e{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i),u=this._findContext(i),c=(r=i)&&r.ngErrorLogger||Ee;var r;c(this._console,"ERROR",i),s&&c(this._console,"ORIGINAL ERROR",s),u&&c(this._console,"ERROR CONTEXT",u)}_findContext(i){return i?i.ngDebugContext||this._findContext(U(i)):null}_findOriginalError(i){let s=i&&U(i);for(;s&&U(s);)s=U(s);return s||null}}const Na=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ue))();function Ks(r){return r instanceof Function?r():r}var Ma=(()=>((Ma=Ma||{})[Ma.Important=1]="Important",Ma[Ma.DashCase=2]="DashCase",Ma))();function Ch(r,i){return undefined(r,i)}function au(r){const i=r[3];return on(i)?i[3]:i}function Dd(r){return ep(r[13])}function Xf(r){return ep(r[4])}function ep(r){for(;null!==r&&!on(r);)r=r[4];return r}function xc(r,i,s,u,c){if(null!=u){let d,m=!1;on(u)?d=u:Pr(u)&&(m=!0,u=u[0]);const _=S(u);0===r&&null!==s?null==c?rp(i,s,_):Ou(i,s,_,c||null,!0):1===r&&null!==s?Ou(i,s,_,c||null,!0):2===r?function(r,i,s){const u=Th(r,i);u&&function(r,i,s,u){ke(r)?r.removeChild(i,s,u):i.removeChild(s)}(r,u,i,s)}(i,_,m):3===r&&i.destroyNode(_),null!=d&&function(r,i,s,u,c){const d=s[7];d!==S(s)&&xc(i,r,u,d,c);for(let _=10;_<s.length;_++){const D=s[_];$l(D[1],D,r,i,u,d)}}(i,r,d,s,c)}}function bh(r,i,s){return ke(r)?r.createElement(i,s):null===s?r.createElement(i):r.createElementNS(s,i)}function Bl(r,i){const s=r[9],u=s.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,Mo(c,-1)),s.splice(u,1)}function Dh(r,i){if(r.length<=10)return;const s=10+i,u=r[s];if(u){const c=u[17];null!==c&&c!==r&&Bl(c,u),i>0&&(r[s-1][4]=u[4]);const d=ps(r,10+i);!function(r,i){$l(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const m=d[19];null!==m&&m.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function ll(r,i){if(!(256&i[2])){const s=i[11];ke(s)&&s.destroyNode&&$l(r,i,s,3,null,null),function(r){let i=r[13];if(!i)return np(r[1],r);for(;i;){let s=null;if(Pr(i))s=i[13];else{const u=i[10];u&&(s=u)}if(!s){for(;i&&!i[4]&&i!==r;)Pr(i)&&np(i[1],i),i=i[3];null===i&&(i=r),Pr(i)&&np(i[1],i),s=i&&i[4]}i=s}}(i)}}function np(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(r,i){let s;if(null!=r&&null!=(s=r.destroyHooks))for(let u=0;u<s.length;u+=2){const c=i[s[u]];if(!(c instanceof Rs)){const d=s[u+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const _=c[d[m]],D=d[m+1];try{D.call(_)}finally{}}else try{d.call(c)}finally{}}}}(r,i),function(r,i){const s=r.cleanup,u=i[7];let c=-1;if(null!==s)for(let d=0;d<s.length-1;d+=2)if("string"==typeof s[d]){const m=s[d+1],_="function"==typeof m?m(i):S(i[m]),D=u[c=s[d+2]],N=s[d+3];"boolean"==typeof N?_.removeEventListener(s[d],D,N):N>=0?u[c=N]():u[c=-N].unsubscribe(),d+=2}else{const m=u[c=s[d+1]];s[d].call(m)}if(null!==u){for(let d=c+1;d<u.length;d++)u[d]();i[7]=null}}(r,i),1===i[1].type&&ke(i[11])&&i[11].destroy();const s=i[17];if(null!==s&&on(i[3])){s!==i[3]&&Bl(s,i);const u=i[19];null!==u&&u.detachView(r)}}}function Mu(r,i,s){return function(r,i,s){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return s[0];if(2&u.flags){const c=r.data[u.directiveStart].encapsulation;if(c===Qn.None||c===Qn.Emulated)return null}return Dt(u,s)}(r,i.parent,s)}function Ou(r,i,s,u,c){ke(r)?r.insertBefore(i,s,u,c):i.insertBefore(s,u,c)}function rp(r,i,s){ke(r)?r.appendChild(i,s):i.appendChild(s)}function fm(r,i,s,u,c){null!==u?Ou(r,i,s,u,c):rp(r,i,s)}function Th(r,i){return ke(r)?r.parentNode(i):i.parentNode}let ip=function(r,i,s){return 40&r.type?Dt(r,s):null};function Ad(r,i,s,u){const c=Mu(r,u,i),d=i[11],_=function(r,i,s){return ip(r,i,s)}(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(s))for(let D=0;D<s.length;D++)fm(d,c,s[D],_,!1);else fm(d,c,s,_,!1)}function Oa(r,i){if(null!==i){const s=i.type;if(3&s)return Dt(i,r);if(4&s)return op(-1,r[i.index]);if(8&s){const u=i.child;if(null!==u)return Oa(r,u);{const c=r[i.index];return on(c)?op(-1,c):S(c)}}if(32&s)return Ch(i,r)()||S(r[i.index]);{const u=Rd(r,i);return null!==u?Array.isArray(u)?u[0]:Oa(au(r[16]),u):Oa(r,i.next)}}return null}function Rd(r,i){return null!==i?r[16][6].projection[i.projection]:null}function op(r,i){const s=10+r+1;if(s<i.length){const u=i[s],c=u[1].firstChild;if(null!==c)return Oa(u,c)}return i[7]}function xd(r,i,s,u,c,d,m){for(;null!=s;){const _=u[s.index],D=s.type;if(m&&0===i&&(_&&di(S(_),u),s.flags|=4),64!=(64&s.flags))if(8&D)xd(r,i,s.child,u,c,d,!1),xc(i,r,c,_,d);else if(32&D){const N=Ch(s,u);let B;for(;B=N();)xc(i,r,c,B,d);xc(i,r,c,_,d)}else 16&D?Md(r,i,u,s,c,d):xc(i,r,c,_,d);s=m?s.projectionNext:s.next}}function $l(r,i,s,u,c,d){xd(s,u,r.firstChild,i,c,d,!1)}function Md(r,i,s,u,c,d){const m=s[16],D=m[6].projection[u.projection];if(Array.isArray(D))for(let N=0;N<D.length;N++)xc(i,r,c,D[N],d);else xd(r,i,D,m[3],c,d,!0)}function lp(r,i,s){ke(r)?r.setAttribute(i,"style",s):i.style.cssText=s}function Od(r,i,s){ke(r)?""===s?r.removeAttribute(i,"class"):r.setAttribute(i,"class",s):i.className=s}function cp(r,i,s){let u=r.length;for(;;){const c=r.indexOf(i,s);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const d=i.length;if(c+d===u||r.charCodeAt(c+d)<=32)return c}s=c+1}}const dp="ng-template";function gm(r,i,s){let u=0;for(;u<r.length;){let c=r[u++];if(s&&"class"===c){if(c=r[u],-1!==cp(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function Sh(r){return 4===r.type&&r.value!==dp}function __(r,i,s){return i===(4!==r.type||s?r.value:dp)}function mm(r,i,s){let u=4;const c=r.attrs||[],d=function(r){for(let i=0;i<r.length;i++)if(Du(r[i]))return i;return r.length}(c);let m=!1;for(let _=0;_<i.length;_++){const D=i[_];if("number"!=typeof D){if(!m)if(4&u){if(u=2|1&u,""!==D&&!__(r,D,s)||""===D&&1===i.length){if(Pa(u))return!1;m=!0}}else{const N=8&u?D:i[++_];if(8&u&&null!==r.attrs){if(!gm(r.attrs,N,s)){if(Pa(u))return!1;m=!0}continue}const Z=ym(8&u?"class":D,c,Sh(r),s);if(-1===Z){if(Pa(u))return!1;m=!0;continue}if(""!==N){let X;X=Z>d?"":c[Z+1].toLowerCase();const ae=8&u?X:null;if(ae&&-1!==cp(ae,N,0)||2&u&&N!==X){if(Pa(u))return!1;m=!0}}}}else{if(!m&&!Pa(u)&&!Pa(D))return!1;if(m&&Pa(D))continue;m=!1,u=D|1&u}}return Pa(u)||m}function Pa(r){return 0==(1&r)}function ym(r,i,s,u){if(null===i)return-1;let c=0;if(u||!s){let d=!1;for(;c<i.length;){const m=i[c];if(m===r)return c;if(3===m||6===m)d=!0;else{if(1===m||2===m){let _=i[++c];for(;"string"==typeof _;)_=i[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=d?1:2}return-1}return function(r,i){let s=r.indexOf(4);if(s>-1)for(s++;s<r.length;){const u=r[s];if("number"==typeof u)return-1;if(u===i)return s;s++}return-1}(i,r)}function _m(r,i,s=!1){for(let u=0;u<i.length;u++)if(mm(r,i[u],s))return!0;return!1}function fp(r,i){return r?":not("+i.trim()+")":i}function vm(r){let i=r[0],s=1,u=2,c="",d=!1;for(;s<r.length;){let m=r[s];if("string"==typeof m)if(2&u){const _=r[++s];c+="["+m+(_.length>0?'="'+_+'"':"")+"]"}else 8&u?c+="."+m:4&u&&(c+=" "+m);else""!==c&&!Pa(m)&&(i+=fp(d,c),c=""),u=m,d=d||!Pa(u);s++}return""!==c&&(i+=fp(d,c)),i}const ln={};function Rh(r){Em(vn(),Ze(),fr()+r,ao())}function Em(r,i,s,u){if(!u)if(3==(3&i[2])){const d=r.preOrderCheckHooks;null!==d&&As(i,d,s)}else{const d=r.preOrderHooks;null!==d&&ta(i,d,0,s)}Ts(s)}function Pc(r,i){return r<<17|i<<2}function ka(r){return r>>17&32767}function gp(r){return 2|r}function Pu(r){return(131068&r)>>2}function mp(r,i){return-131069&r|i<<2}function yp(r){return 1|r}function Lh(r,i){const s=r.contentQueries;if(null!==s)for(let u=0;u<s.length;u+=2){const c=s[u],d=s[u+1];if(-1!==d){const m=r.data[d];vo(c),m.contentQueries(2,i[d],d)}}}function hl(r,i,s,u,c,d,m,_,D,N){const B=i.blueprint.slice();return B[0]=c,B[2]=140|u,ai(B),B[3]=B[15]=r,B[8]=s,B[10]=m||r&&r[10],B[11]=_||r&&r[11],B[12]=D||r&&r[12]||null,B[9]=N||r&&r[9]||null,B[6]=d,B[16]=2==i.type?r[16]:B,B}function fl(r,i,s,u,c){let d=r.data[i];if(null===d)d=function(r,i,s,u,c){const d=ea(),m=wu(),D=r.data[i]=function(r,i,s,u,c,d){return{type:s,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,s,i,u,c);return null===r.firstChild&&(r.firstChild=D),null!==d&&(m?null==d.child&&null!==D.parent&&(d.child=D):null===d.next&&(d.next=D)),D}(r,i,s,u,c),qt.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=s,d.value=u,d.attrs=c;const m=function(){const r=qt.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return qi(d,!0),d}function Fa(r,i,s,u){if(0===s)return-1;const c=i.length;for(let d=0;d<s;d++)i.push(u),r.blueprint.push(u),r.data.push(null);return c}function zl(r,i,s){Lo(i);try{const u=r.viewQuery;null!==u&&Hp(1,u,s);const c=r.template;null!==c&&Tp(r,i,c,1,s),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Lh(r,i),r.staticViewQueries&&Hp(2,r.viewQuery,s);const d=r.components;null!==d&&function(r,i){for(let s=0;s<i.length;s++)Bp(r,i[s])}(i,d)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,wa()}}function Fc(r,i,s,u){const c=i[2];if(256==(256&c))return;Lo(i);const d=ao();try{ai(i),function(r){qt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==s&&Tp(r,i,s,2,u);const m=3==(3&c);if(!d)if(m){const N=r.preOrderCheckHooks;null!==N&&As(i,N,null)}else{const N=r.preOrderHooks;null!==N&&ta(i,N,0,null),lo(i,0)}if(function(r){for(let i=Dd(r);null!==i;i=Xf(i)){if(!i[2])continue;const s=i[9];for(let u=0;u<s.length;u++){const c=s[u],d=c[3];0==(1024&c[2])&&Mo(d,1),c[2]|=1024}}}(i),function(r){for(let i=Dd(r);null!==i;i=Xf(i))for(let s=10;s<i.length;s++){const u=i[s],c=u[1];Is(u)&&Fc(c,u,c.template,u[8])}}(i),null!==r.contentQueries&&Lh(r,i),!d)if(m){const N=r.contentCheckHooks;null!==N&&As(i,N)}else{const N=r.contentHooks;null!==N&&ta(i,N,1),lo(i,1)}!function(r,i){const s=r.hostBindingOpCodes;if(null!==s)try{for(let u=0;u<s.length;u++){const c=s[u];if(c<0)Ts(~c);else{const d=c,m=s[++u],_=s[++u];Sl(m,d),_(2,i[d])}}}finally{Ts(-1)}}(r,i);const _=r.components;null!==_&&function(r,i){for(let s=0;s<i.length;s++)Vp(r,i[s])}(i,_);const D=r.viewQuery;if(null!==D&&Hp(2,D,u),!d)if(m){const N=r.viewCheckHooks;null!==N&&As(i,N)}else{const N=r.viewHooks;null!==N&&ta(i,N,2),lo(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),d||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,Mo(i[3],-1))}finally{wa()}}function T_(r,i,s,u){const c=i[10],d=!ao(),m=pi(i);try{d&&!m&&c.begin&&c.begin(),m&&zl(r,i,u),Fc(r,i,s,u)}finally{d&&!m&&c.end&&c.end()}}function Tp(r,i,s,u,c){const d=fr(),m=2&u;try{Ts(-1),m&&i.length>20&&Em(r,i,20,ao()),s(u,c)}finally{Ts(d)}}function Ap(r,i,s){!Oo()||(function(r,i,s,u){const c=s.directiveStart,d=s.directiveEnd;r.firstCreatePass||Rt(s,i),di(u,i);const m=s.initialInputs;for(let _=c;_<d;_++){const D=r.data[_],N=Fr(D);N&&Mm(i,s,D);const B=q(i,r,_,s);di(B,i),null!==m&&M_(0,_-c,B,D,0,m),N&&(Nn(s.index,i)[8]=B)}}(r,i,s,Dt(s,i)),128==(128&s.flags)&&function(r,i,s){const u=s.directiveStart,c=s.directiveEnd,m=s.index,_=qt.lFrame.currentDirectiveIndex;try{Ts(m);for(let D=u;D<c;D++){const N=r.data[D],B=i[D];Fo(D),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&Hh(N,B)}}finally{Ts(-1),Fo(_)}}(r,i,s))}function Fd(r,i,s=Dt){const u=i.localNames;if(null!==u){let c=i.index+1;for(let d=0;d<u.length;d+=2){const m=u[d+1],_=-1===m?s(i,r):r[m];r[c++]=_}}}function Sm(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=Lc(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function Lc(r,i,s,u,c,d,m,_,D,N){const B=20+u,Z=B+c,X=function(r,i){const s=[];for(let u=0;u<i;u++)s.push(u<r?null:ln);return s}(B,Z),ae="function"==typeof N?N():N;return X[1]={type:r,blueprint:X,template:s,queries:null,viewQuery:_,declTNode:i,data:X.slice().fill(null,B),bindingStartIndex:B,expandoStartIndex:Z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:D,consts:ae,incompleteFirstPass:!1}}function jh(r,i,s,u){const c=qh(i);null===s?c.push(u):(c.push(s),r.firstCreatePass&&Kl(r).push(u,c.length-1))}function ql(r,i,s){for(let u in r)if(r.hasOwnProperty(u)){const c=r[u];(s=null===s?{}:s).hasOwnProperty(u)?s[u].push(i,c):s[u]=[i,c]}return s}function ys(r,i,s,u,c,d,m,_){const D=Dt(i,s);let B,N=i.inputs;!_&&null!=N&&(B=N[u])?(Fm(r,s,B,u,c),ki(i)&&function(r,i){const s=Nn(i,r);16&s[2]||(s[2]|=64)}(s,i.index)):3&i.type&&(u=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=m?m(c,i.value||"",u):c,ke(d)?d.setProperty(D,u,c):Uo(u)||(D.setProperty?D.setProperty(u,c):D[u]=c))}function Vd(r,i,s,u){let c=!1;if(Oo()){const d=function(r,i,s){const u=r.directiveRegistry;let c=null;if(u)for(let d=0;d<u.length;d++){const m=u[d];_m(s,m.selectors,!1)&&(c||(c=[]),Be(Rt(s,i),r,m.type),Fr(m)?(Op(r,s),c.unshift(m)):c.push(m))}return c}(r,i,s),m=null===u?null:{"":-1};if(null!==d){c=!0,Pp(s,r.data.length,d.length);for(let B=0;B<d.length;B++){const Z=d[B];Z.providersResolver&&Z.providersResolver(Z)}let _=!1,D=!1,N=Fa(r,i,d.length,null);for(let B=0;B<d.length;B++){const Z=d[B];s.mergedAttrs=na(s.mergedAttrs,Z.hostAttrs),kp(r,s,i,N,Z),Nm(N,Z,m),null!==Z.contentQueries&&(s.flags|=8),(null!==Z.hostBindings||null!==Z.hostAttrs||0!==Z.hostVars)&&(s.flags|=128);const X=Z.type.prototype;!_&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(s.index),_=!0),!D&&(X.ngOnChanges||X.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(s.index),D=!0),N++}!function(r,i){const u=i.directiveEnd,c=r.data,d=i.attrs,m=[];let _=null,D=null;for(let N=i.directiveStart;N<u;N++){const B=c[N],Z=B.inputs,X=null===d||Sh(i)?null:O_(Z,d);m.push(X),_=ql(Z,N,_),D=ql(B.outputs,N,D)}null!==_&&(_.hasOwnProperty("class")&&(i.flags|=16),_.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=m,i.inputs=_,i.outputs=D}(r,s)}m&&function(r,i,s){if(i){const u=r.localNames=[];for(let c=0;c<i.length;c+=2){const d=s[i[c+1]];if(null==d)throw new Je("301",`Export of name '${i[c+1]}' not found!`);u.push(i[c],d)}}}(s,u,m)}return s.mergedAttrs=na(s.mergedAttrs,s.attrs),c}function $h(r,i,s,u,c,d){const m=d.hostBindings;if(m){let _=r.hostBindingOpCodes;null===_&&(_=r.hostBindingOpCodes=[]);const D=~i.index;(function(r){let i=r.length;for(;i>0;){const s=r[--i];if("number"==typeof s&&s<0)return s}return 0})(_)!=D&&_.push(D),_.push(u,c,m)}}function Hh(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function Op(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function Nm(r,i,s){if(s){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)s[i.exportAs[u]]=r;Fr(i)&&(s[""]=r)}}function Pp(r,i,s){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+s,r.providerIndexes=i}function kp(r,i,s,u,c){r.data[u]=c;const d=c.factory||(c.factory=bi(c.type)),m=new Rs(d,Fr(c),null);r.blueprint[u]=m,s[u]=m,$h(r,i,0,u,Fa(r,s,c.hostVars,ln),c)}function Mm(r,i,s){const u=Dt(i,r),c=Sm(s),d=r[10],m=Uc(r,hl(r,c,null,s.onPush?64:16,u,i,d,d.createRenderer(u,s),null,null));r[i.index]=m}function du(r,i,s,u,c,d){const m=Dt(r,i);!function(r,i,s,u,c,d,m){if(null==d)ke(r)?r.removeAttribute(i,c,s):i.removeAttribute(c);else{const _=null==m?ut(d):m(d,u||"",c);ke(r)?r.setAttribute(i,c,_,s):s?i.setAttributeNS(s,c,_):i.setAttribute(c,_)}}(i[11],m,d,r.value,s,u,c)}function M_(r,i,s,u,c,d){const m=d[i];if(null!==m){const _=u.setInput;for(let D=0;D<m.length;){const N=m[D++],B=m[D++],Z=m[D++];null!==_?u.setInput(s,Z,N,B):s[B]=Z}}}function O_(r,i){let s=null,u=0;for(;u<i.length;){const c=i[u];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===s&&(s=[]),s.push(c,r[c],i[u+1])),u+=2}else u+=2;else u+=4}return s}function Gh(r,i,s,u){return new Array(r,!0,!1,i,null,0,u,s,null,null)}function Vp(r,i){const s=Nn(i,r);if(Is(s)){const u=s[1];80&s[2]?Fc(u,s,u.template,s[8]):s[5]>0&&Up(s)}}function Up(r){for(let u=Dd(r);null!==u;u=Xf(u))for(let c=10;c<u.length;c++){const d=u[c];if(1024&d[2]){const m=d[1];Fc(m,d,m.template,d[8])}else d[5]>0&&Up(d)}const s=r[1].components;if(null!==s)for(let u=0;u<s.length;u++){const c=Nn(s[u],r);Is(c)&&c[5]>0&&Up(c)}}function Bp(r,i){const s=Nn(i,r),u=s[1];(function(r,i){for(let s=i.length;s<r.blueprint.length;s++)i.push(r.blueprint[s])})(u,s),zl(u,s,s[8])}function Uc(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function Wh(r){for(;r;){r[2]|=64;const i=au(r);if(In(r)&&!i)return r;r=i}return null}function jp(r,i,s){const u=i[10];u.begin&&u.begin();try{Fc(r,i,r.template,s)}catch(c){throw Kh(i,c),c}finally{u.end&&u.end()}}function zh(r){!function(r){for(let i=0;i<r.components.length;i++){const s=r.components[i],u=gs(s),c=u[1];T_(c,u,c.template,s)}}(r[8])}function Hp(r,i,s){vo(0),i(r,s)}const Gp=(()=>Promise.resolve(null))();function qh(r){return r[7]||(r[7]=[])}function Kl(r){return r.cleanup||(r.cleanup=[])}function Kh(r,i){const s=r[9],u=s?s.get($e,null):null;u&&u.handleError(i)}function Fm(r,i,s,u,c){for(let d=0;d<s.length;){const m=s[d++],_=s[d++],D=i[m],N=r.data[m];null!==N.setInput?N.setInput(D,c,u,_):D[_]=c}}function La(r,i,s){const u=nt(i,r);!function(r,i,s){ke(r)?r.setValue(i,s):i.textContent=s}(r[11],u,s)}function ha(r,i,s){let u=s?r.styles:null,c=s?r.classes:null,d=0;if(null!==i)for(let m=0;m<i.length;m++){const _=i[m];"number"==typeof _?d=_:1==d?c=be(c,_):2==d&&(u=be(u,_+": "+i[++m]+";"))}s?r.styles=u:r.stylesWithoutHost=u,s?r.classes=c:r.classesWithoutHost=c}const Bc=new $("INJECTOR",-1);class Vm{get(i,s=ia){if(s===ia){const u=new Error(`NullInjectorError: No provider for ${ve(i)}!`);throw u.name="NullInjectorError",u}return s}}const Zl=new $("Set Injector scope."),Bd={},qp={};let Kp;function Zh(){return void 0===Kp&&(Kp=new Vm),Kp}function Yh(r,i=null,s=null,u){return new Um(r,s,i||Zh(),u)}class Um{constructor(i,s,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];s&&Zi(s,_=>this.processProvider(_,i,s)),Zi([i],_=>this.processInjectorType(_,[],d)),this.records.set(Bc,gl(void 0,this));const m=this.records.get(Zl);this.scope=null!=m?m.value:null,this.source=c||("object"==typeof i?null:ve(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,s=ia,u=tt.Default){this.assertNotDestroyed();const c=Ia(this),d=Mn(void 0);try{if(!(u&tt.SkipSelf)){let _=this.records.get(i);if(void 0===_){const D=("function"==typeof(r=i)||"object"==typeof r&&r instanceof $)&&Dn(i);_=D&&this.injectableDefInScope(D)?gl(jd(i),Bd):null,this.records.set(i,_)}if(null!=_)return this.hydrate(i,_)}return(u&tt.Self?Zh():this.parent).get(i,s=u&tt.Optional&&s===ia?null:s)}catch(m){if("NullInjectorError"===m.name){if((m[ru]=m[ru]||[]).unshift(ve(i)),c)throw m;return gc(m,i,"R3InjectorError",this.source)}throw m}finally{Mn(d),Ia(c)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,c)=>i.push(ve(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,s,u){if(!(i=Ae(i)))return!1;let c=Hn(i);const d=null==c&&i.ngModule||void 0,m=void 0===d?i:d,_=-1!==u.indexOf(m);if(void 0!==d&&(c=Hn(d)),null==c)return!1;if(null!=c.imports&&!_){let B;u.push(m);try{Zi(c.imports,Z=>{this.processInjectorType(Z,s,u)&&(void 0===B&&(B=[]),B.push(Z))})}finally{}if(void 0!==B)for(let Z=0;Z<B.length;Z++){const{ngModule:X,providers:ae}=B[Z];Zi(ae,_e=>this.processProvider(_e,X,ae||vt))}}this.injectorDefTypes.add(m);const D=bi(m)||(()=>new m);this.records.set(m,gl(D,Bd));const N=c.providers;if(null!=N&&!_){const B=i;Zi(N,Z=>this.processProvider(Z,B,N))}return void 0!==d&&void 0!==i.providers}processProvider(i,s,u){let c=ml(i=Ae(i))?i:Ae(i&&i.provide);const d=$m(r=i)?gl(void 0,r.useValue):gl(jm(r),Bd);var r;if(ml(i)||!0!==i.multi)this.records.get(c);else{let m=this.records.get(c);m||(m=gl(void 0,Bd,!0),m.factory=()=>iu(m.multi),this.records.set(c,m)),c=i,m.multi.push(i)}this.records.set(c,d)}hydrate(i,s){return s.value===Bd&&(s.value=qp,s.value=s.factory()),"object"==typeof s.value&&s.value&&null!==(r=s.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(s.value),s.value;var r}injectableDefInScope(i){if(!i.providedIn)return!1;const s=Ae(i.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function jd(r){const i=Dn(r),s=null!==i?i.factory:bi(r);if(null!==s)return s;if(r instanceof $)throw new Error(`Token ${ve(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const i=r.length;if(i>0){const u=function(r,i){const s=[];for(let u=0;u<r;u++)s.push(i);return s}(i,"?");throw new Error(`Can't resolve all parameters for ${ve(r)}: (${u.join(", ")}).`)}const s=function(r){const i=r&&(r[kt]||r[Ir]);if(i){const s=function(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),i}return null}(r);return null!==s?()=>s.factory(r):()=>new r}(r);throw new Error("unreachable")}function jm(r,i,s){let u;if(ml(r)){const c=Ae(r);return bi(c)||jd(c)}if($m(r))u=()=>Ae(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...iu(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))u=()=>$r(Ae(r.useExisting));else{const c=Ae(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return bi(c)||jd(c);u=()=>new c(...iu(r.deps))}return u}function gl(r,i,s=!1){return{factory:r,value:i,multi:s?[]:void 0}}function $m(r){return null!==r&&"object"==typeof r&&Tu in r}function ml(r){return"function"==typeof r}const $d=function(r,i,s){return function(r,i=null,s=null,u){const c=Yh(r,i,s,u);return c._resolveInjectorDefTypes(),c}({name:s},i,r,s)};let si=(()=>{class r{static create(s,u){return Array.isArray(s)?$d(s,u,""):$d(s.providers,s.parent,s.name||"")}}return r.THROW_IF_NOT_FOUND=ia,r.NULL=new Vm,r.\u0275prov=un({token:r,providedIn:"any",factory:()=>$r(Bc)}),r.__NG_ELEMENT_ID__=-1,r})();function ry(r,i){Vo(gs(r)[1],Zn())}function rf(r){let i=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),s=!0;const u=[r];for(;i;){let c;if(Fr(r))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Error("Directives cannot inherit Components");c=i.\u0275dir}if(c){if(s){u.push(c);const m=r;m.inputs=rg(r.inputs),m.declaredInputs=rg(r.declaredInputs),m.outputs=rg(r.outputs);const _=c.hostBindings;_&&Z_(r,_);const D=c.viewQuery,N=c.contentQueries;if(D&&ig(r,D),N&&K_(r,N),me(r.inputs,c.inputs),me(r.declaredInputs,c.declaredInputs),me(r.outputs,c.outputs),Fr(c)&&c.data.animation){const B=r.data;B.animation=(B.animation||[]).concat(c.data.animation)}}const d=c.features;if(d)for(let m=0;m<d.length;m++){const _=d[m];_&&_.ngInherit&&_(r),_===rf&&(s=!1)}}i=Object.getPrototypeOf(i)}!function(r){let i=0,s=null;for(let u=r.length-1;u>=0;u--){const c=r[u];c.hostVars=i+=c.hostVars,c.hostAttrs=na(c.hostAttrs,s=na(s,c.hostAttrs))}}(u)}function rg(r){return r===Ct?{}:r===vt?[]:r}function ig(r,i){const s=r.viewQuery;r.viewQuery=s?(u,c)=>{i(u,c),s(u,c)}:i}function K_(r,i){const s=r.contentQueries;r.contentQueries=s?(u,c,d)=>{i(u,c,d),s(u,c,d)}:i}function Z_(r,i){const s=r.hostBindings;r.hostBindings=s?(u,c)=>{i(u,c),s(u,c)}:i}let vi=null;function Ql(){if(!vi){const r=ue.Symbol;if(r&&r.iterator)vi=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<i.length;++s){const u=i[s];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(vi=u)}}}return vi}function $c(r){return!!sg(r)&&(Array.isArray(r)||!(r instanceof Map)&&Ql()in r)}function sg(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Zs(r,i,s){return!Object.is(r[i],s)&&(r[i]=s,!0)}function oy(r,i,s,u){const c=Ze();return Zs(c,$n(),i)&&(vn(),du(er(),c,r,i,s,u)),oy}function pa(r,i,s,u){return Zs(r,$n(),s)?i+ut(s)+u:ln}function ug(r,i,s,u,c,d,m,_){const D=Ze(),N=vn(),B=r+20,Z=N.firstCreatePass?function(r,i,s,u,c,d,m,_,D){const N=i.consts,B=fl(i,r,4,m||null,Vr(N,_));Vd(i,s,B,Vr(N,D)),Vo(i,B);const Z=B.tViews=Lc(2,B,u,c,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,N);return null!==i.queries&&(i.queries.template(i,B),Z.queries=i.queries.embeddedTView(B)),B}(B,N,D,i,s,u,c,d,m):N.data[B];qi(Z,!1);const X=D[11].createComment("");Ad(N,D,X,Z),di(X,D),Uc(D,D[B]=Gh(X,D,X,Z)),hr(Z)&&Ap(N,D,Z),null!=m&&Fd(D,Z,_)}function lg(r){return function(r,i){return r[i]}(qt.lFrame.contextLView,20+r)}function Jd(r,i=tt.Default){const s=Ze();return null===s?$r(r,i):A(Zn(),s,Ae(r),i)}function vg(r,i,s){const u=Ze();return Zs(u,$n(),i)&&ys(vn(),er(),u,r,i,u[11],s,!1),vg}function Cl(r,i,s,u,c){const m=c?"class":"style";Fm(r,s,i.inputs[m],m,u)}function wg(r,i,s,u){const c=Ze(),d=vn(),m=20+r,_=c[11],D=c[m]=bh(_,i,qt.lFrame.currentNamespace),N=d.firstCreatePass?function(r,i,s,u,c,d,m){const _=i.consts,N=fl(i,r,2,c,Vr(_,d));return Vd(i,s,N,Vr(_,m)),null!==N.attrs&&ha(N,N.attrs,!1),null!==N.mergedAttrs&&ha(N,N.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,N),N}(m,d,c,0,i,s,u):d.data[m];qi(N,!0);const B=N.mergedAttrs;null!==B&&tr(_,D,B);const Z=N.classes;null!==Z&&Od(_,D,Z);const X=N.styles;null!==X&&lp(_,D,X),64!=(64&N.flags)&&Ad(d,c,D,N),0===qt.lFrame.elementDepthCount&&di(D,c),qt.lFrame.elementDepthCount++,hr(N)&&(Ap(d,c,N),function(r,i,s){if(kr(i)){const c=i.directiveEnd;for(let d=i.directiveStart;d<c;d++){const m=r.data[d];m.contentQueries&&m.contentQueries(1,s[d],d)}}}(d,N,c)),null!==u&&Fd(c,N)}function Cg(){let r=Zn();wu()?qt.lFrame.isParent=!1:(r=r.parent,qi(r,!1));const i=r;qt.lFrame.elementDepthCount--;const s=vn();s.firstCreatePass&&(Vo(s,r),kr(r)&&s.queries.elementEnd(r)),null!=i.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(i)&&Cl(s,i,Ze(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(i)&&Cl(s,i,Ze(),i.stylesWithoutHost,!1)}function Ey(r,i,s,u){wg(r,i,s,u),Cg()}function by(){return Ze()}function bg(r){return!!r&&"function"==typeof r.then}function Iy(r){return!!r&&"function"==typeof r.subscribe}const Xd=Iy;function pf(r,i,s,u){const c=Ze(),d=vn(),m=Zn();return function(r,i,s,u,c,d,m,_){const D=hr(u),B=r.firstCreatePass&&Kl(r),Z=i[8],X=qh(i);let ae=!0;if(3&u.type||_){const xe=Dt(u,i),lt=_?_(xe):xe,Ke=X.length,$t=_?an=>_(S(an[u.index])):u.index;if(ke(s)){let an=null;if(!_&&D&&(an=function(r,i,s,u){const c=r.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const m=c[d];if(m===s&&c[d+1]===u){const _=i[7],D=c[d+2];return _.length>D?_[D]:null}"string"==typeof m&&(d+=2)}return null}(r,i,c,u.index)),null!==an)(an.__ngLastListenerFn__||an).__ngNextListenerFn__=d,an.__ngLastListenerFn__=d,ae=!1;else{d=Dg(u,i,Z,d,!1);const Un=s.listen(lt,c,d);X.push(d,Un),B&&B.push(c,$t,Ke,Ke+1)}}else d=Dg(u,i,Z,d,!0),lt.addEventListener(c,d,m),X.push(d),B&&B.push(c,$t,Ke,m)}else d=Dg(u,i,Z,d,!1);const _e=u.outputs;let He;if(ae&&null!==_e&&(He=_e[c])){const xe=He.length;if(xe)for(let lt=0;lt<xe;lt+=2){const Fs=i[He[lt]][He[lt+1]].subscribe(d),Eu=X.length;X.push(d,Fs),B&&B.push(c,u.index,Eu,-(Eu+1))}}}(d,c,c[11],m,r,i,!!s,u),pf}function Dy(r,i,s,u){try{return!1!==s(u)}catch(c){return Kh(r,c),!1}}function Dg(r,i,s,u,c){return function d(m){if(m===Function)return u;const _=2&r.flags?Nn(r.index,i):i;0==(32&i[2])&&Wh(_);let D=Dy(i,0,u,m),N=d.__ngNextListenerFn__;for(;N;)D=Dy(i,0,N,m)&&D,N=N.__ngNextListenerFn__;return c&&!1===D&&(m.preventDefault(),m.returnValue=!1),D}}function Tg(r=1){return function(r){return(qt.lFrame.contextLView=function(r,i){for(;r>0;)i=i[15],r--;return i}(r,qt.lFrame.contextLView))[8]}(r)}function pu(r,i,s,u,c){const d=Ze(),m=pa(d,i,s,u);return m!==ln&&ys(vn(),er(),d,r,m,d[11],c,!1),pu}function yf(r,i,s,u,c){const d=r[s+1],m=null===i;let _=u?ka(d):Pu(d),D=!1;for(;0!==_&&(!1===D||m);){const B=r[_+1];oc(r[_],i)&&(D=!0,r[_+1]=u?yp(B):gp(B)),_=u?ka(B):Pu(B)}D&&(r[s+1]=u?gp(d):yp(d))}function oc(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&zo(r,i)>=0}function vf(r,i){return function(r,i,s,u){const c=Ze(),d=vn(),m=function(r){const i=qt.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,s}(2);d.firstUpdatePass&&function(r,i,s,u){const c=r.data;if(null===c[s+1]){const d=c[fr()],m=function(r,i){return i>=r.expandoStartIndex}(r,s);(function(r,i){return 0!=(r.flags&(i?16:32))})(d,u)&&null===i&&!m&&(i=!1),i=function(r,i,s,u){const c=function(r){const i=qt.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let d=u?i.residualClasses:i.residualStyles;if(null===c)0===(u?i.classBindings:i.styleBindings)&&(s=y(s=h(null,r,i,s,u),i.attrs,u),d=null);else{const m=i.directiveStylingLast;if(-1===m||r[m]!==c)if(s=h(c,r,i,s,u),null===d){let D=function(r,i,s){const u=s?i.classBindings:i.styleBindings;if(0!==Pu(u))return r[ka(u)]}(r,i,u);void 0!==D&&Array.isArray(D)&&(D=h(null,r,i,D[1],u),D=y(D,i.attrs,u),function(r,i,s,u){r[ka(s?i.classBindings:i.styleBindings)]=u}(r,i,u,D))}else d=function(r,i,s){let u;const c=i.directiveEnd;for(let d=1+i.directiveStylingLast;d<c;d++)u=y(u,r[d].hostAttrs,s);return y(u,i.attrs,s)}(r,i,u)}return void 0!==d&&(u?i.residualClasses=d:i.residualStyles=d),s}(c,d,i,u),function(r,i,s,u,c,d){let m=d?i.classBindings:i.styleBindings,_=ka(m),D=Pu(m);r[u]=s;let B,N=!1;if(Array.isArray(s)){const Z=s;B=Z[1],(null===B||zo(Z,B)>0)&&(N=!0)}else B=s;if(c)if(0!==D){const X=ka(r[_+1]);r[u+1]=Pc(X,_),0!==X&&(r[X+1]=mp(r[X+1],u)),r[_+1]=function(r,i){return 131071&r|i<<17}(r[_+1],u)}else r[u+1]=Pc(_,0),0!==_&&(r[_+1]=mp(r[_+1],u)),_=u;else r[u+1]=Pc(D,0),0===_?_=u:r[D+1]=mp(r[D+1],u),D=u;N&&(r[u+1]=gp(r[u+1])),yf(r,B,u,!0),yf(r,B,u,!1),function(r,i,s,u,c){const d=c?r.residualClasses:r.residualStyles;null!=d&&"string"==typeof i&&zo(d,i)>=0&&(s[u+1]=yp(s[u+1]))}(i,B,r,u,d),m=Pc(_,D),d?i.classBindings=m:i.styleBindings=m}(c,d,i,s,m,u)}}(d,r,m,u),i!==ln&&Zs(c,m,i)&&function(r,i,s,u,c,d,m,_){if(!(3&i.type))return;const D=r.data,N=D[_+1];we(function(r){return 1==(1&r)}(N)?re(D,i,s,c,Pu(N),m):void 0)||(we(d)||function(r){return 2==(2&r)}(N)&&(d=re(D,null,s,c,_,m)),function(r,i,s,u,c){const d=ke(r);if(i)c?d?r.addClass(s,u):s.classList.add(u):d?r.removeClass(s,u):s.classList.remove(u);else{let m=-1===u.indexOf("-")?void 0:Ma.DashCase;if(null==c)d?r.removeStyle(s,u,m):s.style.removeProperty(u);else{const _="string"==typeof c&&c.endsWith("!important");_&&(c=c.slice(0,-10),m|=Ma.Important),d?r.setStyle(s,u,c,m):s.style.setProperty(u,c,_?"important":"")}}}(u,m,nt(fr(),s),c,d))}(d,d.data[fr()],c,c[11],r,c[m+1]=function(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=ve(Io(r)))),r}(i,s),u,m)}(r,i,null,!0),vf}function h(r,i,s,u,c){let d=null;const m=s.directiveEnd;let _=s.directiveStylingLast;for(-1===_?_=s.directiveStart:_++;_<m&&(d=i[_],u=y(u,d.hostAttrs,c),d!==r);)_++;return null!==r&&(s.directiveStylingLast=_),u}function y(r,i,s){const u=s?1:2;let c=-1;if(null!==i)for(let d=0;d<i.length;d++){const m=i[d];"number"==typeof m?c=m:c===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Os(r,m,!!s||i[++d]))}return void 0===r?null:r}function re(r,i,s,u,c,d){const m=null===i;let _;for(;c>0;){const D=r[c],N=Array.isArray(D),B=N?D[1]:D,Z=null===B;let X=s[c+1];X===ln&&(X=Z?vt:void 0);let ae=Z?tu(X,u):B===u?X:void 0;if(N&&!we(ae)&&(ae=tu(D,u)),we(ae)&&(_=ae,m))return _;const _e=r[c+1];c=m?ka(_e):Pu(_e)}if(null!==i){let D=d?i.residualClasses:i.residualStyles;null!=D&&(_=tu(D,u))}return _}function we(r){return void 0!==r}function _t(r,i=""){const s=Ze(),u=vn(),c=r+20,d=u.firstCreatePass?fl(u,c,1,i,null):u.data[c],m=s[c]=function(r,i){return ke(r)?r.createText(i):r.createTextNode(i)}(s[11],i);Ad(u,s,m,d),qi(d,!1)}function Ut(r){return cn("",r,""),Ut}function cn(r,i,s){const u=Ze(),c=pa(u,r,i,s);return c!==ln&&La(u,fr(),c),cn}function pv(r,i,s){const u=Ze();return Zs(u,$n(),i)&&ys(vn(),er(),u,r,i,u[11],s,!0),pv}const nh=void 0;var lb=["en",[["a","p"],["AM","PM"],nh],[["AM","PM"],nh,nh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nh,"{1} 'at' {0}",nh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const i=Math.floor(Math.abs(r)),s=r.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===s?1:5}];let Ef={};function gv(r){const i=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let s=c0(i);if(s)return s;const u=i.split("-")[0];if(s=c0(u),s)return s;if("en"===u)return lb;throw new Error(`Missing locale data for the locale "${r}".`)}function l0(r){return gv(r)[tn.PluralCase]}function c0(r){return r in Ef||(Ef[r]=ue.ng&&ue.ng.common&&ue.ng.common.locales&&ue.ng.common.locales[r]),Ef[r]}var tn=(()=>((tn=tn||{})[tn.LocaleId=0]="LocaleId",tn[tn.DayPeriodsFormat=1]="DayPeriodsFormat",tn[tn.DayPeriodsStandalone=2]="DayPeriodsStandalone",tn[tn.DaysFormat=3]="DaysFormat",tn[tn.DaysStandalone=4]="DaysStandalone",tn[tn.MonthsFormat=5]="MonthsFormat",tn[tn.MonthsStandalone=6]="MonthsStandalone",tn[tn.Eras=7]="Eras",tn[tn.FirstDayOfWeek=8]="FirstDayOfWeek",tn[tn.WeekendRange=9]="WeekendRange",tn[tn.DateFormat=10]="DateFormat",tn[tn.TimeFormat=11]="TimeFormat",tn[tn.DateTimeFormat=12]="DateTimeFormat",tn[tn.NumberSymbols=13]="NumberSymbols",tn[tn.NumberFormats=14]="NumberFormats",tn[tn.CurrencyCode=15]="CurrencyCode",tn[tn.CurrencySymbol=16]="CurrencySymbol",tn[tn.CurrencyName=17]="CurrencyName",tn[tn.Currencies=18]="Currencies",tn[tn.Directionality=19]="Directionality",tn[tn.PluralCase=20]="PluralCase",tn[tn.ExtraData=21]="ExtraData",tn))();const Vy="en-US";let d0=Vy;function mv(r){wt(r,"Expected localeId to be defined"),"string"==typeof r&&(d0=r.toLowerCase().replace(/_/g,"-"))}function vv(r,i,s,u,c){if(r=Ae(r),Array.isArray(r))for(let d=0;d<r.length;d++)vv(r[d],i,s,u,c);else{const d=vn(),m=Ze();let _=ml(r)?r:Ae(r.provide),D=jm(r);const N=Zn(),B=1048575&N.providerIndexes,Z=N.directiveStart,X=N.providerIndexes>>20;if(ml(r)||!r.multi){const ae=new Rs(D,c,Jd),_e=wv(_,i,c?B:B+X,Z);-1===_e?(Be(Rt(N,m),d,_),Ev(d,r,i.length),i.push(_),N.directiveStart++,N.directiveEnd++,c&&(N.providerIndexes+=1048576),s.push(ae),m.push(ae)):(s[_e]=ae,m[_e]=ae)}else{const ae=wv(_,i,B+X,Z),_e=wv(_,i,B,B+X),He=ae>=0&&s[ae],xe=_e>=0&&s[_e];if(c&&!xe||!c&&!He){Be(Rt(N,m),d,_);const lt=function(r,i,s,u,c){const d=new Rs(r,s,Jd);return d.multi=[],d.index=i,d.componentProviders=0,k0(d,c,u&&!s),d}(c?oI:sI,s.length,c,u,D);!c&&xe&&(s[_e].providerFactory=lt),Ev(d,r,i.length,0),i.push(_),N.directiveStart++,N.directiveEnd++,c&&(N.providerIndexes+=1048576),s.push(lt),m.push(lt)}else Ev(d,r,ae>-1?ae:_e,k0(s[c?_e:ae],D,!c&&u));!c&&u&&xe&&s[_e].componentProviders++}}}function Ev(r,i,s,u){const c=ml(i);if(c||function(r){return!!r.useClass}(i)){const m=(i.useClass||i).prototype.ngOnDestroy;if(m){const _=r.destroyHooks||(r.destroyHooks=[]);if(!c&&i.multi){const D=_.indexOf(s);-1===D?_.push(s,[u,m]):_[D+1].push(u,m)}else _.push(s,m)}}}function k0(r,i,s){return s&&r.componentProviders++,r.multi.push(i)-1}function wv(r,i,s,u){for(let c=s;c<u;c++)if(i[c]===r)return c;return-1}function sI(r,i,s,u){return Cv(this.multi,[])}function oI(r,i,s,u){const c=this.multi;let d;if(this.providerFactory){const m=this.providerFactory.componentProviders,_=q(s,s[1],this.providerFactory.index,u);d=_.slice(0,m),Cv(c,d);for(let D=m;D<_.length;D++)d.push(_[D])}else d=[],Cv(c,d);return d}function Cv(r,i){for(let s=0;s<r.length;s++)i.push((0,r[s])());return i}function F0(r,i=[]){return s=>{s.providersResolver=(u,c)=>function(r,i,s){const u=vn();if(u.firstCreatePass){const c=Fr(r);vv(s,u.data,u.blueprint,c,!0),vv(i,u.data,u.blueprint,c,!1)}}(u,c?c(r):r,i)}}class L0{}const U0="ngComponent";class lI{resolveComponentFactory(i){throw function(r){const i=Error(`No component factory found for ${ve(r)}. Did you add it to @NgModule.entryComponents?`);return i[U0]=r,i}(i)}}let Cf=(()=>{class r{}return r.NULL=new lI,r})();function Hy(...r){}function bf(r,i){return new Dl(Dt(r,i))}const hI=function(){return bf(Zn(),Ze())};let Dl=(()=>{class r{constructor(s){this.nativeElement=s}}return r.__NG_ELEMENT_ID__=hI,r})();function B0(r){return r instanceof Dl?r.nativeElement:r}class Gy{}let fI=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>gI(),r})();const gI=function(){const r=Ze(),s=Nn(Zn().index,r);return function(r){return r[11]}(Pr(s)?s:r)};let Iv=(()=>{class r{}return r.\u0275prov=un({token:r,providedIn:"root",factory:()=>null}),r})();class j0{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Dv=new j0("12.2.9");class $0{constructor(){}supports(i){return $c(i)}create(i){return new vI(i)}}const _I=(r,i)=>i;class vI{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||_I}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,u=this._removalsHead,c=0,d=null;for(;s||u;){const m=!u||s&&s.currentIndex<G0(u,c,d)?s:u,_=G0(m,c,d),D=m.currentIndex;if(m===u)c--,u=u._nextRemoved;else if(s=s._next,null==m.previousIndex)c++;else{d||(d=[]);const N=_-c,B=D-c;if(N!=B){for(let X=0;X<N;X++){const ae=X<d.length?d[X]:d[X]=0,_e=ae+X;B<=_e&&_e<N&&(d[X]=ae+1)}d[m.previousIndex]=B-N}}_!==D&&i(m,_,D)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!$c(i))throw new Error(`Error trying to diff '${ve(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,d,m,s=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let _=0;_<this.length;_++)d=i[_],m=this._trackByFn(_,d),null!==s&&Object.is(s.trackById,m)?(u&&(s=this._verifyReinsertion(s,d,m,_)),Object.is(s.item,d)||this._addIdentityChange(s,d)):(s=this._mismatch(s,d,m,_),u=!0),s=s._next}else c=0,function(r,i){if(Array.isArray(r))for(let s=0;s<r.length;s++)i(r[s]);else{const s=r[Ql()]();let u;for(;!(u=s.next()).done;)i(u.value)}}(i,_=>{m=this._trackByFn(c,_),null!==s&&Object.is(s.trackById,m)?(u&&(s=this._verifyReinsertion(s,_,m,c)),Object.is(s.item,_)||this._addIdentityChange(s,_)):(s=this._mismatch(s,_,m,c),u=!0),s=s._next,c++}),this.length=c;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,u,c){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,d,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,d,c)):i=this._addAfter(new EI(s,u),d,c),i}_verifyReinsertion(i,s,u,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?i=this._reinsertAfter(d,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,d=i._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(i,s,u),this._addToMoves(i,u),i}_moveAfter(i,s,u){return this._unlink(i),this._insertAfter(i,s,u),this._addToMoves(i,u),i}_addAfter(i,s,u){return this._insertAfter(i,s,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,u){const c=null===s?this._itHead:s._next;return i._next=c,i._prev=s,null===c?this._itTail=i:c._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new H0),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,u=i._next;return null===s?this._itHead=u:s._next=u,null===u?this._itTail=s:u._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new H0),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class EI{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===s||s<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const s=i._prevDup,u=i._nextDup;return null===s?this._head=u:s._nextDup=u,null===u?this._tail=s:u._prevDup=s,null===this._head}}class H0{constructor(){this.map=new Map}put(i){const s=i.trackById;let u=this.map.get(s);u||(u=new wI,this.map.set(s,u)),u.add(i)}get(i,s){const c=this.map.get(i);return c?c.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function G0(r,i,s){const u=r.previousIndex;if(null===u)return u;let c=0;return s&&u<s.length&&(c=s[u]),u+i+c}class W0{constructor(){}supports(i){return i instanceof Map||sg(i)}create(){return new CI}}class CI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||sg(i)))throw new Error(`Error trying to diff '${ve(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(s&&s.key===c)this._maybeAddToChanges(s,u),this._appendAfter=s,s=s._next;else{const d=this._getOrCreateRecordForKey(c,u);s=this._insertBeforeOrAppend(s,d)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let u=s;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const u=i._prev;return s._next=i,s._prev=u,i._prev=s,u&&(u._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,s);const d=c._prev,m=c._next;return d&&(d._next=m),m&&(m._prev=d),c._next=null,c._prev=null,c}const u=new bI(i);return this._records.set(i,u),u.currentValue=s,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(u=>s(i[u],u))}}class bI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function z0(){return new Wy([new $0])}let Wy=(()=>{class r{constructor(s){this.factories=s}static create(s,u){if(null!=u){const c=u.factories.slice();s=s.concat(c)}return new r(s)}static extend(s){return{provide:r,useFactory:u=>r.create(s,u||z0()),deps:[[r,new Sa,new po]]}}find(s){const u=this.factories.find(c=>c.supports(s));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${s}' of type '${function(r){return r.name||typeof r}(s)}'`)}}return r.\u0275prov=un({token:r,providedIn:"root",factory:z0}),r})();function q0(){return new zy([new W0])}let zy=(()=>{class r{constructor(s){this.factories=s}static create(s,u){if(u){const c=u.factories.slice();s=s.concat(c)}return new r(s)}static extend(s){return{provide:r,useFactory:u=>r.create(s,u||q0()),deps:[[r,new Sa,new po]]}}find(s){const u=this.factories.find(c=>c.supports(s));if(u)return u;throw new Error(`Cannot find a differ supporting object '${s}'`)}}return r.\u0275prov=un({token:r,providedIn:"root",factory:q0}),r})();function qy(r,i,s,u,c=!1){for(;null!==s;){const d=i[s.index];if(null!==d&&u.push(S(d)),on(d))for(let _=10;_<d.length;_++){const D=d[_],N=D[1].firstChild;null!==N&&qy(D[1],D,N,u)}const m=s.type;if(8&m)qy(r,i,s.child,u);else if(32&m){const _=Ch(s,i);let D;for(;D=_();)u.push(D)}else if(16&m){const _=Rd(i,s);if(Array.isArray(_))u.push(..._);else{const D=au(i[16]);qy(D[1],D,_,u,!0)}}s=c?s.projectionNext:s.next}return u}class Vg{constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,s=i[1];return qy(s,i,s.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(on(i)){const s=i[8],u=s?s.indexOf(this):-1;u>-1&&(Dh(i,u),ps(s,u))}this._attachedToViewContainer=!1}ll(this._lView[1],this._lView)}onDestroy(i){jh(this._lView[1],this._lView,null,i)}markForCheck(){Wh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){jp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,i,s){ko(!0);try{jp(r,i,s)}finally{ko(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,$l(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class DI extends Vg{constructor(i){super(i),this._view=i}detectChanges(){zh(this._view)}checkNoChanges(){!function(r){ko(!0);try{zh(r)}finally{ko(!1)}}(this._view)}get context(){return null}}const SI=function(r){return function(r,i,s){if(ki(r)&&!s){const u=Nn(r.index,i);return new Vg(u,u)}return 47&r.type?new Vg(i[16],i):null}(Zn(),Ze(),16==(16&r))};let AI=(()=>{class r{}return r.__NG_ELEMENT_ID__=SI,r})();const NI=[new W0],OI=new Wy([new $0]),PI=new zy(NI),FI=function(){return Ky(Zn(),Ze())};let Ug=(()=>{class r{}return r.__NG_ELEMENT_ID__=FI,r})();const LI=Ug,VI=class extends LI{constructor(i,s,u){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=u}createEmbeddedView(i){const s=this._declarationTContainer.tViews,u=hl(this._declarationLView,s,i,16,null,s.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(s)),zl(s,u,i),new Vg(u)}};function Ky(r,i){return 4&r.type?new VI(i,r,bf(r,i)):null}class rh{}class K0{}const jI=function(){return Q0(Zn(),Ze())};let Zy=(()=>{class r{}return r.__NG_ELEMENT_ID__=jI,r})();const HI=Zy,Z0=class extends HI{constructor(i,s,u){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=u}get element(){return bf(this._hostTNode,this._hostLView)}get injector(){return new pt(this._hostTNode,this._hostLView)}get parentInjector(){const i=ft(this._hostTNode,this._hostLView);if(xs(i)){const s=Ns(i,this._hostLView),u=Bo(i);return new pt(s[1].data[u+8],s)}return new pt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=Y0(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,s,u){const c=i.createEmbeddedView(s||{});return this.insert(c,u),c}createComponent(i,s,u,c,d){const m=u||this.parentInjector;if(!d&&null==i.ngModule&&m){const D=m.get(rh,null);D&&(d=D)}const _=i.create(m,c,void 0,d);return this.insert(_.hostView,s),_}insert(i,s){const u=i._lView,c=u[1];if(on(u[3])){const B=this.indexOf(i);if(-1!==B)this.detach(B);else{const Z=u[3],X=new Z0(Z,Z[6],Z[3]);X.detach(X.indexOf(i))}}const d=this._adjustIndex(s),m=this._lContainer;!function(r,i,s,u){const c=10+u,d=s.length;u>0&&(s[c-1][4]=i),u<d-10?(i[4]=s[c],Wo(s,10+u,i)):(s.push(i),i[4]=null),i[3]=s;const m=i[17];null!==m&&s!==m&&function(r,i){const s=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===s?r[9]=[i]:s.push(i)}(m,i);const _=i[19];null!==_&&_.insertView(r),i[2]|=128}(c,u,m,d);const _=op(d,m),D=u[11],N=Th(D,m[7]);return null!==N&&function(r,i,s,u,c,d){u[0]=c,u[6]=i,$l(r,u,s,1,c,d)}(c,m[6],D,u,N,_),i.attachToViewContainerRef(),Wo(Tv(m),d,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=Y0(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),u=Dh(this._lContainer,s);u&&(ps(Tv(this._lContainer),s),ll(u[1],u))}detach(i){const s=this._adjustIndex(i,-1),u=Dh(this._lContainer,s);return u&&null!=ps(Tv(this._lContainer),s)?new Vg(u):null}_adjustIndex(i,s=0){return null==i?this.length+s:i}};function Y0(r){return r[8]}function Tv(r){return r[8]||(r[8]=[])}function Q0(r,i){let s;const u=i[r.index];if(on(u))s=u;else{let c;if(8&r.type)c=S(u);else{const d=i[11];c=d.createComment("");const m=Dt(r,i);Ou(d,Th(d,m),c,function(r,i){return ke(r)?r.nextSibling(i):i.nextSibling}(d,m),!1)}i[r.index]=s=Gh(u,i,c,r),Uc(i,s)}return new Z0(s,r,i)}const Sf={};class yw extends Cf{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=Ot(i);return new vw(s,this.ngModule)}}function _w(r){const i=[];for(let s in r)r.hasOwnProperty(s)&&i.push({propName:r[s],templateName:s});return i}const UD=new $("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Na});class vw extends L0{constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=i.selectors.map(vm).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return _w(this.componentDef.inputs)}get outputs(){return _w(this.componentDef.outputs)}create(i,s,u,c){const d=(c=c||this.ngModule)?function(r,i){return{get:(s,u,c)=>{const d=r.get(s,Sf,c);return d!==Sf||u===Sf?d:i.get(s,u,c)}}}(i,c.injector):i,m=d.get(Gy,P),_=d.get(Iv,null),D=m.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",B=u?function(r,i,s){if(ke(r))return r.selectRootElement(i,s===Qn.ShadowDom);let u="string"==typeof i?r.querySelector(i):i;return u.textContent="",u}(D,u,this.componentDef.encapsulation):bh(m.createRenderer(null,this.componentDef),N,function(r){const i=r.toLowerCase();return"svg"===i?Ar:"math"===i?"http://www.w3.org/1998/MathML/":null}(N)),Z=this.componentDef.onPush?576:528,X=function(r,i){return{components:[],scheduler:r||Na,clean:Gp,playerHandler:i||null,flags:0}}(),ae=Lc(0,null,null,1,0,null,null,null,null,null),_e=hl(null,ae,X,Z,null,null,m,D,_,d);let He,xe;Lo(_e);try{const lt=function(r,i,s,u,c,d){const m=s[1];s[20]=r;const D=fl(m,20,2,"#host",null),N=D.mergedAttrs=i.hostAttrs;null!==N&&(ha(D,N,!0),null!==r&&(tr(c,r,N),null!==D.classes&&Od(c,r,D.classes),null!==D.styles&&lp(c,r,D.styles)));const B=u.createRenderer(r,i),Z=hl(s,Sm(i),null,i.onPush?64:16,s[20],D,u,B,d||null,null);return m.firstCreatePass&&(Be(Rt(D,s),m,i.type),Op(m,D),Pp(D,s.length,1)),Uc(s,Z),s[20]=Z}(B,this.componentDef,_e,m,D);if(B)if(u)tr(D,B,["ng-version",Dv.full]);else{const{attrs:Ke,classes:$t}=function(r){const i=[],s=[];let u=1,c=2;for(;u<r.length;){let d=r[u];if("string"==typeof d)2===c?""!==d&&i.push(d,r[++u]):8===c&&s.push(d);else{if(!Pa(c))break;c=d}u++}return{attrs:i,classes:s}}(this.componentDef.selectors[0]);Ke&&tr(D,B,Ke),$t&&$t.length>0&&Od(D,B,$t.join(" "))}if(xe=Lr(ae,20),void 0!==s){const Ke=xe.projection=[];for(let $t=0;$t<this.ngContentSelectors.length;$t++){const an=s[$t];Ke.push(null!=an?Array.from(an):null)}}He=function(r,i,s,u,c){const d=s[1],m=function(r,i,s){const u=Zn();r.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),kp(r,u,i,Fa(r,i,1,null),s));const c=q(i,r,u.directiveStart,u);di(c,i);const d=Dt(u,i);return d&&di(d,i),c}(d,s,i);if(u.components.push(m),r[8]=m,c&&c.forEach(D=>D(m,i)),i.contentQueries){const D=Zn();i.contentQueries(1,m,D.directiveStart)}const _=Zn();return!d.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Ts(_.index),$h(s[1],_,0,_.directiveStart,_.directiveEnd,i),Hh(i,m)),m}(lt,this.componentDef,_e,X,[ry]),zl(ae,_e,null)}finally{wa()}return new $D(this.componentType,He,bf(xe,_e),_e,xe)}}class $D extends class{}{constructor(i,s,u,c,d){super(),this.location=u,this._rootLView=c,this._tNode=d,this.instance=s,this.hostView=this.changeDetectorRef=new DI(c),this.componentType=i}get injector(){return new pt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const Af=new Map;class WD extends rh{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new yw(this);const u=Kn(i),c=i[fn]||null;c&&mv(c),this._bootstrapComponents=Ks(u.bootstrap),this._r3Injector=Yh(i,s,[{provide:rh,useValue:this},{provide:Cf,useValue:this.componentFactoryResolver}],ve(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,s=si.THROW_IF_NOT_FOUND,u=tt.Default){return i===si||i===rh||i===Bc?this:this._r3Injector.get(i,s,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Uv extends K0{constructor(i){super(),this.moduleType=i,null!==Kn(i)&&function(r){const i=new Set;!function s(u){const c=Kn(u,!0),d=c.id;null!==d&&(function(r,i,s){if(i&&i!==s)throw new Error(`Duplicate module registered for ${r} - ${ve(i)} vs ${ve(i.name)}`)}(d,Af.get(d),u),Af.set(d,u));const m=Ks(c.imports);for(const _ of m)i.has(_)||(i.add(_),s(_))}(r)}(i)}create(i){return new WD(this.moduleType,i)}}function Bv(r){return i=>{setTimeout(r,void 0,i)}}const Tl=class extends w.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,u){var c,d,m;let _=i,D=s||(()=>null),N=u;if(i&&"object"==typeof i){const Z=i;_=null===(c=Z.next)||void 0===c?void 0:c.bind(Z),D=null===(d=Z.error)||void 0===d?void 0:d.bind(Z),N=null===(m=Z.complete)||void 0===m?void 0:m.bind(Z)}this.__isAsync&&(D=Bv(D),_&&(_=Bv(_)),N&&(N=Bv(N)));const B=super.subscribe({next:_,error:D,complete:N});return i instanceof j.w&&i.add(B),B}};function cT(){return this._results[Ql()]()}class e_{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Ql(),u=e_.prototype;u[s]||(u[s]=cT)}get changes(){return this._changes||(this._changes=new Tl)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const u=this;u.dirty=!1;const c=li(i);(this._changesDetected=!function(r,i,s){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],d=i[u];if(s&&(c=s(c),d=s(d)),d!==c)return!1}return!0}(u._results,c,s))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class jv{constructor(i){this.queryList=i,this.matches=null}clone(){return new jv(this.queryList)}setDirty(){this.queryList.setDirty()}}class $v{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const u=null!==i.contentQueries?i.contentQueries[0]:s.length,c=[];for(let d=0;d<u;d++){const m=s.getByIndex(d);c.push(this.queries[m.indexInDeclarationView].clone())}return new $v(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==Pw(i,s).matches&&this.queries[s].setDirty()}}class Sw{constructor(i,s,u=null){this.predicate=i,this.flags=s,this.read=u}}class Hv{constructor(i=[]){this.queries=i}elementStart(i,s){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let u=0;u<this.length;u++){const c=null!==s?s.length:0,d=this.getByIndex(u).embeddedTView(i,c);d&&(d.indexInDeclarationView=u,null!==s?s.push(d):s=[d])}return null!==s?new Hv(s):null}template(i,s){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Gv{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new Gv(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==s;)u=u.parent;return s===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const d=u[c];this.matchTNodeWithReadOption(i,s,fT(s,d)),this.matchTNodeWithReadOption(i,s,V(s,i,d,!1,!1))}else u===Ug?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,V(s,i,u,!1,!1))}matchTNodeWithReadOption(i,s,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Dl||c===Zy||c===Ug&&4&s.type)this.addMatch(s.index,-2);else{const d=V(s,i,c,!1,!1);null!==d&&this.addMatch(s.index,d)}else this.addMatch(s.index,u)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function fT(r,i){const s=r.localNames;if(null!==s)for(let u=0;u<s.length;u+=2)if(s[u]===i)return s[u+1];return null}function gT(r,i,s,u){return-1===s?function(r,i){return 11&r.type?bf(r,i):4&r.type?Ky(r,i):null}(i,r):-2===s?function(r,i,s){return s===Dl?bf(i,r):s===Ug?Ky(i,r):s===Zy?Q0(i,r):void 0}(r,i,u):q(r,r[1],s,i)}function Aw(r,i,s,u){const c=i[19].queries[u];if(null===c.matches){const d=r.data,m=s.matches,_=[];for(let D=0;D<m.length;D+=2){const N=m[D];_.push(N<0?null:gT(i,d[N],m[D+1],s.metadata.read))}c.matches=_}return c.matches}function Wv(r,i,s,u){const c=r.queries.getByIndex(s),d=c.matches;if(null!==d){const m=Aw(r,i,c,s);for(let _=0;_<d.length;_+=2){const D=d[_];if(D>0)u.push(m[_/2]);else{const N=d[_+1],B=i[-D];for(let Z=10;Z<B.length;Z++){const X=B[Z];X[17]===X[3]&&Wv(X[1],X,N,u)}if(null!==B[9]){const Z=B[9];for(let X=0;X<Z.length;X++){const ae=Z[X];Wv(ae[1],ae,N,u)}}}}}return u}function Rw(r){const i=Ze(),s=vn(),u=ds();vo(u+1);const c=Pw(s,u);if(r.dirty&&pi(i)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const d=c.crossesNgTemplate?Wv(s,i,u,[]):Aw(s,i,c,u);r.reset(d,B0),r.notifyOnChanges()}return!0}return!1}function xw(r,i,s,u){const c=vn();if(c.firstCreatePass){const d=Zn();(function(r,i,s){null===r.queries&&(r.queries=new Hv),r.queries.track(new Gv(i,s))})(c,new Sw(i,s,u),d.index),function(r,i){const s=r.contentQueries||(r.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(r.queries.length-1,i)}(c,r),2==(2&s)&&(c.staticContentQueries=!0)}!function(r,i,s){const u=new e_(4==(4&s));jh(r,i,u,u.destroy),null===i[19]&&(i[19]=new $v),i[19].queries.push(new jv(u))}(c,Ze(),s)}function Nw(){return r=Ze(),i=ds(),r[19].queries[i].queryList;var r,i}function Pw(r,i){return r.queries.getByIndex(i)}function kw(r,i){return Ky(r,i)}const Qv=new $("Application Initializer");let xf=(()=>{class r{constructor(s){this.appInits=s,this.resolve=Hy,this.reject=Hy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const s=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if(bg(d))s.push(d);else if(Xd(d)){const m=new Promise((_,D)=>{d.subscribe({complete:_,error:D})});s.push(m)}}Promise.all(s).then(()=>{u()}).catch(c=>{this.reject(c)}),0===s.length&&u(),this.initialized=!0}}return r.\u0275fac=function(s){return new(s||r)($r(Qv,8))},r.\u0275prov=un({token:r,factory:r.\u0275fac}),r})();const Xw=new $("AppId"),zT={provide:Xw,useFactory:function(){return`${Jv()}${Jv()}${Jv()}`},deps:[]};function Jv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const eC=new $("Platform Initializer"),tC=new $("Platform ID"),nC=new $("appBootstrapListener");let rC=(()=>{class r{log(s){console.log(s)}warn(s){console.warn(s)}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=un({token:r,factory:r.\u0275fac}),r})();const r_=new $("LocaleId"),iC=new $("DefaultCurrencyCode");class KT{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}const Xv=function(r){return new Uv(r)},ZT=Xv,YT=function(r){return Promise.resolve(Xv(r))},sC=function(r){const i=Xv(r),u=Ks(Kn(r).declarations).reduce((c,d)=>{const m=Ot(d);return m&&c.push(new vw(m)),c},[]);return new KT(i,u)},QT=sC,JT=function(r){return Promise.resolve(sC(r))};let Qg=(()=>{class r{constructor(){this.compileModuleSync=ZT,this.compileModuleAsync=YT,this.compileModuleAndAllComponentsSync=QT,this.compileModuleAndAllComponentsAsync=JT}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=un({token:r,factory:r.\u0275fac}),r})();const tS=(()=>Promise.resolve(0))();function eE(r){"undefined"==typeof Zone?tS.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class ja{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tl(!1),this.onMicrotaskEmpty=new Tl(!1),this.onStable=new Tl(!1),this.onError=new Tl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&s,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let r=ue.requestAnimationFrame,i=ue.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const s=r[Zone.__symbol__("OriginalDelegate")];s&&(r=s);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(r){const i=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(ue,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,nE(r),r.isCheckStableRunning=!0,tE(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),nE(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,u,c,d,m,_)=>{try{return oC(r),s.invokeTask(c,d,m,_)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&i(),aC(r)}},onInvoke:(s,u,c,d,m,_,D)=>{try{return oC(r),s.invoke(c,d,m,_,D)}finally{r.shouldCoalesceRunChangeDetection&&i(),aC(r)}},onHasTask:(s,u,c,d)=>{s.hasTask(c,d),u===c&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,nE(r),tE(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(s,u,c,d)=>(s.handleError(c,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ja.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ja.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,s,u){return this._inner.run(i,s,u)}runTask(i,s,u,c){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+c,i,rS,Hy,Hy);try{return d.runTask(m,s,u)}finally{d.cancelTask(m)}}runGuarded(i,s,u){return this._inner.runGuarded(i,s,u)}runOutsideAngular(i){return this._outer.run(i)}}const rS={};function tE(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function nE(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function oC(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function aC(r){r._nesting--,tE(r)}class oS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tl,this.onMicrotaskEmpty=new Tl,this.onStable=new Tl,this.onError=new Tl}run(i,s,u){return i.apply(s,u)}runGuarded(i,s,u){return i.apply(s,u)}runOutsideAngular(i){return i()}runTask(i,s,u,c){return i.apply(s,u)}}let uC=(()=>{class r{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ja.assertNotInAngularZone(),eE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())eE(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(s)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,u,c){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),s(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:s,timeoutId:d,updateCb:c})}whenStable(s,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,u,c){return[]}}return r.\u0275fac=function(s){return new(s||r)($r(ja))},r.\u0275prov=un({token:r,factory:r.\u0275fac}),r})(),lC=(()=>{class r{constructor(){this._applications=new Map,rE.addToWindow(this)}registerApplication(s,u){this._applications.set(s,u)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,u=!0){return rE.findTestabilityInTree(this,s,u)}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=un({token:r,factory:r.\u0275fac}),r})();class aS{addToWindow(i){}findTestabilityInTree(i,s,u){return null}}function uS(r){rE=r}let rE=new aS,cC=!0,dC=!1;function iE(){return dC=!0,cC}function lS(){if(dC)throw new Error("Cannot enable prod mode after platform setup.");cC=!1}let ju;const hC=new $("AllowMultipleToken");class mS{constructor(i,s){this.name=i,this.token=s}}function fC(r,i,s=[]){const u=`Platform: ${i}`,c=new $(u);return(d=[])=>{let m=pC();if(!m||m.injector.get(hC,!1))if(r)r(s.concat(d).concat({provide:c,useValue:!0}));else{const _=s.concat(d).concat({provide:c,useValue:!0},{provide:Zl,useValue:"platform"});!function(r){if(ju&&!ju.destroyed&&!ju.injector.get(hC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ju=r.get(gC);const i=r.get(eC,null);i&&i.forEach(s=>s())}(si.create({providers:_,name:u}))}return function(r){const i=pC();if(!i)throw new Error("No platform exists!");if(!i.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(c)}}function pC(){return ju&&!ju.destroyed?ju:null}let gC=(()=>{class r{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,u){const _=function(r,i){let s;return s="noop"===r?new oS:("zone.js"===r?void 0:r)||new ja({enableLongStackTrace:iE(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),s}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),D=[{provide:ja,useValue:_}];return _.run(()=>{const N=si.create({providers:D,parent:this.injector,name:s.moduleType.name}),B=s.create(N),Z=B.injector.get($e,null);if(!Z)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return _.runOutsideAngular(()=>{const X=_.onError.subscribe({next:ae=>{Z.handleError(ae)}});B.onDestroy(()=>{sE(this._modules,B),X.unsubscribe()})}),function(r,i,s){try{const u=s();return bg(u)?u.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(Z,_,()=>{const X=B.injector.get(xf);return X.runInitializers(),X.donePromise.then(()=>(mv(B.injector.get(r_,Vy)||Vy),this._moduleDoBootstrap(B),B))})})}bootstrapModule(s,u=[]){const c=mC({},u);return function(r,i,s){const u=new Uv(s);return Promise.resolve(u)}(0,0,s).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(s){const u=s.injector.get(Jg);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!s.instance.ngDoBootstrap)throw new Error(`The module ${ve(s.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);s.instance.ngDoBootstrap(u)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(s){return new(s||r)($r(si))},r.\u0275prov=un({token:r,factory:r.\u0275fac}),r})();function mC(r,i){return Array.isArray(i)?i.reduce(mC,r):Object.assign(Object.assign({},r),i)}let Jg=(()=>{class r{constructor(s,u,c,d,m){this._zone=s,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=d,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new ne.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),D=new ne.y(N=>{let B;this._zone.runOutsideAngular(()=>{B=this._zone.onStable.subscribe(()=>{ja.assertNotInAngularZone(),eE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const Z=this._zone.onUnstable.subscribe(()=>{ja.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{B.unsubscribe(),Z.unsubscribe()}});this.isStable=(0,Oe.T)(_,D.pipe(r=>(0,ge.x)()(function(r,i){return function(u){let c;c="function"==typeof r?r:function(){return r};const d=Object.create(u,Te.N);return d.source=u,d.subjectFactory=c,d}}(oe)(r))))}bootstrap(s,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=s instanceof L0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(c.componentType);const d=function(r){return r.isBoundToModule}(c)?void 0:this._injector.get(rh),_=c.create(si.NULL,[],u||c.selector,d),D=_.location.nativeElement,N=_.injector.get(uC,null),B=N&&_.injector.get(lC);return N&&B&&B.registerApplication(D,N),_.onDestroy(()=>{this.detachView(_.hostView),sE(this.components,_),B&&B.unregisterApplication(D)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const u=s;this._views.push(u),u.attachToAppRef(this)}detachView(s){const u=s;sE(this._views,u),u.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(nC,[]).concat(this._bootstrapListeners).forEach(c=>c(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(s){return new(s||r)($r(ja),$r(si),$r($e),$r(Cf),$r(xf))},r.\u0275prov=un({token:r,factory:r.\u0275fac}),r})();function sE(r,i){const s=r.indexOf(i);s>-1&&r.splice(s,1)}class CS{}class IS{}const DS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let TS=(()=>{class r{constructor(s,u){this._compiler=s,this._config=u||DS}load(s){return this.loadAndCompile(s)}loadAndCompile(s){let[u,c]=s.split("#");return void 0===c&&(c="default"),G(8255)(u).then(d=>d[c]).then(d=>EC(d,u,c)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(s){let[u,c]=s.split("#"),d="NgFactory";return void 0===c&&(c="default",d=""),G(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(m=>m[c+d]).then(m=>EC(m,u,c))}}return r.\u0275fac=function(s){return new(s||r)($r(Qg),$r(IS,8))},r.\u0275prov=un({token:r,factory:r.\u0275fac}),r})();function EC(r,i,s){if(!r)throw new Error(`Cannot find '${s}' in '${i}'`);return r}const PS=function(r){return null},FS=fC(null,"core",[{provide:tC,useValue:"unknown"},{provide:gC,deps:[si]},{provide:lC,deps:[]},{provide:rC,deps:[]}]),jS=[{provide:Jg,useClass:Jg,deps:[ja,si,$e,Cf,xf]},{provide:UD,deps:[ja],useFactory:function(r){let i=[];return r.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(s){i.push(s)}}},{provide:xf,useClass:xf,deps:[[new po,Qv]]},{provide:Qg,useClass:Qg,deps:[]},zT,{provide:Wy,useFactory:function(){return OI},deps:[]},{provide:zy,useFactory:function(){return PI},deps:[]},{provide:r_,useFactory:function(r){return mv(r=r||"undefined"!=typeof $localize&&$localize.locale||Vy),r},deps:[[new Ju(r_),new po,new Sa]]},{provide:iC,useValue:"USD"}];let HS=(()=>{class r{constructor(s){}}return r.\u0275fac=function(s){return new(s||r)($r(Jg))},r.\u0275mod=Ei({type:r}),r.\u0275inj=yr({providers:jS}),r})()},8006:(bt,Ge,G)=>{"use strict";G.d(Ge,{zQ:()=>Et,ww:()=>Yt,rT:()=>Re,f7:()=>Ce,L6:()=>Le,_Q:()=>fe,lh:()=>ye,Qv:()=>Ne,nw:()=>Xe});var w=G(3018),j=G(9765),ne=G(5917),Oe=G(7574),Te=G(4402),he=G(6682),Fe=G(7771),ge=G(5319),oe=G(309),ee=G(7971),te=G(8858);class me extends j.xQ{constructor(ct=Number.POSITIVE_INFINITY,Pt=Number.POSITIVE_INFINITY,Jt){super(),this.scheduler=Jt,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=ct<1?1:ct,this._windowTime=Pt<1?1:Pt,Pt===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(ct){if(!this.isStopped){const Pt=this._events;Pt.push(ct),Pt.length>this._bufferSize&&Pt.shift()}super.next(ct)}nextTimeWindow(ct){this.isStopped||(this._events.push(new ve(this._getNow(),ct)),this._trimBufferThenGetEvents()),super.next(ct)}_subscribe(ct){const Pt=this._infiniteTimeWindow,Jt=Pt?this._events:this._trimBufferThenGetEvents(),Ft=this.scheduler,rn=Jt.length;let wt;if(this.closed)throw new ee.N;if(this.isStopped||this.hasError?wt=ge.w.EMPTY:(this.observers.push(ct),wt=new te.W(this,ct)),Ft&&ct.add(ct=new oe.ht(ct,Ft)),Pt)for(let ht=0;ht<rn&&!ct.closed;ht++)ct.next(Jt[ht]);else for(let ht=0;ht<rn&&!ct.closed;ht++)ct.next(Jt[ht].value);return this.hasError?ct.error(this.thrownError):this.isStopped&&ct.complete(),wt}_getNow(){return(this.scheduler||Fe.c).now()}_trimBufferThenGetEvents(){const ct=this._getNow(),Pt=this._bufferSize,Jt=this._windowTime,Ft=this._events,rn=Ft.length;let wt=0;for(;wt<rn&&!(ct-Ft[wt].time<Jt);)wt++;return rn>Pt&&(wt=Math.max(wt,rn-Pt)),wt>0&&Ft.splice(0,wt),Ft}}class ve{constructor(ct,Pt){this.time=ct,this.value=Pt}}function be(ot,ct,Pt){let Jt;return Jt=ot&&"object"==typeof ot?ot:{bufferSize:ot,windowTime:ct,refCount:!1,scheduler:Pt},Ft=>Ft.lift(function({bufferSize:ot=Number.POSITIVE_INFINITY,windowTime:ct=Number.POSITIVE_INFINITY,refCount:Pt,scheduler:Jt}){let Ft,wt,rn=0,ht=!1,jt=!1;return function(Fn){let un;rn++,!Ft||ht?(ht=!1,Ft=new me(ot,ct,Jt),un=Ft.subscribe(this),wt=Fn.subscribe({next(ir){Ft.next(ir)},error(ir){ht=!0,Ft.error(ir)},complete(){jt=!0,wt=void 0,Ft.complete()}}),jt&&(wt=void 0)):un=Ft.subscribe(this),this.add(()=>{rn--,un.unsubscribe(),un=void 0,wt&&!jt&&Pt&&0===rn&&(wt.unsubscribe(),wt=void 0,Ft=void 0)})}}(Jt))}var Se=G(3190);function Ae(ot,ct){return ct?(0,Se.w)(()=>ot,ct):(0,Se.w)(()=>ot)}var it=G(8002),Qe=G(8049),Je=G(3101),st=G(5435),se=G(9126),ut=G(8939),Gt=G(8583),Zt=G(7841);const Ne=new w.OlP("angularfire2.auth.use-emulator"),Le=new w.OlP("angularfire2.auth.settings"),fe=new w.OlP("angularfire2.auth.tenant-id"),Re=new w.OlP("angularfire2.auth.langugage-code"),ye=new w.OlP("angularfire2.auth.use-device-language"),Ce=new w.OlP("angularfire.auth.persistence"),Xe=(ot,ct,Pt,Jt,Ft,rn,wt,ht)=>(0,se.cc)(`${ot.name}.auth`,"AngularFireAuth",ot.name,()=>{const jt=ct.runOutsideAngular(()=>ot.auth());if(Pt&&jt.useEmulator(...Pt),Jt&&(jt.tenantId=Jt),jt.languageCode=Ft,rn&&jt.useDeviceLanguage(),wt)for(const[dn,Fn]of Object.entries(wt))jt.settings[dn]=Fn;return ht&&jt.setPersistence(ht),jt},[Pt,Jt,Ft,rn,wt,ht]);let Et=(()=>{class ot{constructor(Pt,Jt,Ft,rn,wt,ht,jt,dn,Fn,un,ir){const yr=new j.xQ,Dn=(0,ne.of)(void 0).pipe((0,oe.QV)(wt.outsideAngular),(0,Se.w)(()=>rn.runOutsideAngular(()=>Promise.resolve().then(G.bind(G,5841)))),(0,it.U)(()=>(0,ut.on)(Pt,rn,Jt)),(0,it.U)(Tn=>Xe(Tn,rn,ht,dn,Fn,un,jt,ir)),be({bufferSize:1,refCount:!1}));if((0,Gt.PM)(Ft))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ne.of)(null);else{Dn.pipe((0,Qe.P)()).subscribe();const Sn=Dn.pipe((0,Se.w)(kt=>kt.getRedirectResult().then(An=>An,()=>null)),se.iC,be({bufferSize:1,refCount:!1})),hn=Dn.pipe((0,Se.w)(kt=>new Oe.y(An=>({unsubscribe:rn.runOutsideAngular(()=>kt.onAuthStateChanged(Ir=>An.next(Ir),Ir=>An.error(Ir),()=>An.complete()))})))),Hn=Dn.pipe((0,Se.w)(kt=>new Oe.y(An=>({unsubscribe:rn.runOutsideAngular(()=>kt.onIdTokenChanged(Ir=>An.next(Ir),Ir=>An.error(Ir),()=>An.complete()))}))));this.authState=Sn.pipe(Ae(hn),(0,Je.R)(wt.outsideAngular),(0,oe.QV)(wt.insideAngular)),this.user=Sn.pipe(Ae(Hn),(0,Je.R)(wt.outsideAngular),(0,oe.QV)(wt.insideAngular)),this.idToken=this.user.pipe((0,Se.w)(kt=>kt?(0,Te.D)(kt.getIdToken()):(0,ne.of)(null))),this.idTokenResult=this.user.pipe((0,Se.w)(kt=>kt?(0,Te.D)(kt.getIdTokenResult()):(0,ne.of)(null))),this.credential=(0,he.T)(Sn,yr,this.authState.pipe((0,st.h)(kt=>!kt))).pipe((0,it.U)(kt=>(null==kt?void 0:kt.user)?kt:null),(0,Je.R)(wt.outsideAngular),(0,oe.QV)(wt.insideAngular))}return(0,ut.pX)(this,Dn,rn,{spy:{apply:(Tn,Sn,hn)=>{(Tn.startsWith("signIn")||Tn.startsWith("createUser"))&&hn.then(Hn=>yr.next(Hn))}}})}}return ot.\u0275fac=function(Pt){return new(Pt||ot)(w.LFG(ut.Dh),w.LFG(ut.xv,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(se.HU),w.LFG(Ne,8),w.LFG(Le,8),w.LFG(fe,8),w.LFG(Re,8),w.LFG(ye,8),w.LFG(Ce,8))},ot.\u0275prov=w.Yz7({token:ot,factory:ot.\u0275fac,providedIn:"any"}),ot})(),Yt=(()=>{class ot{constructor(){Zt.Z.registerVersion("angularfire",se.q4.full,"auth-compat")}}return ot.\u0275fac=function(Pt){return new(Pt||ot)},ot.\u0275mod=w.oAB({type:ot}),ot.\u0275inj=w.cJS({providers:[Et]}),ot})()},166:(bt,Ge,G)=>{"use strict";G.d(Ge,{ST:()=>Og,yb:()=>Ly});var w=G(3018),j=G(3637),ne=G(7574),Oe=G(4402),Te=G(5917),he=G(9126),Fe=G(7393);function ge(){return a=>a.lift(new oe)}class oe{call(n,o){return o.subscribe(new ee(n))}}class ee extends Fe.L{constructor(n){super(n),this.hasPrev=!1}_next(n){let o;this.hasPrev?o=[this.prev,n]:this.hasPrev=!0,this.prev=n,o&&this.destination.next(o)}}class me{constructor(n,o){this.compare=n,this.keySelector=o}call(n,o){return o.subscribe(new ve(n,this.compare,this.keySelector))}}class ve extends Fe.L{constructor(n,o,l){super(n),this.keySelector=l,this.hasKey=!1,"function"==typeof o&&(this.compare=o)}compare(n,o){return n===o}_next(n){let o;try{const{keySelector:h}=this;o=h?h(n):n}catch(h){return this.destination.error(h)}let l=!1;if(this.hasKey)try{const{compare:h}=this;l=h(this.key,o)}catch(h){return this.destination.error(h)}else this.hasKey=!0;l||(this.key=o,this.destination.next(n))}}var fe,be=G(9761),Ue=G(8002),Se=G(2145),Ae=G(5435),it=G(8939),Qe=G(8583),st=(G(5841),G(4486)),se=G(8239),ut=G(5452),Gt=G(6034),Zt=G(5601),Ve=G(3854),Ne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Le={},Re=Re||{},ye=Ne||self;function Ce(){}function Xe(a){var n=typeof a;return"array"==(n="object"!=n?n:a?Array.isArray(a)?"array":n:"null")||"object"==n&&"number"==typeof a.length}function Et(a){var n=typeof a;return"object"==n&&null!=a||"function"==n}var ot="closure_uid_"+(1e9*Math.random()>>>0),ct=0;function Pt(a,n,o){return a.call.apply(a.bind,arguments)}function Jt(a,n,o){if(!a)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,l),a.apply(n,h)}}return function(){return a.apply(n,arguments)}}function Ft(a,n,o){return(Ft=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Pt:Jt).apply(null,arguments)}function rn(a,n){var o=Array.prototype.slice.call(arguments,1);return function(){var l=o.slice();return l.push.apply(l,arguments),a.apply(this,l)}}function wt(a,n){function o(){}o.prototype=n.prototype,a.Z=n.prototype,a.prototype=new o,a.prototype.constructor=a,a.Vb=function(l,h,y){for(var I=Array(arguments.length-2),k=2;k<arguments.length;k++)I[k-2]=arguments[k];return n.prototype[h].apply(l,I)}}function ht(){this.s=this.s,this.o=this.o}var dn={};ht.prototype.s=!1,ht.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var a=function(a){return Object.prototype.hasOwnProperty.call(a,ot)&&a[ot]||(a[ot]=++ct)}(this);delete dn[a]}},ht.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Fn=Array.prototype.indexOf?function(a,n){return Array.prototype.indexOf.call(a,n,void 0)}:function(a,n){if("string"==typeof a)return"string"!=typeof n||1!=n.length?-1:a.indexOf(n,0);for(let o=0;o<a.length;o++)if(o in a&&a[o]===n)return o;return-1},un=Array.prototype.forEach?function(a,n,o){Array.prototype.forEach.call(a,n,o)}:function(a,n,o){const l=a.length,h="string"==typeof a?a.split(""):a;for(let y=0;y<l;y++)y in h&&n.call(o,h[y],y,a)};function yr(a){return Array.prototype.concat.apply([],arguments)}function Dn(a){const n=a.length;if(0<n){const o=Array(n);for(let l=0;l<n;l++)o[l]=a[l];return o}return[]}function Tn(a){return/^[\s\xa0]*$/.test(a)}var kt,Sn=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function hn(a,n){return-1!=a.indexOf(n)}function Hn(a,n){return a<n?-1:a>n?1:0}e:{var An=ye.navigator;if(An){var Ir=An.userAgent;if(Ir){kt=Ir;break e}}kt=""}function Bt(a,n,o){for(const l in a)n.call(o,a[l],l,a)}function tt(a){const n={};for(const o in a)n[o]=a[o];return n}var bn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bn(a,n){let o,l;for(let h=1;h<arguments.length;h++){for(o in l=arguments[h],l)a[o]=l[o];for(let y=0;y<bn.length;y++)o=bn[y],Object.prototype.hasOwnProperty.call(l,o)&&(a[o]=l[o])}}function Mn(a){return Mn[" "](a),a}Mn[" "]=Ce;var Vt,a,xt=hn(kt,"Opera"),St=hn(kt,"Trident")||hn(kt,"MSIE"),Gn=hn(kt,"Edge"),_s=Gn||St,es=hn(kt,"Gecko")&&!(hn(kt.toLowerCase(),"webkit")&&!hn(kt,"Edge"))&&!(hn(kt,"Trident")||hn(kt,"MSIE"))&&!hn(kt,"Edge"),Qn=hn(kt.toLowerCase(),"webkit")&&!hn(kt,"Edge");function Or(){var a=ye.document;return a?a.documentMode:void 0}e:{var de="",ce=(a=kt,es?/rv:([^\);]+)(\)|;)/.exec(a):Gn?/Edge\/([\d\.]+)/.exec(a):St?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Qn?/WebKit\/(\S+)/.exec(a):xt?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(ce&&(de=ce?ce[1]:""),St){var ue=Or();if(null!=ue&&ue>parseFloat(de)){Vt=String(ue);break e}}Vt=de}var ze={};function Pe(){return n=ze,Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=function(){let a=0;const n=Sn(String(Vt)).split("."),o=Sn("9").split("."),l=Math.max(n.length,o.length);for(let I=0;0==a&&I<l;I++){var h=n[I]||"",y=o[I]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],y=/(\d*)(\D*)(.*)/.exec(y)||["","","",""],0==h[0].length&&0==y[0].length)break;a=Hn(0==h[1].length?0:parseInt(h[1],10),0==y[1].length?0:parseInt(y[1],10))||Hn(0==h[2].length,0==y[2].length)||Hn(h[2],y[2]),h=h[3],y=y[3]}while(0==a)}return 0<=a}();var n}var nn=ye.document&&St&&(Or()||parseInt(Vt,10))||void 0,Ln=function(){if(!ye.addEventListener||!Object.defineProperty)return!1;var a=!1,n=Object.defineProperty({},"passive",{get:function(){a=!0}});try{ye.addEventListener("test",Ce,n),ye.removeEventListener("test",Ce,n)}catch(o){}return a}();function Xt(a,n){this.type=a,this.g=this.target=n,this.defaultPrevented=!1}function ur(a,n){if(Xt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var o=this.type=a.type,l=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=n,n=a.relatedTarget){if(es){e:{try{Mn(n.nodeName);var h=!0;break e}catch(y){}h=!1}h||(n=null)}}else"mouseover"==o?n=a.fromElement:"mouseout"==o&&(n=a.toElement);this.relatedTarget=n,l?(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:fn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ur.Z.h.call(this)}}Xt.prototype.h=function(){this.defaultPrevented=!0},wt(ur,Xt);var fn={2:"touch",3:"pen",4:"mouse"};ur.prototype.h=function(){ur.Z.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Qt="closure_listenable_"+(1e6*Math.random()|0),Vn=0;function Ls(a,n,o,l,h){this.listener=a,this.proxy=null,this.src=n,this.type=o,this.capture=!!l,this.ia=h,this.key=++Vn,this.ca=this.fa=!1}function vs(a){a.ca=!0,a.listener=null,a.proxy=null,a.src=null,a.ia=null}function Es(a){this.src=a,this.g={},this.h=0}function ts(a,n){var o=n.type;if(o in a.g){var y,l=a.g[o],h=Fn(l,n);(y=0<=h)&&Array.prototype.splice.call(l,h,1),y&&(vs(n),0==a.g[o].length&&(delete a.g[o],a.h--))}}function ns(a,n,o,l){for(var h=0;h<a.length;++h){var y=a[h];if(!y.ca&&y.listener==n&&y.capture==!!o&&y.ia==l)return h}return-1}Es.prototype.add=function(a,n,o,l,h){var y=a.toString();(a=this.g[y])||(a=this.g[y]=[],this.h++);var I=ns(a,n,l,h);return-1<I?(n=a[I],o||(n.fa=!1)):((n=new Ls(n,this.src,y,!!l,h)).fa=o,a.push(n)),n};var ws="closure_lm_"+(1e6*Math.random()|0),Ei={};function lr(a,n,o,l,h){if(l&&l.once)return wi(a,n,o,l,h);if(Array.isArray(n)){for(var y=0;y<n.length;y++)lr(a,n[y],o,l,h);return null}return o=dt(o),a&&a[Qt]?a.N(n,o,Et(l)?!!l.capture:!!l,h):cr(a,n,o,!1,l,h)}function cr(a,n,o,l,h,y){if(!n)throw Error("Invalid event type");var I=Et(h)?!!h.capture:!!h,k=to(a);if(k||(a[ws]=k=new Es(a)),(o=k.add(n,o,l,I,y)).proxy)return o;if(l=function(){var n=Kn;return function a(o){return n.call(a.src,a.listener,o)}}(),o.proxy=l,l.src=a,l.listener=o,a.addEventListener)Ln||(h=I),void 0===h&&(h=!1),a.addEventListener(n.toString(),l,h);else if(a.attachEvent)a.attachEvent(ji(n.toString()),l);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(l)}return o}function wi(a,n,o,l,h){if(Array.isArray(n)){for(var y=0;y<n.length;y++)wi(a,n[y],o,l,h);return null}return o=dt(o),a&&a[Qt]?a.O(n,o,Et(l)?!!l.capture:!!l,h):cr(a,n,o,!0,l,h)}function Ot(a,n,o,l,h){if(Array.isArray(n))for(var y=0;y<n.length;y++)Ot(a,n[y],o,l,h);else l=Et(l)?!!l.capture:!!l,o=dt(o),a&&a[Qt]?(a=a.i,(n=String(n).toString())in a.g&&-1<(o=ns(y=a.g[n],o,l,h))&&(vs(y[o]),Array.prototype.splice.call(y,o,1),0==y.length&&(delete a.g[n],a.h--))):a&&(a=to(a))&&(n=a.g[n.toString()],a=-1,n&&(a=ns(n,o,l,h)),(o=-1<a?n[a]:null)&&Dr(o))}function Dr(a){if("number"!=typeof a&&a&&!a.ca){var n=a.src;if(n&&n[Qt])ts(n.i,a);else{var o=a.type,l=a.proxy;n.removeEventListener?n.removeEventListener(o,l,a.capture):n.detachEvent?n.detachEvent(ji(o),l):n.addListener&&n.removeListener&&n.removeListener(l),(o=to(n))?(ts(o,a),0==o.h&&(o.src=null,n[ws]=null)):vs(a)}}}function ji(a){return a in Ei?Ei[a]:Ei[a]="on"+a}function Kn(a,n){if(a.ca)a=!0;else{n=new ur(n,this);var o=a.listener,l=a.ia||a.src;a.fa&&Dr(a),a=o.call(l,n)}return a}function to(a){return(a=a[ws])instanceof Es?a:null}var pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function dt(a){return"function"==typeof a?a:(a[pn]||(a[pn]=function(n){return a.handleEvent(n)}),a[pn])}function Nt(){ht.call(this),this.i=new Es(this),this.P=this,this.I=null}function Wt(a,n){var o,l=a.I;if(l)for(o=[];l;l=l.I)o.push(l);if(a=a.P,l=n.type||n,"string"==typeof n)n=new Xt(n,a);else if(n instanceof Xt)n.target=n.target||a;else{var h=n;Bn(n=new Xt(l,a),h)}if(h=!0,o)for(var y=o.length-1;0<=y;y--){var I=n.g=o[y];h=sr(I,l,!0,n)&&h}if(h=sr(I=n.g=a,l,!0,n)&&h,h=sr(I,l,!1,n)&&h,o)for(y=0;y<o.length;y++)h=sr(I=n.g=o[y],l,!1,n)&&h}function sr(a,n,o,l){if(!(n=a.i.g[String(n)]))return!0;n=n.concat();for(var h=!0,y=0;y<n.length;++y){var I=n[y];if(I&&!I.ca&&I.capture==o){var k=I.listener,H=I.ia||I.src;I.fa&&ts(a.i,I),h=!1!==k.call(H,l)&&h}}return h&&!l.defaultPrevented}wt(Nt,ht),Nt.prototype[Qt]=!0,Nt.prototype.removeEventListener=function(a,n,o,l){Ot(this,a,n,o,l)},Nt.prototype.M=function(){if(Nt.Z.M.call(this),this.i){var n,a=this.i;for(n in a.g){for(var o=a.g[n],l=0;l<o.length;l++)vs(o[l]);delete a.g[n],a.h--}}this.I=null},Nt.prototype.N=function(a,n,o,l){return this.i.add(String(a),n,!1,o,l)},Nt.prototype.O=function(a,n,o,l){return this.i.add(String(a),n,!0,o,l)};var Mi=ye.JSON.stringify;function On(){var a=Gr;let n=null;return a.g&&(n=a.g,a.g=a.g.next,a.g||(a.h=null),n.next=null),n}var rs,Pn=new class{constructor(a,n){this.i=a,this.j=n,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}(()=>new $i,a=>a.reset());class $i{constructor(){this.next=this.g=this.h=null}set(n,o){this.h=n,this.g=o,this.next=null}reset(){this.next=this.g=this.h=null}}function Vs(a){ye.setTimeout(()=>{throw a},0)}function zt(a,n){rs||function(){var a=ye.Promise.resolve(void 0);rs=function(){a.then(or)}}(),Us||(rs(),Us=!0),Gr.add(a,n)}var Us=!1,Gr=new class{constructor(){this.h=this.g=null}add(n,o){const l=Pn.get();l.set(n,o),this.h?this.h.next=l:this.g=l,this.h=l}};function or(){for(var a;a=On();){try{a.h.call(a.g)}catch(o){Vs(o)}var n=Pn;n.j(a),100>n.h&&(n.h++,a.next=n.g,n.g=a)}Us=!1}function Ci(a,n){Nt.call(this),this.h=a||1,this.g=n||ye,this.j=Ft(this.kb,this),this.l=Date.now()}function Oi(a){a.da=!1,a.S&&(a.g.clearTimeout(a.S),a.S=null)}function Tr(a,n,o){if("function"==typeof a)o&&(a=Ft(a,o));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=Ft(a.handleEvent,a)}return 2147483647<Number(n)?-1:ye.setTimeout(a,n||0)}function Rn(a){a.g=Tr(()=>{a.g=null,a.i&&(a.i=!1,Rn(a))},a.j);const n=a.h;a.h=null,a.m.apply(null,n)}wt(Ci,Nt),(fe=Ci.prototype).da=!1,fe.S=null,fe.kb=function(){if(this.da){var a=Date.now()-this.l;0<a&&a<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-a):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Wt(this,"tick"),this.da&&(Oi(this),this.start()))}},fe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.M=function(){Ci.Z.M.call(this),Oi(this),delete this.g};class ss extends ht{constructor(n,o){super(),this.m=n,this.j=o,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:Rn(this)}M(){super.M(),this.g&&(ye.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(a){ht.call(this),this.h=a,this.g={}}wt(Hi,ht);var os=[];function Wr(a,n,o,l){Array.isArray(o)||(o&&(os[0]=o.toString()),o=os);for(var h=0;h<o.length;h++){var y=lr(n,o[h],l||a.handleEvent,!1,a.h||a);if(!y)break;a.g[y.key]=y}}function _r(a){Bt(a.g,function(n,o){this.g.hasOwnProperty(o)&&Dr(n)},a),a.g={}}function Pi(){this.g=!0}function jn(a,n,o,l){a.info(function(){return"XMLHTTP TEXT ("+n+"): "+function(a,n){if(!a.g)return n;if(!n)return null;try{var o=JSON.parse(n);if(o)for(a=0;a<o.length;a++)if(Array.isArray(o[a])){var l=o[a];if(!(2>l.length)){var h=l[1];if(Array.isArray(h)&&!(1>h.length)){var y=h[0];if("noop"!=y&&"stop"!=y&&"close"!=y)for(var I=1;I<h.length;I++)h[I]=""}}}return Mi(o)}catch(k){return n}}(a,o)+(l?" "+l:"")})}Hi.prototype.M=function(){Hi.Z.M.call(this),_r(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pi.prototype.Aa=function(){this.g=!1},Pi.prototype.info=function(){};var kr={},ki=null;function hr(){return ki=ki||new Nt}function Fr(a){Xt.call(this,kr.Ma,a)}function In(a){const n=hr();Wt(n,new Fr(n,a))}function Cs(a,n){Xt.call(this,kr.STAT_EVENT,a),this.stat=n}function Xn(a){const n=hr();Wt(n,new Cs(n,a))}function no(a,n){Xt.call(this,kr.Na,a),this.size=n}function Gi(a,n){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return ye.setTimeout(function(){a()},n)}kr.Ma="serverreachability",wt(Fr,Xt),kr.STAT_EVENT="statevent",wt(Cs,Xt),kr.Na="timingevent",wt(no,Xt);var xo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Xo={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function yo(){}function Bs(){}yo.prototype.h=null;var _o,js={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function as(){Xt.call(this,"d")}function No(){Xt.call(this,"c")}function zr(){}function Wi(a,n,o,l){this.l=a,this.j=n,this.m=o,this.X=l||1,this.V=new Hi(this),this.P=ro,this.W=new Ci(a=_s?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new qr}function qr(){this.i=null,this.g="",this.h=!1}wt(as,Xt),wt(No,Xt),wt(zr,yo),zr.prototype.g=function(){return new XMLHttpRequest},zr.prototype.i=function(){return{}},_o=new zr;var ro=45e3,bs={},Kr={};function io(a,n,o){a.K=1,a.v=S(K(n)),a.s=o,a.U=!0,Fi(a,null)}function Fi(a,n){a.F=Date.now(),us(a),a.A=K(a.v);var o=a.A,l=a.X;Array.isArray(l)||(l=[String(l)]),qt(o.h,"t",l),a.C=0,o=a.l.H,a.h=new qr,a.g=Rs(a.l,o?n:null,!a.s),0<a.O&&(a.L=new ss(Ft(a.Ia,a,a.g),a.O)),Wr(a.V,a.g,"readystatechange",a.gb),n=a.H?tt(a.H):{},a.s?(a.u||(a.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.s,n)):(a.u="GET",a.g.ea(a.A,a.u,null,n)),In(1),function(a,n,o,l,h,y){a.info(function(){if(a.g)if(y)for(var I="",k=y.split("&"),H=0;H<k.length;H++){var J=k[H].split("=");if(1<J.length){var re=J[0];J=J[1];var we=re.split("_");I=2<=we.length&&"type"==we[1]?I+(re+"=")+J+"&":I+(re+"=redacted&")}}else I=null;else I=y;return"XMLHTTP REQ ("+l+") [attempt "+h+"]: "+n+"\n"+o+"\n"+I})}(a.j,a.u,a.A,a.m,a.X,a.s)}function ya(a){return!!a.g&&"GET"==a.u&&2!=a.K&&a.l.Ba}function bi(a,n,o){let h,l=!0;for(;!a.I&&a.C<o.length;){if(h=zn(a,o),h==Kr){4==n&&(a.o=4,Xn(14),l=!1),jn(a.j,a.m,null,"[Incomplete Response]");break}if(h==bs){a.o=4,Xn(15),jn(a.j,a.m,o,"[Invalid Chunk]"),l=!1;break}jn(a.j,a.m,h,null),oi(a,h)}ya(a)&&h!=Kr&&h!=bs&&(a.h.g="",a.C=0),4!=n||0!=o.length||a.h.h||(a.o=1,Xn(16),l=!1),a.i=a.i&&l,l?0<o.length&&!a.aa&&(a.aa=!0,(n=a.l).g==a&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+o.length),Ca(n),n.L=!0,Xn(11))):(jn(a.j,a.m,o,"[Invalid Chunked Response]"),Ii(a),oo(a))}function zn(a,n){var o=a.C,l=n.indexOf("\n",o);return-1==l?Kr:(o=Number(n.substring(o,l)),isNaN(o)?bs:(l+=1)+o>n.length?Kr:(n=n.substr(l,o),a.C=l+o,n))}function us(a){a.Y=Date.now()+a.P,so(a,a.P)}function so(a,n){if(null!=a.B)throw Error("WatchDog timer not null");a.B=Gi(Ft(a.eb,a),n)}function Sr(a){a.B&&(ye.clearTimeout(a.B),a.B=null)}function oo(a){0==a.l.G||a.I||ta(a.l,a)}function Ii(a){Sr(a);var n=a.L;n&&"function"==typeof n.na&&n.na(),a.L=null,Oi(a.W),_r(a.V),a.g&&(n=a.g,a.g=null,n.abort(),n.na())}function oi(a,n){try{var o=a.l;if(0!=o.G&&(o.g==a||Ze(o.i,a)))if(o.I=a.N,!a.J&&Ze(o.i,a)&&3==o.G){try{var l=o.Ca.g.parse(n)}catch(J){l=null}if(Array.isArray(l)&&3==l.length){var h=l;if(0==h[0])e:if(o.u)o.ta=h[1],0<o.ta-o.U&&37500>h[2]&&o.N&&0==o.A&&!o.v&&(o.v=Gi(Ft(o.ab,o),6e3));else{if(o.g){if(!(o.g.F+3e3<a.F))break e;As(o),Eo(o)}Ya(o),Xn(18)}if(1>=Po(o.i)&&o.ka){try{o.ka()}catch(J){}o.ka=void 0}}else co(o,11)}else if((a.J||o.g==a)&&As(o),!Tn(n))for(h=o.Ca.g.parse(n),n=0;n<h.length;n++){let J=h[n];if(o.U=J[0],J=J[1],2==o.G)if("c"==J[0]){o.J=J[1],o.la=J[2];const re=J[3];null!=re&&(o.ma=re,o.h.info("VER="+o.ma));const we=J[4];null!=we&&(o.za=we,o.h.info("SVER="+o.za));const We=J[5];null!=We&&"number"==typeof We&&0<We&&(o.K=l=1.5*We,o.h.info("backChannelRequestTimeoutMs_="+l)),l=o;const et=a.g;if(et){const _t=et.g?et.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_t){var y=l.i;!y.g&&(hn(_t,"spdy")||hn(_t,"quic")||hn(_t,"h2"))&&(y.j=y.l,y.g=new Set,y.h&&(vn(y,y.h),y.h=null))}if(l.D){const Ut=et.g?et.g.getResponseHeader("X-HTTP-Session-Id"):null;Ut&&(l.sa=Ut,x(l.F,l.D,Ut))}}o.G=3,o.j&&o.j.xa(),o.$&&(o.O=Date.now()-a.F,o.h.info("Handshake RTT: "+o.O+"ms"));var I=a;if((l=o).oa=ho(l,l.H?l.la:null,l.W),I.J){Ga(l.i,I);var k=I,H=l.K;H&&k.setTimeout(H),k.B&&(Sr(k),us(k)),l.g=I}else uo(l);0<o.l.length&&Ts(o)}else"stop"!=J[0]&&"close"!=J[0]||co(o,7);else 3==o.G&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?co(o,7):wa(o):"noop"!=J[0]&&o.j&&o.j.wa(J),o.A=0)}In(4)}catch(J){}}function Zr(a,n){if(a.forEach&&"function"==typeof a.forEach)a.forEach(n,void 0);else if(Xe(a)||"string"==typeof a)un(a,n,void 0);else{if(a.T&&"function"==typeof a.T)var o=a.T();else if(a.R&&"function"==typeof a.R)o=void 0;else if(Xe(a)||"string"==typeof a){o=[];for(var l=a.length,h=0;h<l;h++)o.push(h)}else for(h in o=[],l=0,a)o[l++]=h;h=(l=function(a){if(a.R&&"function"==typeof a.R)return a.R();if("string"==typeof a)return a.split("");if(Xe(a)){for(var n=[],o=a.length,l=0;l<o;l++)n.push(a[l]);return n}for(l in n=[],o=0,a)n[o++]=a[l];return n}(a)).length;for(var y=0;y<h;y++)n.call(void 0,l[y],o&&o[y],a)}}function Di(a,n){this.h={},this.g=[],this.i=0;var o=arguments.length;if(1<o){if(o%2)throw Error("Uneven number of arguments");for(var l=0;l<o;l+=2)this.set(arguments[l],arguments[l+1])}else if(a)if(a instanceof Di)for(o=a.T(),l=0;l<o.length;l++)this.set(o[l],a.get(o[l]));else for(l in a)this.set(l,a[l])}function Yr(a){if(a.i!=a.g.length){for(var n=0,o=0;n<a.g.length;){var l=a.g[n];Ar(a.h,l)&&(a.g[o++]=l),n++}a.g.length=o}if(a.i!=a.g.length){var h={};for(o=n=0;n<a.g.length;)Ar(h,l=a.g[n])||(a.g[o++]=l,h[l]=1),n++;a.g.length=o}}function Ar(a,n){return Object.prototype.hasOwnProperty.call(a,n)}(fe=Wi.prototype).setTimeout=function(a){this.P=a},fe.gb=function(a){a=a.target;const n=this.L;n&&3==Ds(a)?n.l():this.Ia(a)},fe.Ia=function(a){try{if(a==this.g)e:{const re=Ds(this.g);var n=this.g.Da();const we=this.g.ba();if(!(3>re)&&(3!=re||_s||this.g&&(this.h.h||this.g.ga()||Lo(this.g)))){this.I||4!=re||7==n||In(8==n||0>=we?3:2),Sr(this);var o=this.g.ba();this.N=o;t:if(ya(this)){var l=Lo(this.g);a="";var h=l.length,y=4==Ds(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ii(this),oo(this);var I="";break t}this.h.i=new ye.TextDecoder}for(n=0;n<h;n++)this.h.h=!0,a+=this.h.i.decode(l[n],{stream:y&&n==h-1});l.splice(0,h),this.h.g+=a,this.C=0,I=this.h.g}else I=this.g.ga();if(this.i=200==o,function(a,n,o,l,h,y,I){a.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+h+"]: "+n+"\n"+o+"\n"+y+" "+I})}(this.j,this.u,this.A,this.m,this.X,re,o),this.i){if(this.$&&!this.J){t:{if(this.g){var k,H=this.g;if((k=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tn(k)){var J=k;break t}}J=null}if(!(o=J)){this.i=!1,this.o=3,Xn(12),Ii(this),oo(this);break e}jn(this.j,this.m,o,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,oi(this,o)}this.U?(bi(this,re,I),_s&&this.i&&3==re&&(Wr(this.V,this.W,"tick",this.fb),this.W.start())):(jn(this.j,this.m,I,null),oi(this,I)),4==re&&Ii(this),this.i&&!this.I&&(4==re?ta(this.l,this):(this.i=!1,us(this)))}else 400==o&&0<I.indexOf("Unknown SID")?(this.o=3,Xn(12)):(this.o=0,Xn(13)),Ii(this),oo(this)}}}catch(re){}},fe.fb=function(){if(this.g){var a=Ds(this.g),n=this.g.ga();this.C<n.length&&(Sr(this),bi(this,a,n),this.i&&4!=a&&us(this))}},fe.cancel=function(){this.I=!0,Ii(this)},fe.eb=function(){this.B=null;const a=Date.now();0<=a-this.Y?(function(a,n){a.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(In(3),Xn(17)),Ii(this),this.o=2,oo(this)):so(this,this.Y-a)},(fe=Di.prototype).R=function(){Yr(this);for(var a=[],n=0;n<this.g.length;n++)a.push(this.h[this.g[n]]);return a},fe.T=function(){return Yr(this),this.g.concat()},fe.get=function(a,n){return Ar(this.h,a)?this.h[a]:n},fe.set=function(a,n){Ar(this.h,a)||(this.i++,this.g.push(a)),this.h[a]=n},fe.forEach=function(a,n){for(var o=this.T(),l=0;l<o.length;l++){var h=o[l],y=this.get(h);a.call(n,y,h,this)}};var L=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function F(a,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,a instanceof F){this.g=void 0!==n?n:a.g,le(this,a.j),this.s=a.s,ke(this,a.i),rt(this,a.m),this.l=a.l,n=a.h;var o=new gi;o.i=n.i,n.g&&(o.g=new Di(n.g),o.h=n.h),P(this,o),this.o=a.o}else a&&(o=String(a).match(L))?(this.g=!!n,le(this,o[1]||"",!0),this.s=nt(o[2]||""),ke(this,o[3]||"",!0),rt(this,o[4]),this.l=nt(o[5]||"",!0),P(this,o[6]||"",!0),this.o=nt(o[7]||"")):(this.g=!!n,this.h=new gi(null,this.g))}function K(a){return new F(a)}function le(a,n,o){a.j=o?nt(n,!0):n,a.j&&(a.j=a.j.replace(/:$/,""))}function ke(a,n,o){a.i=o?nt(n,!0):n}function rt(a,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);a.m=n}else a.m=null}function P(a,n,o){n instanceof gi?(a.h=n,function(a,n){n&&!a.j&&(Vr(a),a.i=null,a.g.forEach(function(o,l){var h=l.toLowerCase();l!=h&&(ai(this,l),qt(this,h,o))},a)),a.j=n}(a.h,a.g)):(o||(n=Dt(n,pi)),a.h=new gi(n,a.g))}function x(a,n,o){a.h.set(n,o)}function S(a){return x(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function nt(a,n){return a?n?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Dt(a,n,o){return"string"==typeof a?(a=encodeURI(a).replace(n,xn),o&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function xn(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}F.prototype.toString=function(){var a=[],n=this.j;n&&a.push(Dt(n,Lr,!0),":");var o=this.i;return(o||"file"==n)&&(a.push("//"),(n=this.s)&&a.push(Dt(n,Lr,!0),"@"),a.push(encodeURIComponent(String(o)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(o=this.m)&&a.push(":",String(o))),(o=this.l)&&(this.i&&"/"!=o.charAt(0)&&a.push("/"),a.push(Dt(o,"/"==o.charAt(0)?Nn:Qr,!0))),(o=this.h.toString())&&a.push("?",o),(o=this.o)&&a.push("#",Dt(o,Is)),a.join("")};var Lr=/[#\/\?@]/g,Qr=/[#\?:]/g,Nn=/[#\?]/g,pi=/[#\?@]/g,Is=/#/g;function gi(a,n){this.h=this.g=null,this.i=a||null,this.j=!!n}function Vr(a){a.g||(a.g=new Di,a.h=0,a.i&&function(a,n){if(a){a=a.split("&");for(var o=0;o<a.length;o++){var l=a[o].indexOf("="),h=null;if(0<=l){var y=a[o].substring(0,l);h=a[o].substring(l+1)}else y=a[o];n(y,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(a.i,function(n,o){a.add(decodeURIComponent(n.replace(/\+/g," ")),o)}))}function ai(a,n){Vr(a),n=_a(a,n),Ar(a.g.h,n)&&(a.i=null,a.h-=a.g.get(n).length,Ar((a=a.g).h,n)&&(delete a.h[n],a.i--,a.g.length>2*a.i&&Yr(a)))}function Mo(a,n){return Vr(a),n=_a(a,n),Ar(a.g.h,n)}function qt(a,n,o){ai(a,n),0<o.length&&(a.i=null,a.g.set(_a(a,n),Dn(o)),a.h+=o.length)}function _a(a,n){return n=String(n),a.j&&(n=n.toLowerCase()),n}function Jr(a){this.l=a||Oo,a=ye.PerformanceNavigationTiming?0<(a=ye.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):!!(ye.g&&ye.g.Ea&&ye.g.Ea()&&ye.g.Ea().Zb),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=gi.prototype).add=function(a,n){Vr(this),this.i=null,a=_a(this,a);var o=this.g.get(a);return o||this.g.set(a,o=[]),o.push(n),this.h+=1,this},fe.forEach=function(a,n){Vr(this),this.g.forEach(function(o,l){un(o,function(h){a.call(n,h,l,this)},this)},this)},fe.T=function(){Vr(this);for(var a=this.g.R(),n=this.g.T(),o=[],l=0;l<n.length;l++)for(var h=a[l],y=0;y<h.length;y++)o.push(n[l]);return o},fe.R=function(a){Vr(this);var n=[];if("string"==typeof a)Mo(this,a)&&(n=yr(n,this.g.get(_a(this,a))));else{a=this.g.R();for(var o=0;o<a.length;o++)n=yr(n,a[o])}return n},fe.set=function(a,n){return Vr(this),this.i=null,Mo(this,a=_a(this,a))&&(this.h-=this.g.get(a).length),this.g.set(a,[n]),this.h+=1,this},fe.get=function(a,n){return a&&0<(a=this.R(a)).length?String(a[0]):n},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var a=[],n=this.g.T(),o=0;o<n.length;o++){var l=n[o],h=encodeURIComponent(String(l));l=this.R(l);for(var y=0;y<l.length;y++){var I=h;""!==l[y]&&(I+="="+encodeURIComponent(String(l[y]))),a.push(I)}}return this.i=a.join("&")};var Oo=10;function Ha(a){return!!a.h||!!a.g&&a.g.size>=a.j}function Po(a){return a.h?1:a.g?a.g.size:0}function Ze(a,n){return a.h?a.h==n:!!a.g&&a.g.has(n)}function vn(a,n){a.g?a.g.add(n):a.h=n}function Ga(a,n){a.h&&a.h==n?a.h=null:a.g&&a.g.has(n)&&a.g.delete(n)}function Zn(a){if(null!=a.h)return a.i.concat(a.h.D);if(null!=a.g&&0!==a.g.size){let n=a.i;for(const o of a.g.values())n=n.concat(o.D);return n}return Dn(a.i)}function ea(){}function $s(){this.g=new ea}function qi(a,n,o){const l=o||"";try{Zr(a,function(h,y){let I=h;Et(h)&&(I=Mi(h)),n.push(l+y+"="+encodeURIComponent(I))})}catch(h){throw n.push(l+"type="+encodeURIComponent("_badmap")),h}}function ls(a,n,o,l,h){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,h(l)}catch(y){}}function cs(a){this.l=a.$b||null,this.j=a.ib||!1}function Ti(a,n){Nt.call(this),this.D=a,this.u=n,this.m=void 0,this.readyState=ao,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jr.prototype.cancel=function(){if(this.i=Zn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const a of this.g.values())a.cancel();this.g.clear()}},ea.prototype.stringify=function(a){return ye.JSON.stringify(a,void 0)},ea.prototype.parse=function(a){return ye.JSON.parse(a,void 0)},wt(cs,yo),cs.prototype.g=function(){return new Ti(this.l,this.j)},cs.prototype.i=function(a){return function(){return a}}({}),wt(Ti,Nt);var ao=0;function ko(a){a.j.read().then(a.Sa.bind(a)).catch(a.ha.bind(a))}function Ur(a){a.readyState=4,a.l=null,a.j=null,a.A=null,vr(a)}function vr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}(fe=Ti.prototype).open=function(a,n){if(this.readyState!=ao)throw this.abort(),Error("Error reopening a connection");this.C=a,this.B=n,this.readyState=1,vr(this)},fe.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};a&&(n.body=a),(this.D||ye).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ur(this)),this.readyState=ao},fe.Va=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if("arraybuffer"===this.responseType)a.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ye.ReadableStream&&"body"in a){if(this.j=a.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ko(this)}else a.text().then(this.Ua.bind(this),this.ha.bind(this))},fe.Sa=function(a){if(this.g){if(this.u&&a.value)this.response.push(a.value);else if(!this.u){var n=a.value?a.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!a.done}))&&(this.response=this.responseText+=n)}a.done?Ur(this):vr(this),3==this.readyState&&ko(this)}},fe.Ua=function(a){this.g&&(this.response=this.responseText=a,Ur(this))},fe.Ta=function(a){this.g&&(this.response=a,Ur(this))},fe.ha=function(){this.g&&Ur(this)},fe.setRequestHeader=function(a,n){this.v.append(a,n)},fe.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],n=this.h.entries();for(var o=n.next();!o.done;)a.push((o=o.value)[0]+": "+o[1]),o=n.next();return a.join("\r\n")},Object.defineProperty(Ti.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(a){this.m=a?"include":"same-origin"}});var va=ye.JSON.parse;function $n(a){Nt.call(this),this.headers=new Di,this.u=a||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Hs,this.K=this.L=!1}wt($n,Nt);var Hs="",Wa=/^https?$/i,Wu=["POST","PUT"];function zu(a){return"content-type"==a.toLowerCase()}function Fo(a,n){a.h=!1,a.g&&(a.l=!0,a.g.abort(),a.l=!1),a.j=n,a.m=5,Ea(a),vo(a)}function Ea(a){a.D||(a.D=!0,Wt(a,"complete"),Wt(a,"error"))}function ds(a){if(a.h&&void 0!==Re&&(!a.C[1]||4!=Ds(a)||2!=a.ba()))if(a.v&&4==Ds(a))Tr(a.Fa,0,a);else if(Wt(a,"readystatechange"),4==Ds(a)){a.h=!1;try{const k=a.ba();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var o;if(!(o=n)){var l;if(l=0===k){var h=String(a.H).match(L)[1]||null;if(!h&&ye.self&&ye.self.location){var y=ye.self.location.protocol;h=y.substr(0,y.length-1)}l=!Wa.test(h?h.toLowerCase():"")}o=l}if(o)Wt(a,"complete"),Wt(a,"success");else{a.m=6;try{var I=2<Ds(a)?a.g.statusText:""}catch(H){I=""}a.j=I+" ["+a.ba()+"]",Ea(a)}}finally{vo(a)}}}function vo(a,n){if(a.g){Cu(a);const o=a.g,l=a.C[0]?Ce:null;a.g=null,a.C=null,n||Wt(a,"ready");try{o.onreadystatechange=l}catch(h){}}}function Cu(a){a.g&&a.K&&(a.g.ontimeout=null),a.A&&(ye.clearTimeout(a.A),a.A=null)}function Ds(a){return a.g?a.g.readyState:0}function Lo(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.J){case Hs:case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch(n){return null}}function za(a,n,o){e:{for(l in o){var l=!1;break e}l=!0}l||(o=function(a){let n="";return Bt(a,function(o,l){n+=l,n+=":",n+=o,n+="\r\n"}),n}(o),"string"==typeof a?null!=o&&encodeURIComponent(String(o)):x(a,n,o))}function Br(a,n,o){return o&&o.internalChannelParams&&o.internalChannelParams[a]||n}function qa(a){this.za=0,this.l=[],this.h=new Pi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Br("failFast",!1,a),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Br("baseRetryDelayMs",5e3,a),this.$a=Br("retryDelaySeedMs",1e4,a),this.Ya=Br("forwardChannelMaxRetries",2,a),this.ra=Br("forwardChannelRequestTimeoutMs",2e4,a),this.qa=a&&a.xmlHttpFactory||void 0,this.Ba=a&&a.Yb||!1,this.K=void 0,this.H=a&&a.supportsCrossDomainXhr||!1,this.J="",this.i=new Jr(a&&a.concurrentRequestLimit),this.Ca=new $s,this.ja=a&&a.fastHandshake||!1,this.Ra=a&&a.Wb||!1,a&&a.Aa&&this.h.Aa(),a&&a.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&a&&a.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!a||!1!==a.Xb}function wa(a){if(Ka(a),3==a.G){var n=a.V++,o=K(a.F);x(o,"SID",a.J),x(o,"RID",n),x(o,"TYPE","terminate"),wo(a,o),(n=new Wi(a,a.h,n,void 0)).K=2,n.v=S(K(o)),o=!1,ye.navigator&&ye.navigator.sendBeacon&&(o=ye.navigator.sendBeacon(n.v.toString(),"")),!o&&ye.Image&&((new Image).src=n.v,o=!0),o||(n.g=Rs(n.l,null),n.g.ea(n.v)),n.F=Date.now(),us(n)}Xr(a)}function Eo(a){a.g&&(Ca(a),a.g.cancel(),a.g=null)}function Ka(a){Eo(a),a.u&&(ye.clearTimeout(a.u),a.u=null),As(a),a.i.cancel(),a.m&&("number"==typeof a.m&&ye.clearTimeout(a.m),a.m=null)}function fr(a,n){a.l.push(new class{constructor(a,n){this.h=a,this.g=n}}(a.Za++,n)),3==a.G&&Ts(a)}function Ts(a){Ha(a.i)||a.m||(a.m=!0,zt(a.Ha,a),a.C=0)}function Ss(a,n){var o;o=n?n.m:a.V++;const l=K(a.F);x(l,"SID",a.J),x(l,"RID",o),x(l,"AID",a.U),wo(a,l),a.o&&a.s&&za(l,a.o,a.s),o=new Wi(a,a.h,o,a.C+1),null===a.o&&(o.H=a.s),n&&(a.l=n.D.concat(a.l)),n=Za(a,o,1e3),o.setTimeout(Math.round(.5*a.ra)+Math.round(.5*a.ra*Math.random())),vn(a.i,o),io(o,l,n)}function wo(a,n){a.j&&Zr({},function(o,l){x(n,l,o)})}function Za(a,n,o){o=Math.min(a.l.length,o);var l=a.j?Ft(a.j.Oa,a.j,a):null;e:{var h=a.l;let y=-1;for(;;){const I=["count="+o];-1==y?0<o?(y=h[0].h,I.push("ofs="+y)):y=0:I.push("ofs="+y);let k=!0;for(let H=0;H<o;H++){let J=h[H].h;const re=h[H].g;if(J-=y,0>J)y=Math.max(0,h[H].h-100),k=!1;else try{qi(re,I,"req"+J+"_")}catch(we){l&&l(re)}}if(k){l=I.join("&");break e}}}return a=a.l.splice(0,o),n.D=a,l}function uo(a){a.g||a.u||(a.Y=1,zt(a.Ga,a),a.A=0)}function Ya(a){return!(a.g||a.u||3<=a.A||(a.Y++,a.u=Gi(Ft(a.Ga,a),lo(a,a.A)),a.A++,0))}function Ca(a){null!=a.B&&(ye.clearTimeout(a.B),a.B=null)}function Vo(a){a.g=new Wi(a,a.h,"rpc",a.Y),null===a.o&&(a.g.H=a.s),a.g.O=0;var n=K(a.oa);x(n,"RID","rpc"),x(n,"SID",a.J),x(n,"CI",a.N?"0":"1"),x(n,"AID",a.U),wo(a,n),x(n,"TYPE","xmlhttp"),a.o&&a.s&&za(n,a.o,a.s),a.K&&a.g.setTimeout(a.K);var o=a.g;a=a.la,o.K=1,o.v=S(K(n)),o.s=null,o.U=!0,Fi(o,a)}function As(a){null!=a.v&&(ye.clearTimeout(a.v),a.v=null)}function ta(a,n){var o=null;if(a.g==n){As(a),Ca(a),a.g=null;var l=2}else{if(!Ze(a.i,n))return;o=n.D,Ga(a.i,n),l=1}if(a.I=n.N,0!=a.G)if(n.i)if(1==l){o=n.s?n.s.length:0,n=Date.now()-n.F;var h=a.C;Wt(l=hr(),new no(l,o,n,h)),Ts(a)}else uo(a);else if(3==(h=n.o)||0==h&&0<a.I||!(1==l&&function(a,n){return!(Po(a.i)>=a.i.j-(a.m?1:0)||(a.m?(a.l=n.D.concat(a.l),0):1==a.G||2==a.G||a.C>=(a.Xa?0:a.Ya)||(a.m=Gi(Ft(a.Ha,a,n),lo(a,a.C)),a.C++,0)))}(a,n)||2==l&&Ya(a)))switch(o&&0<o.length&&(n=a.i,n.i=n.i.concat(o)),h){case 1:co(a,5);break;case 4:co(a,10);break;case 3:co(a,6);break;default:co(a,2)}}function lo(a,n){let o=a.Pa+Math.floor(Math.random()*a.$a);return a.j||(o*=2),o*n}function co(a,n){if(a.h.info("Error code "+n),2==n){var o=null;a.j&&(o=null);var l=Ft(a.jb,a);o||(o=new F("//www.google.com/images/cleardot.gif"),ye.location&&"http"==ye.location.protocol||le(o,"https"),S(o)),function(a,n){const o=new Pi;if(ye.Image){const l=new Image;l.onload=rn(ls,o,l,"TestLoadImage: loaded",!0,n),l.onerror=rn(ls,o,l,"TestLoadImage: error",!1,n),l.onabort=rn(ls,o,l,"TestLoadImage: abort",!1,n),l.ontimeout=rn(ls,o,l,"TestLoadImage: timeout",!1,n),ye.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=a}else n(!1)}(o.toString(),l)}else Xn(2);a.G=0,a.j&&a.j.va(n),Xr(a),Ka(a)}function Xr(a){a.G=0,a.I=-1,a.j&&((0!=Zn(a.i).length||0!=a.l.length)&&(a.i.i.length=0,Dn(a.l),a.l.length=0),a.j.ua())}function ho(a,n,o){let l=function(a){return a instanceof F?K(a):new F(a,void 0)}(o);if(""!=l.i)n&&ke(l,n+"."+l.i),rt(l,l.m);else{const h=ye.location;l=function(a,n,o,l){var h=new F(null,void 0);return a&&le(h,a),n&&ke(h,n),o&&rt(h,o),l&&(h.l=l),h}(h.protocol,n?n+"."+h.hostname:h.hostname,+h.port,o)}return a.aa&&Bt(a.aa,function(h,y){x(l,y,h)}),o=a.sa,(n=a.D)&&o&&x(l,n,o),x(l,"VER",a.ma),wo(a,l),l}function Rs(a,n,o){if(n&&!a.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new $n(o&&a.Ba&&!a.qa?new cs({ib:!0}):a.qa)).L=a.H,n}function Qa(){}function Gs(){if(St&&!(10<=Number(nn)))throw Error("Environmental error: no available transport.")}function Er(a,n){Nt.call(this),this.g=new qa(n),this.l=a,this.h=n&&n.messageUrlParams||null,a=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.s=a,a=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(a?a["X-WebChannel-Content-Type"]=n.messageContentType:a={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(a?a["X-WebChannel-Client-Profile"]=n.ya:a={"X-WebChannel-Client-Profile":n.ya}),this.g.P=a,(a=n&&n.httpHeadersOverwriteParam)&&!Tn(a)&&(this.g.o=a),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!Tn(n)&&(this.g.D=n,null!==(a=this.h)&&n in a&&n in(a=this.h)&&delete a[n]),this.j=new fo(this)}function hs(a){as.call(this);var n=a.__sm__;if(n){e:{for(const o in n){a=o;break e}a=void 0}(this.i=a)&&(a=this.i,n=null!==n&&a in n?n[a]:void 0),this.data=n}else this.data=a}function qu(){No.call(this),this.status=1}function fo(a){this.g=a}(fe=$n.prototype).ea=function(a,n,o,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+a);n=n?n.toUpperCase():"GET",this.H=a,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_o.g(),this.C=function(a){return a.h||(a.h=a.i())}(this.u?this.u:_o),this.g.onreadystatechange=Ft(this.Fa,this);try{this.F=!0,this.g.open(n,String(a),!0),this.F=!1}catch(y){return void Fo(this,y)}a=o||"";const h=new Di(this.headers);l&&Zr(l,function(y,I){h.set(I,y)}),l=function(a){e:{var n=zu;const o=a.length,l="string"==typeof a?a.split(""):a;for(let h=0;h<o;h++)if(h in l&&n.call(void 0,l[h],h,a)){n=h;break e}n=-1}return 0>n?null:"string"==typeof a?a.charAt(n):a[n]}(h.T()),o=ye.FormData&&a instanceof ye.FormData,!(0<=Fn(Wu,n))||l||o||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(y,I){this.g.setRequestHeader(I,y)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Cu(this),0<this.B&&((this.K=function(a){return St&&Pe()&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ft(this.pa,this)):this.A=Tr(this.pa,this.B,this)),this.v=!0,this.g.send(a),this.v=!1}catch(y){Fo(this,y)}},fe.pa=function(){void 0!==Re&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wt(this,"timeout"),this.abort(8))},fe.abort=function(a){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=a||7,Wt(this,"complete"),Wt(this,"abort"),vo(this))},fe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vo(this,!0)),$n.Z.M.call(this)},fe.Fa=function(){this.s||(this.F||this.v||this.l?ds(this):this.cb())},fe.cb=function(){ds(this)},fe.ba=function(){try{return 2<Ds(this)?this.g.status:-1}catch(a){return-1}},fe.ga=function(){try{return this.g?this.g.responseText:""}catch(a){return""}},fe.Qa=function(a){if(this.g){var n=this.g.responseText;return a&&0==n.indexOf(a)&&(n=n.substring(a.length)),va(n)}},fe.Da=function(){return this.m},fe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=qa.prototype).ma=8,fe.G=1,fe.hb=function(a){try{this.h.info("Origin Trials invoked: "+a)}catch(n){}},fe.Ha=function(a){if(this.m)if(this.m=null,1==this.G){if(!a){this.V=Math.floor(1e5*Math.random()),a=this.V++;const h=new Wi(this,this.h,a,void 0);let y=this.s;if(this.P&&(y?(y=tt(y),Bn(y,this.P)):y=this.P),null===this.o&&(h.H=y),this.ja)e:{for(var n=0,o=0;o<this.l.length;o++){var l=this.l[o];if(void 0===(l="__data__"in l.g&&"string"==typeof(l=l.g.__data__)?l.length:void 0))break;if(4096<(n+=l)){n=o;break e}if(4096===n||o===this.l.length-1){n=o+1;break e}}n=1e3}else n=1e3;n=Za(this,h,n),x(o=K(this.F),"RID",a),x(o,"CVER",22),this.D&&x(o,"X-HTTP-Session-Id",this.D),wo(this,o),this.o&&y&&za(o,this.o,y),vn(this.i,h),this.Ra&&x(o,"TYPE","init"),this.ja?(x(o,"$req",n),x(o,"SID","null"),h.$=!0,io(h,o,null)):io(h,o,n),this.G=2}}else 3==this.G&&(a?Ss(this,a):0==this.l.length||Ha(this.i)||Ss(this))},fe.Ga=function(){if(this.u=null,Vo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var a=2*this.O;this.h.info("BP detection timer enabled: "+a),this.B=Gi(Ft(this.bb,this),a)}},fe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Xn(10),Eo(this),Vo(this))},fe.ab=function(){null!=this.v&&(this.v=null,Eo(this),Ya(this),Xn(19))},fe.jb=function(a){a?(this.h.info("Successfully pinged google.com"),Xn(2)):(this.h.info("Failed to ping google.com"),Xn(1))},(fe=Qa.prototype).xa=function(){},fe.wa=function(){},fe.va=function(){},fe.ua=function(){},fe.Oa=function(){},Gs.prototype.g=function(a,n){return new Er(a,n)},wt(Er,Nt),Er.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var a=this.g,n=this.l,o=this.h||void 0;a.Wa&&(a.h.info("Origin Trials enabled."),zt(Ft(a.hb,a,n))),Xn(0),a.W=n,a.aa=o||{},a.N=a.X,a.F=ho(a,null,a.W),Ts(a)},Er.prototype.close=function(){wa(this.g)},Er.prototype.u=function(a){if("string"==typeof a){var n={};n.__data__=a,fr(this.g,n)}else this.v?((n={}).__data__=Mi(a),fr(this.g,n)):fr(this.g,a)},Er.prototype.M=function(){this.g.j=null,delete this.j,wa(this.g),delete this.g,Er.Z.M.call(this)},wt(hs,as),wt(qu,No),wt(fo,Qa),fo.prototype.xa=function(){Wt(this.g,"a")},fo.prototype.wa=function(a){Wt(this.g,new hs(a))},fo.prototype.va=function(a){Wt(this.g,new qu(a))},fo.prototype.ua=function(){Wt(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,Er.prototype.send=Er.prototype.u,Er.prototype.open=Er.prototype.m,Er.prototype.close=Er.prototype.close,xo.NO_ERROR=0,xo.TIMEOUT=8,xo.HTTP_ERROR=6,Xo.COMPLETE="complete",Bs.EventType=js,js.OPEN="a",js.CLOSE="b",js.ERROR="c",js.MESSAGE="d",Nt.prototype.listen=Nt.prototype.N,$n.prototype.listenOnce=$n.prototype.O,$n.prototype.getLastError=$n.prototype.La,$n.prototype.getLastErrorCode=$n.prototype.Da,$n.prototype.getStatus=$n.prototype.ba,$n.prototype.getResponseJson=$n.prototype.Qa,$n.prototype.getResponseText=$n.prototype.ga,$n.prototype.send=$n.prototype.ea;var Ja=Le.createWebChannelTransport=function(){return new Gs},Iu=Le.getStatEventTarget=function(){return hr()},tr=Le.ErrorCode=xo,Du=Le.EventType=Xo,Uo=Le.Event=kr,na=Le.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ku=Le.FetchXmlHttpFactory=cs,xs=Le.WebChannel=Bs,Bo=Le.XhrIo=$n;class ei{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}ei.UNAUTHENTICATED=new ei(null),ei.GOOGLE_CREDENTIALS=new ei("google-credentials-uid"),ei.FIRST_PARTY=new ei("first-party-uid"),ei.MOCK_USER=new ei("mock-user");let Ns="9.1.0";const Ki=new Zt.Yd("@firebase/firestore");function jo(){return Ki.logLevel}function at(a,...n){if(Ki.logLevel<=Zt.in.DEBUG){const o=n.map(eu);Ki.debug(`Firestore (${Ns}): ${a}`,...o)}}function wr(a,...n){if(Ki.logLevel<=Zt.in.ERROR){const o=n.map(eu);Ki.error(`Firestore (${Ns}): ${a}`,...o)}}function $o(a,...n){if(Ki.logLevel<=Zt.in.WARN){const o=n.map(eu);Ki.warn(`Firestore (${Ns}): ${a}`,...o)}}function eu(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch(o){return a}}function Rt(a="Unexpected state"){const n=`FIRESTORE (${Ns}) INTERNAL ASSERTION FAILED: `+a;throw wr(n),new Error(n)}function Ht(a,n){a||Rt()}function ft(a,n){return a}const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends Error{constructor(n,o){super(o),this.code=n,this.message=o,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jr{constructor(){this.promise=new Promise((n,o)=>{this.resolve=n,this.reject=o})}}class Ho{constructor(n,o){this.user=o,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${n}`}}class A{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,o){n.enqueueRetryable(()=>o(ei.UNAUTHENTICATED))}shutdown(){}}class C{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,o){this.changeListener=o,n.enqueueRetryable(()=>o(this.token.user))}shutdown(){this.changeListener=null}}class E{constructor(n){this.t=n,this.currentUser=ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,o){var l=this;let h=this.i;const y=J=>this.i!==h?(h=this.i,o(J)):Promise.resolve();let I=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new jr,n.enqueueRetryable(()=>y(this.currentUser))};const k=()=>{const J=I;n.enqueueRetryable((0,se.Z)(function*(){yield J.promise,yield y(l.currentUser)}))},H=J=>{at("FirebaseCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),k()};this.t.onInit(J=>H(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?H(J):(at("FirebaseCredentialsProvider","Auth not yet detected"),I.resolve(),I=new jr)}},0),k()}getToken(){const n=this.i,o=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(o).then(l=>this.i!==n?(at("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):l?(Ht("string"==typeof l.accessToken),new Ho(l.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return Ht(null===n||"string"==typeof n),new ei(n)}}class O{constructor(n,o,l){this.h=n,this.l=o,this.m=l,this.type="FirstParty",this.user=ei.FIRST_PARTY}get authHeaders(){const n={"X-Goog-AuthUser":this.l},o=this.h.auth.getAuthHeaderValueForFirstParty([]);return o&&(n.Authorization=o),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}class V{constructor(n,o,l){this.h=n,this.l=o,this.m=l}getToken(){return Promise.resolve(new O(this.h,this.l,this.m))}start(n,o){n.enqueueRetryable(()=>o(ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=l=>this.g(l),this.p=l=>o.writeSequenceNumber(l))}g(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.p&&this.p(n),n}}function ie(a){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),o=new Uint8Array(a);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(o);else for(let l=0;l<a;l++)o[l]=Math.floor(256*Math.random());return o}q.T=-1;class pe{static I(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=Math.floor(256/n.length)*n.length;let l="";for(;l.length<20;){const h=ie(40);for(let y=0;y<h.length;++y)l.length<20&&h[y]<o&&(l+=n.charAt(h[y]%n.length))}return l}}function Me(a,n){return a<n?-1:a>n?1:0}function pt(a,n,o){return a.length===n.length&&a.every((l,h)=>o(l,n[h]))}function Cn(a){return a+"\0"}class It{constructor(n,o){if(this.seconds=n,this.nanoseconds=o,o<0)throw new Ye(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+o);if(o>=1e9)throw new Ye(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+o);if(n<-62135596800)throw new Ye(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new Ye(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return It.fromMillis(Date.now())}static fromDate(n){return It.fromMillis(n.getTime())}static fromMillis(n){const o=Math.floor(n/1e3),l=Math.floor(1e6*(n-1e3*o));return new It(o,l)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?Me(this.nanoseconds,n.nanoseconds):Me(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(n){this.timestamp=n}static fromTimestamp(n){return new Tt(n)}static min(){return new Tt(new It(0,0))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function sn(a){let n=0;for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&n++;return n}function ti(a,n){for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&n(o,a[o])}function Si(a){for(const n in a)if(Object.prototype.hasOwnProperty.call(a,n))return!1;return!0}class ni{constructor(n,o,l){void 0===o?o=0:o>n.length&&Rt(),void 0===l?l=n.length-o:l>n.length-o&&Rt(),this.segments=n,this.offset=o,this.len=l}get length(){return this.len}isEqual(n){return 0===ni.comparator(this,n)}child(n){const o=this.segments.slice(this.offset,this.limit());return n instanceof ni?n.forEach(l=>{o.push(l)}):o.push(n),this.construct(o)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let o=0;o<this.length;o++)if(this.get(o)!==n.get(o))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let o=0;o<this.length;o++)if(this.get(o)!==n.get(o))return!1;return!0}forEach(n){for(let o=this.offset,l=this.limit();o<l;o++)n(this.segments[o])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,o){const l=Math.min(n.length,o.length);for(let h=0;h<l;h++){const y=n.get(h),I=o.get(h);if(y<I)return-1;if(y>I)return 1}return n.length<o.length?-1:n.length>o.length?1:0}}class yn extends ni{construct(n,o,l){return new yn(n,o,l)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const o=[];for(const l of n){if(l.indexOf("//")>=0)throw new Ye(Be.INVALID_ARGUMENT,`Invalid segment (${l}). Paths must not contain // in them.`);o.push(...l.split("/").filter(h=>h.length>0))}return new yn(o)}static emptyPath(){return new yn([])}}const Ai=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends ni{construct(n,o,l){return new nr(n,o,l)}static isValidIdentifier(n){return Ai.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nr(["__name__"])}static fromServerFormat(n){const o=[];let l="",h=0;const y=()=>{if(0===l.length)throw new Ye(Be.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);o.push(l),l=""};let I=!1;for(;h<n.length;){const k=n[h];if("\\"===k){if(h+1===n.length)throw new Ye(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const H=n[h+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new Ye(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);l+=H,h+=2}else"`"===k?(I=!I,h++):"."!==k||I?(l+=k,h++):(y(),h++)}if(y(),I)throw new Ye(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new nr(o)}static emptyPath(){return new nr([])}}class Go{constructor(n){this.fields=n,n.sort(nr.comparator)}covers(n){for(const o of this.fields)if(o.isPrefixOf(n))return!0;return!1}isEqual(n){return pt(this.fields,n.fields,(o,l)=>o.isEqual(l))}}class T{constructor(n){this.binaryString=n}static fromBase64String(n){const o=atob(n);return new T(o)}static fromUint8Array(n){const o=function(l){let h="";for(let y=0;y<l.length;++y)h+=String.fromCharCode(l[y]);return h}(n);return new T(o)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let l=0;l<n.length;l++)o[l]=n.charCodeAt(l);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return Me(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}T.EMPTY_BYTE_STRING=new T("");const M=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $(a){if(Ht(!!a),"string"==typeof a){let n=0;const o=M.exec(a);if(Ht(!!o),o[1]){let h=o[1];h=(h+"000000000").substr(0,9),n=Number(h)}const l=new Date(a);return{seconds:Math.floor(l.getTime()/1e3),nanos:n}}return{seconds:Q(a.seconds),nanos:Q(a.nanos)}}function Q(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function Ie(a){return"string"==typeof a?T.fromBase64String(a):T.fromUint8Array(a)}function je(a){var n,o;return"server_timestamp"===(null===(o=((null===(n=null==a?void 0:a.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===o?void 0:o.stringValue)}function At(a){const n=a.mapValue.fields.__previous_value__;return je(n)?At(n):n}function gt(a){const n=$(a.mapValue.fields.__local_write_time__.timestampValue);return new It(n.seconds,n.nanos)}function Lt(a){return null==a}function gn(a){return 0===a&&1/a==-1/0}function pr(a){return"number"==typeof a&&Number.isInteger(a)&&!gn(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}class mt{constructor(n){this.path=n}static fromPath(n){return new mt(yn.fromString(n))}static fromName(n){return new mt(yn.fromString(n).popFirst(5))}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}isEqual(n){return null!==n&&0===yn.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,o){return yn.comparator(n.path,o.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new mt(new yn(n.slice()))}}function Yn(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?je(a)?4:10:Rt()}function En(a,n){const o=Yn(a);if(o!==Yn(n))return!1;switch(o){case 0:return!0;case 1:return a.booleanValue===n.booleanValue;case 4:return gt(a).isEqual(gt(n));case 3:return function(l,h){if("string"==typeof l.timestampValue&&"string"==typeof h.timestampValue&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const y=$(l.timestampValue),I=$(h.timestampValue);return y.seconds===I.seconds&&y.nanos===I.nanos}(a,n);case 5:return a.stringValue===n.stringValue;case 6:return h=n,Ie(a.bytesValue).isEqual(Ie(h.bytesValue));case 7:return a.referenceValue===n.referenceValue;case 8:return function(l,h){return Q(l.geoPointValue.latitude)===Q(h.geoPointValue.latitude)&&Q(l.geoPointValue.longitude)===Q(h.geoPointValue.longitude)}(a,n);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return Q(l.integerValue)===Q(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const y=Q(l.doubleValue),I=Q(h.doubleValue);return y===I?gn(y)===gn(I):isNaN(y)&&isNaN(I)}return!1}(a,n);case 9:return pt(a.arrayValue.values||[],n.arrayValue.values||[],En);case 10:return function(l,h){const y=l.mapValue.fields||{},I=h.mapValue.fields||{};if(sn(y)!==sn(I))return!1;for(const k in y)if(y.hasOwnProperty(k)&&(void 0===I[k]||!En(y[k],I[k])))return!1;return!0}(a,n);default:return Rt()}var h}function Rr(a,n){return void 0!==(a.values||[]).find(o=>En(o,n))}function fs(a,n){const o=Yn(a),l=Yn(n);if(o!==l)return Me(o,l);switch(o){case 0:return 0;case 1:return Me(a.booleanValue,n.booleanValue);case 2:return function(h,y){const I=Q(h.integerValue||h.doubleValue),k=Q(y.integerValue||y.doubleValue);return I<k?-1:I>k?1:I===k?0:isNaN(I)?isNaN(k)?0:-1:1}(a,n);case 3:return Wn(a.timestampValue,n.timestampValue);case 4:return Wn(gt(a),gt(n));case 5:return Me(a.stringValue,n.stringValue);case 6:return function(h,y){const I=Ie(h),k=Ie(y);return I.compareTo(k)}(a.bytesValue,n.bytesValue);case 7:return function(h,y){const I=h.split("/"),k=y.split("/");for(let H=0;H<I.length&&H<k.length;H++){const J=Me(I[H],k[H]);if(0!==J)return J}return Me(I.length,k.length)}(a.referenceValue,n.referenceValue);case 8:return function(h,y){const I=Me(Q(h.latitude),Q(y.latitude));return 0!==I?I:Me(Q(h.longitude),Q(y.longitude))}(a.geoPointValue,n.geoPointValue);case 9:return function(h,y){const I=h.values||[],k=y.values||[];for(let H=0;H<I.length&&H<k.length;++H){const J=fs(I[H],k[H]);if(J)return J}return Me(I.length,k.length)}(a.arrayValue,n.arrayValue);case 10:return function(h,y){const I=h.fields||{},k=Object.keys(I),H=y.fields||{},J=Object.keys(H);k.sort(),J.sort();for(let re=0;re<k.length&&re<J.length;++re){const we=Me(k[re],J[re]);if(0!==we)return we;const We=fs(I[k[re]],H[J[re]]);if(0!==We)return We}return Me(k.length,J.length)}(a.mapValue,n.mapValue);default:throw Rt()}}function Wn(a,n){if("string"==typeof a&&"string"==typeof n&&a.length===n.length)return Me(a,n);const o=$(a),l=$(n),h=Me(o.seconds,l.seconds);return 0!==h?h:Me(o.nanos,l.nanos)}function Ms(a){return ui(a)}function ui(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(l){const h=$(l);return`time(${h.seconds},${h.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?Ie(a.bytesValue).toBase64():"referenceValue"in a?mt.fromName(a.referenceValue).toString():"geoPointValue"in a?`geo(${(n=a.geoPointValue).latitude},${n.longitude})`:"arrayValue"in a?function(l){let h="[",y=!0;for(const I of l.values||[])y?y=!1:h+=",",h+=ui(I);return h+"]"}(a.arrayValue):"mapValue"in a?function(l){const h=Object.keys(l.fields||{}).sort();let y="{",I=!0;for(const k of h)I?I=!1:y+=",",y+=`${k}:${ui(l.fields[k])}`;return y+"}"}(a.mapValue):Rt();var n}function ri(a,n){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${n.path.canonicalString()}`}}function ra(a){return!!a&&"integerValue"in a}function li(a){return!!a&&"arrayValue"in a}function Zi(a){return!!a&&"nullValue"in a}function Wo(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function ps(a){return!!a&&"mapValue"in a}function Co(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const n={mapValue:{fields:{}}};return ti(a.mapValue.fields,(o,l)=>n.mapValue.fields[o]=Co(l)),n}if(a.arrayValue){const n={arrayValue:{values:[]}};for(let o=0;o<(a.arrayValue.values||[]).length;++o)n.arrayValue.values[o]=Co(a.arrayValue.values[o]);return n}return Object.assign({},a)}class Ri{constructor(n){this.value=n}static empty(){return new Ri({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let o=this.value;for(let l=0;l<n.length-1;++l)if(o=(o.mapValue.fields||{})[n.get(l)],!ps(o))return null;return o=(o.mapValue.fields||{})[n.lastSegment()],o||null}}set(n,o){this.getFieldsMap(n.popLast())[n.lastSegment()]=Co(o)}setAll(n){let o=nr.emptyPath(),l={},h=[];n.forEach((I,k)=>{if(!o.isImmediateParentOf(k)){const H=this.getFieldsMap(o);this.applyChanges(H,l,h),l={},h=[],o=k.popLast()}I?l[k.lastSegment()]=Co(I):h.push(k.lastSegment())});const y=this.getFieldsMap(o);this.applyChanges(y,l,h)}delete(n){const o=this.field(n.popLast());ps(o)&&o.mapValue.fields&&delete o.mapValue.fields[n.lastSegment()]}isEqual(n){return En(this.value,n.value)}getFieldsMap(n){let o=this.value;o.mapValue.fields||(o.mapValue={fields:{}});for(let l=0;l<n.length;++l){let h=o.mapValue.fields[n.get(l)];ps(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},o.mapValue.fields[n.get(l)]=h),o=h}return o.mapValue.fields}applyChanges(n,o,l){ti(o,(h,y)=>n[h]=y);for(const h of l)delete n[h]}clone(){return new Ri(Co(this.value))}}function uc(a){const n=[];return ti(a.fields,(o,l)=>{const h=new nr([o]);if(ps(l)){const y=uc(l.mapValue).fields;if(0===y.length)n.push(h);else for(const I of y)n.push(h.child(I))}else n.push(h)}),new Go(n)}class xr{constructor(n,o,l,h,y){this.key=n,this.documentType=o,this.version=l,this.data=h,this.documentState=y}static newInvalidDocument(n){return new xr(n,0,Tt.min(),Ri.empty(),0)}static newFoundDocument(n,o,l){return new xr(n,1,o,l,0)}static newNoDocument(n,o){return new xr(n,2,o,Ri.empty(),0)}static newUnknownDocument(n,o){return new xr(n,3,o,Ri.empty(),2)}convertToFoundDocument(n,o){return this.version=n,this.documentType=1,this.data=o,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof xr&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}clone(){return new xr(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uh{constructor(n,o=null,l=[],h=[],y=null,I=null,k=null){this.path=n,this.collectionGroup=o,this.orderBy=l,this.filters=h,this.limit=y,this.startAt=I,this.endAt=k,this.A=null}}function Ff(a,n=null,o=[],l=[],h=null,y=null,I=null){return new uh(a,n,o,l,h,y,I)}function Zu(a){const n=ft(a);if(null===n.A){let o=n.path.canonicalString();null!==n.collectionGroup&&(o+="|cg:"+n.collectionGroup),o+="|f:",o+=n.filters.map(l=>function(a){return a.field.canonicalString()+a.op.toString()+Ms(a.value)}(l)).join(","),o+="|ob:",o+=n.orderBy.map(l=>{return(h=l).field.canonicalString()+h.dir;var h}).join(","),Lt(n.limit)||(o+="|l:",o+=n.limit),n.startAt&&(o+="|lb:",o+=ia(n.startAt)),n.endAt&&(o+="|ub:",o+=ia(n.endAt)),n.A=o}return n.A}function tu(a,n){if(a.limit!==n.limit||a.orderBy.length!==n.orderBy.length)return!1;for(let h=0;h<a.orderBy.length;h++)if(!ru(a.orderBy[h],n.orderBy[h]))return!1;if(a.filters.length!==n.filters.length)return!1;for(let h=0;h<a.filters.length;h++)if((o=a.filters[h]).op!==(l=n.filters[h]).op||!o.field.isEqual(l.field)||!En(o.value,l.value))return!1;var o,l;return a.collectionGroup===n.collectionGroup&&!!a.path.isEqual(n.path)&&!!fc(a.startAt,n.startAt)&&fc(a.endAt,n.endAt)}function zo(a){return mt.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}class zs extends class{}{constructor(n,o,l){super(),this.field=n,this.op=o,this.value=l}static create(n,o,l){return n.isKeyField()?"in"===o||"not-in"===o?this.R(n,o,l):new lh(n,o,l):"array-contains"===o?new Uf(n,l):"in"===o?new Al(n,l):"not-in"===o?new Rl(n,l):"array-contains-any"===o?new dc(n,l):new zs(n,o,l)}static R(n,o,l){return"in"===o?new Lf(n,l):new Vf(n,l)}matches(n){const o=n.data.field(this.field);return"!="===this.op?null!==o&&this.P(fs(o,this.value)):null!==o&&Yn(this.value)===Yn(o)&&this.P(fs(o,this.value))}P(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return Rt()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class lh extends zs{constructor(n,o,l){super(n,o,l),this.key=mt.fromName(l.referenceValue)}matches(n){const o=mt.comparator(n.key,this.key);return this.P(o)}}class Lf extends zs{constructor(n,o){super(n,"in",o),this.keys=cc(0,o)}matches(n){return this.keys.some(o=>o.isEqual(n.key))}}class Vf extends zs{constructor(n,o){super(n,"not-in",o),this.keys=cc(0,o)}matches(n){return!this.keys.some(o=>o.isEqual(n.key))}}function cc(a,n){var o;return((null===(o=n.arrayValue)||void 0===o?void 0:o.values)||[]).map(l=>mt.fromName(l.referenceValue))}class Uf extends zs{constructor(n,o){super(n,"array-contains",o)}matches(n){const o=n.data.field(this.field);return li(o)&&Rr(o.arrayValue,this.value)}}class Al extends zs{constructor(n,o){super(n,"in",o)}matches(n){const o=n.data.field(this.field);return null!==o&&Rr(this.value.arrayValue,o)}}class Rl extends zs{constructor(n,o){super(n,"not-in",o)}matches(n){if(Rr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const o=n.data.field(this.field);return null!==o&&!Rr(this.value.arrayValue,o)}}class dc extends zs{constructor(n,o){super(n,"array-contains-any",o)}matches(n){const o=n.data.field(this.field);return!(!li(o)||!o.arrayValue.values)&&o.arrayValue.values.some(l=>Rr(this.value.arrayValue,l))}}class hc{constructor(n,o){this.position=n,this.before=o}}function ia(a){return`${a.before?"b":"a"}:${a.position.map(n=>Ms(n)).join(",")}`}class nu{constructor(n,o="asc"){this.field=n,this.dir=o}}function ru(a,n){return a.dir===n.dir&&a.field.isEqual(n.field)}function xl(a,n,o){let l=0;for(let h=0;h<a.position.length;h++){const y=n[h],I=a.position[h];if(l=y.field.isKeyField()?mt.comparator(mt.fromName(I.referenceValue),o.key):fs(I,o.data.field(y.field)),"desc"===y.dir&&(l*=-1),0!==l)break}return a.before?l<=0:l<0}function fc(a,n){if(null===a)return null===n;if(null===n||a.before!==n.before||a.position.length!==n.position.length)return!1;for(let o=0;o<a.position.length;o++)if(!En(a.position[o],n.position[o]))return!1;return!0}class sa{constructor(n,o=null,l=[],h=[],y=null,I="F",k=null,H=null){this.path=n,this.collectionGroup=o,this.explicitOrderBy=l,this.filters=h,this.limit=y,this.limitType=I,this.startAt=k,this.endAt=H,this.V=null,this.S=null}}function Yu(a,n,o,l,h,y,I,k){return new sa(a,n,o,l,h,y,I,k)}function Nl(a){return new sa(a)}function Tu(a){return!Lt(a.limit)&&"F"===a.limitType}function ba(a){return!Lt(a.limit)&&"L"===a.limitType}function Ia(a){return a.explicitOrderBy.length>0?a.explicitOrderBy[0].field:null}function Xc(a){for(const n of a.filters)if(n.v())return n.field;return null}function $r(a){return null!==a.collectionGroup}function Da(a){const n=ft(a);if(null===n.V){n.V=[];const o=Xc(n),l=Ia(n);if(null!==o&&null===l)o.isKeyField()||n.V.push(new nu(o)),n.V.push(new nu(nr.keyField(),"asc"));else{let h=!1;for(const y of n.explicitOrderBy)n.V.push(y),y.field.isKeyField()&&(h=!0);if(!h){const y=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.V.push(new nu(nr.keyField(),y))}}}return n.V}function qo(a){const n=ft(a);if(!n.S)if("F"===n.limitType)n.S=Ff(n.path,n.collectionGroup,Da(n),n.filters,n.limit,n.startAt,n.endAt);else{const o=[];for(const y of Da(n))o.push(new nu(y.field,"desc"===y.dir?"asc":"desc"));const l=n.endAt?new hc(n.endAt.position,!n.endAt.before):null,h=n.startAt?new hc(n.startAt.position,!n.startAt.before):null;n.S=Ff(n.path,n.collectionGroup,o,n.filters,n.limit,l,h)}return n.S}function iu(a,n,o){return new sa(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),n,o,a.startAt,a.endAt)}function Ta(a,n){return tu(qo(a),qo(n))&&a.limitType===n.limitType}function pc(a){return`${Zu(qo(a))}|lt:${a.limitType}`}function gc(a){return`Query(target=${function(a){let n=a.path.canonicalString();return null!==a.collectionGroup&&(n+=" collectionGroup="+a.collectionGroup),a.filters.length>0&&(n+=`, filters: [${a.filters.map(o=>{return`${(l=o).field.canonicalString()} ${l.op} ${Ms(l.value)}`;var l}).join(", ")}]`),Lt(a.limit)||(n+=", limit: "+a.limit),a.orderBy.length>0&&(n+=`, orderBy: [${a.orderBy.map(o=>{return`${(l=o).field.canonicalString()} (${l.dir})`;var l}).join(", ")}]`),a.startAt&&(n+=", startAt: "+ia(a.startAt)),a.endAt&&(n+=", endAt: "+ia(a.endAt)),`Target(${n})`}(qo(a))}; limitType=${a.limitType})`}function Qu(a,n){return n.isFoundDocument()&&function(o,l){const h=l.key.path;return null!==o.collectionGroup?l.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(h):mt.isDocumentKey(o.path)?o.path.isEqual(h):o.path.isImmediateParentOf(h)}(a,n)&&function(o,l){for(const h of o.explicitOrderBy)if(!h.field.isKeyField()&&null===l.data.field(h.field))return!1;return!0}(a,n)&&function(o,l){for(const h of o.filters)if(!h.matches(l))return!1;return!0}(a,n)&&(l=n,!((o=a).startAt&&!xl(o.startAt,Da(o),l)||o.endAt&&xl(o.endAt,Da(o),l)));var o,l}function ch(a){return(n,o)=>{let l=!1;for(const h of Da(a)){const y=Ju(h,n,o);if(0!==y)return y;l=l||h.field.isKeyField()}return 0}}function Ju(a,n,o){const l=a.field.isKeyField()?mt.comparator(n.key,o.key):function(h,y,I){const k=y.data.field(h),H=I.data.field(h);return null!==k&&null!==H?fs(k,H):Rt()}(a.field,n,o);switch(a.dir){case"asc":return l;case"desc":return-1*l;default:return Rt()}}function po(a,n){if(a.D){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gn(n)?"-0":n}}function Ml(a){return{integerValue:""+a}}function Sa(a,n){return pr(n)?Ml(n):po(a,n)}class mc{constructor(){this._=void 0}}function dh(a,n,o){return a instanceof Su?function(l,h){const y={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&(y.fields.__previous_value__=h),{mapValue:y}}(o,n):a instanceof Au?yc(a,n):a instanceof bo?Xu(a,n):function(l,h){const y=Ol(l,h),I=Bf(y)+Bf(l.C);return ra(y)&&ra(l.C)?Ml(I):po(l.N,I)}(a,n)}function ed(a,n,o){return a instanceof Au?yc(a,n):a instanceof bo?Xu(a,n):o}function Ol(a,n){return a instanceof el?ra(o=n)||(l=o)&&"doubleValue"in l?n:{integerValue:0}:null;var l,o}class Su extends mc{}class Au extends mc{constructor(n){super(),this.elements=n}}function yc(a,n){const o=td(n);for(const l of a.elements)o.some(h=>En(h,l))||o.push(l);return{arrayValue:{values:o}}}class bo extends mc{constructor(n){super(),this.elements=n}}function Xu(a,n){let o=td(n);for(const l of a.elements)o=o.filter(h=>!En(h,l));return{arrayValue:{values:o}}}class el extends mc{constructor(n,o){super(),this.N=n,this.C=o}}function Bf(a){return Q(a.integerValue||a.doubleValue)}function td(a){return li(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class tl{constructor(n,o){this.field=n,this.transform=o}}class jf{constructor(n,o){this.version=n,this.transformResults=o}}class mi{constructor(n,o){this.updateTime=n,this.exists=o}static none(){return new mi}static exists(n){return new mi(void 0,n)}static updateTime(n){return new mi(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function _c(a,n){return void 0!==a.updateTime?n.isFoundDocument()&&n.version.isEqual(a.updateTime):void 0===a.exists||a.exists===n.isFoundDocument()}class Aa{}function nd(a,n,o){a instanceof aa?function(l,h,y){const I=l.value.clone(),k=sd(l.fieldTransforms,h,y.transformResults);I.setAll(k),h.convertToFoundDocument(y.version,I).setHasCommittedMutations()}(a,n,o):a instanceof ua?function(l,h,y){if(!_c(l.precondition,h))return void h.convertToUnknownDocument(y.version);const I=sd(l.fieldTransforms,h,y.transformResults),k=h.data;k.setAll(id(l)),k.setAll(I),h.convertToFoundDocument(y.version,k).setHasCommittedMutations()}(a,n,o):n.convertToNoDocument(o.version).setHasCommittedMutations()}function oa(a,n,o){var h;a instanceof aa?function(l,h,y){if(!_c(l.precondition,h))return;const I=l.value.clone(),k=od(l.fieldTransforms,y,h);I.setAll(k),h.convertToFoundDocument(Hf(h),I).setHasLocalMutations()}(a,n,o):a instanceof ua?function(l,h,y){if(!_c(l.precondition,h))return;const I=od(l.fieldTransforms,y,h),k=h.data;k.setAll(id(l)),k.setAll(I),h.convertToFoundDocument(Hf(h),k).setHasLocalMutations()}(a,n,o):_c(a.precondition,h=n)&&h.convertToNoDocument(Tt.min())}function $f(a,n){let o=null;for(const l of a.fieldTransforms){const h=n.data.field(l.field),y=Ol(l.transform,h||null);null!=y&&(null==o&&(o=Ri.empty()),o.set(l.field,y))}return o||null}function rd(a,n){return a.type===n.type&&!!a.key.isEqual(n.key)&&!!a.precondition.isEqual(n.precondition)&&(l=n.fieldTransforms,!!(void 0===(o=a.fieldTransforms)&&void 0===l||o&&l&&pt(o,l,(h,y)=>function(a,n){return a.field.isEqual(n.field)&&(l=n.transform,(o=a.transform)instanceof Au&&l instanceof Au||o instanceof bo&&l instanceof bo?pt(o.elements,l.elements,En):o instanceof el&&l instanceof el?En(o.C,l.C):o instanceof Su&&l instanceof Su);var o,l}(h,y))))&&(0===a.type?a.value.isEqual(n.value):1!==a.type||a.data.isEqual(n.data)&&a.fieldMask.isEqual(n.fieldMask));var o,l}function Hf(a){return a.isFoundDocument()?a.version:Tt.min()}class aa extends Aa{constructor(n,o,l,h=[]){super(),this.key=n,this.value=o,this.precondition=l,this.fieldTransforms=h,this.type=0}}class ua extends Aa{constructor(n,o,l,h,y=[]){super(),this.key=n,this.data=o,this.fieldMask=l,this.precondition=h,this.fieldTransforms=y,this.type=1}}function id(a){const n=new Map;return a.fieldMask.fields.forEach(o=>{if(!o.isEmpty()){const l=a.data.field(o);n.set(o,l)}}),n}function sd(a,n,o){const l=new Map;Ht(a.length===o.length);for(let h=0;h<o.length;h++){const y=a[h],I=y.transform,k=n.data.field(y.field);l.set(y.field,ed(I,k,o[h]))}return l}function od(a,n,o){const l=new Map;for(const h of a){const y=h.transform,I=o.data.field(h.field);l.set(h.field,dh(y,I,n))}return l}class Ko extends Aa{constructor(n,o){super(),this.key=n,this.precondition=o,this.type=2,this.fieldTransforms=[]}}class ad extends Aa{constructor(n,o){super(),this.key=n,this.precondition=o,this.type=3,this.fieldTransforms=[]}}class sm{constructor(n){this.count=n}}var gr,kn;function hh(a){switch(a){case Be.OK:return Rt();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0;default:return Rt()}}function Io(a){if(void 0===a)return wr("GRPC error has no .code"),Be.UNKNOWN;switch(a){case gr.OK:return Be.OK;case gr.CANCELLED:return Be.CANCELLED;case gr.UNKNOWN:return Be.UNKNOWN;case gr.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case gr.INTERNAL:return Be.INTERNAL;case gr.UNAVAILABLE:return Be.UNAVAILABLE;case gr.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case gr.NOT_FOUND:return Be.NOT_FOUND;case gr.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case gr.ABORTED:return Be.ABORTED;case gr.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case gr.DATA_LOSS:return Be.DATA_LOSS;default:return Rt()}}(kn=gr||(gr={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";class Nr{constructor(n,o){this.comparator=n,this.root=o||Yi.EMPTY}insert(n,o){return new Nr(this.comparator,this.root.insert(n,o,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(n){return new Nr(this.comparator,this.root.remove(n,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(n){let o=this.root;for(;!o.isEmpty();){const l=this.comparator(n,o.key);if(0===l)return o.value;l<0?o=o.left:l>0&&(o=o.right)}return null}indexOf(n){let o=0,l=this.root;for(;!l.isEmpty();){const h=this.comparator(n,l.key);if(0===h)return o+l.left.size;h<0?l=l.left:(o+=l.left.size+1,l=l.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((o,l)=>(n(o,l),!1))}toString(){const n=[];return this.inorderTraversal((o,l)=>(n.push(`${o}:${l}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new Ru(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new Ru(this.root,n,this.comparator,!1)}getReverseIterator(){return new Ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new Ru(this.root,n,this.comparator,!0)}}class Ru{constructor(n,o,l,h){this.isReverse=h,this.nodeStack=[];let y=1;for(;!n.isEmpty();)if(y=o?l(n.key,o):1,h&&(y*=-1),y<0)n=this.isReverse?n.left:n.right;else{if(0===y){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const o={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return o}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class Yi{constructor(n,o,l,h,y){this.key=n,this.value=o,this.color=null!=l?l:Yi.RED,this.left=null!=h?h:Yi.EMPTY,this.right=null!=y?y:Yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,o,l,h,y){return new Yi(null!=n?n:this.key,null!=o?o:this.value,null!=l?l:this.color,null!=h?h:this.left,null!=y?y:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,o,l){let h=this;const y=l(n,h.key);return h=y<0?h.copy(null,null,null,h.left.insert(n,o,l),null):0===y?h.copy(null,o,null,null,null):h.copy(null,null,null,null,h.right.insert(n,o,l)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Yi.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,o){let l,h=this;if(o(n,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(n,o),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===o(n,h.key)){if(h.right.isEmpty())return Yi.EMPTY;l=h.right.min(),h=h.copy(l.key,l.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(n,o))}return h.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,Yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,Yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,o)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Rt();const n=this.left.check();if(n!==this.right.check())throw Rt();return n+(this.isRed()?0:1)}}Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1,Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt()}get value(){throw Rt()}get color(){throw Rt()}get left(){throw Rt()}get right(){throw Rt()}copy(a,n,o,l,h){return this}insert(a,n,o){return new Yi(a,n)}remove(a,n){return this}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ii{constructor(n){this.comparator=n,this.data=new Nr(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((o,l)=>(n(o),!1))}forEachInRange(n,o){const l=this.data.getIteratorFrom(n[0]);for(;l.hasNext();){const h=l.getNext();if(this.comparator(h.key,n[1])>=0)return;o(h.key)}}forEachWhile(n,o){let l;for(l=void 0!==o?this.data.getIteratorFrom(o):this.data.getIterator();l.hasNext();)if(!n(l.getNext().key))return}firstAfterOrEqual(n){const o=this.data.getIteratorFrom(n);return o.hasNext()?o.getNext().key:null}getIterator(){return new vc(this.data.getIterator())}getIteratorFrom(n){return new vc(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let o=this;return o.size<n.size&&(o=n,n=this),n.forEach(l=>{o=o.add(l)}),o}isEqual(n){if(!(n instanceof ii)||this.size!==n.size)return!1;const o=this.data.getIterator(),l=n.data.getIterator();for(;o.hasNext();){const h=o.getNext().key,y=l.getNext().key;if(0!==this.comparator(h,y))return!1}return!0}toArray(){const n=[];return this.forEach(o=>{n.push(o)}),n}toString(){const n=[];return this.forEach(o=>n.push(o)),"SortedSet("+n.toString()+")"}copy(n){const o=new ii(this.comparator);return o.data=n,o}}class vc{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Gf=new Nr(mt.comparator);function Do(){return Gf}const Ec=new Nr(mt.comparator);function ud(){return Ec}const Wf=new Nr(mt.comparator);function fh(){return Wf}const zf=new ii(mt.comparator);function rr(...a){let n=zf;for(const o of a)n=n.add(o);return n}const ph=new ii(Me);function la(){return ph}class nl{constructor(n,o,l,h,y){this.snapshotVersion=n,this.targetChanges=o,this.targetMismatches=l,this.documentUpdates=h,this.resolvedLimboDocuments=y}static createSynthesizedRemoteEventForCurrentChange(n,o){const l=new Map;return l.set(n,qs.createSynthesizedTargetChangeForCurrentChange(n,o)),new nl(Tt.min(),l,la(),Do(),rr())}}class qs{constructor(n,o,l,h,y){this.resumeToken=n,this.current=o,this.addedDocuments=l,this.modifiedDocuments=h,this.removedDocuments=y}static createSynthesizedTargetChangeForCurrentChange(n,o){return new qs(T.EMPTY_BYTE_STRING,o,rr(),rr(),rr())}}class ca{constructor(n,o,l,h){this.k=n,this.removedTargetIds=o,this.key=l,this.$=h}}class Pl{constructor(n,o){this.targetId=n,this.O=o}}class ld{constructor(n,o,l=T.EMPTY_BYTE_STRING,h=null){this.state=n,this.targetIds=o,this.resumeToken=l,this.cause=h}}class cd{constructor(){this.F=0,this.M=Kf(),this.L=T.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}W(){let n=rr(),o=rr(),l=rr();return this.M.forEach((h,y)=>{switch(y){case 0:n=n.add(h);break;case 2:o=o.add(h);break;case 1:l=l.add(h);break;default:Rt()}}),new qs(this.L,this.B,n,o,l)}G(){this.U=!1,this.M=Kf()}H(n,o){this.U=!0,this.M=this.M.insert(n,o)}J(n){this.U=!0,this.M=this.M.remove(n)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class dd{constructor(n){this.tt=n,this.et=new Map,this.nt=Do(),this.st=qf(),this.it=new ii(Me)}rt(n){for(const o of n.k)n.$&&n.$.isFoundDocument()?this.ot(o,n.$):this.at(o,n.key,n.$);for(const o of n.removedTargetIds)this.at(o,n.key,n.$)}ct(n){this.forEachTarget(n,o=>{const l=this.ut(o);switch(n.state){case 0:this.ht(o)&&l.j(n.resumeToken);break;case 1:l.X(),l.q||l.G(),l.j(n.resumeToken);break;case 2:l.X(),l.q||this.removeTarget(o);break;case 3:this.ht(o)&&(l.Z(),l.j(n.resumeToken));break;case 4:this.ht(o)&&(this.lt(o),l.j(n.resumeToken));break;default:Rt()}})}forEachTarget(n,o){n.targetIds.length>0?n.targetIds.forEach(o):this.et.forEach((l,h)=>{this.ht(h)&&o(h)})}ft(n){const o=n.targetId,l=n.O.count,h=this.dt(o);if(h){const y=h.target;if(zo(y))if(0===l){const I=new mt(y.path);this.at(o,I,xr.newNoDocument(I,Tt.min()))}else Ht(1===l);else this.wt(o)!==l&&(this.lt(o),this.it=this.it.add(o))}}_t(n){const o=new Map;this.et.forEach((y,I)=>{const k=this.dt(I);if(k){if(y.current&&zo(k.target)){const H=new mt(k.target.path);null!==this.nt.get(H)||this.gt(I,H)||this.at(I,H,xr.newNoDocument(H,n))}y.K&&(o.set(I,y.W()),y.G())}});let l=rr();this.st.forEach((y,I)=>{let k=!0;I.forEachWhile(H=>{const J=this.dt(H);return!J||2===J.purpose||(k=!1,!1)}),k&&(l=l.add(y))});const h=new nl(n,o,this.it,this.nt,l);return this.nt=Do(),this.st=qf(),this.it=new ii(Me),h}ot(n,o){if(!this.ht(n))return;const l=this.gt(n,o.key)?2:0;this.ut(n).H(o.key,l),this.nt=this.nt.insert(o.key,o),this.st=this.st.insert(o.key,this.yt(o.key).add(n))}at(n,o,l){if(!this.ht(n))return;const h=this.ut(n);this.gt(n,o)?h.H(o,1):h.J(o),this.st=this.st.insert(o,this.yt(o).delete(n)),l&&(this.nt=this.nt.insert(o,l))}removeTarget(n){this.et.delete(n)}wt(n){const o=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+o.addedDocuments.size-o.removedDocuments.size}Y(n){this.ut(n).Y()}ut(n){let o=this.et.get(n);return o||(o=new cd,this.et.set(n,o)),o}yt(n){let o=this.st.get(n);return o||(o=new ii(Me),this.st=this.st.insert(n,o)),o}ht(n){const o=null!==this.dt(n);return o||at("WatchChangeAggregator","Detected inactive target",n),o}dt(n){const o=this.et.get(n);return o&&o.q?null:this.tt.Et(n)}lt(n){this.et.set(n,new cd),this.tt.getRemoteKeysForTarget(n).forEach(o=>{this.at(n,o,null)})}gt(n,o){return this.tt.getRemoteKeysForTarget(n).has(o)}}function qf(){return new Nr(mt.comparator)}function Kf(){return new Nr(mt.comparator)}const hd={asc:"ASCENDING",desc:"DESCENDING"},wc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class fd{constructor(n,o){this.databaseId=n,this.D=o}}function Cc(a,n){return a.D?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function Zf(a,n){return a.D?n.toBase64():n.toUint8Array()}function gh(a,n){return Cc(a,n.toTimestamp())}function ci(a){return Ht(!!a),Tt.fromTimestamp(function(n){const o=$(n);return new It(o.seconds,o.nanos)}(a))}function pd(a,n){return(o=a,new yn(["projects",o.projectId,"databases",o.database])).child("documents").child(n).canonicalString();var o}function gd(a){const n=yn.fromString(a);return Ht(Sc(n)),n}function kl(a,n){return pd(a.databaseId,n.path)}function Zo(a,n){const o=gd(n);if(o.get(1)!==a.databaseId.projectId)throw new Ye(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+o.get(1)+" vs "+a.databaseId.projectId);if(o.get(3)!==a.databaseId.database)throw new Ye(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+o.get(3)+" vs "+a.databaseId.database);return new mt(bc(o))}function rl(a,n){return pd(a.databaseId,n)}function md(a){const n=gd(a);return 4===n.length?yn.emptyPath():bc(n)}function su(a){return new yn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function bc(a){return Ht(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function Cr(a,n,o){return{name:kl(a,n),fields:o.value.mapValue.fields}}function yd(a,n,o){const l=Zo(a,n.name),h=ci(n.updateTime),y=new Ri({mapValue:{fields:n.fields}}),I=xr.newFoundDocument(l,h,y);return o&&I.setHasCommittedMutations(),o?I.setHasCommittedMutations():I}function Qi(a,n){let o;if(n instanceof aa)o={update:Cr(a,n.key,n.value)};else if(n instanceof Ko)o={delete:kl(a,n.key)};else if(n instanceof ua)o={update:Cr(a,n.key,n.data),updateMask:_d(n.fieldMask)};else{if(!(n instanceof ad))return Rt();o={verify:kl(a,n.key)}}return n.fieldTransforms.length>0&&(o.updateTransforms=n.fieldTransforms.map(l=>function(h,y){const I=y.transform;if(I instanceof Su)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(I instanceof Au)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:I.elements}};if(I instanceof bo)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:I.elements}};if(I instanceof el)return{fieldPath:y.field.canonicalString(),increment:I.C};throw Rt()}(0,l))),n.precondition.isNone||(o.currentDocument=void 0!==(h=n.precondition).updateTime?{updateTime:gh(a,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:Rt()),o;var h}function il(a,n){const o=n.currentDocument?void 0!==(h=n.currentDocument).updateTime?mi.updateTime(ci(h.updateTime)):void 0!==h.exists?mi.exists(h.exists):mi.none():mi.none(),l=n.updateTransforms?n.updateTransforms.map(h=>function(y,I){let k=null;"setToServerValue"in I?(Ht("REQUEST_TIME"===I.setToServerValue),k=new Su):"appendMissingElements"in I?k=new Au(I.appendMissingElements.values||[]):"removeAllFromArray"in I?k=new bo(I.removeAllFromArray.values||[]):"increment"in I?k=new el(y,I.increment):Rt();const H=nr.fromServerFormat(I.fieldPath);return new tl(H,k)}(a,h)):[];var h;if(n.update){const h=Zo(a,n.update.name),y=new Ri({mapValue:{fields:n.update.fields}});if(n.updateMask){const I=new Go((n.updateMask.fieldPaths||[]).map(J=>nr.fromServerFormat(J)));return new ua(h,y,I,o,l)}return new aa(h,y,o,l)}if(n.delete){const h=Zo(a,n.delete);return new Ko(h,o)}if(n.verify){const h=Zo(a,n.verify);return new ad(h,o)}return Rt()}function yh(a,n){return{documents:[rl(a,n.path)]}}function Ic(a,n){const o={structuredQuery:{}},l=n.path;null!==n.collectionGroup?(o.parent=rl(a,l),o.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(o.parent=rl(a,l.popLast()),o.structuredQuery.from=[{collectionId:l.lastSegment()}]);const h=function(k){if(0===k.length)return;const H=k.map(J=>function(re){if("=="===re.op){if(Wo(re.value))return{unaryFilter:{field:xu(re.field),op:"IS_NAN"}};if(Zi(re.value))return{unaryFilter:{field:xu(re.field),op:"IS_NULL"}}}else if("!="===re.op){if(Wo(re.value))return{unaryFilter:{field:xu(re.field),op:"IS_NOT_NAN"}};if(Zi(re.value))return{unaryFilter:{field:xu(re.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xu(re.field),op:vh(re.op),value:re.value}}}(J));return 1===H.length?H[0]:{compositeFilter:{op:"AND",filters:H}}}(n.filters);h&&(o.structuredQuery.where=h);const y=function(k){if(0!==k.length)return k.map(H=>{return{field:xu((J=H).field),direction:Tc(J.dir)};var J})}(n.orderBy);y&&(o.structuredQuery.orderBy=y);const I=(H=n.limit,a.D||Lt(H)?H:{value:H});var H;return null!==I&&(o.structuredQuery.limit=I),n.startAt&&(o.structuredQuery.startAt=sl(n.startAt)),n.endAt&&(o.structuredQuery.endAt=sl(n.endAt)),o}function Dc(a){let n=md(a.parent);const o=a.structuredQuery,l=o.from?o.from.length:0;let h=null;if(l>0){Ht(1===l);const re=o.from[0];re.allDescendants?h=re.collectionId:n=n.child(re.collectionId)}let y=[];o.where&&(y=_h(o.where));let I=[];o.orderBy&&(I=o.orderBy.map(re=>{return new nu(di((we=re).field),function(We){switch(We){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(we.direction));var we}));let k=null;o.limit&&(k=function(re){let we;return we="object"==typeof re?re.value:re,Lt(we)?null:we}(o.limit));let H=null;o.startAt&&(H=Hr(o.startAt));let J=null;return o.endAt&&(J=Hr(o.endAt)),Yu(n,h,I,y,k,"F",H,J)}function _h(a){return a?void 0!==a.unaryFilter?[gs(a)]:void 0!==a.fieldFilter?[ol(a)]:void 0!==a.compositeFilter?a.compositeFilter.filters.map(n=>_h(n)).reduce((n,o)=>n.concat(o)):Rt():[]}function sl(a){return{before:a.before,values:a.position}}function Hr(a){return new hc(a.values||[],!!a.before)}function Tc(a){return hd[a]}function vh(a){return wc[a]}function xu(a){return{fieldPath:a.canonicalString()}}function di(a){return nr.fromServerFormat(a.fieldPath)}function ol(a){return zs.create(di(a.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Rt()}}(a.fieldFilter.op),a.fieldFilter.value)}function gs(a){switch(a.unaryFilter.op){case"IS_NAN":const n=di(a.unaryFilter.field);return zs.create(n,"==",{doubleValue:NaN});case"IS_NULL":const o=di(a.unaryFilter.field);return zs.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=di(a.unaryFilter.field);return zs.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=di(a.unaryFilter.field);return zs.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Rt()}}function _d(a){const n=[];return a.fields.forEach(o=>n.push(o.canonicalString())),{fieldPaths:n}}function Sc(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}function To(a){let n="";for(let o=0;o<a.length;o++)n.length>0&&(n=Nu(n)),n=Ra(a.get(o),n);return Nu(n)}function Ra(a,n){let o=n;const l=a.length;for(let h=0;h<l;h++){const y=a.charAt(h);switch(y){case"\0":o+="\x01\x10";break;case"\x01":o+="\x01\x11";break;default:o+=y}}return o}function Nu(a){return a+"\x01\x01"}function da(a){const n=a.length;if(Ht(n>=2),2===n)return Ht("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),yn.emptyPath();const o=n-2,l=[];let h="";for(let y=0;y<n;){const I=a.indexOf("\x01",y);switch((I<0||I>o)&&Rt(),a.charAt(I+1)){case"\x01":const k=a.substring(y,I);let H;0===h.length?H=k:(h+=k,H=h,h=""),l.push(H);break;case"\x10":h+=a.substring(y,I),h+="\0";break;case"\x11":h+=a.substring(y,I+1);break;default:Rt()}y=I+2}return new yn(l)}class vd{constructor(n,o){this.seconds=n,this.nanoseconds=o}}class Ps{constructor(n,o,l){this.ownerId=n,this.allowTabSynchronization=o,this.leaseTimestampMs=l}}Ps.store="owner",Ps.key="owner";class ou{constructor(n,o,l){this.userId=n,this.lastAcknowledgedBatchId=o,this.lastStreamToken=l}}ou.store="mutationQueues",ou.keyPath="userId";class br{constructor(n,o,l,h,y){this.userId=n,this.batchId=o,this.localWriteTimeMs=l,this.baseMutations=h,this.mutations=y}}br.store="mutations",br.keyPath="batchId",br.userMutationsIndex="userMutationsIndex",br.userMutationsKeyPath=["userId","batchId"];class Ji{constructor(){}static prefixForUser(n){return[n]}static prefixForPath(n,o){return[n,To(o)]}static key(n,o,l){return[n,To(o),l]}}Ji.store="documentMutations",Ji.PLACEHOLDER=new Ji;class Ed{constructor(n,o){this.path=n,this.readTime=o}}class v{constructor(n,o){this.path=n,this.version=o}}class f{constructor(n,o,l,h,y,I){this.unknownDocument=n,this.noDocument=o,this.document=l,this.hasCommittedMutations=h,this.readTime=y,this.parentPath=I}}f.store="remoteDocuments",f.readTimeIndex="readTimeIndex",f.readTimeIndexPath="readTime",f.collectionReadTimeIndex="collectionReadTimeIndex",f.collectionReadTimeIndexPath=["parentPath","readTime"];class g{constructor(n){this.byteSize=n}}g.store="remoteDocumentGlobal",g.key="remoteDocumentGlobalKey";class b{constructor(n,o,l,h,y,I,k){this.targetId=n,this.canonicalId=o,this.readTime=l,this.resumeToken=h,this.lastListenSequenceNumber=y,this.lastLimboFreeSnapshotVersion=I,this.query=k}}b.store="targets",b.keyPath="targetId",b.queryTargetsIndexName="queryTargetsIndex",b.queryTargetsKeyPath=["canonicalId","targetId"];class U{constructor(n,o,l){this.targetId=n,this.path=o,this.sequenceNumber=l}}U.store="targetDocuments",U.keyPath=["targetId","path"],U.documentTargetsIndex="documentTargetsIndex",U.documentTargetsKeyPath=["path","targetId"];class Y{constructor(n,o,l,h){this.highestTargetId=n,this.highestListenSequenceNumber=o,this.lastRemoteSnapshotVersion=l,this.targetCount=h}}Y.key="targetGlobalKey",Y.store="targetGlobal";class Ee{constructor(n,o){this.collectionId=n,this.parent=o}}Ee.store="collectionParents",Ee.keyPath=["collectionId","parent"];class $e{constructor(n,o,l,h){this.clientId=n,this.updateTimeMs=o,this.networkEnabled=l,this.inForeground=h}}$e.store="clientMetadata",$e.keyPath="clientId";class yt{constructor(n,o,l){this.bundleId=n,this.createTime=o,this.version=l}}yt.store="bundles",yt.keyPath="bundleId";class Mt{constructor(n,o,l){this.name=n,this.readTime=o,this.bundledQuery=l}}Mt.store="namedQueries",Mt.keyPath="name";const en=[ou.store,br.store,Ji.store,f.store,b.store,Ps.store,Y.store,U.store,$e.store,g.store,Ee.store,yt.store,Mt.store],Kt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}class qe{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(o=>{this.isDone=!0,this.result=o,this.nextCallback&&this.nextCallback(o)},o=>{this.isDone=!0,this.error=o,this.catchCallback&&this.catchCallback(o)})}catch(n){return this.next(void 0,n)}next(n,o){return this.callbackAttached&&Rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(o,this.error):this.wrapSuccess(n,this.result):new qe((l,h)=>{this.nextCallback=y=>{this.wrapSuccess(n,y).next(l,h)},this.catchCallback=y=>{this.wrapFailure(o,y).next(l,h)}})}toPromise(){return new Promise((n,o)=>{this.next(n,o)})}wrapUserFunction(n){try{const o=n();return o instanceof qe?o:qe.resolve(o)}catch(o){return qe.reject(o)}}wrapSuccess(n,o){return n?this.wrapUserFunction(()=>n(o)):qe.resolve(o)}wrapFailure(n,o){return n?this.wrapUserFunction(()=>n(o)):qe.reject(o)}static resolve(n){return new qe((o,l)=>{o(n)})}static reject(n){return new qe((o,l)=>{l(n)})}static waitFor(n){return new qe((o,l)=>{let h=0,y=0,I=!1;n.forEach(k=>{++h,k.next(()=>{++y,I&&y===h&&o()},H=>l(H))}),I=!0,y===h&&o()})}static or(n){let o=qe.resolve(!1);for(const l of n)o=o.next(h=>h?qe.resolve(h):l());return o}static forEach(n,o){const l=[];return n.forEach((h,y)=>{l.push(o.call(this,h,y))}),this.waitFor(l)}}class Li{constructor(n,o){this.action=n,this.transaction=o,this.aborted=!1,this.Tt=new jr,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{o.error?this.Tt.reject(new al(n,o.error)):this.Tt.resolve()},this.transaction.onerror=l=>{const h=Ll(l.target.error);this.Tt.reject(new al(n,h))}}static open(n,o,l,h){try{return new Li(o,n.transaction(h,l))}catch(y){throw new al(o,y)}}get It(){return this.Tt.promise}abort(n){n&&this.Tt.reject(n),this.aborted||(at("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(n){const o=this.transaction.objectStore(n);return new Eh(o)}}class go{constructor(n,o,l){this.name=n,this.version=o,this.At=l,12.2===go.Rt((0,Ve.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return at("SimpleDb","Removing database:",n),Na(window.indexedDB.deleteDatabase(n)).toPromise()}static bt(){if(!(0,Ve.hl)())return!1;if(go.Pt())return!0;const n=(0,Ve.z$)(),o=go.Rt(n),l=0<o&&o<10,h=go.vt(n),y=0<h&&h<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||l||y)}static Pt(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}static St(n,o){return n.store(o)}static Rt(n){const o=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),l=o?o[1].split("_").slice(0,2).join("."):"-1";return Number(l)}static vt(n){const o=n.match(/Android ([\d.]+)/i),l=o?o[1].split(".").slice(0,2).join("."):"-1";return Number(l)}Dt(n){var o=this;return(0,se.Z)(function*(){return o.db||(at("SimpleDb","Opening database:",o.name),o.db=yield new Promise((l,h)=>{const y=indexedDB.open(o.name,o.version);y.onsuccess=I=>{l(I.target.result)},y.onblocked=()=>{h(new al(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},y.onerror=I=>{const k=I.target.error;h("VersionError"===k.name?new Ye(Be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===k.name?new Ye(Be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+k):new al(n,k))},y.onupgradeneeded=I=>{at("SimpleDb",'Database "'+o.name+'" requires upgrade from version:',I.oldVersion),o.At.Ct(I.target.result,y.transaction,I.oldVersion,o.version).next(()=>{at("SimpleDb","Database upgrade to version "+o.version+" complete")})}})),o.Nt&&(o.db.onversionchange=l=>o.Nt(l)),o.db})()}xt(n){this.Nt=n,this.db&&(this.db.onversionchange=o=>n(o))}runTransaction(n,o,l,h){var y=this;return(0,se.Z)(function*(){const I="readonly"===o;let k=0;for(;;){++k;try{y.db=yield y.Dt(n);const H=Li.open(y.db,n,I?"readonly":"readwrite",l),J=h(H).catch(re=>(H.abort(re),qe.reject(re))).toPromise();return J.catch(()=>{}),yield H.It,J}catch(H){const J="FirebaseError"!==H.name&&k<3;if(at("SimpleDb","Transaction failed with error:",H.message,"Retrying:",J),y.close(),!J)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wd{constructor(n){this.kt=n,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(n){this.kt=n}done(){this.$t=!0}Mt(n){this.Ot=n}delete(){return Na(this.kt.delete())}}class al extends Ye{constructor(n,o){super(Be.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${o}`),this.name="IndexedDbTransactionError"}}function xa(a){return"IndexedDbTransactionError"===a.name}class Eh{constructor(n){this.store=n}put(n,o){let l;return void 0!==o?(at("SimpleDb","PUT",this.store.name,n,o),l=this.store.put(o,n)):(at("SimpleDb","PUT",this.store.name,"<auto-key>",n),l=this.store.put(n)),Na(l)}add(n){return at("SimpleDb","ADD",this.store.name,n,n),Na(this.store.add(n))}get(n){return Na(this.store.get(n)).next(o=>(void 0===o&&(o=null),at("SimpleDb","GET",this.store.name,n,o),o))}delete(n){return at("SimpleDb","DELETE",this.store.name,n),Na(this.store.delete(n))}count(){return at("SimpleDb","COUNT",this.store.name),Na(this.store.count())}Lt(n,o){const l=this.cursor(this.options(n,o)),h=[];return this.Bt(l,(y,I)=>{h.push(I)}).next(()=>h)}Ut(n,o){at("SimpleDb","DELETE ALL",this.store.name);const l=this.options(n,o);l.qt=!1;const h=this.cursor(l);return this.Bt(h,(y,I,k)=>k.delete())}Kt(n,o){let l;o?l=n:(l={},o=n);const h=this.cursor(l);return this.Bt(h,o)}jt(n){const o=this.cursor({});return new qe((l,h)=>{o.onerror=y=>{const I=Ll(y.target.error);h(I)},o.onsuccess=y=>{const I=y.target.result;I?n(I.primaryKey,I.value).next(k=>{k?I.continue():l()}):l()}})}Bt(n,o){const l=[];return new qe((h,y)=>{n.onerror=I=>{y(I.target.error)},n.onsuccess=I=>{const k=I.target.result;if(!k)return void h();const H=new wd(k),J=o(k.primaryKey,k.value,H);if(J instanceof qe){const re=J.catch(we=>(H.done(),qe.reject(we)));l.push(re)}H.isDone?h():null===H.Ft?k.continue():k.continue(H.Ft)}}).next(()=>qe.waitFor(l))}options(n,o){let l;return void 0!==n&&("string"==typeof n?l=n:o=n),{index:l,range:o}}cursor(n){let o="next";if(n.reverse&&(o="prev"),n.index){const l=this.store.index(n.index);return n.qt?l.openKeyCursor(n.range,o):l.openCursor(n.range,o)}return this.store.openCursor(n.range,o)}}function Na(a){return new qe((n,o)=>{a.onsuccess=l=>{n(l.target.result)},a.onerror=l=>{const h=Ll(l.target.error);o(h)}})}let Cd=!1;function Ll(a){const n=go.Rt((0,Ve.z$)());if(n>=12.2&&n<13){const o="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(o)>=0){const l=new Ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${o}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Cd||(Cd=!0,setTimeout(()=>{throw l},0)),l}}return a}class bd extends yi{constructor(n,o){super(),this.Qt=n,this.currentSequenceNumber=o}}function xi(a,n){const o=ft(a);return go.St(o.Qt,n)}class Ks{constructor(n,o,l,h){this.batchId=n,this.localWriteTime=o,this.baseMutations=l,this.mutations=h}applyToRemoteDocument(n,o){const l=o.mutationResults;for(let h=0;h<this.mutations.length;h++){const y=this.mutations[h];y.key.isEqual(n.key)&&nd(y,n,l[h])}}applyToLocalView(n){for(const o of this.baseMutations)o.key.isEqual(n.key)&&oa(o,n,this.localWriteTime);for(const o of this.mutations)o.key.isEqual(n.key)&&oa(o,n,this.localWriteTime)}applyToLocalDocumentSet(n){this.mutations.forEach(o=>{const l=n.get(o.key),h=l;this.applyToLocalView(h),l.isValidDocument()||h.convertToNoDocument(Tt.min())})}keys(){return this.mutations.reduce((n,o)=>n.add(o.key),rr())}isEqual(n){return this.batchId===n.batchId&&pt(this.mutations,n.mutations,(o,l)=>rd(o,l))&&pt(this.baseMutations,n.baseMutations,(o,l)=>rd(o,l))}}class wh{constructor(n,o,l,h){this.batch=n,this.commitVersion=o,this.mutationResults=l,this.docVersions=h}static from(n,o,l){Ht(n.mutations.length===l.length);let h=fh();const y=n.mutations;for(let I=0;I<y.length;I++)h=h.insert(y[I].key,l[I].version);return new wh(n,o,l,h)}}class Vl{constructor(n,o,l,h,y=Tt.min(),I=Tt.min(),k=T.EMPTY_BYTE_STRING){this.target=n,this.targetId=o,this.purpose=l,this.sequenceNumber=h,this.snapshotVersion=y,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=k}withSequenceNumber(n){return new Vl(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,o){return new Vl(this.target,this.targetId,this.purpose,this.sequenceNumber,o,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new Vl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class Qf{constructor(n){this.Wt=n}}function am(a,n){if(n.document)return yd(a.Wt,n.document,!!n.hasCommittedMutations);if(n.noDocument){const o=mt.fromSegments(n.noDocument.path),l=Ul(n.noDocument.readTime),h=xr.newNoDocument(o,l);return n.hasCommittedMutations?h.setHasCommittedMutations():h}if(n.unknownDocument){const o=mt.fromSegments(n.unknownDocument.path),l=Ul(n.unknownDocument.version);return xr.newUnknownDocument(o,l)}return Rt()}function Ma(a,n,o){const l=Id(o),h=n.key.path.popLast().toArray();if(n.isFoundDocument()){const y={name:kl(k=a.Wt,(H=n).key),fields:H.data.value.mapValue.fields,updateTime:Cc(k,H.version.toTimestamp())};return new f(null,null,y,n.hasCommittedMutations,l,h)}var k,H;if(n.isNoDocument()){const y=n.key.path.toArray(),I=Ac(n.version),k=n.hasCommittedMutations;return new f(null,new Ed(y,I),null,k,l,h)}if(n.isUnknownDocument()){const y=n.key.path.toArray(),I=Ac(n.version);return new f(new v(y,I),null,null,!0,l,h)}return Rt()}function Id(a){const n=a.toTimestamp();return[n.seconds,n.nanoseconds]}function Ch(a){const n=new It(a[0],a[1]);return Tt.fromTimestamp(n)}function Ac(a){const n=a.toTimestamp();return new vd(n.seconds,n.nanoseconds)}function Ul(a){const n=new It(a.seconds,a.nanoseconds);return Tt.fromTimestamp(n)}function au(a,n){const o=(n.baseMutations||[]).map(y=>il(a.Wt,y));for(let y=0;y<n.mutations.length-1;++y){const I=n.mutations[y];y+1<n.mutations.length&&void 0!==n.mutations[y+1].transform&&(I.updateTransforms=n.mutations[y+1].transform.fieldTransforms,n.mutations.splice(y+1,1),++y)}const l=n.mutations.map(y=>il(a.Wt,y)),h=It.fromMillis(n.localWriteTimeMs);return new Ks(n.batchId,h,o,l)}function Rc(a){const n=Ul(a.readTime),o=void 0!==a.lastLimboFreeSnapshotVersion?Ul(a.lastLimboFreeSnapshotVersion):Tt.min();let l;var h;return void 0!==a.query.documents?(Ht(1===(h=a.query).documents.length),l=qo(Nl(md(h.documents[0])))):l=qo(Dc(a.query)),new Vl(l,a.targetId,0,a.lastListenSequenceNumber,n,o,T.fromBase64String(a.resumeToken))}function Jf(a,n){const o=Ac(n.snapshotVersion),l=Ac(n.lastLimboFreeSnapshotVersion);let h;h=zo(n.target)?yh(a.Wt,n.target):Ic(a.Wt,n.target);const y=n.resumeToken.toBase64();return new b(n.targetId,Zu(n.target),o,y,n.sequenceNumber,l,h)}function Dd(a){const n=Dc({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?iu(n,n.limit,"L"):n}class Xf{getBundleMetadata(n,o){return ep(n).get(o).next(l=>{if(l)return{id:(h=l).bundleId,createTime:Ul(h.createTime),version:h.version};var h})}saveBundleMetadata(n,o){return ep(n).put({bundleId:(l=o).id,createTime:Ac(ci(l.createTime)),version:l.version});var l}getNamedQuery(n,o){return p_(n).get(o).next(l=>{if(l)return{name:(h=l).name,query:Dd(h.bundledQuery),readTime:Ul(h.readTime)};var h})}saveNamedQuery(n,o){return p_(n).put({name:(l=o).name,readTime:Ac(ci(l.readTime)),bundledQuery:l.bundledQuery});var l}}function ep(a){return xi(a,yt.store)}function p_(a){return xi(a,Mt.store)}class xc{constructor(){this.Gt=new Td}addToCollectionParentIndex(n,o){return this.Gt.add(o),qe.resolve()}getCollectionParents(n,o){return qe.resolve(this.Gt.getEntries(o))}}class Td{constructor(){this.index={}}add(n){const o=n.lastSegment(),l=n.popLast(),h=this.index[o]||new ii(yn.comparator),y=!h.has(l);return this.index[o]=h.add(l),y}has(n){const o=n.lastSegment(),l=n.popLast(),h=this.index[o];return h&&h.has(l)}getEntries(n){return(this.index[n]||new ii(yn.comparator)).toArray()}}class um{constructor(){this.zt=new Td}addToCollectionParentIndex(n,o){if(!this.zt.has(o)){const l=o.lastSegment(),h=o.popLast();n.addOnCommittedListener(()=>{this.zt.add(o)});const y={collectionId:l,parent:To(h)};return lm(n).put(y)}return qe.resolve()}getCollectionParents(n,o){const l=[],h=IDBKeyRange.bound([o,""],[Cn(o),""],!1,!0);return lm(n).Lt(h).next(y=>{for(const I of y){if(I.collectionId!==o)break;l.push(da(I.parent))}return l})}}function lm(a){return xi(a,Ee.store)}const bh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class So{constructor(n,o,l){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=o,this.maximumSequenceNumbersToCollect=l}static withCacheSize(n){return new So(n,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cm(a,n,o){const l=a.store(br.store),h=a.store(Ji.store),y=[],I=IDBKeyRange.only(o.batchId);let k=0;const H=l.Kt({range:I},(re,we,We)=>(k++,We.delete()));y.push(H.next(()=>{Ht(1===k)}));const J=[];for(const re of o.mutations){const we=Ji.key(n,re.key.path,o.batchId);y.push(h.delete(we)),J.push(re.key)}return qe.waitFor(y).next(()=>J)}function Ih(a){if(!a)return 0;let n;if(a.document)n=a.document;else if(a.unknownDocument)n=a.unknownDocument;else{if(!a.noDocument)throw Rt();n=a.noDocument}return JSON.stringify(n).length}So.DEFAULT_COLLECTION_PERCENTILE=10,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,So.DEFAULT=new So(41943040,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),So.DISABLED=new So(-1,0,0);class tp{constructor(n,o,l,h){this.userId=n,this.N=o,this.Ht=l,this.referenceDelegate=h,this.Jt={}}static Yt(n,o,l,h){Ht(""!==n.uid);const y=n.isAuthenticated()?n.uid:"";return new tp(y,o,l,h)}checkEmpty(n){let o=!0;const l=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ul(n).Kt({index:br.userMutationsIndex,range:l},(h,y,I)=>{o=!1,I.done()}).next(()=>o)}addMutationBatch(n,o,l,h){const y=Bl(n),I=ul(n);return I.add({}).next(k=>{Ht("number"==typeof k);const H=new Ks(k,o,l,h),J=function(We,et,_t){const Ut=_t.baseMutations.map(hi=>Qi(We.Wt,hi)),cn=_t.mutations.map(hi=>Qi(We.Wt,hi));return new br(et,_t.batchId,_t.localWriteTime.toMillis(),Ut,cn)}(this.N,this.userId,H),re=[];let we=new ii((We,et)=>Me(We.canonicalString(),et.canonicalString()));for(const We of h){const et=Ji.key(this.userId,We.key.path,k);we=we.add(We.key.path.popLast()),re.push(I.put(J)),re.push(y.put(et,Ji.PLACEHOLDER))}return we.forEach(We=>{re.push(this.Ht.addToCollectionParentIndex(n,We))}),n.addOnCommittedListener(()=>{this.Jt[k]=H.keys()}),qe.waitFor(re).next(()=>H)})}lookupMutationBatch(n,o){return ul(n).get(o).next(l=>l?(Ht(l.userId===this.userId),au(this.N,l)):null)}Xt(n,o){return this.Jt[o]?qe.resolve(this.Jt[o]):this.lookupMutationBatch(n,o).next(l=>{if(l){const h=l.keys();return this.Jt[o]=h,h}return null})}getNextMutationBatchAfterBatchId(n,o){const l=o+1,h=IDBKeyRange.lowerBound([this.userId,l]);let y=null;return ul(n).Kt({index:br.userMutationsIndex,range:h},(I,k,H)=>{k.userId===this.userId&&(Ht(k.batchId>=l),y=au(this.N,k)),H.done()}).next(()=>y)}getHighestUnacknowledgedBatchId(n){const o=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let l=-1;return ul(n).Kt({index:br.userMutationsIndex,range:o,reverse:!0},(h,y,I)=>{l=y.batchId,I.done()}).next(()=>l)}getAllMutationBatches(n){const o=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ul(n).Lt(br.userMutationsIndex,o).next(l=>l.map(h=>au(this.N,h)))}getAllMutationBatchesAffectingDocumentKey(n,o){const l=Ji.prefixForPath(this.userId,o.path),h=IDBKeyRange.lowerBound(l),y=[];return Bl(n).Kt({range:h},(I,k,H)=>{const[J,re,we]=I,We=da(re);if(J===this.userId&&o.path.isEqual(We))return ul(n).get(we).next(et=>{if(!et)throw Rt();Ht(et.userId===this.userId),y.push(au(this.N,et))});H.done()}).next(()=>y)}getAllMutationBatchesAffectingDocumentKeys(n,o){let l=new ii(Me);const h=[];return o.forEach(y=>{const I=Ji.prefixForPath(this.userId,y.path),k=IDBKeyRange.lowerBound(I),H=Bl(n).Kt({range:k},(J,re,we)=>{const[We,et,_t]=J,Ut=da(et);We===this.userId&&y.path.isEqual(Ut)?l=l.add(_t):we.done()});h.push(H)}),qe.waitFor(h).next(()=>this.Zt(n,l))}getAllMutationBatchesAffectingQuery(n,o){const l=o.path,h=l.length+1,y=Ji.prefixForPath(this.userId,l),I=IDBKeyRange.lowerBound(y);let k=new ii(Me);return Bl(n).Kt({range:I},(H,J,re)=>{const[we,We,et]=H,_t=da(We);we===this.userId&&l.isPrefixOf(_t)?_t.length===h&&(k=k.add(et)):re.done()}).next(()=>this.Zt(n,k))}Zt(n,o){const l=[],h=[];return o.forEach(y=>{h.push(ul(n).get(y).next(I=>{if(null===I)throw Rt();Ht(I.userId===this.userId),l.push(au(this.N,I))}))}),qe.waitFor(h).next(()=>l)}removeMutationBatch(n,o){return cm(n.Qt,this.userId,o).next(l=>(n.addOnCommittedListener(()=>{this.te(o.batchId)}),qe.forEach(l,h=>this.referenceDelegate.markPotentiallyOrphaned(n,h))))}te(n){delete this.Jt[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(o=>{if(!o)return qe.resolve();const l=IDBKeyRange.lowerBound(Ji.prefixForUser(this.userId)),h=[];return Bl(n).Kt({range:l},(y,I,k)=>{if(y[0]===this.userId){const H=da(y[1]);h.push(H)}else k.done()}).next(()=>{Ht(0===h.length)})})}containsKey(n,o){return dm(n,this.userId,o)}ee(n){return Dh(n).get(this.userId).next(o=>o||new ou(this.userId,-1,""))}}function dm(a,n,o){const l=Ji.prefixForPath(n,o.path),h=l[1],y=IDBKeyRange.lowerBound(l);let I=!1;return Bl(a).Kt({range:y,qt:!0},(k,H,J)=>{const[re,we,We]=k;re===n&&we===h&&(I=!0),J.done()}).next(()=>I)}function ul(a){return xi(a,br.store)}function Bl(a){return xi(a,Ji.store)}function Dh(a){return xi(a,ou.store)}class ll{constructor(n){this.ne=n}next(){return this.ne+=2,this.ne}static se(){return new ll(0)}static ie(){return new ll(-1)}}class np{constructor(n,o){this.referenceDelegate=n,this.N=o}allocateTargetId(n){return this.re(n).next(o=>{const l=new ll(o.highestTargetId);return o.highestTargetId=l.next(),this.oe(n,o).next(()=>o.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.re(n).next(o=>Tt.fromTimestamp(new It(o.lastRemoteSnapshotVersion.seconds,o.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.re(n).next(o=>o.highestListenSequenceNumber)}setTargetsMetadata(n,o,l){return this.re(n).next(h=>(h.highestListenSequenceNumber=o,l&&(h.lastRemoteSnapshotVersion=l.toTimestamp()),o>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=o),this.oe(n,h)))}addTargetData(n,o){return this.ae(n,o).next(()=>this.re(n).next(l=>(l.targetCount+=1,this.ce(o,l),this.oe(n,l))))}updateTargetData(n,o){return this.ae(n,o)}removeTargetData(n,o){return this.removeMatchingKeysForTargetId(n,o.targetId).next(()=>Nc(n).delete(o.targetId)).next(()=>this.re(n)).next(l=>(Ht(l.targetCount>0),l.targetCount-=1,this.oe(n,l)))}removeTargets(n,o,l){let h=0;const y=[];return Nc(n).Kt((I,k)=>{const H=Rc(k);H.sequenceNumber<=o&&null===l.get(H.targetId)&&(h++,y.push(this.removeTargetData(n,H)))}).next(()=>qe.waitFor(y)).next(()=>h)}forEachTarget(n,o){return Nc(n).Kt((l,h)=>{const y=Rc(h);o(y)})}re(n){return hm(n).get(Y.key).next(o=>(Ht(null!==o),o))}oe(n,o){return hm(n).put(Y.key,o)}ae(n,o){return Nc(n).put(Jf(this.N,o))}ce(n,o){let l=!1;return n.targetId>o.highestTargetId&&(o.highestTargetId=n.targetId,l=!0),n.sequenceNumber>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n.sequenceNumber,l=!0),l}getTargetCount(n){return this.re(n).next(o=>o.targetCount)}getTargetData(n,o){const l=Zu(o),h=IDBKeyRange.bound([l,Number.NEGATIVE_INFINITY],[l,Number.POSITIVE_INFINITY]);let y=null;return Nc(n).Kt({range:h,index:b.queryTargetsIndexName},(I,k,H)=>{const J=Rc(k);tu(o,J.target)&&(y=J,H.done())}).next(()=>y)}addMatchingKeys(n,o,l){const h=[],y=Mu(n);return o.forEach(I=>{const k=To(I.path);h.push(y.put(new U(l,k))),h.push(this.referenceDelegate.addReference(n,l,I))}),qe.waitFor(h)}removeMatchingKeys(n,o,l){const h=Mu(n);return qe.forEach(o,y=>{const I=To(y.path);return qe.waitFor([h.delete([l,I]),this.referenceDelegate.removeReference(n,l,y)])})}removeMatchingKeysForTargetId(n,o){const l=Mu(n),h=IDBKeyRange.bound([o],[o+1],!1,!0);return l.delete(h)}getMatchingKeysForTargetId(n,o){const l=IDBKeyRange.bound([o],[o+1],!1,!0),h=Mu(n);let y=rr();return h.Kt({range:l,qt:!0},(I,k,H)=>{const J=da(I[1]),re=new mt(J);y=y.add(re)}).next(()=>y)}containsKey(n,o){const l=To(o.path),h=IDBKeyRange.bound([l],[Cn(l)],!1,!0);let y=0;return Mu(n).Kt({index:U.documentTargetsIndex,qt:!0,range:h},([I,k],H,J)=>{0!==I&&(y++,J.done())}).next(()=>y>0)}Et(n,o){return Nc(n).get(o).next(l=>l?Rc(l):null)}}function Nc(a){return xi(a,b.store)}function hm(a){return xi(a,Y.store)}function Mu(a){return xi(a,U.store)}function cl(a){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,se.Z)(function*(a){if(a.code!==Be.FAILED_PRECONDITION||a.message!==Kt)throw a;at("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function rp([a,n],[o,l]){const h=Me(a,o);return 0===h?Me(n,l):h}class fm{constructor(n){this.ue=n,this.buffer=new ii(rp),this.he=0}le(){return++this.he}fe(n){const o=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(o);else{const l=this.buffer.last();rp(o,l)<0&&(this.buffer=this.buffer.delete(l).add(o))}}get maxValue(){return this.buffer.last()[0]}}class g_{constructor(n,o){this.garbageCollector=n,this.asyncQueue=o,this.de=!1,this.we=null}start(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(n){var o=this;const l=this.de?3e5:6e4;at("LruGarbageCollector",`Garbage collection scheduled in ${l}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",l,(0,se.Z)(function*(){o.we=null,o.de=!0;try{yield n.collectGarbage(o.garbageCollector)}catch(h){xa(h)?at("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",h):yield cl(h)}yield o._e(n)}))}}class Th{constructor(n,o){this.me=n,this.params=o}calculateTargetCount(n,o){return this.me.ge(n).next(l=>Math.floor(o/100*l))}nthSequenceNumber(n,o){if(0===o)return qe.resolve(q.T);const l=new fm(o);return this.me.forEachTarget(n,h=>l.fe(h.sequenceNumber)).next(()=>this.me.ye(n,h=>l.fe(h))).next(()=>l.maxValue)}removeTargets(n,o,l){return this.me.removeTargets(n,o,l)}removeOrphanedDocuments(n,o){return this.me.removeOrphanedDocuments(n,o)}collect(n,o){return-1===this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector","Garbage collection skipped; disabled"),qe.resolve(bh)):this.getCacheSize(n).next(l=>l<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${l} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bh):this.pe(n,o))}getCacheSize(n){return this.me.getCacheSize(n)}pe(n,o){let l,h,y,I,k,H,J;const re=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(we=>(we>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${we}`),h=this.params.maximumSequenceNumbersToCollect):h=we,I=Date.now(),this.nthSequenceNumber(n,h))).next(we=>(l=we,k=Date.now(),this.removeTargets(n,l,o))).next(we=>(y=we,H=Date.now(),this.removeOrphanedDocuments(n,l))).next(we=>(J=Date.now(),jo()<=Zt.in.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-re}ms\n\tDetermined least recently used ${h} in `+(k-I)+`ms\n\tRemoved ${y} targets in `+(H-k)+`ms\n\tRemoved ${we} documents in `+(J-H)+`ms\nTotal Duration: ${J-re}ms`),qe.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:y,documentsRemoved:we})))}}class m_{constructor(n,o){this.db=n,this.garbageCollector=new Th(this,o)}ge(n){const o=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(l=>o.next(h=>l+h))}Ee(n){let o=0;return this.ye(n,l=>{o++}).next(()=>o)}forEachTarget(n,o){return this.db.getTargetCache().forEachTarget(n,o)}ye(n,o){return this.Te(n,(l,h)=>o(h))}addReference(n,o,l){return Sd(n,l)}removeReference(n,o,l){return Sd(n,l)}removeTargets(n,o,l){return this.db.getTargetCache().removeTargets(n,o,l)}markPotentiallyOrphaned(n,o){return Sd(n,o)}Ie(n,o){return function(l,h){let y=!1;return Dh(l).jt(I=>dm(l,I,h).next(k=>(k&&(y=!0),qe.resolve(!k)))).next(()=>y)}(n,o)}removeOrphanedDocuments(n,o){const l=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let y=0;return this.Te(n,(I,k)=>{if(k<=o){const H=this.Ie(n,I).next(J=>{if(!J)return y++,l.getEntry(n,I).next(()=>(l.removeEntry(I),Mu(n).delete([0,To(I.path)])))});h.push(H)}}).next(()=>qe.waitFor(h)).next(()=>l.apply(n)).next(()=>y)}removeTarget(n,o){const l=o.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,l)}updateLimboDocument(n,o){return Sd(n,o)}Te(n,o){const l=Mu(n);let h,y=q.T;return l.Kt({index:U.documentTargetsIndex},([I,k],{path:H,sequenceNumber:J})=>{0===I?(y!==q.T&&o(new mt(da(h)),y),y=J,h=H):y=q.T}).next(()=>{y!==q.T&&o(new mt(da(h)),y)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function Sd(a,n){return Mu(a).put((l=a.currentSequenceNumber,new U(0,To(n.path),l)));var l}class jl{constructor(n,o){this.mapKeyFn=n,this.equalsFn=o,this.inner={}}get(n){const o=this.mapKeyFn(n),l=this.inner[o];if(void 0!==l)for(const[h,y]of l)if(this.equalsFn(h,n))return y}has(n){return void 0!==this.get(n)}set(n,o){const l=this.mapKeyFn(n),h=this.inner[l];if(void 0!==h){for(let y=0;y<h.length;y++)if(this.equalsFn(h[y][0],n))return void(h[y]=[n,o]);h.push([n,o])}else this.inner[l]=[[n,o]]}delete(n){const o=this.mapKeyFn(n),l=this.inner[o];if(void 0===l)return!1;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],n))return 1===l.length?delete this.inner[o]:l.splice(h,1),!0;return!1}forEach(n){ti(this.inner,(o,l)=>{for(const[h,y]of l)n(h,y)})}isEmpty(){return Si(this.inner)}}class ip{constructor(){this.changes=new jl(n=>n.toString(),(n,o)=>n.isEqual(o)),this.changesApplied=!1}getReadTime(n){const o=this.changes.get(n);return o?o.readTime:Tt.min()}addEntry(n,o){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:o})}removeEntry(n,o=null){this.assertNotApplied(),this.changes.set(n,{document:xr.newInvalidDocument(n),readTime:o})}getEntry(n,o){this.assertNotApplied();const l=this.changes.get(o);return void 0!==l?qe.resolve(l.document):this.getFromCache(n,o)}getEntries(n,o){return this.getAllFromCache(n,o)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class sp{constructor(n,o){this.N=n,this.Ht=o}addEntry(n,o,l){return Oa(n).put(Rd(o),l)}removeEntry(n,o){const l=Oa(n),h=Rd(o);return l.delete(h)}updateMetadata(n,o){return this.getMetadata(n).next(l=>(l.byteSize+=o,this.Ae(n,l)))}getEntry(n,o){return Oa(n).get(Rd(o)).next(l=>this.Re(o,l))}be(n,o){return Oa(n).get(Rd(o)).next(l=>({document:this.Re(o,l),size:Ih(l)}))}getEntries(n,o){let l=Do();return this.Pe(n,o,(h,y)=>{const I=this.Re(h,y);l=l.insert(h,I)}).next(()=>l)}ve(n,o){let l=Do(),h=new Nr(mt.comparator);return this.Pe(n,o,(y,I)=>{const k=this.Re(y,I);l=l.insert(y,k),h=h.insert(y,Ih(I))}).next(()=>({documents:l,Ve:h}))}Pe(n,o,l){if(o.isEmpty())return qe.resolve();const h=IDBKeyRange.bound(o.first().path.toArray(),o.last().path.toArray()),y=o.getIterator();let I=y.getNext();return Oa(n).Kt({range:h},(k,H,J)=>{const re=mt.fromSegments(k);for(;I&&mt.comparator(I,re)<0;)l(I,null),I=y.getNext();I&&I.isEqual(re)&&(l(I,H),I=y.hasNext()?y.getNext():null),I?J.Mt(I.path.toArray()):J.done()}).next(()=>{for(;I;)l(I,null),I=y.hasNext()?y.getNext():null})}getDocumentsMatchingQuery(n,o,l){let h=Do();const y=o.path.length+1,I={};if(l.isEqual(Tt.min())){const k=o.path.toArray();I.range=IDBKeyRange.lowerBound(k)}else{const k=o.path.toArray(),H=Id(l);I.range=IDBKeyRange.lowerBound([k,H],!0),I.index=f.collectionReadTimeIndex}return Oa(n).Kt(I,(k,H,J)=>{if(k.length!==y)return;const re=am(this.N,H);o.path.isPrefixOf(re.key.path)?Qu(o,re)&&(h=h.insert(re.key,re)):J.done()}).next(()=>h)}newChangeBuffer(n){return new pm(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(o=>o.byteSize)}getMetadata(n){return Ad(n).get(g.key).next(o=>(Ht(!!o),o))}Ae(n,o){return Ad(n).put(g.key,o)}Re(n,o){if(o){const l=am(this.N,o);if(!l.isNoDocument()||!l.version.isEqual(Tt.min()))return l}return xr.newInvalidDocument(n)}}class pm extends ip{constructor(n,o){super(),this.Se=n,this.trackRemovals=o,this.De=new jl(l=>l.toString(),(l,h)=>l.isEqual(h))}applyChanges(n){const o=[];let l=0,h=new ii((y,I)=>Me(y.canonicalString(),I.canonicalString()));return this.changes.forEach((y,I)=>{const k=this.De.get(y);if(I.document.isValidDocument()){const H=Ma(this.Se.N,I.document,this.getReadTime(y));h=h.add(y.path.popLast()),l+=Ih(H)-k,o.push(this.Se.addEntry(n,y,H))}else if(l-=k,this.trackRemovals){const H=Ma(this.Se.N,xr.newNoDocument(y,Tt.min()),this.getReadTime(y));o.push(this.Se.addEntry(n,y,H))}else o.push(this.Se.removeEntry(n,y))}),h.forEach(y=>{o.push(this.Se.Ht.addToCollectionParentIndex(n,y))}),o.push(this.Se.updateMetadata(n,l)),qe.waitFor(o)}getFromCache(n,o){return this.Se.be(n,o).next(l=>(this.De.set(o,l.size),l.document))}getAllFromCache(n,o){return this.Se.ve(n,o).next(({documents:l,Ve:h})=>(h.forEach((y,I)=>{this.De.set(y,I)}),l))}}function Ad(a){return xi(a,g.store)}function Oa(a){return xi(a,f.store)}function Rd(a){return a.path.toArray()}class op{constructor(n){this.N=n}Ct(n,o,l,h){Ht(l<h&&l>=0&&h<=11);const y=new Li("createOrUpgrade",o);var k;l<1&&h>=1&&(n.createObjectStore(Ps.store),(k=n).createObjectStore(ou.store,{keyPath:ou.keyPath}),k.createObjectStore(br.store,{keyPath:br.keyPath,autoIncrement:!0}).createIndex(br.userMutationsIndex,br.userMutationsKeyPath,{unique:!0}),k.createObjectStore(Ji.store),ap(n),function(k){k.createObjectStore(f.store)}(n));let I=qe.resolve();return l<3&&h>=3&&(0!==l&&(function(k){k.deleteObjectStore(U.store),k.deleteObjectStore(b.store),k.deleteObjectStore(Y.store)}(n),ap(n)),I=I.next(()=>function(k){const H=k.store(Y.store),J=new Y(0,0,Tt.min().toTimestamp(),0);return H.put(Y.key,J)}(y))),l<4&&h>=4&&(0!==l&&(I=I.next(()=>function(k,H){return H.store(br.store).Lt().next(J=>{k.deleteObjectStore(br.store),k.createObjectStore(br.store,{keyPath:br.keyPath,autoIncrement:!0}).createIndex(br.userMutationsIndex,br.userMutationsKeyPath,{unique:!0});const re=H.store(br.store),we=J.map(We=>re.put(We));return qe.waitFor(we)})}(n,y))),I=I.next(()=>{!function(k){k.createObjectStore($e.store,{keyPath:$e.keyPath})}(n)})),l<5&&h>=5&&(I=I.next(()=>this.Ce(y))),l<6&&h>=6&&(I=I.next(()=>(function(k){k.createObjectStore(g.store)}(n),this.Ne(y)))),l<7&&h>=7&&(I=I.next(()=>this.xe(y))),l<8&&h>=8&&(I=I.next(()=>this.ke(n,y))),l<9&&h>=9&&(I=I.next(()=>{(function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")})(n),function(k){const H=k.objectStore(f.store);H.createIndex(f.readTimeIndex,f.readTimeIndexPath,{unique:!1}),H.createIndex(f.collectionReadTimeIndex,f.collectionReadTimeIndexPath,{unique:!1})}(o)})),l<10&&h>=10&&(I=I.next(()=>this.$e(y))),l<11&&h>=11&&(I=I.next(()=>{(function(k){k.createObjectStore(yt.store,{keyPath:yt.keyPath})})(n),function(k){k.createObjectStore(Mt.store,{keyPath:Mt.keyPath})}(n)})),I}Ne(n){let o=0;return n.store(f.store).Kt((l,h)=>{o+=Ih(h)}).next(()=>{const l=new g(o);return n.store(g.store).put(g.key,l)})}Ce(n){const o=n.store(ou.store),l=n.store(br.store);return o.Lt().next(h=>qe.forEach(h,y=>{const I=IDBKeyRange.bound([y.userId,-1],[y.userId,y.lastAcknowledgedBatchId]);return l.Lt(br.userMutationsIndex,I).next(k=>qe.forEach(k,H=>{Ht(H.userId===y.userId);const J=au(this.N,H);return cm(n,y.userId,J).next(()=>{})}))}))}xe(n){const o=n.store(U.store),l=n.store(f.store);return n.store(Y.store).get(Y.key).next(h=>{const y=[];return l.Kt((I,k)=>{const H=new yn(I),J=[0,To(H)];y.push(o.get(J).next(re=>re?qe.resolve():o.put(new U(0,To(H),h.highestListenSequenceNumber))))}).next(()=>qe.waitFor(y))})}ke(n,o){n.createObjectStore(Ee.store,{keyPath:Ee.keyPath});const l=o.store(Ee.store),h=new Td,y=I=>{if(h.add(I)){const k=I.lastSegment(),H=I.popLast();return l.put({collectionId:k,parent:To(H)})}};return o.store(f.store).Kt({qt:!0},(I,k)=>{const H=new yn(I);return y(H.popLast())}).next(()=>o.store(Ji.store).Kt({qt:!0},([I,k,H],J)=>{const re=da(k);return y(re.popLast())}))}$e(n){const o=n.store(b.store);return o.Kt((l,h)=>{const y=Rc(h),I=Jf(this.N,y);return o.put(I)})}}function ap(a){a.createObjectStore(U.store,{keyPath:U.keyPath}).createIndex(U.documentTargetsIndex,U.documentTargetsKeyPath,{unique:!0}),a.createObjectStore(b.store,{keyPath:b.keyPath}).createIndex(b.queryTargetsIndexName,b.queryTargetsKeyPath,{unique:!0}),a.createObjectStore(Y.store)}const xd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $l{constructor(n,o,l,h,y,I,k,H,J,re){if(this.allowTabSynchronization=n,this.persistenceKey=o,this.clientId=l,this.Oe=y,this.window=I,this.document=k,this.Fe=J,this.Me=re,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=we=>Promise.resolve(),!$l.bt())throw new Ye(Be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new m_(this,h),this.We=o+"main",this.N=new Qf(H),this.Ge=new go(this.We,11,new op(this.N)),this.ze=new np(this.referenceDelegate,this.N),this.Ht=new um,this.He=new sp(this.N,this.Ht),this.Je=new Xf,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===re&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ye(Be.FAILED_PRECONDITION,xd);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.ze.getHighestSequenceNumber(n))}).then(n=>{this.Le=new q(n,this.Fe)}).then(()=>{this.Be=!0}).catch(n=>(this.Ge&&this.Ge.close(),Promise.reject(n)))}nn(n){var o=this;return this.Qe=function(){var l=(0,se.Z)(function*(h){if(o.started)return n(h)});return function(h){return l.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.Ge.xt(function(){var o=(0,se.Z)(function*(l){null===l.newVersion&&(yield n())});return function(l){return o.apply(this,arguments)}}())}setNetworkEnabled(n){var o=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,se.Z)(function*(){o.started&&(yield o.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>Md(n).put(new $e(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(n).next(o=>{o||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(n)).next(o=>this.isPrimary&&!o?this.on(n).next(()=>!1):!!o&&this.an(n).next(()=>!0))).catch(n=>{if(xa(n))return at("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return at("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Oe.enqueueRetryable(()=>this.Qe(n)),this.isPrimary=n})}sn(n){return Nd(n).get(Ps.key).next(o=>qe.resolve(this.cn(o)))}un(n){return Md(n).delete(this.clientId)}hn(){var n=this;return(0,se.Z)(function*(){if(n.isPrimary&&!n.ln(n.je,18e5)){n.je=Date.now();const o=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",l=>{const h=xi(l,$e.store);return h.Lt().next(y=>{const I=n.fn(y,18e5),k=y.filter(H=>-1===I.indexOf(H));return qe.forEach(k,H=>h.delete(H.clientId)).next(()=>k)})}).catch(()=>[]);if(n.Ye)for(const l of o)n.Ye.removeItem(n.dn(l.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(n){return!!n&&n.ownerId===this.clientId}rn(n){return this.Me?qe.resolve(!0):Nd(n).get(Ps.key).next(o=>{if(null!==o&&this.ln(o.leaseTimestampMs,5e3)&&!this.wn(o.ownerId)){if(this.cn(o)&&this.networkEnabled)return!0;if(!this.cn(o)){if(!o.allowTabSynchronization)throw new Ye(Be.FAILED_PRECONDITION,xd);return!1}}return!(!this.networkEnabled||!this.inForeground)||Md(n).Lt().next(l=>void 0===this.fn(l,5e3).find(h=>{if(this.clientId!==h.clientId){const I=!this.inForeground&&h.inForeground,k=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||I&&k)return!0}return!1}))}).next(o=>(this.isPrimary!==o&&at("IndexedDbPersistence",`Client ${o?"is":"is not"} eligible for a primary lease.`),o))}shutdown(){var n=this;return(0,se.Z)(function*(){n.Be=!1,n._n(),n.Ke&&(n.Ke.cancel(),n.Ke=null),n.mn(),n.gn(),yield n.Ge.runTransaction("shutdown","readwrite",[Ps.store,$e.store],o=>{const l=new bd(o,q.T);return n.on(l).next(()=>n.un(l))}),n.Ge.close(),n.yn()})()}fn(n,o){return n.filter(l=>this.ln(l.updateTimeMs,o)&&!this.wn(l.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",n=>Md(n).Lt().next(o=>this.fn(o,18e5).map(l=>l.clientId)))}get started(){return this.Be}getMutationQueue(n){return tp.Yt(n,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(n,o,l){let y;return at("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===o?"readonly":"readwrite",en,I=>(y=new bd(I,this.Le?this.Le.next():q.T),"readwrite-primary"===o?this.sn(y).next(k=>!!k||this.rn(y)).next(k=>{if(!k)throw wr(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Ye(Be.FAILED_PRECONDITION,Kt);return l(y)}).next(k=>this.an(y).next(()=>k)):this.En(y).next(()=>l(y)))).then(I=>(y.raiseOnCommittedEvent(),I))}En(n){return Nd(n).get(Ps.key).next(o=>{if(null!==o&&this.ln(o.leaseTimestampMs,5e3)&&!this.wn(o.ownerId)&&!this.cn(o)&&!(this.Me||this.allowTabSynchronization&&o.allowTabSynchronization))throw new Ye(Be.FAILED_PRECONDITION,xd)})}an(n){const o=new Ps(this.clientId,this.allowTabSynchronization,Date.now());return Nd(n).put(Ps.key,o)}static bt(){return go.bt()}on(n){const o=Nd(n);return o.get(Ps.key).next(l=>this.cn(l)?(at("IndexedDbPersistence","Releasing primary lease."),o.delete(Ps.key)):qe.resolve())}ln(n,o){const l=Date.now();return!(n<l-o||n>l&&(wr(`Detected an update time that is in the future: ${n} > ${l}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Ue=()=>{this._n(),(0,Ve.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(n){var o;try{const l=null!==(null===(o=this.Ye)||void 0===o?void 0:o.getItem(this.dn(n)));return at("IndexedDbPersistence",`Client '${n}' ${l?"is":"is not"} zombied in LocalStorage`),l}catch(l){return wr("IndexedDbPersistence","Failed to get zombied client id.",l),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){wr("Failed to set zombie client id.",n)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}dn(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function Nd(a){return xi(a,Ps.store)}function Md(a){return xi(a,$e.store)}function up(a,n){let o=a.projectId;return a.isDefaultDatabase||(o+="."+a.database),"firestore/"+n+"/"+o+"/"}class y_{constructor(n,o){this.progress=n,this.Tn=o}}class lp{constructor(n,o,l){this.He=n,this.In=o,this.Ht=l}An(n,o){return this.In.getAllMutationBatchesAffectingDocumentKey(n,o).next(l=>this.Rn(n,o,l))}Rn(n,o,l){return this.He.getEntry(n,o).next(h=>{for(const y of l)y.applyToLocalView(h);return h})}bn(n,o){n.forEach((l,h)=>{for(const y of o)y.applyToLocalView(h)})}Pn(n,o){return this.He.getEntries(n,o).next(l=>this.vn(n,l).next(()=>l))}vn(n,o){return this.In.getAllMutationBatchesAffectingDocumentKeys(n,o).next(l=>this.bn(o,l))}getDocumentsMatchingQuery(n,o,l){return mt.isDocumentKey((h=o).path)&&null===h.collectionGroup&&0===h.filters.length?this.Vn(n,o.path):$r(o)?this.Sn(n,o,l):this.Dn(n,o,l);var h}Vn(n,o){return this.An(n,new mt(o)).next(l=>{let h=ud();return l.isFoundDocument()&&(h=h.insert(l.key,l)),h})}Sn(n,o,l){const h=o.collectionGroup;let y=ud();return this.Ht.getCollectionParents(n,h).next(I=>qe.forEach(I,k=>{const H=(J=o,re=k.child(h),new sa(re,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,re;return this.Dn(n,H,l).next(J=>{J.forEach((re,we)=>{y=y.insert(re,we)})})}).next(()=>y))}Dn(n,o,l){let h,y;return this.He.getDocumentsMatchingQuery(n,o,l).next(I=>(h=I,this.In.getAllMutationBatchesAffectingQuery(n,o))).next(I=>(y=I,this.Cn(n,y,h).next(k=>{h=k;for(const H of y)for(const J of H.mutations){const re=J.key;let we=h.get(re);null==we&&(we=xr.newInvalidDocument(re),h=h.insert(re,we)),oa(J,we,H.localWriteTime),we.isFoundDocument()||(h=h.remove(re))}}))).next(()=>(h.forEach((I,k)=>{Qu(o,k)||(h=h.remove(I))}),h))}Cn(n,o,l){let h=rr();for(const I of o)for(const k of I.mutations)k instanceof ua&&null===l.get(k.key)&&(h=h.add(k.key));let y=l;return this.He.getEntries(n,h).next(I=>(I.forEach((k,H)=>{H.isFoundDocument()&&(y=y.insert(k,H))}),y))}}class Od{constructor(n,o,l,h){this.targetId=n,this.fromCache=o,this.Nn=l,this.xn=h}static kn(n,o){let l=rr(),h=rr();for(const y of o.docChanges)switch(y.type){case 0:l=l.add(y.doc.key);break;case 1:h=h.add(y.doc.key)}return new Od(n,o.fromCache,l,h)}}class cp{$n(n){this.On=n}getDocumentsMatchingQuery(n,o,l,h){return 0===(y=o).filters.length&&null===y.limit&&null==y.startAt&&null==y.endAt&&(0===y.explicitOrderBy.length||1===y.explicitOrderBy.length&&y.explicitOrderBy[0].field.isKeyField())||l.isEqual(Tt.min())?this.Fn(n,o):this.On.Pn(n,h).next(y=>{const I=this.Mn(o,y);return(Tu(o)||ba(o))&&this.Ln(o.limitType,I,h,l)?this.Fn(n,o):(jo()<=Zt.in.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),gc(o)),this.On.getDocumentsMatchingQuery(n,o,l).next(k=>(I.forEach(H=>{k=k.insert(H.key,H)}),k)))});var y}Mn(n,o){let l=new ii(ch(n));return o.forEach((h,y)=>{Qu(n,y)&&(l=l.add(y))}),l}Ln(n,o,l,h){if(l.size!==o.size)return!0;const y="F"===n?o.last():o.first();return!!y&&(y.hasPendingWrites||y.version.compareTo(h)>0)}Fn(n,o){return jo()<=Zt.in.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",gc(o)),this.On.getDocumentsMatchingQuery(n,o,Tt.min())}}class DE{constructor(n,o,l,h){this.persistence=n,this.Bn=o,this.N=h,this.Un=new Nr(Me),this.qn=new jl(y=>Zu(y),tu),this.Kn=Tt.min(),this.In=n.getMutationQueue(l),this.jn=n.getRemoteDocumentCache(),this.ze=n.getTargetCache(),this.Qn=new lp(this.jn,this.In,this.persistence.getIndexManager()),this.Je=n.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",o=>n.collect(o,this.Un))}}function dp(a,n,o,l){return new DE(a,n,o,l)}function gm(a,n){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,se.Z)(function*(a,n){const o=ft(a);let l=o.In,h=o.Qn;const y=yield o.persistence.runTransaction("Handle user change","readonly",I=>{let k;return o.In.getAllMutationBatches(I).next(H=>(k=H,l=o.persistence.getMutationQueue(n),h=new lp(o.jn,l,o.persistence.getIndexManager()),l.getAllMutationBatches(I))).next(H=>{const J=[],re=[];let we=rr();for(const We of k){J.push(We.batchId);for(const et of We.mutations)we=we.add(et.key)}for(const We of H){re.push(We.batchId);for(const et of We.mutations)we=we.add(et.key)}return h.Pn(I,we).next(We=>({Wn:We,removedBatchIds:J,addedBatchIds:re}))})});return o.In=l,o.Qn=h,o.Bn.$n(o.Qn),y})).apply(this,arguments)}function __(a,n){const o=ft(a);return o.persistence.runTransaction("Acknowledge batch","readwrite-primary",l=>{const h=n.batch.keys(),y=o.jn.newChangeBuffer({trackRemovals:!0});return function(I,k,H,J){const re=H.batch,we=re.keys();let We=qe.resolve();return we.forEach(et=>{We=We.next(()=>J.getEntry(k,et)).next(_t=>{const Ut=H.docVersions.get(et);Ht(null!==Ut),_t.version.compareTo(Ut)<0&&(re.applyToRemoteDocument(_t,H),_t.isValidDocument()&&J.addEntry(_t,H.commitVersion))})}),We.next(()=>I.In.removeMutationBatch(k,re))}(o,l,n,y).next(()=>y.apply(l)).next(()=>o.In.performConsistencyCheck(l)).next(()=>o.Qn.Pn(l,h))})}function mm(a){const n=ft(a);return n.persistence.runTransaction("Get last remote snapshot version","readonly",o=>n.ze.getLastRemoteSnapshotVersion(o))}function Pa(a,n){const o=ft(a),l=n.snapshotVersion;let h=o.Un;return o.persistence.runTransaction("Apply remote event","readwrite-primary",y=>{const I=o.jn.newChangeBuffer({trackRemovals:!0});h=o.Un;const k=[];n.targetChanges.forEach((J,re)=>{const we=h.get(re);if(!we)return;k.push(o.ze.removeMatchingKeys(y,J.removedDocuments,re).next(()=>o.ze.addMatchingKeys(y,J.addedDocuments,re)));const We=J.resumeToken;if(We.approximateByteSize()>0){const et=we.withResumeToken(We,l).withSequenceNumber(y.currentSequenceNumber);h=h.insert(re,et),_t=we,cn=J,Ht((Ut=et).resumeToken.approximateByteSize()>0),(0===_t.resumeToken.approximateByteSize()||Ut.snapshotVersion.toMicroseconds()-_t.snapshotVersion.toMicroseconds()>=3e8||cn.addedDocuments.size+cn.modifiedDocuments.size+cn.removedDocuments.size>0)&&k.push(o.ze.updateTargetData(y,et))}var _t,Ut,cn});let H=Do();if(n.documentUpdates.forEach((J,re)=>{n.resolvedLimboDocuments.has(J)&&k.push(o.persistence.referenceDelegate.updateLimboDocument(y,J))}),k.push(ym(y,I,n.documentUpdates,l,void 0).next(J=>{H=J})),!l.isEqual(Tt.min())){const J=o.ze.getLastRemoteSnapshotVersion(y).next(re=>o.ze.setTargetsMetadata(y,y.currentSequenceNumber,l));k.push(J)}return qe.waitFor(k).next(()=>I.apply(y)).next(()=>o.Qn.vn(y,H)).next(()=>H)}).then(y=>(o.Un=h,y))}function ym(a,n,o,l,h){let y=rr();return o.forEach(I=>y=y.add(I)),n.getEntries(a,y).next(I=>{let k=Do();return o.forEach((H,J)=>{const re=I.get(H),we=(null==h?void 0:h.get(H))||l;J.isNoDocument()&&J.version.isEqual(Tt.min())?(n.removeEntry(H,we),k=k.insert(H,J)):!re.isValidDocument()||J.version.compareTo(re.version)>0||0===J.version.compareTo(re.version)&&re.hasPendingWrites?(n.addEntry(J,we),k=k.insert(H,J)):at("LocalStore","Ignoring outdated watch update for ",H,". Current version:",re.version," Watch version:",J.version)}),k})}function _m(a,n){const o=ft(a);return o.persistence.runTransaction("Get next mutation batch","readonly",l=>(void 0===n&&(n=-1),o.In.getNextMutationBatchAfterBatchId(l,n)))}function Mc(a,n){const o=ft(a);return o.persistence.runTransaction("Allocate target","readwrite",l=>{let h;return o.ze.getTargetData(l,n).next(y=>y?(h=y,qe.resolve(h)):o.ze.allocateTargetId(l).next(I=>(h=new Vl(n,I,0,l.currentSequenceNumber),o.ze.addTargetData(l,h).next(()=>h))))}).then(l=>{const h=o.Un.get(l.targetId);return(null===h||l.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(o.Un=o.Un.insert(l.targetId,l),o.qn.set(n,l.targetId)),l})}function Oc(a,n,o){return hp.apply(this,arguments)}function hp(){return(hp=(0,se.Z)(function*(a,n,o){const l=ft(a),h=l.Un.get(n),y=o?"readwrite":"readwrite-primary";try{o||(yield l.persistence.runTransaction("Release target",y,I=>l.persistence.referenceDelegate.removeTarget(I,h)))}catch(I){if(!xa(I))throw I;at("LocalStore",`Failed to update sequence numbers for target ${n}: ${I}`)}l.Un=l.Un.remove(n),l.qn.delete(h.target)})).apply(this,arguments)}function Ah(a,n,o){const l=ft(a);let h=Tt.min(),y=rr();return l.persistence.runTransaction("Execute query","readonly",I=>function(k,H,J){const re=ft(k),we=re.qn.get(J);return void 0!==we?qe.resolve(re.Un.get(we)):re.ze.getTargetData(H,J)}(l,I,qo(n)).next(k=>{if(k)return h=k.lastLimboFreeSnapshotVersion,l.ze.getMatchingKeysForTargetId(I,k.targetId).next(H=>{y=H})}).next(()=>l.Bn.getDocumentsMatchingQuery(I,n,o?h:Tt.min(),o?y:rr())).next(k=>({documents:k,Gn:y})))}function fp(a,n){const o=ft(a),l=ft(o.ze),h=o.Un.get(n);return h?Promise.resolve(h.target):o.persistence.runTransaction("Get target data","readonly",y=>l.Et(y,n).next(I=>I?I.target:null))}function vm(a){const n=ft(a);return n.persistence.runTransaction("Get new document changes","readonly",o=>function(l,h,y){const I=ft(l);let k=Do(),H=Id(y);const J=Oa(h),re=IDBKeyRange.lowerBound(H,!0);return J.Kt({index:f.readTimeIndex,range:re},(we,We)=>{const et=am(I.N,We);k=k.insert(et.key,et),H=We.readTime}).next(()=>({Tn:k,readTime:Ch(H)}))}(n.jn,o,n.Kn)).then(({Tn:o,readTime:l})=>(n.Kn=l,o))}function pp(){return(pp=(0,se.Z)(function*(a){const n=ft(a);return n.persistence.runTransaction("Synchronize last document change read time","readonly",o=>function(l){const h=Oa(l);let y=Tt.min();return h.Kt({index:f.readTimeIndex,reverse:!0},(I,k,H)=>{k.readTime&&(y=Ch(k.readTime)),H.done()}).next(()=>y)}(o)).then(o=>{n.Kn=o})})).apply(this,arguments)}function Rh(){return(Rh=(0,se.Z)(function*(a,n,o,l){const h=ft(a);let y=rr(),I=Do(),k=fh();for(const re of o){const we=n.zn(re.metadata.name);re.document&&(y=y.add(we)),I=I.insert(we,n.Hn(re)),k=k.insert(we,n.Jn(re.metadata.readTime))}const H=h.jn.newChangeBuffer({trackRemovals:!0}),J=yield Mc(h,(re=l,qo(Nl(yn.fromString(`__bundle__/docs/${re}`)))));var re;return h.persistence.runTransaction("Apply bundle documents","readwrite",re=>ym(re,H,I,Tt.min(),k).next(we=>(H.apply(re),we)).next(we=>h.ze.removeMatchingKeysForTargetId(re,J.targetId).next(()=>h.ze.addMatchingKeys(re,y,J.targetId)).next(()=>h.Qn.vn(re,we)).next(()=>we)))})).apply(this,arguments)}function Em(a,n){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,se.Z)(function*(a,n,o=rr()){const l=yield Mc(a,qo(Dd(n.bundledQuery))),h=ft(a);return h.persistence.runTransaction("Save named query","readwrite",y=>{const I=ci(n.readTime);if(l.snapshotVersion.compareTo(I)>=0)return h.Je.saveNamedQuery(y,n);const k=l.withResumeToken(T.EMPTY_BYTE_STRING,I);return h.Un=h.Un.insert(k.targetId,k),h.ze.updateTargetData(y,k).next(()=>h.ze.removeMatchingKeysForTargetId(y,l.targetId)).next(()=>h.ze.addMatchingKeys(y,o,l.targetId)).next(()=>h.Je.saveNamedQuery(y,n))})})).apply(this,arguments)}class ka{constructor(n){this.N=n,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(n,o){return qe.resolve(this.Yn.get(o))}saveBundleMetadata(n,o){var l;return this.Yn.set(o.id,{id:(l=o).id,version:l.version,createTime:ci(l.createTime)}),qe.resolve()}getNamedQuery(n,o){return qe.resolve(this.Xn.get(o))}saveNamedQuery(n,o){return this.Xn.set(o.name,{name:(l=o).name,query:Dd(l.bundledQuery),readTime:ci(l.readTime)}),qe.resolve();var l}}class xh{constructor(){this.Zn=new ii(ms.ts),this.es=new ii(ms.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(n,o){const l=new ms(n,o);this.Zn=this.Zn.add(l),this.es=this.es.add(l)}ss(n,o){n.forEach(l=>this.addReference(l,o))}removeReference(n,o){this.rs(new ms(n,o))}os(n,o){n.forEach(l=>this.removeReference(l,o))}cs(n){const o=new mt(new yn([])),l=new ms(o,n),h=new ms(o,n+1),y=[];return this.es.forEachInRange([l,h],I=>{this.rs(I),y.push(I.key)}),y}us(){this.Zn.forEach(n=>this.rs(n))}rs(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}hs(n){const o=new mt(new yn([])),l=new ms(o,n),h=new ms(o,n+1);let y=rr();return this.es.forEachInRange([l,h],I=>{y=y.add(I.key)}),y}containsKey(n){const o=new ms(n,0),l=this.Zn.firstAfterOrEqual(o);return null!==l&&n.isEqual(l.key)}}class ms{constructor(n,o){this.key=n,this.ls=o}static ts(n,o){return mt.comparator(n.key,o.key)||Me(n.ls,o.ls)}static ns(n,o){return Me(n.ls,o.ls)||mt.comparator(n.key,o.key)}}class gp{constructor(n,o){this.Ht=n,this.referenceDelegate=o,this.In=[],this.fs=1,this.ds=new ii(ms.ts)}checkEmpty(n){return qe.resolve(0===this.In.length)}addMutationBatch(n,o,l,h){const y=this.fs;this.fs++;const I=new Ks(y,o,l,h);this.In.push(I);for(const k of h)this.ds=this.ds.add(new ms(k.key,y)),this.Ht.addToCollectionParentIndex(n,k.key.path.popLast());return qe.resolve(I)}lookupMutationBatch(n,o){return qe.resolve(this.ws(o))}getNextMutationBatchAfterBatchId(n,o){const h=this._s(o+1),y=h<0?0:h;return qe.resolve(this.In.length>y?this.In[y]:null)}getHighestUnacknowledgedBatchId(){return qe.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(n){return qe.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(n,o){const l=new ms(o,0),h=new ms(o,Number.POSITIVE_INFINITY),y=[];return this.ds.forEachInRange([l,h],I=>{const k=this.ws(I.ls);y.push(k)}),qe.resolve(y)}getAllMutationBatchesAffectingDocumentKeys(n,o){let l=new ii(Me);return o.forEach(h=>{const y=new ms(h,0),I=new ms(h,Number.POSITIVE_INFINITY);this.ds.forEachInRange([y,I],k=>{l=l.add(k.ls)})}),qe.resolve(this.gs(l))}getAllMutationBatchesAffectingQuery(n,o){const l=o.path,h=l.length+1;let y=l;mt.isDocumentKey(y)||(y=y.child(""));const I=new ms(new mt(y),0);let k=new ii(Me);return this.ds.forEachWhile(H=>{const J=H.key.path;return!!l.isPrefixOf(J)&&(J.length===h&&(k=k.add(H.ls)),!0)},I),qe.resolve(this.gs(k))}gs(n){const o=[];return n.forEach(l=>{const h=this.ws(l);null!==h&&o.push(h)}),o}removeMutationBatch(n,o){Ht(0===this.ys(o.batchId,"removed")),this.In.shift();let l=this.ds;return qe.forEach(o.mutations,h=>{const y=new ms(h.key,o.batchId);return l=l.delete(y),this.referenceDelegate.markPotentiallyOrphaned(n,h.key)}).next(()=>{this.ds=l})}te(n){}containsKey(n,o){const l=new ms(o,0),h=this.ds.firstAfterOrEqual(l);return qe.resolve(o.isEqual(h&&h.key))}performConsistencyCheck(n){return qe.resolve()}ys(n,o){return this._s(n)}_s(n){return 0===this.In.length?0:n-this.In[0].batchId}ws(n){const o=this._s(n);return o<0||o>=this.In.length?null:this.In[o]}}class Pu{constructor(n,o){this.Ht=n,this.ps=o,this.docs=new Nr(mt.comparator),this.size=0}addEntry(n,o,l){const h=o.key,y=this.docs.get(h),I=y?y.size:0,k=this.ps(o);return this.docs=this.docs.insert(h,{document:o.clone(),size:k,readTime:l}),this.size+=k-I,this.Ht.addToCollectionParentIndex(n,h.path.popLast())}removeEntry(n){const o=this.docs.get(n);o&&(this.docs=this.docs.remove(n),this.size-=o.size)}getEntry(n,o){const l=this.docs.get(o);return qe.resolve(l?l.document.clone():xr.newInvalidDocument(o))}getEntries(n,o){let l=Do();return o.forEach(h=>{const y=this.docs.get(h);l=l.insert(h,y?y.document.clone():xr.newInvalidDocument(h))}),qe.resolve(l)}getDocumentsMatchingQuery(n,o,l){let h=Do();const y=new mt(o.path.child("")),I=this.docs.getIteratorFrom(y);for(;I.hasNext();){const{key:k,value:{document:H,readTime:J}}=I.getNext();if(!o.path.isPrefixOf(k.path))break;J.compareTo(l)<=0||Qu(o,H)&&(h=h.insert(H.key,H.clone()))}return qe.resolve(h)}Es(n,o){return qe.forEach(this.docs,l=>o(l))}newChangeBuffer(n){return new mp(this)}getSize(n){return qe.resolve(this.size)}}class mp extends ip{constructor(n){super(),this.Se=n}applyChanges(n){const o=[];return this.changes.forEach((l,h)=>{h.document.isValidDocument()?o.push(this.Se.addEntry(n,h.document,this.getReadTime(l))):this.Se.removeEntry(l)}),qe.waitFor(o)}getFromCache(n,o){return this.Se.getEntry(n,o)}getAllFromCache(n,o){return this.Se.getEntries(n,o)}}class wm{constructor(n){this.persistence=n,this.Ts=new jl(o=>Zu(o),tu),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Is=0,this.As=new xh,this.targetCount=0,this.Rs=ll.se()}forEachTarget(n,o){return this.Ts.forEach((l,h)=>o(h)),qe.resolve()}getLastRemoteSnapshotVersion(n){return qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return qe.resolve(this.Is)}allocateTargetId(n){return this.highestTargetId=this.Rs.next(),qe.resolve(this.highestTargetId)}setTargetsMetadata(n,o,l){return l&&(this.lastRemoteSnapshotVersion=l),o>this.Is&&(this.Is=o),qe.resolve()}ae(n){this.Ts.set(n.target,n);const o=n.targetId;o>this.highestTargetId&&(this.Rs=new ll(o),this.highestTargetId=o),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}addTargetData(n,o){return this.ae(o),this.targetCount+=1,qe.resolve()}updateTargetData(n,o){return this.ae(o),qe.resolve()}removeTargetData(n,o){return this.Ts.delete(o.target),this.As.cs(o.targetId),this.targetCount-=1,qe.resolve()}removeTargets(n,o,l){let h=0;const y=[];return this.Ts.forEach((I,k)=>{k.sequenceNumber<=o&&null===l.get(k.targetId)&&(this.Ts.delete(I),y.push(this.removeMatchingKeysForTargetId(n,k.targetId)),h++)}),qe.waitFor(y).next(()=>h)}getTargetCount(n){return qe.resolve(this.targetCount)}getTargetData(n,o){const l=this.Ts.get(o)||null;return qe.resolve(l)}addMatchingKeys(n,o,l){return this.As.ss(o,l),qe.resolve()}removeMatchingKeys(n,o,l){this.As.os(o,l);const h=this.persistence.referenceDelegate,y=[];return h&&o.forEach(I=>{y.push(h.markPotentiallyOrphaned(n,I))}),qe.waitFor(y)}removeMatchingKeysForTargetId(n,o){return this.As.cs(o),qe.resolve()}getMatchingKeysForTargetId(n,o){const l=this.As.hs(o);return qe.resolve(l)}containsKey(n,o){return qe.resolve(this.As.containsKey(o))}}class yp{constructor(n,o){this.bs={},this.Le=new q(0),this.Be=!1,this.Be=!0,this.referenceDelegate=n(this),this.ze=new wm(this),this.Ht=new xc,this.He=new Pu(this.Ht,l=>this.referenceDelegate.Ps(l)),this.N=new Qf(o),this.Je=new ka(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(n){let o=this.bs[n.toKey()];return o||(o=new gp(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=o),o}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(n,o,l){at("MemoryPersistence","Starting transaction:",n);const h=new TE(this.Le.next());return this.referenceDelegate.vs(),l(h).next(y=>this.referenceDelegate.Vs(h).next(()=>y)).toPromise().then(y=>(h.raiseOnCommittedEvent(),y))}Ss(n,o){return qe.or(Object.values(this.bs).map(l=>()=>l.containsKey(n,o)))}}class TE extends yi{constructor(n){super(),this.currentSequenceNumber=n}}class Nh{constructor(n){this.persistence=n,this.Ds=new xh,this.Cs=null}static Ns(n){return new Nh(n)}get xs(){if(this.Cs)return this.Cs;throw Rt()}addReference(n,o,l){return this.Ds.addReference(l,o),this.xs.delete(l.toString()),qe.resolve()}removeReference(n,o,l){return this.Ds.removeReference(l,o),this.xs.add(l.toString()),qe.resolve()}markPotentiallyOrphaned(n,o){return this.xs.add(o.toString()),qe.resolve()}removeTarget(n,o){this.Ds.cs(o.targetId).forEach(h=>this.xs.add(h.toString()));const l=this.persistence.getTargetCache();return l.getMatchingKeysForTargetId(n,o.targetId).next(h=>{h.forEach(y=>this.xs.add(y.toString()))}).next(()=>l.removeTargetData(n,o))}vs(){this.Cs=new Set}Vs(n){const o=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qe.forEach(this.xs,l=>{const h=mt.fromPath(l);return this.ks(n,h).next(y=>{y||o.removeEntry(h)})}).next(()=>(this.Cs=null,o.apply(n)))}updateLimboDocument(n,o){return this.ks(n,o).next(l=>{l?this.xs.delete(o.toString()):this.xs.add(o.toString())})}Ps(n){return 0}ks(n,o){return qe.or([()=>qe.resolve(this.Ds.containsKey(o)),()=>this.persistence.getTargetCache().containsKey(n,o),()=>this.persistence.Ss(n,o)])}}function E_(a,n){return`firestore_clients_${a}_${n}`}function uu(a,n,o){let l=`firestore_mutations_${a}_${o}`;return n.isAuthenticated()&&(l+=`_${n.uid}`),l}function kc(a,n){return`firestore_targets_${a}_${n}`}class Hl{constructor(n,o,l,h){this.user=n,this.batchId=o,this.state=l,this.error=h}static $s(n,o,l){const h=JSON.parse(l);let y,I="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return I&&h.error&&(I="string"==typeof h.error.message&&"string"==typeof h.error.code,I&&(y=new Ye(h.error.code,h.error.message))),I?new Hl(n,o,h.state,y):(wr("SharedClientState",`Failed to parse mutation state for ID '${o}': ${l}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Gl{constructor(n,o,l){this.targetId=n,this.state=o,this.error=l}static $s(n,o){const l=JSON.parse(o);let h,y="object"==typeof l&&-1!==["not-current","current","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return y&&l.error&&(y="string"==typeof l.error.message&&"string"==typeof l.error.code,y&&(h=new Ye(l.error.code,l.error.message))),y?new Gl(n,l.state,h):(wr("SharedClientState",`Failed to parse target state for ID '${n}': ${o}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class _p{constructor(n,o){this.clientId=n,this.activeTargetIds=o}static $s(n,o){const l=JSON.parse(o);let h="object"==typeof l&&l.activeTargetIds instanceof Array,y=la();for(let I=0;h&&I<l.activeTargetIds.length;++I)h=pr(l.activeTargetIds[I]),y=y.add(l.activeTargetIds[I]);return h?new _p(n,y):(wr("SharedClientState",`Failed to parse client data for instance '${n}': ${o}`),null)}}class vp{constructor(n,o){this.clientId=n,this.onlineState=o}static $s(n){const o=JSON.parse(n);return"object"==typeof o&&-1!==["Unknown","Online","Offline"].indexOf(o.onlineState)&&"string"==typeof o.clientId?new vp(o.clientId,o.onlineState):(wr("SharedClientState",`Failed to parse online state: ${n}`),null)}}class Mh{constructor(){this.activeTargetIds=la()}Fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Ms(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Os(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class Cm{constructor(n,o,l,h,y){this.window=n,this.Oe=o,this.persistenceKey=l,this.Ls=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Nr(Me),this.started=!1,this.Ks=[];const I=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=y,this.js=E_(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new Mh),this.Ws=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(k){return`firestore_bundle_loaded_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,se.Z)(function*(){const o=yield n.syncEngine.pn();for(const h of o){if(h===n.Ls)continue;const y=n.getItem(E_(n.persistenceKey,h));if(y){const I=_p.$s(h,y);I&&(n.qs=n.qs.insert(I.clientId,I))}}n.Ys();const l=n.storage.getItem(n.Hs);if(l){const h=n.Xs(l);h&&n.Zs(h)}for(const h of n.Ks)n.Us(h);n.Ks=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Qs,JSON.stringify(n))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(n){let o=!1;return this.qs.forEach((l,h)=>{h.activeTargetIds.has(n)&&(o=!0)}),o}addPendingMutation(n){this.ei(n,"pending")}updateMutationState(n,o,l){this.ei(n,o,l),this.ni(n)}addLocalQueryTarget(n){let o="not-current";if(this.isActiveQueryTarget(n)){const l=this.storage.getItem(kc(this.persistenceKey,n));if(l){const h=Gl.$s(n,l);h&&(o=h.state)}}return this.si.Fs(n),this.Ys(),o}removeLocalQueryTarget(n){this.si.Ms(n),this.Ys()}isLocalQueryTarget(n){return this.si.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(kc(this.persistenceKey,n))}updateQueryState(n,o,l){this.ii(n,o,l)}handleUserChange(n,o,l){o.forEach(h=>{this.ni(h)}),this.currentUser=n,l.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(n){this.ri(n)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(n){const o=this.storage.getItem(n);return at("SharedClientState","READ",n,o),o}setItem(n,o){at("SharedClientState","SET",n,o),this.storage.setItem(n,o)}removeItem(n){at("SharedClientState","REMOVE",n),this.storage.removeItem(n)}Us(n){var o=this;const l=n;if(l.storageArea===this.storage){if(at("SharedClientState","EVENT",l.key,l.newValue),l.key===this.js)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,se.Z)(function*(){if(o.started){if(null!==l.key)if(o.Ws.test(l.key)){if(null==l.newValue){const h=o.ai(l.key);return o.ci(h,null)}{const h=o.ui(l.key,l.newValue);if(h)return o.ci(h.clientId,h)}}else if(o.Gs.test(l.key)){if(null!==l.newValue){const h=o.hi(l.key,l.newValue);if(h)return o.li(h)}}else if(o.zs.test(l.key)){if(null!==l.newValue){const h=o.fi(l.key,l.newValue);if(h)return o.di(h)}}else if(l.key===o.Hs){if(null!==l.newValue){const h=o.Xs(l.newValue);if(h)return o.Zs(h)}}else if(l.key===o.Qs){const h=function(y){let I=q.T;if(null!=y)try{const k=JSON.parse(y);Ht("number"==typeof k),I=k}catch(k){wr("SharedClientState","Failed to read sequence number from WebStorage",k)}return I}(l.newValue);h!==q.T&&o.sequenceNumberHandler(h)}else if(l.key===o.Js)return o.syncEngine.wi()}else o.Ks.push(l)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(n,o,l){const h=new Hl(this.currentUser,n,o,l),y=uu(this.persistenceKey,this.currentUser,n);this.setItem(y,h.Os())}ni(n){const o=uu(this.persistenceKey,this.currentUser,n);this.removeItem(o)}ri(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}ii(n,o,l){const h=kc(this.persistenceKey,n),y=new Gl(n,o,l);this.setItem(h,y.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(n){const o=this.Ws.exec(n);return o?o[1]:null}ui(n,o){const l=this.ai(n);return _p.$s(l,o)}hi(n,o){const l=this.Gs.exec(n),h=Number(l[1]);return Hl.$s(new ei(void 0!==l[2]?l[2]:null),h,o)}fi(n,o){const l=this.zs.exec(n),h=Number(l[1]);return Gl.$s(h,o)}Xs(n){return vp.$s(n)}li(n){var o=this;return(0,se.Z)(function*(){if(n.user.uid===o.currentUser.uid)return o.syncEngine._i(n.batchId,n.state,n.error);at("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}di(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}ci(n,o){const l=o?this.qs.insert(n,o):this.qs.remove(n),h=this.ti(this.qs),y=this.ti(l),I=[],k=[];return y.forEach(H=>{h.has(H)||I.push(H)}),h.forEach(H=>{y.has(H)||k.push(H)}),this.syncEngine.gi(I,k).then(()=>{this.qs=l})}Zs(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}ti(n){let o=la();return n.forEach((l,h)=>{o=o.unionWith(h.activeTargetIds)}),o}}class bm{constructor(){this.yi=new Mh,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,o,l){}addLocalQueryTarget(n){return this.yi.Fs(n),this.pi[n]||"not-current"}updateQueryState(n,o,l){this.pi[n]=o}removeLocalQueryTarget(n){this.yi.Ms(n)}isLocalQueryTarget(n){return this.yi.activeTargetIds.has(n)}clearQueryState(n){delete this.pi[n]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(n){return this.yi.activeTargetIds.has(n)}start(){return this.yi=new Mh,Promise.resolve()}handleUserChange(n,o,l){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(){}}class SE{Ei(n){}shutdown(){}}class Ep{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(n){this.bi.push(n)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){at("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.bi)n(0)}Ri(){at("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.bi)n(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Im={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class w_{constructor(n){this.vi=n.vi,this.Vi=n.Vi}Si(n){this.Di=n}Ci(n){this.Ni=n}onMessage(n){this.xi=n}close(){this.Vi()}send(n){this.vi(n)}ki(){this.Di()}$i(n){this.Ni(n)}Oi(n){this.xi(n)}}class wp extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.Fi=(n.ssl?"https":"http")+"://"+n.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(n,o,l,h){const y=this.Bi(n,o);at("RestConnection","Sending: ",y,l);const I={};return this.Ui(I,h),this.qi(n,y,I,l).then(k=>(at("RestConnection","Received: ",k),k),k=>{throw $o("RestConnection",`${n} failed with error: `,k,"url: ",y,"request:",l),k})}Ki(n,o,l,h){return this.Li(n,o,l,h)}Ui(n,o){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+Ns,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o)for(const l in o.authHeaders)o.authHeaders.hasOwnProperty(l)&&(n[l]=o.authHeaders[l])}Bi(n,o){return`${this.Fi}/v1/${o}:${Im[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}qi(n,o,l,h){return new Promise((y,I)=>{const k=new Bo;k.listenOnce(Du.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case tr.NO_ERROR:const J=k.getResponseJson();at("Connection","XHR received:",JSON.stringify(J)),y(J);break;case tr.TIMEOUT:at("Connection",'RPC "'+n+'" timed out'),I(new Ye(Be.DEADLINE_EXCEEDED,"Request time out"));break;case tr.HTTP_ERROR:const re=k.getStatus();if(at("Connection",'RPC "'+n+'" failed with status:',re,"response text:",k.getResponseText()),re>0){const we=k.getResponseJson().error;if(we&&we.status&&we.message){const We=function(et){const _t=et.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(_t)>=0?_t:Be.UNKNOWN}(we.status);I(new Ye(We,we.message))}else I(new Ye(Be.UNKNOWN,"Server responded with status "+k.getStatus()))}else I(new Ye(Be.UNAVAILABLE,"Connection failed."));break;default:Rt()}}finally{at("Connection",'RPC "'+n+'" completed.')}});const H=JSON.stringify(h);k.send(o,"POST",H,l,15)})}ji(n,o){const l=[this.Fi,"/","google.firestore.v1.Firestore","/",n,"/channel"],h=Ja(),y=Iu(),I={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(I.xmlHttpFactory=new Ku({})),this.Ui(I.initMessageHeaders,o),(0,Ve.uI)()||(0,Ve.b$)()||(0,Ve.d)()||(0,Ve.w1)()||(0,Ve.Mn)()||(0,Ve.ru)()||(I.httpHeadersOverwriteParam="$httpHeaders");const k=l.join("");at("Connection","Creating WebChannel: "+k,I);const H=h.createWebChannel(k,I);let J=!1,re=!1;const we=new w_({vi:et=>{re?at("Connection","Not sending because WebChannel is closed:",et):(J||(at("Connection","Opening WebChannel transport."),H.open(),J=!0),at("Connection","WebChannel sending:",et),H.send(et))},Vi:()=>H.close()}),We=(et,_t,Ut)=>{et.listen(_t,cn=>{try{Ut(cn)}catch(hi){setTimeout(()=>{throw hi},0)}})};return We(H,xs.EventType.OPEN,()=>{re||at("Connection","WebChannel transport opened.")}),We(H,xs.EventType.CLOSE,()=>{re||(re=!0,at("Connection","WebChannel transport closed"),we.$i())}),We(H,xs.EventType.ERROR,et=>{re||(re=!0,$o("Connection","WebChannel transport errored:",et),we.$i(new Ye(Be.UNAVAILABLE,"The operation could not be completed")))}),We(H,xs.EventType.MESSAGE,et=>{var _t;if(!re){const Ut=et.data[0];Ht(!!Ut);const cn=Ut,hi=cn.error||(null===(_t=cn[0])||void 0===_t?void 0:_t.error);if(hi){at("Connection","WebChannel received error:",hi);const Js=hi.status;let yu=function(Yc){const th=gr[Yc];if(void 0!==th)return Io(th)}(Js),ma=hi.message;void 0===yu&&(yu=Be.INTERNAL,ma="Unknown error status: "+Js+" with message "+hi.message),re=!0,we.$i(new Ye(yu,ma)),H.close()}else at("Connection","WebChannel received:",Ut),we.Oi(Ut)}}),We(y,Uo.STAT_EVENT,et=>{et.stat===na.PROXY?at("Connection","Detected buffering proxy"):et.stat===na.NOPROXY&&at("Connection","Detected no buffering proxy")}),setTimeout(()=>{we.ki()},0),we}}function C_(){return"undefined"!=typeof window?window:null}function Cp(){return"undefined"!=typeof document?document:null}function Oh(a){return new fd(a,!0)}class Dm{constructor(n,o,l=1e3,h=1.5,y=6e4){this.Oe=n,this.timerId=o,this.Qi=l,this.Wi=h,this.Gi=y,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(n){this.cancel();const o=Math.floor(this.zi+this.Zi()),l=Math.max(0,Date.now()-this.Ji),h=Math.max(0,o-l);h>0&&at("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.zi} ms, delay with jitter: ${o} ms, last attempt: ${l} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,h,()=>(this.Ji=Date.now(),n())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class b_{constructor(n,o,l,h,y,I){this.Oe=n,this.er=l,this.nr=h,this.credentialsProvider=y,this.listener=I,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Dm(n,o)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var n=this;return(0,se.Z)(function*(){n.ar()&&(yield n.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(n){this._r(),this.stream.send(n)}dr(){var n=this;return(0,se.Z)(function*(){if(n.cr())return n.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(n,o){var l=this;return(0,se.Z)(function*(){l._r(),l.rr.cancel(),l.sr++,3!==n?l.rr.reset():o&&o.code===Be.RESOURCE_EXHAUSTED?(wr(o.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),l.rr.Yi()):o&&o.code===Be.UNAUTHENTICATED&&l.credentialsProvider.invalidateToken(),null!==l.stream&&(l.mr(),l.stream.close(),l.stream=null),l.state=n,yield l.listener.Ci(o)})()}mr(){}auth(){this.state=1;const n=this.gr(this.sr),o=this.sr;this.credentialsProvider.getToken().then(l=>{this.sr===o&&this.yr(l)},l=>{n(()=>{const h=new Ye(Be.UNKNOWN,"Fetching auth token failed: "+l.message);return this.pr(h)})})}yr(n){const o=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(()=>{o(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(l=>{o(()=>this.pr(l))}),this.stream.onMessage(l=>{o(()=>this.onMessage(l))})}ur(){var n=this;this.state=4,this.rr.Xi((0,se.Z)(function*(){n.state=0,n.start()}))}pr(n){return at("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(3,n)}gr(n){return o=>{this.Oe.enqueueAndForget(()=>this.sr===n?o():(at("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AE extends b_{constructor(n,o,l,h,y){super(n,"listen_stream_connection_backoff","listen_stream_idle",o,l,y),this.N=h}Er(n){return this.nr.ji("Listen",n)}onMessage(n){this.rr.reset();const o=function(a,n){let o;if("targetChange"in n){const l="NO_CHANGE"===(H=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:Rt(),h=n.targetChange.targetIds||[],y=function(H,J){return H.D?(Ht(void 0===J||"string"==typeof J),T.fromBase64String(J||"")):(Ht(void 0===J||J instanceof Uint8Array),T.fromUint8Array(J||new Uint8Array))}(a,n.targetChange.resumeToken),I=n.targetChange.cause,k=I&&function(H){const J=void 0===H.code?Be.UNKNOWN:Io(H.code);return new Ye(J,H.message||"")}(I);o=new ld(l,h,y,k||null)}else if("documentChange"in n){const l=n.documentChange,h=Zo(a,l.document.name),y=ci(l.document.updateTime),I=new Ri({mapValue:{fields:l.document.fields}}),k=xr.newFoundDocument(h,y,I);o=new ca(l.targetIds||[],l.removedTargetIds||[],k.key,k)}else if("documentDelete"in n){const l=n.documentDelete,h=Zo(a,l.document),y=l.readTime?ci(l.readTime):Tt.min(),I=xr.newNoDocument(h,y);o=new ca([],l.removedTargetIds||[],I.key,I)}else if("documentRemove"in n){const l=n.documentRemove,h=Zo(a,l.document);o=new ca([],l.removedTargetIds||[],h,null)}else{if(!("filter"in n))return Rt();{const l=n.filter,y=new sm(l.count||0);o=new Pl(l.targetId,y)}}var H;return o}(this.N,n),l=function(h){if(!("targetChange"in h))return Tt.min();const y=h.targetChange;return y.targetIds&&y.targetIds.length?Tt.min():y.readTime?ci(y.readTime):Tt.min()}(n);return this.listener.Tr(o,l)}Ir(n){const o={};o.database=su(this.N),o.addTarget=function(h,y){let I;const k=y.target;return I=zo(k)?{documents:yh(h,k)}:{query:Ic(h,k)},I.targetId=y.targetId,y.resumeToken.approximateByteSize()>0?I.resumeToken=Zf(h,y.resumeToken):y.snapshotVersion.compareTo(Tt.min())>0&&(I.readTime=Cc(h,y.snapshotVersion.toTimestamp())),I}(this.N,n);const l=function(a,n){const o=function(l,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Rt()}}(0,n.purpose);return null==o?null:{"goog-listen-tags":o}}(0,n);l&&(o.labels=l),this.wr(o)}Ar(n){const o={};o.database=su(this.N),o.removeTarget=n,this.wr(o)}}class RE extends b_{constructor(n,o,l,h,y){super(n,"write_stream_connection_backoff","write_stream_idle",o,l,y),this.N=h,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(n){return this.nr.ji("Write",n)}onMessage(n){if(Ht(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Rr){this.rr.reset();const o=function(a,n){return a&&a.length>0?(Ht(void 0!==n),a.map(o=>function(l,h){let y=ci(l.updateTime?l.updateTime:h);return y.isEqual(Tt.min())&&(y=ci(h)),new jf(y,l.transformResults||[])}(o,n))):[]}(n.writeResults,n.commitTime),l=ci(n.commitTime);return this.listener.vr(l,o)}return Ht(!n.writeResults||0===n.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const n={};n.database=su(this.N),this.wr(n)}Pr(n){const o={streamToken:this.lastStreamToken,writes:n.map(l=>Qi(this.N,l))};this.wr(o)}}class xE extends class{}{constructor(n,o,l){super(),this.credentials=n,this.nr=o,this.N=l,this.Dr=!1}Cr(){if(this.Dr)throw new Ye(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Li(n,o,l){return this.Cr(),this.credentials.getToken().then(h=>this.nr.Li(n,o,l,h)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Be.UNAUTHENTICATED&&this.credentials.invalidateToken(),h):new Ye(Be.UNKNOWN,h.toString())})}Ki(n,o,l){return this.Cr(),this.credentials.getToken().then(h=>this.nr.Ki(n,o,l,h)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Be.UNAUTHENTICATED&&this.credentials.invalidateToken(),h):new Ye(Be.UNKNOWN,h.toString())})}terminate(){this.Dr=!0}}class NE{constructor(n,o){this.asyncQueue=n,this.onlineStateHandler=o,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.Fr("Offline")))}set(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}Fr(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}Mr(n){const o=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(wr(o),this.$r=!1):at("OnlineStateTracker",o)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class ME{constructor(n,o,l,h,y){var I=this;this.localStore=n,this.datastore=o,this.asyncQueue=l,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=y,this.Qr.Ei(k=>{l.enqueueAndForget((0,se.Z)(function*(){var H;ku(I)&&(at("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,se.Z)(function*(J){const re=ft(J);re.Kr.add(4),yield dl(re),re.Wr.set("Unknown"),re.Kr.delete(4),yield Ph(re)}),function(J){return H.apply(this,arguments)})(I))}))}),this.Wr=new NE(l,h)}}function Ph(a){return lu.apply(this,arguments)}function lu(){return(lu=(0,se.Z)(function*(a){if(ku(a))for(const n of a.jr)yield n(!0)})).apply(this,arguments)}function dl(a){return bp.apply(this,arguments)}function bp(){return(bp=(0,se.Z)(function*(a){for(const n of a.jr)yield n(!1)})).apply(this,arguments)}function Pd(a,n){const o=ft(a);o.qr.has(n.targetId)||(o.qr.set(n.targetId,n),cu(o)?Ip(o):ql(o).cr()&&kh(o,n))}function Wl(a,n){const o=ft(a),l=ql(o);o.qr.delete(n),l.cr()&&Fh(o,n),0===o.qr.size&&(l.cr()?l.lr():ku(o)&&o.Wr.set("Unknown"))}function kh(a,n){a.Gr.Y(n.targetId),ql(a).Ir(n)}function Fh(a,n){a.Gr.Y(n),ql(a).Ar(n)}function Ip(a){a.Gr=new dd({getRemoteKeysForTarget:n=>a.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>a.qr.get(n)||null}),ql(a).start(),a.Wr.Or()}function cu(a){return ku(a)&&!ql(a).ar()&&a.qr.size>0}function ku(a){return 0===ft(a).Kr.size}function Tm(a){a.Gr=void 0}function OE(a){return kd.apply(this,arguments)}function kd(){return(kd=(0,se.Z)(function*(a){a.qr.forEach((n,o)=>{kh(a,n)})})).apply(this,arguments)}function I_(a,n){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,se.Z)(function*(a,n){Tm(a),cu(a)?(a.Wr.Lr(n),Ip(a)):a.Wr.set("Unknown")})).apply(this,arguments)}function D_(a,n,o){return Dp.apply(this,arguments)}function Dp(){return(Dp=(0,se.Z)(function*(a,n,o){if(a.Wr.set("Online"),n instanceof ld&&2===n.state&&n.cause)try{yield(l=(0,se.Z)(function*(h,y){const I=y.cause;for(const k of y.targetIds)h.qr.has(k)&&(yield h.remoteSyncer.rejectListen(k,I),h.qr.delete(k),h.Gr.removeTarget(k))}),function(h,y){return l.apply(this,arguments)})(a,n)}catch(l){at("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),l),yield hl(a,l)}else if(n instanceof ca?a.Gr.rt(n):n instanceof Pl?a.Gr.ft(n):a.Gr.ct(n),!o.isEqual(Tt.min()))try{const l=yield mm(a.localStore);o.compareTo(l)>=0&&(yield function(h,y){const I=h.Gr._t(y);return I.targetChanges.forEach((k,H)=>{if(k.resumeToken.approximateByteSize()>0){const J=h.qr.get(H);J&&h.qr.set(H,J.withResumeToken(k.resumeToken,y))}}),I.targetMismatches.forEach(k=>{const H=h.qr.get(k);if(!H)return;h.qr.set(k,H.withResumeToken(T.EMPTY_BYTE_STRING,H.snapshotVersion)),Fh(h,k);const J=new Vl(H.target,k,1,H.sequenceNumber);kh(h,J)}),h.remoteSyncer.applyRemoteEvent(I)}(a,o))}catch(l){at("RemoteStore","Failed to raise snapshot:",l),yield hl(a,l)}var l})).apply(this,arguments)}function hl(a,n,o){return fl.apply(this,arguments)}function fl(){return(fl=(0,se.Z)(function*(a,n,o){if(!xa(n))throw n;a.Kr.add(1),yield dl(a),a.Wr.set("Offline"),o||(o=()=>mm(a.localStore)),a.asyncQueue.enqueueRetryable((0,se.Z)(function*(){at("RemoteStore","Retrying IndexedDB access"),yield o(),a.Kr.delete(1),yield Ph(a)}))})).apply(this,arguments)}function Vh(a,n){return n().catch(o=>hl(a,o,n))}function Fa(a){return zl.apply(this,arguments)}function zl(){return(zl=(0,se.Z)(function*(a){const n=ft(a),o=pl(n);let l=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;for(;Fc(n);)try{const h=yield _m(n.localStore,l);if(null===h){0===n.Ur.length&&o.lr();break}l=h.batchId,T_(n,h)}catch(h){yield hl(n,h)}Tp(n)&&Sp(n)})).apply(this,arguments)}function Fc(a){return ku(a)&&a.Ur.length<10}function T_(a,n){a.Ur.push(n);const o=pl(a);o.cr()&&o.br&&o.Pr(n.mutations)}function Tp(a){return ku(a)&&!pl(a).ar()&&a.Ur.length>0}function Sp(a){pl(a).start()}function Ap(a){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,se.Z)(function*(a){pl(a).Sr()})).apply(this,arguments)}function Sm(a){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,se.Z)(function*(a){const n=pl(a);for(const o of a.Ur)n.Pr(o.mutations)})).apply(this,arguments)}function S_(a,n,o){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,se.Z)(function*(a,n,o){const l=a.Ur.shift(),h=wh.from(l,n,o);yield Vh(a,()=>a.remoteSyncer.applySuccessfulWrite(h)),yield Fa(a)})).apply(this,arguments)}function PE(a,n){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,se.Z)(function*(a,n){var o;n&&pl(a).br&&(yield(o=(0,se.Z)(function*(l,h){if(hh(y=h.code)&&y!==Be.ABORTED){const I=l.Ur.shift();pl(l).hr(),yield Vh(l,()=>l.remoteSyncer.rejectFailedWrite(I.batchId,h)),yield Fa(l)}var y}),function(l,h){return o.apply(this,arguments)})(a,n)),Tp(a)&&Sp(a)})).apply(this,arguments)}function jh(a,n){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,se.Z)(function*(a,n){const o=ft(a);n?(o.Kr.delete(2),yield Ph(o)):n||(o.Kr.add(2),yield dl(o),o.Wr.set("Unknown"))})).apply(this,arguments)}function ql(a){return a.zr||(a.zr=function(n,o,l){const h=ft(n);return h.Cr(),new AE(o,h.nr,h.credentials,h.N,l)}(a.datastore,a.asyncQueue,{Si:OE.bind(null,a),Ci:I_.bind(null,a),Tr:D_.bind(null,a)}),a.jr.push(function(){var n=(0,se.Z)(function*(o){o?(a.zr.hr(),cu(a)?Ip(a):a.Wr.set("Unknown")):(yield a.zr.stop(),Tm(a))});return function(o){return n.apply(this,arguments)}}())),a.zr}function pl(a){return a.Hr||(a.Hr=function(n,o,l){const h=ft(n);return h.Cr(),new RE(o,h.nr,h.credentials,h.N,l)}(a.datastore,a.asyncQueue,{Si:Ap.bind(null,a),Ci:PE.bind(null,a),Vr:Sm.bind(null,a),vr:S_.bind(null,a)}),a.jr.push(function(){var n=(0,se.Z)(function*(o){o?(a.Hr.hr(),yield Fa(a)):(yield a.Hr.stop(),a.Ur.length>0&&(at("RemoteStore",`Stopping write stream with ${a.Ur.length} pending writes`),a.Ur=[]))});return function(o){return n.apply(this,arguments)}}())),a.Hr}class xp{constructor(n,o,l,h,y){this.asyncQueue=n,this.timerId=o,this.targetTimeMs=l,this.op=h,this.removalCallback=y,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}static createAndSchedule(n,o,l,h,y){const I=Date.now()+l,k=new xp(n,o,I,h,y);return k.start(l),k}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ye(Be.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ys(a,n){if(wr("AsyncQueue",`${n}: ${a}`),xa(a))return new Ye(Be.UNAVAILABLE,`${n}: ${a}`);throw a}class Vc{constructor(n){this.comparator=n?(o,l)=>n(o,l)||mt.comparator(o.key,l.key):(o,l)=>mt.comparator(o.key,l.key),this.keyedMap=ud(),this.sortedSet=new Nr(this.comparator)}static emptySet(n){return new Vc(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const o=this.keyedMap.get(n);return o?this.sortedSet.indexOf(o):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((o,l)=>(n(o),!1))}add(n){const o=this.delete(n.key);return o.copy(o.keyedMap.insert(n.key,n),o.sortedSet.insert(n,null))}delete(n){const o=this.get(n);return o?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(o)):this}isEqual(n){if(!(n instanceof Vc)||this.size!==n.size)return!1;const o=this.sortedSet.getIterator(),l=n.sortedSet.getIterator();for(;o.hasNext();){const h=o.getNext().key,y=l.getNext().key;if(!h.isEqual(y))return!1}return!0}toString(){const n=[];return this.forEach(o=>{n.push(o.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,o){const l=new Vc;return l.comparator=this.comparator,l.keyedMap=n,l.sortedSet=o,l}}class Am{constructor(){this.Jr=new Nr(mt.comparator)}track(n){const o=n.doc.key,l=this.Jr.get(o);l?0!==n.type&&3===l.type?this.Jr=this.Jr.insert(o,n):3===n.type&&1!==l.type?this.Jr=this.Jr.insert(o,{type:l.type,doc:n.doc}):2===n.type&&2===l.type?this.Jr=this.Jr.insert(o,{type:2,doc:n.doc}):2===n.type&&0===l.type?this.Jr=this.Jr.insert(o,{type:0,doc:n.doc}):1===n.type&&0===l.type?this.Jr=this.Jr.remove(o):1===n.type&&2===l.type?this.Jr=this.Jr.insert(o,{type:1,doc:l.doc}):0===n.type&&1===l.type?this.Jr=this.Jr.insert(o,{type:2,doc:n.doc}):Rt():this.Jr=this.Jr.insert(o,n)}Yr(){const n=[];return this.Jr.inorderTraversal((o,l)=>{n.push(l)}),n}}class Ld{constructor(n,o,l,h,y,I,k,H){this.query=n,this.docs=o,this.oldDocs=l,this.docChanges=h,this.mutatedKeys=y,this.fromCache=I,this.syncStateChanged=k,this.excludesMetadataChanges=H}static fromInitialDocuments(n,o,l,h){const y=[];return o.forEach(I=>{y.push({type:0,doc:I})}),new Ld(n,o,Vc.emptySet(o),y,l,h,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&Ta(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const o=this.docChanges,l=n.docChanges;if(o.length!==l.length)return!1;for(let h=0;h<o.length;h++)if(o[h].type!==l[h].type||!o[h].doc.isEqual(l[h].doc))return!1;return!0}}class kE{constructor(){this.Xr=void 0,this.listeners=[]}}class Rm{constructor(){this.queries=new jl(n=>pc(n),Ta),this.onlineState="Unknown",this.Zr=new Set}}function xm(a,n){return Np.apply(this,arguments)}function Np(){return(Np=(0,se.Z)(function*(a,n){const o=ft(a),l=n.query;let h=!1,y=o.queries.get(l);if(y||(h=!0,y=new kE),h)try{y.Xr=yield o.onListen(l)}catch(I){const k=ys(I,`Initialization of query '${gc(n.query)}' failed`);return void n.onError(k)}o.queries.set(l,y),y.listeners.push(n),n.eo(o.onlineState),y.Xr&&n.no(y.Xr)&&Mp(o)})).apply(this,arguments)}function Vd(a,n){return $h.apply(this,arguments)}function $h(){return($h=(0,se.Z)(function*(a,n){const o=ft(a),l=n.query;let h=!1;const y=o.queries.get(l);if(y){const I=y.listeners.indexOf(n);I>=0&&(y.listeners.splice(I,1),h=0===y.listeners.length)}if(h)return o.queries.delete(l),o.onUnlisten(l)})).apply(this,arguments)}function A_(a,n){const o=ft(a);let l=!1;for(const h of n){const I=o.queries.get(h.query);if(I){for(const k of I.listeners)k.no(h)&&(l=!0);I.Xr=h}}l&&Mp(o)}function R_(a,n,o){const l=ft(a),h=l.queries.get(n);if(h)for(const y of h.listeners)y.onError(o);l.queries.delete(n)}function Mp(a){a.Zr.forEach(n=>{n.next()})}class Hh{constructor(n,o,l){this.query=n,this.so=o,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=l||{}}no(n){if(!this.options.includeMetadataChanges){const l=[];for(const h of n.docChanges)3!==h.type&&l.push(h);n=new Ld(n.query,n.docs,n.oldDocs,l,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}let o=!1;return this.io?this.oo(n)&&(this.so.next(n),o=!0):this.ao(n,this.onlineState)&&(this.co(n),o=!0),this.ro=n,o}onError(n){this.so.error(n)}eo(n){this.onlineState=n;let o=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),o=!0),o}ao(n,o){return!n.fromCache||!(this.options.uo&&"Offline"!==o||n.docs.isEmpty()&&"Offline"!==o)}oo(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(n){n=Ld.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}class x_{constructor(n,o){this.payload=n,this.byteLength=o}ho(){return"metadata"in this.payload}}class Op{constructor(n){this.N=n}zn(n){return Zo(this.N,n)}Hn(n){return n.metadata.exists?yd(this.N,n.document,!1):xr.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}Jn(n){return ci(n)}}class N_{constructor(n,o,l){this.lo=n,this.localStore=o,this.N=l,this.queries=[],this.documents=[],this.progress=Nm(n)}fo(n){this.progress.bytesLoaded+=n.byteLength;let o=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++o):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++o),o!==this.progress.documentsLoaded?(this.progress.documentsLoaded=o,Object.assign({},this.progress)):null}wo(n){const o=new Map,l=new Op(this.N);for(const h of n)if(h.metadata.queries){const y=l.zn(h.metadata.name);for(const I of h.metadata.queries){const k=(o.get(I)||rr()).add(y);o.set(I,k)}}return o}complete(){var n=this;return(0,se.Z)(function*(){const o=yield function(a,n,o,l){return Rh.apply(this,arguments)}(n.localStore,new Op(n.N),n.documents,n.lo.id),l=n.wo(n.documents);for(const h of n.queries)yield Em(n.localStore,h,l.get(h.name));return n.progress.taskState="Success",new y_(Object.assign({},n.progress),o)})()}}function Nm(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class Pp{constructor(n){this.key=n}}class kp{constructor(n){this.key=n}}class Mm{constructor(n,o){this.query=n,this._o=o,this.mo=null,this.current=!1,this.yo=rr(),this.mutatedKeys=rr(),this.po=ch(n),this.Eo=new Vc(this.po)}get To(){return this._o}Io(n,o){const l=o?o.Ao:new Am,h=o?o.Eo:this.Eo;let y=o?o.mutatedKeys:this.mutatedKeys,I=h,k=!1;const H=Tu(this.query)&&h.size===this.query.limit?h.last():null,J=ba(this.query)&&h.size===this.query.limit?h.first():null;if(n.inorderTraversal((re,we)=>{const We=h.get(re),et=Qu(this.query,we)?we:null,_t=!!We&&this.mutatedKeys.has(We.key),Ut=!!et&&(et.hasLocalMutations||this.mutatedKeys.has(et.key)&&et.hasCommittedMutations);let cn=!1;We&&et?We.data.isEqual(et.data)?_t!==Ut&&(l.track({type:3,doc:et}),cn=!0):this.Ro(We,et)||(l.track({type:2,doc:et}),cn=!0,(H&&this.po(et,H)>0||J&&this.po(et,J)<0)&&(k=!0)):!We&&et?(l.track({type:0,doc:et}),cn=!0):We&&!et&&(l.track({type:1,doc:We}),cn=!0,(H||J)&&(k=!0)),cn&&(et?(I=I.add(et),y=Ut?y.add(re):y.delete(re)):(I=I.delete(re),y=y.delete(re)))}),Tu(this.query)||ba(this.query))for(;I.size>this.query.limit;){const re=Tu(this.query)?I.last():I.first();I=I.delete(re.key),y=y.delete(re.key),l.track({type:1,doc:re})}return{Eo:I,Ao:l,Ln:k,mutatedKeys:y}}Ro(n,o){return n.hasLocalMutations&&o.hasCommittedMutations&&!o.hasLocalMutations}applyChanges(n,o,l){const h=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;const y=n.Ao.Yr();y.sort((J,re)=>function(we,We){const et=_t=>{switch(_t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt()}};return et(we)-et(We)}(J.type,re.type)||this.po(J.doc,re.doc)),this.bo(l);const I=o?this.Po():[],k=0===this.yo.size&&this.current?1:0,H=k!==this.mo;return this.mo=k,0!==y.length||H?{snapshot:new Ld(this.query,n.Eo,h,y,n.mutatedKeys,0===k,H,!1),vo:I}:{vo:I}}eo(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Am,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}bo(n){n&&(n.addedDocuments.forEach(o=>this._o=this._o.add(o)),n.modifiedDocuments.forEach(o=>{}),n.removedDocuments.forEach(o=>this._o=this._o.delete(o)),this.current=n.current)}Po(){if(!this.current)return[];const n=this.yo;this.yo=rr(),this.Eo.forEach(l=>{this.Vo(l.key)&&(this.yo=this.yo.add(l.key))});const o=[];return n.forEach(l=>{this.yo.has(l)||o.push(new kp(l))}),this.yo.forEach(l=>{n.has(l)||o.push(new Pp(l))}),o}So(n){this._o=n.Gn,this.yo=rr();const o=this.Io(n.documents);return this.applyChanges(o,!0)}Do(){return Ld.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class du{constructor(n,o,l){this.query=n,this.targetId=o,this.view=l}}class Fp{constructor(n){this.key=n,this.Co=!1}}class M_{constructor(n,o,l,h,y,I){this.localStore=n,this.remoteStore=o,this.eventManager=l,this.sharedClientState=h,this.currentUser=y,this.maxConcurrentLimboResolutions=I,this.No={},this.xo=new jl(k=>pc(k),Ta),this.ko=new Map,this.$o=new Set,this.Oo=new Nr(mt.comparator),this.Fo=new Map,this.Mo=new xh,this.Lo={},this.Bo=new Map,this.Uo=ll.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function O_(a,n){return Om.apply(this,arguments)}function Om(){return(Om=(0,se.Z)(function*(a,n){const o=Yp(a);let l,h;const y=o.xo.get(n);if(y)l=y.targetId,o.sharedClientState.addLocalQueryTarget(l),h=y.view.Do();else{const I=yield Mc(o.localStore,qo(n)),k=o.sharedClientState.addLocalQueryTarget(I.targetId);l=I.targetId,h=yield Gh(o,n,l,"current"===k),o.isPrimaryClient&&Pd(o.remoteStore,I)}return h})).apply(this,arguments)}function Gh(a,n,o,l){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,se.Z)(function*(a,n,o,l){a.Ko=(re,we,We)=>{return(et=(0,se.Z)(function*(_t,Ut,cn,hi){let Js=Ut.view.Io(cn);Js.Ln&&(Js=yield Ah(_t.localStore,Ut.query,!1).then(({documents:Yc})=>Ut.view.Io(Yc,Js)));const yu=hi&&hi.targetChanges.get(Ut.targetId),ma=Ut.view.applyChanges(Js,_t.isPrimaryClient,yu);return Kh(_t,Ut.targetId,ma.vo),ma.snapshot}),function(_t,Ut,cn,hi){return et.apply(this,arguments)})(a,re,we,We);var et};const h=yield Ah(a.localStore,n,!0),y=new Mm(n,h.Gn),I=y.Io(h.documents),k=qs.createSynthesizedTargetChangeForCurrentChange(o,l&&"Offline"!==a.onlineState),H=y.applyChanges(I,a.isPrimaryClient,k);Kh(a,o,H.vo);const J=new du(n,o,y);return a.xo.set(n,J),a.ko.has(o)?a.ko.get(o).push(n):a.ko.set(o,[n]),H.snapshot})).apply(this,arguments)}function P_(a,n){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,se.Z)(function*(a,n){const o=ft(a),l=o.xo.get(n),h=o.ko.get(l.targetId);if(h.length>1)return o.ko.set(l.targetId,h.filter(y=>!Ta(y,n))),void o.xo.delete(n);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(l.targetId),o.sharedClientState.isActiveQueryTarget(l.targetId)||(yield Oc(o.localStore,l.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(l.targetId),Wl(o.remoteStore,l.targetId),Kl(o,l.targetId)}).catch(cl))):(Kl(o,l.targetId),yield Oc(o.localStore,l.targetId,!0))})).apply(this,arguments)}function Bp(){return(Bp=(0,se.Z)(function*(a,n,o){const l=ml(a);try{const h=yield function(y,I){const k=ft(y),H=It.now(),J=I.reduce((we,We)=>we.add(We.key),rr());let re;return k.persistence.runTransaction("Locally write mutations","readwrite",we=>k.Qn.Pn(we,J).next(We=>{re=We;const et=[];for(const _t of I){const Ut=$f(_t,re.get(_t.key));null!=Ut&&et.push(new ua(_t.key,Ut,uc(Ut.value.mapValue),mi.exists(!0)))}return k.In.addMutationBatch(we,H,et,I)})).then(we=>(we.applyToLocalDocumentSet(re),{batchId:we.batchId,changes:re}))}(l.localStore,n);l.sharedClientState.addPendingMutation(h.batchId),function(y,I,k){let H=y.Lo[y.currentUser.toKey()];H||(H=new Nr(Me)),H=H.insert(I,k),y.Lo[y.currentUser.toKey()]=H}(l,h.batchId,o),yield ha(l,h.changes),yield Fa(l.remoteStore)}catch(h){const y=ys(h,"Failed to persist write");o.reject(y)}})).apply(this,arguments)}function Pm(a,n){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,se.Z)(function*(a,n){const o=ft(a);try{const l=yield Pa(o.localStore,n);n.targetChanges.forEach((h,y)=>{const I=o.Fo.get(y);I&&(Ht(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?I.Co=!0:h.modifiedDocuments.size>0?Ht(I.Co):h.removedDocuments.size>0&&(Ht(I.Co),I.Co=!1))}),yield ha(o,l,n)}catch(l){yield cl(l)}})).apply(this,arguments)}function Wh(a,n,o){const l=ft(a);if(l.isPrimaryClient&&0===o||!l.isPrimaryClient&&1===o){const h=[];l.xo.forEach((y,I)=>{const k=I.view.eo(n);k.snapshot&&h.push(k.snapshot)}),function(y,I){const k=ft(y);k.onlineState=I;let H=!1;k.queries.forEach((J,re)=>{for(const we of re.listeners)we.eo(I)&&(H=!0)}),H&&Mp(k)}(l.eventManager,n),h.length&&l.No.Tr(h),l.onlineState=n,l.isPrimaryClient&&l.sharedClientState.setOnlineState(n)}}function k_(a,n,o){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,se.Z)(function*(a,n,o){const l=ft(a);l.sharedClientState.updateQueryState(n,"rejected",o);const h=l.Fo.get(n),y=h&&h.key;if(y){let I=new Nr(mt.comparator);I=I.insert(y,xr.newNoDocument(y,Tt.min()));const k=rr().add(y),H=new nl(Tt.min(),new Map,new ii(Me),I,k);yield Pm(l,H),l.Oo=l.Oo.remove(y),l.Fo.delete(n),La(l)}else yield Oc(l.localStore,n,!1).then(()=>Kl(l,n,o)).catch(cl)})).apply(this,arguments)}function jp(a,n){return zh.apply(this,arguments)}function zh(){return(zh=(0,se.Z)(function*(a,n){const o=ft(a),l=n.batch.batchId;try{const h=yield __(o.localStore,n);qh(o,l,null),Gp(o,l),o.sharedClientState.updateMutationState(l,"acknowledged"),yield ha(o,h)}catch(h){yield cl(h)}})).apply(this,arguments)}function F_(a,n,o){return $p.apply(this,arguments)}function $p(){return($p=(0,se.Z)(function*(a,n,o){const l=ft(a);try{const h=yield function(y,I){const k=ft(y);return k.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let J;return k.In.lookupMutationBatch(H,I).next(re=>(Ht(null!==re),J=re.keys(),k.In.removeMutationBatch(H,re))).next(()=>k.In.performConsistencyCheck(H)).next(()=>k.Qn.Pn(H,J))})}(l.localStore,n);qh(l,n,o),Gp(l,n),l.sharedClientState.updateMutationState(n,"rejected",o),yield ha(l,h)}catch(h){yield cl(h)}})).apply(this,arguments)}function km(){return(km=(0,se.Z)(function*(a,n){const o=ft(a);ku(o.remoteStore)||at("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const l=yield function(y){const I=ft(y);return I.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>I.In.getHighestUnacknowledgedBatchId(k))}(o.localStore);if(-1===l)return void n.resolve();const h=o.Bo.get(l)||[];h.push(n),o.Bo.set(l,h)}catch(l){const h=ys(l,"Initialization of waitForPendingWrites() operation failed");n.reject(h)}})).apply(this,arguments)}function Gp(a,n){(a.Bo.get(n)||[]).forEach(o=>{o.resolve()}),a.Bo.delete(n)}function qh(a,n,o){const l=ft(a);let h=l.Lo[l.currentUser.toKey()];if(h){const y=h.get(n);y&&(o?y.reject(o):y.resolve(),h=h.remove(n)),l.Lo[l.currentUser.toKey()]=h}}function Kl(a,n,o=null){a.sharedClientState.removeLocalQueryTarget(n);for(const l of a.ko.get(n))a.xo.delete(l),o&&a.No.jo(l,o);a.ko.delete(n),a.isPrimaryClient&&a.Mo.cs(n).forEach(l=>{a.Mo.containsKey(l)||Wp(a,l)})}function Wp(a,n){a.$o.delete(n.path.canonicalString());const o=a.Oo.get(n);null!==o&&(Wl(a.remoteStore,o),a.Oo=a.Oo.remove(n),a.Fo.delete(o),La(a))}function Kh(a,n,o){for(const l of o)l instanceof Pp?(a.Mo.addReference(l.key,n),Fm(a,l)):l instanceof kp?(at("SyncEngine","Document no longer in limbo: "+l.key),a.Mo.removeReference(l.key,n),a.Mo.containsKey(l.key)||Wp(a,l.key)):Rt()}function Fm(a,n){const o=n.key,l=o.path.canonicalString();a.Oo.get(o)||a.$o.has(l)||(at("SyncEngine","New document in limbo: "+o),a.$o.add(l),La(a))}function La(a){for(;a.$o.size>0&&a.Oo.size<a.maxConcurrentLimboResolutions;){const n=a.$o.values().next().value;a.$o.delete(n);const o=new mt(yn.fromString(n)),l=a.Uo.next();a.Fo.set(l,new Fp(o)),a.Oo=a.Oo.insert(o,l),Pd(a.remoteStore,new Vl(qo(Nl(o.path)),l,2,q.T))}}function ha(a,n,o){return zp.apply(this,arguments)}function zp(){return(zp=(0,se.Z)(function*(a,n,o){const l=ft(a),h=[],y=[],I=[];var k;l.xo.isEmpty()||(l.xo.forEach((k,H)=>{I.push(l.Ko(H,n,o).then(J=>{if(J){l.isPrimaryClient&&l.sharedClientState.updateQueryState(H.targetId,J.fromCache?"not-current":"current"),h.push(J);const re=Od.kn(H.targetId,J);y.push(re)}}))}),yield Promise.all(I),l.No.Tr(h),yield(k=(0,se.Z)(function*(H,J){const re=ft(H);try{yield re.persistence.runTransaction("notifyLocalViewChanges","readwrite",we=>qe.forEach(J,We=>qe.forEach(We.Nn,et=>re.persistence.referenceDelegate.addReference(we,We.targetId,et)).next(()=>qe.forEach(We.xn,et=>re.persistence.referenceDelegate.removeReference(we,We.targetId,et)))))}catch(we){if(!xa(we))throw we;at("LocalStore","Failed to update sequence numbers: "+we)}for(const we of J){const We=we.targetId;if(!we.fromCache){const et=re.Un.get(We),Ut=et.withLastLimboFreeSnapshotVersion(et.snapshotVersion);re.Un=re.Un.insert(We,Ut)}}}),function(H,J){return k.apply(this,arguments)})(l.localStore,y))})).apply(this,arguments)}function L_(a,n){return Lm.apply(this,arguments)}function Lm(){return(Lm=(0,se.Z)(function*(a,n){const o=ft(a);if(!o.currentUser.isEqual(n)){at("SyncEngine","User change. New user:",n.toKey());const l=yield gm(o.localStore,n);o.currentUser=n,(h=o).Bo.forEach(I=>{I.forEach(k=>{k.reject(new Ye(Be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.Bo.clear(),o.sharedClientState.handleUserChange(n,l.removedBatchIds,l.addedBatchIds),yield ha(o,l.Wn)}var h})).apply(this,arguments)}function Bc(a,n){const o=ft(a),l=o.Fo.get(n);if(l&&l.Co)return rr().add(l.key);{let h=rr();const y=o.ko.get(n);if(!y)return h;for(const I of y){const k=o.xo.get(I);h=h.unionWith(k.view.To)}return h}}function Vm(a,n){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,se.Z)(function*(a,n){const o=ft(a),l=yield Ah(o.localStore,n.query,!0),h=n.view.So(l);return o.isPrimaryClient&&Kh(o,n.targetId,h.vo),h})).apply(this,arguments)}function Bd(a){return qp.apply(this,arguments)}function qp(){return(qp=(0,se.Z)(function*(a){const n=ft(a);return vm(n.localStore).then(o=>ha(n,o))})).apply(this,arguments)}function Kp(a,n,o,l){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,se.Z)(function*(a,n,o,l){const h=ft(a),y=yield function(I,k){const H=ft(I),J=ft(H.In);return H.persistence.runTransaction("Lookup mutation documents","readonly",re=>J.Xt(re,k).next(we=>we?H.Qn.Pn(re,we):qe.resolve(null)))}(h.localStore,n);var k;null!==y?("pending"===o?yield Fa(h.remoteStore):"acknowledged"===o||"rejected"===o?(qh(h,n,l||null),Gp(h,n),k=n,ft(ft(h.localStore).In).te(k)):Rt(),yield ha(h,y)):at("SyncEngine","Cannot apply mutation batch with id: "+n)})).apply(this,arguments)}function Yh(){return(Yh=(0,se.Z)(function*(a,n){const o=ft(a);if(Yp(o),ml(o),!0===n&&!0!==o.qo){const l=o.sharedClientState.getAllActiveQueryTargets(),h=yield Um(o,l.toArray());o.qo=!0,yield jh(o.remoteStore,!0);for(const y of h)Pd(o.remoteStore,y)}else if(!1===n&&!1!==o.qo){const l=[];let h=Promise.resolve();o.ko.forEach((y,I)=>{o.sharedClientState.isLocalQueryTarget(I)?l.push(I):h=h.then(()=>(Kl(o,I),Oc(o.localStore,I,!0))),Wl(o.remoteStore,I)}),yield h,yield Um(o,l),function(y){const I=ft(y);I.Fo.forEach((k,H)=>{Wl(I.remoteStore,H)}),I.Mo.us(),I.Fo=new Map,I.Oo=new Nr(mt.comparator)}(o),o.qo=!1,yield jh(o.remoteStore,!1)}})).apply(this,arguments)}function Um(a,n,o){return jd.apply(this,arguments)}function jd(){return(jd=(0,se.Z)(function*(a,n,o){const l=ft(a),h=[],y=[];for(const I of n){let k;const H=l.ko.get(I);if(H&&0!==H.length){k=yield Mc(l.localStore,qo(H[0]));for(const J of H){const re=l.xo.get(J),we=yield Vm(l,re);we.snapshot&&y.push(we.snapshot)}}else{const J=yield fp(l.localStore,I);k=yield Mc(l.localStore,J),yield Gh(l,Bm(J),I,!1)}h.push(k)}return l.No.Tr(y),h})).apply(this,arguments)}function Bm(a){return Yu(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function U_(a){const n=ft(a);return ft(ft(n.localStore).persistence).pn()}function jm(a,n,o,l){return gl.apply(this,arguments)}function gl(){return(gl=(0,se.Z)(function*(a,n,o,l){const h=ft(a);if(h.qo)at("SyncEngine","Ignoring unexpected query state notification.");else if(h.ko.has(n))switch(o){case"current":case"not-current":{const y=yield vm(h.localStore),I=nl.createSynthesizedRemoteEventForCurrentChange(n,"current"===o);yield ha(h,y,I);break}case"rejected":yield Oc(h.localStore,n,!0),Kl(h,n,l);break;default:Rt()}})).apply(this,arguments)}function $m(a,n,o){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,se.Z)(function*(a,n,o){const l=Yp(a);if(l.qo){for(const h of n){if(l.ko.has(h)){at("SyncEngine","Adding an already active target "+h);continue}const y=yield fp(l.localStore,h),I=yield Mc(l.localStore,y);yield Gh(l,Bm(y),I.targetId,!1),Pd(l.remoteStore,I)}for(const h of o)l.ko.has(h)&&(yield Oc(l.localStore,h,!1).then(()=>{Wl(l.remoteStore,h),Kl(l,h)}).catch(cl))}})).apply(this,arguments)}function Yp(a){const n=ft(a);return n.remoteStore.remoteSyncer.applyRemoteEvent=Pm.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bc.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=k_.bind(null,n),n.No.Tr=A_.bind(null,n.eventManager),n.No.jo=R_.bind(null,n.eventManager),n}function ml(a){const n=ft(a);return n.remoteStore.remoteSyncer.applySuccessfulWrite=jp.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=F_.bind(null,n),n}class Hm{constructor(){this.synchronizeTabs=!1}initialize(n){var o=this;return(0,se.Z)(function*(){o.N=Oh(n.databaseInfo.databaseId),o.sharedClientState=o.Wo(n),o.persistence=o.Go(n),yield o.persistence.start(),o.gcScheduler=o.zo(n),o.localStore=o.Ho(n)})()}zo(n){return null}Ho(n){return dp(this.persistence,new cp,n.initialUser,this.N)}Go(n){return new yp(Nh.Ns,this.N)}Wo(n){return new bm}terminate(){var n=this;return(0,se.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class Gm extends Hm{constructor(n,o,l){super(),this.Jo=n,this.cacheSizeBytes=o,this.forceOwnership=l,this.synchronizeTabs=!1}initialize(n){var o=()=>super.initialize,l=this;return(0,se.Z)(function*(){yield o().call(l,n),yield function(a){return pp.apply(this,arguments)}(l.localStore),yield l.Jo.initialize(l,n),yield ml(l.Jo.syncEngine),yield Fa(l.Jo.remoteStore),yield l.persistence.nn(()=>(l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(l.localStore),Promise.resolve()))})()}Ho(n){return dp(this.persistence,new cp,n.initialUser,this.N)}zo(n){return new g_(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)}Go(n){const o=up(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),l=void 0!==this.cacheSizeBytes?So.withCacheSize(this.cacheSizeBytes):So.DEFAULT;return new $l(this.synchronizeTabs,o,n.clientId,l,n.asyncQueue,C_(),Cp(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(n){return new bm}}class j_ extends Gm{constructor(n,o){super(n,o,!1),this.Jo=n,this.cacheSizeBytes=o,this.synchronizeTabs=!0}initialize(n){var o=()=>super.initialize,l=this;return(0,se.Z)(function*(){yield o().call(l,n);const h=l.Jo.syncEngine;l.sharedClientState instanceof Cm&&(l.sharedClientState.syncEngine={_i:Kp.bind(null,h),mi:jm.bind(null,h),gi:$m.bind(null,h),pn:U_.bind(null,h),wi:Bd.bind(null,h)},yield l.sharedClientState.start()),yield l.persistence.nn(function(){var y=(0,se.Z)(function*(I){yield function(a,n){return Yh.apply(this,arguments)}(l.Jo.syncEngine,I),l.gcScheduler&&(I&&!l.gcScheduler.started?l.gcScheduler.start(l.localStore):I||l.gcScheduler.stop())});return function(I){return y.apply(this,arguments)}}())})()}Wo(n){const o=C_();if(!Cm.bt(o))throw new Ye(Be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const l=up(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new Cm(o,n.asyncQueue,l,n.clientId,n.initialUser)}}class Wm{initialize(n,o){var l=this;return(0,se.Z)(function*(){l.localStore||(l.localStore=n.localStore,l.sharedClientState=n.sharedClientState,l.datastore=l.createDatastore(o),l.remoteStore=l.createRemoteStore(o),l.eventManager=l.createEventManager(o),l.syncEngine=l.createSyncEngine(o,!n.synchronizeTabs),l.sharedClientState.onlineStateHandler=h=>Wh(l.syncEngine,h,1),l.remoteStore.remoteSyncer.handleCredentialChange=L_.bind(null,l.syncEngine),yield jh(l.remoteStore,l.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Rm}createDatastore(n){const o=Oh(n.databaseInfo.databaseId),l=new wp(n.databaseInfo);return new xE(n.credentials,l,o)}createRemoteStore(n){return o=this.localStore,l=this.datastore,h=n.asyncQueue,y=k=>Wh(this.syncEngine,k,0),I=Ep.bt()?new Ep:new SE,new ME(o,l,h,y,I);var o,l,h,y,I}createSyncEngine(n,o){return function(l,h,y,I,k,H,J){const re=new M_(l,h,y,I,k,H);return J&&(re.qo=!0),re}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,o)}terminate(){return(n=(0,se.Z)(function*(o){const l=ft(o);at("RemoteStore","RemoteStore shutting down."),l.Kr.add(5),yield dl(l),l.Qr.shutdown(),l.Wr.set("Unknown")}),function(o){return n.apply(this,arguments)})(this.remoteStore);var n}}function zm(a,n=10240){let o=0;return{read:()=>(0,se.Z)(function*(){if(o<a.byteLength){const l={value:a.slice(o,o+n),done:!1};return o+=n,l}return{done:!0}})(),cancel:()=>(0,se.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class $d{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Yo(this.observer.next,n)}error(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}Xo(){this.muted=!0}Yo(n,o){this.muted||setTimeout(()=>{this.muted||n(o)},0)}}class si{constructor(n,o){this.Zo=n,this.N=o,this.metadata=new jr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(l=>{l&&l.ho()?this.metadata.resolve(l.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==l?void 0:l.payload)}`))},l=>this.metadata.reject(l))}close(){return this.Zo.cancel()}getMetadata(){var n=this;return(0,se.Z)(function*(){return n.metadata.promise})()}Qo(){var n=this;return(0,se.Z)(function*(){return yield n.getMetadata(),n.ea()})()}ea(){var n=this;return(0,se.Z)(function*(){const o=yield n.na();if(null===o)return null;const l=n.ta.decode(o),h=Number(l);isNaN(h)&&n.sa(`length string (${l}) is not valid number`);const y=yield n.ia(h);return new x_(JSON.parse(y),o.length+h)})()}ra(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}na(){var n=this;return(0,se.Z)(function*(){for(;n.ra()<0&&!(yield n.oa()););if(0===n.buffer.length)return null;const o=n.ra();o<0&&n.sa("Reached the end of bundle when a length string is expected.");const l=n.buffer.slice(0,o);return n.buffer=n.buffer.slice(o),l})()}ia(n){var o=this;return(0,se.Z)(function*(){for(;o.buffer.length<n;)(yield o.oa())&&o.sa("Reached the end of bundle when more is expected.");const l=o.ta.decode(o.buffer.slice(0,n));return o.buffer=o.buffer.slice(n),l})()}sa(n){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${n}`)}oa(){var n=this;return(0,se.Z)(function*(){const o=yield n.Zo.read();if(!o.done){const l=new Uint8Array(n.buffer.length+o.value.length);l.set(n.buffer),l.set(o.value,n.buffer.length),n.buffer=l}return o.done})()}}class Qp{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var o=this;return(0,se.Z)(function*(){if(o.ensureCommitNotCalled(),o.mutations.length>0)throw new Ye(Be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const l=yield(h=(0,se.Z)(function*(y,I){const k=ft(y),H=su(k.N)+"/documents",J={documents:I.map(et=>kl(k.N,et))},re=yield k.Ki("BatchGetDocuments",H,J),we=new Map;re.forEach(et=>{const _t=function(a,n){return"found"in n?function(o,l){Ht(!!l.found);const h=Zo(o,l.found.name),y=ci(l.found.updateTime),I=new Ri({mapValue:{fields:l.found.fields}});return xr.newFoundDocument(h,y,I)}(a,n):"missing"in n?function(o,l){Ht(!!l.missing),Ht(!!l.readTime);const h=Zo(o,l.missing),y=ci(l.readTime);return xr.newNoDocument(h,y)}(a,n):Rt()}(k.N,et);we.set(_t.key.toString(),_t)});const We=[];return I.forEach(et=>{const _t=we.get(et.toString());Ht(!!_t),We.push(_t)}),We}),function(y,I){return h.apply(this,arguments)})(o.datastore,n);var h;return l.forEach(h=>o.recordVersion(h)),l})()}set(n,o){this.write(o.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,o){try{this.write(o.toMutation(n,this.preconditionForUpdate(n)))}catch(l){this.lastWriteError=l}this.writtenDocs.add(n.toString())}delete(n){this.write(new Ko(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,se.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const o=n.readVersions;var l;n.mutations.forEach(l=>{o.delete(l.key.toString())}),o.forEach((l,h)=>{const y=mt.fromPath(h);n.mutations.push(new ad(y,n.precondition(y)))}),yield(l=(0,se.Z)(function*(h,y){const I=ft(h),k=su(I.N)+"/documents",H={writes:y.map(J=>Qi(I.N,J))};yield I.Li("Commit",k,H)}),function(h,y){return l.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let o;if(n.isFoundDocument())o=n.version;else{if(!n.isNoDocument())throw Rt();o=Tt.min()}const l=this.readVersions.get(n.key.toString());if(l){if(!o.isEqual(l))throw new Ye(Be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),o)}precondition(n){const o=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&o?mi.updateTime(o):mi.none()}preconditionForUpdate(n){const o=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&o){if(o.isEqual(Tt.min()))throw new Ye(Be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mi.updateTime(o)}return mi.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class FE{constructor(n,o,l,h){this.asyncQueue=n,this.datastore=o,this.updateFunction=l,this.deferred=h,this.aa=5,this.rr=new Dm(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var n=this;this.rr.Xi((0,se.Z)(function*(){const o=new Qp(n.datastore),l=n.ua(o);l&&l.then(h=>{n.asyncQueue.enqueueAndForget(()=>o.commit().then(()=>{n.deferred.resolve(h)}).catch(y=>{n.ha(y)}))}).catch(h=>{n.ha(h)})}))}ua(n){try{const o=this.updateFunction(n);return!Lt(o)&&o.catch&&o.then?o:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(o){return this.deferred.reject(o),null}}ha(n){this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(n)}la(n){if("FirebaseError"===n.name){const o=n.code;return"aborted"===o||"failed-precondition"===o||!hh(o)}return!1}}class Fu{constructor(n,o,l){var h=this;this.credentials=n,this.asyncQueue=o,this.databaseInfo=l,this.user=ei.UNAUTHENTICATED,this.clientId=pe.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(o,function(){var y=(0,se.Z)(function*(I){at("FirestoreClient","Received user=",I.uid),yield h.credentialListener(I),h.user=I});return function(I){return y.apply(this,arguments)}}())}getConfiguration(){var n=this;return(0,se.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,credentials:n.credentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.credentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ye(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const o=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,se.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.credentials.shutdown(),o.resolve()}catch(l){const h=ys(l,"Failed to shutdown persistence");o.reject(h)}})),o.promise}}function Qh(a,n){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,se.Z)(function*(a,n){a.asyncQueue.verifyOperationInProgress(),at("FirestoreClient","Initializing OfflineComponentProvider");const o=yield a.getConfiguration();yield n.initialize(o);let l=o.initialUser;a.setCredentialChangeListener(function(){var h=(0,se.Z)(function*(y){l.isEqual(y)||(yield gm(n.localStore,y),l=y)});return function(y){return h.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>a.terminate()),a.offlineComponents=n})).apply(this,arguments)}function $_(a,n){return Jp.apply(this,arguments)}function Jp(){return(Jp=(0,se.Z)(function*(a,n){a.asyncQueue.verifyOperationInProgress();const o=yield Xp(a);at("FirestoreClient","Initializing OnlineComponentProvider");const l=yield a.getConfiguration();yield n.initialize(o,l),a.setCredentialChangeListener(h=>{return(y=(0,se.Z)(function*(I,k){const H=ft(I);H.asyncQueue.verifyOperationInProgress(),at("RemoteStore","RemoteStore received new credentials");const J=ku(H);H.Kr.add(3),yield dl(H),J&&H.Wr.set("Unknown"),yield H.remoteSyncer.handleCredentialChange(k),H.Kr.delete(3),yield Ph(H)}),function(I,k){return y.apply(this,arguments)})(n.remoteStore,h);var y}),a.onlineComponents=n})).apply(this,arguments)}function Xp(a){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,se.Z)(function*(a){return a.offlineComponents||(at("FirestoreClient","Using default OfflineComponentProvider"),yield Qh(a,new Hm)),a.offlineComponents})).apply(this,arguments)}function Gd(a){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,se.Z)(function*(a){return a.onlineComponents||(at("FirestoreClient","Using default OnlineComponentProvider"),yield $_(a,new Wm)),a.onlineComponents})).apply(this,arguments)}function eg(a){return Xp(a).then(n=>n.persistence)}function tg(a){return Xp(a).then(n=>n.localStore)}function qm(a){return Gd(a).then(n=>n.remoteStore)}function Yl(a){return Gd(a).then(n=>n.syncEngine)}function yl(a){return ef.apply(this,arguments)}function ef(){return(ef=(0,se.Z)(function*(a){const n=yield Gd(a),o=n.eventManager;return o.onListen=O_.bind(null,n.syncEngine),o.onUnlisten=P_.bind(null,n.syncEngine),o})).apply(this,arguments)}function Qm(a,n,o={}){const l=new jr;return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(h,y,I,k,H){const J=new $d({next:we=>{y.enqueueAndForget(()=>Vd(h,re));const We=we.docs.has(I);!We&&we.fromCache?H.reject(new Ye(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):We&&we.fromCache&&k&&"server"===k.source?H.reject(new Ye(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(we)},error:we=>H.reject(we)}),re=new Hh(Nl(I.path),J,{includeMetadataChanges:!0,uo:!0});return xm(h,re)}(yield yl(a),a.asyncQueue,n,o,l)})),l.promise}function Jm(a,n,o={}){const l=new jr;return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(h,y,I,k,H){const J=new $d({next:we=>{y.enqueueAndForget(()=>Vd(h,re)),we.fromCache&&"server"===k.source?H.reject(new Ye(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(we)},error:we=>H.reject(we)}),re=new Hh(I,J,{includeMetadataChanges:!0,uo:!0});return xm(h,re)}(yield yl(a),a.asyncQueue,n,o,l)})),l.promise}class W_{constructor(n,o,l,h,y,I,k,H){this.databaseId=n,this.appId=o,this.persistenceKey=l,this.host=h,this.ssl=y,this.forceLongPolling=I,this.autoDetectLongPolling=k,this.useFetchStreams=H}}class jc{constructor(n,o){this.projectId=n,this.database=o||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof jc&&n.projectId===this.projectId&&n.database===this.database}}const z_=new Map;function ty(a,n,o){if(!o)throw new Ye(Be.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${n}.`)}function tf(a,n,o,l){if(!0===n&&!0===l)throw new Ye(Be.INVALID_ARGUMENT,`${a} and ${o} cannot be used together.`)}function ny(a){if(!mt.isDocumentKey(a))throw new Ye(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function ng(a){if(mt.isDocumentKey(a))throw new Ye(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Wd(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const n=(o=a).constructor?o.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var o;return"function"==typeof a?"a function":Rt()}function qn(a,n){if("_delegate"in a&&(a=a._delegate),!(a instanceof n)){if(n.name===a.constructor.name)throw new Ye(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const o=Wd(a);throw new Ye(Be.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${o}`)}}return a}function fa(a,n){if(n<=0)throw new Ye(Be.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${n}.`)}class q_{constructor(n){var o;if(void 0===n.host){if(void 0!==n.ssl)throw new Ye(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(o=n.ssl)||void 0===o||o;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new Ye(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,tf("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class nf{constructor(n,o){this._credentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q_({}),this._settingsFrozen=!1,n instanceof jc?this._databaseId=n:(this._app=n,this._databaseId=function(l){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ye(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jc(l.options.projectId)}(n))}get app(){if(!this._app)throw new Ye(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new Ye(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q_(n),void 0!==n.credentials&&(this._credentials=function(o){if(!o)return new A;switch(o.type){case"gapi":const l=o.client;return Ht(!("object"!=typeof l||null===l||!l.auth||!l.auth.getAuthHeaderValueForFirstParty)),new V(l,o.sessionIndex||"0",o.iamToken||null);case"provider":return o.client;default:throw new Ye(Be.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=z_.get(n);o&&(at("ComponentProvider","Removing Datastore"),z_.delete(n),o.terminate())}(this),Promise.resolve()}}class Mr{constructor(n,o,l){this.converter=o,this._key=l,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Va(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new Mr(this.firestore,n,this._key)}}class ks{constructor(n,o,l){this.converter=o,this._query=l,this.type="query",this.firestore=n}withConverter(n){return new ks(this.firestore,n,this._query)}}class Va extends ks{constructor(n,o,l){super(n,o,Nl(l)),this._path=l,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new Mr(this.firestore,null,new mt(n))}withConverter(n){return new Va(this.firestore,n,this._path)}}function ry(a,n,...o){if(a=(0,Ve.m9)(a),ty("collection","path",n),a instanceof nf){const l=yn.fromString(n,...o);return ng(l),new Va(a,null,l)}{if(!(a instanceof Mr||a instanceof Va))throw new Ye(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=a._path.child(yn.fromString(n,...o));return ng(l),new Va(a.firestore,null,l)}}function zd(a,n,...o){if(a=(0,Ve.m9)(a),1===arguments.length&&(n=pe.I()),ty("doc","path",n),a instanceof nf){const l=yn.fromString(n,...o);return ny(l),new Mr(a,null,new mt(l))}{if(!(a instanceof Mr||a instanceof Va))throw new Ye(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=a._path.child(yn.fromString(n,...o));return ny(l),new Mr(a.firestore,a instanceof Va?a.converter:null,new mt(l))}}function rf(a,n){return a=(0,Ve.m9)(a),n=(0,Ve.m9)(n),(a instanceof Mr||a instanceof Va)&&(n instanceof Mr||n instanceof Va)&&a.firestore===n.firestore&&a.path===n.path&&a.converter===n.converter}function iy(a,n){return a=(0,Ve.m9)(a),n=(0,Ve.m9)(n),a instanceof ks&&n instanceof ks&&a.firestore===n.firestore&&Ta(a._query,n._query)&&a.converter===n.converter}class rg{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Dm(this,"async_queue_retry"),this.Ea=()=>{const o=Cp();o&&at("AsyncQueue","Visibility state changed to "+o.visibilityState),this.rr.tr()};const n=Cp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Ta(),this.Ia(n)}enterRestrictedMode(n){if(!this.wa){this.wa=!0,this.ya=n||!1;const o=Cp();o&&"function"==typeof o.removeEventListener&&o.removeEventListener("visibilitychange",this.Ea)}}enqueue(n){if(this.Ta(),this.wa)return new Promise(()=>{});const o=new jr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(n().then(o.resolve,o.reject),o.promise)).then(()=>o.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.da.push(n),this.Aa()))}Aa(){var n=this;return(0,se.Z)(function*(){if(0!==n.da.length){try{yield n.da[0](),n.da.shift(),n.rr.reset()}catch(o){if(!xa(o))throw o;at("AsyncQueue","Operation failed with retryable error: "+o)}n.da.length>0&&n.rr.Xi(()=>n.Aa())}})()}Ia(n){const o=this.fa.then(()=>(this.ga=!0,n().catch(l=>{throw this.ma=l,this.ga=!1,wr("INTERNAL UNHANDLED ERROR: ",function(h){let y=h.message||"";return h.stack&&(y=h.stack.includes(h.message)?h.stack:h.message+"\n"+h.stack),y}(l)),l}).then(l=>(this.ga=!1,l))));return this.fa=o,o}enqueueAfterDelay(n,o,l){this.Ta(),this.pa.indexOf(n)>-1&&(o=0);const h=xp.createAndSchedule(this,n,o,l,y=>this.Ra(y));return this._a.push(h),h}Ta(){this.ma&&Rt()}verifyOperationInProgress(){}ba(){var n=this;return(0,se.Z)(function*(){let o;do{o=n.fa,yield o}while(o!==n.fa)})()}Pa(n){for(const o of this._a)if(o.timerId===n)return!0;return!1}va(n){return this.ba().then(()=>{this._a.sort((o,l)=>o.targetTimeMs-l.targetTimeMs);for(const o of this._a)if(o.skipDelay(),"all"!==n&&o.timerId===n)break;return this.ba()})}Va(n){this.pa.push(n)}Ra(n){const o=this._a.indexOf(n);this._a.splice(o,1)}}function ig(a){return function(n,o){if("object"!=typeof n||null===n)return!1;const l=n;for(const h of["next","error","complete"])if(h in l&&"function"==typeof l[h])return!0;return!1}(a)}class K_{constructor(){this._progressObserver={},this._taskCompletionResolver=new jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,o,l){this._progressObserver={next:n,error:o,complete:l}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,o){return this._taskCompletionResolver.promise.then(n,o)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class _i extends nf{constructor(n,o){super(n,o),this.type="firestore",this._queue=new rg,this._persistenceKey="name"in n?n.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Ql(this),this._firestoreClient.terminate()}}function vi(a){return a._firestoreClient||Ql(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function Ql(a){var n;const o=a._freezeSettings(),l=(y=(null===(n=a._app)||void 0===n?void 0:n.options.appId)||"",new W_(a._databaseId,y,a._persistenceKey,(k=o).host,k.ssl,k.experimentalForceLongPolling,k.experimentalAutoDetectLongPolling,k.useFetchStreams));var y,k;a._firestoreClient=new Fu(a._credentials,a._queue,l)}function $c(a,n,o){const l=new jr;return a.asyncQueue.enqueue((0,se.Z)(function*(){try{yield Qh(a,o),yield $_(a,n),l.resolve()}catch(h){if(!("FirebaseError"===(y=h).name?y.code===Be.FAILED_PRECONDITION||y.code===Be.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&y instanceof DOMException)||22===y.code||20===y.code||11===y.code))throw h;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+h),l.reject(h)}var y})).then(()=>l.promise)}function qd(a){if(a._initialized||a._terminated)throw new Ye(Be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vi{constructor(...n){for(let o=0;o<n.length;++o)if(0===n[o].length)throw new Ye(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class mo{constructor(n){this._byteString=n}static fromBase64String(n){try{return new mo(T.fromBase64String(n))}catch(o){throw new Ye(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+o)}}static fromUint8Array(n){return new mo(T.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class pa{constructor(n){this._methodName=n}}class Lu{constructor(n,o){if(!isFinite(n)||n<-90||n>90)throw new Ye(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(o)||o<-180||o>180)throw new Ye(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+o);this._lat=n,this._long=o}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return Me(this._lat,n._lat)||Me(this._long,n._long)}}const Hc=/^__.*__$/;class Gc{constructor(n,o,l){this.data=n,this.fieldMask=o,this.fieldTransforms=l}toMutation(n,o){return null!==this.fieldMask?new ua(n,this.data,this.fieldMask,o,this.fieldTransforms):new aa(n,this.data,o,this.fieldTransforms)}}class Xl{constructor(n,o,l){this.data=n,this.fieldMask=o,this.fieldTransforms=l}toMutation(n,o){return new ua(n,this.data,this.fieldMask,o,this.fieldTransforms)}}function ec(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt()}}class Vu{constructor(n,o,l,h,y,I){this.settings=n,this.databaseId=o,this.N=l,this.ignoreUndefinedProperties=h,void 0===y&&this.Sa(),this.fieldTransforms=y||[],this.fieldMask=I||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(n){return new Vu(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(n){var o;const l=null===(o=this.path)||void 0===o?void 0:o.child(n),h=this.Ca({path:l,xa:!1});return h.ka(n),h}$a(n){var o;const l=null===(o=this.path)||void 0===o?void 0:o.child(n),h=this.Ca({path:l,xa:!1});return h.Sa(),h}Oa(n){return this.Ca({path:void 0,xa:!0})}Fa(n){return lf(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(n){return void 0!==this.fieldMask.find(o=>n.isPrefixOf(o))||void 0!==this.fieldTransforms.find(o=>n.isPrefixOf(o.field))}Sa(){if(this.path)for(let n=0;n<this.path.length;n++)this.ka(this.path.get(n))}ka(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(ec(this.Da)&&Hc.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}class Wc{constructor(n,o,l){this.databaseId=n,this.ignoreUndefinedProperties=o,this.N=l||Oh(n)}Ba(n,o,l,h=!1){return new Vu({Da:n,methodName:o,La:l,path:nr.emptyPath(),xa:!1,Ma:h},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function _l(a){const n=a._freezeSettings(),o=Oh(a._databaseId);return new Wc(a._databaseId,!!n.ignoreUndefinedProperties,o)}function Kd(a,n,o,l,h,y={}){const I=a.Ba(y.merge||y.mergeFields?2:0,n,o,h);dg("Data must be an object, but it was:",I,l);const k=lg(l,I);let H,J;if(y.merge)H=new Go(I.fieldMask),J=I.fieldTransforms;else if(y.mergeFields){const re=[];for(const we of y.mergeFields){const We=cy(n,we,o);if(!I.contains(We))throw new Ye(Be.INVALID_ARGUMENT,`Field '${We}' is specified in your field mask but missing from your input data.`);hg(re,We)||re.push(We)}H=new Go(re),J=I.fieldTransforms.filter(we=>H.covers(we.field))}else H=null,J=I.fieldTransforms;return new Gc(new Ri(k),H,J)}class zc extends pa{_toFieldTransform(n){if(2!==n.Da)throw n.Fa(1===n.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof zc}}function og(a,n,o){return new Vu({Da:3,La:n.settings.La,methodName:a._methodName,xa:o},n.databaseId,n.N,n.ignoreUndefinedProperties)}class of extends pa{_toFieldTransform(n){return new tl(n.path,new Su)}isEqual(n){return n instanceof of}}class ay extends pa{constructor(n,o){super(n),this.Ua=o}_toFieldTransform(n){const o=og(this,n,!0),l=this.Ua.map(y=>tc(y,o)),h=new Au(l);return new tl(n.path,h)}isEqual(n){return this===n}}class uy extends pa{constructor(n,o){super(n),this.Ua=o}_toFieldTransform(n){const o=og(this,n,!0),l=this.Ua.map(y=>tc(y,o)),h=new bo(l);return new tl(n.path,h)}isEqual(n){return this===n}}class ly extends pa{constructor(n,o){super(n),this.qa=o}_toFieldTransform(n){const o=new el(n.N,Sa(n.N,this.qa));return new tl(n.path,o)}isEqual(n){return this===n}}function af(a,n,o,l){const h=a.Ba(1,n,o);dg("Data must be an object, but it was:",h,l);const y=[],I=Ri.empty();ti(l,(H,J)=>{const re=uf(n,H,o);J=(0,Ve.m9)(J);const we=h.$a(re);if(J instanceof zc)y.push(re);else{const We=tc(J,we);null!=We&&(y.push(re),I.set(re,We))}});const k=new Go(y);return new Xl(I,k,h.fieldTransforms)}function ag(a,n,o,l,h,y){const I=a.Ba(1,n,o),k=[cy(n,l,o)],H=[h];if(y.length%2!=0)throw new Ye(Be.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let We=0;We<y.length;We+=2)k.push(cy(n,y[We])),H.push(y[We+1]);const J=[],re=Ri.empty();for(let We=k.length-1;We>=0;--We)if(!hg(J,k[We])){const et=k[We];let _t=H[We];_t=(0,Ve.m9)(_t);const Ut=I.$a(et);if(_t instanceof zc)J.push(et);else{const cn=tc(_t,Ut);null!=cn&&(J.push(et),re.set(et,cn))}}const we=new Go(J);return new Xl(re,we,I.fieldTransforms)}function ug(a,n,o,l=!1){return tc(o,a.Ba(l?4:3,n))}function tc(a,n){if(cg(a=(0,Ve.m9)(a)))return dg("Unsupported field value:",n,a),lg(a,n);if(a instanceof pa)return function(o,l){if(!ec(l.Da))throw l.Fa(`${o._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Fa(`${o._methodName}() is not currently supported inside arrays`);const h=o._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(a,n),null;if(void 0===a&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),a instanceof Array){if(n.settings.xa&&4!==n.Da)throw n.Fa("Nested arrays are not supported");return function(o,l){const h=[];let y=0;for(const I of o){let k=tc(I,l.Oa(y));null==k&&(k={nullValue:"NULL_VALUE"}),h.push(k),y++}return{arrayValue:{values:h}}}(a,n)}return function(o,l){if(null===(o=(0,Ve.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Sa(l.N,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const h=It.fromDate(o);return{timestampValue:Cc(l.N,h)}}if(o instanceof It){const h=new It(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Cc(l.N,h)}}if(o instanceof Lu)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof mo)return{bytesValue:Zf(l.N,o._byteString)};if(o instanceof Mr){const h=l.databaseId,y=o.firestore._databaseId;if(!y.isEqual(h))throw l.Fa(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:pd(o.firestore._databaseId||l.databaseId,o._key.path)}}throw l.Fa(`Unsupported field value: ${Wd(o)}`)}(a,n)}function lg(a,n){const o={};return Si(a)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):ti(a,(l,h)=>{const y=tc(h,n.Na(l));null!=y&&(o[l]=y)}),{mapValue:{fields:o}}}function cg(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof It||a instanceof Lu||a instanceof mo||a instanceof Mr||a instanceof pa)}function dg(a,n,o){if(!cg(o)||"object"!=typeof(l=o)||null===l||Object.getPrototypeOf(l)!==Object.prototype&&null!==Object.getPrototypeOf(l)){const l=Wd(o);throw n.Fa("an object"===l?a+" a custom object":a+" "+l)}var l}function cy(a,n,o){if((n=(0,Ve.m9)(n))instanceof Vi)return n._internalPath;if("string"==typeof n)return uf(a,n);throw lf("Field path arguments must be of type string or FieldPath.",a,!1,void 0,o)}const J_=new RegExp("[~\\*/\\[\\]]");function uf(a,n,o){if(n.search(J_)>=0)throw lf(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,o);try{return new Vi(...n.split("."))._internalPath}catch(l){throw lf(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,o)}}function lf(a,n,o,l,h){const y=l&&!l.isEmpty(),I=void 0!==h;let k=`Function ${n}() called with invalid data`;o&&(k+=" (via `toFirestore()`)"),k+=". ";let H="";return(y||I)&&(H+=" (found",y&&(H+=` in field ${l}`),I&&(H+=` in document ${h}`),H+=")"),new Ye(Be.INVALID_ARGUMENT,k+a+H)}function hg(a,n){return a.some(o=>o.isEqual(n))}class Zd{constructor(n,o,l,h,y){this._firestore=n,this._userDataWriter=o,this._key=l,this._document=h,this._converter=y}get id(){return this._key.path.lastSegment()}get ref(){return new Mr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new X_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const o=this._document.data.field(fg("DocumentSnapshot.get",n));if(null!==o)return this._userDataWriter.convertValue(o)}}}class X_ extends Zd{data(){return super.data()}}function fg(a,n){return"string"==typeof n?uf(a,n):n instanceof Vi?n._internalPath:n._delegate._internalPath}class nc{constructor(n,o){this.hasPendingWrites=n,this.fromCache=o}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class fu extends Zd{constructor(n,o,l,h,y,I){super(n,o,l,h,I),this._firestore=n,this._firestoreImpl=n,this.metadata=y}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const o=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(o,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,o={}){if(this._document){const l=this._document.data.field(fg("DocumentSnapshot.get",n));if(null!==l)return this._userDataWriter.convertValue(l,o.serverTimestamps)}}}class cf extends fu{data(n={}){return super.data(n)}}class rc{constructor(n,o,l,h){this._firestore=n,this._userDataWriter=o,this._snapshot=h,this.metadata=new nc(h.hasPendingWrites,h.fromCache),this.query=l}get docs(){const n=[];return this.forEach(o=>n.push(o)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,o){this._snapshot.docs.forEach(l=>{n.call(o,new cf(this._firestore,this._userDataWriter,l.key,l,new nc(this._snapshot.mutatedKeys.has(l.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const o=!!n.includeMetadataChanges;if(o&&this._snapshot.excludesMetadataChanges)throw new Ye(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===o||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let y=0;return l._snapshot.docChanges.map(I=>({type:"added",doc:new cf(l._firestore,l._userDataWriter,I.doc.key,I.doc,new nc(l._snapshot.mutatedKeys.has(I.doc.key),l._snapshot.fromCache),l.query.converter),oldIndex:-1,newIndex:y++}))}{let y=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(I=>h||3!==I.type).map(I=>{const k=new cf(l._firestore,l._userDataWriter,I.doc.key,I.doc,new nc(l._snapshot.mutatedKeys.has(I.doc.key),l._snapshot.fromCache),l.query.converter);let H=-1,J=-1;return 0!==I.type&&(H=y.indexOf(I.doc.key),y=y.delete(I.doc.key)),1!==I.type&&(y=y.add(I.doc),J=y.indexOf(I.doc.key)),{type:$E(I.type),doc:k,oldIndex:H,newIndex:J}})}}(this,o),this._cachedChangesIncludeMetadataChanges=o),this._cachedChanges}}function $E(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt()}}function dy(a,n){return a instanceof fu&&n instanceof fu?a._firestore===n._firestore&&a._key.isEqual(n._key)&&(null===a._document?null===n._document:a._document.isEqual(n._document))&&a._converter===n._converter:a instanceof rc&&n instanceof rc&&a._firestore===n._firestore&&iy(a.query,n.query)&&a.metadata.isEqual(n.metadata)&&a._snapshot.isEqual(n._snapshot)}function ev(a){if(ba(a)&&0===a.explicitOrderBy.length)throw new Ye(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yd{}function vl(a,...n){for(const o of n)a=o._apply(a);return a}class pg extends Yd{constructor(n,o,l){super(),this.Ka=n,this.ja=o,this.Qa=l,this.type="where"}_apply(n){const o=_l(n.firestore),l=function(h,y,I,k,H,J,re){let we;if(H.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new Ye(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on FieldPath.documentId().`);if("in"===J||"not-in"===J){Qd(re,J);const et=[];for(const _t of re)et.push(yg(k,h,_t));we={arrayValue:{values:et}}}else we=yg(k,h,re)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||Qd(re,J),we=ug(I,"where",re,"in"===J||"not-in"===J);const We=zs.create(H,J,we);return function(et,_t){if(_t.v()){const cn=Xc(et);if(null!==cn&&!cn.isEqual(_t.field))throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${cn.toString()}' and '${_t.field.toString()}'`);const hi=Ia(et);null!==hi&&py(0,_t.field,hi)}const Ut=function(cn,hi){for(const Js of cn.filters)if(hi.indexOf(Js.op)>=0)return Js.op;return null}(et,function(cn){switch(cn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(_t.op));if(null!==Ut)throw new Ye(Be.INVALID_ARGUMENT,Ut===_t.op?`Invalid query. You cannot use more than one '${_t.op.toString()}' filter.`:`Invalid query. You cannot use '${_t.op.toString()}' filters with '${Ut.toString()}' filters.`)}(h,We),We}(n._query,0,o,n.firestore._databaseId,this.Ka,this.ja,this.Qa);return new ks(n.firestore,n.converter,function(h,y){const I=h.filters.concat([y]);return new sa(h.path,h.collectionGroup,h.explicitOrderBy.slice(),I,h.limit,h.limitType,h.startAt,h.endAt)}(n._query,l))}}class tv extends Yd{constructor(n,o){super(),this.Ka=n,this.Wa=o,this.type="orderBy"}_apply(n){const o=function(l,h,y){if(null!==l.startAt)throw new Ye(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==l.endAt)throw new Ye(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const I=new nu(h,y);return function(k,H){if(null===Ia(k)){const J=Xc(k);null!==J&&py(0,J,H.field)}}(l,I),I}(n._query,this.Ka,this.Wa);return new ks(n.firestore,n.converter,function(l,h){const y=l.explicitOrderBy.concat([h]);return new sa(l.path,l.collectionGroup,y,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n._query,o))}}class nv extends Yd{constructor(n,o,l){super(),this.type=n,this.Ga=o,this.za=l}_apply(n){return new ks(n.firestore,n.converter,iu(n._query,this.Ga,this.za))}}class mg extends Yd{constructor(n,o,l){super(),this.type=n,this.Ha=o,this.Ja=l}_apply(n){const o=fy(n,this.type,this.Ha,this.Ja);return new ks(n.firestore,n.converter,(h=o,new sa((l=n._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,h,l.endAt)));var l,h}}class ic extends Yd{constructor(n,o,l){super(),this.type=n,this.Ha=o,this.Ja=l}_apply(n){const o=fy(n,this.type,this.Ha,this.Ja);return new ks(n.firestore,n.converter,(h=o,new sa((l=n._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,h)));var l,h}}function fy(a,n,o,l){if(o[0]=(0,Ve.m9)(o[0]),o[0]instanceof Zd)return function(h,y,I,k,H){if(!k)throw new Ye(Be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${I}().`);const J=[];for(const re of Da(h))if(re.field.isKeyField())J.push(ri(y,k.key));else{const we=k.data.field(re.field);if(je(we))throw new Ye(Be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+re.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===we){const We=re.field.canonicalString();throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${We}' (used as the orderBy) does not exist.`)}J.push(we)}return new hc(J,H)}(a._query,a.firestore._databaseId,n,o[0]._document,l);{const h=_l(a.firestore);return function(y,I,k,H,J,re){const we=y.explicitOrderBy;if(J.length>we.length)throw new Ye(Be.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const We=[];for(let et=0;et<J.length;et++){const _t=J[et];if(we[et].field.isKeyField()){if("string"!=typeof _t)throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof _t}`);if(!$r(y)&&-1!==_t.indexOf("/"))throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${H}() must be a plain document ID, but '${_t}' contains a slash.`);const Ut=y.path.child(yn.fromString(_t));if(!mt.isDocumentKey(Ut))throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${H}() must result in a valid document path, but '${Ut}' is not because it contains an odd number of segments.`);const cn=new mt(Ut);We.push(ri(I,cn))}else{const Ut=ug(k,H,_t);We.push(Ut)}}return new hc(We,re)}(a._query,a.firestore._databaseId,h,n,o,l)}}function yg(a,n,o){if("string"==typeof(o=(0,Ve.m9)(o))){if(""===o)throw new Ye(Be.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!$r(n)&&-1!==o.indexOf("/"))throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${o}' contains a '/' character.`);const l=n.path.child(yn.fromString(o));if(!mt.isDocumentKey(l))throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${l}' is not because it has an odd number of segments (${l.length}).`);return ri(a,new mt(l))}if(o instanceof Mr)return ri(a,o._key);throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wd(o)}.`)}function Qd(a,n){if(!Array.isArray(a)||0===a.length)throw new Ye(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(a.length>10)throw new Ye(Be.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function py(a,n,o){if(!o.isEqual(n))throw new Ye(Be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${o.toString()}' instead.`)}class df{convertValue(n,o="none"){switch(Yn(n)){case 0:return null;case 1:return n.booleanValue;case 2:return Q(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,o);case 5:return n.stringValue;case 6:return this.convertBytes(Ie(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,o);case 10:return this.convertObject(n.mapValue,o);default:throw Rt()}}convertObject(n,o){const l={};return ti(n.fields,(h,y)=>{l[h]=this.convertValue(y,o)}),l}convertGeoPoint(n){return new Lu(Q(n.latitude),Q(n.longitude))}convertArray(n,o){return(n.values||[]).map(l=>this.convertValue(l,o))}convertServerTimestamp(n,o){switch(o){case"previous":const l=At(n);return null==l?null:this.convertValue(l,o);case"estimate":return this.convertTimestamp(gt(n));default:return null}}convertTimestamp(n){const o=$(n);return new It(o.seconds,o.nanos)}convertDocumentKey(n,o){const l=yn.fromString(n);Ht(Sc(l));const h=new jc(l.get(1),l.get(3)),y=new mt(l.popFirst(5));return h.isEqual(o)||wr(`Document ${y} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${o.projectId}/${o.database}) instead.`),y}}function hf(a,n,o){let l;return l=a?o&&(o.merge||o.mergeFields)?a.toFirestore(n,o):a.toFirestore(n):n,l}class ov extends df{constructor(n){super(),this.firestore=n}convertBytes(n){return new mo(n)}convertReference(n){const o=this.convertDocumentKey(n,this.firestore._databaseId);return new Mr(this.firestore,null,o)}}class gy{constructor(n,o){this._firestore=n,this._commitHandler=o,this._mutations=[],this._committed=!1,this._dataReader=_l(n)}set(n,o,l){this._verifyNotCommitted();const h=El(n,this._firestore),y=hf(h.converter,o,l),I=Kd(this._dataReader,"WriteBatch.set",h._key,y,null!==h.converter,l);return this._mutations.push(I.toMutation(h._key,mi.none())),this}update(n,o,l,...h){this._verifyNotCommitted();const y=El(n,this._firestore);let I;return I="string"==typeof(o=(0,Ve.m9)(o))||o instanceof Vi?ag(this._dataReader,"WriteBatch.update",y._key,o,l,h):af(this._dataReader,"WriteBatch.update",y._key,o),this._mutations.push(I.toMutation(y._key,mi.exists(!0))),this}delete(n){this._verifyNotCommitted();const o=El(n,this._firestore);return this._mutations=this._mutations.concat(new Ko(o._key,mi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ye(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function El(a,n){if((a=(0,Ve.m9)(a)).firestore!==n)throw new Ye(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class wl extends df{constructor(n){super(),this.firestore=n}convertBytes(n){return new mo(n)}convertReference(n){const o=this.convertDocumentKey(n,this.firestore._databaseId);return new Mr(this.firestore,null,o)}}function ff(a,n,o){a=qn(a,Mr);const l=qn(a.firestore,_i),h=hf(a.converter,n,o);return Cl(l,[Kd(_l(l),"setDoc",a._key,h,null!==a.converter,o).toMutation(a._key,mi.none())])}function _y(a,n,o,...l){a=qn(a,Mr);const h=qn(a.firestore,_i),y=_l(h);let I;return I="string"==typeof(n=(0,Ve.m9)(n))||n instanceof Vi?ag(y,"updateDoc",a._key,n,o,l):af(y,"updateDoc",a._key,n),Cl(h,[I.toMutation(a._key,mi.exists(!0))])}function vy(a,...n){var o,l,h;a=(0,Ve.m9)(a);let y={includeMetadataChanges:!1},I=0;"object"!=typeof n[I]||ig(n[I])||(y=n[I],I++);const k={includeMetadataChanges:y.includeMetadataChanges};if(ig(n[I])){const we=n[I];n[I]=null===(o=we.next)||void 0===o?void 0:o.bind(we),n[I+1]=null===(l=we.error)||void 0===l?void 0:l.bind(we),n[I+2]=null===(h=we.complete)||void 0===h?void 0:h.bind(we)}let H,J,re;if(a instanceof Mr)J=qn(a.firestore,_i),re=Nl(a._key.path),H={next:we=>{n[I]&&n[I](Eg(J,a,we))},error:n[I+1],complete:n[I+2]};else{const we=qn(a,ks);J=qn(we.firestore,_i),re=we._query;const We=new wl(J);H={next:et=>{n[I]&&n[I](new rc(J,We,we,et))},error:n[I+1],complete:n[I+2]},ev(a._query)}return function(we,We,et,_t){const Ut=new $d(_t),cn=new Hh(We,Ut,et);return we.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return xm(yield yl(we),cn)})),()=>{Ut.Xo(),we.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return Vd(yield yl(we),cn)}))}}(vi(J),re,k,H)}function Cl(a,n){return function(o,l){const h=new jr;return o.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(a,n,o){return Bp.apply(this,arguments)}(yield Yl(o),l,h)})),h.promise}(vi(a),n)}function Eg(a,n,o){const l=o.docs.get(n._key),h=new wl(a);return new fu(a,h,n._key,l,new nc(o.hasPendingWrites,o.fromCache),n.converter)}class wg extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=_l(n)}get(n){const o=El(n,this._firestore),l=new ov(this._firestore);return this._transaction.lookup([o._key]).then(h=>{if(!h||1!==h.length)return Rt();const y=h[0];if(y.isFoundDocument())return new Zd(this._firestore,l,y.key,y,o.converter);if(y.isNoDocument())return new Zd(this._firestore,l,o._key,null,o.converter);throw Rt()})}set(n,o,l){const h=El(n,this._firestore),y=hf(h.converter,o,l),I=Kd(this._dataReader,"Transaction.set",h._key,y,null!==h.converter,l);return this._transaction.set(h._key,I),this}update(n,o,l,...h){const y=El(n,this._firestore);let I;return I="string"==typeof(o=(0,Ve.m9)(o))||o instanceof Vi?ag(this._dataReader,"Transaction.update",y._key,o,l,h):af(this._dataReader,"Transaction.update",y._key,o),this._transaction.update(y._key,I),this}delete(n){const o=El(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(n,o){super(n,o),this._firestore=n}get(n){const o=El(n,this._firestore),l=new wl(this._firestore);return super.get(n).then(h=>new fu(this._firestore,l,o._key,h._document,new nc(!1,!1),o.converter))}}function Xd(a,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new Ye("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return n}function pf(){if("undefined"==typeof Uint8Array)throw new Ye("unimplemented","Uint8Arrays are not available in this environment.")}function Ig(){if("undefined"==typeof atob)throw new Ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(a){Ns=a})(ut.SDK_VERSION),(0,ut._registerComponent)(new Gt.wA("firestore",(a,{options:n})=>{const o=a.getProvider("app").getImmediate(),l=new _i(o,new E(a.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),l._setSettings(n),l},"PUBLIC")),(0,ut.registerVersion)("@firebase/firestore","3.1.0",void 0);class eh{constructor(n){this._delegate=n}static fromBase64String(n){return Ig(),new eh(mo.fromBase64String(n))}static fromUint8Array(n){return pf(),new eh(mo.fromUint8Array(n))}toBase64(){return Ig(),this._delegate.toBase64()}toUint8Array(){return pf(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gf(a){return function(a,n){if("object"!=typeof a||null===a)return!1;const o=a;for(const l of["next","error","complete"])if(l in o&&"function"==typeof o[l])return!0;return!1}(a)}class Dg{enableIndexedDbPersistence(n,o){return function(a,n){qd(a=qn(a,_i));const o=vi(a),l=a._freezeSettings(),h=new Wm;return $c(o,h,new Gm(h,l.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(n._delegate,{forceOwnership:o})}enableMultiTabIndexedDbPersistence(n){return function(a){qd(a=qn(a,_i));const n=vi(a),o=a._freezeSettings(),l=new Wm;return $c(n,l,new j_(l,o.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function(a){if(a._initialized&&!a._terminated)throw new Ye(Be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new jr;return a._queue.enqueueAndForgetEvenWhileRestricted((0,se.Z)(function*(){try{yield(o=(0,se.Z)(function*(l){if(!go.bt())return Promise.resolve();const h=l+"main";yield go.delete(h)}),function(l){return o.apply(this,arguments)})(up(a._databaseId,a._persistenceKey)),n.resolve()}catch(o){n.reject(o)}var o})),n.promise}(n._delegate)}}class Tg{constructor(n,o,l){this._delegate=o,this._persistenceProvider=l,this.INTERNAL={delete:()=>this.terminate()},n instanceof jc||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const o=this._delegate._getSettings();!n.merge&&o.host!==n.host&&$o("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},o),n)).merge,this._delegate._setSettings(n)}useEmulator(n,o,l={}){!function(a,n,o,l={}){var h;const y=(a=qn(a,nf))._getSettings();if("firestore.googleapis.com"!==y.host&&y.host!==n&&$o("Host has been set in both settings() and useEmulator(), emulator host will be used"),a._setSettings(Object.assign(Object.assign({},y),{host:`${n}:${o}`,ssl:!1})),l.mockUserToken){let I,k;if("string"==typeof l.mockUserToken)I=l.mockUserToken,k=ei.MOCK_USER;else{I=(0,Ve.Sg)(l.mockUserToken,null===(h=a._app)||void 0===h?void 0:h.options.projectId);const H=l.mockUserToken.sub||l.mockUserToken.user_id;if(!H)throw new Ye(Be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new ei(H)}a._credentials=new C(new Ho(I,k))}}(this._delegate,n,o,l)}enableNetwork(){return function(a){return function(a){return a.asyncQueue.enqueue((0,se.Z)(function*(){const n=yield eg(a),o=yield qm(a);return n.setNetworkEnabled(!0),function(l){const h=ft(l);return h.Kr.delete(0),Ph(h)}(o)}))}(vi(a=qn(a,_i)))}(this._delegate)}disableNetwork(){return function(a){return function(a){return a.asyncQueue.enqueue((0,se.Z)(function*(){const n=yield eg(a),o=yield qm(a);return n.setNetworkEnabled(!1),(l=(0,se.Z)(function*(h){const y=ft(h);y.Kr.add(0),yield dl(y),y.Wr.set("Offline")}),function(h){return l.apply(this,arguments)})(o);var l}))}(vi(a=qn(a,_i)))}(this._delegate)}enablePersistence(n){let o=!1,l=!1;return n&&(o=!!n.synchronizeTabs,l=!!n.experimentalForceOwningTab,tf("synchronizeTabs",o,"experimentalForceOwningTab",l)),o?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,l)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(a){return function(n){const o=new jr;return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(a,n){return km.apply(this,arguments)}(yield Yl(n),o)})),o.promise}(vi(a=qn(a,_i)))}(this._delegate)}onSnapshotsInSync(n){return function(a,n){return function(a,n){const o=new $d(n);return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return l=yield yl(a),h=o,ft(l).Zr.add(h),void h.next();var l,h})),()=>{o.Xo(),a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return l=yield yl(a),h=o,void ft(l).Zr.delete(h);var l,h}))}}(vi(a=qn(a,_i)),ig(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new Ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new Zc(this,ry(this._delegate,n))}catch(o){throw Ys(o,"collection()","Firestore.collection()")}}doc(n){try{return new Yo(this,zd(this._delegate,n))}catch(o){throw Ys(o,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new Qs(this,function(a,n){if(a=qn(a,nf),ty("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new Ye(Be.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ks(a,null,(o=n,new sa(yn.emptyPath(),o)));var o}(this._delegate,n))}catch(o){throw Ys(o,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function(a,n){return function(a,n){const o=new jr;return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){const l=yield(h=a,Gd(h).then(y=>y.datastore));var h;new FE(a.asyncQueue,l,n,o).run()})),o.promise}(vi(a),o=>n(new wg(a,o)))}(this._delegate,o=>n(new Ty(this,o)))}batch(){return vi(this._delegate),new Sg(new gy(this._delegate,n=>Cl(this._delegate,n)))}loadBundle(n){return function(a,n){const o=vi(a=qn(a,_i)),l=new K_;return function(a,n,o,l){const h=function(y,I){let k;return k="string"==typeof y?(new TextEncoder).encode(y):y,H=function(H,J){if(H instanceof Uint8Array)return zm(H,J);if(H instanceof ArrayBuffer)return zm(new Uint8Array(H),J);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new si(H,I);var H}(o,Oh(n));a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){!function(a,n,o){const l=ft(a);var h;(h=(0,se.Z)(function*(y,I,k){try{const H=yield I.getMetadata();if(yield function(We,et){const _t=ft(We),Ut=ci(et.createTime);return _t.persistence.runTransaction("hasNewerBundle","readonly",cn=>_t.Je.getBundleMetadata(cn,et.id)).then(cn=>!!cn&&cn.createTime.compareTo(Ut)>=0)}(y.localStore,H))return yield I.close(),void k._completeWith((We=H,{taskState:"Success",documentsLoaded:We.totalDocuments,bytesLoaded:We.totalBytes,totalDocuments:We.totalDocuments,totalBytes:We.totalBytes}));k._updateProgress(Nm(H));const J=new N_(H,y.localStore,I.N);let re=yield I.Qo();for(;re;){const We=yield J.fo(re);We&&k._updateProgress(We),re=yield I.Qo()}const we=yield J.complete();yield ha(y,we.Tn,void 0),yield function(We,et){const _t=ft(We);return _t.persistence.runTransaction("Save bundle","readwrite",Ut=>_t.Je.saveBundleMetadata(Ut,et))}(y.localStore,H),k._completeWith(we.progress)}catch(H){$o("SyncEngine",`Loading bundle failed with ${H}`),k._failWith(H)}var We}),function(y,I,k){return h.apply(this,arguments)})(l,n,o).then(()=>{l.sharedClientState.notifyBundleLoaded()})}(yield Yl(a),h,l)}))}(o,a._databaseId,n,l),l}(this._delegate,n)}namedQuery(n){return function(a,n){return function(a,n){return a.asyncQueue.enqueue((0,se.Z)(function*(){return function(o,l){const h=ft(o);return h.persistence.runTransaction("Get named query","readonly",y=>h.Je.getNamedQuery(y,l))}(yield tg(a),n)}))}(vi(a=qn(a,_i)),n).then(o=>o?new ks(a,null,o.query):null)}(this._delegate,n).then(o=>o?new Qs(this,o):null)}}class mf extends df{constructor(n){super(),this.firestore=n}convertBytes(n){return new eh(new mo(n))}convertReference(n){const o=this.convertDocumentKey(n,this.firestore._databaseId);return Yo.forKey(o,this.firestore,null)}}class Ty{constructor(n,o){this._firestore=n,this._delegate=o,this._userDataWriter=new mf(n)}get(n){const o=sc(n);return this._delegate.get(o).then(l=>new qc(this._firestore,new fu(this._firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,o.converter)))}set(n,o,l){const h=sc(n);return l?(Xd("Transaction.set",l),this._delegate.set(h,o,l)):this._delegate.set(h,o),this}update(n,o,l,...h){const y=sc(n);return 2===arguments.length?this._delegate.update(y,o):this._delegate.update(y,o,l,...h),this}delete(n){const o=sc(n);return this._delegate.delete(o),this}}class Sg{constructor(n){this._delegate=n}set(n,o,l){const h=sc(n);return l?(Xd("WriteBatch.set",l),this._delegate.set(h,o,l)):this._delegate.set(h,o),this}update(n,o,l,...h){const y=sc(n);return 2===arguments.length?this._delegate.update(y,o):this._delegate.update(y,o,l,...h),this}delete(n){const o=sc(n);return this._delegate.delete(o),this}commit(){return this._delegate.commit()}}class pu{constructor(n,o,l){this._firestore=n,this._userDataWriter=o,this._delegate=l}fromFirestore(n,o){const l=new cf(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new Kc(this._firestore,l),null!=o?o:{})}toFirestore(n,o){return o?this._delegate.toFirestore(n,o):this._delegate.toFirestore(n)}static getInstance(n,o){const l=pu.INSTANCES;let h=l.get(n);h||(h=new WeakMap,l.set(n,h));let y=h.get(o);return y||(y=new pu(n,new mf(n),o),h.set(o,y)),y}}pu.INSTANCES=new WeakMap;class Yo{constructor(n,o){this.firestore=n,this._delegate=o,this._userDataWriter=new mf(n)}static forPath(n,o,l){if(n.length%2!=0)throw new Ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new Yo(o,new Mr(o._delegate,l,new mt(n)))}static forKey(n,o,l){return new Yo(o,new Mr(o._delegate,l,n))}get id(){return this._delegate.id}get parent(){return new Zc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new Zc(this.firestore,ry(this._delegate,n))}catch(o){throw Ys(o,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,Ve.m9)(n))instanceof Mr&&rf(this._delegate,n)}set(n,o){o=Xd("DocumentReference.set",o);try{return o?ff(this._delegate,n,o):ff(this._delegate,n)}catch(l){throw Ys(l,"setDoc()","DocumentReference.set()")}}update(n,o,...l){try{return 1===arguments.length?_y(this._delegate,n):_y(this._delegate,n,o,...l)}catch(h){throw Ys(h,"updateDoc()","DocumentReference.update()")}}delete(){return function(a){return Cl(qn(a.firestore,_i),[new Ko(a._key,mi.none())])}(this._delegate)}onSnapshot(...n){const o=Ag(n),l=Rg(n,h=>new qc(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return vy(this._delegate,o,l)}get(n){let o;return o="cache"===(null==n?void 0:n.source)?function(a){a=qn(a,Mr);const n=qn(a.firestore,_i),o=vi(n),l=new wl(n);return function(a,n){const o=new jr;return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return(l=(0,se.Z)(function*(h,y,I){try{const k=yield function(H,J){const re=ft(H);return re.persistence.runTransaction("read document","readonly",we=>re.Qn.An(we,J))}(h,y);k.isFoundDocument()?I.resolve(k):k.isNoDocument()?I.resolve(null):I.reject(new Ye(Be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const H=ys(k,`Failed to get document '${y} from cache`);I.reject(H)}}),function(h,y,I){return l.apply(this,arguments)})(yield tg(a),n,o);var l})),o.promise}(o,a._key).then(h=>new fu(n,l,a._key,h,new nc(null!==h&&h.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===(null==n?void 0:n.source)?function(a){a=qn(a,Mr);const n=qn(a.firestore,_i);return Qm(vi(n),a._key,{source:"server"}).then(o=>Eg(n,a,o))}(this._delegate):function(a){a=qn(a,Mr);const n=qn(a.firestore,_i);return Qm(vi(n),a._key).then(o=>Eg(n,a,o))}(this._delegate),o.then(l=>new qc(this.firestore,new fu(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)))}withConverter(n){return new Yo(this.firestore,this._delegate.withConverter(n?pu.getInstance(this.firestore,n):null))}}function Ys(a,n,o){return a.message=a.message.replace(n,o),a}function Ag(a){for(const n of a)if("object"==typeof n&&!gf(n))return n;return{}}function Rg(a,n){var o,l;let h;return h=gf(a[0])?a[0]:gf(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:y=>{h.next&&h.next(n(y))},error:null===(o=h.error)||void 0===o?void 0:o.bind(h),complete:null===(l=h.complete)||void 0===l?void 0:l.bind(h)}}class qc{constructor(n,o){this._firestore=n,this._delegate=o}get ref(){return new Yo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,o){return this._delegate.get(n,o)}isEqual(n){return dy(this._delegate,n._delegate)}}class Kc extends qc{data(n){const o=this._delegate.data(n);return function(a,n){a||Rt()}(void 0!==o),o}}class Qs{constructor(n,o){this.firestore=n,this._delegate=o,this._userDataWriter=new mf(n)}where(n,o,l){try{return new Qs(this.firestore,vl(this._delegate,function(a,n,o){const l=n,h=fg("where",a);return new pg(h,l,o)}(n,o,l)))}catch(h){throw Ys(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,o){try{return new Qs(this.firestore,vl(this._delegate,function(a,n="asc"){const o=n,l=fg("orderBy",a);return new tv(l,o)}(n,o)))}catch(l){throw Ys(l,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new Qs(this.firestore,vl(this._delegate,function(a){return fa("limit",a),new nv("limit",a,"F")}(n)))}catch(o){throw Ys(o,"limit()","Query.limit()")}}limitToLast(n){try{return new Qs(this.firestore,vl(this._delegate,function(a){return fa("limitToLast",a),new nv("limitToLast",a,"L")}(n)))}catch(o){throw Ys(o,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new Qs(this.firestore,vl(this._delegate,function(...a){return new mg("startAt",a,!0)}(...n)))}catch(o){throw Ys(o,"startAt()","Query.startAt()")}}startAfter(...n){try{return new Qs(this.firestore,vl(this._delegate,function(...a){return new mg("startAfter",a,!1)}(...n)))}catch(o){throw Ys(o,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new Qs(this.firestore,vl(this._delegate,function(...a){return new ic("endBefore",a,!0)}(...n)))}catch(o){throw Ys(o,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new Qs(this.firestore,vl(this._delegate,function(...a){return new ic("endAt",a,!1)}(...n)))}catch(o){throw Ys(o,"endAt()","Query.endAt()")}}isEqual(n){return iy(this._delegate,n._delegate)}get(n){let o;return o="cache"===(null==n?void 0:n.source)?function(a){a=qn(a,ks);const n=qn(a.firestore,_i),o=vi(n),l=new wl(n);return function(a,n){const o=new jr;return a.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return(l=(0,se.Z)(function*(h,y,I){try{const k=yield Ah(h,y,!0),H=new Mm(y,k.Gn),J=H.Io(k.documents),re=H.applyChanges(J,!1);I.resolve(re.snapshot)}catch(k){const H=ys(k,`Failed to execute query '${y} against cache`);I.reject(H)}}),function(h,y,I){return l.apply(this,arguments)})(yield tg(a),n,o);var l})),o.promise}(o,a._query).then(h=>new rc(n,l,a,h))}(this._delegate):"server"===(null==n?void 0:n.source)?function(a){a=qn(a,ks);const n=qn(a.firestore,_i),o=vi(n),l=new wl(n);return Jm(o,a._query,{source:"server"}).then(h=>new rc(n,l,a,h))}(this._delegate):function(a){a=qn(a,ks);const n=qn(a.firestore,_i),o=vi(n),l=new wl(n);return ev(a._query),Jm(o,a._query).then(h=>new rc(n,l,a,h))}(this._delegate),o.then(l=>new Ay(this.firestore,new rc(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)))}onSnapshot(...n){const o=Ag(n),l=Rg(n,h=>new Ay(this.firestore,new rc(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return vy(this._delegate,o,l)}withConverter(n){return new Qs(this.firestore,this._delegate.withConverter(n?pu.getInstance(this.firestore,n):null))}}class Sy{constructor(n,o){this._firestore=n,this._delegate=o}get type(){return this._delegate.type}get doc(){return new Kc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ay{constructor(n,o){this._firestore=n,this._delegate=o}get query(){return new Qs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new Kc(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(o=>new Sy(this._firestore,o))}forEach(n,o){this._delegate.forEach(l=>{n.call(o,new Kc(this._firestore,l))})}isEqual(n){return dy(this._delegate,n._delegate)}}class Zc extends Qs{constructor(n,o){super(n,o),this.firestore=n,this._delegate=o}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new Yo(this.firestore,n):null}doc(n){try{return new Yo(this.firestore,void 0===n?zd(this._delegate):zd(this._delegate,n))}catch(o){throw Ys(o,"doc()","CollectionReference.doc()")}}add(n){return function(a,n){const o=qn(a.firestore,_i),l=zd(a),h=hf(a.converter,n);return Cl(o,[Kd(_l(a.firestore),"addDoc",l._key,h,null!==a.converter,{}).toMutation(l._key,mi.exists(!1))]).then(()=>l)}(this._delegate,n).then(o=>new Yo(this.firestore,o))}isEqual(n){return rf(this._delegate,n._delegate)}withConverter(n){return new Zc(this.firestore,this._delegate.withConverter(n?pu.getInstance(this.firestore,n):null))}}function sc(a){return qn(a,Mr)}class yf{constructor(...n){this._delegate=new Vi(...n)}static documentId(){return new yf(nr.keyField().canonicalString())}isEqual(n){return(n=(0,Ve.m9)(n))instanceof Vi&&this._delegate._internalPath.isEqual(n._internalPath)}}class oc{constructor(n){this._delegate=n}static serverTimestamp(){const n=new of("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new oc(n)}static delete(){const n=new zc("deleteField");return n._methodName="FieldValue.delete",new oc(n)}static arrayUnion(...n){const o=function(...a){return new ay("arrayUnion",a)}(...n);return o._methodName="FieldValue.arrayUnion",new oc(o)}static arrayRemove(...n){const o=function(...a){return new uy("arrayRemove",a)}(...n);return o._methodName="FieldValue.arrayRemove",new oc(o)}static increment(n){const o=function(a){return new ly("increment",a)}(n);return o._methodName="FieldValue.increment",new oc(o)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const Xi={Firestore:Tg,GeoPoint:Lu,Timestamp:It,Blob:eh,Transaction:Ty,WriteBatch:Sg,DocumentReference:Yo,DocumentSnapshot:qc,Query:Qs,QueryDocumentSnapshot:Kc,QuerySnapshot:Ay,CollectionReference:Zc,FieldPath:yf,FieldValue:oc,setLogLevel:function(a){!function(a){Ki.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function(a){(function(a,n){a.INTERNAL.registerComponent(new Gt.wA("firestore-compat",o=>((n,o)=>new Tg(n,o,new Dg))(o.getProvider("app-compat").getImmediate(),o.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Xi)))})(a),a.registerVersion("@firebase/firestore-compat","0.1.3")}(st.Z);var bl=G(8006),xy=G(7841);function xg(a,n){return function(a,n=j.z){return new ne.y(o=>{let l;return null!=n?n.schedule(()=>{l=a.onSnapshot({includeMetadataChanges:!0},o)}):l=a.onSnapshot({includeMetadataChanges:!0},o),()=>{null!=l&&l()}})}(a,n)}function Il(a,n){return xg(a,n).pipe((0,Ue.U)(o=>({payload:o,type:"query"})))}function _f(a,n){return Il(a,n).pipe((0,be.O)(void 0),ge(),(0,Ue.U)(([o,l])=>{const h=l.payload.docChanges(),y=h.map(I=>({type:I.type,payload:I}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(l.payload.metadata)&&l.payload.docs.forEach((I,k)=>{const H=h.find(re=>re.doc.ref.isEqual(I.ref)),J=null==o?void 0:o.payload.docs.find(re=>re.ref.isEqual(I.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(I.metadata)||!H&&J&&JSON.stringify(J.metadata)===JSON.stringify(I.metadata)||y.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:I}})}),y}))}function My(a,n,o){return _f(a,o).pipe((0,Se.R)((l,h)=>function(a,n,o){return n.forEach(l=>{o.indexOf(l.type)>-1&&(a=function(a,n){switch(n.type){case"added":if(!a[n.newIndex]||!a[n.newIndex].doc.ref.isEqual(n.doc.ref))return Ng(a,n.newIndex,0,n);break;case"modified":if(null==a[n.oldIndex]||a[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const o=a.slice();return o.splice(n.oldIndex,1),o.splice(n.newIndex,0,n),o}return Ng(a,n.newIndex,1,n)}break;case"removed":if(a[n.oldIndex]&&a[n.oldIndex].doc.ref.isEqual(n.doc.ref))return Ng(a,n.oldIndex,1)}return a}(a,l))}),a}(l,h.map(y=>y.payload),n),[]),o=>o.lift(new me(void 0,void 0)),(0,Ue.U)(l=>l.map(h=>({type:h.type,payload:h}))))}function Ng(a,n,o,...l){const h=a.slice();return h.splice(n,o,...l),h}function fv(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class Mg{constructor(n,o,l){this.ref=n,this.query=o,this.afs=l}stateChanges(n){let o=_f(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(o=o.pipe((0,Ue.U)(l=>l.filter(h=>n.indexOf(h.type)>-1)))),o.pipe((0,be.O)(void 0),ge(),(0,Ae.h)(([l,h])=>h.length>0||!l),(0,Ue.U)(([l,h])=>h),he.iC)}auditTrail(n){return this.stateChanges(n).pipe((0,Se.R)((o,l)=>[...o,...l],[]))}snapshotChanges(n){const o=fv(n);return My(this.query,o,this.afs.schedulers.outsideAngular).pipe(he.iC)}valueChanges(n={}){return Il(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ue.U)(o=>o.payload.docs.map(l=>n.idField?Object.assign(Object.assign({},l.data()),{[n.idField]:l.id}):l.data())),he.iC)}get(n){return(0,Oe.D)(this.query.get(n)).pipe(he.iC)}add(n){return this.ref.add(n)}doc(n){return new vf(this.ref.doc(n),this.afs)}}class vf{constructor(n,o){this.ref=n,this.afs=o}set(n,o){return this.ref.set(n,o)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,o){const l=this.ref.collection(n),{ref:h,query:y}=ga(l,o);return new Mg(h,y,this.afs)}snapshotChanges(){return function(a,n){return xg(a,n).pipe((0,be.O)(void 0),ge(),(0,Ue.U)(([o,l])=>l.exists?(null==o?void 0:o.exists)?{payload:l,type:"modified"}:{payload:l,type:"added"}:{payload:l,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(he.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,Ue.U)(({payload:o})=>n.idField?Object.assign(Object.assign({},o.data()),{[n.idField]:o.id}):o.data()))}get(n){return(0,Oe.D)(this.ref.get(n)).pipe(he.iC)}}class gu{constructor(n,o){this.query=n,this.afs=o}stateChanges(n){return n&&0!==n.length?_f(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ue.U)(o=>o.filter(l=>n.indexOf(l.type)>-1)),(0,Ae.h)(o=>o.length>0),he.iC):_f(this.query,this.afs.schedulers.outsideAngular).pipe(he.iC)}auditTrail(n){return this.stateChanges(n).pipe((0,Se.R)((o,l)=>[...o,...l],[]))}snapshotChanges(n){const o=fv(n);return My(this.query,o,this.afs.schedulers.outsideAngular).pipe(he.iC)}valueChanges(n={}){return Il(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ue.U)(l=>l.payload.docs.map(h=>n.idField?Object.assign({[n.idField]:h.id},h.data()):h.data())),he.iC)}get(n){return(0,Oe.D)(this.query.get(n)).pipe(he.iC)}}const ky=new w.OlP("angularfire2.enableFirestorePersistence"),Fy=new w.OlP("angularfire2.firestore.persistenceSettings"),mu=new w.OlP("angularfire2.firestore.settings"),Ba=new w.OlP("angularfire2.firestore.use-emulator");function ga(a,n=(o=>o)){return{query:n(a),ref:a}}let Og=(()=>{class a{constructor(o,l,h,y,I,k,H,J,re,we,We,et,_t,Ut,cn,hi){this.schedulers=H;const Js=(0,it.on)(o,k,l),yu=re;we&&(0,bl.nw)(Js,k,We,_t,Ut,cn,et,hi),[this.firestore,this.persistenceEnabled$]=(0,he.cc)(`${Js.name}.firestore`,"AngularFirestore",Js.name,()=>{const ma=k.runOutsideAngular(()=>Js.firestore());if(y&&ma.settings(y),yu&&ma.useEmulator(...yu),h&&!(0,Qe.PM)(I)){const Yc=()=>{try{return(0,Oe.D)(ma.enablePersistence(J||void 0).then(()=>!0,()=>!1))}catch(th){return"undefined"!=typeof console&&console.warn(th),(0,Te.of)(!1)}};return[ma,k.runOutsideAngular(Yc)]}return[ma,(0,Te.of)(!1)]},[y,yu,h])}collection(o,l){let h;h="string"==typeof o?this.firestore.collection(o):o;const{ref:y,query:I}=ga(h,l),k=this.schedulers.ngZone.run(()=>y);return new Mg(k,I,this)}collectionGroup(o,l){const h=l||(I=>I),y=this.firestore.collectionGroup(o);return new gu(h(y),this)}doc(o){let l;l="string"==typeof o?this.firestore.doc(o):o;const h=this.schedulers.ngZone.run(()=>l);return new vf(h,this)}createId(){return this.firestore.collection("_").doc().id}}return a.\u0275fac=function(o){return new(o||a)(w.LFG(it.Dh),w.LFG(it.xv,8),w.LFG(ky,8),w.LFG(mu,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(he.HU),w.LFG(Fy,8),w.LFG(Ba,8),w.LFG(bl.zQ,8),w.LFG(bl.Qv,8),w.LFG(bl.L6,8),w.LFG(bl._Q,8),w.LFG(bl.rT,8),w.LFG(bl.lh,8),w.LFG(bl.f7,8))},a.\u0275prov=w.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"}),a})(),Ly=(()=>{class a{constructor(){xy.Z.registerVersion("angularfire",he.q4.full,"fst-compat")}static enablePersistence(o){return{ngModule:a,providers:[{provide:ky,useValue:!0},{provide:Fy,useValue:o}]}}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=w.oAB({type:a}),a.\u0275inj=w.cJS({providers:[Og]}),a})()},8939:(bt,Ge,G)=>{"use strict";G.d(Ge,{hO:()=>ve,xv:()=>oe,Dh:()=>ge,GT:()=>he,on:()=>ee,pX:()=>Te});var w=G(3018),j=G(7841),ne=G(9126);bt=G.hmd(bt);const Oe=["ngOnDestroy"],Te=(be,Ue,Se,Ae={})=>new Proxy(be,{get:(it,Qe)=>Se.runOutsideAngular(()=>{var Je;if(be[Qe])return(null===(Je=null==Ae?void 0:Ae.spy)||void 0===Je?void 0:Je.get)&&Ae.spy.get(Qe,be[Qe]),be[Qe];if(Oe.indexOf(Qe)>-1)return()=>{};const st=Ue.toPromise().then(se=>{const ut=se&&se[Qe];return"function"==typeof ut?ut.bind(se):ut&&ut.then?ut.then(Gt=>Se.run(()=>Gt)):Se.run(()=>ut)});return new Proxy(()=>{},{get:(se,ut)=>st[ut],apply:(se,ut,Gt)=>st.then(Zt=>{var Ve;const Ne=Zt&&Zt(...Gt);return(null===(Ve=null==Ae?void 0:Ae.spy)||void 0===Ve?void 0:Ve.apply)&&Ae.spy.apply(Qe,Gt,Ne),Ne})})})}),he=(be,Ue)=>{Ue.forEach(Se=>{Object.getOwnPropertyNames(Se.prototype||Se).forEach(Ae=>{Object.defineProperty(be.prototype,Ae,Object.getOwnPropertyDescriptor(Se.prototype||Se,Ae))})})};class Fe{constructor(Ue){return Ue}}const ge=new w.OlP("angularfire2.app.options"),oe=new w.OlP("angularfire2.app.name");function ee(be,Ue,Se){const it="object"==typeof Se&&Se||{};it.name=it.name||"string"==typeof Se&&Se||"[DEFAULT]";const Je=j.Z.apps.filter(st=>st&&st.name===it.name)[0]||Ue.runOutsideAngular(()=>j.Z.initializeApp(be,it));try{JSON.stringify(be)!==JSON.stringify(Je.options)&&te("error",`${Je.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(st){}return new Fe(Je)}const te=(be,...Ue)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[be](...Ue)},me={provide:Fe,useFactory:ee,deps:[ge,w.R0b,[new w.FiY,oe]]};let ve=(()=>{class be{constructor(Se){j.Z.registerVersion("angularfire",ne.q4.full,"core"),j.Z.registerVersion("angularfire",ne.q4.full,"app-compat"),j.Z.registerVersion("angular",w.q4F.full,Se.toString())}static initializeApp(Se,Ae){return{ngModule:be,providers:[{provide:ge,useValue:Se},{provide:oe,useValue:Ae}]}}}return be.\u0275fac=function(Se){return new(Se||be)(w.LFG(w.Lbi))},be.\u0275mod=w.oAB({type:be}),be.\u0275inj=w.cJS({providers:[me]}),be})()},9126:(bt,Ge,G)=>{"use strict";G.d(Ge,{q4:()=>ee,iC:()=>Ne,fc:()=>Zt,HU:()=>st,cc:()=>ve});var w=G(3018);(0,G(5452).registerVersion)("firebase","9.1.2","app");var Te=G(7771),he=G(3637),Fe=G(3342),ge=G(309),oe=G(3101);bt=G.hmd(bt);const ee=new w.GfV("7.0.4"),te=!!bt.hot,me=(ye,...Ce)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[ye](...Ce)};function ve(ye,Ce,Xe,Et,Yt){const[,ot,ct]=globalThis.\u0275AngularfireInstanceCache.find(Pt=>Pt[0]===ye)||[];if(ot)return function(ye,Ce){try{return ye.toString()===Ce.toString()}catch(Xe){return ye===Ce}}(Yt,ct)||(me("error",`${Ce} was already initialized on the ${Xe} Firebase App with different settings.${te?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Yt,was:ct})),ot;{const Pt=Et();return globalThis.\u0275AngularfireInstanceCache.push([ye,Pt,Yt]),Pt}}function it(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class Qe{constructor(Ce,Xe=Te.N){this.zone=Ce,this.delegate=Xe}now(){return this.delegate.now()}schedule(Ce,Xe,Et){const Yt=this.zone;return this.delegate.schedule(function(ct){Yt.runGuarded(()=>{Ce.apply(this,[ct])})},Xe,Et)}}class Je{constructor(Ce){this.zone=Ce,this.task=null}call(Ce,Xe){const Et=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",it,{},it,it)),Xe.pipe((0,Fe.b)({next:Et,complete:Et,error:Et})).subscribe(Ce).add(Et)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let st=(()=>{class ye{constructor(Xe){this.ngZone=Xe,this.outsideAngular=Xe.runOutsideAngular(()=>new Qe(Zone.current)),this.insideAngular=Xe.run(()=>new Qe(Zone.current,he.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return ye.\u0275fac=function(Xe){return new(Xe||ye)(w.LFG(w.R0b))},ye.\u0275prov=w.Yz7({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye})();function se(){const ye=globalThis.\u0275AngularFireScheduler;if(!ye)throw new Error("AngularFireModule has not been provided");return ye}function Zt(ye){return ye.pipe((0,ge.QV)(se().outsideAngular))}function Ne(ye){return se(),function(ye){return function(Xe){return(Xe=Xe.lift(new Je(ye.ngZone))).pipe((0,oe.R)(ye.outsideAngular),(0,ge.QV)(ye.insideAngular))}}(se())(ye)}},665:(bt,Ge,G)=>{"use strict";G.d(Ge,{Wl:()=>be,Fj:()=>it,qu:()=>ke,u:()=>Gi,sg:()=>ki,nD:()=>zi,wO:()=>Ii,JJ:()=>Ir,JL:()=>Bt,wV:()=>ss,c5:()=>Di,UX:()=>K,Q7:()=>zn,kI:()=>Gt,_Y:()=>Tr});var w=G(3018),j=G(8583),ne=G(7574),Oe=G(9796),Te=G(8002),he=G(1555),Fe=G(4402);function oe(P,x){return new ne.y(S=>{const W=P.length;if(0===W)return void S.complete();const De=new Array(W);let nt=0,Dt=0;for(let xn=0;xn<W;xn++){const Lr=(0,Fe.D)(P[xn]);let Qr=!1;S.add(Lr.subscribe({next:Nn=>{Qr||(Qr=!0,Dt++),De[xn]=Nn},error:Nn=>S.error(Nn),complete:()=>{nt++,(nt===W||!Qr)&&(Dt===W&&S.next(x?x.reduce((Nn,pi,Is)=>(Nn[pi]=De[Is],Nn),{}):De),S.complete())}}))}})}let ee=(()=>{class P{constructor(S,W){this._renderer=S,this._elementRef=W,this.onChange=De=>{},this.onTouched=()=>{}}setProperty(S,W){this._renderer.setProperty(this._elementRef.nativeElement,S,W)}registerOnTouched(S){this.onTouched=S}registerOnChange(S){this.onChange=S}setDisabledState(S){this.setProperty("disabled",S)}}return P.\u0275fac=function(S){return new(S||P)(w.Y36(w.Qsj),w.Y36(w.SBq))},P.\u0275dir=w.lG2({type:P}),P})(),te=(()=>{class P extends ee{}return P.\u0275fac=function(){let x;return function(W){return(x||(x=w.n5z(P)))(W||P)}}(),P.\u0275dir=w.lG2({type:P,features:[w.qOj]}),P})();const me=new w.OlP("NgValueAccessor"),ve={provide:me,useExisting:(0,w.Gpc)(()=>be),multi:!0};let be=(()=>{class P extends te{writeValue(S){this.setProperty("checked",S)}}return P.\u0275fac=function(){let x;return function(W){return(x||(x=w.n5z(P)))(W||P)}}(),P.\u0275dir=w.lG2({type:P,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(S,W){1&S&&w.NdJ("change",function(nt){return W.onChange(nt.target.checked)})("blur",function(){return W.onTouched()})},features:[w._Bn([ve]),w.qOj]}),P})();const Ue={provide:me,useExisting:(0,w.Gpc)(()=>it),multi:!0},Ae=new w.OlP("CompositionEventMode");let it=(()=>{class P extends ee{constructor(S,W,De){super(S,W),this._compositionMode=De,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const P=(0,j.q)()?(0,j.q)().getUserAgent():"";return/android (\d+)/.test(P.toLowerCase())}())}writeValue(S){this.setProperty("value",null==S?"":S)}_handleInput(S){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(S)}_compositionStart(){this._composing=!0}_compositionEnd(S){this._composing=!1,this._compositionMode&&this.onChange(S)}}return P.\u0275fac=function(S){return new(S||P)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(Ae,8))},P.\u0275dir=w.lG2({type:P,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(S,W){1&S&&w.NdJ("input",function(nt){return W._handleInput(nt.target.value)})("blur",function(){return W.onTouched()})("compositionstart",function(){return W._compositionStart()})("compositionend",function(nt){return W._compositionEnd(nt.target.value)})},features:[w._Bn([Ue]),w.qOj]}),P})();function Qe(P){return null==P||0===P.length}function Je(P){return null!=P&&"number"==typeof P.length}const st=new w.OlP("NgValidators"),se=new w.OlP("NgAsyncValidators"),ut=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Gt{static min(x){return P=x,x=>{if(Qe(x.value)||Qe(P))return null;const S=parseFloat(x.value);return!isNaN(S)&&S<P?{min:{min:P,actual:x.value}}:null};var P}static max(x){return P=x,x=>{if(Qe(x.value)||Qe(P))return null;const S=parseFloat(x.value);return!isNaN(S)&&S>P?{max:{max:P,actual:x.value}}:null};var P}static required(x){return Ne(x)}static requiredTrue(x){return!0===x.value?null:{required:!0}}static email(x){return Qe((P=x).value)||ut.test(P.value)?null:{email:!0};var P}static minLength(x){return Re(x)}static maxLength(x){return ye(x)}static pattern(x){return Ce(x)}static nullValidator(x){return null}static compose(x){return Ft(x)}static composeAsync(x){return wt(x)}}function Ne(P){return Qe(P.value)?{required:!0}:null}function Re(P){return x=>Qe(x.value)||!Je(x.value)?null:x.value.length<P?{minlength:{requiredLength:P,actualLength:x.value.length}}:null}function ye(P){return x=>Je(x.value)&&x.value.length>P?{maxlength:{requiredLength:P,actualLength:x.value.length}}:null}function Ce(P){if(!P)return Xe;let x,S;return"string"==typeof P?(S="","^"!==P.charAt(0)&&(S+="^"),S+=P,"$"!==P.charAt(P.length-1)&&(S+="$"),x=new RegExp(S)):(S=P.toString(),x=P),W=>{if(Qe(W.value))return null;const De=W.value;return x.test(De)?null:{pattern:{requiredPattern:S,actualValue:De}}}}function Xe(P){return null}function Et(P){return null!=P}function Yt(P){const x=(0,w.QGY)(P)?(0,Fe.D)(P):P;return(0,w.CqO)(x),x}function ot(P){let x={};return P.forEach(S=>{x=null!=S?Object.assign(Object.assign({},x),S):x}),0===Object.keys(x).length?null:x}function ct(P,x){return x.map(S=>S(P))}function Jt(P){return P.map(x=>function(P){return!P.validate}(x)?x:S=>x.validate(S))}function Ft(P){if(!P)return null;const x=P.filter(Et);return 0==x.length?null:function(S){return ot(ct(S,x))}}function rn(P){return null!=P?Ft(Jt(P)):null}function wt(P){if(!P)return null;const x=P.filter(Et);return 0==x.length?null:function(S){return function(...P){if(1===P.length){const x=P[0];if((0,Oe.k)(x))return oe(x,null);if((0,he.K)(x)&&Object.getPrototypeOf(x)===Object.prototype){const S=Object.keys(x);return oe(S.map(W=>x[W]),S)}}if("function"==typeof P[P.length-1]){const x=P.pop();return oe(P=1===P.length&&(0,Oe.k)(P[0])?P[0]:P,null).pipe((0,Te.U)(S=>x(...S)))}return oe(P,null)}(ct(S,x).map(Yt)).pipe((0,Te.U)(ot))}}function ht(P){return null!=P?wt(Jt(P)):null}function jt(P,x){return null===P?[x]:Array.isArray(P)?[...P,x]:[P,x]}function dn(P){return P._rawValidators}function Fn(P){return P._rawAsyncValidators}function un(P){return P?Array.isArray(P)?P:[P]:[]}function ir(P,x){return Array.isArray(P)?P.includes(x):P===x}function yr(P,x){const S=un(x);return un(P).forEach(De=>{ir(S,De)||S.push(De)}),S}function Dn(P,x){return un(x).filter(S=>!ir(P,S))}let Tn=(()=>{class P{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(S){this._rawValidators=S||[],this._composedValidatorFn=rn(this._rawValidators)}_setAsyncValidators(S){this._rawAsyncValidators=S||[],this._composedAsyncValidatorFn=ht(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(S){this._onDestroyCallbacks.push(S)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(S=>S()),this._onDestroyCallbacks=[]}reset(S){this.control&&this.control.reset(S)}hasError(S,W){return!!this.control&&this.control.hasError(S,W)}getError(S,W){return this.control?this.control.getError(S,W):null}}return P.\u0275fac=function(S){return new(S||P)},P.\u0275dir=w.lG2({type:P}),P})(),Sn=(()=>{class P extends Tn{get formDirective(){return null}get path(){return null}}return P.\u0275fac=function(){let x;return function(W){return(x||(x=w.n5z(P)))(W||P)}}(),P.\u0275dir=w.lG2({type:P,features:[w.qOj]}),P})();class hn extends Tn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Hn{constructor(x){this._cd=x}is(x){var S,W,De;return"submitted"===x?!!(null===(S=this._cd)||void 0===S?void 0:S.submitted):!!(null===(De=null===(W=this._cd)||void 0===W?void 0:W.control)||void 0===De?void 0:De[x])}}let Ir=(()=>{class P extends Hn{constructor(S){super(S)}}return P.\u0275fac=function(S){return new(S||P)(w.Y36(hn,2))},P.\u0275dir=w.lG2({type:P,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(S,W){2&S&&w.ekj("ng-untouched",W.is("untouched"))("ng-touched",W.is("touched"))("ng-pristine",W.is("pristine"))("ng-dirty",W.is("dirty"))("ng-valid",W.is("valid"))("ng-invalid",W.is("invalid"))("ng-pending",W.is("pending"))},features:[w.qOj]}),P})(),Bt=(()=>{class P extends Hn{constructor(S){super(S)}}return P.\u0275fac=function(S){return new(S||P)(w.Y36(Sn,10))},P.\u0275dir=w.lG2({type:P,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(S,W){2&S&&w.ekj("ng-untouched",W.is("untouched"))("ng-touched",W.is("touched"))("ng-pristine",W.is("pristine"))("ng-dirty",W.is("dirty"))("ng-valid",W.is("valid"))("ng-invalid",W.is("invalid"))("ng-pending",W.is("pending"))("ng-submitted",W.is("submitted"))},features:[w.qOj]}),P})();function de(P,x){Pe(P,x),x.valueAccessor.writeValue(P.value),function(P,x){x.valueAccessor.registerOnChange(S=>{P._pendingValue=S,P._pendingChange=!0,P._pendingDirty=!0,"change"===P.updateOn&&Ln(P,x)})}(P,x),function(P,x){const S=(W,De)=>{x.valueAccessor.writeValue(W),De&&x.viewToModelUpdate(W)};P.registerOnChange(S),x._registerOnDestroy(()=>{P._unregisterOnChange(S)})}(P,x),function(P,x){x.valueAccessor.registerOnTouched(()=>{P._pendingTouched=!0,"blur"===P.updateOn&&P._pendingChange&&Ln(P,x),"submit"!==P.updateOn&&P.markAsTouched()})}(P,x),function(P,x){if(x.valueAccessor.setDisabledState){const S=W=>{x.valueAccessor.setDisabledState(W)};P.registerOnDisabledChange(S),x._registerOnDestroy(()=>{P._unregisterOnDisabledChange(S)})}}(P,x)}function ce(P,x,S=!0){const W=()=>{};x.valueAccessor&&(x.valueAccessor.registerOnChange(W),x.valueAccessor.registerOnTouched(W)),Ct(P,x),P&&(x._invokeOnDestroyCallbacks(),P._registerOnCollectionChange(()=>{}))}function ue(P,x){P.forEach(S=>{S.registerOnValidatorChange&&S.registerOnValidatorChange(x)})}function Pe(P,x){const S=dn(P);null!==x.validator?P.setValidators(jt(S,x.validator)):"function"==typeof S&&P.setValidators([S]);const W=Fn(P);null!==x.asyncValidator?P.setAsyncValidators(jt(W,x.asyncValidator)):"function"==typeof W&&P.setAsyncValidators([W]);const De=()=>P.updateValueAndValidity();ue(x._rawValidators,De),ue(x._rawAsyncValidators,De)}function Ct(P,x){let S=!1;if(null!==P){if(null!==x.validator){const De=dn(P);if(Array.isArray(De)&&De.length>0){const nt=De.filter(Dt=>Dt!==x.validator);nt.length!==De.length&&(S=!0,P.setValidators(nt))}}if(null!==x.asyncValidator){const De=Fn(P);if(Array.isArray(De)&&De.length>0){const nt=De.filter(Dt=>Dt!==x.asyncValidator);nt.length!==De.length&&(S=!0,P.setAsyncValidators(nt))}}}const W=()=>{};return ue(x._rawValidators,W),ue(x._rawAsyncValidators,W),S}function Ln(P,x){P._pendingDirty&&P.markAsDirty(),P.setValue(P._pendingValue,{emitModelToViewChange:!1}),x.viewToModelUpdate(P._pendingValue),P._pendingChange=!1}function ns(P,x){const S=P.indexOf(x);S>-1&&P.splice(S,1)}const Ei="VALID",lr="INVALID",cr="PENDING",Bi="DISABLED";function Ot(P){return(to(P)?P.validators:P)||null}function Dr(P){return Array.isArray(P)?rn(P):P||null}function ji(P,x){return(to(x)?x.asyncValidators:P)||null}function Kn(P){return Array.isArray(P)?ht(P):P||null}function to(P){return null!=P&&!Array.isArray(P)&&"object"==typeof P}class pn{constructor(x,S){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=x,this._rawAsyncValidators=S,this._composedValidatorFn=Dr(this._rawValidators),this._composedAsyncValidatorFn=Kn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(x){this._rawValidators=this._composedValidatorFn=x}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(x){this._rawAsyncValidators=this._composedAsyncValidatorFn=x}get parent(){return this._parent}get valid(){return this.status===Ei}get invalid(){return this.status===lr}get pending(){return this.status==cr}get disabled(){return this.status===Bi}get enabled(){return this.status!==Bi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(x){this._rawValidators=x,this._composedValidatorFn=Dr(x)}setAsyncValidators(x){this._rawAsyncValidators=x,this._composedAsyncValidatorFn=Kn(x)}addValidators(x){this.setValidators(yr(x,this._rawValidators))}addAsyncValidators(x){this.setAsyncValidators(yr(x,this._rawAsyncValidators))}removeValidators(x){this.setValidators(Dn(x,this._rawValidators))}removeAsyncValidators(x){this.setAsyncValidators(Dn(x,this._rawAsyncValidators))}hasValidator(x){return ir(this._rawValidators,x)}hasAsyncValidator(x){return ir(this._rawAsyncValidators,x)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(x={}){this.touched=!0,this._parent&&!x.onlySelf&&this._parent.markAsTouched(x)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(x=>x.markAllAsTouched())}markAsUntouched(x={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(S=>{S.markAsUntouched({onlySelf:!0})}),this._parent&&!x.onlySelf&&this._parent._updateTouched(x)}markAsDirty(x={}){this.pristine=!1,this._parent&&!x.onlySelf&&this._parent.markAsDirty(x)}markAsPristine(x={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(S=>{S.markAsPristine({onlySelf:!0})}),this._parent&&!x.onlySelf&&this._parent._updatePristine(x)}markAsPending(x={}){this.status=cr,!1!==x.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!x.onlySelf&&this._parent.markAsPending(x)}disable(x={}){const S=this._parentMarkedDirty(x.onlySelf);this.status=Bi,this.errors=null,this._forEachChild(W=>{W.disable(Object.assign(Object.assign({},x),{onlySelf:!0}))}),this._updateValue(),!1!==x.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},x),{skipPristineCheck:S})),this._onDisabledChange.forEach(W=>W(!0))}enable(x={}){const S=this._parentMarkedDirty(x.onlySelf);this.status=Ei,this._forEachChild(W=>{W.enable(Object.assign(Object.assign({},x),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:x.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},x),{skipPristineCheck:S})),this._onDisabledChange.forEach(W=>W(!1))}_updateAncestors(x){this._parent&&!x.onlySelf&&(this._parent.updateValueAndValidity(x),x.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(x){this._parent=x}updateValueAndValidity(x={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ei||this.status===cr)&&this._runAsyncValidator(x.emitEvent)),!1!==x.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!x.onlySelf&&this._parent.updateValueAndValidity(x)}_updateTreeValidity(x={emitEvent:!0}){this._forEachChild(S=>S._updateTreeValidity(x)),this.updateValueAndValidity({onlySelf:!0,emitEvent:x.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bi:Ei}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(x){if(this.asyncValidator){this.status=cr,this._hasOwnPendingAsyncValidator=!0;const S=Yt(this.asyncValidator(this));this._asyncValidationSubscription=S.subscribe(W=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(W,{emitEvent:x})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(x,S={}){this.errors=x,this._updateControlsErrors(!1!==S.emitEvent)}get(x){return function(P,x,S){if(null==x||(Array.isArray(x)||(x=x.split(".")),Array.isArray(x)&&0===x.length))return null;let W=P;return x.forEach(De=>{W=W instanceof Nt?W.controls.hasOwnProperty(De)?W.controls[De]:null:W instanceof Wt&&W.at(De)||null}),W}(this,x)}getError(x,S){const W=S?this.get(S):this;return W&&W.errors?W.errors[x]:null}hasError(x,S){return!!this.getError(x,S)}get root(){let x=this;for(;x._parent;)x=x._parent;return x}_updateControlsErrors(x){this.status=this._calculateStatus(),x&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(x)}_initObservables(){this.valueChanges=new w.vpe,this.statusChanges=new w.vpe}_calculateStatus(){return this._allControlsDisabled()?Bi:this.errors?lr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cr)?cr:this._anyControlsHaveStatus(lr)?lr:Ei}_anyControlsHaveStatus(x){return this._anyControls(S=>S.status===x)}_anyControlsDirty(){return this._anyControls(x=>x.dirty)}_anyControlsTouched(){return this._anyControls(x=>x.touched)}_updatePristine(x={}){this.pristine=!this._anyControlsDirty(),this._parent&&!x.onlySelf&&this._parent._updatePristine(x)}_updateTouched(x={}){this.touched=this._anyControlsTouched(),this._parent&&!x.onlySelf&&this._parent._updateTouched(x)}_isBoxedValue(x){return"object"==typeof x&&null!==x&&2===Object.keys(x).length&&"value"in x&&"disabled"in x}_registerOnCollectionChange(x){this._onCollectionChange=x}_setUpdateStrategy(x){to(x)&&null!=x.updateOn&&(this._updateOn=x.updateOn)}_parentMarkedDirty(x){return!x&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class dt extends pn{constructor(x=null,S,W){super(Ot(S),ji(W,S)),this._onChange=[],this._applyFormState(x),this._setUpdateStrategy(S),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(x,S={}){this.value=this._pendingValue=x,this._onChange.length&&!1!==S.emitModelToViewChange&&this._onChange.forEach(W=>W(this.value,!1!==S.emitViewToModelChange)),this.updateValueAndValidity(S)}patchValue(x,S={}){this.setValue(x,S)}reset(x=null,S={}){this._applyFormState(x),this.markAsPristine(S),this.markAsUntouched(S),this.setValue(this.value,S),this._pendingChange=!1}_updateValue(){}_anyControls(x){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(x){this._onChange.push(x)}_unregisterOnChange(x){ns(this._onChange,x)}registerOnDisabledChange(x){this._onDisabledChange.push(x)}_unregisterOnDisabledChange(x){ns(this._onDisabledChange,x)}_forEachChild(x){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(x){this._isBoxedValue(x)?(this.value=this._pendingValue=x.value,x.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=x}}class Nt extends pn{constructor(x,S,W){super(Ot(S),ji(W,S)),this.controls=x,this._initObservables(),this._setUpdateStrategy(S),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(x,S){return this.controls[x]?this.controls[x]:(this.controls[x]=S,S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange),S)}addControl(x,S,W={}){this.registerControl(x,S),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}removeControl(x,S={}){this.controls[x]&&this.controls[x]._registerOnCollectionChange(()=>{}),delete this.controls[x],this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}setControl(x,S,W={}){this.controls[x]&&this.controls[x]._registerOnCollectionChange(()=>{}),delete this.controls[x],S&&this.registerControl(x,S),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}contains(x){return this.controls.hasOwnProperty(x)&&this.controls[x].enabled}setValue(x,S={}){this._checkAllValuesPresent(x),Object.keys(x).forEach(W=>{this._throwIfControlMissing(W),this.controls[W].setValue(x[W],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S)}patchValue(x,S={}){null!=x&&(Object.keys(x).forEach(W=>{this.controls[W]&&this.controls[W].patchValue(x[W],{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S))}reset(x={},S={}){this._forEachChild((W,De)=>{W.reset(x[De],{onlySelf:!0,emitEvent:S.emitEvent})}),this._updatePristine(S),this._updateTouched(S),this.updateValueAndValidity(S)}getRawValue(){return this._reduceChildren({},(x,S,W)=>(x[W]=S instanceof dt?S.value:S.getRawValue(),x))}_syncPendingControls(){let x=this._reduceChildren(!1,(S,W)=>!!W._syncPendingControls()||S);return x&&this.updateValueAndValidity({onlySelf:!0}),x}_throwIfControlMissing(x){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[x])throw new Error(`Cannot find form control with name: ${x}.`)}_forEachChild(x){Object.keys(this.controls).forEach(S=>{const W=this.controls[S];W&&x(W,S)})}_setUpControls(){this._forEachChild(x=>{x.setParent(this),x._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(x){for(const S of Object.keys(this.controls)){const W=this.controls[S];if(this.contains(S)&&x(W))return!0}return!1}_reduceValue(){return this._reduceChildren({},(x,S,W)=>((S.enabled||this.disabled)&&(x[W]=S.value),x))}_reduceChildren(x,S){let W=x;return this._forEachChild((De,nt)=>{W=S(W,De,nt)}),W}_allControlsDisabled(){for(const x of Object.keys(this.controls))if(this.controls[x].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(x){this._forEachChild((S,W)=>{if(void 0===x[W])throw new Error(`Must supply a value for form control with name: '${W}'.`)})}}class Wt extends pn{constructor(x,S,W){super(Ot(S),ji(W,S)),this.controls=x,this._initObservables(),this._setUpdateStrategy(S),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(x){return this.controls[x]}push(x,S={}){this.controls.push(x),this._registerControl(x),this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}insert(x,S,W={}){this.controls.splice(x,0,S),this._registerControl(S),this.updateValueAndValidity({emitEvent:W.emitEvent})}removeAt(x,S={}){this.controls[x]&&this.controls[x]._registerOnCollectionChange(()=>{}),this.controls.splice(x,1),this.updateValueAndValidity({emitEvent:S.emitEvent})}setControl(x,S,W={}){this.controls[x]&&this.controls[x]._registerOnCollectionChange(()=>{}),this.controls.splice(x,1),S&&(this.controls.splice(x,0,S),this._registerControl(S)),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(x,S={}){this._checkAllValuesPresent(x),x.forEach((W,De)=>{this._throwIfControlMissing(De),this.at(De).setValue(W,{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S)}patchValue(x,S={}){null!=x&&(x.forEach((W,De)=>{this.at(De)&&this.at(De).patchValue(W,{onlySelf:!0,emitEvent:S.emitEvent})}),this.updateValueAndValidity(S))}reset(x=[],S={}){this._forEachChild((W,De)=>{W.reset(x[De],{onlySelf:!0,emitEvent:S.emitEvent})}),this._updatePristine(S),this._updateTouched(S),this.updateValueAndValidity(S)}getRawValue(){return this.controls.map(x=>x instanceof dt?x.value:x.getRawValue())}clear(x={}){this.controls.length<1||(this._forEachChild(S=>S._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:x.emitEvent}))}_syncPendingControls(){let x=this.controls.reduce((S,W)=>!!W._syncPendingControls()||S,!1);return x&&this.updateValueAndValidity({onlySelf:!0}),x}_throwIfControlMissing(x){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(x))throw new Error(`Cannot find form control at index ${x}`)}_forEachChild(x){this.controls.forEach((S,W)=>{x(S,W)})}_updateValue(){this.value=this.controls.filter(x=>x.enabled||this.disabled).map(x=>x.value)}_anyControls(x){return this.controls.some(S=>S.enabled&&x(S))}_setUpControls(){this._forEachChild(x=>this._registerControl(x))}_checkAllValuesPresent(x){this._forEachChild((S,W)=>{if(void 0===x[W])throw new Error(`Must supply a value for form control at index: ${W}.`)})}_allControlsDisabled(){for(const x of this.controls)if(x.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(x){x.setParent(this),x._registerOnCollectionChange(this._onCollectionChange)}}let Tr=(()=>{class P{}return P.\u0275fac=function(S){return new(S||P)},P.\u0275dir=w.lG2({type:P,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),P})();const Rn={provide:me,useExisting:(0,w.Gpc)(()=>ss),multi:!0};let ss=(()=>{class P extends te{writeValue(S){this.setProperty("value",null==S?"":S)}registerOnChange(S){this.onChange=W=>{S(""==W?null:parseFloat(W))}}}return P.\u0275fac=function(){let x;return function(W){return(x||(x=w.n5z(P)))(W||P)}}(),P.\u0275dir=w.lG2({type:P,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(S,W){1&S&&w.NdJ("input",function(nt){return W.onChange(nt.target.value)})("blur",function(){return W.onTouched()})},features:[w._Bn([Rn]),w.qOj]}),P})(),Wr=(()=>{class P{}return P.\u0275fac=function(S){return new(S||P)},P.\u0275mod=w.oAB({type:P}),P.\u0275inj=w.cJS({}),P})();const jn=new w.OlP("NgModelWithFormControlWarning"),kr={provide:Sn,useExisting:(0,w.Gpc)(()=>ki)};let ki=(()=>{class P extends Sn{constructor(S,W){super(),this.validators=S,this.asyncValidators=W,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new w.vpe,this._setValidators(S),this._setAsyncValidators(W)}ngOnChanges(S){this._checkFormPresent(),S.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ct(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(S){const W=this.form.get(S.path);return de(W,S),W.updateValueAndValidity({emitEvent:!1}),this.directives.push(S),W}getControl(S){return this.form.get(S.path)}removeControl(S){ce(S.control||null,S,!1),ns(this.directives,S)}addFormGroup(S){this._setUpFormContainer(S)}removeFormGroup(S){this._cleanUpFormContainer(S)}getFormGroup(S){return this.form.get(S.path)}addFormArray(S){this._setUpFormContainer(S)}removeFormArray(S){this._cleanUpFormContainer(S)}getFormArray(S){return this.form.get(S.path)}updateModel(S,W){this.form.get(S.path).setValue(W)}onSubmit(S){return this.submitted=!0,function(P,x){P._syncPendingControls(),x.forEach(S=>{const W=S.control;"submit"===W.updateOn&&W._pendingChange&&(S.viewToModelUpdate(W._pendingValue),W._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(S),!1}onReset(){this.resetForm()}resetForm(S){this.form.reset(S),this.submitted=!1}_updateDomValue(){this.directives.forEach(S=>{const W=S.control,De=this.form.get(S.path);W!==De&&(ce(W||null,S),De instanceof dt&&(de(De,S),S.control=De))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(S){const W=this.form.get(S.path);(function(P,x){Pe(P,x)})(W,S),W.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(S){if(this.form){const W=this.form.get(S.path);W&&function(P,x){return Ct(P,x)}(W,S)&&W.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Pe(this.form,this),this._oldForm&&Ct(this._oldForm,this)}_checkFormPresent(){}}return P.\u0275fac=function(S){return new(S||P)(w.Y36(st,10),w.Y36(se,10))},P.\u0275dir=w.lG2({type:P,selectors:[["","formGroup",""]],hostBindings:function(S,W){1&S&&w.NdJ("submit",function(nt){return W.onSubmit(nt)})("reset",function(){return W.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([kr]),w.qOj,w.TTD]}),P})();const no={provide:hn,useExisting:(0,w.Gpc)(()=>Gi)};let Gi=(()=>{class P extends hn{constructor(S,W,De,nt,Dt){super(),this._ngModelWarningConfig=Dt,this._added=!1,this.update=new w.vpe,this._ngModelWarningSent=!1,this._parent=S,this._setValidators(W),this._setAsyncValidators(De),this.valueAccessor=function(P,x){if(!x)return null;let S,W,De;return Array.isArray(x),x.forEach(nt=>{nt.constructor===it?S=nt:function(P){return Object.getPrototypeOf(P.constructor)===te}(nt)?W=nt:De=nt}),De||W||S||null}(0,nt)}set isDisabled(S){}ngOnChanges(S){this._added||this._setUpControl(),function(P,x){if(!P.hasOwnProperty("model"))return!1;const S=P.model;return!!S.isFirstChange()||!Object.is(x,S.currentValue)}(S,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(S){this.viewModel=S,this.update.emit(S)}get path(){return function(P,x){return[...x.path,P]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return P.\u0275fac=function(S){return new(S||P)(w.Y36(Sn,13),w.Y36(st,10),w.Y36(se,10),w.Y36(me,10),w.Y36(jn,8))},P.\u0275dir=w.lG2({type:P,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[w._Bn([no]),w.qOj,w.TTD]}),P._ngModelWarningSentOnce=!1,P})();function qr(P){return"number"==typeof P?P:parseInt(P,10)}const ya={provide:st,useExisting:(0,w.Gpc)(()=>zn),multi:!0};let zn=(()=>{class P{constructor(){this._required=!1}get required(){return this._required}set required(S){this._required=null!=S&&!1!==S&&"false"!=`${S}`,this._onChange&&this._onChange()}validate(S){return this.required?Ne(S):null}registerOnValidatorChange(S){this._onChange=S}}return P.\u0275fac=function(S){return new(S||P)},P.\u0275dir=w.lG2({type:P,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(S,W){2&S&&w.uIk("required",W.required?"":null)},inputs:{required:"required"},features:[w._Bn([ya])]}),P})();const oo={provide:st,useExisting:(0,w.Gpc)(()=>Ii),multi:!0};let Ii=(()=>{class P{constructor(){this._validator=Xe}ngOnChanges(S){"minlength"in S&&(this._createValidator(),this._onChange&&this._onChange())}validate(S){return this.enabled()?this._validator(S):null}registerOnValidatorChange(S){this._onChange=S}_createValidator(){this._validator=this.enabled()?Re(qr(this.minlength)):Xe}enabled(){return null!=this.minlength}}return P.\u0275fac=function(S){return new(S||P)},P.\u0275dir=w.lG2({type:P,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(S,W){2&S&&w.uIk("minlength",W.enabled()?W.minlength:null)},inputs:{minlength:"minlength"},features:[w._Bn([oo]),w.TTD]}),P})();const oi={provide:st,useExisting:(0,w.Gpc)(()=>zi),multi:!0};let zi=(()=>{class P{constructor(){this._validator=Xe}ngOnChanges(S){"maxlength"in S&&(this._createValidator(),this._onChange&&this._onChange())}validate(S){return this.enabled()?this._validator(S):null}registerOnValidatorChange(S){this._onChange=S}_createValidator(){this._validator=this.enabled()?ye(qr(this.maxlength)):Xe}enabled(){return null!=this.maxlength}}return P.\u0275fac=function(S){return new(S||P)},P.\u0275dir=w.lG2({type:P,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(S,W){2&S&&w.uIk("maxlength",W.enabled()?W.maxlength:null)},inputs:{maxlength:"maxlength"},features:[w._Bn([oi]),w.TTD]}),P})();const Zr={provide:st,useExisting:(0,w.Gpc)(()=>Di),multi:!0};let Di=(()=>{class P{constructor(){this._validator=Xe}ngOnChanges(S){"pattern"in S&&(this._createValidator(),this._onChange&&this._onChange())}validate(S){return this._validator(S)}registerOnValidatorChange(S){this._onChange=S}_createValidator(){this._validator=Ce(this.pattern)}}return P.\u0275fac=function(S){return new(S||P)},P.\u0275dir=w.lG2({type:P,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(S,W){2&S&&w.uIk("pattern",W.pattern?W.pattern:null)},inputs:{pattern:"pattern"},features:[w._Bn([Zr]),w.TTD]}),P})(),z=(()=>{class P{}return P.\u0275fac=function(S){return new(S||P)},P.\u0275mod=w.oAB({type:P}),P.\u0275inj=w.cJS({imports:[[Wr]]}),P})(),K=(()=>{class P{static withConfig(S){return{ngModule:P,providers:[{provide:jn,useValue:S.warnOnNgModelWithFormControl}]}}}return P.\u0275fac=function(S){return new(S||P)},P.\u0275mod=w.oAB({type:P}),P.\u0275inj=w.cJS({imports:[z]}),P})(),ke=(()=>{class P{group(S,W=null){const De=this._reduceControls(S);let xn,nt=null,Dt=null;return null!=W&&(function(P){return void 0!==P.asyncValidators||void 0!==P.validators||void 0!==P.updateOn}(W)?(nt=null!=W.validators?W.validators:null,Dt=null!=W.asyncValidators?W.asyncValidators:null,xn=null!=W.updateOn?W.updateOn:void 0):(nt=null!=W.validator?W.validator:null,Dt=null!=W.asyncValidator?W.asyncValidator:null)),new Nt(De,{asyncValidators:Dt,updateOn:xn,validators:nt})}control(S,W,De){return new dt(S,W,De)}array(S,W,De){const nt=S.map(Dt=>this._createControl(Dt));return new Wt(nt,W,De)}_reduceControls(S){const W={};return Object.keys(S).forEach(De=>{W[De]=this._createControl(S[De])}),W}_createControl(S){return S instanceof dt||S instanceof Nt||S instanceof Wt?S:Array.isArray(S)?this.control(S[0],S.length>1?S[1]:null,S.length>2?S[2]:null):this.control(S)}}return P.\u0275fac=function(S){return new(S||P)},P.\u0275prov=(0,w.Yz7)({factory:function(){return new P},token:P,providedIn:K}),P})()},6575:(bt,Ge,G)=>{"use strict";G.d(Ge,{F0:()=>Xr,yS:()=>Gs,Bz:()=>jo,lC:()=>fo});var w=G(8583),j=G(3018),ne=G(9765),Oe=G(7971);class Te extends ne.xQ{constructor(C){super(),this._value=C}get value(){return this.getValue()}_subscribe(C){const E=super._subscribe(C);return E&&!E.closed&&C.next(this._value),E}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Oe.N;return this._value}next(C){super.next(this._value=C)}}var he=G(4869),Fe=G(9796),ge=G(7393);class oe extends ge.L{notifyNext(C,E,O,V,q){this.destination.next(E)}notifyError(C,E){this.destination.error(C)}notifyComplete(C){this.destination.complete()}}class ee extends ge.L{constructor(C,E,O){super(),this.parent=C,this.outerValue=E,this.outerIndex=O,this.index=0}_next(C){this.parent.notifyNext(this.outerValue,C,this.outerIndex,this.index++,this)}_error(C){this.parent.notifyError(C,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var te=G(7444),me=G(7574);function ve(A,C,E,O,V=new ee(A,E,O)){if(!V.closed)return C instanceof me.y?C.subscribe(V):(0,te.s)(C)(V)}var be=G(6693);const Ue={};class Ae{constructor(C){this.resultSelector=C}call(C,E){return E.subscribe(new it(C,this.resultSelector))}}class it extends oe{constructor(C,E){super(C),this.resultSelector=E,this.active=0,this.values=[],this.observables=[]}_next(C){this.values.push(Ue),this.observables.push(C)}_complete(){const C=this.observables,E=C.length;if(0===E)this.destination.complete();else{this.active=E,this.toRespond=E;for(let O=0;O<E;O++)this.add(ve(this,C[O],void 0,O))}}notifyComplete(C){0==(this.active-=1)&&this.destination.complete()}notifyNext(C,E,O){const V=this.values,ie=this.toRespond?V[O]===Ue?--this.toRespond:this.toRespond:0;V[O]=E,0===ie&&(this.resultSelector?this._tryResultSelector(V):this.destination.next(V.slice()))}_tryResultSelector(C){let E;try{E=this.resultSelector.apply(this,C)}catch(O){return void this.destination.error(O)}this.destination.next(E)}}var Qe=G(4402),Je=G(9193);function st(A){return new me.y(C=>{let E;try{E=A()}catch(V){return void C.error(V)}return(E?(0,Qe.D)(E):(0,Je.c)()).subscribe(C)})}var se=G(5917),ut=G(3410),Gt=G(8071),Zt=G(2441),Ve=G(5345);function Ne(A){return function(E){const O=new Le(A),V=E.lift(O);return O.caught=V}}class Le{constructor(C){this.selector=C}call(C,E){return E.subscribe(new fe(C,this.selector,this.caught))}}class fe extends Ve.Ds{constructor(C,E,O){super(C),this.selector=E,this.caught=O}error(C){if(!this.isStopped){let E;try{E=this.selector(C,this.caught)}catch(q){return void super.error(q)}this._unsubscribeAndRecycle();const O=new Ve.IY(this);this.add(O);const V=(0,Ve.ft)(E,O);V!==O&&this.add(V)}}}var Re=G(9773);function ye(A,C){return(0,Re.zg)(A,C,1)}var Ce=G(5435),Xe=G(7108);function Et(A){return function(E){return 0===A?(0,Je.c)():E.lift(new Yt(A))}}class Yt{constructor(C){if(this.total=C,this.total<0)throw new Xe.W}call(C,E){return E.subscribe(new ot(C,this.total))}}class ot extends ge.L{constructor(C,E){super(C),this.total=E,this.ring=new Array,this.count=0}_next(C){const E=this.ring,O=this.total,V=this.count++;E.length<O?E.push(C):E[V%O]=C}_complete(){const C=this.destination;let E=this.count;if(E>0){const O=this.count>=this.total?this.total:this.count,V=this.ring;for(let q=0;q<O;q++){const ie=E++%O;C.next(V[ie])}}C.complete()}}var ct=G(4635),Pt=G(5242),Jt=G(4487),rn=G(5319);class ht{constructor(C){this.callback=C}call(C,E){return E.subscribe(new jt(C,this.callback))}}class jt extends ge.L{constructor(C,E){super(C),this.add(new rn.w(E))}}var dn=G(8002),Fn=G(3190),un=G(5257),ir=G(9761),yr=G(2145),Dn=G(8049),Tn=G(3342),Sn=G(1307),hn=G(3282);class Hn{constructor(C,E){this.id=C,this.url=E}}class kt extends Hn{constructor(C,E,O="imperative",V=null){super(C,E),this.navigationTrigger=O,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class An extends Hn{constructor(C,E,O){super(C,E),this.urlAfterRedirects=O}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ir extends Hn{constructor(C,E,O){super(C,E),this.reason=O}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bt extends Hn{constructor(C,E,O){super(C,E),this.error=O}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tt extends Hn{constructor(C,E,O,V){super(C,E),this.urlAfterRedirects=O,this.state=V}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bn extends Hn{constructor(C,E,O,V){super(C,E),this.urlAfterRedirects=O,this.state=V}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bn extends Hn{constructor(C,E,O,V,q){super(C,E),this.urlAfterRedirects=O,this.state=V,this.shouldActivate=q}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Mn extends Hn{constructor(C,E,O,V){super(C,E),this.urlAfterRedirects=O,this.state=V}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wn extends Hn{constructor(C,E,O,V){super(C,E),this.urlAfterRedirects=O,this.state=V}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xt{constructor(C){this.route=C}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class St{constructor(C){this.route=C}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gn{constructor(C){this.snapshot=C}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _s{constructor(C){this.snapshot=C}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class es{constructor(C){this.snapshot=C}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qn{constructor(C){this.snapshot=C}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Or{constructor(C,E,O){this.routerEvent=C,this.position=E,this.anchor=O}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vt="primary";class de{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const E=this.params[C];return Array.isArray(E)?E[0]:E}return null}getAll(C){if(this.has(C)){const E=this.params[C];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function ce(A){return new de(A)}const ue="ngNavigationCancelingError";function ze(A){const C=Error("NavigationCancelingError: "+A);return C[ue]=!0,C}function Ct(A,C,E){const O=E.path.split("/");if(O.length>A.length||"full"===E.pathMatch&&(C.hasChildren()||O.length<A.length))return null;const V={};for(let q=0;q<O.length;q++){const ie=O[q],pe=A[q];if(ie.startsWith(":"))V[ie.substring(1)]=pe;else if(ie!==pe.path)return null}return{consumed:A.slice(0,O.length),posParams:V}}function nn(A,C){const E=A?Object.keys(A):void 0,O=C?Object.keys(C):void 0;if(!E||!O||E.length!=O.length)return!1;let V;for(let q=0;q<E.length;q++)if(V=E[q],!Ln(A[V],C[V]))return!1;return!0}function Ln(A,C){if(Array.isArray(A)&&Array.isArray(C)){if(A.length!==C.length)return!1;const E=[...A].sort(),O=[...C].sort();return E.every((V,q)=>O[q]===V)}return A===C}function Xt(A){return Array.prototype.concat.apply([],A)}function ur(A){return A.length>0?A[A.length-1]:null}function Qt(A,C){for(const E in A)A.hasOwnProperty(E)&&C(A[E],E)}function Vn(A){return(0,j.CqO)(A)?A:(0,j.QGY)(A)?(0,Qe.D)(Promise.resolve(A)):(0,se.of)(A)}const vs={exact:function ws(A,C,E){if(!Kn(A.segments,C.segments)||!Bi(A.segments,C.segments,E)||A.numberOfChildren!==C.numberOfChildren)return!1;for(const O in C.children)if(!A.children[O]||!ws(A.children[O],C.children[O],E))return!1;return!0},subset:lr},Es={exact:function(A,C){return nn(A,C)},subset:function(A,C){return Object.keys(C).length<=Object.keys(A).length&&Object.keys(C).every(E=>Ln(A[E],C[E]))},ignored:()=>!0};function ts(A,C,E){return vs[E.paths](A.root,C.root,E.matrixParams)&&Es[E.queryParams](A.queryParams,C.queryParams)&&!("exact"===E.fragment&&A.fragment!==C.fragment)}function lr(A,C,E){return cr(A,C,C.segments,E)}function cr(A,C,E,O){if(A.segments.length>E.length){const V=A.segments.slice(0,E.length);return!(!Kn(V,E)||C.hasChildren()||!Bi(V,E,O))}if(A.segments.length===E.length){if(!Kn(A.segments,E)||!Bi(A.segments,E,O))return!1;for(const V in C.children)if(!A.children[V]||!lr(A.children[V],C.children[V],O))return!1;return!0}{const V=E.slice(0,A.segments.length),q=E.slice(A.segments.length);return!!(Kn(A.segments,V)&&Bi(A.segments,V,O)&&A.children[Vt])&&cr(A.children[Vt],C,q,O)}}function Bi(A,C,E){return C.every((O,V)=>Es[E](A[V].parameters,O.parameters))}class wi{constructor(C,E,O){this.root=C,this.queryParams=E,this.fragment=O}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ce(this.queryParams)),this._queryParamMap}toString(){return Nt.serialize(this)}}class Ot{constructor(C,E){this.segments=C,this.children=E,this.parent=null,Qt(E,(O,V)=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wt(this)}}class Dr{constructor(C,E){this.path=C,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=ce(this.parameters)),this._parameterMap}toString(){return zt(this)}}function Kn(A,C){return A.length===C.length&&A.every((E,O)=>E.path===C[O].path)}class pn{}class dt{parse(C){const E=new Rn(C);return new wi(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(C){var A;return`${`/${sr(C.root,!0)}`}${function(A){const C=Object.keys(A).map(E=>{const O=A[E];return Array.isArray(O)?O.map(V=>`${On(E)}=${On(V)}`).join("&"):`${On(E)}=${On(O)}`}).filter(E=>!!E);return C.length?`?${C.join("&")}`:""}(C.queryParams)}${"string"==typeof C.fragment?`#${A=C.fragment,encodeURI(A)}`:""}`}}const Nt=new dt;function Wt(A){return A.segments.map(C=>zt(C)).join("/")}function sr(A,C){if(!A.hasChildren())return Wt(A);if(C){const E=A.children[Vt]?sr(A.children[Vt],!1):"",O=[];return Qt(A.children,(V,q)=>{q!==Vt&&O.push(`${q}:${sr(V,!1)}`)}),O.length>0?`${E}(${O.join("//")})`:E}{const E=function(A,C){let E=[];return Qt(A.children,(O,V)=>{V===Vt&&(E=E.concat(C(O,V)))}),Qt(A.children,(O,V)=>{V!==Vt&&(E=E.concat(C(O,V)))}),E}(A,(O,V)=>V===Vt?[sr(A.children[Vt],!1)]:[`${V}:${sr(O,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[Vt]?`${Wt(A)}/${E[0]}`:`${Wt(A)}/(${E.join("//")})`}}function Mi(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function On(A){return Mi(A).replace(/%3B/gi,";")}function Pn(A){return Mi(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $i(A){return decodeURIComponent(A)}function Vs(A){return $i(A.replace(/\+/g,"%20"))}function zt(A){return`${Pn(A.path)}${function(A){return Object.keys(A).map(C=>`;${Pn(C)}=${Pn(A[C])}`).join("")}(A.parameters)}`}const Us=/^[^\/()?;=#]+/;function Gr(A){const C=A.match(Us);return C?C[0]:""}const or=/^[^=?&#]+/,Oi=/^[^?&#]+/;class Rn{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ot([],{}):new Ot([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(C.length>0||Object.keys(E).length>0)&&(O[Vt]=new Ot(C,E)),O}parseSegment(){const C=Gr(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(C),new Dr($i(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const E=Gr(this.remaining);if(!E)return;this.capture(E);let O="";if(this.consumeOptional("=")){const V=Gr(this.remaining);V&&(O=V,this.capture(O))}C[$i(E)]=$i(O)}parseQueryParam(C){const E=function(A){const C=A.match(or);return C?C[0]:""}(this.remaining);if(!E)return;this.capture(E);let O="";if(this.consumeOptional("=")){const ie=function(A){const C=A.match(Oi);return C?C[0]:""}(this.remaining);ie&&(O=ie,this.capture(O))}const V=Vs(E),q=Vs(O);if(C.hasOwnProperty(V)){let ie=C[V];Array.isArray(ie)||(ie=[ie],C[V]=ie),ie.push(q)}else C[V]=q}parseParens(C){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=Gr(this.remaining),V=this.remaining[O.length];if("/"!==V&&")"!==V&&";"!==V)throw new Error(`Cannot parse url '${this.url}'`);let q;O.indexOf(":")>-1?(q=O.substr(0,O.indexOf(":")),this.capture(q),this.capture(":")):C&&(q=Vt);const ie=this.parseChildren();E[q]=1===Object.keys(ie).length?ie[Vt]:new Ot([],ie),this.consumeOptional("//")}return E}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new Error(`Expected "${C}".`)}}class ss{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const E=this.pathFromRoot(C);return E.length>1?E[E.length-2]:null}children(C){const E=Hi(C,this._root);return E?E.children.map(O=>O.value):[]}firstChild(C){const E=Hi(C,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(C){const E=os(C,this._root);return E.length<2?[]:E[E.length-2].children.map(V=>V.value).filter(V=>V!==C)}pathFromRoot(C){return os(C,this._root).map(E=>E.value)}}function Hi(A,C){if(A===C.value)return C;for(const E of C.children){const O=Hi(A,E);if(O)return O}return null}function os(A,C){if(A===C.value)return[C];for(const E of C.children){const O=os(A,E);if(O.length)return O.unshift(C),O}return[]}class Wr{constructor(C,E){this.value=C,this.children=E}toString(){return`TreeNode(${this.value})`}}function _r(A){const C={};return A&&A.children.forEach(E=>C[E.value.outlet]=E),C}class Pi extends ss{constructor(C,E){super(C),this.snapshot=E,hr(this,C)}toString(){return this.snapshot.toString()}}function dr(A,C){const E=function(A,C){const ie=new kr([],{},{},"",{},Vt,C,null,A.root,-1,{});return new ki("",new Wr(ie,[]))}(A,C),O=new Te([new Dr("",{})]),V=new Te({}),q=new Te({}),ie=new Te({}),pe=new Te(""),Me=new jn(O,V,ie,pe,q,Vt,C,E.root);return Me.snapshot=E.root,new Pi(new Wr(Me,[]),E)}class jn{constructor(C,E,O,V,q,ie,pe,Me){this.url=C,this.params=E,this.queryParams=O,this.fragment=V,this.data=q,this.outlet=ie,this.component=pe,this._futureSnapshot=Me}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dn.U)(C=>ce(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dn.U)(C=>ce(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pr(A,C="emptyOnly"){const E=A.pathFromRoot;let O=0;if("always"!==C)for(O=E.length-1;O>=1;){const V=E[O],q=E[O-1];if(V.routeConfig&&""===V.routeConfig.path)O--;else{if(q.component)break;O--}}return function(A){return A.reduce((C,E)=>({params:Object.assign(Object.assign({},C.params),E.params),data:Object.assign(Object.assign({},C.data),E.data),resolve:Object.assign(Object.assign({},C.resolve),E._resolvedData)}),{params:{},data:{},resolve:{}})}(E.slice(O))}class kr{constructor(C,E,O,V,q,ie,pe,Me,pt,Cn,It){this.url=C,this.params=E,this.queryParams=O,this.fragment=V,this.data=q,this.outlet=ie,this.component=pe,this.routeConfig=Me,this._urlSegment=pt,this._lastPathIndex=Cn,this._resolve=It}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ce(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ce(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ki extends ss{constructor(C,E){super(E),this.url=C,hr(this,E)}toString(){return Fr(this._root)}}function hr(A,C){C.value._routerState=A,C.children.forEach(E=>hr(A,E))}function Fr(A){const C=A.children.length>0?` { ${A.children.map(Fr).join(", ")} } `:"";return`${A.value}${C}`}function In(A){if(A.snapshot){const C=A.snapshot,E=A._futureSnapshot;A.snapshot=E,nn(C.queryParams,E.queryParams)||A.queryParams.next(E.queryParams),C.fragment!==E.fragment&&A.fragment.next(E.fragment),nn(C.params,E.params)||A.params.next(E.params),function(A,C){if(A.length!==C.length)return!1;for(let E=0;E<A.length;++E)if(!nn(A[E],C[E]))return!1;return!0}(C.url,E.url)||A.url.next(E.url),nn(C.data,E.data)||A.data.next(E.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function Cs(A,C){return nn(A.params,C.params)&&function(A,C){return Kn(A,C)&&A.every((E,O)=>nn(E.parameters,C[O].parameters))}(A.url,C.url)&&!(!A.parent!=!C.parent)&&(!A.parent||Cs(A.parent,C.parent))}function no(A,C,E){if(E&&A.shouldReuseRoute(C.value,E.value.snapshot)){const O=E.value;O._futureSnapshot=C.value;const V=function(A,C,E){return C.children.map(O=>{for(const V of E.children)if(A.shouldReuseRoute(O.value,V.value.snapshot))return no(A,O,V);return no(A,O)})}(A,C,E);return new Wr(O,V)}{if(A.shouldAttach(C.value)){const q=A.retrieve(C.value);if(null!==q){const ie=q.route;return Gi(C,ie),ie}}const O=function(A){return new jn(new Te(A.url),new Te(A.params),new Te(A.queryParams),new Te(A.fragment),new Te(A.data),A.outlet,A.component,A)}(C.value),V=C.children.map(q=>no(A,q));return new Wr(O,V)}}function Gi(A,C){if(A.value.routeConfig!==C.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(A.children.length!==C.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");C.value._futureSnapshot=A.value;for(let E=0;E<A.children.length;++E)Gi(A.children[E],C.children[E])}function fi(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function Bs(A){return"object"==typeof A&&null!=A&&A.outlets}function js(A,C,E,O,V){let q={};return O&&Qt(O,(ie,pe)=>{q[pe]=Array.isArray(ie)?ie.map(Me=>`${Me}`):`${ie}`}),new wi(E.root===A?C:as(E.root,A,C),q,V)}function as(A,C,E){const O={};return Qt(A.children,(V,q)=>{O[q]=V===C?E:as(V,C,E)}),new Ot(A.segments,O)}class No{constructor(C,E,O){if(this.isAbsolute=C,this.numberOfDoubleDots=E,this.commands=O,C&&O.length>0&&fi(O[0]))throw new Error("Root segment cannot have matrix parameters");const V=O.find(Bs);if(V&&V!==ur(O))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zr{constructor(C,E,O){this.segmentGroup=C,this.processChildren=E,this.index=O}}function bs(A,C,E){if(A||(A=new Ot([],{})),0===A.segments.length&&A.hasChildren())return Kr(A,C,E);const O=function(A,C,E){let O=0,V=C;const q={match:!1,pathIndex:0,commandIndex:0};for(;V<A.segments.length;){if(O>=E.length)return q;const ie=A.segments[V],pe=E[O];if(Bs(pe))break;const Me=`${pe}`,pt=O<E.length-1?E[O+1]:null;if(V>0&&void 0===Me)break;if(Me&&pt&&"object"==typeof pt&&void 0===pt.outlets){if(!zn(Me,pt,ie))return q;O+=2}else{if(!zn(Me,{},ie))return q;O++}V++}return{match:!0,pathIndex:V,commandIndex:O}}(A,C,E),V=E.slice(O.commandIndex);if(O.match&&O.pathIndex<A.segments.length){const q=new Ot(A.segments.slice(0,O.pathIndex),{});return q.children[Vt]=new Ot(A.segments.slice(O.pathIndex),A.children),Kr(q,0,V)}return O.match&&0===V.length?new Ot(A.segments,{}):O.match&&!A.hasChildren()?Fi(A,C,E):O.match?Kr(A,0,V):Fi(A,C,E)}function Kr(A,C,E){if(0===E.length)return new Ot(A.segments,{});{const O=function(A){return Bs(A[0])?A[0].outlets:{[Vt]:A}}(E),V={};return Qt(O,(q,ie)=>{"string"==typeof q&&(q=[q]),null!==q&&(V[ie]=bs(A.children[ie],C,q))}),Qt(A.children,(q,ie)=>{void 0===O[ie]&&(V[ie]=q)}),new Ot(A.segments,V)}}function Fi(A,C,E){const O=A.segments.slice(0,C);let V=0;for(;V<E.length;){const q=E[V];if(Bs(q)){const Me=ya(q.outlets);return new Ot(O,Me)}if(0===V&&fi(E[0])){O.push(new Dr(A.segments[C].path,bi(E[0]))),V++;continue}const ie=Bs(q)?q.outlets[Vt]:`${q}`,pe=V<E.length-1?E[V+1]:null;ie&&pe&&fi(pe)?(O.push(new Dr(ie,bi(pe))),V+=2):(O.push(new Dr(ie,{})),V++)}return new Ot(O,{})}function ya(A){const C={};return Qt(A,(E,O)=>{"string"==typeof E&&(E=[E]),null!==E&&(C[O]=Fi(new Ot([],{}),0,E))}),C}function bi(A){const C={};return Qt(A,(E,O)=>C[O]=`${E}`),C}function zn(A,C,E){return A==E.path&&nn(C,E.parameters)}class so{constructor(C,E,O,V){this.routeReuseStrategy=C,this.futureState=E,this.currState=O,this.forwardEvent=V}activate(C){const E=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,O,C),In(this.futureState.root),this.activateChildRoutes(E,O,C)}deactivateChildRoutes(C,E,O){const V=_r(E);C.children.forEach(q=>{const ie=q.value.outlet;this.deactivateRoutes(q,V[ie],O),delete V[ie]}),Qt(V,(q,ie)=>{this.deactivateRouteAndItsChildren(q,O)})}deactivateRoutes(C,E,O){const V=C.value,q=E?E.value:null;if(V===q)if(V.component){const ie=O.getContext(V.outlet);ie&&this.deactivateChildRoutes(C,E,ie.children)}else this.deactivateChildRoutes(C,E,O);else q&&this.deactivateRouteAndItsChildren(E,O)}deactivateRouteAndItsChildren(C,E){this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,E):this.deactivateRouteAndOutlet(C,E)}detachAndStoreRouteSubtree(C,E){const O=E.getContext(C.value.outlet);if(O&&O.outlet){const V=O.outlet.detach(),q=O.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:V,route:C,contexts:q})}}deactivateRouteAndOutlet(C,E){const O=E.getContext(C.value.outlet),V=O&&C.value.component?O.children:E,q=_r(C);for(const ie of Object.keys(q))this.deactivateRouteAndItsChildren(q[ie],V);O&&O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated(),O.attachRef=null,O.resolver=null,O.route=null)}activateChildRoutes(C,E,O){const V=_r(E);C.children.forEach(q=>{this.activateRoutes(q,V[q.value.outlet],O),this.forwardEvent(new Qn(q.value.snapshot))}),C.children.length&&this.forwardEvent(new _s(C.value.snapshot))}activateRoutes(C,E,O){const V=C.value,q=E?E.value:null;if(In(V),V===q)if(V.component){const ie=O.getOrCreateContext(V.outlet);this.activateChildRoutes(C,E,ie.children)}else this.activateChildRoutes(C,E,O);else if(V.component){const ie=O.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const pe=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),ie.children.onOutletReAttached(pe.contexts),ie.attachRef=pe.componentRef,ie.route=pe.route.value,ie.outlet&&ie.outlet.attach(pe.componentRef,pe.route.value),Sr(pe.route)}else{const pe=function(A){for(let C=A.parent;C;C=C.parent){const E=C.routeConfig;if(E&&E._loadedConfig)return E._loadedConfig;if(E&&E.component)return null}return null}(V.snapshot),Me=pe?pe.module.componentFactoryResolver:null;ie.attachRef=null,ie.route=V,ie.resolver=Me,ie.outlet&&ie.outlet.activateWith(V,Me),this.activateChildRoutes(C,null,ie.children)}}else this.activateChildRoutes(C,null,O)}}function Sr(A){In(A.value),A.children.forEach(Sr)}class Ii{constructor(C,E){this.routes=C,this.module=E}}function oi(A){return"function"==typeof A}function Zr(A){return A instanceof wi}const z=Symbol("INITIAL_VALUE");function F(){return(0,Fn.w)(A=>function(...A){let C,E;return(0,he.K)(A[A.length-1])&&(E=A.pop()),"function"==typeof A[A.length-1]&&(C=A.pop()),1===A.length&&(0,Fe.k)(A[0])&&(A=A[0]),(0,be.n)(A,E).lift(new Ae(C))}(A.map(C=>C.pipe((0,un.q)(1),(0,ir.O)(z)))).pipe((0,yr.R)((C,E)=>{let O=!1;return E.reduce((V,q,ie)=>V!==z?V:(q===z&&(O=!0),O||!1!==q&&ie!==E.length-1&&!Zr(q)?V:q),C)},z),(0,Ce.h)(C=>C!==z),(0,dn.U)(C=>Zr(C)?C:!0===C),(0,un.q)(1)))}let K=(()=>{class A{}return A.\u0275fac=function(E){return new(E||A)},A.\u0275cmp=j.Xpm({type:A,selectors:[["ng-component"]],decls:1,vars:0,template:function(E,O){1&E&&j._UZ(0,"router-outlet")},directives:function(){return[fo]},encapsulation:2}),A})();function le(A,C=""){for(let E=0;E<A.length;E++){const O=A[E];ke(O,rt(C,O))}}function ke(A,C){A.children&&le(A.children,C)}function rt(A,C){return C?A||C.path?A&&!C.path?`${A}/`:!A&&C.path?C.path:`${A}/${C.path}`:"":A}function P(A){const C=A.children&&A.children.map(P),E=C?Object.assign(Object.assign({},A),{children:C}):Object.assign({},A);return!E.component&&(C||E.loadChildren)&&E.outlet&&E.outlet!==Vt&&(E.component=K),E}function x(A){return A.outlet||Vt}function S(A,C){const E=A.filter(O=>x(O)===C);return E.push(...A.filter(O=>x(O)!==C)),E}const W={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function De(A,C,E){var O;if(""===C.path)return"full"===C.pathMatch&&(A.hasChildren()||E.length>0)?Object.assign({},W):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const q=(C.matcher||Ct)(E,A,C);if(!q)return Object.assign({},W);const ie={};Qt(q.posParams,(Me,pt)=>{ie[pt]=Me.path});const pe=q.consumed.length>0?Object.assign(Object.assign({},ie),q.consumed[q.consumed.length-1].parameters):ie;return{matched:!0,consumedSegments:q.consumed,lastChild:q.consumed.length,parameters:pe,positionalParamSegments:null!==(O=q.posParams)&&void 0!==O?O:{}}}function nt(A,C,E,O,V="corrected"){if(E.length>0&&function(A,C,E){return E.some(O=>Nn(A,C,O)&&x(O)!==Vt)}(A,E,O)){const ie=new Ot(C,function(A,C,E,O){const V={};V[Vt]=O,O._sourceSegment=A,O._segmentIndexShift=C.length;for(const q of E)if(""===q.path&&x(q)!==Vt){const ie=new Ot([],{});ie._sourceSegment=A,ie._segmentIndexShift=C.length,V[x(q)]=ie}return V}(A,C,O,new Ot(E,A.children)));return ie._sourceSegment=A,ie._segmentIndexShift=C.length,{segmentGroup:ie,slicedSegments:[]}}if(0===E.length&&function(A,C,E){return E.some(O=>Nn(A,C,O))}(A,E,O)){const ie=new Ot(A.segments,function(A,C,E,O,V,q){const ie={};for(const pe of O)if(Nn(A,E,pe)&&!V[x(pe)]){const Me=new Ot([],{});Me._sourceSegment=A,Me._segmentIndexShift="legacy"===q?A.segments.length:C.length,ie[x(pe)]=Me}return Object.assign(Object.assign({},V),ie)}(A,C,E,O,A.children,V));return ie._sourceSegment=A,ie._segmentIndexShift=C.length,{segmentGroup:ie,slicedSegments:E}}const q=new Ot(A.segments,A.children);return q._sourceSegment=A,q._segmentIndexShift=C.length,{segmentGroup:q,slicedSegments:E}}function Nn(A,C,E){return(!(A.hasChildren()||C.length>0)||"full"!==E.pathMatch)&&""===E.path}function pi(A,C,E,O){return!!(x(A)===O||O!==Vt&&Nn(C,E,A))&&("**"===A.path||De(C,A,E).matched)}function Is(A,C,E){return 0===C.length&&!A.children[E]}class gi{constructor(C){this.segmentGroup=C||null}}class Vr{constructor(C){this.urlTree=C}}function ai(A){return new me.y(C=>C.error(new gi(A)))}function Mo(A){return new me.y(C=>C.error(new Vr(A)))}function qt(A){return new me.y(C=>C.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${A}'`)))}class Gu{constructor(C,E,O,V,q){this.configLoader=E,this.urlSerializer=O,this.urlTree=V,this.config=q,this.allowRedirects=!0,this.ngModule=C.get(j.h0i)}apply(){const C=nt(this.urlTree.root,[],[],this.config).segmentGroup,E=new Ot(C.segments,C.children);return this.expandSegmentGroup(this.ngModule,this.config,E,Vt).pipe((0,dn.U)(q=>this.createUrlTree(Oo(q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ne(q=>{if(q instanceof Vr)return this.allowRedirects=!1,this.match(q.urlTree);throw q instanceof gi?this.noMatchError(q):q}))}match(C){return this.expandSegmentGroup(this.ngModule,this.config,C.root,Vt).pipe((0,dn.U)(V=>this.createUrlTree(Oo(V),C.queryParams,C.fragment))).pipe(Ne(V=>{throw V instanceof gi?this.noMatchError(V):V}))}noMatchError(C){return new Error(`Cannot match any routes. URL Segment: '${C.segmentGroup}'`)}createUrlTree(C,E,O){const V=C.segments.length>0?new Ot([],{[Vt]:C}):C;return new wi(V,E,O)}expandSegmentGroup(C,E,O,V){return 0===O.segments.length&&O.hasChildren()?this.expandChildren(C,E,O).pipe((0,dn.U)(q=>new Ot([],q))):this.expandSegment(C,O,E,O.segments,V,!0)}expandChildren(C,E,O){const V=[];for(const q of Object.keys(O.children))"primary"===q?V.unshift(q):V.push(q);return(0,Qe.D)(V).pipe(ye(q=>{const ie=O.children[q],pe=S(E,q);return this.expandSegmentGroup(C,pe,ie,q).pipe((0,dn.U)(Me=>({segment:Me,outlet:q})))}),(0,yr.R)((q,ie)=>(q[ie.outlet]=ie.segment,q),{}),function(A,C){const E=arguments.length>=2;return O=>O.pipe(A?(0,Ce.h)((V,q)=>A(V,q,O)):Jt.y,Et(1),E?(0,Pt.d)(C):(0,ct.T)(()=>new ut.K))}())}expandSegment(C,E,O,V,q,ie){return(0,Qe.D)(O).pipe(ye(pe=>this.expandSegmentAgainstRoute(C,E,O,pe,V,q,ie).pipe(Ne(pt=>{if(pt instanceof gi)return(0,se.of)(null);throw pt}))),(0,Dn.P)(pe=>!!pe),Ne((pe,Me)=>{if(pe instanceof ut.K||"EmptyError"===pe.name){if(Is(E,V,q))return(0,se.of)(new Ot([],{}));throw new gi(E)}throw pe}))}expandSegmentAgainstRoute(C,E,O,V,q,ie,pe){return pi(V,E,q,ie)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(C,E,V,q,ie):pe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,E,O,V,q,ie):ai(E):ai(E)}expandSegmentAgainstRouteUsingRedirect(C,E,O,V,q,ie){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,O,V,ie):this.expandRegularSegmentAgainstRouteUsingRedirect(C,E,O,V,q,ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,E,O,V){const q=this.applyRedirectCommands([],O.redirectTo,{});return O.redirectTo.startsWith("/")?Mo(q):this.lineralizeSegments(O,q).pipe((0,Re.zg)(ie=>{const pe=new Ot(ie,{});return this.expandSegment(C,pe,E,ie,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,E,O,V,q,ie){const{matched:pe,consumedSegments:Me,lastChild:pt,positionalParamSegments:Cn}=De(E,V,q);if(!pe)return ai(E);const It=this.applyRedirectCommands(Me,V.redirectTo,Cn);return V.redirectTo.startsWith("/")?Mo(It):this.lineralizeSegments(V,It).pipe((0,Re.zg)(Tt=>this.expandSegment(C,E,O,Tt.concat(q.slice(pt)),ie,!1)))}matchSegmentAgainstRoute(C,E,O,V,q){if("**"===O.path)return O.loadChildren?(O._loadedConfig?(0,se.of)(O._loadedConfig):this.configLoader.load(C.injector,O)).pipe((0,dn.U)(Tt=>(O._loadedConfig=Tt,new Ot(V,{})))):(0,se.of)(new Ot(V,{}));const{matched:ie,consumedSegments:pe,lastChild:Me}=De(E,O,V);if(!ie)return ai(E);const pt=V.slice(Me);return this.getChildConfig(C,O,V).pipe((0,Re.zg)(It=>{const Tt=It.module,sn=It.routes,{segmentGroup:ti,slicedSegments:Si}=nt(E,pe,pt,sn),ni=new Ot(ti.segments,ti.children);if(0===Si.length&&ni.hasChildren())return this.expandChildren(Tt,sn,ni).pipe((0,dn.U)(Go=>new Ot(pe,Go)));if(0===sn.length&&0===Si.length)return(0,se.of)(new Ot(pe,{}));const yn=x(O)===q;return this.expandSegment(Tt,ni,sn,Si,yn?Vt:q,!0).pipe((0,dn.U)(nr=>new Ot(pe.concat(nr.segments),nr.children)))}))}getChildConfig(C,E,O){return E.children?(0,se.of)(new Ii(E.children,C)):E.loadChildren?void 0!==E._loadedConfig?(0,se.of)(E._loadedConfig):this.runCanLoadGuards(C.injector,E,O).pipe((0,Re.zg)(V=>{return V?this.configLoader.load(C.injector,E).pipe((0,dn.U)(q=>(E._loadedConfig=q,q))):(A=E,new me.y(C=>C.error(ze(`Cannot load children because the guard of the route "path: '${A.path}'" returned false`))));var A})):(0,se.of)(new Ii([],C))}runCanLoadGuards(C,E,O){const V=E.canLoad;if(!V||0===V.length)return(0,se.of)(!0);const q=V.map(ie=>{const pe=C.get(ie);let Me;if((A=pe)&&oi(A.canLoad))Me=pe.canLoad(E,O);else{if(!oi(pe))throw new Error("Invalid CanLoad guard");Me=pe(E,O)}var A;return Vn(Me)});return(0,se.of)(q).pipe(F(),(0,Tn.b)(ie=>{if(!Zr(ie))return;const pe=ze(`Redirecting to "${this.urlSerializer.serialize(ie)}"`);throw pe.url=ie,pe}),(0,dn.U)(ie=>!0===ie))}lineralizeSegments(C,E){let O=[],V=E.root;for(;;){if(O=O.concat(V.segments),0===V.numberOfChildren)return(0,se.of)(O);if(V.numberOfChildren>1||!V.children[Vt])return qt(C.redirectTo);V=V.children[Vt]}}applyRedirectCommands(C,E,O){return this.applyRedirectCreatreUrlTree(E,this.urlSerializer.parse(E),C,O)}applyRedirectCreatreUrlTree(C,E,O,V){const q=this.createSegmentGroup(C,E.root,O,V);return new wi(q,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(C,E){const O={};return Qt(C,(V,q)=>{if("string"==typeof V&&V.startsWith(":")){const pe=V.substring(1);O[q]=E[pe]}else O[q]=V}),O}createSegmentGroup(C,E,O,V){const q=this.createSegments(C,E.segments,O,V);let ie={};return Qt(E.children,(pe,Me)=>{ie[Me]=this.createSegmentGroup(C,pe,O,V)}),new Ot(q,ie)}createSegments(C,E,O,V){return E.map(q=>q.path.startsWith(":")?this.findPosParam(C,q,V):this.findOrReturn(q,O))}findPosParam(C,E,O){const V=O[E.path.substring(1)];if(!V)throw new Error(`Cannot redirect to '${C}'. Cannot find '${E.path}'.`);return V}findOrReturn(C,E){let O=0;for(const V of E){if(V.path===C.path)return E.splice(O),V;O++}return C}}function Oo(A){const C={};for(const O of Object.keys(A.children)){const q=Oo(A.children[O]);(q.segments.length>0||q.hasChildren())&&(C[O]=q)}return function(A){if(1===A.numberOfChildren&&A.children[Vt]){const C=A.children[Vt];return new Ot(A.segments.concat(C.segments),C.children)}return A}(new Ot(A.segments,C))}class Po{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class Ze{constructor(C,E){this.component=C,this.route=E}}function vn(A,C,E){const O=A._root;return $s(O,C?C._root:null,E,[O.value])}function Zn(A,C,E){const O=function(A){if(!A)return null;for(let C=A.parent;C;C=C.parent){const E=C.routeConfig;if(E&&E._loadedConfig)return E._loadedConfig}return null}(C);return(O?O.module.injector:E).get(A)}function $s(A,C,E,O,V={canDeactivateChecks:[],canActivateChecks:[]}){const q=_r(C);return A.children.forEach(ie=>{(function(A,C,E,O,V={canDeactivateChecks:[],canActivateChecks:[]}){const q=A.value,ie=C?C.value:null,pe=E?E.getContext(A.value.outlet):null;if(ie&&q.routeConfig===ie.routeConfig){const Me=function(A,C,E){if("function"==typeof E)return E(A,C);switch(E){case"pathParamsChange":return!Kn(A.url,C.url);case"pathParamsOrQueryParamsChange":return!Kn(A.url,C.url)||!nn(A.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cs(A,C)||!nn(A.queryParams,C.queryParams);case"paramsChange":default:return!Cs(A,C)}}(ie,q,q.routeConfig.runGuardsAndResolvers);Me?V.canActivateChecks.push(new Po(O)):(q.data=ie.data,q._resolvedData=ie._resolvedData),$s(A,C,q.component?pe?pe.children:null:E,O,V),Me&&pe&&pe.outlet&&pe.outlet.isActivated&&V.canDeactivateChecks.push(new Ze(pe.outlet.component,ie))}else ie&&ls(C,pe,V),V.canActivateChecks.push(new Po(O)),$s(A,null,q.component?pe?pe.children:null:E,O,V)})(ie,q[ie.value.outlet],E,O.concat([ie.value]),V),delete q[ie.value.outlet]}),Qt(q,(ie,pe)=>ls(ie,E.getContext(pe),V)),V}function ls(A,C,E){const O=_r(A),V=A.value;Qt(O,(q,ie)=>{ls(q,V.component?C?C.children.getContext(ie):null:C,E)}),E.canDeactivateChecks.push(new Ze(V.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,V))}class Hs{}function Wa(A){return new me.y(C=>C.error(A))}class Sl{constructor(C,E,O,V,q,ie){this.rootComponentType=C,this.config=E,this.urlTree=O,this.url=V,this.paramsInheritanceStrategy=q,this.relativeLinkResolution=ie}recognize(){const C=nt(this.urlTree.root,[],[],this.config.filter(ie=>void 0===ie.redirectTo),this.relativeLinkResolution).segmentGroup,E=this.processSegmentGroup(this.config,C,Vt);if(null===E)return null;const O=new kr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new Wr(O,E),q=new ki(this.url,V);return this.inheritParamsAndData(q._root),q}inheritParamsAndData(C){const E=C.value,O=Pr(E,this.paramsInheritanceStrategy);E.params=Object.freeze(O.params),E.data=Object.freeze(O.data),C.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(C,E,O){return 0===E.segments.length&&E.hasChildren()?this.processChildren(C,E):this.processSegment(C,E,E.segments,O)}processChildren(C,E){const O=[];for(const q of Object.keys(E.children)){const ie=E.children[q],pe=S(C,q),Me=this.processSegmentGroup(pe,ie,q);if(null===Me)return null;O.push(...Me)}const V=ds(O);return V.sort((C,E)=>C.value.outlet===Vt?-1:E.value.outlet===Vt?1:C.value.outlet.localeCompare(E.value.outlet)),V}processSegment(C,E,O,V){for(const q of C){const ie=this.processSegmentAgainstRoute(q,E,O,V);if(null!==ie)return ie}return Is(E,O,V)?[]:null}processSegmentAgainstRoute(C,E,O,V){if(C.redirectTo||!pi(C,E,O,V))return null;let q,ie=[],pe=[];if("**"===C.path){const sn=O.length>0?ur(O).parameters:{};q=new kr(O,sn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lo(C),x(C),C.component,C,Cu(E),Ds(E)+O.length,bu(C))}else{const sn=De(E,C,O);if(!sn.matched)return null;ie=sn.consumedSegments,pe=O.slice(sn.lastChild),q=new kr(ie,sn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lo(C),x(C),C.component,C,Cu(E),Ds(E)+ie.length,bu(C))}const Me=(A=C).children?A.children:A.loadChildren?A._loadedConfig.routes:[],{segmentGroup:pt,slicedSegments:Cn}=nt(E,ie,pe,Me.filter(sn=>void 0===sn.redirectTo),this.relativeLinkResolution);var A;if(0===Cn.length&&pt.hasChildren()){const sn=this.processChildren(Me,pt);return null===sn?null:[new Wr(q,sn)]}if(0===Me.length&&0===Cn.length)return[new Wr(q,[])];const It=x(C)===V,Tt=this.processSegment(Me,pt,Cn,It?Vt:V);return null===Tt?null:[new Wr(q,Tt)]}}function Ea(A){const C=A.value.routeConfig;return C&&""===C.path&&void 0===C.redirectTo}function ds(A){const C=[],E=new Set;for(const O of A){if(!Ea(O)){C.push(O);continue}const V=C.find(q=>O.value.routeConfig===q.value.routeConfig);void 0!==V?(V.children.push(...O.children),E.add(V)):C.push(O)}for(const O of E){const V=ds(O.children);C.push(new Wr(O.value,V))}return C.filter(O=>!E.has(O))}function Cu(A){let C=A;for(;C._sourceSegment;)C=C._sourceSegment;return C}function Ds(A){let C=A,E=C._segmentIndexShift?C._segmentIndexShift:0;for(;C._sourceSegment;)C=C._sourceSegment,E+=C._segmentIndexShift?C._segmentIndexShift:0;return E-1}function Lo(A){return A.data||{}}function bu(A){return A.resolve||{}}function Ka(A){return(0,Fn.w)(C=>{const E=A(C);return E?(0,Qe.D)(E).pipe((0,dn.U)(()=>C)):(0,se.of)(C)})}class er extends class{shouldDetach(C){return!1}store(C,E){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,E){return C.routeConfig===E.routeConfig}}{}const Ss=new j.OlP("ROUTES");class wo{constructor(C,E,O,V){this.loader=C,this.compiler=E,this.onLoadStartListener=O,this.onLoadEndListener=V}load(C,E){if(E._loader$)return E._loader$;this.onLoadStartListener&&this.onLoadStartListener(E);const V=this.loadModuleFactory(E.loadChildren).pipe((0,dn.U)(q=>{this.onLoadEndListener&&this.onLoadEndListener(E);const ie=q.create(C);return new Ii(Xt(ie.injector.get(Ss,void 0,j.XFs.Self|j.XFs.Optional)).map(P),ie)}),Ne(q=>{throw E._loader$=void 0,q}));return E._loader$=new Zt.c(V,()=>new ne.xQ).pipe((0,Sn.x)()),E._loader$}loadModuleFactory(C){return"string"==typeof C?(0,Qe.D)(this.loader.load(C)):Vn(C()).pipe((0,Re.zg)(E=>E instanceof j.YKP?(0,se.of)(E):(0,Qe.D)(this.compiler.compileModuleAsync(E))))}}class Za{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new uo,this.attachRef=null}}class uo{constructor(){this.contexts=new Map}onChildOutletCreated(C,E){const O=this.getOrCreateContext(C);O.outlet=E,this.contexts.set(C,O)}onChildOutletDestroyed(C){const E=this.getContext(C);E&&(E.outlet=null,E.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let E=this.getContext(C);return E||(E=new Za,this.contexts.set(C,E)),E}getContext(C){return this.contexts.get(C)||null}}class Ca{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,E){return C}}function Vo(A){throw A}function As(A,C,E){return C.parse("/")}function ta(A,C){return(0,se.of)(null)}const lo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},co={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xr=(()=>{class A{constructor(E,O,V,q,ie,pe,Me,pt){this.rootComponentType=E,this.urlSerializer=O,this.rootContexts=V,this.location=q,this.config=pt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ne.xQ,this.errorHandler=Vo,this.malformedUriErrorHandler=As,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ta,afterPreactivation:ta},this.urlHandlingStrategy=new Ca,this.routeReuseStrategy=new er,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ie.get(j.h0i),this.console=ie.get(j.c2e);const Tt=ie.get(j.R0b);this.isNgZoneEnabled=Tt instanceof j.R0b&&j.R0b.isInAngularZone(),this.resetConfig(pt),this.currentUrlTree=new wi(new Ot([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new wo(pe,Me,sn=>this.triggerEvent(new xt(sn)),sn=>this.triggerEvent(new St(sn))),this.routerState=dr(this.currentUrlTree,this.rootComponentType),this.transitions=new Te({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var E;return null===(E=this.location.getState())||void 0===E?void 0:E.\u0275routerPageId}setupNavigations(E){const O=this.events;return E.pipe((0,Ce.h)(V=>0!==V.id),(0,dn.U)(V=>Object.assign(Object.assign({},V),{extractedUrl:this.urlHandlingStrategy.extract(V.rawUrl)})),(0,Fn.w)(V=>{let q=!1,ie=!1;return(0,se.of)(V).pipe((0,Tn.b)(pe=>{this.currentNavigation={id:pe.id,initialUrl:pe.currentRawUrl,extractedUrl:pe.extractedUrl,trigger:pe.source,extras:pe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Fn.w)(pe=>{const Me=this.browserUrlTree.toString(),pt=!this.navigated||pe.extractedUrl.toString()!==Me||Me!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||pt)&&this.urlHandlingStrategy.shouldProcessUrl(pe.rawUrl))return Rs(pe.source)&&(this.browserUrlTree=pe.extractedUrl),(0,se.of)(pe).pipe((0,Fn.w)(It=>{const Tt=this.transitions.getValue();return O.next(new kt(It.id,this.serializeUrl(It.extractedUrl),It.source,It.restoredState)),Tt!==this.transitions.getValue()?Je.E:Promise.resolve(It)}),function(A,C,E,O){return(0,Fn.w)(V=>function(A,C,E,O,V){return new Gu(A,C,E,O,V).apply()}(A,C,E,V.extractedUrl,O).pipe((0,dn.U)(q=>Object.assign(Object.assign({},V),{urlAfterRedirects:q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Tn.b)(It=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:It.urlAfterRedirects})}),function(A,C,E,O,V){return(0,Re.zg)(q=>function(A,C,E,O,V="emptyOnly",q="legacy"){try{const ie=new Sl(A,C,E,O,V,q).recognize();return null===ie?Wa(new Hs):(0,se.of)(ie)}catch(ie){return Wa(ie)}}(A,C,q.urlAfterRedirects,E(q.urlAfterRedirects),O,V).pipe((0,dn.U)(ie=>Object.assign(Object.assign({},q),{targetSnapshot:ie}))))}(this.rootComponentType,this.config,It=>this.serializeUrl(It),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Tn.b)(It=>{"eager"===this.urlUpdateStrategy&&(It.extras.skipLocationChange||this.setBrowserUrl(It.urlAfterRedirects,It),this.browserUrlTree=It.urlAfterRedirects);const Tt=new tt(It.id,this.serializeUrl(It.extractedUrl),this.serializeUrl(It.urlAfterRedirects),It.targetSnapshot);O.next(Tt)}));if(pt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Tt,extractedUrl:sn,source:ti,restoredState:Si,extras:ni}=pe,yn=new kt(Tt,this.serializeUrl(sn),ti,Si);O.next(yn);const Ai=dr(sn,this.rootComponentType).snapshot;return(0,se.of)(Object.assign(Object.assign({},pe),{targetSnapshot:Ai,urlAfterRedirects:sn,extras:Object.assign(Object.assign({},ni),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=pe.rawUrl,this.browserUrlTree=pe.urlAfterRedirects,pe.resolve(null),Je.E}),Ka(pe=>{const{targetSnapshot:Me,id:pt,extractedUrl:Cn,rawUrl:It,extras:{skipLocationChange:Tt,replaceUrl:sn}}=pe;return this.hooks.beforePreactivation(Me,{navigationId:pt,appliedUrlTree:Cn,rawUrlTree:It,skipLocationChange:!!Tt,replaceUrl:!!sn})}),(0,Tn.b)(pe=>{const Me=new bn(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot);this.triggerEvent(Me)}),(0,dn.U)(pe=>Object.assign(Object.assign({},pe),{guards:vn(pe.targetSnapshot,pe.currentSnapshot,this.rootContexts)})),function(A,C){return(0,Re.zg)(E=>{const{targetSnapshot:O,currentSnapshot:V,guards:{canActivateChecks:q,canDeactivateChecks:ie}}=E;return 0===ie.length&&0===q.length?(0,se.of)(Object.assign(Object.assign({},E),{guardsResult:!0})):function(A,C,E,O){return(0,Qe.D)(A).pipe((0,Re.zg)(V=>function(A,C,E,O,V){const q=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,se.of)(!0);const ie=q.map(pe=>{const Me=Zn(pe,C,V);let pt;if(function(A){return A&&oi(A.canDeactivate)}(Me))pt=Vn(Me.canDeactivate(A,C,E,O));else{if(!oi(Me))throw new Error("Invalid CanDeactivate guard");pt=Vn(Me(A,C,E,O))}return pt.pipe((0,Dn.P)())});return(0,se.of)(ie).pipe(F())}(V.component,V.route,E,C,O)),(0,Dn.P)(V=>!0!==V,!0))}(ie,O,V,A).pipe((0,Re.zg)(pe=>pe&&function(A){return"boolean"==typeof A}(pe)?function(A,C,E,O){return(0,Qe.D)(C).pipe(ye(V=>(0,Gt.z)(function(A,C){return null!==A&&C&&C(new Gn(A)),(0,se.of)(!0)}(V.route.parent,O),function(A,C){return null!==A&&C&&C(new es(A)),(0,se.of)(!0)}(V.route,O),function(A,C,E){const O=C[C.length-1],q=C.slice(0,C.length-1).reverse().map(ie=>function(A){const C=A.routeConfig?A.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:A,guards:C}:null}(ie)).filter(ie=>null!==ie).map(ie=>st(()=>{const pe=ie.guards.map(Me=>{const pt=Zn(Me,ie.node,E);let Cn;if(function(A){return A&&oi(A.canActivateChild)}(pt))Cn=Vn(pt.canActivateChild(O,A));else{if(!oi(pt))throw new Error("Invalid CanActivateChild guard");Cn=Vn(pt(O,A))}return Cn.pipe((0,Dn.P)())});return(0,se.of)(pe).pipe(F())}));return(0,se.of)(q).pipe(F())}(A,V.path,E),function(A,C,E){const O=C.routeConfig?C.routeConfig.canActivate:null;if(!O||0===O.length)return(0,se.of)(!0);const V=O.map(q=>st(()=>{const ie=Zn(q,C,E);let pe;if(function(A){return A&&oi(A.canActivate)}(ie))pe=Vn(ie.canActivate(C,A));else{if(!oi(ie))throw new Error("Invalid CanActivate guard");pe=Vn(ie(C,A))}return pe.pipe((0,Dn.P)())}));return(0,se.of)(V).pipe(F())}(A,V.route,E))),(0,Dn.P)(V=>!0!==V,!0))}(O,q,A,C):(0,se.of)(pe)),(0,dn.U)(pe=>Object.assign(Object.assign({},E),{guardsResult:pe})))})}(this.ngModule.injector,pe=>this.triggerEvent(pe)),(0,Tn.b)(pe=>{if(Zr(pe.guardsResult)){const pt=ze(`Redirecting to "${this.serializeUrl(pe.guardsResult)}"`);throw pt.url=pe.guardsResult,pt}const Me=new Bn(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot,!!pe.guardsResult);this.triggerEvent(Me)}),(0,Ce.h)(pe=>!!pe.guardsResult||(this.restoreHistory(pe),this.cancelNavigationTransition(pe,""),!1)),Ka(pe=>{if(pe.guards.canActivateChecks.length)return(0,se.of)(pe).pipe((0,Tn.b)(Me=>{const pt=new Mn(Me.id,this.serializeUrl(Me.extractedUrl),this.serializeUrl(Me.urlAfterRedirects),Me.targetSnapshot);this.triggerEvent(pt)}),(0,Fn.w)(Me=>{let pt=!1;return(0,se.of)(Me).pipe(function(A,C){return(0,Re.zg)(E=>{const{targetSnapshot:O,guards:{canActivateChecks:V}}=E;if(!V.length)return(0,se.of)(E);let q=0;return(0,Qe.D)(V).pipe(ye(ie=>function(A,C,E,O){return function(A,C,E,O){const V=Object.keys(A);if(0===V.length)return(0,se.of)({});const q={};return(0,Qe.D)(V).pipe((0,Re.zg)(ie=>function(A,C,E,O){const V=Zn(A,C,O);return Vn(V.resolve?V.resolve(C,E):V(C,E))}(A[ie],C,E,O).pipe((0,Tn.b)(pe=>{q[ie]=pe}))),Et(1),(0,Re.zg)(()=>Object.keys(q).length===V.length?(0,se.of)(q):Je.E))}(A._resolve,A,C,O).pipe((0,dn.U)(q=>(A._resolvedData=q,A.data=Object.assign(Object.assign({},A.data),Pr(A,E).resolve),null)))}(ie.route,O,A,C)),(0,Tn.b)(()=>q++),Et(1),(0,Re.zg)(ie=>q===V.length?(0,se.of)(E):Je.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Tn.b)({next:()=>pt=!0,complete:()=>{pt||(this.restoreHistory(Me),this.cancelNavigationTransition(Me,"At least one route resolver didn't emit any value."))}}))}),(0,Tn.b)(Me=>{const pt=new wn(Me.id,this.serializeUrl(Me.extractedUrl),this.serializeUrl(Me.urlAfterRedirects),Me.targetSnapshot);this.triggerEvent(pt)}))}),Ka(pe=>{const{targetSnapshot:Me,id:pt,extractedUrl:Cn,rawUrl:It,extras:{skipLocationChange:Tt,replaceUrl:sn}}=pe;return this.hooks.afterPreactivation(Me,{navigationId:pt,appliedUrlTree:Cn,rawUrlTree:It,skipLocationChange:!!Tt,replaceUrl:!!sn})}),(0,dn.U)(pe=>{const Me=function(A,C,E){const O=no(A,C._root,E?E._root:void 0);return new Pi(O,C)}(this.routeReuseStrategy,pe.targetSnapshot,pe.currentRouterState);return Object.assign(Object.assign({},pe),{targetRouterState:Me})}),(0,Tn.b)(pe=>{this.currentUrlTree=pe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(pe.urlAfterRedirects,pe.rawUrl),this.routerState=pe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(pe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,pe),this.browserUrlTree=pe.urlAfterRedirects)}),((A,C,E)=>(0,dn.U)(O=>(new so(C,O.targetRouterState,O.currentRouterState,E).activate(A),O)))(this.rootContexts,this.routeReuseStrategy,pe=>this.triggerEvent(pe)),(0,Tn.b)({next(){q=!0},complete(){q=!0}}),function(A){return C=>C.lift(new ht(A))}(()=>{if(!q&&!ie){const pe=`Navigation ID ${V.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(V),this.cancelNavigationTransition(V,pe)):this.cancelNavigationTransition(V,pe)}this.currentNavigation=null}),Ne(pe=>{if(ie=!0,function(A){return A&&A[ue]}(pe)){const Me=Zr(pe.url);Me||(this.navigated=!0,this.restoreHistory(V,!0));const pt=new Ir(V.id,this.serializeUrl(V.extractedUrl),pe.message);O.next(pt),Me?setTimeout(()=>{const Cn=this.urlHandlingStrategy.merge(pe.url,this.rawUrlTree),It={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Rs(V.source)};this.scheduleNavigation(Cn,"imperative",null,It,{resolve:V.resolve,reject:V.reject,promise:V.promise})},0):V.resolve(!1)}else{this.restoreHistory(V,!0);const Me=new Bt(V.id,this.serializeUrl(V.extractedUrl),pe);O.next(Me);try{V.resolve(this.errorHandler(pe))}catch(pt){V.reject(pt)}}return Je.E}))}))}resetRootComponentType(E){this.rootComponentType=E,this.routerState.root.component=this.rootComponentType}getTransition(){const E=this.transitions.value;return E.urlAfterRedirects=this.browserUrlTree,E}setTransition(E){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),E))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const O=this.extractLocationChangeInfoFromEvent(E);this.shouldScheduleNavigation(this.lastLocationChangeInfo,O)&&setTimeout(()=>{const{source:V,state:q,urlTree:ie}=O,pe={replaceUrl:!0};if(q){const Me=Object.assign({},q);delete Me.navigationId,delete Me.\u0275routerPageId,0!==Object.keys(Me).length&&(pe.state=Me)}this.scheduleNavigation(ie,V,q,pe)},0),this.lastLocationChangeInfo=O}))}extractLocationChangeInfoFromEvent(E){var O;return{source:"popstate"===E.type?"popstate":"hashchange",urlTree:this.parseUrl(E.url),state:(null===(O=E.state)||void 0===O?void 0:O.navigationId)?E.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(E,O){if(!E)return!0;const V=O.urlTree.toString()===E.urlTree.toString();return O.transitionId!==E.transitionId||!V||!("hashchange"===O.source&&"popstate"===E.source||"popstate"===O.source&&"hashchange"===E.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(E){this.events.next(E)}resetConfig(E){le(E),this.config=E.map(P),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(E,O={}){const{relativeTo:V,queryParams:q,fragment:ie,queryParamsHandling:pe,preserveFragment:Me}=O,pt=V||this.routerState.root,Cn=Me?this.currentUrlTree.fragment:ie;let It=null;switch(pe){case"merge":It=Object.assign(Object.assign({},this.currentUrlTree.queryParams),q);break;case"preserve":It=this.currentUrlTree.queryParams;break;default:It=q||null}return null!==It&&(It=this.removeEmptyProps(It)),function(A,C,E,O,V){if(0===E.length)return js(C.root,C.root,C,O,V);const q=function(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new No(!0,0,A);let C=0,E=!1;const O=A.reduce((V,q,ie)=>{if("object"==typeof q&&null!=q){if(q.outlets){const pe={};return Qt(q.outlets,(Me,pt)=>{pe[pt]="string"==typeof Me?Me.split("/"):Me}),[...V,{outlets:pe}]}if(q.segmentPath)return[...V,q.segmentPath]}return"string"!=typeof q?[...V,q]:0===ie?(q.split("/").forEach((pe,Me)=>{0==Me&&"."===pe||(0==Me&&""===pe?E=!0:".."===pe?C++:""!=pe&&V.push(pe))}),V):[...V,q]},[]);return new No(E,C,O)}(E);if(q.toRoot())return js(C.root,new Ot([],{}),C,O,V);const ie=function(A,C,E){if(A.isAbsolute)return new zr(C.root,!0,0);if(-1===E.snapshot._lastPathIndex){const q=E.snapshot._urlSegment;return new zr(q,q===C.root,0)}const O=fi(A.commands[0])?0:1;return function(A,C,E){let O=A,V=C,q=E;for(;q>V;){if(q-=V,O=O.parent,!O)throw new Error("Invalid number of '../'");V=O.segments.length}return new zr(O,!1,V-q)}(E.snapshot._urlSegment,E.snapshot._lastPathIndex+O,A.numberOfDoubleDots)}(q,C,A),pe=ie.processChildren?Kr(ie.segmentGroup,ie.index,q.commands):bs(ie.segmentGroup,ie.index,q.commands);return js(ie.segmentGroup,pe,C,O,V)}(pt,this.currentUrlTree,E,It,null!=Cn?Cn:null)}navigateByUrl(E,O={skipLocationChange:!1}){const V=Zr(E)?E:this.parseUrl(E),q=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(q,"imperative",null,O)}navigate(E,O={skipLocationChange:!1}){return function(A){for(let C=0;C<A.length;C++){const E=A[C];if(null==E)throw new Error(`The requested path contains ${E} segment at index ${C}`)}}(E),this.navigateByUrl(this.createUrlTree(E,O),O)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let O;try{O=this.urlSerializer.parse(E)}catch(V){O=this.malformedUriErrorHandler(V,this.urlSerializer,E)}return O}isActive(E,O){let V;if(V=!0===O?Object.assign({},lo):!1===O?Object.assign({},co):O,Zr(E))return ts(this.currentUrlTree,E,V);const q=this.parseUrl(E);return ts(this.currentUrlTree,q,V)}removeEmptyProps(E){return Object.keys(E).reduce((O,V)=>{const q=E[V];return null!=q&&(O[V]=q),O},{})}processNavigations(){this.navigations.subscribe(E=>{this.navigated=!0,this.lastSuccessfulId=E.id,this.currentPageId=E.targetPageId,this.events.next(new An(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,E.resolve(!0)},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)})}scheduleNavigation(E,O,V,q,ie){var pe,Me;if(this.disposed)return Promise.resolve(!1);const pt=this.getTransition(),Cn=Rs(O)&&pt&&!Rs(pt.source),sn=(this.lastSuccessfulId===pt.id||this.currentNavigation?pt.rawUrl:pt.urlAfterRedirects).toString()===E.toString();if(Cn&&sn)return Promise.resolve(!0);let ti,Si,ni;ie?(ti=ie.resolve,Si=ie.reject,ni=ie.promise):ni=new Promise((nr,Go)=>{ti=nr,Si=Go});const yn=++this.navigationId;let Ai;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(V=this.location.getState()),Ai=V&&V.\u0275routerPageId?V.\u0275routerPageId:q.replaceUrl||q.skipLocationChange?null!==(pe=this.browserPageId)&&void 0!==pe?pe:0:(null!==(Me=this.browserPageId)&&void 0!==Me?Me:0)+1):Ai=0,this.setTransition({id:yn,targetPageId:Ai,source:O,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:E,extras:q,resolve:ti,reject:Si,promise:ni,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ni.catch(nr=>Promise.reject(nr))}setBrowserUrl(E,O){const V=this.urlSerializer.serialize(E),q=Object.assign(Object.assign({},O.extras.state),this.generateNgRouterState(O.id,O.targetPageId));this.location.isCurrentPathEqualTo(V)||O.extras.replaceUrl?this.location.replaceState(V,"",q):this.location.go(V,"",q)}restoreHistory(E,O=!1){var V,q;if("computed"===this.canceledNavigationResolution){const ie=this.currentPageId-E.targetPageId;"popstate"!==E.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(V=this.currentNavigation)||void 0===V?void 0:V.finalUrl)||0===ie?this.currentUrlTree===(null===(q=this.currentNavigation)||void 0===q?void 0:q.finalUrl)&&0===ie&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ie)}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(E,O){const V=new Ir(E.id,this.serializeUrl(E.extractedUrl),O);this.triggerEvent(V),E.resolve(!1)}generateNgRouterState(E,O){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:O}:{navigationId:E}}}return A.\u0275fac=function(E){return new(E||A)(j.LFG(j.DyG),j.LFG(pn),j.LFG(uo),j.LFG(w.Ye),j.LFG(j.zs3),j.LFG(j.v3s),j.LFG(j.Sil),j.LFG(void 0))},A.\u0275prov=j.Yz7({token:A,factory:A.\u0275fac}),A})();function Rs(A){return"imperative"!==A}let Gs=(()=>{class A{constructor(E,O,V){this.router=E,this.route=O,this.locationStrategy=V,this.commands=[],this.onChanges=new ne.xQ,this.subscription=E.events.subscribe(q=>{q instanceof An&&this.updateTargetUrlAndHref()})}set routerLink(E){this.commands=null!=E?Array.isArray(E)?E:[E]:[]}ngOnChanges(E){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(E,O,V,q,ie){if(0!==E||O||V||q||ie||"string"==typeof this.target&&"_self"!=this.target)return!0;const pe={skipLocationChange:Er(this.skipLocationChange),replaceUrl:Er(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,pe),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Er(this.preserveFragment)})}}return A.\u0275fac=function(E){return new(E||A)(j.Y36(Xr),j.Y36(jn),j.Y36(w.S$))},A.\u0275dir=j.lG2({type:A,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(E,O){1&E&&j.NdJ("click",function(q){return O.onClick(q.button,q.ctrlKey,q.shiftKey,q.altKey,q.metaKey)}),2&E&&(j.Ikx("href",O.href,j.LSH),j.uIk("target",O.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[j.TTD]}),A})();function Er(A){return""===A||!!A}let fo=(()=>{class A{constructor(E,O,V,q,ie){this.parentContexts=E,this.location=O,this.resolver=V,this.changeDetector=ie,this.activated=null,this._activatedRoute=null,this.activateEvents=new j.vpe,this.deactivateEvents=new j.vpe,this.name=q||Vt,E.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const E=this.parentContexts.getContext(this.name);E&&E.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,E}attach(E,O){this.activated=E,this._activatedRoute=O,this.location.insert(E.hostView)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,O){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=E;const ie=(O=O||this.resolver).resolveComponentFactory(E._futureSnapshot.routeConfig.component),pe=this.parentContexts.getOrCreateContext(this.name).children,Me=new Ja(E,pe,this.location.injector);this.activated=this.location.createComponent(ie,this.location.length,Me),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(E){return new(E||A)(j.Y36(uo),j.Y36(j.s_b),j.Y36(j._Vd),j.$8M("name"),j.Y36(j.sBO))},A.\u0275dir=j.lG2({type:A,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),A})();class Ja{constructor(C,E,O){this.route=C,this.childContexts=E,this.parent=O}get(C,E){return C===jn?this.route:C===uo?this.childContexts:this.parent.get(C,E)}}class Iu{}class Du{preload(C,E){return(0,se.of)(null)}}let Uo=(()=>{class A{constructor(E,O,V,q,ie){this.router=E,this.injector=q,this.preloadingStrategy=ie,this.loader=new wo(O,V,pt=>E.triggerEvent(new xt(pt)),pt=>E.triggerEvent(new St(pt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ce.h)(E=>E instanceof An),ye(()=>this.preload())).subscribe(()=>{})}preload(){const E=this.injector.get(j.h0i);return this.processRoutes(E,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,O){const V=[];for(const q of O)if(q.loadChildren&&!q.canLoad&&q._loadedConfig){const ie=q._loadedConfig;V.push(this.processRoutes(ie.module,ie.routes))}else q.loadChildren&&!q.canLoad?V.push(this.preloadConfig(E,q)):q.children&&V.push(this.processRoutes(E,q.children));return(0,Qe.D)(V).pipe((0,hn.J)(),(0,dn.U)(q=>{}))}preloadConfig(E,O){return this.preloadingStrategy.preload(O,()=>(O._loadedConfig?(0,se.of)(O._loadedConfig):this.loader.load(E.injector,O)).pipe((0,Re.zg)(q=>(O._loadedConfig=q,this.processRoutes(q.module,q.routes)))))}}return A.\u0275fac=function(E){return new(E||A)(j.LFG(Xr),j.LFG(j.v3s),j.LFG(j.Sil),j.LFG(j.zs3),j.LFG(Iu))},A.\u0275prov=j.Yz7({token:A,factory:A.\u0275fac}),A})(),na=(()=>{class A{constructor(E,O,V={}){this.router=E,this.viewportScroller=O,this.options=V,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},V.scrollPositionRestoration=V.scrollPositionRestoration||"disabled",V.anchorScrolling=V.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(E=>{E instanceof kt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof An&&(this.lastId=E.id,this.scheduleScrollEvent(E,this.router.parseUrl(E.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(E=>{E instanceof Or&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,O){this.router.triggerEvent(new Or(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,O))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return A.\u0275fac=function(E){return new(E||A)(j.LFG(Xr),j.LFG(w.EM),j.LFG(void 0))},A.\u0275prov=j.Yz7({token:A,factory:A.\u0275fac}),A})();const xs=new j.OlP("ROUTER_CONFIGURATION"),Bo=new j.OlP("ROUTER_FORROOT_GUARD"),Ns=[w.Ye,{provide:pn,useClass:dt},{provide:Xr,useFactory:function(A,C,E,O,V,q,ie,pe={},Me,pt){const Cn=new Xr(null,A,C,E,O,V,q,Xt(ie));return Me&&(Cn.urlHandlingStrategy=Me),pt&&(Cn.routeReuseStrategy=pt),function(A,C){A.errorHandler&&(C.errorHandler=A.errorHandler),A.malformedUriErrorHandler&&(C.malformedUriErrorHandler=A.malformedUriErrorHandler),A.onSameUrlNavigation&&(C.onSameUrlNavigation=A.onSameUrlNavigation),A.paramsInheritanceStrategy&&(C.paramsInheritanceStrategy=A.paramsInheritanceStrategy),A.relativeLinkResolution&&(C.relativeLinkResolution=A.relativeLinkResolution),A.urlUpdateStrategy&&(C.urlUpdateStrategy=A.urlUpdateStrategy)}(pe,Cn),pe.enableTracing&&Cn.events.subscribe(It=>{var Tt,sn;null===(Tt=console.group)||void 0===Tt||Tt.call(console,`Router Event: ${It.constructor.name}`),console.log(It.toString()),console.log(It),null===(sn=console.groupEnd)||void 0===sn||sn.call(console)}),Cn},deps:[pn,uo,w.Ye,j.zs3,j.v3s,j.Sil,Ss,xs,[class{},new j.FiY],[class{},new j.FiY]]},uo,{provide:jn,useFactory:function(A){return A.routerState.root},deps:[Xr]},{provide:j.v3s,useClass:j.EAV},Uo,Du,class{preload(C,E){return E().pipe(Ne(()=>(0,se.of)(null)))}},{provide:xs,useValue:{enableTracing:!1}}];function Ki(){return new j.PXZ("Router",Xr)}let jo=(()=>{class A{constructor(E,O){}static forRoot(E,O){return{ngModule:A,providers:[Ns,$o(E),{provide:Bo,useFactory:wr,deps:[[Xr,new j.FiY,new j.tp0]]},{provide:xs,useValue:O||{}},{provide:w.S$,useFactory:at,deps:[w.lw,[new j.tBr(w.mr),new j.FiY],xs]},{provide:na,useFactory:Xa,deps:[Xr,w.EM,xs]},{provide:Iu,useExisting:O&&O.preloadingStrategy?O.preloadingStrategy:Du},{provide:j.PXZ,multi:!0,useFactory:Ki},[Ws,{provide:j.ip1,multi:!0,useFactory:ft,deps:[Ws]},{provide:Ye,useFactory:Be,deps:[Ws]},{provide:j.tb,multi:!0,useExisting:Ye}]]}}static forChild(E){return{ngModule:A,providers:[$o(E)]}}}return A.\u0275fac=function(E){return new(E||A)(j.LFG(Bo,8),j.LFG(Xr,8))},A.\u0275mod=j.oAB({type:A}),A.\u0275inj=j.cJS({}),A})();function Xa(A,C,E){return E.scrollOffset&&C.setOffset(E.scrollOffset),new na(A,C,E)}function at(A,C,E={}){return E.useHash?new w.Do(A,C):new w.b0(A,C)}function wr(A){return"guarded"}function $o(A){return[{provide:j.deG,multi:!0,useValue:A},{provide:Ss,multi:!0,useValue:A}]}let Ws=(()=>{class A{constructor(E){this.injector=E,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ne.xQ}appInitializer(){return this.injector.get(w.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let O=null;const V=new Promise(pe=>O=pe),q=this.injector.get(Xr),ie=this.injector.get(xs);return"disabled"===ie.initialNavigation?(q.setUpLocationChangeListener(),O(!0)):"enabled"===ie.initialNavigation||"enabledBlocking"===ie.initialNavigation?(q.hooks.afterPreactivation=()=>this.initNavigation?(0,se.of)(null):(this.initNavigation=!0,O(!0),this.resultOfPreactivationDone),q.initialNavigation()):O(!0),V})}bootstrapListener(E){const O=this.injector.get(xs),V=this.injector.get(Uo),q=this.injector.get(na),ie=this.injector.get(Xr),pe=this.injector.get(j.z2F);E===pe.components[0]&&(("enabledNonBlocking"===O.initialNavigation||void 0===O.initialNavigation)&&ie.initialNavigation(),V.setUpPreloading(),q.init(),ie.resetRootComponentType(pe.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return A.\u0275fac=function(E){return new(E||A)(j.LFG(j.zs3))},A.\u0275prov=j.Yz7({token:A,factory:A.\u0275fac}),A})();function ft(A){return A.appInitializer.bind(A)}function Be(A){return A.bootstrapListener.bind(A)}const Ye=new j.OlP("Router Initializer")},4486:(bt,Ge,G)=>{"use strict";G.d(Ge,{Z:()=>Ue});var w=G(3854),j=G(6034),ne=G(5452),Oe=G(5601);class Te{constructor(Ae,it){this._delegate=Ae,this.firebase=it,(0,ne._addComponent)(Ae,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=Ae.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this._delegate.automaticDataCollectionEnabled=Ae}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ae=>{this._delegate.checkDestroyed(),Ae()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ne.deleteApp)(this._delegate)))}_getService(Ae,it=ne._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const Je=this._delegate.container.getProvider(Ae);return!Je.isInitialized()&&"EXPLICIT"===(null===(Qe=Je.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&Je.initialize(),Je.getImmediate({identifier:it})}_removeServiceInstance(Ae,it=ne._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ae).clearInstance(it)}_addComponent(Ae){(0,ne._addComponent)(this._delegate,Ae)}_addOrOverwriteComponent(Ae){(0,ne._addOrOverwriteComponent)(this._delegate,Ae)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Fe=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ee=function oe(){const Se=function(Se){const Ae={},it={__esModule:!0,initializeApp:function(Zt,Ve={}){const Ne=ne.initializeApp(Zt,Ve);if((0,w.r3)(Ae,Ne.name))return Ae[Ne.name];const Le=new Se(Ne,it);return Ae[Ne.name]=Le,Le},app:Je,registerVersion:ne.registerVersion,setLogLevel:ne.setLogLevel,onLog:ne.onLog,apps:null,SDK_VERSION:ne.SDK_VERSION,INTERNAL:{registerComponent:function(Zt){const Ve=Zt.name,Ne=Ve.replace("-compat","");if(ne._registerComponent(Zt)&&"PUBLIC"===Zt.type){const Le=(fe=Je())=>{if("function"!=typeof fe[Ne])throw Fe.create("invalid-app-argument",{appName:Ve});return fe[Ne]()};void 0!==Zt.serviceProps&&(0,w.ZB)(Le,Zt.serviceProps),it[Ne]=Le,Se.prototype[Ne]=function(...fe){return this._getService.bind(this,Ve).apply(this,Zt.multipleInstances?fe:[])}}return"PUBLIC"===Zt.type?it[Ne]:null},removeApp:function(Zt){delete Ae[Zt]},useAsService:function(Zt,Ve){return"serverAuth"===Ve?null:Ve},modularAPIs:ne}};function Je(Zt){if(!(0,w.r3)(Ae,Zt=Zt||ne._DEFAULT_ENTRY_NAME))throw Fe.create("no-app",{appName:Zt});return Ae[Zt]}return it.default=it,Object.defineProperty(it,"apps",{get:function(){return Object.keys(Ae).map(Zt=>Ae[Zt])}}),Je.App=Se,it}(Te);return Se.INTERNAL=Object.assign(Object.assign({},Se.INTERNAL),{createFirebaseNamespace:oe,extendNamespace:function(it){(0,w.ZB)(Se,it)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),Se}(),te=new Oe.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Se=self.firebase.SDK_VERSION;Se&&Se.indexOf("LITE")>=0&&te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ue=ee;(0,ne.registerVersion)("@firebase/app-compat","0.1.4",undefined)},5452:(bt,Ge,G)=>{"use strict";G.r(Ge),G.d(Ge,{FirebaseError:()=>Oe.ZR,SDK_VERSION:()=>ir,_DEFAULT_ENTRY_NAME:()=>Yt,_addComponent:()=>Jt,_addOrOverwriteComponent:()=>Ft,_apps:()=>ct,_clearComponents:()=>jt,_components:()=>Pt,_getProvider:()=>wt,_registerComponent:()=>rn,_removeServiceInstance:()=>ht,deleteApp:()=>Sn,getApp:()=>Dn,getApps:()=>Tn,initializeApp:()=>yr,onLog:()=>kt,registerVersion:()=>Hn,setLogLevel:()=>An});var w=G(8239),j=G(6034),ne=G(5601),Oe=G(3854);class Te{constructor(tt){this.container=tt}getPlatformInfoString(){return this.container.getProviders().map(bn=>{if(function(Bt){const tt=Bt.getComponent();return"VERSION"===(null==tt?void 0:tt.type)}(bn)){const Bn=bn.getImmediate();return`${Bn.library}/${Bn.version}`}return null}).filter(bn=>bn).join(" ")}}const Fe="@firebase/app",oe=new ne.Yd("@firebase/app"),Yt="[DEFAULT]",ot={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ct=new Map,Pt=new Map;function Jt(Bt,tt){try{Bt.container.addComponent(tt)}catch(bn){oe.debug(`Component ${tt.name} failed to register with FirebaseApp ${Bt.name}`,bn)}}function Ft(Bt,tt){Bt.container.addOrOverwriteComponent(tt)}function rn(Bt){const tt=Bt.name;if(Pt.has(tt))return oe.debug(`There were multiple attempts to register component ${tt}.`),!1;Pt.set(tt,Bt);for(const bn of ct.values())Jt(bn,Bt);return!0}function wt(Bt,tt){return Bt.container.getProvider(tt)}function ht(Bt,tt,bn=Yt){wt(Bt,tt).clearInstance(bn)}function jt(){Pt.clear()}const Fn=new Oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class un{constructor(tt,bn,Bn){this._isDeleted=!1,this._options=Object.assign({},tt),this._config=Object.assign({},bn),this._name=bn.name,this._automaticDataCollectionEnabled=bn.automaticDataCollectionEnabled,this._container=Bn,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this.checkDestroyed(),this._automaticDataCollectionEnabled=tt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(tt){this._isDeleted=tt}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}const ir="9.1.2";function yr(Bt,tt={}){"object"!=typeof tt&&(tt={name:tt});const bn=Object.assign({name:Yt,automaticDataCollectionEnabled:!1},tt),Bn=bn.name;if("string"!=typeof Bn||!Bn)throw Fn.create("bad-app-name",{appName:String(Bn)});const Mn=ct.get(Bn);if(Mn){if((0,Oe.vZ)(Bt,Mn.options)&&(0,Oe.vZ)(bn,Mn.config))return Mn;throw Fn.create("duplicate-app",{appName:Bn})}const wn=new j.H0(Bn);for(const St of Pt.values())wn.addComponent(St);const xt=new un(Bt,bn,wn);return ct.set(Bn,xt),xt}function Dn(Bt=Yt){const tt=ct.get(Bt);if(!tt)throw Fn.create("no-app",{appName:Bt});return tt}function Tn(){return Array.from(ct.values())}function Sn(Bt){return hn.apply(this,arguments)}function hn(){return(hn=(0,w.Z)(function*(Bt){const tt=Bt.name;ct.has(tt)&&(ct.delete(tt),yield Promise.all(Bt.container.getProviders().map(bn=>bn.delete())),Bt.isDeleted=!0)})).apply(this,arguments)}function Hn(Bt,tt,bn){var Bn;let Mn=null!==(Bn=ot[Bt])&&void 0!==Bn?Bn:Bt;bn&&(Mn+=`-${bn}`);const wn=Mn.match(/\s|\//),xt=tt.match(/\s|\//);if(wn||xt){const St=[`Unable to register library "${Mn}" with version "${tt}":`];return wn&&St.push(`library name "${Mn}" contains illegal characters (whitespace or "/")`),wn&&xt&&St.push("and"),xt&&St.push(`version name "${tt}" contains illegal characters (whitespace or "/")`),void oe.warn(St.join(" "))}rn(new j.wA(`${Mn}-version`,()=>({library:Mn,version:tt}),"VERSION"))}function kt(Bt,tt){if(null!==Bt&&"function"!=typeof Bt)throw Fn.create("invalid-log-argument");(0,ne.Am)(Bt,tt)}function An(Bt){(0,ne.Ub)(Bt)}rn(new j.wA("platform-logger",tt=>new Te(tt),"PRIVATE")),Hn(Fe,"0.7.3",undefined),Hn("fire-js","")},6034:(bt,Ge,G)=>{"use strict";G.d(Ge,{wA:()=>ne,H0:()=>ge});var w=G(4762),j=G(3854),ne=function(){function oe(ee,te,me){this.name=ee,this.instanceFactory=te,this.type=me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return oe.prototype.setInstantiationMode=function(ee){return this.instantiationMode=ee,this},oe.prototype.setMultipleInstances=function(ee){return this.multipleInstances=ee,this},oe.prototype.setServiceProps=function(ee){return this.serviceProps=ee,this},oe.prototype.setInstanceCreatedCallback=function(ee){return this.onInstanceCreated=ee,this},oe}(),Oe="[DEFAULT]",Te=function(){function oe(ee,te){this.name=ee,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return oe.prototype.get=function(ee){var te=this.normalizeInstanceIdentifier(ee);if(!this.instancesDeferred.has(te)){var me=new j.BH;if(this.instancesDeferred.set(te,me),this.isInitialized(te)||this.shouldAutoInitialize())try{var ve=this.getOrInitializeService({instanceIdentifier:te});ve&&me.resolve(ve)}catch(be){}}return this.instancesDeferred.get(te).promise},oe.prototype.getImmediate=function(ee){var te,me=this.normalizeInstanceIdentifier(null==ee?void 0:ee.identifier),ve=null!==(te=null==ee?void 0:ee.optional)&&void 0!==te&&te;if(!this.isInitialized(me)&&!this.shouldAutoInitialize()){if(ve)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:me})}catch(be){if(ve)return null;throw be}},oe.prototype.getComponent=function(){return this.component},oe.prototype.setComponent=function(ee){var te,me;if(ee.name!==this.name)throw Error("Mismatching Component "+ee.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=ee,this.shouldAutoInitialize()){if(function(oe){return"EAGER"===oe.instantiationMode}(ee))try{this.getOrInitializeService({instanceIdentifier:Oe})}catch(Je){}try{for(var ve=(0,w.XA)(this.instancesDeferred.entries()),be=ve.next();!be.done;be=ve.next()){var Ue=(0,w.CR)(be.value,2),Ae=Ue[1],it=this.normalizeInstanceIdentifier(Ue[0]);try{var Qe=this.getOrInitializeService({instanceIdentifier:it});Ae.resolve(Qe)}catch(Je){}}}catch(Je){te={error:Je}}finally{try{be&&!be.done&&(me=ve.return)&&me.call(ve)}finally{if(te)throw te.error}}}},oe.prototype.clearInstance=function(ee){void 0===ee&&(ee=Oe),this.instancesDeferred.delete(ee),this.instancesOptions.delete(ee),this.instances.delete(ee)},oe.prototype.delete=function(){return(0,w.mG)(this,void 0,void 0,function(){var ee;return(0,w.Jh)(this,function(te){switch(te.label){case 0:return ee=Array.from(this.instances.values()),[4,Promise.all((0,w.ev)((0,w.ev)([],(0,w.CR)(ee.filter(function(me){return"INTERNAL"in me}).map(function(me){return me.INTERNAL.delete()}))),(0,w.CR)(ee.filter(function(me){return"_delete"in me}).map(function(me){return me._delete()}))))];case 1:return te.sent(),[2]}})})},oe.prototype.isComponentSet=function(){return null!=this.component},oe.prototype.isInitialized=function(ee){return void 0===ee&&(ee=Oe),this.instances.has(ee)},oe.prototype.getOptions=function(ee){return void 0===ee&&(ee=Oe),this.instancesOptions.get(ee)||{}},oe.prototype.initialize=function(ee){var te,me;void 0===ee&&(ee={});var ve=ee.options,be=void 0===ve?{}:ve,Ue=this.normalizeInstanceIdentifier(ee.instanceIdentifier);if(this.isInitialized(Ue))throw Error(this.name+"("+Ue+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Se=this.getOrInitializeService({instanceIdentifier:Ue,options:be});try{for(var Ae=(0,w.XA)(this.instancesDeferred.entries()),it=Ae.next();!it.done;it=Ae.next()){var Qe=(0,w.CR)(it.value,2),st=Qe[1];Ue===this.normalizeInstanceIdentifier(Qe[0])&&st.resolve(Se)}}catch(ut){te={error:ut}}finally{try{it&&!it.done&&(me=Ae.return)&&me.call(Ae)}finally{if(te)throw te.error}}return Se},oe.prototype.onInit=function(ee,te){var me,ve=this.normalizeInstanceIdentifier(te),be=null!==(me=this.onInitCallbacks.get(ve))&&void 0!==me?me:new Set;be.add(ee),this.onInitCallbacks.set(ve,be);var Ue=this.instances.get(ve);return Ue&&ee(Ue,ve),function(){be.delete(ee)}},oe.prototype.invokeOnInitCallbacks=function(ee,te){var me,ve,be=this.onInitCallbacks.get(te);if(be)try{for(var Ue=(0,w.XA)(be),Se=Ue.next();!Se.done;Se=Ue.next()){var Ae=Se.value;try{Ae(ee,te)}catch(it){}}}catch(it){me={error:it}}finally{try{Se&&!Se.done&&(ve=Ue.return)&&ve.call(Ue)}finally{if(me)throw me.error}}},oe.prototype.getOrInitializeService=function(ee){var te=ee.instanceIdentifier,me=ee.options,ve=void 0===me?{}:me,be=this.instances.get(te);if(!be&&this.component&&(be=this.component.instanceFactory(this.container,{instanceIdentifier:he(te),options:ve}),this.instances.set(te,be),this.instancesOptions.set(te,ve),this.invokeOnInitCallbacks(be,te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,te,be)}catch(Ue){}return be||null},oe.prototype.normalizeInstanceIdentifier=function(ee){return void 0===ee&&(ee=Oe),this.component?this.component.multipleInstances?ee:Oe:ee},oe.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},oe}();function he(oe){return oe===Oe?void 0:oe}var ge=function(){function oe(ee){this.name=ee,this.providers=new Map}return oe.prototype.addComponent=function(ee){var te=this.getProvider(ee.name);if(te.isComponentSet())throw new Error("Component "+ee.name+" has already been registered with "+this.name);te.setComponent(ee)},oe.prototype.addOrOverwriteComponent=function(ee){this.getProvider(ee.name).isComponentSet()&&this.providers.delete(ee.name),this.addComponent(ee)},oe.prototype.getProvider=function(ee){if(this.providers.has(ee))return this.providers.get(ee);var te=new Te(ee,this);return this.providers.set(ee,te),te},oe.prototype.getProviders=function(){return Array.from(this.providers.values())},oe}()},5601:(bt,Ge,G)=>{"use strict";G.d(Ge,{in:()=>j,Yd:()=>Fe,Ub:()=>ge,Am:()=>oe});const w=[];var j=(()=>{return(ee=j||(j={}))[ee.DEBUG=0]="DEBUG",ee[ee.VERBOSE=1]="VERBOSE",ee[ee.INFO=2]="INFO",ee[ee.WARN=3]="WARN",ee[ee.ERROR=4]="ERROR",ee[ee.SILENT=5]="SILENT",j;var ee})();const ne={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},Oe=j.INFO,Te={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},he=(ee,te,...me)=>{if(te<ee.logLevel)return;const ve=(new Date).toISOString(),be=Te[te];if(!be)throw new Error(`Attempted to log a message with an invalid logType (value: ${te})`);console[be](`[${ve}]  ${ee.name}:`,...me)};class Fe{constructor(te){this.name=te,this._logLevel=Oe,this._logHandler=he,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(te){if(!(te in j))throw new TypeError(`Invalid value "${te}" assigned to \`logLevel\``);this._logLevel=te}setLogLevel(te){this._logLevel="string"==typeof te?ne[te]:te}get logHandler(){return this._logHandler}set logHandler(te){if("function"!=typeof te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=te}get userLogHandler(){return this._userLogHandler}set userLogHandler(te){this._userLogHandler=te}debug(...te){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...te),this._logHandler(this,j.DEBUG,...te)}log(...te){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...te),this._logHandler(this,j.VERBOSE,...te)}info(...te){this._userLogHandler&&this._userLogHandler(this,j.INFO,...te),this._logHandler(this,j.INFO,...te)}warn(...te){this._userLogHandler&&this._userLogHandler(this,j.WARN,...te),this._logHandler(this,j.WARN,...te)}error(...te){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...te),this._logHandler(this,j.ERROR,...te)}}function ge(ee){w.forEach(te=>{te.setLogLevel(ee)})}function oe(ee,te){for(const me of w){let ve=null;te&&te.level&&(ve=ne[te.level]),me.userLogHandler=null===ee?null:(be,Ue,...Se)=>{const Ae=Se.map(it=>{if(null==it)return null;if("string"==typeof it)return it;if("number"==typeof it||"boolean"==typeof it)return it.toString();if(it instanceof Error)return it.message;try{return JSON.stringify(it)}catch(Qe){return null}}).filter(it=>it).join(" ");Ue>=(null!=ve?ve:be.logLevel)&&ee({level:j[Ue].toLowerCase(),message:Ae,args:Se,type:be.name})}}}},3854:(bt,Ge,G)=>{"use strict";G.d(Ge,{BH:()=>ve,LL:()=>Ce,ZR:()=>ye,tV:()=>oe,r3:()=>wt,Sg:()=>be,ne:()=>Sn,vZ:()=>Fn,ZB:()=>te,pd:()=>Dn,m9:()=>Vt,z$:()=>Ue,jU:()=>it,ru:()=>Qe,d:()=>st,xb:()=>jt,w1:()=>se,hl:()=>Ve,uI:()=>Se,UG:()=>Ae,b$:()=>Je,G6:()=>Zt,Mn:()=>ut,xO:()=>ir,zd:()=>yr});const Oe=function(de){const ce=[];let ue=0;for(let ze=0;ze<de.length;ze++){let Pe=de.charCodeAt(ze);Pe<128?ce[ue++]=Pe:Pe<2048?(ce[ue++]=Pe>>6|192,ce[ue++]=63&Pe|128):55296==(64512&Pe)&&ze+1<de.length&&56320==(64512&de.charCodeAt(ze+1))?(Pe=65536+((1023&Pe)<<10)+(1023&de.charCodeAt(++ze)),ce[ue++]=Pe>>18|240,ce[ue++]=Pe>>12&63|128,ce[ue++]=Pe>>6&63|128,ce[ue++]=63&Pe|128):(ce[ue++]=Pe>>12|224,ce[ue++]=Pe>>6&63|128,ce[ue++]=63&Pe|128)}return ce},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(de,ce){if(!Array.isArray(de))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ue=ce?this.byteToCharMapWebSafe_:this.byteToCharMap_,ze=[];for(let Pe=0;Pe<de.length;Pe+=3){const Ct=de[Pe],vt=Pe+1<de.length,nn=vt?de[Pe+1]:0,Ln=Pe+2<de.length,Xt=Ln?de[Pe+2]:0;let Qt=(15&nn)<<2|Xt>>6,Vn=63&Xt;Ln||(Vn=64,vt||(Qt=64)),ze.push(ue[Ct>>2],ue[(3&Ct)<<4|nn>>4],ue[Qt],ue[Vn])}return ze.join("")},encodeString(de,ce){return this.HAS_NATIVE_SUPPORT&&!ce?btoa(de):this.encodeByteArray(Oe(de),ce)},decodeString(de,ce){return this.HAS_NATIVE_SUPPORT&&!ce?atob(de):function(de){const ce=[];let ue=0,ze=0;for(;ue<de.length;){const Pe=de[ue++];if(Pe<128)ce[ze++]=String.fromCharCode(Pe);else if(Pe>191&&Pe<224){const Ct=de[ue++];ce[ze++]=String.fromCharCode((31&Pe)<<6|63&Ct)}else if(Pe>239&&Pe<365){const Ln=((7&Pe)<<18|(63&de[ue++])<<12|(63&de[ue++])<<6|63&de[ue++])-65536;ce[ze++]=String.fromCharCode(55296+(Ln>>10)),ce[ze++]=String.fromCharCode(56320+(1023&Ln))}else{const Ct=de[ue++],vt=de[ue++];ce[ze++]=String.fromCharCode((15&Pe)<<12|(63&Ct)<<6|63&vt)}}return ce.join("")}(this.decodeStringToByteArray(de,ce))},decodeStringToByteArray(de,ce){this.init_();const ue=ce?this.charToByteMapWebSafe_:this.charToByteMap_,ze=[];for(let Pe=0;Pe<de.length;){const Ct=ue[de.charAt(Pe++)],nn=Pe<de.length?ue[de.charAt(Pe)]:0;++Pe;const Xt=Pe<de.length?ue[de.charAt(Pe)]:64;++Pe;const fn=Pe<de.length?ue[de.charAt(Pe)]:64;if(++Pe,null==Ct||null==nn||null==Xt||null==fn)throw Error();ze.push(Ct<<2|nn>>4),64!==Xt&&(ze.push(nn<<4&240|Xt>>2),64!==fn&&ze.push(Xt<<6&192|fn))}return ze},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let de=0;de<this.ENCODED_VALS.length;de++)this.byteToCharMap_[de]=this.ENCODED_VALS.charAt(de),this.charToByteMap_[this.byteToCharMap_[de]]=de,this.byteToCharMapWebSafe_[de]=this.ENCODED_VALS_WEBSAFE.charAt(de),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[de]]=de,de>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(de)]=de,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(de)]=de)}}},ge=function(de){return function(de){const ce=Oe(de);return he.encodeByteArray(ce,!0)}(de).replace(/\./g,"")},oe=function(de){try{return he.decodeString(de,!0)}catch(ce){console.error("base64Decode failed: ",ce)}return null};function te(de,ce){if(!(ce instanceof Object))return ce;switch(ce.constructor){case Date:return new Date(ce.getTime());case Object:void 0===de&&(de={});break;case Array:de=[];break;default:return ce}for(const ue in ce)!ce.hasOwnProperty(ue)||!me(ue)||(de[ue]=te(de[ue],ce[ue]));return de}function me(de){return"__proto__"!==de}class ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ce,ue)=>{this.resolve=ce,this.reject=ue})}wrapCallback(ce){return(ue,ze)=>{ue?this.reject(ue):this.resolve(ze),"function"==typeof ce&&(this.promise.catch(()=>{}),1===ce.length?ce(ue):ce(ue,ze))}}}function be(de,ce){if(de.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ze=ce||"demo-project",Pe=de.iat||0,Ct=de.sub||de.user_id;if(!Ct)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${ze}`,aud:ze,iat:Pe,exp:Pe+3600,auth_time:Pe,sub:Ct,user_id:Ct,firebase:{sign_in_provider:"custom",identities:{}}},de);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(vt)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function Ae(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(de){return!1}}function it(){return"object"==typeof self&&self.self===self}function Qe(){const de="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof de&&void 0!==de.id}function Je(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function st(){return Ue().indexOf("Electron/")>=0}function se(){const de=Ue();return de.indexOf("MSIE ")>=0||de.indexOf("Trident/")>=0}function ut(){return Ue().indexOf("MSAppHost/")>=0}function Zt(){return!Ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ve(){return"object"==typeof indexedDB}class ye extends Error{constructor(ce,ue,ze){super(ue),this.code=ce,this.customData=ze,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ce.prototype.create)}}class Ce{constructor(ce,ue,ze){this.service=ce,this.serviceName=ue,this.errors=ze}create(ce,...ue){const ze=ue[0]||{},Pe=`${this.service}/${ce}`,Ct=this.errors[ce],vt=Ct?function(de,ce){return de.replace(Et,(ue,ze)=>{const Pe=ce[ze];return null!=Pe?String(Pe):`<${ze}?>`})}(Ct,ze):"Error";return new ye(Pe,`${this.serviceName}: ${vt} (${Pe}).`,ze)}}const Et=/\{\$([^}]+)}/g;function wt(de,ce){return Object.prototype.hasOwnProperty.call(de,ce)}function jt(de){for(const ce in de)if(Object.prototype.hasOwnProperty.call(de,ce))return!1;return!0}function Fn(de,ce){if(de===ce)return!0;const ue=Object.keys(de),ze=Object.keys(ce);for(const Pe of ue){if(!ze.includes(Pe))return!1;const Ct=de[Pe],vt=ce[Pe];if(un(Ct)&&un(vt)){if(!Fn(Ct,vt))return!1}else if(Ct!==vt)return!1}for(const Pe of ze)if(!ue.includes(Pe))return!1;return!0}function un(de){return null!==de&&"object"==typeof de}function ir(de){const ce=[];for(const[ue,ze]of Object.entries(de))Array.isArray(ze)?ze.forEach(Pe=>{ce.push(encodeURIComponent(ue)+"="+encodeURIComponent(Pe))}):ce.push(encodeURIComponent(ue)+"="+encodeURIComponent(ze));return ce.length?"&"+ce.join("&"):""}function yr(de){const ce={};return de.replace(/^\?/,"").split("&").forEach(ze=>{if(ze){const[Pe,Ct]=ze.split("=");ce[decodeURIComponent(Pe)]=decodeURIComponent(Ct)}}),ce}function Dn(de){const ce=de.indexOf("?");if(!ce)return"";const ue=de.indexOf("#",ce);return de.substring(ce,ue>0?ue:void 0)}function Sn(de,ce){const ue=new hn(de,ce);return ue.subscribe.bind(ue)}class hn{constructor(ce,ue){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ue,this.task.then(()=>{ce(this)}).catch(ze=>{this.error(ze)})}next(ce){this.forEachObserver(ue=>{ue.next(ce)})}error(ce){this.forEachObserver(ue=>{ue.error(ce)}),this.close(ce)}complete(){this.forEachObserver(ce=>{ce.complete()}),this.close()}subscribe(ce,ue,ze){let Pe;if(void 0===ce&&void 0===ue&&void 0===ze)throw new Error("Missing Observer.");Pe=function(de,ce){if("object"!=typeof de||null===de)return!1;for(const ue of["next","error","complete"])if(ue in de&&"function"==typeof de[ue])return!0;return!1}(ce)?ce:{next:ce,error:ue,complete:ze},void 0===Pe.next&&(Pe.next=An),void 0===Pe.error&&(Pe.error=An),void 0===Pe.complete&&(Pe.complete=An);const Ct=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Pe.error(this.finalError):Pe.complete()}catch(vt){}}),this.observers.push(Pe),Ct}unsubscribeOne(ce){void 0===this.observers||void 0===this.observers[ce]||(delete this.observers[ce],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ce){if(!this.finalized)for(let ue=0;ue<this.observers.length;ue++)this.sendOne(ue,ce)}sendOne(ce,ue){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ce])try{ue(this.observers[ce])}catch(ze){"undefined"!=typeof console&&console.error&&console.error(ze)}})}close(ce){this.finalized||(this.finalized=!0,void 0!==ce&&(this.finalError=ce),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function An(){}function Vt(de){return de&&de._delegate?de._delegate:de}},7841:(bt,Ge,G)=>{"use strict";G.d(Ge,{Z:()=>w.Z});var w=G(4486);w.Z.registerVersion("firebase","9.1.2","app-compat")},5841:(bt,Ge,G)=>{"use strict";G.r(Ge);var w=G(8239),j=G(4486),ne=G(3854),Oe=G(5452),Te=G(4762),he=G(5601),Fe=G(6034);const Ue=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Se=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ae=new ne.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qe=new he.Yd("@firebase/auth");function Je(v,...f){Qe.logLevel<=he.in.ERROR&&Qe.error(`Auth (${Oe.SDK_VERSION}): ${v}`,...f)}function st(v,...f){throw Zt(v,...f)}function se(v,...f){return Zt(v,...f)}function ut(v,f,g){const b=Object.assign(Object.assign({},Se()),{[f]:g});return new ne.LL("auth","Firebase",b).create(f,{appName:v.name})}function Gt(v,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&st(v,"argument-error"),ut(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zt(v,...f){if("string"!=typeof v){const g=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=v.name),v._errorFactory.create(g,...b)}return Ae.create(v,...f)}function Ve(v,f,...g){if(!v)throw Zt(f,...g)}function Ne(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Je(f),new Error(f)}function Le(v,f){v||Ne(f)}const fe=new Map;function Re(v){Le(v instanceof Function,"Expected a class definition");let f=fe.get(v);return f?(Le(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,fe.set(v,f),f)}function Xe(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Et(){return"http:"===Yt()||"https:"===Yt()}function Yt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Pt{constructor(f,g){this.shortDelay=f,this.longDelay=g,Le(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,ne.uI)()||(0,ne.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Et()||(0,ne.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Jt(v,f){Le(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Ft{static initialize(f,g,b){this.fetchImpl=f,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ne("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ne("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ne("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},wt=new Pt(3e4,6e4);function ht(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function jt(v,f,g,b){return dn.apply(this,arguments)}function dn(){return(dn=(0,w.Z)(function*(v,f,g,b,U={}){return Fn(v,U,()=>{let Y={},Ee={};b&&("GET"===f?Ee=b:Y={body:JSON.stringify(b)});const $e=(0,ne.xO)(Object.assign({key:v.config.apiKey},Ee)).slice(1),yt=new(Ft.headers());return yt.set("Content-Type","application/json"),yt.set("X-Client-Version",v._getSdkClientVersion()),v.languageCode&&yt.set("X-Firebase-Locale",v.languageCode),Ft.fetch()(Dn(v,v.config.apiHost,g,$e),Object.assign({method:f,headers:yt,referrerPolicy:"no-referrer"},Y))})})).apply(this,arguments)}function Fn(v,f,g){return un.apply(this,arguments)}function un(){return(un=(0,w.Z)(function*(v,f,g){v._canInitEmulator=!1;const b=Object.assign(Object.assign({},rn),f);try{const U=new Tn(v),Y=yield Promise.race([g(),U.promise]);U.clearNetworkTimeout();const Ee=yield Y.json();if("needConfirmation"in Ee)throw Sn(v,"account-exists-with-different-credential",Ee);if(Y.ok&&!("errorMessage"in Ee))return Ee;{const $e=Y.ok?Ee.errorMessage:Ee.error.message,[yt,Mt]=$e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===yt)throw Sn(v,"credential-already-in-use",Ee);if("EMAIL_EXISTS"===yt)throw Sn(v,"email-already-in-use",Ee);const en=b[yt]||yt.toLowerCase().replace(/[_\s]+/g,"-");if(Mt)throw ut(v,en,Mt);st(v,en)}}catch(U){if(U instanceof ne.ZR)throw U;st(v,"network-request-failed")}})).apply(this,arguments)}function ir(v,f,g,b){return yr.apply(this,arguments)}function yr(){return(yr=(0,w.Z)(function*(v,f,g,b,U={}){const Y=yield jt(v,f,g,b,U);return"mfaPendingCredential"in Y&&st(v,"multi-factor-auth-required",{serverResponse:Y}),Y})).apply(this,arguments)}function Dn(v,f,g,b){const U=`${f}${g}?${b}`;return v.config.emulator?Jt(v.config,U):`${v.config.apiScheme}://${U}`}class Tn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(se(this.auth,"timeout")),wt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sn(v,f,g){const b={appName:v.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const U=se(v,f,b);return U.customData._tokenResponse=g,U}function Hn(){return(Hn=(0,w.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function kt(v,f){return An.apply(this,arguments)}function An(){return(An=(0,w.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ir(v,f){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,w.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function tt(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Mn(){return(Mn=(0,w.Z)(function*(v,f=!1){const g=(0,ne.m9)(v),b=yield g.getIdToken(f),U=xt(b);Ve(U&&U.exp&&U.auth_time&&U.iat,g.auth,"internal-error");const Y="object"==typeof U.firebase?U.firebase:void 0,Ee=null==Y?void 0:Y.sign_in_provider;return{claims:U,token:b,authTime:tt(wn(U.auth_time)),issuedAtTime:tt(wn(U.iat)),expirationTime:tt(wn(U.exp)),signInProvider:Ee||null,signInSecondFactor:(null==Y?void 0:Y.sign_in_second_factor)||null}})).apply(this,arguments)}function wn(v){return 1e3*Number(v)}function xt(v){const[f,g,b]=v.split(".");if(void 0===f||void 0===g||void 0===b)return Je("JWT malformed, contained fewer than 3 sections"),null;try{const U=(0,ne.tV)(g);return U?JSON.parse(U):(Je("Failed to decode base64 JWT payload"),null)}catch(U){return Je("Caught error parsing JWT payload as JSON",U),null}}function Gn(v,f){return _s.apply(this,arguments)}function _s(){return(_s=(0,w.Z)(function*(v,f,g=!1){if(g)return f;try{return yield f}catch(b){throw b instanceof ne.ZR&&es(b)&&v.auth.currentUser===v&&(yield v.auth.signOut()),b}})).apply(this,arguments)}function es({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Qn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const U=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,U)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,w.Z)(function*(){yield g.iteration()}),b)}iteration(){var f=this;return(0,w.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class Or{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=tt(this.lastLoginAt),this.creationTime=tt(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vt(v){return de.apply(this,arguments)}function de(){return(de=(0,w.Z)(function*(v){var f;const g=v.auth,b=yield v.getIdToken(),U=yield Gn(v,Ir(g,{idToken:b}));Ve(null==U?void 0:U.users.length,g,"internal-error");const Y=U.users[0];v._notifyReloadListener(Y);const Ee=(null===(f=Y.providerUserInfo)||void 0===f?void 0:f.length)?Pe(Y.providerUserInfo):[],$e=ze(v.providerData,Ee),en=!!v.isAnonymous&&!(v.email&&Y.passwordHash||(null==$e?void 0:$e.length)),Kt={uid:Y.localId,displayName:Y.displayName||null,photoURL:Y.photoUrl||null,email:Y.email||null,emailVerified:Y.emailVerified||!1,phoneNumber:Y.phoneNumber||null,tenantId:Y.tenantId||null,providerData:$e,metadata:new Or(Y.createdAt,Y.lastLoginAt),isAnonymous:en};Object.assign(v,Kt)})).apply(this,arguments)}function ue(){return(ue=(0,w.Z)(function*(v){const f=(0,ne.m9)(v);yield Vt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ze(v,f){return[...v.filter(b=>!f.some(U=>U.providerId===b.providerId)),...f]}function Pe(v){return v.map(f=>{var{providerId:g}=f,b=(0,Te._T)(f,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function vt(){return(vt=(0,w.Z)(function*(v,f){const g=yield Fn(v,{},()=>{const b=(0,ne.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:U,apiKey:Y}=v.config,Ee=Dn(v,U,"/v1/token",`key=${Y}`);return Ft.fetch()(Ee,{method:"POST",headers:{"X-Client-Version":v._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:b})});return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class nn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Ve(f.idToken,"internal-error"),Ve(void 0!==f.idToken,"internal-error"),Ve(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(v){const f=xt(v);return Ve(f,"internal-error"),Ve(void 0!==f.exp,"internal-error"),Ve(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var b=this;return(0,w.Z)(function*(){return Ve(!b.accessToken||b.refreshToken,f,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(f,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var b=this;return(0,w.Z)(function*(){const{accessToken:U,refreshToken:Y,expiresIn:Ee}=yield function(v,f){return vt.apply(this,arguments)}(f,g);b.updateTokensAndExpiration(U,Y,Number(Ee))})()}updateTokensAndExpiration(f,g,b){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,g){const{refreshToken:b,accessToken:U,expirationTime:Y}=g,Ee=new nn;return b&&(Ve("string"==typeof b,"internal-error",{appName:f}),Ee.refreshToken=b),U&&(Ve("string"==typeof U,"internal-error",{appName:f}),Ee.accessToken=U),Y&&(Ve("number"==typeof Y,"internal-error",{appName:f}),Ee.expirationTime=Y),Ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new nn,this.toJSON())}_performRefresh(){return Ne("not implemented")}}function Ln(v,f){Ve("string"==typeof v||void 0===v,"internal-error",{appName:f})}class Xt{constructor(f){var{uid:g,auth:b,stsTokenManager:U}=f,Y=(0,Te._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Qn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=U,this.accessToken=U.accessToken,this.displayName=Y.displayName||null,this.email=Y.email||null,this.emailVerified=Y.emailVerified||!1,this.phoneNumber=Y.phoneNumber||null,this.photoURL=Y.photoURL||null,this.isAnonymous=Y.isAnonymous||!1,this.tenantId=Y.tenantId||null,this.metadata=new Or(Y.createdAt||void 0,Y.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,w.Z)(function*(){const b=yield Gn(g,g.stsTokenManager.getToken(g.auth,f));return Ve(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(f){return function(v){return Mn.apply(this,arguments)}(this,f)}reload(){return function(v){return ue.apply(this,arguments)}(this)}_assign(f){this!==f&&(Ve(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Xt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var b=this;return(0,w.Z)(function*(){let U=!1;f.idToken&&f.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(f),U=!0),g&&(yield Vt(b)),yield b.auth._persistUserIfCurrent(b),U&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var f=this;return(0,w.Z)(function*(){const g=yield f.getIdToken();return yield Gn(f,function(v,f){return Hn.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var b,U,Y,Ee,$e,yt,Mt,en;const Kt=null!==(b=g.displayName)&&void 0!==b?b:void 0,yi=null!==(U=g.email)&&void 0!==U?U:void 0,qe=null!==(Y=g.phoneNumber)&&void 0!==Y?Y:void 0,Li=null!==(Ee=g.photoURL)&&void 0!==Ee?Ee:void 0,go=null!==($e=g.tenantId)&&void 0!==$e?$e:void 0,wd=null!==(yt=g._redirectEventId)&&void 0!==yt?yt:void 0,al=null!==(Mt=g.createdAt)&&void 0!==Mt?Mt:void 0,xa=null!==(en=g.lastLoginAt)&&void 0!==en?en:void 0,{uid:Eh,emailVerified:Na,isAnonymous:Cd,providerData:Ll,stsTokenManager:bd}=g;Ve(Eh&&bd,f,"internal-error");const xi=nn.fromJSON(this.name,bd);Ve("string"==typeof Eh,f,"internal-error"),Ln(Kt,f.name),Ln(yi,f.name),Ve("boolean"==typeof Na,f,"internal-error"),Ve("boolean"==typeof Cd,f,"internal-error"),Ln(qe,f.name),Ln(Li,f.name),Ln(go,f.name),Ln(wd,f.name),Ln(al,f.name),Ln(xa,f.name);const Ks=new Xt({uid:Eh,auth:f,email:yi,emailVerified:Na,displayName:Kt,isAnonymous:Cd,photoURL:Li,phoneNumber:qe,tenantId:go,stsTokenManager:xi,createdAt:al,lastLoginAt:xa});return Ll&&Array.isArray(Ll)&&(Ks.providerData=Ll.map(wh=>Object.assign({},wh))),wd&&(Ks._redirectEventId=wd),Ks}static _fromIdTokenResponse(f,g,b=!1){return(0,w.Z)(function*(){const U=new nn;U.updateFromServerResponse(g);const Y=new Xt({uid:g.localId,auth:f,stsTokenManager:U,isAnonymous:b});return yield Vt(Y),Y})()}}const fn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(g,b){var U=this;return(0,w.Z)(function*(){U.storage[g]=b})()}_get(g){var b=this;return(0,w.Z)(function*(){const U=b.storage[g];return void 0===U?null:U})()}_remove(g){var b=this;return(0,w.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return v.type="NONE",v})();function Qt(v,f,g){return`firebase:${v}:${f}:${g}`}class Vn{constructor(f,g,b){this.persistence=f,this.auth=g,this.userKey=b;const{config:U,name:Y}=this.auth;this.fullUserKey=Qt(this.userKey,U.apiKey,Y),this.fullPersistenceKey=Qt("persistence",U.apiKey,Y),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,w.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Xt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,w.Z)(function*(){if(g.persistence===f)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,b="authUser"){return(0,w.Z)(function*(){if(!g.length)return new Vn(Re(fn),f,b);const U=(yield Promise.all(g.map(function(){var Mt=(0,w.Z)(function*(en){if(yield en._isAvailable())return en});return function(en){return Mt.apply(this,arguments)}}()))).filter(Mt=>Mt);let Y=U[0]||Re(fn);const Ee=Qt(b,f.config.apiKey,f.name);let $e=null;for(const Mt of g)try{const en=yield Mt._get(Ee);if(en){const Kt=Xt._fromJSON(f,en);Mt!==Y&&($e=Kt),Y=Mt;break}}catch(en){}const yt=U.filter(Mt=>Mt._shouldAllowMigration);return Y._shouldAllowMigration&&yt.length?(Y=yt[0],$e&&(yield Y._set(Ee,$e.toJSON())),yield Promise.all(g.map(function(){var Mt=(0,w.Z)(function*(en){if(en!==Y)try{yield en._remove(Ee)}catch(Kt){}});return function(en){return Mt.apply(this,arguments)}}())),new Vn(Y,f,b)):new Vn(Y,f,b)})()}}function Ls(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ns(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(vs(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ei(f))return"Blackberry";if(lr(f))return"Webos";if(Es(f))return"Safari";if((f.includes("chrome/")||ts(f))&&!f.includes("edge/"))return"Chrome";if(ws(f))return"Android";{const b=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function vs(v=(0,ne.z$)()){return/firefox\//i.test(v)}function Es(v=(0,ne.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ts(v=(0,ne.z$)()){return/crios\//i.test(v)}function ns(v=(0,ne.z$)()){return/iemobile/i.test(v)}function ws(v=(0,ne.z$)()){return/android/i.test(v)}function Ei(v=(0,ne.z$)()){return/blackberry/i.test(v)}function lr(v=(0,ne.z$)()){return/webos/i.test(v)}function cr(v=(0,ne.z$)()){return/iphone|ipad|ipod/i.test(v)}function Dr(v=(0,ne.z$)()){return cr(v)||ws(v)||lr(v)||Ei(v)||/windows phone/i.test(v)||ns(v)}function Kn(v,f=[]){let g;switch(v){case"Browser":g=Ls((0,ne.z$)());break;case"Worker":g=`${Ls((0,ne.z$)())}-${v}`;break;default:g=v}const b=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${Oe.SDK_VERSION}/${b}`}class to{constructor(f,g){this.app=f,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dt(this),this.idTokenSubscription=new dt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ae,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(f,g){var b=this;return g&&(this._popupRedirectResolver=Re(g)),this._initializationPromise=this.queue((0,w.Z)(function*(){var U;b._deleted||(b.persistenceManager=yield Vn.create(b,f),!b._deleted&&((null===(U=b._popupRedirectResolver)||void 0===U?void 0:U._shouldInitProactively)&&(yield b._popupRedirectResolver._initialize(b)),yield b.initializeCurrentUser(g),!b._deleted&&(b._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,w.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,w.Z)(function*(){var b;let U=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Y=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,Ee=null==U?void 0:U._redirectEventId,$e=yield g.tryRedirectSignIn(f);(!Y||Y===Ee)&&(null==$e?void 0:$e.user)&&(U=$e.user)}return U?U._redirectEventId?(Ve(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===U._redirectEventId?g.directlySetCurrentUser(U):g.reloadAndSetCurrentUserOrClear(U)):g.reloadAndSetCurrentUserOrClear(U):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,w.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(U){yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,w.Z)(function*(){try{yield Vt(f)}catch(b){if("auth/network-request-failed"!==b.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,w.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,w.Z)(function*(){const b=f?(0,ne.m9)(f):null;return b&&Ve(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,w.Z)(function*(){if(!g._deleted)return f&&Ve(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,w.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,w.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,w.Z)(function*(){yield g.assertedPersistence.setPersistence(Re(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new ne.LL("auth","Firebase",f())}onAuthStateChanged(f,g,b){return this.registerStateListener(this.authStateSubscription,f,g,b)}onIdTokenChanged(f,g,b){return this.registerStateListener(this.idTokenSubscription,f,g,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var b=this;return(0,w.Z)(function*(){const U=yield b.getOrInitRedirectPersistenceManager(g);return null===f?U.removeCurrentUser():U.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,w.Z)(function*(){if(!g.redirectPersistenceManager){const b=f&&Re(f)||g._popupRedirectResolver;Ve(b,g,"argument-error"),g.redirectPersistenceManager=yield Vn.create(g,[Re(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,w.Z)(function*(){var b,U;return g._isInitialized&&(yield g.queue((0,w.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===f?g._currentUser:(null===(U=g.redirectUser)||void 0===U?void 0:U._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,w.Z)(function*(){if(f===g.currentUser)return g.queue((0,w.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,b,U){if(this._deleted)return()=>{};const Y="function"==typeof g?g:g.next.bind(g),Ee=this._isInitialized?Promise.resolve():this._initializationPromise;return Ve(Ee,this,"internal-error"),Ee.then(()=>Y(this.currentUser)),"function"==typeof g?f.addObserver(g,b,U):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,w.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Kn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function pn(v){return(0,ne.m9)(v)}class dt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,ne.ne)(g=>this.observer=g)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wt(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Mi(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Jn{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Ne("not implemented")}_getIdTokenResponse(f){return Ne("not implemented")}_linkToIdToken(f,g){return Ne("not implemented")}_getReauthenticationResolver(f){return Ne("not implemented")}}function Pn(v,f){return $i.apply(this,arguments)}function $i(){return($i=(0,w.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:resetPassword",ht(v,f))})).apply(this,arguments)}function Vs(v,f){return zt.apply(this,arguments)}function zt(){return(zt=(0,w.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function rs(v,f){return is.apply(this,arguments)}function is(){return(is=(0,w.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:update",ht(v,f))})).apply(this,arguments)}function Gr(){return(Gr=(0,w.Z)(function*(v,f){return ir(v,"POST","/v1/accounts:signInWithPassword",ht(v,f))})).apply(this,arguments)}function or(v,f){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,w.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:sendOobCode",ht(v,f))})).apply(this,arguments)}function Oi(v,f){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,w.Z)(function*(v,f){return or(v,f)})).apply(this,arguments)}function Rn(v,f){return ss.apply(this,arguments)}function ss(){return(ss=(0,w.Z)(function*(v,f){return or(v,f)})).apply(this,arguments)}function Hi(v,f){return os.apply(this,arguments)}function os(){return(os=(0,w.Z)(function*(v,f){return or(v,f)})).apply(this,arguments)}function Wr(v,f){return _r.apply(this,arguments)}function _r(){return(_r=(0,w.Z)(function*(v,f){return or(v,f)})).apply(this,arguments)}function dr(){return(dr=(0,w.Z)(function*(v,f){return ir(v,"POST","/v1/accounts:signInWithEmailLink",ht(v,f))})).apply(this,arguments)}function jn(){return(jn=(0,w.Z)(function*(v,f){return ir(v,"POST","/v1/accounts:signInWithEmailLink",ht(v,f))})).apply(this,arguments)}class Pr extends Jn{constructor(f,g,b,U=null){super("password",b),this._email=f,this._password=g,this._tenantId=U}static _fromEmailAndPassword(f,g){return new Pr(f,g,"password")}static _fromEmailAndCode(f,g,b=null){return new Pr(f,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,w.Z)(function*(){switch(g.signInMethod){case"password":return function(v,f){return Gr.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(v,f){return dr.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:st(f,"internal-error")}})()}_linkToIdToken(f,g){var b=this;return(0,w.Z)(function*(){switch(b.signInMethod){case"password":return Vs(f,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(v,f){return jn.apply(this,arguments)}(f,{idToken:g,email:b._email,oobCode:b._password});default:st(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function on(v,f){return kr.apply(this,arguments)}function kr(){return(kr=(0,w.Z)(function*(v,f){return ir(v,"POST","/v1/accounts:signInWithIdp",ht(v,f))})).apply(this,arguments)}class hr extends Jn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new hr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):st("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:U}=g,Y=(0,Te._T)(g,["providerId","signInMethod"]);if(!b||!U)return null;const Ee=new hr(b,U);return Ee.idToken=Y.idToken||void 0,Ee.accessToken=Y.accessToken||void 0,Ee.secret=Y.secret,Ee.nonce=Y.nonce,Ee.pendingToken=Y.pendingToken||null,Ee}_getIdTokenResponse(f){return on(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,on(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,on(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,ne.xO)(g)}return f}}function Fr(v,f){return In.apply(this,arguments)}function In(){return(In=(0,w.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:sendVerificationCode",ht(v,f))})).apply(this,arguments)}function Xn(){return(Xn=(0,w.Z)(function*(v,f){return ir(v,"POST","/v1/accounts:signInWithPhoneNumber",ht(v,f))})).apply(this,arguments)}function Gi(){return(Gi=(0,w.Z)(function*(v,f){const g=yield ir(v,"POST","/v1/accounts:signInWithPhoneNumber",ht(v,f));if(g.temporaryProof)throw Sn(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const xo={USER_NOT_FOUND:"user-not-found"};function yo(){return(yo=(0,w.Z)(function*(v,f){return ir(v,"POST","/v1/accounts:signInWithPhoneNumber",ht(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),xo)})).apply(this,arguments)}class fi extends Jn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new fi({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new fi({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function(v,f){return Xn.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function(v,f){return Gi.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(v,f){return yo.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:b,verificationCode:U}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:b,code:U}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:b,phoneNumber:U,temporaryProof:Y}=f;return b||g||U||Y?new fi({verificationId:g,verificationCode:b,phoneNumber:U,temporaryProof:Y}):null}}class as{constructor(f){var g,b,U,Y,Ee,$e;const yt=(0,ne.zd)((0,ne.pd)(f)),Mt=null!==(g=yt.apiKey)&&void 0!==g?g:null,en=null!==(b=yt.oobCode)&&void 0!==b?b:null,Kt=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(U=yt.mode)&&void 0!==U?U:null);Ve(Mt&&en&&Kt,"argument-error"),this.apiKey=Mt,this.operation=Kt,this.code=en,this.continueUrl=null!==(Y=yt.continueUrl)&&void 0!==Y?Y:null,this.languageCode=null!==(Ee=yt.languageCode)&&void 0!==Ee?Ee:null,this.tenantId=null!==($e=yt.tenantId)&&void 0!==$e?$e:null}static parseLink(f){const g=function(v){const f=(0,ne.zd)((0,ne.pd)(v)).link,g=f?(0,ne.zd)((0,ne.pd)(f)).deep_link_id:null,b=(0,ne.zd)((0,ne.pd)(v)).deep_link_id;return(b?(0,ne.zd)((0,ne.pd)(b)).link:null)||b||g||f||v}(f);try{return new as(g)}catch(b){return null}}}let _o=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,b){return Pr._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const U=as.parseLink(b);return Ve(U,"argument-error"),Pr._fromEmailAndCode(g,U.code,U.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class zr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Wi extends zr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class qr extends Wi{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Ve("providerId"in g&&"signInMethod"in g,"argument-error"),hr._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Ve(f.idToken||f.accessToken,"argument-error"),hr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return qr.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return qr.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:U,pendingToken:Y,nonce:Ee,providerId:$e}=f;if(!b&&!U&&!g&&!Y||!$e)return null;try{return new qr($e)._credential({idToken:g,accessToken:b,nonce:Ee,pendingToken:Y})}catch(yt){return null}}}let ro=(()=>{class v extends Wi{constructor(){super("facebook.com")}static credential(g){return hr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(b){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),bs=(()=>{class v extends Wi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return hr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:U}=g;if(!b&&!U)return null;try{return v.credential(b,U)}catch(Y){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Kr=(()=>{class v extends Wi{constructor(){super("github.com")}static credential(g){return hr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(b){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Fi extends Jn{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return on(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,on(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,on(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:U,pendingToken:Y}=g;return b&&U&&Y&&b===U?new Fi(b,Y):null}static _create(f,g){return new Fi(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let zn=(()=>{class v extends Wi{constructor(){super("twitter.com")}static credential(g,b){return hr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:U}=g;if(!b||!U)return null;try{return v.credential(b,U)}catch(Y){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function us(v,f){return so.apply(this,arguments)}function so(){return(so=(0,w.Z)(function*(v,f){return ir(v,"POST","/v1/accounts:signUp",ht(v,f))})).apply(this,arguments)}class Sr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,b,U=!1){return(0,w.Z)(function*(){const Y=yield Xt._fromIdTokenResponse(f,b,U),Ee=oo(b);return new Sr({user:Y,providerId:Ee,_tokenResponse:b,operationType:g})})()}static _forOperation(f,g,b){return(0,w.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const U=oo(b);return new Sr({user:f,providerId:U,_tokenResponse:b,operationType:g})})()}}function oo(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function oi(){return(oi=(0,w.Z)(function*(v){var f;const g=pn(v);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new Sr({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield us(g,{returnSecureToken:!0}),U=yield Sr._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(U.user),U})).apply(this,arguments)}class zi extends ne.ZR{constructor(f,g,b,U){var Y;super(g.code,g.message),this.operationType=b,this.user=U,this.name="FirebaseError",Object.setPrototypeOf(this,zi.prototype),this.appName=f.name,this.code=g.code,this.tenantId=null!==(Y=f.tenantId)&&void 0!==Y?Y:void 0,this.serverResponse=g.customData.serverResponse}static _fromErrorAndOperation(f,g,b,U){return new zi(f,g,b,U)}}function Zr(v,f,g,b){return("reauthenticate"===f?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(Y=>{throw"auth/multi-factor-auth-required"===Y.code?zi._fromErrorAndOperation(v,Y,f,b):Y})}function Di(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function Ar(){return(Ar=(0,w.Z)(function*(v,f){const g=(0,ne.m9)(v);yield F(!0,g,f);const{providerUserInfo:b}=yield kt(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),U=Di(b||[]);return g.providerData=g.providerData.filter(Y=>U.has(Y.providerId)),U.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function L(v,f){return z.apply(this,arguments)}function z(){return(z=(0,w.Z)(function*(v,f,g=!1){const b=yield Gn(v,f._linkToIdToken(v.auth,yield v.getIdToken()),g);return Sr._forOperation(v,"link",b)})).apply(this,arguments)}function F(v,f,g){return K.apply(this,arguments)}function K(){return(K=(0,w.Z)(function*(v,f,g){yield Vt(f);const U=!1===v?"provider-already-linked":"no-such-provider";Ve(Di(f.providerData).has(g)===v,f.auth,U)})).apply(this,arguments)}function le(v,f){return ke.apply(this,arguments)}function ke(){return(ke=(0,w.Z)(function*(v,f,g=!1){const{auth:b}=v,U="reauthenticate";try{const Y=yield Gn(v,Zr(b,U,f,v),g);Ve(Y.idToken,b,"internal-error");const Ee=xt(Y.idToken);Ve(Ee,b,"internal-error");const{sub:$e}=Ee;return Ve(v.uid===$e,b,"user-mismatch"),Sr._forOperation(v,U,Y)}catch(Y){throw"auth/user-not-found"===(null==Y?void 0:Y.code)&&st(b,"user-mismatch"),Y}})).apply(this,arguments)}function rt(v,f){return P.apply(this,arguments)}function P(){return(P=(0,w.Z)(function*(v,f,g=!1){const b="signIn",U=yield Zr(v,b,f),Y=yield Sr._fromIdTokenResponse(v,b,U);return g||(yield v._updateCurrentUser(Y.user)),Y})).apply(this,arguments)}function x(v,f){return S.apply(this,arguments)}function S(){return(S=(0,w.Z)(function*(v,f){return rt(pn(v),f)})).apply(this,arguments)}function W(v,f){return De.apply(this,arguments)}function De(){return(De=(0,w.Z)(function*(v,f){const g=(0,ne.m9)(v);return yield F(!1,g,f.providerId),L(g,f)})).apply(this,arguments)}function nt(v,f){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,w.Z)(function*(v,f){return le((0,ne.m9)(v),f)})).apply(this,arguments)}function xn(v,f){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,w.Z)(function*(v,f){return ir(v,"POST","/v1/accounts:signInWithCustomToken",ht(v,f))})).apply(this,arguments)}function Nn(){return(Nn=(0,w.Z)(function*(v,f){const g=pn(v),b=yield xn(g,{token:f,returnSecureToken:!0}),U=yield Sr._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(U.user),U})).apply(this,arguments)}class pi{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Is._fromServerResponse(f,g):st(f,"internal-error")}}class Is extends pi{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Is(g)}}function gi(v,f,g){var b;Ve((null===(b=g.url)||void 0===b?void 0:b.length)>0,v,"invalid-continue-uri"),Ve(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Ve(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Ve(g.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function ai(){return(ai=(0,w.Z)(function*(v,f,g){const b=(0,ne.m9)(v),U={requestType:"PASSWORD_RESET",email:f};g&&gi(b,U,g),yield Rn(b,U)})).apply(this,arguments)}function qt(){return(qt=(0,w.Z)(function*(v,f,g){yield Pn((0,ne.m9)(v),{oobCode:f,newPassword:g})})).apply(this,arguments)}function $a(){return($a=(0,w.Z)(function*(v,f){yield rs((0,ne.m9)(v),{oobCode:f})})).apply(this,arguments)}function Gu(v,f){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,w.Z)(function*(v,f){const g=(0,ne.m9)(v),b=yield Pn(g,{oobCode:f}),U=b.requestType;switch(Ve(U,g,"internal-error"),U){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ve(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ve(b.mfaInfo,g,"internal-error");default:Ve(b.email,g,"internal-error")}let Y=null;return b.mfaInfo&&(Y=pi._fromServerResponse(pn(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:Y},operation:U}})).apply(this,arguments)}function Ha(){return(Ha=(0,w.Z)(function*(v,f){const{data:g}=yield Gu((0,ne.m9)(v),f);return g.email})).apply(this,arguments)}function Ze(){return(Ze=(0,w.Z)(function*(v,f,g){const b=pn(v),U=yield us(b,{returnSecureToken:!0,email:f,password:g}),Y=yield Sr._fromIdTokenResponse(b,"signIn",U);return yield b._updateCurrentUser(Y.user),Y})).apply(this,arguments)}function Zn(){return(Zn=(0,w.Z)(function*(v,f,g){const b=(0,ne.m9)(v),U={requestType:"EMAIL_SIGNIN",email:f};Ve(g.handleCodeInApp,b,"argument-error"),g&&gi(b,U,g),yield Hi(b,U)})).apply(this,arguments)}function qi(){return(qi=(0,w.Z)(function*(v,f,g){const b=(0,ne.m9)(v),U=_o.credentialWithLink(f,g||Xe());return Ve(U._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),x(b,U)})).apply(this,arguments)}function wu(v,f){return ls.apply(this,arguments)}function ls(){return(ls=(0,w.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:createAuthUri",ht(v,f))})).apply(this,arguments)}function Ti(){return(Ti=(0,w.Z)(function*(v,f){const b={identifier:f,continueUri:Et()?Xe():"http://localhost"},{signinMethods:U}=yield wu((0,ne.m9)(v),b);return U||[]})).apply(this,arguments)}function ko(){return(ko=(0,w.Z)(function*(v,f){const g=(0,ne.m9)(v),U={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&gi(g.auth,U,f);const{email:Y}=yield Oi(g.auth,U);Y!==v.email&&(yield v.reload())})).apply(this,arguments)}function vr(){return(vr=(0,w.Z)(function*(v,f,g){const b=(0,ne.m9)(v),Y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};g&&gi(b.auth,Y,g);const{email:Ee}=yield Wr(b.auth,Y);Ee!==v.email&&(yield v.reload())})).apply(this,arguments)}function va(v,f){return $n.apply(this,arguments)}function $n(){return($n=(0,w.Z)(function*(v,f){return jt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Wa(){return(Wa=(0,w.Z)(function*(v,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const b=(0,ne.m9)(v),Y={idToken:yield b.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Ee=yield Gn(b,va(b.auth,Y));b.displayName=Ee.displayName||null,b.photoURL=Ee.photoUrl||null;const $e=b.providerData.find(({providerId:yt})=>"password"===yt);$e&&($e.displayName=b.displayName,$e.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Ee)})).apply(this,arguments)}function zu(v,f,g){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,w.Z)(function*(v,f,g){const{auth:b}=v,Y={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(Y.email=f),g&&(Y.password=g);const Ee=yield Gn(v,Vs(b,Y));yield v._updateTokensIfNecessary(Ee,!0)})).apply(this,arguments)}class ds{constructor(f,g,b={}){this.isNewUser=f,this.providerId=g,this.profile=b}}class vo extends ds{constructor(f,g,b,U){super(f,g,b),this.username=U}}class Cu extends ds{constructor(f,g){super(f,"facebook.com",g)}}class Ds extends vo{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Lo extends ds{constructor(f,g){super(f,"google.com",g)}}class bu extends vo{constructor(f,g,b){super(f,"twitter.com",g,b)}}function za(v){const{user:f,_tokenResponse:g}=v;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(v){var f,g;if(!v)return null;const{providerId:b}=v,U=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},Y=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!b&&(null==v?void 0:v.idToken)){const Ee=null===(g=null===(f=xt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Ee)return new ds(Y,"anonymous"!==Ee&&"custom"!==Ee?Ee:null)}if(!b)return null;switch(b){case"facebook.com":return new Cu(Y,U);case"github.com":return new Ds(Y,U);case"google.com":return new Lo(Y,U);case"twitter.com":return new bu(Y,U,v.screenName||null);case"custom":case"anonymous":return new ds(Y,null);default:return new ds(Y,b,U)}}(g)}class Ss{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Ss("enroll",f)}static _fromMfaPendingCredential(f){return new Ss("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,b;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Ss._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(b=f.multiFactorSession)||void 0===b?void 0:b.idToken)return Ss._fromIdtoken(f.multiFactorSession.idToken)}return null}}class wo{constructor(f,g,b){this.session=f,this.hints=g,this.signInResolver=b}static _fromError(f,g){const b=pn(f),U=(g.serverResponse.mfaInfo||[]).map(Ee=>pi._fromServerResponse(b,Ee));Ve(g.serverResponse.mfaPendingCredential,b,"internal-error");const Y=Ss._fromMfaPendingCredential(g.serverResponse.mfaPendingCredential);return new wo(Y,U,function(){var Ee=(0,w.Z)(function*($e){const yt=yield $e._process(b,Y);delete g.serverResponse.mfaInfo,delete g.serverResponse.mfaPendingCredential;const Mt=Object.assign(Object.assign({},g.serverResponse),{idToken:yt.idToken,refreshToken:yt.refreshToken});switch(g.operationType){case"signIn":const en=yield Sr._fromIdTokenResponse(b,g.operationType,Mt);return yield b._updateCurrentUser(en.user),en;case"reauthenticate":return Ve(g.user,b,"internal-error"),Sr._forOperation(g.user,g.operationType,Mt);default:st(b,"internal-error")}});return function($e){return Ee.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,w.Z)(function*(){return g.signInResolver(f)})()}}function uo(v,f){return jt(v,"POST","/v2/accounts/mfaEnrollment:start",ht(v,f))}class Vo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>pi._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new Vo(f)}getSession(){var f=this;return(0,w.Z)(function*(){return Ss._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var b=this;return(0,w.Z)(function*(){const U=f,Y=yield b.getSession(),Ee=yield Gn(b.user,U._process(b.user.auth,Y,g));return yield b.user._updateTokensIfNecessary(Ee),b.user.reload()})()}unenroll(f){var g=this;return(0,w.Z)(function*(){const b="string"==typeof f?f:f.uid,U=yield g.user.getIdToken(),Y=yield Gn(g.user,function(v,f){return jt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",ht(v,f))}(g.user.auth,{idToken:U,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Ee})=>Ee!==b),yield g.user._updateTokensIfNecessary(Y);try{yield g.user.reload()}catch(Ee){if("auth/user-token-expired"!==Ee.code)throw Ee}})()}}const As=new WeakMap,lo="__sak";class co{constructor(f,g){this.storage=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(lo,"1"),this.storage.removeItem(lo),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}}const Gs=(()=>{class v extends co{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,ne.z$)();return Es(v)||cr(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Dr(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const U=this.storage.getItem(b),Y=this.localCache[b];U!==Y&&g(b,Y,U)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys(($e,yt,Mt)=>{this.notifyListeners($e,Mt)});const U=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const $e=this.storage.getItem(U);if(g.newValue!==$e)null!==g.newValue?this.storage.setItem(U,g.newValue):this.storage.removeItem(U);else if(this.localCache[U]===g.newValue&&!b)return}const Y=()=>{const $e=this.storage.getItem(U);!b&&this.localCache[U]===$e||this.notifyListeners(U,$e)},Ee=this.storage.getItem(U);(0,ne.w1)()&&10===document.documentMode&&Ee!==g.newValue&&g.newValue!==g.oldValue?setTimeout(Y,10):Y()}notifyListeners(g,b){this.localCache[g]=b;const U=this.listeners[g];if(U)for(const Y of Array.from(U))Y(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,U)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:U}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var U=()=>super._set,Y=this;return(0,w.Z)(function*(){yield U().call(Y,g,b),Y.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,U=this;return(0,w.Z)(function*(){const Y=yield b().call(U,g);return U.localCache[g]=JSON.stringify(Y),Y})()}_remove(g){var b=()=>super._remove,U=this;return(0,w.Z)(function*(){yield b().call(U,g),delete U.localCache[g]})()}}return v.type="LOCAL",v})(),hs=(()=>{class v extends co{constructor(){super(window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return v.type="SESSION",v})();let fo=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(Y=>Y.isListeningto(g));if(b)return b;const U=new v(g);return this.receivers.push(U),U}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,w.Z)(function*(){const U=g,{eventId:Y,eventType:Ee,data:$e}=U.data,yt=b.handlersMap[Ee];if(!(null==yt?void 0:yt.size))return;U.ports[0].postMessage({status:"ack",eventId:Y,eventType:Ee});const Mt=Array.from(yt).map(function(){var Kt=(0,w.Z)(function*(yi){return yi(U.origin,$e)});return function(yi){return Kt.apply(this,arguments)}}()),en=yield function(v){return Promise.all(v.map(function(){var f=(0,w.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return f.apply(this,arguments)}}()))}(Mt);U.ports[0].postMessage({status:"done",eventId:Y,eventType:Ee,response:en})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ja(v="",f=10){let g="";for(let b=0;b<f;b++)g+=Math.floor(10*Math.random());return v+g}class Iu{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,b=50){var U=this;return(0,w.Z)(function*(){const Y="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!Y)throw new Error("connection_unavailable");let Ee,$e;return new Promise((yt,Mt)=>{const en=Ja("",20);Y.port1.start();const Kt=setTimeout(()=>{Mt(new Error("unsupported_event"))},b);$e={messageChannel:Y,onMessage(yi){const qe=yi;if(qe.data.eventId===en)switch(qe.data.status){case"ack":clearTimeout(Kt),Ee=setTimeout(()=>{Mt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ee),yt(qe.data.response);break;default:clearTimeout(Kt),clearTimeout(Ee),Mt(new Error("invalid_response"))}}},U.handlers.add($e),Y.port1.addEventListener("message",$e.onMessage),U.target.postMessage({eventType:f,eventId:en,data:g},[Y.port2])}).finally(()=>{$e&&U.removeMessageHandler($e)})})()}}function tr(){return window}function Uo(){return void 0!==tr().WorkerGlobalScope&&"function"==typeof tr().importScripts}function Ku(){return(Ku=(0,w.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const ei="firebaseLocalStorageDb",Ki="firebaseLocalStorage",jo="fbase_key";class Xa{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function at(v,f){return v.transaction([Ki],f?"readwrite":"readonly").objectStore(Ki)}function $o(){const v=indexedDB.open(ei,1);return new Promise((f,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const b=v.result;try{b.createObjectStore(Ki,{keyPath:jo})}catch(U){g(U)}}),v.addEventListener("success",(0,w.Z)(function*(){const b=v.result;b.objectStoreNames.contains(Ki)?f(b):(b.close(),yield function(){const v=indexedDB.deleteDatabase(ei);return new Xa(v).toPromise()}(),f(yield $o()))}))})}function eu(v,f,g){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,w.Z)(function*(v,f,g){const b=at(v,!0).put({[jo]:f,value:g});return new Xa(b).toPromise()})).apply(this,arguments)}function Ws(){return(Ws=(0,w.Z)(function*(v,f){const g=at(v,!1).get(f),b=yield new Xa(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function ft(v,f){const g=at(v,!0).delete(f);return new Xa(g).toPromise()}const Ho=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,w.Z)(function*(){return g.db||(g.db=yield $o()),g.db})()}_withRetries(g){var b=this;return(0,w.Z)(function*(){let U=0;for(;;)try{const Y=yield b._openDb();return yield g(Y)}catch(Y){if(U++>3)throw Y;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,w.Z)(function*(){return Uo()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,w.Z)(function*(){g.receiver=fo._getInstance(Uo()?self:null),g.receiver._subscribe("keyChanged",function(){var b=(0,w.Z)(function*(U,Y){return{keyProcessed:(yield g._poll()).includes(Y.key)}});return function(U,Y){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,w.Z)(function*(U,Y){return["keyChanged"]});return function(U,Y){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,w.Z)(function*(){var b,U;if(g.activeServiceWorker=yield function(){return Ku.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Iu(g.activeServiceWorker);const Y=yield g.sender._send("ping",{},800);!Y||(null===(b=Y[0])||void 0===b?void 0:b.fulfilled)&&(null===(U=Y[0])||void 0===U?void 0:U.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,w.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch(U){}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const g=yield $o();return yield eu(g,lo,"1"),yield ft(g,lo),!0}catch(g){}return!1})()}_withPendingWrite(g){var b=this;return(0,w.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var U=this;return(0,w.Z)(function*(){return U._withPendingWrite((0,w.Z)(function*(){return yield U._withRetries(Y=>eu(Y,g,b)),U.localCache[g]=b,U.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,w.Z)(function*(){const U=yield b._withRetries(Y=>function(v,f){return Ws.apply(this,arguments)}(Y,g));return b.localCache[g]=U,U})()}_remove(g){var b=this;return(0,w.Z)(function*(){return b._withPendingWrite((0,w.Z)(function*(){return yield b._withRetries(U=>ft(U,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,w.Z)(function*(){const b=yield g._withRetries(Ee=>{const $e=at(Ee,!1).getAll();return new Xa($e).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const U=[],Y=new Set;for(const{fbase_key:Ee,value:$e}of b)Y.add(Ee),JSON.stringify(g.localCache[Ee])!==JSON.stringify($e)&&(g.notifyListeners(Ee,$e),U.push(Ee));for(const Ee of Object.keys(g.localCache))g.localCache[Ee]&&!Y.has(Ee)&&(g.notifyListeners(Ee,null),U.push(Ee));return U})()}notifyListeners(g,b){this.localCache[g]=b;const U=this.listeners[g];if(U)for(const Y of Array.from(U))Y(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function A(v,f){return jt(v,"POST","/v2/accounts/mfaSignIn:start",ht(v,f))}function O(){return(O=(0,w.Z)(function*(v){return(yield jt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function q(v){return new Promise((f,g)=>{const b=document.createElement("script");b.setAttribute("src",v),b.onload=f,b.onerror=U=>{const Y=se("internal-error");Y.customData=U,g(Y)},b.type="text/javascript",b.charset="UTF-8",function(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(b)})}function ie(v){return`__${v}${Math.floor(1e6*Math.random())}`}const pt=1e12;class Cn{constructor(f){this.auth=f,this.counter=pt,this._widgets=new Map}render(f,g){const b=this.counter;return this._widgets.set(b,new It(f,this.auth.name,g||{})),this.counter++,b}reset(f){var g;const b=f||pt;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(f){var g;return(null===(g=this._widgets.get(f||pt))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,w.Z)(function*(){var b;return null===(b=g._widgets.get(f||pt))||void 0===b||b.execute(),""})()}}class It{constructor(f,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const U="string"==typeof f?document.getElementById(f):f;Ve(U,"argument-error",{appName:g}),this.container=U,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}();const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const sn=ie("rcb"),ti=new Pt(3e4,6e4);class ni{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!tr().grecaptcha}load(f,g=""){return Ve((v=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(tr().grecaptcha):new Promise((b,U)=>{const Y=tr().setTimeout(()=>{U(se(f,"network-request-failed"))},ti.get());tr()[sn]=()=>{tr().clearTimeout(Y),delete tr()[sn];const $e=tr().grecaptcha;if(!$e)return void U(se(f,"internal-error"));const yt=$e.render;$e.render=(Mt,en)=>{const Kt=yt(Mt,en);return this.counter++,Kt},this.hostLanguage=g,b($e)},q(`https://www.google.com/recaptcha/api.js??${(0,ne.xO)({onload:sn,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(Y),U(se(f,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!tr().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ai{load(f){return(0,w.Z)(function*(){return new Cn(f)})()}clearedOneInstance(){}}const nr="recaptcha",Go={theme:"light",type:"image"};class R{constructor(f,g=Object.assign({},Go),b){this.parameters=g,this.type=nr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(b),this.isInvisible="invisible"===this.parameters.size,Ve("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const U="string"==typeof f?document.getElementById(f):f;Ve(U,this.auth,"argument-error"),this.container=U,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ai:new ni,this.validateStartingState()}verify(){var f=this;return(0,w.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(g)||new Promise(Y=>{const Ee=$e=>{!$e||(f.tokenChangeListeners.delete(Ee),Y($e))};f.tokenChangeListeners.add(Ee),f.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Ve(!this.parameters.sitekey,this.auth,"argument-error"),Ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ve("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof f)f(g);else if("string"==typeof f){const b=tr()[f];"function"==typeof b&&b(g)}}}assertNotDestroyed(){Ve(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,w.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,w.Z)(function*(){Ve(Et()&&!Uo(),f.auth,"internal-error"),yield function(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function(v){return O.apply(this,arguments)}(f.auth);Ve(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class M{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=fi._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Q(){return(Q=(0,w.Z)(function*(v,f,g){const b=pn(v),U=yield Lt(b,f,(0,ne.m9)(g));return new M(U,Y=>x(b,Y))})).apply(this,arguments)}function je(){return(je=(0,w.Z)(function*(v,f,g){const b=(0,ne.m9)(v);yield F(!1,b,"phone");const U=yield Lt(b.auth,f,(0,ne.m9)(g));return new M(U,Y=>W(b,Y))})).apply(this,arguments)}function gt(){return(gt=(0,w.Z)(function*(v,f,g){const b=(0,ne.m9)(v),U=yield Lt(b.auth,f,(0,ne.m9)(g));return new M(U,Y=>nt(b,Y))})).apply(this,arguments)}function Lt(v,f,g){return gn.apply(this,arguments)}function gn(){return(gn=(0,w.Z)(function*(v,f,g){var b;const U=yield g.verify();try{let Y;if(Ve("string"==typeof U,v,"argument-error"),Ve(g.type===nr,v,"argument-error"),Y="string"==typeof f?{phoneNumber:f}:f,"session"in Y){const Ee=Y.session;if("phoneNumber"in Y)return Ve("enroll"===Ee.type,v,"internal-error"),(yield uo(v,{idToken:Ee.credential,phoneEnrollmentInfo:{phoneNumber:Y.phoneNumber,recaptchaToken:U}})).phoneSessionInfo.sessionInfo;{Ve("signin"===Ee.type,v,"internal-error");const $e=(null===(b=Y.multiFactorHint)||void 0===b?void 0:b.uid)||Y.multiFactorUid;return Ve($e,v,"missing-multi-factor-info"),(yield A(v,{mfaPendingCredential:Ee.credential,mfaEnrollmentId:$e,phoneSignInInfo:{recaptchaToken:U}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ee}=yield Fr(v,{phoneNumber:Y.phoneNumber,recaptchaToken:U});return Ee}}finally{g._reset()}})).apply(this,arguments)}function mt(){return(mt=(0,w.Z)(function*(v,f){yield L((0,ne.m9)(v),f)})).apply(this,arguments)}let Yn=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=pn(g)}verifyPhoneNumber(g,b){return Lt(this.auth,g,(0,ne.m9)(b))}static credential(g,b){return fi._fromVerification(g,b)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:U}=g;return b&&U?fi._fromTokenResponse(b,U):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function En(v,f){return f?Re(f):(Ve(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Rr extends Jn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return on(f,this._buildIdpRequest())}_linkToIdToken(f,g){return on(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return on(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function fs(v){return rt(v.auth,new Rr(v),v.bypassAuthState)}function Wn(v){const{auth:f,user:g}=v;return Ve(g,f,"internal-error"),le(g,new Rr(v),v.bypassAuthState)}function Ms(v){return ui.apply(this,arguments)}function ui(){return(ui=(0,w.Z)(function*(v){const{auth:f,user:g}=v;return Ve(g,f,"internal-error"),L(g,new Rr(v),v.bypassAuthState)})).apply(this,arguments)}class ri{constructor(f,g,b,U,Y=!1){this.auth=f,this.resolver=b,this.user=U,this.bypassAuthState=Y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,w.Z)(function*(b,U){f.pendingPromise={resolve:b,reject:U};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(Y){f.reject(Y)}});return function(b,U){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,w.Z)(function*(){const{urlResponse:b,sessionId:U,postBody:Y,tenantId:Ee,error:$e,type:yt}=f;if($e)return void g.reject($e);const Mt={auth:g.auth,requestUri:b,sessionId:U,tenantId:Ee||void 0,postBody:Y||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(yt)(Mt))}catch(en){g.reject(en)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return fs;case"linkViaPopup":case"linkViaRedirect":return Ms;case"reauthViaPopup":case"reauthViaRedirect":return Wn;default:st(this.auth,"internal-error")}}resolve(f){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ra=new Pt(2e3,1e4);function Zi(){return(Zi=(0,w.Z)(function*(v,f,g){const b=pn(v);Gt(v,f,zr);const U=En(b,g);return new uc(b,"signInViaPopup",f,U).executeNotNull()})).apply(this,arguments)}function ps(){return(ps=(0,w.Z)(function*(v,f,g){const b=(0,ne.m9)(v);Gt(b.auth,f,zr);const U=En(b.auth,g);return new uc(b.auth,"reauthViaPopup",f,U,b).executeNotNull()})).apply(this,arguments)}function Ri(){return(Ri=(0,w.Z)(function*(v,f,g){const b=(0,ne.m9)(v);Gt(b.auth,f,zr);const U=En(b.auth,g);return new uc(b.auth,"linkViaPopup",f,U,b).executeNotNull()})).apply(this,arguments)}let uc=(()=>{class v extends ri{constructor(g,b,U,Y,Ee){super(g,b,Y,Ee),this.provider=U,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,w.Z)(function*(){const b=yield g.execute();return Ve(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,w.Z)(function*(){Le(1===g.filter.length,"Popup operations only handle one event");const b=Ja();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(U=>{g.reject(U)}),g.resolver._isIframeWebStorageSupported(g.auth,U=>{U||g.reject(se(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,U;this.pollId=(null===(U=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===U?void 0:U.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(se(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,ra.get())};g()}}return v.currentPopupAction=null,v})();const uh=new Map;class Ff extends ri{constructor(f,g,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,w.Z)(function*(){let b=uh.get(g.auth._key());if(!b){try{const Y=(yield function(v,f){return Os.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;b=()=>Promise.resolve(Y)}catch(U){b=()=>Promise.reject(U)}uh.set(g.auth._key(),b)}return b()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,b=this;return(0,w.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(b,f);if("unknown"!==f.type){if(f.eventId){const U=yield b.auth._redirectUserForId(f.eventId);if(U)return b.user=U,g().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function Os(){return(Os=(0,w.Z)(function*(v,f){const g=lh(f),b="true"===(yield lc(v)._get(g));return yield lc(v)._remove(g),b})).apply(this,arguments)}function tu(v,f){return zo.apply(this,arguments)}function zo(){return(zo=(0,w.Z)(function*(v,f){return lc(v)._set(lh(f),"true")})).apply(this,arguments)}function lc(v){return Re(v._redirectPersistence)}function lh(v){return Qt("pendingRedirect",v.config.apiKey,v.name)}function cc(){return(cc=(0,w.Z)(function*(v,f,g){const b=pn(v);Gt(v,f,zr);const U=En(b,g);return yield tu(U,b),U._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function Rl(){return(Rl=(0,w.Z)(function*(v,f,g){const b=(0,ne.m9)(v);Gt(b.auth,f,zr);const U=En(b.auth,g);yield tu(U,b.auth);const Y=yield sa(b);return U._openRedirect(b.auth,f,"reauthViaRedirect",Y)})).apply(this,arguments)}function ia(){return(ia=(0,w.Z)(function*(v,f,g){const b=(0,ne.m9)(v);Gt(b.auth,f,zr);const U=En(b.auth,g);yield F(!1,b,f.providerId),yield tu(U,b.auth);const Y=yield sa(b);return U._openRedirect(b.auth,f,"linkViaRedirect",Y)})).apply(this,arguments)}function ru(){return(ru=(0,w.Z)(function*(v,f){return yield pn(v)._initializationPromise,xl(v,f,!1)})).apply(this,arguments)}function xl(v,f){return fc.apply(this,arguments)}function fc(){return(fc=(0,w.Z)(function*(v,f,g=!1){const b=pn(v),U=En(b,f),Ee=yield new Ff(b,U,g).execute();return Ee&&!g&&(delete Ee.user._redirectEventId,yield b._persistUserIfCurrent(Ee.user),yield b._setRedirectUser(null,f)),Ee})).apply(this,arguments)}function sa(v){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,w.Z)(function*(v){const f=Ja(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Tu{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(g=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ia(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var b;if(f.error&&!Ia(f)){const U=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(se(this.auth,U))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const b=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ba(f))}saveEventToCache(f){this.cachedEventUids.add(ba(f)),this.lastProcessedEventTime=Date.now()}}function ba(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function Ia({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===(null==f?void 0:f.code)}function $r(v){return Da.apply(this,arguments)}function Da(){return(Da=(0,w.Z)(function*(v,f={}){return jt(v,"GET","/v1/projects",f)})).apply(this,arguments)}const qo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iu=/^https?/;function pc(){return(pc=(0,w.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield $r(v);for(const g of f)try{if(gc(g))return}catch(b){}st(v,"unauthorized-domain")})).apply(this,arguments)}function gc(v){const f=Xe(),{protocol:g,hostname:b}=new URL(f);if(v.startsWith("chrome-extension://")){const Ee=new URL(v);return""===Ee.hostname&&""===b?"chrome-extension:"===g&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Ee.hostname===b}if(!iu.test(g))return!1;if(qo.test(v))return b===v;const U=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+U+"|"+U+")$","i").test(b)}const Qu=new Pt(3e4,6e4);function ch(){const v=tr().___jsl;if(null==v?void 0:v.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let po=null;function Ml(v){return po=po||function(v){return new Promise((f,g)=>{var b,U,Y;function Ee(){ch(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ch(),g(se(v,"network-request-failed"))},timeout:Qu.get()})}if(null===(U=null===(b=tr().gapi)||void 0===b?void 0:b.iframes)||void 0===U?void 0:U.Iframe)f(gapi.iframes.getContext());else{if(!(null===(Y=tr().gapi)||void 0===Y?void 0:Y.load)){const $e=ie("iframefcb");return tr()[$e]=()=>{gapi.load?Ee():g(se(v,"network-request-failed"))},q(`https://apis.google.com/js/api.js?onload=${$e}`)}Ee()}}).catch(f=>{throw po=null,f})}(v),po}const Sa=new Pt(5e3,15e3),ed={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Ol=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Su(v){const f=v.config;Ve(f.authDomain,v,"auth-domain-config-required");const g=f.emulator?Jt(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:v.name,v:Oe.SDK_VERSION},U=Ol.get(v.config.apiHost);U&&(b.eid=U);const Y=v._getFrameworks();return Y.length&&(b.fw=Y.join(",")),`${g}?${(0,ne.xO)(b).slice(1)}`}function yc(){return(yc=(0,w.Z)(function*(v){const f=yield Ml(v),g=tr().gapi;return Ve(g,v,"internal-error"),f.open({where:document.body,url:Su(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ed,dontclear:!0},b=>new Promise(function(){var U=(0,w.Z)(function*(Y,Ee){yield b.restyle({setHideOnLeave:!1});const $e=se(v,"network-request-failed"),yt=tr().setTimeout(()=>{Ee($e)},Sa.get());function Mt(){tr().clearTimeout(yt),Y(b)}b.ping(Mt).then(Mt,()=>{Ee($e)})});return function(Y,Ee){return U.apply(this,arguments)}}()))})).apply(this,arguments)}const bo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class tl{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Aa(v,f,g,b,U,Y){Ve(v.config.authDomain,v,"auth-domain-config-required"),Ve(v.config.apiKey,v,"invalid-api-key");const Ee={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:b,v:Oe.SDK_VERSION,eventId:U};if(f instanceof zr){f.setDefaultLanguage(v.languageCode),Ee.providerId=f.providerId||"",(0,ne.xb)(f.getCustomParameters())||(Ee.customParameters=JSON.stringify(f.getCustomParameters()));for(const[yt,Mt]of Object.entries(Y||{}))Ee[yt]=Mt}if(f instanceof Wi){const yt=f.getScopes().filter(Mt=>""!==Mt);yt.length>0&&(Ee.scopes=yt.join(","))}v.tenantId&&(Ee.tid=v.tenantId);const $e=Ee;for(const yt of Object.keys($e))void 0===$e[yt]&&delete $e[yt];return`${function({config:v}){return v.emulator?Jt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,ne.xO)($e).slice(1)}`}const oa="webStorageSupport";class aa extends class{constructor(f){this.factorId=f}_process(f,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,b);case"signin":return this._finalizeSignIn(f,g.credential);default:return Ne("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new aa(f)}_finalizeEnroll(f,g,b){return function(v,f){return jt(v,"POST","/v2/accounts/mfaEnrollment:finalize",ht(v,f))}(f,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function(v,f){return jt(v,"POST","/v2/accounts/mfaSignIn:finalize",ht(v,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ua=(()=>{class v{constructor(){}static assertion(g){return aa._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var v;class od{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,w.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(b=>{var U;f((null===(U=b)||void 0===U?void 0:U.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gr(){return window}function Io(){return(Io=(0,w.Z)(function*(v,f,g){var b;const{BuildInfo:U}=gr();Le(f.sessionId,"AuthEvent did not contain a session ID");const Y=yield Do(f.sessionId),Ee={};return cr()?Ee.ibi=U.packageName:ws()?Ee.apn=U.packageName:st(v,"operation-not-supported-in-this-environment"),U.displayName&&(Ee.appDisplayName=U.displayName),Ee.sessionId=Y,Aa(v,g,f.type,void 0,null!==(b=f.eventId)&&void 0!==b?b:void 0,Ee)})).apply(this,arguments)}function Ru(){return(Ru=(0,w.Z)(function*(v){const{BuildInfo:f}=gr(),g={};cr()?g.iosBundleId=f.packageName:ws()?g.androidPackageName=f.packageName:st(v,"operation-not-supported-in-this-environment"),yield $r(v,g)})).apply(this,arguments)}function vc(){return(vc=(0,w.Z)(function*(v,f,g){const{cordova:b}=gr();let U=()=>{};try{yield new Promise((Y,Ee)=>{let $e=null;function yt(){var Kt;Y();const yi=null===(Kt=b.plugins.browsertab)||void 0===Kt?void 0:Kt.close;"function"==typeof yi&&yi(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Mt(){$e||($e=window.setTimeout(()=>{Ee(se(v,"redirect-cancelled-by-user"))},2e3))}function en(){"visible"===(null==document?void 0:document.visibilityState)&&Mt()}f.addPassiveListener(yt),document.addEventListener("resume",Mt,!1),ws()&&document.addEventListener("visibilitychange",en,!1),U=()=>{f.removePassiveListener(yt),document.removeEventListener("resume",Mt,!1),document.removeEventListener("visibilitychange",en,!1),$e&&window.clearTimeout($e)}})}finally{U()}})).apply(this,arguments)}function Do(v){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,w.Z)(function*(v){const f=ud(v),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(U=>U.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ud(v){if(Le(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),g=new Uint8Array(f);for(let b=0;b<v.length;b++)g[b]=v.charCodeAt(b);return g}v="Browser",(0,Oe._registerComponent)(new Fe.wA("auth",(f,{options:g})=>{const b=f.getProvider("app").getImmediate(),{apiKey:U,authDomain:Y}=b.options;return(Ee=>{Ve(U&&!U.includes(":"),"invalid-api-key",{appName:Ee.name}),Ve(!(null==Y?void 0:Y.includes(":")),"argument-error",{appName:Ee.name});const $e={apiKey:U,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kn(v)},yt=new to(Ee,$e);return function(v,f){const g=(null==f?void 0:f.persistence)||[],b=(Array.isArray(g)?g:[g]).map(Re);(null==f?void 0:f.errorMap)&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(b,null==f?void 0:f.popupRedirectResolver)}(yt,g),yt})(b)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,b)=>{f.getProvider("auth-internal").initialize()})),(0,Oe._registerComponent)(new Fe.wA("auth-internal",f=>{const g=pn(f.getProvider("auth").getImmediate());return new od(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Oe.registerVersion)("@firebase/auth","0.18.2",void 0);class fh extends Tu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,w.Z)(function*(){yield f.initPromise})()}}function ph(v){return la.apply(this,arguments)}function la(){return(la=(0,w.Z)(function*(v){const f=yield ca()._get(Pl(v));return f&&(yield ca()._remove(Pl(v))),f})).apply(this,arguments)}function qs(){const v=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const b=Math.floor(Math.random()*f.length);v.push(f.charAt(b))}return v.join("")}function ca(){return Re(Gs)}function Pl(v){return Qt("authEvent",v.config.apiKey,v.name)}function dd(v){if(!(null==v?void 0:v.includes("?")))return{};const[f,...g]=v.split("?");return(0,ne.zd)(g.join("?"))}function wc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:se("no-auth-event")}}function ci(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function gd(v=(0,ne.z$)()){return!("file:"!==ci()&&"ionic:"!==ci()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function su(){try{const v=self.localStorage,f=Ja();if(v)return v.setItem(f,"1"),v.removeItem(f),!function(v=(0,ne.z$)()){return(0,ne.w1)()&&11===(null==document?void 0:document.documentMode)||function(v=(0,ne.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,ne.hl)()}catch(v){return bc()&&(0,ne.hl)()}return!1}function bc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Cr(){return("http:"===ci()||"https:"===ci()||(0,ne.ru)()||gd())&&!((0,ne.b$)()||(0,ne.UG)())&&su()&&!bc()}function yd(){return gd()&&"undefined"!=typeof document}function Fl(){return(Fl=(0,w.Z)(function*(){return!!yd()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const Qi={LOCAL:"local",NONE:"none",SESSION:"session"},il=Ve,mh="persistence";function Ic(v){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,w.Z)(function*(v){yield v._initializationPromise;const f=_h(),g=Qt(mh,v.config.apiKey,v.name);(null==f?void 0:f.sessionStorage)&&f.sessionStorage.setItem(g,v._getPersistence())})).apply(this,arguments)}function _h(){return"undefined"!=typeof window?window:null}const sl=Ve;class Hr{constructor(){this.browserResolver=Re(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hs,this._completeRedirectFn=xl}_openPopup(f,g,b,U){var Y=this;return(0,w.Z)(function*(){var Ee;Le(null===(Ee=Y.eventManagers[f._key()])||void 0===Ee?void 0:Ee.manager,"_initialize() not called before _openPopup()");const $e=Aa(f,g,b,Xe(),U);return function(v,f,g,b=500,U=600){const Y=Math.max((window.screen.availHeight-U)/2,0).toString(),Ee=Math.max((window.screen.availWidth-b)/2,0).toString();let $e="";const yt=Object.assign(Object.assign({},bo),{width:b.toString(),height:U.toString(),top:Y,left:Ee}),Mt=(0,ne.z$)().toLowerCase();g&&($e=ts(Mt)?"_blank":g),vs(Mt)&&(f=f||"http://localhost",yt.scrollbars="yes");const en=Object.entries(yt).reduce((yi,[qe,Li])=>`${yi}${qe}=${Li},`,"");if(function(v=(0,ne.z$)()){var f;return cr(v)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Mt)&&"_self"!==$e)return function(v,f){const g=document.createElement("a");g.href=v,g.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(f||"",$e),new tl(null);const Kt=window.open(f||"",$e,en);Ve(Kt,v,"popup-blocked");try{Kt.focus()}catch(yi){}return new tl(Kt)}(f,$e,Ja())})()}_openRedirect(f,g,b,U){var Y=this;return(0,w.Z)(function*(){return yield Y._originValidation(f),v=Aa(f,g,b,Xe(),U),tr().location.href=v,new Promise(()=>{});var v})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:U,promise:Y}=this.eventManagers[g];return U?Promise.resolve(U):(Le(Y,"If manager is not set, promise should be"),Y)}const b=this.initAndGetManager(f);return this.eventManagers[g]={promise:b},b}initAndGetManager(f){var g=this;return(0,w.Z)(function*(){const b=yield function(v){return yc.apply(this,arguments)}(f),U=new Tu(f);return b.register("authEvent",Y=>(Ve(null==Y?void 0:Y.authEvent,f,"invalid-auth-event"),{status:U.onEvent(Y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:U},g.iframes[f._key()]=b,U})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(oa,{type:oa},U=>{var Y;const Ee=null===(Y=null==U?void 0:U[0])||void 0===Y?void 0:Y[oa];void 0!==Ee&&g(!!Ee),st(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(v){return pc.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Dr()||Es()||cr()}}),this.cordovaResolver=Re(class{constructor(){this._redirectPersistence=hs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=xl}_initialize(f){var g=this;return(0,w.Z)(function*(){const b=f._key();let U=g.eventManagers.get(b);return U||(U=new fh(f),g.eventManagers.set(b,U),g.attachCallbackListeners(f,U)),U})()}_openPopup(f){st(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,b,U){var Y=this;return(0,w.Z)(function*(){!function(v){var f,g,b,U,Y,Ee,$e,yt,Mt,en;const Kt=gr();Ve("function"==typeof(null===(f=null==Kt?void 0:Kt.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ve(void 0!==(null===(g=null==Kt?void 0:Kt.BuildInfo)||void 0===g?void 0:g.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ve("function"==typeof(null===(Y=null===(U=null===(b=null==Kt?void 0:Kt.cordova)||void 0===b?void 0:b.plugins)||void 0===U?void 0:U.browsertab)||void 0===Y?void 0:Y.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ve("function"==typeof(null===(yt=null===($e=null===(Ee=null==Kt?void 0:Kt.cordova)||void 0===Ee?void 0:Ee.plugins)||void 0===$e?void 0:$e.browsertab)||void 0===yt?void 0:yt.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ve("function"==typeof(null===(en=null===(Mt=null==Kt?void 0:Kt.cordova)||void 0===Mt?void 0:Mt.InAppBrowser)||void 0===en?void 0:en.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Ee=yield Y._initialize(f);yield Ee.initialized(),Ee.resetRedirect(),uh.clear(),yield Y._originValidation(f);const $e=function(v,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:qs(),postBody:null,tenantId:v.tenantId,error:se(v,"no-auth-event")}}(f,b,U);yield function(v,f){return ca()._set(Pl(v),f)}(f,$e);const yt=yield function(v,f,g){return Io.apply(this,arguments)}(f,$e,g),Mt=yield function(v){const{cordova:f}=gr();return new Promise(g=>{f.plugins.browsertab.isAvailable(b=>{let U=null;b?f.plugins.browsertab.openUrl(v):U=f.InAppBrowser.open(v,function(v=(0,ne.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(U)})})}(yt);return function(v,f,g){return vc.apply(this,arguments)}(f,Ee,Mt)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(v){return Ru.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:b,handleOpenURL:U,BuildInfo:Y}=gr(),Ee=setTimeout((0,w.Z)(function*(){yield ph(f),g.onEvent(wc())}),500),$e=function(){var en=(0,w.Z)(function*(Kt){clearTimeout(Ee);const yi=yield ph(f);let qe=null;yi&&(null==Kt?void 0:Kt.url)&&(qe=function(v,f){var g,b;const U=function(v){const f=dd(v),g=f.link?decodeURIComponent(f.link):void 0,b=dd(g).link,U=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return dd(U).link||U||b||g||v}(f);if(U.includes("/__/auth/callback")){const Y=dd(U),Ee=Y.firebaseError?function(v){try{return JSON.parse(v)}catch(f){return null}}(decodeURIComponent(Y.firebaseError)):null,$e=null===(b=null===(g=null==Ee?void 0:Ee.code)||void 0===g?void 0:g.split("auth/"))||void 0===b?void 0:b[1],yt=$e?se($e):null;return yt?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:yt,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:U,postBody:null}}return null}(yi,Kt.url)),g.onEvent(qe||wc())});return function(yi){return en.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,$e);const yt=U,Mt=`${Y.packageName.toLowerCase()}://`;gr().handleOpenURL=function(){var en=(0,w.Z)(function*(Kt){if(Kt.toLowerCase().startsWith(Mt)&&$e({url:Kt}),"function"==typeof yt)try{yt(Kt)}catch(yi){console.error(yi)}});return function(Kt){return en.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=hs,this._completeRedirectFn=xl}_initialize(f){var g=this;return(0,w.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,b,U){var Y=this;return(0,w.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openPopup(f,g,b,U)})()}_openRedirect(f,g,b,U){var Y=this;return(0,w.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._openRedirect(f,g,b,U)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return yd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return sl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,w.Z)(function*(){if(f.underlyingResolver)return;const g=yield function(){return Fl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Tc(v){return v.unwrap()}function xu(v){return ol(v)}function ol(v){const{_tokenResponse:f}=v instanceof ne.ZR?v.customData:v;if(!f)return null;if(!(v instanceof ne.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Yn.credentialFromResult(v);const g=f.providerId;if(!g||"password"===g)return null;let b;switch(g){case"google.com":b=bs;break;case"facebook.com":b=ro;break;case"github.com":b=Kr;break;case"twitter.com":b=zn;break;default:const{oauthIdToken:U,oauthAccessToken:Y,oauthTokenSecret:Ee,pendingToken:$e,nonce:yt}=f;return Y||Ee||U||$e?$e?g.startsWith("saml.")?Fi._create(g,$e):hr._fromParams({providerId:g,signInMethod:g,pendingToken:$e,idToken:U,accessToken:Y}):new qr(g).credential({idToken:U,accessToken:Y,rawNonce:yt}):null}return v instanceof ne.ZR?b.credentialFromError(v):b.credentialFromResult(v)}function gs(v,f){return f.catch(g=>{throw g instanceof ne.ZR&&function(v,f){var g;const b=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new To(v,function(v,f){var g;const b=(0,ne.m9)(v),U=f;return Ve(f.operationType,b,"argument-error"),Ve(null===(g=U.serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),wo._fromError(b,U)}(v,f));else if(b){const U=ol(f),Y=f;U&&(Y.credential=U,Y.tenantId=b.tenantId||void 0,Y.email=b.email||void 0,Y.phoneNumber=b.phoneNumber||void 0)}}(v,g),g}).then(g=>{const U=g.user;return{operationType:g.operationType,credential:xu(g),additionalUserInfo:za(g),user:Ra.getOrCreate(U)}})}function _d(v,f){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,w.Z)(function*(v,f){const g=yield f;return{verificationId:g.verificationId,confirm:b=>gs(v,g.confirm(b))}})).apply(this,arguments)}class To{constructor(f,g){this.resolver=g,this.auth=function(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return gs(Tc(this.auth),this.resolver.resolveSignIn(f))}}class Ra{constructor(f){this._delegate=f,this.multiFactor=function(v){const f=(0,ne.m9)(v);return As.has(f)||As.set(f,Vo._fromUser(f)),As.get(f)}(f)}static getOrCreate(f){return Ra.USER_MAP.has(f)||Ra.USER_MAP.set(f,new Ra(f)),Ra.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,w.Z)(function*(){return gs(g.auth,W(g._delegate,f))})()}linkWithPhoneNumber(f,g){var b=this;return(0,w.Z)(function*(){return _d(b.auth,function(v,f,g){return je.apply(this,arguments)}(b._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,w.Z)(function*(){return gs(g.auth,function(v,f,g){return Ri.apply(this,arguments)}(g._delegate,f,Hr))})()}linkWithRedirect(f){var g=this;return(0,w.Z)(function*(){return yield Ic(pn(g.auth)),function(v,f,g){return function(v,f,g){return ia.apply(this,arguments)}(v,f,g)}(g._delegate,f,Hr)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,w.Z)(function*(){return gs(g.auth,nt(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return _d(this.auth,function(v,f,g){return gt.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return gs(this.auth,function(v,f,g){return ps.apply(this,arguments)}(this._delegate,f,Hr))}reauthenticateWithRedirect(f){var g=this;return(0,w.Z)(function*(){return yield Ic(pn(g.auth)),function(v,f,g){return function(v,f,g){return Rl.apply(this,arguments)}(v,f,g)}(g._delegate,f,Hr)})()}sendEmailVerification(f){return function(v,f){return ko.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,w.Z)(function*(){return yield function(v,f){return Ar.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function(v,f){return zu((0,ne.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function(v,f){return zu((0,ne.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function(v,f){return mt.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function(v,f){return Wa.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function(v,f,g){return vr.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ra.USER_MAP=new WeakMap;const Nu=Ve;let da=(()=>{class v{constructor(g,b){if(this.app=g,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:U}=g.options;Nu(U,"invalid-api-key",{appName:g.name});let Y=[fn];if("undefined"!=typeof window){Y=function(v,f){const g=_h();if(!(null==g?void 0:g.sessionStorage))return[];const b=Qt(mh,v,f);switch(g.sessionStorage.getItem(b)){case Qi.NONE:return[fn];case Qi.LOCAL:return[Ho,hs];case Qi.SESSION:return[hs];default:return[]}}(U,g.name);for(const $e of[Ho,Gs,hs])Y.includes($e)||Y.push($e)}Nu(U,"invalid-api-key",{appName:g.name});const Ee="undefined"!=typeof window?Hr:void 0;this._delegate=b.initialize({options:{persistence:Y,popupRedirectResolver:Ee}}),this._delegate._updateErrorMap(Ue),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ra.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,b){!function(v,f,g){const b=pn(v);Ve(b._canInitEmulator,b,"emulator-config-failed"),Ve(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const U=!!(null==g?void 0:g.disableWarnings),Y=Wt(f),{host:Ee,port:$e}=function(v){const f=Wt(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",U=/^(\[[^\]]+\])(:|$)/.exec(b);if(U){const Y=U[1];return{host:Y,port:Mi(b.substr(Y.length+1))}}{const[Y,Ee]=b.split(":");return{host:Y,port:Mi(Ee)}}}(f);b.config.emulator={url:`${Y}//${Ee}${null===$e?"":`:${$e}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Ee,port:$e,protocol:Y.replace(":",""),options:Object.freeze({disableWarnings:U})}),U||function(){function v(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,b)}applyActionCode(g){return function(v,f){return $a.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Gu(this._delegate,g)}confirmPasswordReset(g,b){return function(v,f,g){return qt.apply(this,arguments)}(this._delegate,g,b)}createUserWithEmailAndPassword(g,b){var U=this;return(0,w.Z)(function*(){return gs(U._delegate,function(v,f,g){return Ze.apply(this,arguments)}(U._delegate,g,b))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(v,f){return Ti.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(v,f){const g=as.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,w.Z)(function*(){Nu(Cr(),g._delegate,"operation-not-supported-in-this-environment");const b=yield function(v,f){return ru.apply(this,arguments)}(g._delegate,Hr);return b?gs(g._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(v,f){pn(v)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,b,U){const{next:Y,error:Ee,complete:$e}=vd(g,b,U);return this._delegate.onAuthStateChanged(Y,Ee,$e)}onIdTokenChanged(g,b,U){const{next:Y,error:Ee,complete:$e}=vd(g,b,U);return this._delegate.onIdTokenChanged(Y,Ee,$e)}sendSignInLinkToEmail(g,b){return function(v,f,g){return Zn.apply(this,arguments)}(this._delegate,g,b)}sendPasswordResetEmail(g,b){return function(v,f,g){return ai.apply(this,arguments)}(this._delegate,g,b||void 0)}setPersistence(g){var b=this;return(0,w.Z)(function*(){let U;switch(function(v,f){il(Object.values(Qi).includes(f),v,"invalid-persistence-type"),(0,ne.b$)()?il(f!==Qi.SESSION,v,"unsupported-persistence-type"):(0,ne.UG)()?il(f===Qi.NONE,v,"unsupported-persistence-type"):bc()?il(f===Qi.NONE||f===Qi.LOCAL&&(0,ne.hl)(),v,"unsupported-persistence-type"):il(f===Qi.NONE||su(),v,"unsupported-persistence-type")}(b._delegate,g),g){case Qi.SESSION:U=hs;break;case Qi.LOCAL:U=(yield Re(Ho)._isAvailable())?Ho:Gs;break;case Qi.NONE:U=fn;break;default:return st("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(U)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return gs(this._delegate,function(v){return oi.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return gs(this._delegate,x(this._delegate,g))}signInWithCustomToken(g){return gs(this._delegate,function(v,f){return Nn.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,b){return gs(this._delegate,function(v,f,g){return x((0,ne.m9)(v),_o.credential(f,g))}(this._delegate,g,b))}signInWithEmailLink(g,b){return gs(this._delegate,function(v,f,g){return qi.apply(this,arguments)}(this._delegate,g,b))}signInWithPhoneNumber(g,b){return _d(this._delegate,function(v,f,g){return Q.apply(this,arguments)}(this._delegate,g,b))}signInWithPopup(g){var b=this;return(0,w.Z)(function*(){return Nu(Cr(),b._delegate,"operation-not-supported-in-this-environment"),gs(b._delegate,function(v,f,g){return Zi.apply(this,arguments)}(b._delegate,g,Hr))})()}signInWithRedirect(g){var b=this;return(0,w.Z)(function*(){return Nu(Cr(),b._delegate,"operation-not-supported-in-this-environment"),yield Ic(b._delegate),function(v,f,g){return function(v,f,g){return cc.apply(this,arguments)}(v,f,g)}(b._delegate,g,Hr)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(v,f){return Ha.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Qi,v})();function vd(v,f,g){let b=v;"function"!=typeof v&&({next:b,error:f,complete:g}=v);const U=b;return{next:Ee=>U(Ee&&Ra.getOrCreate(Ee)),error:f,complete:g}}class Ps{constructor(){this.providerId="phone",this._delegate=new Yn(Tc(j.Z.auth()))}static credential(f,g){return Yn.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Ps.PHONE_SIGN_IN_METHOD=Yn.PHONE_SIGN_IN_METHOD,Ps.PROVIDER_ID=Yn.PROVIDER_ID;const ou=Ve;class br{constructor(f,g,b=j.Z.app()){var U;ou(null===(U=b.options)||void 0===U?void 0:U.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new R(f,g,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(v){v.INTERNAL.registerComponent(new Fe.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),b=f.getProvider("auth");return new da(g,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:_o,FacebookAuthProvider:ro,GithubAuthProvider:Kr,GoogleAuthProvider:bs,OAuthProvider:qr,PhoneAuthProvider:Ps,PhoneMultiFactorGenerator:ua,RecaptchaVerifier:br,TwitterAuthProvider:zn,Auth:da,AuthCredential:Jn,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.1.5")}(j.Z)},7574:(bt,Ge,G)=>{"use strict";G.d(Ge,{y:()=>te});var w=G(7393),ne=G(9181),Oe=G(6490),he=G(6554),Fe=G(4487);var ee=G(2494);let te=(()=>{class ve{constructor(Ue){this._isScalar=!1,Ue&&(this._subscribe=Ue)}lift(Ue){const Se=new ve;return Se.source=this,Se.operator=Ue,Se}subscribe(Ue,Se,Ae){const{operator:it}=this,Qe=function(ve,be,Ue){if(ve){if(ve instanceof w.L)return ve;if(ve[ne.b])return ve[ne.b]()}return ve||be||Ue?new w.L(ve,be,Ue):new w.L(Oe.c)}(Ue,Se,Ae);if(Qe.add(it?it.call(Qe,this.source):this.source||ee.v.useDeprecatedSynchronousErrorHandling&&!Qe.syncErrorThrowable?this._subscribe(Qe):this._trySubscribe(Qe)),ee.v.useDeprecatedSynchronousErrorHandling&&Qe.syncErrorThrowable&&(Qe.syncErrorThrowable=!1,Qe.syncErrorThrown))throw Qe.syncErrorValue;return Qe}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(Se){ee.v.useDeprecatedSynchronousErrorHandling&&(Ue.syncErrorThrown=!0,Ue.syncErrorValue=Se),function(ve){for(;ve;){const{closed:be,destination:Ue,isStopped:Se}=ve;if(be||Se)return!1;ve=Ue&&Ue instanceof w.L?Ue:null}return!0}(Ue)?Ue.error(Se):console.warn(Se)}}forEach(Ue,Se){return new(Se=me(Se))((Ae,it)=>{let Qe;Qe=this.subscribe(Je=>{try{Ue(Je)}catch(st){it(st),Qe&&Qe.unsubscribe()}},it,Ae)})}_subscribe(Ue){const{source:Se}=this;return Se&&Se.subscribe(Ue)}[he.L](){return this}pipe(...Ue){return 0===Ue.length?this:function(ve){return 0===ve.length?Fe.y:1===ve.length?ve[0]:function(Ue){return ve.reduce((Se,Ae)=>Ae(Se),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=me(Ue))((Se,Ae)=>{let it;this.subscribe(Qe=>it=Qe,Qe=>Ae(Qe),()=>Se(it))})}}return ve.create=be=>new ve(be),ve})();function me(ve){if(ve||(ve=ee.v.Promise||Promise),!ve)throw new Error("no Promise impl found");return ve}},6490:(bt,Ge,G)=>{"use strict";G.d(Ge,{c:()=>ne});var w=G(2494),j=G(4449);const ne={closed:!0,next(Oe){},error(Oe){if(w.v.useDeprecatedSynchronousErrorHandling)throw Oe;(0,j.z)(Oe)},complete(){}}},9765:(bt,Ge,G)=>{"use strict";G.d(Ge,{Yc:()=>Fe,xQ:()=>ge});var w=G(7574),j=G(7393),ne=G(5319),Oe=G(7971),Te=G(8858),he=G(9181);class Fe extends j.L{constructor(te){super(te),this.destination=te}}let ge=(()=>{class ee extends w.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[he.b](){return new Fe(this)}lift(me){const ve=new oe(this,this);return ve.operator=me,ve}next(me){if(this.closed)throw new Oe.N;if(!this.isStopped){const{observers:ve}=this,be=ve.length,Ue=ve.slice();for(let Se=0;Se<be;Se++)Ue[Se].next(me)}}error(me){if(this.closed)throw new Oe.N;this.hasError=!0,this.thrownError=me,this.isStopped=!0;const{observers:ve}=this,be=ve.length,Ue=ve.slice();for(let Se=0;Se<be;Se++)Ue[Se].error(me);this.observers.length=0}complete(){if(this.closed)throw new Oe.N;this.isStopped=!0;const{observers:me}=this,ve=me.length,be=me.slice();for(let Ue=0;Ue<ve;Ue++)be[Ue].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(me){if(this.closed)throw new Oe.N;return super._trySubscribe(me)}_subscribe(me){if(this.closed)throw new Oe.N;return this.hasError?(me.error(this.thrownError),ne.w.EMPTY):this.isStopped?(me.complete(),ne.w.EMPTY):(this.observers.push(me),new Te.W(this,me))}asObservable(){const me=new w.y;return me.source=this,me}}return ee.create=(te,me)=>new oe(te,me),ee})();class oe extends ge{constructor(te,me){super(),this.destination=te,this.source=me}next(te){const{destination:me}=this;me&&me.next&&me.next(te)}error(te){const{destination:me}=this;me&&me.error&&this.destination.error(te)}complete(){const{destination:te}=this;te&&te.complete&&this.destination.complete()}_subscribe(te){const{source:me}=this;return me?this.source.subscribe(te):ne.w.EMPTY}}},8858:(bt,Ge,G)=>{"use strict";G.d(Ge,{W:()=>j});var w=G(5319);class j extends w.w{constructor(Oe,Te){super(),this.subject=Oe,this.subscriber=Te,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Oe=this.subject,Te=Oe.observers;if(this.subject=null,!Te||0===Te.length||Oe.isStopped||Oe.closed)return;const he=Te.indexOf(this.subscriber);-1!==he&&Te.splice(he,1)}}},7393:(bt,Ge,G)=>{"use strict";G.d(Ge,{L:()=>Fe});var w=G(9105),j=G(6490),ne=G(5319),Oe=G(9181),Te=G(2494),he=G(4449);class Fe extends ne.w{constructor(ee,te,me){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=j.c;break;case 1:if(!ee){this.destination=j.c;break}if("object"==typeof ee){ee instanceof Fe?(this.syncErrorThrowable=ee.syncErrorThrowable,this.destination=ee,ee.add(this)):(this.syncErrorThrowable=!0,this.destination=new ge(this,ee));break}default:this.syncErrorThrowable=!0,this.destination=new ge(this,ee,te,me)}}[Oe.b](){return this}static create(ee,te,me){const ve=new Fe(ee,te,me);return ve.syncErrorThrowable=!1,ve}next(ee){this.isStopped||this._next(ee)}error(ee){this.isStopped||(this.isStopped=!0,this._error(ee))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ee){this.destination.next(ee)}_error(ee){this.destination.error(ee),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ee}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ee,this}}class ge extends Fe{constructor(ee,te,me,ve){super(),this._parentSubscriber=ee;let be,Ue=this;(0,w.m)(te)?be=te:te&&(be=te.next,me=te.error,ve=te.complete,te!==j.c&&(Ue=Object.create(te),(0,w.m)(Ue.unsubscribe)&&this.add(Ue.unsubscribe.bind(Ue)),Ue.unsubscribe=this.unsubscribe.bind(this))),this._context=Ue,this._next=be,this._error=me,this._complete=ve}next(ee){if(!this.isStopped&&this._next){const{_parentSubscriber:te}=this;Te.v.useDeprecatedSynchronousErrorHandling&&te.syncErrorThrowable?this.__tryOrSetError(te,this._next,ee)&&this.unsubscribe():this.__tryOrUnsub(this._next,ee)}}error(ee){if(!this.isStopped){const{_parentSubscriber:te}=this,{useDeprecatedSynchronousErrorHandling:me}=Te.v;if(this._error)me&&te.syncErrorThrowable?(this.__tryOrSetError(te,this._error,ee),this.unsubscribe()):(this.__tryOrUnsub(this._error,ee),this.unsubscribe());else if(te.syncErrorThrowable)me?(te.syncErrorValue=ee,te.syncErrorThrown=!0):(0,he.z)(ee),this.unsubscribe();else{if(this.unsubscribe(),me)throw ee;(0,he.z)(ee)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ee}=this;if(this._complete){const te=()=>this._complete.call(this._context);Te.v.useDeprecatedSynchronousErrorHandling&&ee.syncErrorThrowable?(this.__tryOrSetError(ee,te),this.unsubscribe()):(this.__tryOrUnsub(te),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ee,te){try{ee.call(this._context,te)}catch(me){if(this.unsubscribe(),Te.v.useDeprecatedSynchronousErrorHandling)throw me;(0,he.z)(me)}}__tryOrSetError(ee,te,me){if(!Te.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{te.call(this._context,me)}catch(ve){return Te.v.useDeprecatedSynchronousErrorHandling?(ee.syncErrorValue=ve,ee.syncErrorThrown=!0,!0):((0,he.z)(ve),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ee}=this;this._context=null,this._parentSubscriber=null,ee.unsubscribe()}}},5319:(bt,Ge,G)=>{"use strict";G.d(Ge,{w:()=>he});var w=G(9796),j=G(1555),ne=G(9105);const Te=(()=>{function ge(oe){return Error.call(this),this.message=oe?`${oe.length} errors occurred during unsubscription:\n${oe.map((ee,te)=>`${te+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=oe,this}return ge.prototype=Object.create(Error.prototype),ge})();class he{constructor(oe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,oe&&(this._ctorUnsubscribe=!0,this._unsubscribe=oe)}unsubscribe(){let oe;if(this.closed)return;let{_parentOrParents:ee,_ctorUnsubscribe:te,_unsubscribe:me,_subscriptions:ve}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ee instanceof he)ee.remove(this);else if(null!==ee)for(let be=0;be<ee.length;++be)ee[be].remove(this);if((0,ne.m)(me)){te&&(this._unsubscribe=void 0);try{me.call(this)}catch(be){oe=be instanceof Te?Fe(be.errors):[be]}}if((0,w.k)(ve)){let be=-1,Ue=ve.length;for(;++be<Ue;){const Se=ve[be];if((0,j.K)(Se))try{Se.unsubscribe()}catch(Ae){oe=oe||[],Ae instanceof Te?oe=oe.concat(Fe(Ae.errors)):oe.push(Ae)}}}if(oe)throw new Te(oe)}add(oe){let ee=oe;if(!oe)return he.EMPTY;switch(typeof oe){case"function":ee=new he(oe);case"object":if(ee===this||ee.closed||"function"!=typeof ee.unsubscribe)return ee;if(this.closed)return ee.unsubscribe(),ee;if(!(ee instanceof he)){const ve=ee;ee=new he,ee._subscriptions=[ve]}break;default:throw new Error("unrecognized teardown "+oe+" added to Subscription.")}let{_parentOrParents:te}=ee;if(null===te)ee._parentOrParents=this;else if(te instanceof he){if(te===this)return ee;ee._parentOrParents=[te,this]}else{if(-1!==te.indexOf(this))return ee;te.push(this)}const me=this._subscriptions;return null===me?this._subscriptions=[ee]:me.push(ee),ee}remove(oe){const ee=this._subscriptions;if(ee){const te=ee.indexOf(oe);-1!==te&&ee.splice(te,1)}}}var ge;function Fe(ge){return ge.reduce((oe,ee)=>oe.concat(ee instanceof Te?ee.errors:ee),[])}he.EMPTY=((ge=new he).closed=!0,ge)},2494:(bt,Ge,G)=>{"use strict";G.d(Ge,{v:()=>j});let w=!1;const j={Promise:void 0,set useDeprecatedSynchronousErrorHandling(ne){if(ne){const Oe=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Oe.stack)}else w&&console.log("RxJS: Back to a better error behavior. Thank you. <3");w=ne},get useDeprecatedSynchronousErrorHandling(){return w}}},5345:(bt,Ge,G)=>{"use strict";G.d(Ge,{IY:()=>Oe,Ds:()=>he,ft:()=>ge});var w=G(7393),j=G(7574),ne=G(7444);class Oe extends w.L{constructor(ee){super(),this.parent=ee}_next(ee){this.parent.notifyNext(ee)}_error(ee){this.parent.notifyError(ee),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class he extends w.L{notifyNext(ee){this.destination.next(ee)}notifyError(ee){this.destination.error(ee)}notifyComplete(){this.destination.complete()}}function ge(oe,ee){if(ee.closed)return;if(oe instanceof j.y)return oe.subscribe(ee);let te;try{te=(0,ne.s)(oe)(ee)}catch(me){ee.error(me)}return te}},2441:(bt,Ge,G)=>{"use strict";G.d(Ge,{c:()=>Te,N:()=>he});var w=G(9765),j=G(7574),ne=G(5319),Oe=G(1307);class Te extends j.y{constructor(te,me){super(),this.source=te,this.subjectFactory=me,this._refCount=0,this._isComplete=!1}_subscribe(te){return this.getSubject().subscribe(te)}getSubject(){const te=this._subject;return(!te||te.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let te=this._connection;return te||(this._isComplete=!1,te=this._connection=new ne.w,te.add(this.source.subscribe(new Fe(this.getSubject(),this))),te.closed&&(this._connection=null,te=ne.w.EMPTY)),te}refCount(){return(0,Oe.x)()(this)}}const he=(()=>{const ee=Te.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ee._subscribe},_isComplete:{value:ee._isComplete,writable:!0},getSubject:{value:ee.getSubject},connect:{value:ee.connect},refCount:{value:ee.refCount}}})();class Fe extends w.Yc{constructor(te,me){super(te),this.connectable=me}_error(te){this._unsubscribe(),super._error(te)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const te=this.connectable;if(te){this.connectable=null;const me=te._connection;te._refCount=0,te._subject=null,te._connection=null,me&&me.unsubscribe()}}}},8071:(bt,Ge,G)=>{"use strict";G.d(Ge,{z:()=>Oe});var w=G(5917),j=G(3282);function Oe(...Te){return(0,j.J)(1)((0,w.of)(...Te))}},9193:(bt,Ge,G)=>{"use strict";G.d(Ge,{E:()=>j,c:()=>ne});var w=G(7574);const j=new w.y(Te=>Te.complete());function ne(Te){return Te?function(Te){return new w.y(he=>Te.schedule(()=>he.complete()))}(Te):j}},4402:(bt,Ge,G)=>{"use strict";G.d(Ge,{D:()=>Ue});var w=G(7574),j=G(7444),ne=G(5319),Oe=G(6554),Fe=G(4087),ge=G(377),te=G(4072),me=G(9489);function Ue(Se,Ae){return Ae?function(Se,Ae){if(null!=Se){if(function(Se){return Se&&"function"==typeof Se[Oe.L]}(Se))return function(Se,Ae){return new w.y(it=>{const Qe=new ne.w;return Qe.add(Ae.schedule(()=>{const Je=Se[Oe.L]();Qe.add(Je.subscribe({next(st){Qe.add(Ae.schedule(()=>it.next(st)))},error(st){Qe.add(Ae.schedule(()=>it.error(st)))},complete(){Qe.add(Ae.schedule(()=>it.complete()))}}))})),Qe})}(Se,Ae);if((0,te.t)(Se))return function(Se,Ae){return new w.y(it=>{const Qe=new ne.w;return Qe.add(Ae.schedule(()=>Se.then(Je=>{Qe.add(Ae.schedule(()=>{it.next(Je),Qe.add(Ae.schedule(()=>it.complete()))}))},Je=>{Qe.add(Ae.schedule(()=>it.error(Je)))}))),Qe})}(Se,Ae);if((0,me.z)(Se))return(0,Fe.r)(Se,Ae);if(function(Se){return Se&&"function"==typeof Se[ge.hZ]}(Se)||"string"==typeof Se)return function(Se,Ae){if(!Se)throw new Error("Iterable cannot be null");return new w.y(it=>{const Qe=new ne.w;let Je;return Qe.add(()=>{Je&&"function"==typeof Je.return&&Je.return()}),Qe.add(Ae.schedule(()=>{Je=Se[ge.hZ](),Qe.add(Ae.schedule(function(){if(it.closed)return;let st,se;try{const ut=Je.next();st=ut.value,se=ut.done}catch(ut){return void it.error(ut)}se?it.complete():(it.next(st),this.schedule())}))})),Qe})}(Se,Ae)}throw new TypeError((null!==Se&&typeof Se||Se)+" is not observable")}(Se,Ae):Se instanceof w.y?Se:new w.y((0,j.s)(Se))}},6693:(bt,Ge,G)=>{"use strict";G.d(Ge,{n:()=>Oe});var w=G(7574),j=G(5015),ne=G(4087);function Oe(Te,he){return he?(0,ne.r)(Te,he):new w.y((0,j.V)(Te))}},6682:(bt,Ge,G)=>{"use strict";G.d(Ge,{T:()=>Te});var w=G(7574),j=G(4869),ne=G(3282),Oe=G(6693);function Te(...he){let Fe=Number.POSITIVE_INFINITY,ge=null,oe=he[he.length-1];return(0,j.K)(oe)?(ge=he.pop(),he.length>1&&"number"==typeof he[he.length-1]&&(Fe=he.pop())):"number"==typeof oe&&(Fe=he.pop()),null===ge&&1===he.length&&he[0]instanceof w.y?he[0]:(0,ne.J)(Fe)((0,Oe.n)(he,ge))}},5917:(bt,Ge,G)=>{"use strict";G.d(Ge,{of:()=>Oe});var w=G(4869),j=G(6693),ne=G(4087);function Oe(...Te){let he=Te[Te.length-1];return(0,w.K)(he)?(Te.pop(),(0,ne.r)(Te,he)):(0,j.n)(Te)}},5242:(bt,Ge,G)=>{"use strict";G.d(Ge,{d:()=>j});var w=G(7393);function j(Te=null){return he=>he.lift(new ne(Te))}class ne{constructor(he){this.defaultValue=he}call(he,Fe){return Fe.subscribe(new Oe(he,this.defaultValue))}}class Oe extends w.L{constructor(he,Fe){super(he),this.defaultValue=Fe,this.isEmpty=!0}_next(he){this.isEmpty=!1,this.destination.next(he)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5435:(bt,Ge,G)=>{"use strict";G.d(Ge,{h:()=>j});var w=G(7393);function j(Te,he){return function(ge){return ge.lift(new ne(Te,he))}}class ne{constructor(he,Fe){this.predicate=he,this.thisArg=Fe}call(he,Fe){return Fe.subscribe(new Oe(he,this.predicate,this.thisArg))}}class Oe extends w.L{constructor(he,Fe,ge){super(he),this.predicate=Fe,this.thisArg=ge,this.count=0}_next(he){let Fe;try{Fe=this.predicate.call(this.thisArg,he,this.count++)}catch(ge){return void this.destination.error(ge)}Fe&&this.destination.next(he)}}},8049:(bt,Ge,G)=>{"use strict";G.d(Ge,{P:()=>Fe});var w=G(3410),j=G(5435),ne=G(5257),Oe=G(5242),Te=G(4635),he=G(4487);function Fe(ge,oe){const ee=arguments.length>=2;return te=>te.pipe(ge?(0,j.h)((me,ve)=>ge(me,ve,te)):he.y,(0,ne.q)(1),ee?(0,Oe.d)(oe):(0,Te.T)(()=>new w.K))}},8002:(bt,Ge,G)=>{"use strict";G.d(Ge,{U:()=>j});var w=G(7393);function j(Te,he){return function(ge){if("function"!=typeof Te)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ge.lift(new ne(Te,he))}}class ne{constructor(he,Fe){this.project=he,this.thisArg=Fe}call(he,Fe){return Fe.subscribe(new Oe(he,this.project,this.thisArg))}}class Oe extends w.L{constructor(he,Fe,ge){super(he),this.project=Fe,this.count=0,this.thisArg=ge||this}_next(he){let Fe;try{Fe=this.project.call(this.thisArg,he,this.count++)}catch(ge){return void this.destination.error(ge)}this.destination.next(Fe)}}},3282:(bt,Ge,G)=>{"use strict";G.d(Ge,{J:()=>ne});var w=G(9773),j=G(4487);function ne(Oe=Number.POSITIVE_INFINITY){return(0,w.zg)(j.y,Oe)}},9773:(bt,Ge,G)=>{"use strict";G.d(Ge,{zg:()=>Oe});var w=G(8002),j=G(4402),ne=G(5345);function Oe(ge,oe,ee=Number.POSITIVE_INFINITY){return"function"==typeof oe?te=>te.pipe(Oe((me,ve)=>(0,j.D)(ge(me,ve)).pipe((0,w.U)((be,Ue)=>oe(me,be,ve,Ue))),ee)):("number"==typeof oe&&(ee=oe),te=>te.lift(new Te(ge,ee)))}class Te{constructor(oe,ee=Number.POSITIVE_INFINITY){this.project=oe,this.concurrent=ee}call(oe,ee){return ee.subscribe(new he(oe,this.project,this.concurrent))}}class he extends ne.Ds{constructor(oe,ee,te=Number.POSITIVE_INFINITY){super(oe),this.project=ee,this.concurrent=te,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(oe){this.active<this.concurrent?this._tryNext(oe):this.buffer.push(oe)}_tryNext(oe){let ee;const te=this.index++;try{ee=this.project(oe,te)}catch(me){return void this.destination.error(me)}this.active++,this._innerSub(ee)}_innerSub(oe){const ee=new ne.IY(this),te=this.destination;te.add(ee);const me=(0,ne.ft)(oe,ee);me!==ee&&te.add(me)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(oe){this.destination.next(oe)}notifyComplete(){const oe=this.buffer;this.active--,oe.length>0?this._next(oe.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(bt,Ge,G)=>{"use strict";G.d(Ge,{ht:()=>te,QV:()=>oe});var w=G(7393),j=G(9193),ne=G(5917),Oe=G(7574);class ge{constructor(be,Ue,Se){this.kind=be,this.value=Ue,this.error=Se,this.hasValue="N"===be}observe(be){switch(this.kind){case"N":return be.next&&be.next(this.value);case"E":return be.error&&be.error(this.error);case"C":return be.complete&&be.complete()}}do(be,Ue,Se){switch(this.kind){case"N":return be&&be(this.value);case"E":return Ue&&Ue(this.error);case"C":return Se&&Se()}}accept(be,Ue,Se){return be&&"function"==typeof be.next?this.observe(be):this.do(be,Ue,Se)}toObservable(){switch(this.kind){case"N":return(0,ne.of)(this.value);case"E":return ve=this.error,new Oe.y(Ue=>Ue.error(ve));case"C":return(0,j.c)()}var ve;throw new Error("unexpected notification kind value")}static createNext(be){return void 0!==be?new ge("N",be):ge.undefinedValueNotification}static createError(be){return new ge("E",void 0,be)}static createComplete(){return ge.completeNotification}}function oe(ve,be=0){return function(Se){return Se.lift(new ee(ve,be))}}ge.completeNotification=new ge("C"),ge.undefinedValueNotification=new ge("N",void 0);class ee{constructor(be,Ue=0){this.scheduler=be,this.delay=Ue}call(be,Ue){return Ue.subscribe(new te(be,this.scheduler,this.delay))}}class te extends w.L{constructor(be,Ue,Se=0){super(be),this.scheduler=Ue,this.delay=Se}static dispatch(be){const{notification:Ue,destination:Se}=be;Ue.observe(Se),this.unsubscribe()}scheduleMessage(be){this.destination.add(this.scheduler.schedule(te.dispatch,this.delay,new me(be,this.destination)))}_next(be){this.scheduleMessage(ge.createNext(be))}_error(be){this.scheduleMessage(ge.createError(be)),this.unsubscribe()}_complete(){this.scheduleMessage(ge.createComplete()),this.unsubscribe()}}class me{constructor(be,Ue){this.notification=be,this.destination=Ue}}},1307:(bt,Ge,G)=>{"use strict";G.d(Ge,{x:()=>j});var w=G(7393);function j(){return function(he){return he.lift(new ne(he))}}class ne{constructor(he){this.connectable=he}call(he,Fe){const{connectable:ge}=this;ge._refCount++;const oe=new Oe(he,ge),ee=Fe.subscribe(oe);return oe.closed||(oe.connection=ge.connect()),ee}}class Oe extends w.L{constructor(he,Fe){super(he),this.connectable=Fe}_unsubscribe(){const{connectable:he}=this;if(!he)return void(this.connection=null);this.connectable=null;const Fe=he._refCount;if(Fe<=0)return void(this.connection=null);if(he._refCount=Fe-1,Fe>1)return void(this.connection=null);const{connection:ge}=this,oe=he._connection;this.connection=null,oe&&(!ge||oe===ge)&&oe.unsubscribe()}}},2145:(bt,Ge,G)=>{"use strict";G.d(Ge,{R:()=>j});var w=G(7393);function j(Te,he){let Fe=!1;return arguments.length>=2&&(Fe=!0),function(oe){return oe.lift(new ne(Te,he,Fe))}}class ne{constructor(he,Fe,ge=!1){this.accumulator=he,this.seed=Fe,this.hasSeed=ge}call(he,Fe){return Fe.subscribe(new Oe(he,this.accumulator,this.seed,this.hasSeed))}}class Oe extends w.L{constructor(he,Fe,ge,oe){super(he),this.accumulator=Fe,this._seed=ge,this.hasSeed=oe,this.index=0}get seed(){return this._seed}set seed(he){this.hasSeed=!0,this._seed=he}_next(he){if(this.hasSeed)return this._tryNext(he);this.seed=he,this.destination.next(he)}_tryNext(he){const Fe=this.index++;let ge;try{ge=this.accumulator(this.seed,he,Fe)}catch(oe){this.destination.error(oe)}this.seed=ge,this.destination.next(ge)}}},9761:(bt,Ge,G)=>{"use strict";G.d(Ge,{O:()=>ne});var w=G(8071),j=G(4869);function ne(...Oe){const Te=Oe[Oe.length-1];return(0,j.K)(Te)?(Oe.pop(),he=>(0,w.z)(Oe,he,Te)):he=>(0,w.z)(Oe,he)}},3101:(bt,Ge,G)=>{"use strict";G.d(Ge,{R:()=>Ae});var w=G(7574);let j=1;const ne=Promise.resolve(),Oe={};function Te(Qe){return Qe in Oe&&(delete Oe[Qe],!0)}const he={setImmediate(Qe){const Je=j++;return Oe[Je]=!0,ne.then(()=>Te(Je)&&Qe()),Je},clearImmediate(Qe){Te(Qe)}};var ge=G(6465),ee=G(6102);const ve=new class extends ee.v{flush(Je){this.active=!0,this.scheduled=void 0;const{actions:st}=this;let se,ut=-1,Gt=st.length;Je=Je||st.shift();do{if(se=Je.execute(Je.state,Je.delay))break}while(++ut<Gt&&(Je=st.shift()));if(this.active=!1,se){for(;++ut<Gt&&(Je=st.shift());)Je.unsubscribe();throw se}}}(class extends ge.o{constructor(Je,st){super(Je,st),this.scheduler=Je,this.work=st}requestAsyncId(Je,st,se=0){return null!==se&&se>0?super.requestAsyncId(Je,st,se):(Je.actions.push(this),Je.scheduled||(Je.scheduled=he.setImmediate(Je.flush.bind(Je,null))))}recycleAsyncId(Je,st,se=0){if(null!==se&&se>0||null===se&&this.delay>0)return super.recycleAsyncId(Je,st,se);0===Je.actions.length&&(he.clearImmediate(st),Je.scheduled=void 0)}});var be=G(9796);class Se extends w.y{constructor(Je,st=0,se=ve){var Qe;super(),this.source=Je,this.delayTime=st,this.scheduler=se,(!(!(0,be.k)(Qe=st)&&Qe-parseFloat(Qe)+1>=0)||st<0)&&(this.delayTime=0),(!se||"function"!=typeof se.schedule)&&(this.scheduler=ve)}static create(Je,st=0,se=ve){return new Se(Je,st,se)}static dispatch(Je){const{source:st,subscriber:se}=Je;return this.add(st.subscribe(se))}_subscribe(Je){return this.scheduler.schedule(Se.dispatch,this.delayTime,{source:this.source,subscriber:Je})}}function Ae(Qe,Je=0){return function(se){return se.lift(new it(Qe,Je))}}class it{constructor(Je,st){this.scheduler=Je,this.delay=st}call(Je,st){return new Se(st,this.delay,this.scheduler).subscribe(Je)}}},3190:(bt,Ge,G)=>{"use strict";G.d(Ge,{w:()=>Oe});var w=G(8002),j=G(4402),ne=G(5345);function Oe(Fe,ge){return"function"==typeof ge?oe=>oe.pipe(Oe((ee,te)=>(0,j.D)(Fe(ee,te)).pipe((0,w.U)((me,ve)=>ge(ee,me,te,ve))))):oe=>oe.lift(new Te(Fe))}class Te{constructor(ge){this.project=ge}call(ge,oe){return oe.subscribe(new he(ge,this.project))}}class he extends ne.Ds{constructor(ge,oe){super(ge),this.project=oe,this.index=0}_next(ge){let oe;const ee=this.index++;try{oe=this.project(ge,ee)}catch(te){return void this.destination.error(te)}this._innerSub(oe)}_innerSub(ge){const oe=this.innerSubscription;oe&&oe.unsubscribe();const ee=new ne.IY(this),te=this.destination;te.add(ee),this.innerSubscription=(0,ne.ft)(ge,ee),this.innerSubscription!==ee&&te.add(this.innerSubscription)}_complete(){const{innerSubscription:ge}=this;(!ge||ge.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(ge){this.destination.next(ge)}}},5257:(bt,Ge,G)=>{"use strict";G.d(Ge,{q:()=>Oe});var w=G(7393),j=G(7108),ne=G(9193);function Oe(Fe){return ge=>0===Fe?(0,ne.c)():ge.lift(new Te(Fe))}class Te{constructor(ge){if(this.total=ge,this.total<0)throw new j.W}call(ge,oe){return oe.subscribe(new he(ge,this.total))}}class he extends w.L{constructor(ge,oe){super(ge),this.total=oe,this.count=0}_next(ge){const oe=this.total,ee=++this.count;ee<=oe&&(this.destination.next(ge),ee===oe&&(this.destination.complete(),this.unsubscribe()))}}},3342:(bt,Ge,G)=>{"use strict";G.d(Ge,{b:()=>Oe});var w=G(7393);function j(){}var ne=G(9105);function Oe(Fe,ge,oe){return function(te){return te.lift(new Te(Fe,ge,oe))}}class Te{constructor(ge,oe,ee){this.nextOrObserver=ge,this.error=oe,this.complete=ee}call(ge,oe){return oe.subscribe(new he(ge,this.nextOrObserver,this.error,this.complete))}}class he extends w.L{constructor(ge,oe,ee,te){super(ge),this._tapNext=j,this._tapError=j,this._tapComplete=j,this._tapError=ee||j,this._tapComplete=te||j,(0,ne.m)(oe)?(this._context=this,this._tapNext=oe):oe&&(this._context=oe,this._tapNext=oe.next||j,this._tapError=oe.error||j,this._tapComplete=oe.complete||j)}_next(ge){try{this._tapNext.call(this._context,ge)}catch(oe){return void this.destination.error(oe)}this.destination.next(ge)}_error(ge){try{this._tapError.call(this._context,ge)}catch(oe){return void this.destination.error(oe)}this.destination.error(ge)}_complete(){try{this._tapComplete.call(this._context)}catch(ge){return void this.destination.error(ge)}return this.destination.complete()}}},4635:(bt,Ge,G)=>{"use strict";G.d(Ge,{T:()=>ne});var w=G(3410),j=G(7393);function ne(Fe=he){return ge=>ge.lift(new Oe(Fe))}class Oe{constructor(ge){this.errorFactory=ge}call(ge,oe){return oe.subscribe(new Te(ge,this.errorFactory))}}class Te extends j.L{constructor(ge,oe){super(ge),this.errorFactory=oe,this.hasValue=!1}_next(ge){this.hasValue=!0,this.destination.next(ge)}_complete(){if(this.hasValue)return this.destination.complete();{let ge;try{ge=this.errorFactory()}catch(oe){ge=oe}this.destination.error(ge)}}}function he(){return new w.K}},4087:(bt,Ge,G)=>{"use strict";G.d(Ge,{r:()=>ne});var w=G(7574),j=G(5319);function ne(Oe,Te){return new w.y(he=>{const Fe=new j.w;let ge=0;return Fe.add(Te.schedule(function(){ge!==Oe.length?(he.next(Oe[ge++]),he.closed||Fe.add(this.schedule())):he.complete()})),Fe})}},6465:(bt,Ge,G)=>{"use strict";G.d(Ge,{o:()=>ne});var w=G(5319);class j extends w.w{constructor(Te,he){super()}schedule(Te,he=0){return this}}class ne extends j{constructor(Te,he){super(Te,he),this.scheduler=Te,this.work=he,this.pending=!1}schedule(Te,he=0){if(this.closed)return this;this.state=Te;const Fe=this.id,ge=this.scheduler;return null!=Fe&&(this.id=this.recycleAsyncId(ge,Fe,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(ge,this.id,he),this}requestAsyncId(Te,he,Fe=0){return setInterval(Te.flush.bind(Te,this),Fe)}recycleAsyncId(Te,he,Fe=0){if(null!==Fe&&this.delay===Fe&&!1===this.pending)return he;clearInterval(he)}execute(Te,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(Te,he);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Te,he){let ge,Fe=!1;try{this.work(Te)}catch(oe){Fe=!0,ge=!!oe&&oe||new Error(oe)}if(Fe)return this.unsubscribe(),ge}_unsubscribe(){const Te=this.id,he=this.scheduler,Fe=he.actions,ge=Fe.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ge&&Fe.splice(ge,1),null!=Te&&(this.id=this.recycleAsyncId(he,Te,null)),this.delay=null}}},6102:(bt,Ge,G)=>{"use strict";G.d(Ge,{v:()=>j});let w=(()=>{class ne{constructor(Te,he=ne.now){this.SchedulerAction=Te,this.now=he}schedule(Te,he=0,Fe){return new this.SchedulerAction(this,Te).schedule(Fe,he)}}return ne.now=()=>Date.now(),ne})();class j extends w{constructor(Oe,Te=w.now){super(Oe,()=>j.delegate&&j.delegate!==this?j.delegate.now():Te()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Oe,Te=0,he){return j.delegate&&j.delegate!==this?j.delegate.schedule(Oe,Te,he):super.schedule(Oe,Te,he)}flush(Oe){const{actions:Te}=this;if(this.active)return void Te.push(Oe);let he;this.active=!0;do{if(he=Oe.execute(Oe.state,Oe.delay))break}while(Oe=Te.shift());if(this.active=!1,he){for(;Oe=Te.shift();)Oe.unsubscribe();throw he}}}},3637:(bt,Ge,G)=>{"use strict";G.d(Ge,{z:()=>ne,P:()=>Oe});var w=G(6465);const ne=new(G(6102).v)(w.o),Oe=ne},7771:(bt,Ge,G)=>{"use strict";G.d(Ge,{c:()=>he,N:()=>Te});var w=G(6465),ne=G(6102);const Te=new class extends ne.v{}(class extends w.o{constructor(ge,oe){super(ge,oe),this.scheduler=ge,this.work=oe}schedule(ge,oe=0){return oe>0?super.schedule(ge,oe):(this.delay=oe,this.state=ge,this.scheduler.flush(this),this)}execute(ge,oe){return oe>0||this.closed?super.execute(ge,oe):this._execute(ge,oe)}requestAsyncId(ge,oe,ee=0){return null!==ee&&ee>0||null===ee&&this.delay>0?super.requestAsyncId(ge,oe,ee):ge.flush(this)}}),he=Te},377:(bt,Ge,G)=>{"use strict";G.d(Ge,{hZ:()=>j});const j="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(bt,Ge,G)=>{"use strict";G.d(Ge,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(bt,Ge,G)=>{"use strict";G.d(Ge,{b:()=>w});const w="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(bt,Ge,G)=>{"use strict";G.d(Ge,{W:()=>j});const j=(()=>{function ne(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return ne.prototype=Object.create(Error.prototype),ne})()},3410:(bt,Ge,G)=>{"use strict";G.d(Ge,{K:()=>j});const j=(()=>{function ne(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return ne.prototype=Object.create(Error.prototype),ne})()},7971:(bt,Ge,G)=>{"use strict";G.d(Ge,{N:()=>j});const j=(()=>{function ne(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ne.prototype=Object.create(Error.prototype),ne})()},4449:(bt,Ge,G)=>{"use strict";function w(j){setTimeout(()=>{throw j},0)}G.d(Ge,{z:()=>w})},4487:(bt,Ge,G)=>{"use strict";function w(j){return j}G.d(Ge,{y:()=>w})},9796:(bt,Ge,G)=>{"use strict";G.d(Ge,{k:()=>w});const w=Array.isArray||(j=>j&&"number"==typeof j.length)},9489:(bt,Ge,G)=>{"use strict";G.d(Ge,{z:()=>w});const w=j=>j&&"number"==typeof j.length&&"function"!=typeof j},9105:(bt,Ge,G)=>{"use strict";function w(j){return"function"==typeof j}G.d(Ge,{m:()=>w})},1555:(bt,Ge,G)=>{"use strict";function w(j){return null!==j&&"object"==typeof j}G.d(Ge,{K:()=>w})},4072:(bt,Ge,G)=>{"use strict";function w(j){return!!j&&"function"!=typeof j.subscribe&&"function"==typeof j.then}G.d(Ge,{t:()=>w})},4869:(bt,Ge,G)=>{"use strict";function w(j){return j&&"function"==typeof j.schedule}G.d(Ge,{K:()=>w})},7444:(bt,Ge,G)=>{"use strict";G.d(Ge,{s:()=>te});var w=G(5015),j=G(4449),Oe=G(377),he=G(6554),ge=G(9489),oe=G(4072),ee=G(1555);const te=me=>{if(me&&"function"==typeof me[he.L])return(me=>ve=>{const be=me[he.L]();if("function"!=typeof be.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return be.subscribe(ve)})(me);if((0,ge.z)(me))return(0,w.V)(me);if((0,oe.t)(me))return(me=>ve=>(me.then(be=>{ve.closed||(ve.next(be),ve.complete())},be=>ve.error(be)).then(null,j.z),ve))(me);if(me&&"function"==typeof me[Oe.hZ])return(me=>ve=>{const be=me[Oe.hZ]();for(;;){let Ue;try{Ue=be.next()}catch(Se){return ve.error(Se),ve}if(Ue.done){ve.complete();break}if(ve.next(Ue.value),ve.closed)break}return"function"==typeof be.return&&ve.add(()=>{be.return&&be.return()}),ve})(me);{const be=`You provided ${(0,ee.K)(me)?"an invalid object":`'${me}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(be)}}},5015:(bt,Ge,G)=>{"use strict";G.d(Ge,{V:()=>w});const w=j=>ne=>{for(let Oe=0,Te=j.length;Oe<Te&&!ne.closed;Oe++)ne.next(j[Oe]);ne.complete()}},9212:(bt,Ge,G)=>{"use strict";var w=G(8583),j=G(3018);class ne extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Oe extends ne{static makeCurrent(){(0,w.HT)(new Oe)}onAndCancel(T,M,$){return T.addEventListener(M,$,!1),()=>{T.removeEventListener(M,$,!1)}}dispatchEvent(T,M){T.dispatchEvent(M)}remove(T){T.parentNode&&T.parentNode.removeChild(T)}createElement(T,M){return(M=M||this.getDefaultDocument()).createElement(T)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(T){return T.nodeType===Node.ELEMENT_NODE}isShadowRoot(T){return T instanceof DocumentFragment}getGlobalEventTarget(T,M){return"window"===M?window:"document"===M?T:"body"===M?T.body:null}getBaseHref(T){const M=(Te=Te||document.querySelector("base"),Te?Te.getAttribute("href"):null);return null==M?null:function(R){Fe=Fe||document.createElement("a"),Fe.setAttribute("href",R);const T=Fe.pathname;return"/"===T.charAt(0)?T:`/${T}`}(M)}resetBaseElement(){Te=null}getUserAgent(){return window.navigator.userAgent}getCookie(T){return(0,w.Mx)(document.cookie,T)}}let Fe,Te=null;const oe=new j.OlP("TRANSITION_ID"),te=[{provide:j.ip1,useFactory:function(R,T,M){return()=>{M.get(j.CZH).donePromise.then(()=>{const $=(0,w.q)(),Q=T.querySelectorAll(`style[ng-transition="${R}"]`);for(let Ie=0;Ie<Q.length;Ie++)$.remove(Q[Ie])})}},deps:[oe,w.K0,j.zs3],multi:!0}];class me{static init(){(0,j.VLi)(new me)}addToWindow(T){j.dqk.getAngularTestability=($,Q=!0)=>{const Ie=T.findTestabilityInTree($,Q);if(null==Ie)throw new Error("Could not find testability for element.");return Ie},j.dqk.getAllAngularTestabilities=()=>T.getAllTestabilities(),j.dqk.getAllAngularRootElements=()=>T.getAllRootElements(),j.dqk.frameworkStabilizers||(j.dqk.frameworkStabilizers=[]),j.dqk.frameworkStabilizers.push($=>{const Q=j.dqk.getAllAngularTestabilities();let Ie=Q.length,je=!1;const At=function(gt){je=je||gt,Ie--,0==Ie&&$(je)};Q.forEach(function(gt){gt.whenStable(At)})})}findTestabilityInTree(T,M,$){if(null==M)return null;const Q=T.getTestability(M);return null!=Q?Q:$?(0,w.q)().isShadowRoot(M)?this.findTestabilityInTree(T,M.host,!0):this.findTestabilityInTree(T,M.parentElement,!0):null}}let ve=(()=>{class R{build(){return new XMLHttpRequest}}return R.\u0275fac=function(M){return new(M||R)},R.\u0275prov=j.Yz7({token:R,factory:R.\u0275fac}),R})();const fe=new j.OlP("EventManagerPlugins");let Re=(()=>{class R{constructor(M,$){this._zone=$,this._eventNameToPlugin=new Map,M.forEach(Q=>Q.manager=this),this._plugins=M.slice().reverse()}addEventListener(M,$,Q){return this._findPluginFor($).addEventListener(M,$,Q)}addGlobalEventListener(M,$,Q){return this._findPluginFor($).addGlobalEventListener(M,$,Q)}getZone(){return this._zone}_findPluginFor(M){const $=this._eventNameToPlugin.get(M);if($)return $;const Q=this._plugins;for(let Ie=0;Ie<Q.length;Ie++){const je=Q[Ie];if(je.supports(M))return this._eventNameToPlugin.set(M,je),je}throw new Error(`No event manager plugin found for event ${M}`)}}return R.\u0275fac=function(M){return new(M||R)(j.LFG(fe),j.LFG(j.R0b))},R.\u0275prov=j.Yz7({token:R,factory:R.\u0275fac}),R})();class ye{constructor(T){this._doc=T}addGlobalEventListener(T,M,$){const Q=(0,w.q)().getGlobalEventTarget(this._doc,T);if(!Q)throw new Error(`Unsupported event target ${Q} for event ${M}`);return this.addEventListener(Q,M,$)}}let Ce=(()=>{class R{constructor(){this._stylesSet=new Set}addStyles(M){const $=new Set;M.forEach(Q=>{this._stylesSet.has(Q)||(this._stylesSet.add(Q),$.add(Q))}),this.onStylesAdded($)}onStylesAdded(M){}getAllStyles(){return Array.from(this._stylesSet)}}return R.\u0275fac=function(M){return new(M||R)},R.\u0275prov=j.Yz7({token:R,factory:R.\u0275fac}),R})(),Xe=(()=>{class R extends Ce{constructor(M){super(),this._doc=M,this._hostNodes=new Map,this._hostNodes.set(M.head,[])}_addStylesToHost(M,$,Q){M.forEach(Ie=>{const je=this._doc.createElement("style");je.textContent=Ie,Q.push($.appendChild(je))})}addHost(M){const $=[];this._addStylesToHost(this._stylesSet,M,$),this._hostNodes.set(M,$)}removeHost(M){const $=this._hostNodes.get(M);$&&$.forEach(Et),this._hostNodes.delete(M)}onStylesAdded(M){this._hostNodes.forEach(($,Q)=>{this._addStylesToHost(M,Q,$)})}ngOnDestroy(){this._hostNodes.forEach(M=>M.forEach(Et))}}return R.\u0275fac=function(M){return new(M||R)(j.LFG(w.K0))},R.\u0275prov=j.Yz7({token:R,factory:R.\u0275fac}),R})();function Et(R){(0,w.q)().remove(R)}const Yt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ot=/%COMP%/g;function ht(R,T,M){for(let $=0;$<T.length;$++){let Q=T[$];Array.isArray(Q)?ht(R,Q,M):(Q=Q.replace(ot,R),M.push(Q))}return M}function jt(R){return T=>{if("__ngUnwrap__"===T)return R;!1===R(T)&&(T.preventDefault(),T.returnValue=!1)}}let Fn=(()=>{class R{constructor(M,$,Q){this.eventManager=M,this.sharedStylesHost=$,this.appId=Q,this.rendererByCompId=new Map,this.defaultRenderer=new un(M)}createRenderer(M,$){if(!M||!$)return this.defaultRenderer;switch($.encapsulation){case j.ifc.Emulated:{let Q=this.rendererByCompId.get($.id);return Q||(Q=new Tn(this.eventManager,this.sharedStylesHost,$,this.appId),this.rendererByCompId.set($.id,Q)),Q.applyToHost(M),Q}case 1:case j.ifc.ShadowDom:return new Sn(this.eventManager,this.sharedStylesHost,M,$);default:if(!this.rendererByCompId.has($.id)){const Q=ht($.id,$.styles,[]);this.sharedStylesHost.addStyles(Q),this.rendererByCompId.set($.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return R.\u0275fac=function(M){return new(M||R)(j.LFG(Re),j.LFG(Xe),j.LFG(j.AFp))},R.\u0275prov=j.Yz7({token:R,factory:R.\u0275fac}),R})();class un{constructor(T){this.eventManager=T,this.data=Object.create(null)}destroy(){}createElement(T,M){return M?document.createElementNS(Yt[M]||M,T):document.createElement(T)}createComment(T){return document.createComment(T)}createText(T){return document.createTextNode(T)}appendChild(T,M){T.appendChild(M)}insertBefore(T,M,$){T&&T.insertBefore(M,$)}removeChild(T,M){T&&T.removeChild(M)}selectRootElement(T,M){let $="string"==typeof T?document.querySelector(T):T;if(!$)throw new Error(`The selector "${T}" did not match any elements`);return M||($.textContent=""),$}parentNode(T){return T.parentNode}nextSibling(T){return T.nextSibling}setAttribute(T,M,$,Q){if(Q){M=Q+":"+M;const Ie=Yt[Q];Ie?T.setAttributeNS(Ie,M,$):T.setAttribute(M,$)}else T.setAttribute(M,$)}removeAttribute(T,M,$){if($){const Q=Yt[$];Q?T.removeAttributeNS(Q,M):T.removeAttribute(`${$}:${M}`)}else T.removeAttribute(M)}addClass(T,M){T.classList.add(M)}removeClass(T,M){T.classList.remove(M)}setStyle(T,M,$,Q){Q&(j.JOm.DashCase|j.JOm.Important)?T.style.setProperty(M,$,Q&j.JOm.Important?"important":""):T.style[M]=$}removeStyle(T,M,$){$&j.JOm.DashCase?T.style.removeProperty(M):T.style[M]=""}setProperty(T,M,$){T[M]=$}setValue(T,M){T.nodeValue=M}listen(T,M,$){return"string"==typeof T?this.eventManager.addGlobalEventListener(T,M,jt($)):this.eventManager.addEventListener(T,M,jt($))}}class Tn extends un{constructor(T,M,$,Q){super(T),this.component=$;const Ie=ht(Q+"-"+$.id,$.styles,[]);M.addStyles(Ie),this.contentAttr="_ngcontent-%COMP%".replace(ot,Q+"-"+$.id),this.hostAttr="_nghost-%COMP%".replace(ot,Q+"-"+$.id)}applyToHost(T){super.setAttribute(T,this.hostAttr,"")}createElement(T,M){const $=super.createElement(T,M);return super.setAttribute($,this.contentAttr,""),$}}class Sn extends un{constructor(T,M,$,Q){super(T),this.sharedStylesHost=M,this.hostEl=$,this.shadowRoot=$.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ie=ht(Q.id,Q.styles,[]);for(let je=0;je<Ie.length;je++){const At=document.createElement("style");At.textContent=Ie[je],this.shadowRoot.appendChild(At)}}nodeOrShadowRoot(T){return T===this.hostEl?this.shadowRoot:T}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(T,M){return super.appendChild(this.nodeOrShadowRoot(T),M)}insertBefore(T,M,$){return super.insertBefore(this.nodeOrShadowRoot(T),M,$)}removeChild(T,M){return super.removeChild(this.nodeOrShadowRoot(T),M)}parentNode(T){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(T)))}}let hn=(()=>{class R extends ye{constructor(M){super(M)}supports(M){return!0}addEventListener(M,$,Q){return M.addEventListener($,Q,!1),()=>this.removeEventListener(M,$,Q)}removeEventListener(M,$,Q){return M.removeEventListener($,Q)}}return R.\u0275fac=function(M){return new(M||R)(j.LFG(w.K0))},R.\u0275prov=j.Yz7({token:R,factory:R.\u0275fac}),R})();const wn=["alt","control","meta","shift"],St={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Vt={alt:R=>R.altKey,control:R=>R.ctrlKey,meta:R=>R.metaKey,shift:R=>R.shiftKey};let de=(()=>{class R extends ye{constructor(M){super(M)}supports(M){return null!=R.parseEventName(M)}addEventListener(M,$,Q){const Ie=R.parseEventName($),je=R.eventCallback(Ie.fullKey,Q,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(M,Ie.domEventName,je))}static parseEventName(M){const $=M.toLowerCase().split("."),Q=$.shift();if(0===$.length||"keydown"!==Q&&"keyup"!==Q)return null;const Ie=R._normalizeKey($.pop());let je="";if(wn.forEach(gt=>{const Lt=$.indexOf(gt);Lt>-1&&($.splice(Lt,1),je+=gt+".")}),je+=Ie,0!=$.length||0===Ie.length)return null;const At={};return At.domEventName=Q,At.fullKey=je,At}static getEventFullKey(M){let $="",Q=function(R){let T=R.key;if(null==T){if(T=R.keyIdentifier,null==T)return"Unidentified";T.startsWith("U+")&&(T=String.fromCharCode(parseInt(T.substring(2),16)),3===R.location&&Gn.hasOwnProperty(T)&&(T=Gn[T]))}return St[T]||T}(M);return Q=Q.toLowerCase()," "===Q?Q="space":"."===Q&&(Q="dot"),wn.forEach(Ie=>{Ie!=Q&&Vt[Ie](M)&&($+=Ie+".")}),$+=Q,$}static eventCallback(M,$,Q){return Ie=>{R.getEventFullKey(Ie)===M&&Q.runGuarded(()=>$(Ie))}}static _normalizeKey(M){switch(M){case"esc":return"escape";default:return M}}}return R.\u0275fac=function(M){return new(M||R)(j.LFG(w.K0))},R.\u0275prov=j.Yz7({token:R,factory:R.\u0275fac}),R})();const Vn=(0,j.eFA)(j._c5,"browser",[{provide:j.Lbi,useValue:w.bD},{provide:j.g9A,useValue:function(){Oe.makeCurrent(),me.init()},multi:!0},{provide:w.K0,useFactory:function(){return(0,j.RDi)(document),document},deps:[]}]),Ls=[[],{provide:j.zSh,useValue:"root"},{provide:j.qLn,useFactory:function(){return new j.qLn},deps:[]},{provide:fe,useClass:hn,multi:!0,deps:[w.K0,j.R0b,j.Lbi]},{provide:fe,useClass:de,multi:!0,deps:[w.K0]},[],{provide:Fn,useClass:Fn,deps:[Re,Xe,j.AFp]},{provide:j.FYo,useExisting:Fn},{provide:Ce,useExisting:Xe},{provide:Xe,useClass:Xe,deps:[w.K0]},{provide:j.dDg,useClass:j.dDg,deps:[j.R0b]},{provide:Re,useClass:Re,deps:[fe,j.R0b]},{provide:w.JF,useClass:ve,deps:[]},[]];let vs=(()=>{class R{constructor(M){if(M)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(M){return{ngModule:R,providers:[{provide:j.AFp,useValue:M.appId},{provide:oe,useExisting:j.AFp},te]}}}return R.\u0275fac=function(M){return new(M||R)(j.LFG(R,12))},R.\u0275mod=j.oAB({type:R}),R.\u0275inj=j.cJS({providers:Ls,imports:[w.ez,j.hGG]}),R})();"undefined"!=typeof window&&window;var Jn=G(6575);const $i=[{path:"home",loadChildren:()=>G.e(276).then(G.bind(G,276)).then(R=>R.BienvenidaModule).catch(R=>{console.log(R)})},{path:"login",loadChildren:()=>G.e(671).then(G.bind(G,6671)).then(R=>R.LoginModule).catch(R=>{console.log(R)})},{path:"producto/alta",loadChildren:()=>G.e(663).then(G.bind(G,1663)).then(R=>R.AltaProductoModule).catch(R=>{console.log(R)})},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",component:(()=>{class R{constructor(){}ngOnInit(){}}return R.\u0275fac=function(M){return new(M||R)},R.\u0275cmp=j.Xpm({type:R,selectors:[["app-error"]],decls:11,vars:0,consts:[[1,"page"],[1,"page-wrap","d-flex","flex-row","align-items-center"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-12","text-center"],[1,"display-1","d-block"],[1,"mb-4","lead"],["routerLink","../home",1,"btn","btn-link"]],template:function(M,$){1&M&&(j.TgZ(0,"section",0),j.TgZ(1,"div",1),j.TgZ(2,"div",2),j.TgZ(3,"div",3),j.TgZ(4,"div",4),j.TgZ(5,"span",5),j._uU(6,"Error 404"),j.qZA(),j.TgZ(7,"div",6),j._uU(8,"No se encontr\xf3 el sitio. Probablemente te fuiste de la p\xe1gina."),j.qZA(),j.TgZ(9,"a",7),j._uU(10,"Volver a la p\xe1gina principal"),j.qZA(),j.qZA(),j.qZA(),j.qZA(),j.qZA(),j.qZA())},directives:[Jn.yS],styles:[".page[_ngcontent-%COMP%]{background:#dedede}.page-wrap[_ngcontent-%COMP%]{min-height:100vh}"]}),R})()}];let Vs=(()=>{class R{}return R.\u0275fac=function(M){return new(M||R)},R.\u0275mod=j.oAB({type:R}),R.\u0275inj=j.cJS({imports:[[Jn.Bz.forRoot($i)],Jn.Bz]}),R})(),zt=(()=>{class R{constructor(){this.title="PP-LaboIV"}}return R.\u0275fac=function(M){return new(M||R)},R.\u0275cmp=j.Xpm({type:R,selectors:[["app-root"]],decls:1,vars:0,template:function(M,$){1&M&&j._UZ(0,"router-outlet")},directives:[Jn.lC],styles:[""]}),R})();var rs=G(8939),is=G(166),Us=G(7574),Gr=G(5917),or=G(4402),Ci=G(7393),Oi=G(3637);class Rn{constructor(T,M){this.dueTime=T,this.scheduler=M}call(T,M){return M.subscribe(new ss(T,this.dueTime,this.scheduler))}}class ss extends Ci.L{constructor(T,M,$){super(T),this.dueTime=M,this.scheduler=$,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(T){this.clearDebounce(),this.lastValue=T,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Hi,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:T}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(T)}}clearDebounce(){const T=this.debouncedSubscription;null!==T&&(this.remove(T),T.unsubscribe(),this.debouncedSubscription=null)}}function Hi(R){R.debouncedNext()}var os=G(8002),Wr=G(3190),_r=G(9126),Pi=G(4486),dr=G(8239),ar=G(5452),jn=G(3854),Pr=G(6034),on=(()=>{return(R=on||(on={}))[R.NO_ERROR=0]="NO_ERROR",R[R.NETWORK_ERROR=1]="NETWORK_ERROR",R[R.ABORT=2]="ABORT",on;var R})();const kr="firebasestorage.googleapis.com",ki="storageBucket";class In extends jn.ZR{constructor(T,M){super(Cs(T),`Firebase Storage: ${M} (${Cs(T)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,In.prototype)}_codeEquals(T){return Cs(T)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(T){this.customData.serverResponse=T,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Cs(R){return"storage/"+R}function Xn(){return new In("unknown","An unknown error occurred, please check the error payload for server response.")}function Bs(){return new In("canceled","User canceled the upload/download.")}function _o(){return new In("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Wi(){return new In("no-download-url","The given file does not have any download URLs.")}function qr(R){return new In("invalid-argument",R)}function ro(){return new In("app-deleted","The Firebase app was deleted.")}function bs(R){return new In("invalid-root-operation","The operation '"+R+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Kr(R,T){return new In("invalid-format","String does not match format '"+R+"': "+T)}function io(R){throw new In("internal-error","Internal error: "+R)}class Fi{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=on.NO_ERROR,this.sendPromise_=new Promise(T=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=on.ABORT,T()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=on.NETWORK_ERROR,T()}),this.xhr_.addEventListener("load",()=>{T()})})}send(T,M,$,Q){if(this.sent_)throw io("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(M,T,!0),void 0!==Q)for(const Ie in Q)Q.hasOwnProperty(Ie)&&this.xhr_.setRequestHeader(Ie,Q[Ie].toString());return void 0!==$?this.xhr_.send($):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw io("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw io("cannot .getStatus() before sending");try{return this.xhr_.status}catch(T){return-1}}getResponseText(){if(!this.sent_)throw io("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(T){return this.xhr_.getResponseHeader(T)}addUploadProgressListener(T){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",T)}removeUploadProgressListener(T){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",T)}}class bi{createConnection(){return new Fi}}class zn{constructor(T,M){this.bucket=T,this.path_=M}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const T=encodeURIComponent;return"/b/"+T(this.bucket)+"/o/"+T(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(T,M){let $;try{$=zn.makeFromUrl(T,M)}catch(Q){return new zn(T,"")}if(""===$.path)return $;throw new In("invalid-default-bucket","Invalid default bucket '"+T+"'.")}static makeFromUrl(T,M){let $=null;const Q="([A-Za-z0-9.\\-_]+)",At=new RegExp("^gs://"+Q+"(/(.*))?$","i");function Lt(ri){ri.path_=decodeURIComponent(ri.path)}const pr=M.replace(/[.]/g,"\\."),ui=[{regex:At,indices:{bucket:1,path:3},postModify:function(ri){"/"===ri.path.charAt(ri.path.length-1)&&(ri.path_=ri.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${pr}/v[A-Za-z0-9_]+/b/${Q}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Lt},{regex:new RegExp(`^https?://${M===kr?"(?:storage.googleapis.com|storage.cloud.google.com)":M}/${Q}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Lt}];for(let ri=0;ri<ui.length;ri++){const ra=ui[ri],li=ra.regex.exec(T);if(li){let Wo=li[ra.indices.path];Wo||(Wo=""),$=new zn(li[ra.indices.bucket],Wo),ra.postModify($);break}}if(null==$)throw new In("invalid-url","Invalid URL '"+T+"'.");return $}}class us{constructor(T){this.promise_=Promise.reject(T)}getPromise(){return this.promise_}cancel(T=!1){}}function zi(R){return"string"==typeof R||R instanceof String}function Zr(R){return Di()&&R instanceof Blob}function Di(){return"undefined"!=typeof Blob}function Yr(R,T,M,$){if($<T)throw qr(`Invalid value for '${R}'. Expected ${T} or greater.`);if($>M)throw qr(`Invalid value for '${R}'. Expected ${M} or less.`)}function Ar(R,T,M){let $=T;return null==M&&($=`https://${T}`),`${M}://${$}/v0${R}`}function L(R){const T=encodeURIComponent;let M="?";for(const $ in R)R.hasOwnProperty($)&&(M=M+(T($)+"=")+T(R[$])+"&");return M=M.slice(0,-1),M}class z{constructor(T,M,$,Q,Ie,je,At,gt,Lt,gn,pr){this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=T,this.method_=M,this.headers_=$,this.body_=Q,this.successCodes_=Ie.slice(),this.additionalRetryCodes_=je.slice(),this.callback_=At,this.errorCallback_=gt,this.progressCallback_=gn,this.timeout_=Lt,this.pool_=pr,this.promise_=new Promise((mt,Yn)=>{this.resolve_=mt,this.reject_=Yn,this.start_()})}start_(){const T=this;function $(Q,Ie){const je=T.resolve_,At=T.reject_,gt=Ie.connection;if(Ie.wasSuccessCode)try{const Lt=T.callback_(gt,gt.getResponseText());void 0!==Lt?je(Lt):je()}catch(Lt){At(Lt)}else if(null!==gt){const Lt=Xn();Lt.serverResponse=gt.getResponseText(),At(T.errorCallback_?T.errorCallback_(gt,Lt):Lt)}else At(Ie.canceled?T.appDelete_?ro():Bs():new In("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?$(0,new F(!1,null,!0)):this.backoffId_=function(R,T,M){let $=1,Q=null,Ie=!1,je=0;function At(){return 2===je}let gt=!1;function Lt(...En){gt||(gt=!0,T.apply(null,En))}function gn(En){Q=setTimeout(()=>{Q=null,R(pr,At())},En)}function pr(En,...Rr){if(gt)return;if(En)return void Lt.call(null,En,...Rr);if(At()||Ie)return void Lt.call(null,En,...Rr);let Wn;$<64&&($*=2),1===je?(je=2,Wn=0):Wn=1e3*($+Math.random()),gn(Wn)}let mt=!1;function Yn(En){mt||(mt=!0,!gt&&(null!==Q?(En||(je=2),clearTimeout(Q),gn(0)):En||(je=1)))}return gn(0),setTimeout(()=>{Ie=!0,Yn(!0)},M),Yn}(function(Q,Ie){if(Ie)return void Q(!1,new F(!1,null,!0));const je=T.pool_.createConnection();function At(gt){null!==T.progressCallback_&&T.progressCallback_(gt.loaded,gt.lengthComputable?gt.total:-1)}T.pendingConnection_=je,null!==T.progressCallback_&&je.addUploadProgressListener(At),je.send(T.url_,T.method_,T.body_,T.headers_).then(()=>{null!==T.progressCallback_&&je.removeUploadProgressListener(At),T.pendingConnection_=null;const gt=je.getErrorCode()===on.NO_ERROR,Lt=je.getStatus();if(!gt||T.isRetryStatusCode_(Lt)){const pr=je.getErrorCode()===on.ABORT;return void Q(!1,new F(!1,null,pr))}const gn=-1!==T.successCodes_.indexOf(Lt);Q(!0,new F(gn,je))})},$,this.timeout_)}getPromise(){return this.promise_}cancel(T){this.canceled_=!0,this.appDelete_=T||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(T){const M=T>=500&&T<600,Q=-1!==[408,429].indexOf(T),Ie=-1!==this.additionalRetryCodes_.indexOf(T);return M||Q||Ie}}class F{constructor(T,M,$){this.wasSuccessCode=T,this.connection=M,this.canceled=!!$}}function S(...R){const T="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==T){const M=new T;for(let $=0;$<R.length;$++)M.append(R[$]);return M.getBlob()}if(Di())return new Blob(R);throw new In("unsupported-environment","This browser doesn't seem to support creating Blobs")}const nt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dt{constructor(T,M){this.data=T,this.contentType=M||null}}function xn(R,T){switch(R){case nt.RAW:return new Dt(Lr(T));case nt.BASE64:case nt.BASE64URL:return new Dt(Nn(R,T));case nt.DATA_URL:return new Dt(function(R){const T=new pi(R);return T.base64?Nn(nt.BASE64,T.rest):function(R){let T;try{T=decodeURIComponent(R)}catch(M){throw Kr(nt.DATA_URL,"Malformed data URL.")}return Lr(T)}(T.rest)}(T),function(R){return new pi(R).contentType}(T))}throw Xn()}function Lr(R){const T=[];for(let M=0;M<R.length;M++){let $=R.charCodeAt(M);$<=127?T.push($):$<=2047?T.push(192|$>>6,128|63&$):55296==(64512&$)?M<R.length-1&&56320==(64512&R.charCodeAt(M+1))?($=65536|(1023&$)<<10|1023&R.charCodeAt(++M),T.push(240|$>>18,128|$>>12&63,128|$>>6&63,128|63&$)):T.push(239,191,189):56320==(64512&$)?T.push(239,191,189):T.push(224|$>>12,128|$>>6&63,128|63&$)}return new Uint8Array(T)}function Nn(R,T){switch(R){case nt.BASE64:{const Q=-1!==T.indexOf("-"),Ie=-1!==T.indexOf("_");if(Q||Ie)throw Kr(R,"Invalid character '"+(Q?"-":"_")+"' found: is it base64url encoded?");break}case nt.BASE64URL:{const Q=-1!==T.indexOf("+"),Ie=-1!==T.indexOf("/");if(Q||Ie)throw Kr(R,"Invalid character '"+(Q?"+":"/")+"' found: is it base64 encoded?");T=T.replace(/-/g,"+").replace(/_/g,"/");break}}let M;try{M=function(R){return atob(R)}(T)}catch(Q){throw Kr(R,"Invalid character found")}const $=new Uint8Array(M.length);for(let Q=0;Q<M.length;Q++)$[Q]=M.charCodeAt(Q);return $}class pi{constructor(T){this.base64=!1,this.contentType=null;const M=T.match(/^data:([^,]+)?,/);if(null===M)throw Kr(nt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const $=M[1]||null;null!=$&&(this.base64=function(R,T){return R.length>=T.length&&R.substring(R.length-T.length)===T}($,";base64"),this.contentType=this.base64?$.substring(0,$.length-";base64".length):$),this.rest=T.substring(T.indexOf(",")+1)}}class ai{constructor(T,M){let $=0,Q="";Zr(T)?(this.data_=T,$=T.size,Q=T.type):T instanceof ArrayBuffer?(M?this.data_=new Uint8Array(T):(this.data_=new Uint8Array(T.byteLength),this.data_.set(new Uint8Array(T))),$=this.data_.length):T instanceof Uint8Array&&(M?this.data_=T:(this.data_=new Uint8Array(T.length),this.data_.set(T)),$=T.length),this.size_=$,this.type_=Q}size(){return this.size_}type(){return this.type_}slice(T,M){if(Zr(this.data_)){const Q=function(R,T,M){return R.webkitSlice?R.webkitSlice(T,M):R.mozSlice?R.mozSlice(T,M):R.slice?R.slice(T,M):null}(this.data_,T,M);return null===Q?null:new ai(Q)}{const $=new Uint8Array(this.data_.buffer,T,M-T);return new ai($,!0)}}static getBlob(...T){if(Di()){const M=T.map($=>$ instanceof ai?$.data_:$);return new ai(S.apply(null,M))}{const M=T.map(je=>zi(je)?xn(nt.RAW,je).data:je.data_);let $=0;M.forEach(je=>{$+=je.byteLength});const Q=new Uint8Array($);let Ie=0;return M.forEach(je=>{for(let At=0;At<je.length;At++)Q[Ie++]=je[At]}),new ai(Q,!0)}}uploadData(){return this.data_}}function Mo(R){let T;try{T=JSON.parse(R)}catch(M){return null}return function(R){return"object"==typeof R&&!Array.isArray(R)}(T)?T:null}function $a(R){const T=R.lastIndexOf("/",R.length-2);return-1===T?R:R.slice(T+1)}function Gu(R,T){return T}class Jr{constructor(T,M,$,Q){this.server=T,this.local=M||T,this.writable=!!$,this.xform=Q||Gu}}let Oo=null;function Po(){if(Oo)return Oo;const R=[];R.push(new Jr("bucket")),R.push(new Jr("generation")),R.push(new Jr("metageneration")),R.push(new Jr("name","fullPath",!0));const M=new Jr("name");M.xform=function(Ie,je){return function(R){return!zi(R)||R.length<2?R:$a(R)}(je)},R.push(M);const Q=new Jr("size");return Q.xform=function(Ie,je){return void 0!==je?Number(je):je},R.push(Q),R.push(new Jr("timeCreated")),R.push(new Jr("updated")),R.push(new Jr("md5Hash",null,!0)),R.push(new Jr("cacheControl",null,!0)),R.push(new Jr("contentDisposition",null,!0)),R.push(new Jr("contentEncoding",null,!0)),R.push(new Jr("contentLanguage",null,!0)),R.push(new Jr("contentType",null,!0)),R.push(new Jr("metadata","customMetadata",!0)),Oo=R,Oo}function Ga(R,T,M){const $=Mo(T);return null===$?null:function(R,T,M){const $={type:"file"},Q=M.length;for(let Ie=0;Ie<Q;Ie++){const je=M[Ie];$[je.local]=je.xform($,T[je.server])}return function(R,T){Object.defineProperty(R,"ref",{get:function(){const Ie=new zn(R.bucket,R.fullPath);return T._makeStorageReference(Ie)}})}($,R),$}(R,$,M)}function ea(R,T){const M={},$=T.length;for(let Q=0;Q<$;Q++){const Ie=T[Q];Ie.writable&&(M[Ie.server]=R[Ie.local])}return JSON.stringify(M)}const $s="prefixes";class cs{constructor(T,M,$,Q){this.url=T,this.method=M,this.handler=$,this.timeout=Q,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ti(R){if(!R)throw Xn()}function ao(R,T){return function($,Q){const Ie=Ga(R,Q,T);return Ti(null!==Ie),Ie}}function vr(R){return function(M,$){let Q;return Q=401===M.getStatus()?M.getResponseText().includes("Firebase App Check token is invalid")?new In("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new In("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===M.getStatus()?function(R){return new In("quota-exceeded","Quota for bucket '"+R+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(R.bucket):403===M.getStatus()?function(R){return new In("unauthorized","User does not have permission to access '"+R+"'.")}(R.path):$,Q.serverResponse=$.serverResponse,Q}}function va(R){const T=vr(R);return function($,Q){let Ie=T($,Q);return 404===$.getStatus()&&(Ie=function(R){return new In("object-not-found","Object '"+R+"' does not exist.")}(R.path)),Ie.serverResponse=Q.serverResponse,Ie}}function $n(R,T,M){const Q=Ar(T.fullServerUrl(),R.host,R._protocol),je=R.maxOperationRetryTime,At=new cs(Q,"GET",ao(R,M),je);return At.errorHandler=va(T),At}function Hs(R,T,M,$,Q){const Ie={};Ie.prefix=T.isRoot?"":T.path+"/",M&&M.length>0&&(Ie.delimiter=M),$&&(Ie.pageToken=$),Q&&(Ie.maxResults=Q);const At=Ar(T.bucketOnlyServerUrl(),R.host,R._protocol),Lt=R.maxOperationRetryTime,gn=new cs(At,"GET",function(R,T){return function($,Q){const Ie=function(R,T,M){const $=Mo(M);return null===$?null:function(R,T,M){const $={prefixes:[],items:[],nextPageToken:M.nextPageToken};if(M[$s])for(const Q of M[$s]){const Ie=Q.replace(/\/$/,""),je=R._makeStorageReference(new zn(T,Ie));$.prefixes.push(je)}if(M.items)for(const Q of M.items){const Ie=R._makeStorageReference(new zn(T,Q.name));$.items.push(Ie)}return $}(R,T,$)}(R,T,Q);return Ti(null!==Ie),Ie}}(R,T.bucket),Lt);return gn.urlParams=Ie,gn.errorHandler=vr(T),gn}function Wa(R,T,M){const Q=Ar(T.fullServerUrl(),R.host,R._protocol),je=R.maxOperationRetryTime,At=new cs(Q,"GET",function(R,T){return function($,Q){const Ie=Ga(R,Q,T);return Ti(null!==Ie),function(R,T,M,$){const Q=Mo(T);if(null===Q||!zi(Q.downloadTokens))return null;const Ie=Q.downloadTokens;if(0===Ie.length)return null;const je=encodeURIComponent;return Ie.split(",").map(Lt=>{const pr=R.fullPath;return Ar("/b/"+je(R.bucket)+"/o/"+je(pr),M,$)+L({alt:"media",token:Lt})})[0]}(Ie,Q,R.host,R._protocol)}}(R,M),je);return At.errorHandler=va(T),At}function Wu(R,T,M,$){const Ie=Ar(T.fullServerUrl(),R.host,R._protocol),At=ea(M,$),Lt=R.maxOperationRetryTime,gn=new cs(Ie,"PATCH",ao(R,$),Lt);return gn.headers={"Content-Type":"application/json; charset=utf-8"},gn.body=At,gn.errorHandler=va(T),gn}function Sl(R,T){const $=Ar(T.fullServerUrl(),R.host,R._protocol),At=new cs($,"DELETE",function(gt,Lt){},R.maxOperationRetryTime);return At.successCodes=[200,204],At.errorHandler=va(T),At}function Fo(R,T,M){const $=Object.assign({},M);return $.fullPath=R.path,$.size=T.size(),$.contentType||($.contentType=function(R,T){return T&&T.type()||"application/octet-stream"}(0,T)),$}class ds{constructor(T,M,$,Q){this.current=T,this.total=M,this.finalized=!!$,this.metadata=Q||null}}function vo(R,T){let M=null;try{M=R.getResponseHeader("X-Goog-Upload-Status")}catch(Q){Ti(!1)}return Ti(!!M&&-1!==(T||["active"]).indexOf(M)),M}const za={STATE_CHANGED:"state_changed"},Br={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qa(R){switch(R){case"running":case"pausing":case"canceling":return Br.RUNNING;case"paused":return Br.PAUSED;case"success":return Br.SUCCESS;case"canceled":return Br.CANCELED;case"error":default:return Br.ERROR}}class wa{constructor(T,M,$){if("function"==typeof T||null!=M||null!=$)this.next=T,this.error=null!=M?M:void 0,this.complete=null!=$?$:void 0;else{const Ie=T;this.next=Ie.next,this.error=Ie.error,this.complete=Ie.complete}}}function Eo(R){return(...T)=>{Promise.resolve().then(()=>R(...T))}}class Ka{constructor(T,M,$=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=T,this._blob=M,this._metadata=$,this._mappings=Po(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Q=>{this._request=void 0,this._chunkMultiplier=1,Q._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=Q,this._transition("error"))},this._metadataErrorHandler=Q=>{this._request=void 0,Q._codeEquals("canceled")?this.completeTransitions_():(this._error=Q,this._transition("error"))},this._promise=new Promise((Q,Ie)=>{this._resolve=Q,this._reject=Ie,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const T=this._transferred;return M=>this._updateProgress(T+M)}_shouldDoResumable(T){return T.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(T){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([M,$])=>{switch(this._state){case"running":T(M,$);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((T,M)=>{const $=function(R,T,M,$,Q){const Ie=T.bucketOnlyServerUrl(),je=Fo(T,$,Q),At={name:je.fullPath},gt=Ar(Ie,R.host,R._protocol),gn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${$.size()}`,"X-Goog-Upload-Header-Content-Type":je.contentType,"Content-Type":"application/json; charset=utf-8"},pr=ea(je,M),En=new cs(gt,"POST",function(Rr){let fs;vo(Rr);try{fs=Rr.getResponseHeader("X-Goog-Upload-URL")}catch(Wn){Ti(!1)}return Ti(zi(fs)),fs},R.maxUploadRetryTime);return En.urlParams=At,En.headers=gn,En.body=pr,En.errorHandler=vr(T),En}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Q=this._ref.storage._makeRequest($,T,M);this._request=Q,Q.getPromise().then(Ie=>{this._request=void 0,this._uploadUrl=Ie,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const T=this._uploadUrl;this._resolveToken((M,$)=>{const Q=function(R,T,M,$){const gt=new cs(M,"POST",function(Lt){const gn=vo(Lt,["active","final"]);let pr=null;try{pr=Lt.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Yn){Ti(!1)}pr||Ti(!1);const mt=Number(pr);return Ti(!isNaN(mt)),new ds(mt,$.size(),"final"===gn)},R.maxUploadRetryTime);return gt.headers={"X-Goog-Upload-Command":"query"},gt.errorHandler=vr(T),gt}(this._ref.storage,this._ref._location,T,this._blob),Ie=this._ref.storage._makeRequest(Q,M,$);this._request=Ie,Ie.getPromise().then(je=>{je=je,this._request=void 0,this._updateProgress(je.current),this._needToFetchStatus=!1,je.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const T=262144*this._chunkMultiplier,M=new ds(this._transferred,this._blob.size()),$=this._uploadUrl;this._resolveToken((Q,Ie)=>{let je;try{je=function(R,T,M,$,Q,Ie,je,At){const gt=new ds(0,0);if(je?(gt.current=je.current,gt.total=je.total):(gt.current=0,gt.total=$.size()),$.size()!==gt.total)throw new In("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const Lt=gt.total-gt.current;let gn=Lt;Q>0&&(gn=Math.min(gn,Q));const pr=gt.current,En={"X-Goog-Upload-Command":gn===Lt?"upload, finalize":"upload","X-Goog-Upload-Offset":`${gt.current}`},Rr=$.slice(pr,pr+gn);if(null===Rr)throw _o();const ui=new cs(M,"POST",function(ri,ra){const li=vo(ri,["active","final"]),Zi=gt.current+gn,Wo=$.size();let ps;return ps="final"===li?ao(T,Ie)(ri,ra):null,new ds(Zi,Wo,"final"===li,ps)},T.maxUploadRetryTime);return ui.headers=En,ui.body=Rr.uploadData(),ui.progressCallback=At||null,ui.errorHandler=vr(R),ui}(this._ref._location,this._ref.storage,$,this._blob,T,this._mappings,M,this._makeProgressCallback())}catch(gt){return this._error=gt,void this._transition("error")}const At=this._ref.storage._makeRequest(je,Q,Ie);this._request=At,At.getPromise().then(gt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(gt.current),gt.finalized?(this._metadata=gt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((T,M)=>{const $=$n(this._ref.storage,this._ref._location,this._mappings),Q=this._ref.storage._makeRequest($,T,M);this._request=Q,Q.getPromise().then(Ie=>{this._request=void 0,this._metadata=Ie,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((T,M)=>{const $=function(R,T,M,$,Q){const Ie=T.bucketOnlyServerUrl(),je={"X-Goog-Upload-Protocol":"multipart"},gt=function(){let ui="";for(let ri=0;ri<2;ri++)ui+=Math.random().toString().slice(2);return ui}();je["Content-Type"]="multipart/related; boundary="+gt;const Lt=Fo(T,$,Q),gn=ea(Lt,M),Yn=ai.getBlob("--"+gt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+gn+"\r\n--"+gt+"\r\nContent-Type: "+Lt.contentType+"\r\n\r\n",$,"\r\n--"+gt+"--");if(null===Yn)throw _o();const En={name:Lt.fullPath},Rr=Ar(Ie,R.host,R._protocol),Wn=R.maxUploadRetryTime,Ms=new cs(Rr,"POST",ao(R,M),Wn);return Ms.urlParams=En,Ms.headers=je,Ms.body=Yn.uploadData(),Ms.errorHandler=vr(T),Ms}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Q=this._ref.storage._makeRequest($,T,M);this._request=Q,Q.getPromise().then(Ie=>{this._request=void 0,this._metadata=Ie,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(T){const M=this._transferred;this._transferred=T,this._transferred!==M&&this._notifyObservers()}_transition(T){if(this._state!==T)switch(T){case"canceling":case"pausing":this._state=T,void 0!==this._request&&this._request.cancel();break;case"running":const M="paused"===this._state;this._state=T,M&&(this._notifyObservers(),this._start());break;case"paused":this._state=T,this._notifyObservers();break;case"canceled":this._error=Bs(),this._state=T,this._notifyObservers();break;case"error":case"success":this._state=T,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const T=qa(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:T,metadata:this._metadata,task:this,ref:this._ref}}on(T,M,$,Q){const Ie=new wa(M||void 0,$||void 0,Q||void 0);return this._addObserver(Ie),()=>{this._removeObserver(Ie)}}then(T,M){return this._promise.then(T,M)}catch(T){return this.then(null,T)}_addObserver(T){this._observers.push(T),this._notifyObserver(T)}_removeObserver(T){const M=this._observers.indexOf(T);-1!==M&&this._observers.splice(M,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(M=>{this._notifyObserver(M)})}_finishPromise(){if(void 0!==this._resolve){let T=!0;switch(qa(this._state)){case Br.SUCCESS:Eo(this._resolve.bind(null,this.snapshot))();break;case Br.CANCELED:case Br.ERROR:Eo(this._reject.bind(null,this._error))();break;default:T=!1}T&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(T){switch(qa(this._state)){case Br.RUNNING:case Br.PAUSED:T.next&&Eo(T.next.bind(T,this.snapshot))();break;case Br.SUCCESS:T.complete&&Eo(T.complete.bind(T))();break;case Br.CANCELED:case Br.ERROR:T.error&&Eo(T.error.bind(T,this._error))();break;default:T.error&&Eo(T.error.bind(T,this._error))()}}resume(){const T="paused"===this._state||"pausing"===this._state;return T&&this._transition("running"),T}pause(){const T="running"===this._state;return T&&this._transition("pausing"),T}cancel(){const T="running"===this._state||"pausing"===this._state;return T&&this._transition("canceling"),T}}class fr{constructor(T,M){this._service=T,this._location=M instanceof zn?M:zn.makeFromUrl(M,T.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(T,M){return new fr(T,M)}get root(){const T=new zn(this._location.bucket,"");return this._newRef(this._service,T)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $a(this._location.path)}get storage(){return this._service}get parent(){const T=function(R){if(0===R.length)return null;const T=R.lastIndexOf("/");return-1===T?"":R.slice(0,T)}(this._location.path);if(null===T)return null;const M=new zn(this._location.bucket,T);return new fr(this._service,M)}_throwIfRoot(T){if(""===this._location.path)throw bs(T)}}function Za(R,T,M){return uo.apply(this,arguments)}function uo(){return(uo=(0,dr.Z)(function*(R,T,M){const Q=yield Ya(R,{pageToken:M});T.prefixes.push(...Q.prefixes),T.items.push(...Q.items),null!=Q.nextPageToken&&(yield Za(R,T,Q.nextPageToken))})).apply(this,arguments)}function Ya(R,T){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,dr.Z)(function*(R,T){null!=T&&"number"==typeof T.maxResults&&Yr("options.maxResults",1,1e3,T.maxResults);const M=T||{},$=Hs(R.storage,R._location,"/",M.pageToken,M.maxResults);return(yield R.storage.makeRequestWithTokens($)).getPromise()})).apply(this,arguments)}function As(){return(As=(0,dr.Z)(function*(R){R._throwIfRoot("getMetadata");const T=$n(R.storage,R._location,Po());return(yield R.storage.makeRequestWithTokens(T)).getPromise()})).apply(this,arguments)}function lo(){return(lo=(0,dr.Z)(function*(R,T){R._throwIfRoot("updateMetadata");const M=Wu(R.storage,R._location,T,Po());return(yield R.storage.makeRequestWithTokens(M)).getPromise()})).apply(this,arguments)}function Xr(){return(Xr=(0,dr.Z)(function*(R){R._throwIfRoot("getDownloadURL");const T=Wa(R.storage,R._location,Po());return(yield R.storage.makeRequestWithTokens(T)).getPromise().then(M=>{if(null===M)throw Wi();return M})})).apply(this,arguments)}function Rs(){return(Rs=(0,dr.Z)(function*(R){R._throwIfRoot("deleteObject");const T=Sl(R.storage,R._location);return(yield R.storage.makeRequestWithTokens(T)).getPromise()})).apply(this,arguments)}function Qa(R,T){const M=function(R,T){const M=T.split("/").filter($=>$.length>0).join("/");return 0===R.length?M:R+"/"+M}(R._location.path,T),$=new zn(R._location.bucket,M);return new fr(R.storage,$)}function hs(R,T){if(R instanceof Iu){const M=R;if(null==M._bucket)throw new In("no-default-bucket","No default bucket found. Did you set the '"+ki+"' property when initializing the app?");const $=new fr(M,M._bucket);return null!=T?hs($,T):$}return void 0!==T?Qa(R,T):R}function qu(R,T){if(T&&function(R){return/^[A-Za-z]+:\/\//.test(R)}(T)){if(R instanceof Iu)return function(R,T){return new fr(R,T)}(R,T);throw qr("To use ref(service, url), the first argument must be a Storage instance.")}return hs(R,T)}function fo(R,T){const M=null==T?void 0:T[ki];return null==M?null:zn.makeFromBucketSpec(M,R)}class Iu{constructor(T,M,$,Q,Ie,je){this.app=T,this._authProvider=M,this._appCheckProvider=$,this._pool=Q,this._url=Ie,this._firebaseVersion=je,this._bucket=null,this._host=kr,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Ie?zn.makeFromBucketSpec(Ie,this._host):fo(this._host,this.app.options)}get host(){return this._host}set host(T){this._host=T,this._bucket=null!=this._url?zn.makeFromBucketSpec(this._url,T):fo(T,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(T){Yr("time",0,Number.POSITIVE_INFINITY,T),this._maxUploadRetryTime=T}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(T){Yr("time",0,Number.POSITIVE_INFINITY,T),this._maxOperationRetryTime=T}_getAuthToken(){var T=this;return(0,dr.Z)(function*(){if(T._overrideAuthToken)return T._overrideAuthToken;const M=T._authProvider.getImmediate({optional:!0});if(M){const $=yield M.getToken();if(null!==$)return $.accessToken}return null})()}_getAppCheckToken(){var T=this;return(0,dr.Z)(function*(){const M=T._appCheckProvider.getImmediate({optional:!0});return M?(yield M.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(T=>T.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(T){return new fr(this,T)}_makeRequest(T,M,$){if(this._deleted)return new us(ro());{const Q=function(R,T,M,$,Q,Ie){const je=L(R.urlParams),At=R.url+je,gt=Object.assign({},R.headers);return function(R,T){T&&(R["X-Firebase-GMPID"]=T)}(gt,T),function(R,T){null!==T&&T.length>0&&(R.Authorization="Firebase "+T)}(gt,M),function(R,T){R["X-Firebase-Storage-Version"]="webjs/"+(null!=T?T:"AppManager")}(gt,Ie),function(R,T){null!==T&&(R["X-Firebase-AppCheck"]=T)}(gt,$),new z(At,R.method,gt,R.body,R.successCodes,R.additionalRetryCodes,R.handler,R.errorHandler,R.timeout,R.progressCallback,Q)}(T,this._appId,M,$,this._pool,this._firebaseVersion);return this._requests.add(Q),Q.getPromise().then(()=>this._requests.delete(Q),()=>this._requests.delete(Q)),Q}}makeRequestWithTokens(T){var M=this;return(0,dr.Z)(function*(){const[$,Q]=yield Promise.all([M._getAuthToken(),M._getAppCheckToken()]);return M._makeRequest(T,$,Q)})()}}function at(R,T){return qu(R=(0,jn.m9)(R),T)}(0,ar._registerComponent)(new Pr.wA("storage",function(R,{instanceIdentifier:T}){const M=R.getProvider("app").getImmediate(),$=R.getProvider("auth-internal"),Q=R.getProvider("app-check-internal");return new Iu(M,$,Q,new bi,T,ar.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,ar.registerVersion)("@firebase/storage","0.8.3");class Ws{constructor(T,M,$){this._delegate=T,this.task=M,this.ref=$}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ft{constructor(T,M){this._delegate=T,this._ref=M,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ws(this._delegate.snapshot,this,this._ref)}then(T,M){return this._delegate.then($=>{if(T)return T(new Ws($,this,this._ref))},M)}on(T,M,$,Q){let Ie;return M&&(Ie="function"==typeof M?je=>M(new Ws(je,this,this._ref)):{next:M.next?je=>M.next(new Ws(je,this,this._ref)):void 0,complete:M.complete||void 0,error:M.error||void 0}),this._delegate.on(T,Ie,$||void 0,Q||void 0)}}class Be{constructor(T,M){this._delegate=T,this._service=M}get prefixes(){return this._delegate.prefixes.map(T=>new Ye(T,this._service))}get items(){return this._delegate.items.map(T=>new Ye(T,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ye{constructor(T,M){this._delegate=T,this.storage=M}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(T){const M=function(R,T){return Qa(R,T)}(this._delegate,T);return new Ye(M,this.storage)}get root(){return new Ye(this._delegate.root,this.storage)}get parent(){const T=this._delegate.parent;return null==T?null:new Ye(T,this.storage)}put(T,M){return this._throwIfRoot("put"),new ft(function(R,T,M){return function(R,T,M){return R._throwIfRoot("uploadBytesResumable"),new Ka(R,new ai(T),M)}(R=(0,jn.m9)(R),T,M)}(this._delegate,T,M),this)}putString(T,M=nt.RAW,$){this._throwIfRoot("putString");const Q=xn(M,T),Ie=Object.assign({},$);return null==Ie.contentType&&null!=Q.contentType&&(Ie.contentType=Q.contentType),new ft(new Ka(this._delegate,new ai(Q.data,!0),Ie),this)}listAll(){return(R=this._delegate,function(R){const T={prefixes:[],items:[]};return Za(R,T).then(()=>T)}(R=(0,jn.m9)(R))).then(T=>new Be(T,this.storage));var R}list(T){return function(R,T){return Ya(R=(0,jn.m9)(R),T)}(this._delegate,T||void 0).then(M=>new Be(M,this.storage))}getMetadata(){return function(R){return As.apply(this,arguments)}((0,jn.m9)(this._delegate))}updateMetadata(T){return function(R,T){return function(R,T){return lo.apply(this,arguments)}(R=(0,jn.m9)(R),T)}(this._delegate,T)}getDownloadURL(){return function(R){return Xr.apply(this,arguments)}((0,jn.m9)(this._delegate))}delete(){return this._throwIfRoot("delete"),function(R){return Rs.apply(this,arguments)}((0,jn.m9)(this._delegate))}_throwIfRoot(T){if(""===this._delegate._location.path)throw bs(T)}}class jr{constructor(T,M){this.app=T,this._delegate=M}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(T){if(Ho(T))throw qr("ref() expected a child path but got a URL, use refFromURL instead.");return new Ye(at(this._delegate,T),this)}refFromURL(T){if(!Ho(T))throw qr("refFromURL() expected a full URL but got a child path, use ref() instead.");try{zn.makeFromUrl(T,this._delegate.host)}catch(M){throw qr("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ye(at(this._delegate,T),this)}setMaxUploadRetryTime(T){this._delegate.maxUploadRetryTime=T}setMaxOperationRetryTime(T){this._delegate.maxOperationRetryTime=T}useEmulator(T,M,$={}){!function(R,T,M,$={}){!function(R,T,M,$={}){R.host=`${T}:${M}`,R._protocol="http";const{mockUserToken:Q}=$;Q&&(R._overrideAuthToken="string"==typeof Q?Q:(0,jn.Sg)(Q,R.app.options.projectId))}(R,T,M,$)}(this._delegate,T,M,$)}}function Ho(R){return/^[A-Za-z]+:\/\//.test(R)}function O(R,{instanceIdentifier:T}){const M=R.getProvider("app-compat").getImmediate(),$=R.getProvider("storage").getImmediate({identifier:T});return new jr(M,$)}!function(R){const T={TaskState:Br,TaskEvent:za,StringFormat:nt,Storage:jr,Reference:Ye};R.INTERNAL.registerComponent(new Pr.wA("storage-compat",O,"PUBLIC").setServiceProps(T).setMultipleInstances(!0)),R.registerVersion("@firebase/storage-compat","0.1.3")}(Pi.Z);var q=G(7841);function pe(R){const T=function(R){return new Us.y(T=>{const M=je=>T.next(je);M(R.snapshot);const Ie=R.on("state_changed",M);return R.then(je=>{M(je),T.complete()},je=>{M(R.snapshot),(je=>{T.error(je)})(je)}),function(){Ie()}}).pipe(function(R,T=Oi.P){return M=>M.lift(new Rn(R,T))}(0))}(R);return{task:R,then:R.then.bind(R),catch:R.catch.bind(R),pause:R.pause.bind(R),cancel:R.cancel.bind(R),resume:R.resume.bind(R),snapshotChanges:()=>T,percentageChanges:()=>T.pipe((0,os.U)(M=>M.bytesTransferred/M.totalBytes*100))}}function Me(R){return{getDownloadURL:()=>(0,Gr.of)(void 0).pipe(_r.fc,(0,Wr.w)(()=>R.getDownloadURL()),_r.iC),getMetadata:()=>(0,Gr.of)(void 0).pipe(_r.fc,(0,Wr.w)(()=>R.getMetadata()),_r.iC),delete:()=>(0,or.D)(R.delete()),child:T=>Me(R.child(T)),updateMetadata:T=>(0,or.D)(R.updateMetadata(T)),put:(T,M)=>pe(R.put(T,M)),putString:(T,M,$)=>pe(R.putString(T,M,$)),listAll:()=>(0,or.D)(R.listAll())}}const pt=new j.OlP("angularfire2.storageBucket"),Cn=new j.OlP("angularfire2.storage.maxUploadRetryTime"),It=new j.OlP("angularfire2.storage.maxOperationRetryTime"),Tt=new j.OlP("angularfire2.storage.use-emulator");let sn=(()=>{class R{constructor(M,$,Q,Ie,je,At,gt,Lt,gn){const pr=(0,rs.on)(M,je,$);this.storage=(0,_r.cc)(`${pr.name}.storage.${Q}`,"AngularFireStorage",pr.name,()=>{const mt=je.runOutsideAngular(()=>pr.storage(Q||void 0)),Yn=gn;return Yn&&mt.useEmulator(...Yn),gt&&mt.setMaxUploadRetryTime(gt),Lt&&mt.setMaxOperationRetryTime(Lt),mt},[gt,Lt])}ref(M){return Me(this.storage.ref(M))}refFromURL(M){return Me(this.storage.refFromURL(M))}upload(M,$,Q){return Me(this.storage.ref(M)).put($,Q)}}return R.\u0275fac=function(M){return new(M||R)(j.LFG(rs.Dh),j.LFG(rs.xv,8),j.LFG(pt,8),j.LFG(j.Lbi),j.LFG(j.R0b),j.LFG(_r.HU),j.LFG(Cn,8),j.LFG(It,8),j.LFG(Tt,8))},R.\u0275prov=j.Yz7({token:R,factory:R.\u0275fac,providedIn:"any"}),R})(),Si=(()=>{class R{}return R.\u0275fac=function(M){return new(M||R)},R.\u0275mod=j.oAB({type:R}),R.\u0275inj=j.cJS({}),R})(),ni=(()=>{class R{constructor(){q.Z.registerVersion("angularfire",_r.q4.full,"gcs-compat")}}return R.\u0275fac=function(M){return new(M||R)},R.\u0275mod=j.oAB({type:R}),R.\u0275inj=j.cJS({providers:[sn],imports:[Si]}),R})();var yn=G(8006);const Ai_firebaseConfig={apiKey:"AIzaSyDATiSbv3bcp_VDukjbWSILIpVFSW6_t-4",authDomain:"pp-lavoiv.firebaseapp.com",projectId:"pp-lavoiv",storageBucket:"pp-lavoiv.appspot.com",messagingSenderId:"711234699975",appId:"1:711234699975:web:311363ff429227fa4a34e2"};var nr=G(665);let Go=(()=>{class R{}return R.\u0275fac=function(M){return new(M||R)},R.\u0275mod=j.oAB({type:R,bootstrap:[zt]}),R.\u0275inj=j.cJS({providers:[],imports:[[vs,Vs,rs.hO.initializeApp(Ai_firebaseConfig),is.yb,yn.ww,ni,nr.UX]]}),R})();(0,j.G48)(),Vn().bootstrapModule(Go).catch(R=>console.error(R))},4762:(bt,Ge,G)=>{"use strict";function Oe(Ne,Le){var fe={};for(var Re in Ne)Object.prototype.hasOwnProperty.call(Ne,Re)&&Le.indexOf(Re)<0&&(fe[Re]=Ne[Re]);if(null!=Ne&&"function"==typeof Object.getOwnPropertySymbols){var ye=0;for(Re=Object.getOwnPropertySymbols(Ne);ye<Re.length;ye++)Le.indexOf(Re[ye])<0&&Object.prototype.propertyIsEnumerable.call(Ne,Re[ye])&&(fe[Re[ye]]=Ne[Re[ye]])}return fe}function ge(Ne,Le,fe,Re){return new(fe||(fe=Promise))(function(Ce,Xe){function Et(ct){try{ot(Re.next(ct))}catch(Pt){Xe(Pt)}}function Yt(ct){try{ot(Re.throw(ct))}catch(Pt){Xe(Pt)}}function ot(ct){ct.done?Ce(ct.value):function(Ce){return Ce instanceof fe?Ce:new fe(function(Xe){Xe(Ce)})}(ct.value).then(Et,Yt)}ot((Re=Re.apply(Ne,Le||[])).next())})}function oe(Ne,Le){var Re,ye,Ce,Xe,fe={label:0,sent:function(){if(1&Ce[0])throw Ce[1];return Ce[1]},trys:[],ops:[]};return Xe={next:Et(0),throw:Et(1),return:Et(2)},"function"==typeof Symbol&&(Xe[Symbol.iterator]=function(){return this}),Xe;function Et(ot){return function(ct){return function(ot){if(Re)throw new TypeError("Generator is already executing.");for(;fe;)try{if(Re=1,ye&&(Ce=2&ot[0]?ye.return:ot[0]?ye.throw||((Ce=ye.return)&&Ce.call(ye),0):ye.next)&&!(Ce=Ce.call(ye,ot[1])).done)return Ce;switch(ye=0,Ce&&(ot=[2&ot[0],Ce.value]),ot[0]){case 0:case 1:Ce=ot;break;case 4:return fe.label++,{value:ot[1],done:!1};case 5:fe.label++,ye=ot[1],ot=[0];continue;case 7:ot=fe.ops.pop(),fe.trys.pop();continue;default:if(!(Ce=(Ce=fe.trys).length>0&&Ce[Ce.length-1])&&(6===ot[0]||2===ot[0])){fe=0;continue}if(3===ot[0]&&(!Ce||ot[1]>Ce[0]&&ot[1]<Ce[3])){fe.label=ot[1];break}if(6===ot[0]&&fe.label<Ce[1]){fe.label=Ce[1],Ce=ot;break}if(Ce&&fe.label<Ce[2]){fe.label=Ce[2],fe.ops.push(ot);break}Ce[2]&&fe.ops.pop(),fe.trys.pop();continue}ot=Le.call(Ne,fe)}catch(ct){ot=[6,ct],ye=0}finally{Re=Ce=0}if(5&ot[0])throw ot[1];return{value:ot[0]?ot[1]:void 0,done:!0}}([ot,ct])}}}function me(Ne){var Le="function"==typeof Symbol&&Symbol.iterator,fe=Le&&Ne[Le],Re=0;if(fe)return fe.call(Ne);if(Ne&&"number"==typeof Ne.length)return{next:function(){return Ne&&Re>=Ne.length&&(Ne=void 0),{value:Ne&&Ne[Re++],done:!Ne}}};throw new TypeError(Le?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(Ne,Le){var fe="function"==typeof Symbol&&Ne[Symbol.iterator];if(!fe)return Ne;var ye,Xe,Re=fe.call(Ne),Ce=[];try{for(;(void 0===Le||Le-- >0)&&!(ye=Re.next()).done;)Ce.push(ye.value)}catch(Et){Xe={error:Et}}finally{try{ye&&!ye.done&&(fe=Re.return)&&fe.call(Re)}finally{if(Xe)throw Xe.error}}return Ce}function Se(Ne,Le,fe){if(fe||2===arguments.length)for(var Ce,Re=0,ye=Le.length;Re<ye;Re++)(Ce||!(Re in Le))&&(Ce||(Ce=Array.prototype.slice.call(Le,0,Re)),Ce[Re]=Le[Re]);return Ne.concat(Ce||Array.prototype.slice.call(Le))}G.d(Ge,{_T:()=>Oe,mG:()=>ge,Jh:()=>oe,XA:()=>me,CR:()=>ve,ev:()=>Se})},8239:(bt,Ge,G)=>{"use strict";function w(ne,Oe,Te,he,Fe,ge,oe){try{var ee=ne[ge](oe),te=ee.value}catch(me){return void Te(me)}ee.done?Oe(te):Promise.resolve(te).then(he,Fe)}function j(ne){return function(){var Oe=this,Te=arguments;return new Promise(function(he,Fe){var ge=ne.apply(Oe,Te);function oe(te){w(ge,he,Fe,oe,ee,"next",te)}function ee(te){w(ge,he,Fe,oe,ee,"throw",te)}oe(void 0)})}}G.d(Ge,{Z:()=>j})}},bt=>{bt(bt.s=9212)}]);