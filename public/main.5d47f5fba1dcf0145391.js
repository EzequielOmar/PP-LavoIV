(self.webpackChunkpp_labo_iv=self.webpackChunkpp_labo_iv||[]).push([[179],{8255:ke=>{function de(P){return Promise.resolve().then(()=>{var b=new Error("Cannot find module '"+P+"'");throw b.code="MODULE_NOT_FOUND",b})}de.keys=()=>[],de.resolve=de,de.id=8255,ke.exports=de},3018:(ke,de,P)=>{"use strict";P.d(de,{deG:()=>fa,tb:()=>QD,AFp:()=>zD,ip1:()=>ow,CZH:()=>zd,hGG:()=>eR,z2F:()=>_p,sBO:()=>wS,Sil:()=>Lc,_Vd:()=>Ec,EJc:()=>Kd,SBq:()=>Hi,qLn:()=>re,vpe:()=>ws,gxx:()=>Na,tBr:()=>ya,XFs:()=>ge,OlP:()=>sn,zs3:()=>Tt,ZZ4:()=>jm,aQg:()=>kd,soG:()=>gp,YKP:()=>qb,v3s:()=>UA,h0i:()=>Ka,PXZ:()=>dC,R0b:()=>or,FiY:()=>Mr,Lbi:()=>YD,g9A:()=>ZD,Qsj:()=>fS,FYo:()=>Pd,JOm:()=>Hs,Tiy:()=>Lm,q3G:()=>Ft,tp0:()=>js,EAV:()=>jA,Rgc:()=>Ic,dDg:()=>hy,DyG:()=>gl,q4F:()=>tE,GfV:()=>Um,s_b:()=>bc,ifc:()=>nn,eFA:()=>yw,G48:()=>aC,X6Q:()=>py,_c5:()=>KA,VLi:()=>oC,c2e:()=>aw,zSh:()=>Pa,wAp:()=>Ge,vHH:()=>_e,EiD:()=>Gh,mCW:()=>bo,qzn:()=>dr,JVY:()=>dg,pB0:()=>fg,eBb:()=>jh,L6k:()=>hg,LAX:()=>va,cg1:()=>_c,Tjo:()=>WA,kL8:()=>ab,yhl:()=>$s,dqk:()=>F,sIi:()=>nc,CqO:()=>Em,QGY:()=>If,F4k:()=>bv,RDi:()=>As,AaK:()=>j,z3N:()=>kr,TTD:()=>fh,uIk:()=>rc,Suo:()=>AD,Xpm:()=>Kc,lG2:()=>Sp,Yz7:()=>Wt,cJS:()=>ai,oAB:()=>su,Yjl:()=>Ap,Y36:()=>Oo,_UZ:()=>od,qZA:()=>Li,TgZ:()=>Mo,Ikx:()=>Am,LFG:()=>un,$8M:()=>Ti,NdJ:()=>ad,CRH:()=>RD,iGM:()=>SD,LSH:()=>Zr,kYT:()=>Xo,_uU:()=>Af});var b=P(9765),W=P(5319),k=P(7574),ue=P(6682),oe=P(2441);var se=P(1307);function B(){return new b.xQ}function N(s){for(let o in s)if(s[o]===N)return o;throw Error("Could not find renamed property on target object.")}function j(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(j).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function H(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const ie=N({__forward_ref__:N});function K(s){return s.__forward_ref__=K,s.toString=function(){return j(this())},s}function q(s){return function(s){return"function"==typeof s&&s.hasOwnProperty(ie)&&s.__forward_ref__===K}(s)?s():s}class _e extends Error{constructor(o,u){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,u)),this.code=o}}function Ce(s){return"string"==typeof s?s:null==s?"":String(s)}function st(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ce(s)}function J(s,o){const u=o?` in ${o}`:"";throw new _e("201",`No provider for ${st(s)} found${u}`)}function qt(s,o){null==s&&function(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Wt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function ai(s){return{providers:s.providers||[],imports:s.imports||[]}}function ar(s){return Qo(s,_n)||Qo(s,iu)}function Qo(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ds(s){return s&&(s.hasOwnProperty(br)||s.hasOwnProperty(Qe))?s[br]:null}const _n=N({\u0275prov:N}),br=N({\u0275inj:N}),iu=N({ngInjectableDef:N}),Qe=N({ngInjectorDef:N});var ge=(()=>((ge=ge||{})[ge.Default=0]="Default",ge[ge.Host=1]="Host",ge[ge.Self=2]="Self",ge[ge.SkipSelf=4]="SkipSelf",ge[ge.Optional=8]="Optional",ge))();let At;function Kt(s){const o=At;return At=s,o}function Et(s,o,u){const l=ar(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&ge.Optional?null:void 0!==o?o:void J(j(s),"Injector")}function Le(s){return{toString:s}.toString()}var tn=(()=>((tn=tn||{})[tn.OnPush=0]="OnPush",tn[tn.Default=1]="Default",tn))(),nn=(()=>((nn=nn||{})[nn.Emulated=0]="Emulated",nn[nn.None=2]="None",nn[nn.ShadowDom=3]="ShadowDom",nn))();const ur="undefined"!=typeof globalThis&&globalThis,ro="undefined"!=typeof window&&window,L="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,F=ur||"undefined"!=typeof global&&global||ro||L,Ne={},xe=[],wt=N({\u0275cmp:N}),Zt=N({\u0275dir:N}),Ot=N({\u0275pipe:N}),Dr=N({\u0275mod:N}),ft=N({\u0275loc:N}),Mt=N({\u0275fac:N}),jn=N({__NG_ELEMENT_ID__:N});let zc=0;function Kc(s){return Le(()=>{const u={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===tn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||xe,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||nn.Emulated,id:"c",styles:s.styles||xe,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,f=s.features,_=s.pipes;return l.id+=zc++,l.inputs=ui(s.inputs,u),l.outputs=ui(s.outputs),f&&f.forEach(E=>E(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(nh):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(Zc):null,l})}function nh(s){return Nn(s)||function(s){return s[Zt]||null}(s)}function Zc(s){return function(s){return s[Ot]||null}(s)}const Jo={};function su(s){return Le(()=>{const o={type:s.type,bootstrap:s.bootstrap||xe,declarations:s.declarations||xe,imports:s.imports||xe,exports:s.exports||xe,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Jo[s.id]=s.type),o})}function Xo(s,o){return Le(()=>{const u=Zn(s,!0);u.declarations=o.declarations||xe,u.imports=o.imports||xe,u.exports=o.exports||xe})}function ui(s,o){if(null==s)return Ne;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=l,o&&(o[d]=f)}return u}const Sp=Kc;function Ap(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Nn(s){return s[wt]||null}function Zn(s,o){const u=s[Dr]||null;if(!u&&!0===o)throw new Error(`Type ${j(s)} does not have '\u0275mod' property.`);return u}function Sr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Dt(s){return Array.isArray(s)&&!0===s[1]}function uu(s){return 0!=(8&s.flags)}function Qc(s){return 2==(2&s.flags)}function Ar(s){return 1==(1&s.flags)}function ci(s){return null!==s.template}function ah(s){return 0!=(512&s[2])}function Xi(s,o){return s.hasOwnProperty(Mt)?s[Mt]:null}class hh{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function fh(){return lu}function lu(s){return s.type.prototype.ngOnChanges&&(s.setInput=Py),li}function li(){const s=du(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===Ne)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Py(s,o,u,l){const d=du(s)||function(s,o){return s[Oy]=o}(s,{previous:Ne,current:null}),f=d.current||(d.current={}),_=d.previous,E=this.declaredInputs[u],i=_[E];f[E]=new hh(i&&i.currentValue,o,_===Ne),s[l]=o}fh.ngInherit=!0;const Oy="__ngSimpleChanges__";function du(s){return s[Oy]||null}let co;function As(s){co=s}function Ut(s){return!!s.listen}const rl={createRenderer:(s,o)=>void 0!==co?co:"undefined"!=typeof document?document:void 0};function Vt(s){for(;Array.isArray(s);)s=s[0];return s}function Rr(s,o){return Vt(o[s.index])}function Rs(s,o){return s.data[o]}function Qn(s,o){const u=o[s];return Sr(u)?u:u[0]}function mu(s){return 4==(4&s[2])}function yu(s){return 128==(128&s[2])}function xs(s,o){return null==o?null:s[o]}function sl(s){s[18]=0}function ph(s,o){s[5]+=o;let u=s,l=s[3];for(;null!==l&&(1===o&&1===u[5]||-1===o&&0===u[5]);)l[5]+=o,u=l,l=l[3]}const Ke={lFrame:$p(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function gh(){return Ke.bindingsEnabled}function fe(){return Ke.lFrame.lView}function pt(){return Ke.lFrame.tView}function rn(){let s=Up();for(;null!==s&&64===s.type;)s=s.parent;return s}function Up(){return Ke.lFrame.currentTNode}function Gr(s,o){const u=Ke.lFrame;u.currentTNode=s,u.isParent=o}function mh(){return Ke.lFrame.isParent}function oa(){return Ke.isInCheckNoChangesMode}function Ps(s){Ke.isInCheckNoChangesMode=s}function Os(){return Ke.lFrame.bindingIndex++}function vh(s,o){const u=Ke.lFrame;u.bindingIndex=u.bindingRootIndex=s,Iu(o)}function Iu(s){Ke.lFrame.currentDirectiveIndex=s}function fo(){return Ke.lFrame.currentQueryIndex}function Ih(s){Ke.lFrame.currentQueryIndex=s}function ky(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Fy(s,o,u){if(u&ge.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&ge.Host||(d=ky(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const l=Ke.lFrame=jp();return l.currentTNode=o,l.lView=s,!0}function bu(s){const o=jp(),u=s[1];Ke.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function jp(){const s=Ke.lFrame,o=null===s?null:s.child;return null===o?$p(s):o}function $p(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Hp(){const s=Ke.lFrame;return Ke.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const o0=Hp;function Gp(){const s=Hp();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function po(s){Ke.lFrame.selectedIndex=s}function Bt(){const s=Ke.lFrame;return Rs(s.tView,s.selectedIndex)}function aa(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:i,ngAfterViewChecked:n,ngOnDestroy:r}=f;_&&(s.contentHooks||(s.contentHooks=[])).push(-u,_),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),i&&(s.viewHooks||(s.viewHooks=[])).push(-u,i),n&&((s.viewHooks||(s.viewHooks=[])).push(u,n),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,n)),null!=r&&(s.destroyHooks||(s.destroyHooks=[])).push(u,r)}}function ua(s,o,u){Th(s,o,3,u)}function Ch(s,o,u,l){(3&s[2])===u&&Th(s,o,u,l)}function Du(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Th(s,o,u,l){const f=null!=l?l:-1,_=o.length-1;let E=0;for(let i=void 0!==l?65535&s[18]:0;i<_;i++)if("number"==typeof o[i+1]){if(E=o[i],null!=l&&E>=l)break}else o[i]<0&&(s[18]+=65536),(E<f||-1==f)&&(By(s,u,o,i),s[18]=(4294901760&s[18])+i+2),i++}function By(s,o,u,l){const d=u[l]<0,f=u[l+1],E=s[d?-u[l]:u[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Cu{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function jt(s,o,u){const l=Ut(s);let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const _=u[d++],E=u[d++],i=u[d++];l?s.setAttribute(o,E,i,_):o.setAttributeNS(_,E,i)}else{const _=f,E=u[++d];ul(_)?l&&s.setProperty(o,_,E):l?s.setAttribute(o,_,E):o.setAttribute(_,E),d++}}return d}function Ah(s){return 3===s||4===s||6===s}function ul(s){return 64===s.charCodeAt(0)}function Rh(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||xh(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function xh(s,o,u,l,d){let f=0,_=s.length;if(-1===o)_=-1;else for(;f<s.length;){const E=s[f++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=f-1;break}}}for(;f<s.length;){const E=s[f];if("number"==typeof E)break;if(E===u){if(null===l)return void(null!==d&&(s[f+1]=d));if(l===s[f+1])return void(s[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==_&&(s.splice(_,0,o),f=_+1),s.splice(f++,0,u),null!==l&&s.splice(f++,0,l),null!==d&&s.splice(f++,0,d)}function qp(s){return-1!==s}function Tu(s){return 32767&s}function Su(s,o){let u=function(s){return s>>16}(s),l=o;for(;u>0;)l=l[15],u--;return l}let Au=!0;function cl(s){const o=Au;return Au=s,o}let je=0;function Fs(s,o){const u=ca(s,o);if(-1!==u)return u;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,xr(l.data,s),xr(o,null),xr(l.blueprint,null));const d=Ru(s,o),f=s.injectorIndex;if(qp(d)){const _=Tu(d),E=Su(d,o),i=E[1].data;for(let n=0;n<8;n++)o[f+n]=E[_+n]|i[_+n]}return o[f+8]=d,f}function xr(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ca(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ru(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){const f=d[1],_=f.type;if(l=2===_?f.declTNode:1===_?d[6]:null,null===l)return-1;if(u++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return-1}function Jn(s,o,u){!function(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(jn)&&(l=u[jn]),null==l&&(l=u[jn]=je++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Hy(s,o,u){if(u&ge.Optional)return s;J(o,"NodeInjector")}function la(s,o,u,l){if(u&ge.Optional&&void 0===l&&(l=null),0==(u&(ge.Self|ge.Host))){const d=s[9],f=Kt(void 0);try{return d?d.get(o,l,u&ge.Optional):Et(o,l,u&ge.Optional)}finally{Kt(f)}}return Hy(l,o,u)}function Wr(s,o,u,l=ge.Default,d){if(null!==s){const f=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(jn)?s[jn]:void 0;return"number"==typeof o?o>=0?255&o:Gy:o}(u);if("function"==typeof f){if(!Fy(o,s,l))return l&ge.Host?Hy(d,u,l):la(o,u,l,d);try{const _=f(l);if(null!=_||l&ge.Optional)return _;J(u)}finally{o0()}}else if("number"==typeof f){let _=null,E=ca(s,o),i=-1,n=l&ge.Host?o[16][6]:null;for((-1===E||l&ge.SkipSelf)&&(i=-1===E?Ru(s,o):o[E+8],-1!==i&&xu(l,!1)?(_=o[1],E=Tu(i),o=Su(i,o)):E=-1);-1!==E;){const r=o[1];if(qy(f,E,r.data)){const a=hl(E,o,u,_,l,n);if(a!==zp)return a}i=o[E+8],-1!==i&&xu(l,o[1].data[E+8]===n)&&qy(f,E,o)?(_=r,E=Tu(i),o=Su(i,o)):E=-1}}}return la(o,u,l,d)}const zp={};function Gy(){return new zr(rn(),fe())}function hl(s,o,u,l,d,f){const _=o[1],E=_.data[s+8],r=fl(E,_,u,null==l?Qc(E)&&Au:l!=_&&0!=(3&E.type),d&ge.Host&&f===E);return null!==r?da(o,_,r,E):zp}function fl(s,o,u,l,d){const f=s.providerIndexes,_=o.data,E=1048575&f,i=s.directiveStart,r=f>>20,c=d?E+r:s.directiveEnd;for(let h=l?E:E+r;h<c;h++){const g=_[h];if(h<i&&u===g||h>=i&&g.type===u)return h}if(d){const h=_[i];if(h&&ci(h)&&h.type===u)return i}return null}function da(s,o,u,l){let d=s[u];const f=o.data;if(function(s){return s instanceof Cu}(d)){const _=d;_.resolving&&function(s,o){throw new _e("200",`Circular dependency in DI detected for ${s}`)}(st(f[u]));const E=cl(_.canSeeViewProviders);_.resolving=!0;const i=_.injectImpl?Kt(_.injectImpl):null;Fy(s,l,ge.Default);try{d=s[u]=_.factory(void 0,f,s,l),o.firstCreatePass&&u>=l.directiveStart&&function(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const _=lu(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,_)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==i&&Kt(i),cl(E),_.resolving=!1,o0()}}return d}function qy(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function xu(s,o){return!(s&ge.Self||s&ge.Host&&o)}class zr{constructor(o,u){this._tNode=o,this._lView=u}get(o,u){return Wr(this._tNode,this._lView,o,void 0,u)}}function Ti(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const f=u[d];if(Ah(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(rn(),s)}const ha="__parameters__";function go(s,o,u){return Le(()=>{const l=function(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const _=new d(...f);return E.annotation=_,E;function E(i,n,r){const a=i.hasOwnProperty(ha)?i[ha]:Object.defineProperty(i,ha,{value:[]})[ha];for(;a.length<=r;)a.push(null);return(a[r]=a[r]||[]).push(_),i}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class sn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Wt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const fa=new sn("AnalyzeForEntryComponents"),gl=Function;function Kr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let l=s[u];Array.isArray(l)?(o===s&&(o=s.slice(0,u)),Kr(l,o)):o!==s&&o.push(l)}return o}function Nr(s,o){s.forEach(u=>Array.isArray(u)?Nr(u,o):o(u))}function ml(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function ss(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const yo={},kh="__NG_DI_FLAG__",Us="ngTempTokenPath",vl=/\n/gm,Fu="__source",Uu=N({provide:String,useValue:N});let Vs;function _o(s){const o=Vs;return Vs=s,o}function t_(s,o=ge.Default){if(void 0===Vs)throw new Error("inject() must be called from an injection context");return null===Vs?Et(s,void 0,o):Vs.get(s,o&ge.Optional?null:void 0,o)}function un(s,o=ge.Default){return(At||t_)(q(s),o)}function Bs(s){const o=[];for(let u=0;u<s.length;u++){const l=q(s[u]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let d,f=ge.Default;for(let _=0;_<l.length;_++){const E=l[_],i=ig(E);"number"==typeof i?-1===i?d=E.token:f|=i:d=E}o.push(un(d,f))}else o.push(un(l))}return o}function ma(s,o){return s[kh]=o,s.prototype[kh]=o,s}function ig(s){return s[kh]}function Cn(s,o,u,l){const d=s[Us];throw o[Fu]&&d.unshift(o[Fu]),s.message=function(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=j(o);if(Array.isArray(o))d=o.map(j).join(" -> ");else if("object"==typeof o){let f=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):j(E)))}d=`{${f.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace(vl,"\n  ")}`}("\n"+s.message,d,u,l),s.ngTokenPath=d,s[Us]=null,s}const ya=ma(go("Inject",s=>({token:s})),-1),Mr=ma(go("Optional"),8),js=ma(go("SkipSelf"),4);let us;function xi(s){var o;return(null===(o=function(){if(void 0===us&&(us=null,F.trustedTypes))try{us=F.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return us}())||void 0===o?void 0:o.createHTML(s))||s}class wo{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class s_ extends wo{getTypeName(){return"HTML"}}class d0 extends wo{getTypeName(){return"Style"}}class Io extends wo{getTypeName(){return"Script"}}class lg extends wo{getTypeName(){return"URL"}}class Bh extends wo{getTypeName(){return"ResourceURL"}}function kr(s){return s instanceof wo?s.changingThisBreaksApplicationSecurity:s}function dr(s,o){const u=$s(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}function $s(s){return s instanceof wo&&s.getTypeName()||null}function dg(s){return new s_(s)}function hg(s){return new d0(s)}function jh(s){return new Io(s)}function va(s){return new lg(s)}function fg(s){return new Bh(s)}class Cl{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(xi(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class pg{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const l=this.inertDocument.createElement("body");u.appendChild(l)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=xi(o),u;const l=this.inertDocument.createElement("body");return l.innerHTML=xi(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const u=o.attributes;for(let d=u.length-1;0<d;d--){const _=u.item(d).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const gg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Tl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function bo(s){return(s=String(s)).match(gg)||s.match(Tl)?s:"unsafe:"+s}function pi(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function Do(...s){const o={};for(const u of s)for(const l in u)u.hasOwnProperty(l)&&(o[l]=!0);return o}const Sl=pi("area,br,col,hr,img,wbr"),yg=pi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Wu=pi("rp,rt"),Al=Do(Sl,Do(yg,pi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Do(Wu,pi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Do(Wu,yg)),Rl=pi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zu=pi("srcset"),vg=Do(Rl,zu,pi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),pi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ku=pi("script,style,template");class xl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,l=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?l=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,l&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let d=this.checkClobberedElement(u,u.nextSibling);if(d){u=d;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!Al.hasOwnProperty(u))return this.sanitizedSomething=!0,!Ku.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const l=o.attributes;for(let d=0;d<l.length;d++){const f=l.item(d),_=f.name,E=_.toLowerCase();if(!vg.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let i=f.value;Rl[E]&&(i=bo(i)),zu[E]&&(s=i,i=(s=String(s)).split(",").map(o=>bo(o.trim())).join(", ")),this.buf.push(" ",_,'="',wg(i),'"')}var s;return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();Al.hasOwnProperty(u)&&!Sl.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(wg(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const Eg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hh=/([^\#-~ |!])/g;function wg(s){return s.replace(/&/g,"&amp;").replace(Eg,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Hh,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Zu;function Gh(s,o){let u=null;try{Zu=Zu||function(s){const o=new pg(s);return function(){try{return!!(new window.DOMParser).parseFromString(xi(""),"text/html")}catch(s){return!1}}()?new Cl(o):o}(s);let l=o?String(o):"";u=Zu.getInertBodyElement(l);let d=5,f=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=f,f=u.innerHTML,u=Zu.getInertBodyElement(l)}while(l!==f);return xi((new xl).sanitizeChildren(Nl(u)||u))}finally{if(u){const l=Nl(u)||u;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Nl(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Ft=(()=>((Ft=Ft||{})[Ft.NONE=0]="NONE",Ft[Ft.HTML=1]="HTML",Ft[Ft.STYLE=2]="STYLE",Ft[Ft.SCRIPT=3]="SCRIPT",Ft[Ft.URL=4]="URL",Ft[Ft.RESOURCE_URL=5]="RESOURCE_URL",Ft))();function Zr(s){const o=function(){const s=fe();return s&&s[12]}();return o?o.sanitize(Ft.URL,s)||"":dr(s,"URL")?kr(s):bo(Ce(s))}const Ml="__ngContext__";function xt(s,o){s[Ml]=o}function Pn(s){const o=function(s){return s[Ml]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function S(s){return s.ngOriginalError}function V(s,...o){s.error(...o)}class re{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),l=this._findContext(o),d=(s=o)&&s.ngErrorLogger||V;var s;d(this._console,"ERROR",o),u&&d(this._console,"ORIGINAL ERROR",u),l&&d(this._console,"ERROR CONTEXT",l)}_findContext(o){return o?o.ngDebugContext||this._findContext(S(o)):null}_findOriginalError(o){let u=o&&S(o);for(;u&&S(u);)u=S(u);return u||null}}const Xh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(F))();function Yr(s){return s instanceof Function?s():s}var Hs=(()=>((Hs=Hs||{})[Hs.Important=1]="Important",Hs[Hs.DashCase=2]="DashCase",Hs))();function c_(s,o){return undefined(s,o)}function Fl(s){const o=s[3];return Dt(o)?o[3]:o}function Ng(s){return y0(s[13])}function h_(s){return y0(s[4])}function y0(s){for(;null!==s&&!Dt(s);)s=s[4];return s}function Ll(s,o,u,l,d){if(null!=l){let f,_=!1;Dt(l)?f=l:Sr(l)&&(_=!0,l=l[0]);const E=Vt(l);0===s&&null!==u?null==d?Mg(o,u,E):Gs(o,u,E,d||null,!0):1===s&&null!==u?Gs(o,u,E,d||null,!0):2===s?function(s,o,u){const l=Fg(s,o);l&&function(s,o,u,l){Ut(s)?s.removeChild(o,u,l):o.removeChild(u)}(s,l,o,u)}(o,E,_):3===s&&o.destroyNode(E),null!=f&&function(s,o,u,l,d){const f=u[7];f!==Vt(u)&&Ll(o,s,l,f,d);for(let E=10;E<u.length;E++){const i=u[E];nf(i[1],i,s,o,l,f)}}(o,s,f,u,d)}}function p_(s,o,u){return Ut(s)?s.createElement(o,u):null===u?s.createElement(o):s.createElementNS(u,o)}function v0(s,o){const u=s[9],l=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,ph(d,-1)),u.splice(l,1)}function m_(s,o){if(s.length<=10)return;const u=10+o,l=s[u];if(l){const d=l[17];null!==d&&d!==s&&v0(d,l),o>0&&(s[u-1][4]=l[4]);const f=ss(s,10+o);!function(s,o){nf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function E0(s,o){if(!(256&o[2])){const u=o[11];Ut(u)&&u.destroyNode&&nf(s,o,u,3,null,null),function(s){let o=s[13];if(!o)return Og(s[1],s);for(;o;){let u=null;if(Sr(o))u=o[13];else{const l=o[10];l&&(u=l)}if(!u){for(;o&&!o[4]&&o!==s;)Sr(o)&&Og(o[1],o),o=o[3];null===o&&(o=s),Sr(o)&&Og(o[1],o),u=o&&o[4]}o=u}}(o)}}function Og(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof Cu)){const f=u[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=d[f[_]],i=f[_+1];try{i.call(E)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function(s,o){const u=s.cleanup,l=o[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const _=u[f+1],E="function"==typeof _?_(o):Vt(o[_]),i=l[d=u[f+2]],n=u[f+3];"boolean"==typeof n?E.removeEventListener(u[f],i,n):n>=0?l[d=n]():l[d=-n].unsubscribe(),f+=2}else{const _=l[d=u[f+1]];u[f].call(_)}if(null!==l){for(let f=d+1;f<l.length;f++)l[f]();o[7]=null}}(s,o),1===o[1].type&&Ut(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Dt(o[3])){u!==o[3]&&v0(u,o);const l=o[19];null!==l&&l.detachView(s)}}}function Fr(s,o,u){return function(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===nn.None||d===nn.Emulated)return null}return Rr(l,u)}(s,o.parent,u)}function Gs(s,o,u,l,d){Ut(s)?s.insertBefore(o,u,l,d):o.insertBefore(u,l,d)}function Mg(s,o,u){Ut(s)?s.appendChild(o,u):o.appendChild(u)}function kg(s,o,u,l,d){null!==l?Gs(s,o,u,l,d):Mg(s,o,u)}function Fg(s,o){return Ut(s)?s.parentNode(o):o.parentNode}let __=function(s,o,u){return 40&s.type?Rr(s,u):null};function tf(s,o,u,l){const d=Fr(s,l,o),f=o[11],E=function(s,o,u){return __(s,o,u)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(u))for(let i=0;i<u.length;i++)kg(f,d,u[i],E,!1);else kg(f,d,u,E,!1)}function Bl(s,o){if(null!==o){const u=o.type;if(3&u)return Rr(o,s);if(4&u)return So(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return Bl(s,l);{const d=s[o.index];return Dt(d)?So(-1,d):Vt(d)}}if(32&u)return c_(o,s)()||Vt(s[o.index]);{const l=nT(s,o);return null!==l?Array.isArray(l)?l[0]:Bl(Fl(s[16]),l):Bl(s,o.next)}}return null}function nT(s,o){return null!==o?s[16][6].projection[o.projection]:null}function So(s,o){const u=10+s+1;if(u<o.length){const l=o[u],d=l[1].firstChild;if(null!==d)return Bl(l,d)}return o[7]}function I_(s,o,u,l,d,f,_){for(;null!=u;){const E=l[u.index],i=u.type;if(_&&0===o&&(E&&xt(Vt(E),l),u.flags|=4),64!=(64&u.flags))if(8&i)I_(s,o,u.child,l,d,f,!1),Ll(o,s,d,E,f);else if(32&i){const n=c_(u,l);let r;for(;r=n();)Ll(o,s,d,r,f);Ll(o,s,d,E,f)}else 16&i?b_(s,o,l,u,d,f):Ll(o,s,d,E,f);u=_?u.projectionNext:u.next}}function nf(s,o,u,l,d,f){I_(u,l,s.firstChild,o,d,f,!1)}function b_(s,o,u,l,d,f){const _=u[16],i=_[6].projection[l.projection];if(Array.isArray(i))for(let n=0;n<i.length;n++)Ll(o,s,d,i[n],f);else I_(s,o,i,_[3],d,f,!0)}function b0(s,o,u){Ut(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function Lg(s,o,u){Ut(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function D0(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||s.charCodeAt(d+f)<=32)return d}u=d+1}}const C0="ng-template";function D_(s,o,u){let l=0;for(;l<s.length;){let d=s[l++];if(u&&"class"===d){if(d=s[l],-1!==D0(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function T0(s){return 4===s.type&&s.value!==C0}function oT(s,o,u){return o===(4!==s.type||u?s.value:C0)}function S0(s,o,u){let l=4;const d=s.attrs||[],f=function(s){for(let o=0;o<s.length;o++)if(Ah(s[o]))return o;return s.length}(d);let _=!1;for(let E=0;E<o.length;E++){const i=o[E];if("number"!=typeof i){if(!_)if(4&l){if(l=2|1&l,""!==i&&!oT(s,i,u)||""===i&&1===o.length){if(ls(l))return!1;_=!0}}else{const n=8&l?i:o[++E];if(8&l&&null!==s.attrs){if(!D_(s.attrs,n,u)){if(ls(l))return!1;_=!0}continue}const a=LR(8&l?"class":i,d,T0(s),u);if(-1===a){if(ls(l))return!1;_=!0;continue}if(""!==n){let c;c=a>f?"":d[a+1].toLowerCase();const h=8&l?c:null;if(h&&-1!==D0(h,n,0)||2&l&&n!==c){if(ls(l))return!1;_=!0}}}}else{if(!_&&!ls(l)&&!ls(i))return!1;if(_&&ls(i))continue;_=!1,l=i|1&l}}return ls(l)||_}function ls(s){return 0==(1&s)}function LR(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let f=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function A0(s,o,u=!1){for(let l=0;l<o.length;l++)if(S0(s,o[l],u))return!0;return!1}function Ht(s,o){return s?":not("+o.trim()+")":o}function C_(s){let o=s[0],u=1,l=2,d="",f=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&l){const E=s[++u];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!ls(_)&&(o+=Ht(f,d),d=""),l=_,f=f||!ls(l);u++}return""!==d&&(o+=Ht(f,d)),o}const rt={};function sf(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const d=u[l],f=u[l+1];if(-1!==f){const _=s.data[f];Ih(d),_.contentQueries(2,o[f],f)}}}function Ju(s,o,u,l,d,f,_,E,i,n){const r=o.blueprint.slice();return r[0]=d,r[2]=140|l,sl(r),r[3]=r[15]=s,r[8]=u,r[10]=_||s&&s[10],r[11]=E||s&&s[11],r[12]=i||s&&s[12]||null,r[9]=n||s&&s[9]||null,r[6]=f,r[16]=2==o.type?s[16]:r,r}function Gl(s,o,u,l,d){let f=s.data[o];if(null===f)f=function(s,o,u,l,d){const f=Up(),_=mh(),i=s.data[o]=function(s,o,u,l,d,f){return{type:u,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=i),null!==f&&(_?null==f.child&&null!==i.parent&&(f.child=i):null===f.next&&(f.next=i)),i}(s,o,u,l,d),Ke.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=l,f.attrs=d;const _=function(){const s=Ke.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Gr(f,!0),f}function Ra(s,o,u,l){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function ql(s,o,u){bu(o);try{const l=s.viewQuery;null!==l&&Xg(1,l,u);const d=s.template;null!==d&&tr(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&sf(s,o),s.staticViewQueries&&Xg(2,s.viewQuery,u);const f=s.components;null!==f&&function(s,o){for(let u=0;u<o.length;u++)Z0(s,o[u])}(o,f)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Gp()}}function Wl(s,o,u,l){const d=o[2];if(256==(256&d))return;bu(o);const f=oa();try{sl(o),function(s){Ke.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&tr(s,o,u,2,l);const _=3==(3&d);if(!f)if(_){const n=s.preOrderCheckHooks;null!==n&&ua(o,n,null)}else{const n=s.preOrderHooks;null!==n&&Ch(o,n,0,null),Du(o,0)}if(function(s){for(let o=Ng(s);null!==o;o=h_(o)){if(!o[2])continue;const u=o[9];for(let l=0;l<u.length;l++){const d=u[l],f=d[3];0==(1024&d[2])&&ph(f,1),d[2]|=1024}}}(o),function(s){for(let o=Ng(s);null!==o;o=h_(o))for(let u=10;u<o.length;u++){const l=o[u],d=l[1];yu(l)&&Wl(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&sf(s,o),!f)if(_){const n=s.contentCheckHooks;null!==n&&ua(o,n)}else{const n=s.contentHooks;null!==n&&Ch(o,n,1),Du(o,1)}!function(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let l=0;l<u.length;l++){const d=u[l];if(d<0)po(~d);else{const f=d,_=u[++l],E=u[++l];vh(_,f),E(2,o[f])}}}finally{po(-1)}}(s,o);const E=s.components;null!==E&&function(s,o){for(let u=0;u<o.length;u++)K0(s,o[u])}(o,E);const i=s.viewQuery;if(null!==i&&Xg(2,i,l),!f)if(_){const n=s.viewCheckHooks;null!==n&&ua(o,n)}else{const n=s.viewHooks;null!==n&&Ch(o,n,2),Du(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,ph(o[3],-1))}finally{Gp()}}function wT(s,o,u,l){const d=o[10],f=!oa(),_=mu(o);try{f&&!_&&d.begin&&d.begin(),_&&ql(s,o,l),Wl(s,o,u,l)}finally{f&&!_&&d.end&&d.end()}}function tr(s,o,u,l,d){const f=Ke.lFrame.selectedIndex,_=2&l;try{po(-1),_&&o.length>20&&function(s,o,u,l){if(!l)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&ua(o,f,u)}else{const f=s.preOrderHooks;null!==f&&Ch(o,f,0,u)}po(u)}(s,o,20,oa()),u(l,d)}finally{po(f)}}function U0(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=jg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function jg(s,o,u,l,d,f,_,E,i,n){const r=20+l,a=r+d,c=function(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:rt);return u}(r,a),h="function"==typeof n?n():n;return c[1]={type:s,blueprint:c,template:u,queries:null,viewQuery:E,declTNode:o,data:c.slice().fill(null,r),bindingStartIndex:r,expandoStartIndex:a,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:i,consts:h,incompleteFirstPass:!1}}function Gg(s,o,u,l){const d=pr(o);null===u?d.push(l):(d.push(u),s.firstCreatePass&&X_(s).push(l,d.length-1))}function j_(s,o,u){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(u=null===u?{}:u).hasOwnProperty(l)?u[l].push(o,d):u[l]=[o,d]}return u}function qn(s,o,u,l,d,f){const _=f.hostBindings;if(_){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const i=~o.index;(function(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=i&&E.push(i),E.push(l,d,_)}}function H0(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function q0(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function q_(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;ci(o)&&(u[""]=s)}}function zg(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function W0(s,o,u,l,d){s.data[l]=d;const f=d.factory||(d.factory=Xi(d.type)),_=new Cu(f,ci(d),null);s.blueprint[l]=_,u[l]=_,qn(s,o,0,l,Ra(s,u,d.hostVars,rt),d)}function W_(s,o,u){const l=Rr(o,s),d=U0(u),f=s[10],_=Qg(s,Ju(s,d,null,u.onPush?64:16,l,o,f,f.createRenderer(l,u),null,null));s[o.index]=_}function hs(s,o,u,l,d,f){const _=Rr(s,o);!function(s,o,u,l,d,f,_){if(null==f)Ut(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const E=null==_?Ce(f):_(f,l||"",d);Ut(s)?s.setAttribute(o,d,E,u):u?o.setAttributeNS(u,d,E):o.setAttribute(d,E)}}(o[11],_,f,s.value,u,l,d)}function Kg(s,o,u,l,d,f){const _=f[o];if(null!==_){const E=l.setInput;for(let i=0;i<_.length;){const n=_[i++],r=_[i++],a=_[i++];null!==E?l.setInput(u,a,n,r):u[r]=a}}}function K_(s,o){let u=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return u}function K0(s,o){const u=Qn(o,s);if(yu(u)){const l=u[1];80&u[2]?Wl(l,u,l.template,u[8]):u[5]>0&&Zg(u)}}function Zg(s){for(let l=Ng(s);null!==l;l=h_(l))for(let d=10;d<l.length;d++){const f=l[d];if(1024&f[2]){const _=f[1];Wl(_,f,_.template,f[8])}else f[5]>0&&Zg(f)}const u=s[1].components;if(null!==u)for(let l=0;l<u.length;l++){const d=Qn(u[l],s);yu(d)&&d[5]>0&&Zg(d)}}function Z0(s,o){const u=Qn(o,s),l=u[1];(function(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(l,u),ql(l,u,u[8])}function Qg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Y_(s){for(;s;){s[2]|=64;const o=Fl(s);if(ah(s)&&!o)return s;s=o}return null}function J_(s,o,u){const l=o[10];l.begin&&l.begin();try{Wl(s,o,s.template,u)}catch(d){throw uf(o,d),d}finally{l.end&&l.end()}}function xa(s){!function(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],l=Pn(u),d=l[1];wT(d,l,d.template,u)}}(s[8])}function Xg(s,o,u){Ih(0),o(s,u)}const Q0=(()=>Promise.resolve(null))();function pr(s){return s[7]||(s[7]=[])}function X_(s){return s.cleanup||(s.cleanup=[])}function uf(s,o){const u=s[9],l=u?u.get(re,null):null;l&&l.handleError(o)}function ev(s,o,u,l,d){for(let f=0;f<u.length;){const _=u[f++],E=u[f++],i=o[_],n=s.data[_];null!==n.setInput?n.setInput(i,d,l,E):i[E]=d}}function cf(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?f=E:1==f?d=H(d,E):2==f&&(l=H(l,E+": "+o[++_]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}const Na=new sn("INJECTOR",-1);class tm{get(o,u=yo){if(u===yo){const l=new Error(`NullInjectorError: No provider for ${j(o)}!`);throw l.name="NullInjectorError",l}return u}}const Pa=new sn("Set Injector scope."),xo={},eI={};let tv;function nm(){return void 0===tv&&(tv=new tm),tv}function im(s,o=null,u=null,l){return new tI(s,u,o||nm(),l)}class tI{constructor(o,u,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];u&&Nr(u,E=>this.processProvider(E,o,u)),Nr([o],E=>this.processInjectorType(E,[],f)),this.records.set(Na,ec(void 0,this));const _=this.records.get(Pa);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof o?null:j(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=yo,l=ge.Default){this.assertNotDestroyed();const d=_o(this),f=Kt(void 0);try{if(!(l&ge.SkipSelf)){let E=this.records.get(o);if(void 0===E){const i=("function"==typeof(s=o)||"object"==typeof s&&s instanceof sn)&&ar(o);E=i&&this.injectableDefInScope(i)?ec(sm(o),xo):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&ge.Self?nm():this.parent).get(o,u=l&ge.Optional&&u===yo?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[Us]=_[Us]||[]).unshift(j(o)),d)throw _;return Cn(_,o,"R3InjectorError",this.source)}throw _}finally{Kt(f),_o(d)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(j(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,u,l){if(!(o=q(o)))return!1;let d=Ds(o);const f=null==d&&o.ngModule||void 0,_=void 0===f?o:f,E=-1!==l.indexOf(_);if(void 0!==f&&(d=Ds(f)),null==d)return!1;if(null!=d.imports&&!E){let r;l.push(_);try{Nr(d.imports,a=>{this.processInjectorType(a,u,l)&&(void 0===r&&(r=[]),r.push(a))})}finally{}if(void 0!==r)for(let a=0;a<r.length;a++){const{ngModule:c,providers:h}=r[a];Nr(h,g=>this.processProvider(g,c,h||xe))}}this.injectorDefTypes.add(_);const i=Xi(_)||(()=>new _);this.records.set(_,ec(i,xo));const n=d.providers;if(null!=n&&!E){const r=o;Nr(n,a=>this.processProvider(a,r,n))}return void 0!==f&&void 0!==o.providers}processProvider(o,u,l){let d=Oa(o=q(o))?o:q(o&&o.provide);const f=df(s=o)?ec(void 0,s.useValue):ec(function(s,o,u){let l;if(Oa(s)){const d=q(s);return Xi(d)||sm(d)}if(df(s))l=()=>q(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Bs(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))l=()=>un(q(s.useExisting));else{const d=q(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return Xi(d)||sm(d);l=()=>new d(...Bs(s.deps))}return l}(s),xo);var s;if(Oa(o)||!0!==o.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=ec(void 0,xo,!0),_.factory=()=>Bs(_.multi),this.records.set(d,_)),d=o,_.multi.push(o)}this.records.set(d,f)}hydrate(o,u){return u.value===xo&&(u.value=eI,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(s=u.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const u=q(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function sm(s){const o=ar(s),u=null!==o?o.factory:Xi(s);if(null!==u)return u;if(s instanceof sn)throw new Error(`Token ${j(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const l=function(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}(o,"?");throw new Error(`Can't resolve all parameters for ${j(s)}: (${l.join(", ")}).`)}const u=function(s){const o=s&&(s[_n]||s[iu]);if(o){const u=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Error("unreachable")}function ec(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function df(s){return null!==s&&"object"==typeof s&&Uu in s}function Oa(s){return"function"==typeof s}const iI=function(s,o,u){return function(s,o=null,u=null,l){const d=im(s,o,u,l);return d._resolveInjectorDefTypes(),d}({name:u},o,s,u)};let Tt=(()=>{class s{static create(u,l){return Array.isArray(u)?iI(u,l,""):iI(u.providers,u.parent,u.name||"")}}return s.THROW_IF_NOT_FOUND=yo,s.NULL=new tm,s.\u0275prov=Wt({token:s,providedIn:"any",factory:()=>un(Na)}),s.__NG_ELEMENT_ID__=-1,s})();function pf(s,o){aa(Pn(s)[1],rn())}let gf=null;function ei(){if(!gf){const s=F.Symbol;if(s&&s.iterator)gf=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const l=o[u];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(gf=l)}}}return gf}function nc(s){return!!yf(s)&&(Array.isArray(s)||!(s instanceof Map)&&ei()in s)}function yf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Wn(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function rc(s,o,u,l){const d=fe();return Wn(d,Os(),o)&&(pt(),hs(Bt(),d,s,o,u,l)),rc}function Oo(s,o=ge.Default){const u=fe();return null===u?un(s,o):Wr(rn(),u,q(s),o)}function mm(s,o,u,l,d){const _=d?"class":"style";ev(s,u,o.inputs[_],_,l)}function Mo(s,o,u,l){const d=fe(),f=pt(),_=20+s,E=d[11],i=d[_]=p_(E,o,Ke.lFrame.currentNamespace),n=f.firstCreatePass?function(s,o,u,l,d,f,_){const E=o.consts,n=Gl(o,s,2,d,xs(E,f));return function(s,o,u,l){let d=!1;if(gh()){const f=function(s,o,u){const l=s.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];A0(u,_.selectors,!1)&&(d||(d=[]),Jn(Fs(u,o),s,_.type),ci(_)?(q0(s,u),d.unshift(_)):d.push(_))}return d}(s,o,u),_=null===l?null:{"":-1};if(null!==f){d=!0,zg(u,s.data.length,f.length);for(let r=0;r<f.length;r++){const a=f[r];a.providersResolver&&a.providersResolver(a)}let E=!1,i=!1,n=Ra(s,o,f.length,null);for(let r=0;r<f.length;r++){const a=f[r];u.mergedAttrs=Rh(u.mergedAttrs,a.hostAttrs),W0(s,u,o,n,a),q_(n,a,_),null!==a.contentQueries&&(u.flags|=8),(null!==a.hostBindings||null!==a.hostAttrs||0!==a.hostVars)&&(u.flags|=128);const c=a.type.prototype;!E&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!i&&(c.ngOnChanges||c.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),i=!0),n++}!function(s,o){const l=o.directiveEnd,d=s.data,f=o.attrs,_=[];let E=null,i=null;for(let n=o.directiveStart;n<l;n++){const r=d[n],a=r.inputs,c=null===f||T0(o)?null:K_(a,f);_.push(c),E=j_(a,n,E),i=j_(r.outputs,n,i)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=i}(s,u)}_&&function(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new _e("301",`Export of name '${o[d+1]}' not found!`);l.push(o[d],f)}}}(u,l,_)}u.mergedAttrs=Rh(u.mergedAttrs,u.attrs)}(o,u,n,xs(E,_)),null!==n.attrs&&cf(n,n.attrs,!1),null!==n.mergedAttrs&&cf(n,n.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,n),n}(_,f,d,0,o,u,l):f.data[_];Gr(n,!0);const r=n.mergedAttrs;null!==r&&jt(E,i,r);const a=n.classes;null!==a&&Lg(E,i,a);const c=n.styles;null!==c&&b0(E,i,c),64!=(64&n.flags)&&tf(f,d,i,n),0===Ke.lFrame.elementDepthCount&&xt(i,d),Ke.lFrame.elementDepthCount++,Ar(n)&&(function(s,o,u){!gh()||(function(s,o,u,l){const d=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||Fs(u,o),xt(l,o);const _=u.initialInputs;for(let E=d;E<f;E++){const i=s.data[E],n=ci(i);n&&W_(o,u,i);const r=da(o,s,E,u);xt(r,o),null!==_&&Kg(0,E-d,r,i,0,_),n&&(Qn(u.index,o)[8]=r)}}(s,o,u,Rr(u,o)),128==(128&u.flags)&&function(s,o,u){const l=u.directiveStart,d=u.directiveEnd,_=u.index,E=Ke.lFrame.currentDirectiveIndex;try{po(_);for(let i=l;i<d;i++){const n=s.data[i],r=o[i];Iu(i),(null!==n.hostBindings||0!==n.hostVars||null!==n.hostAttrs)&&H0(n,r)}}finally{po(-1),Iu(E)}}(s,o,u))}(f,d,n),function(s,o,u){if(uu(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const _=s.data[f];_.contentQueries&&_.contentQueries(1,u[f],f)}}}(f,n,d)),null!==l&&function(s,o,u=Rr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],E=-1===_?u(o,s):s[_];s[d++]=E}}}(d,n)}function Li(){let s=rn();mh()?Ke.lFrame.isParent=!1:(s=s.parent,Gr(s,!1));const o=s;Ke.lFrame.elementDepthCount--;const u=pt();u.firstCreatePass&&(aa(u,s),uu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&mm(u,o,fe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&mm(u,o,fe(),o.stylesWithoutHost,!1)}function od(s,o,u,l){Mo(s,o,u,l),Li()}function If(s){return!!s&&"function"==typeof s.then}function bv(s){return!!s&&"function"==typeof s.subscribe}const Em=bv;function ad(s,o,u,l){const d=fe(),f=pt(),_=rn();return function(s,o,u,l,d,f,_,E){const i=Ar(l),r=s.firstCreatePass&&X_(s),a=o[8],c=pr(o);let h=!0;if(3&l.type||E){const I=Rr(l,o),C=E?E(I):I,T=c.length,A=E?O=>E(Vt(O[l.index])):l.index;if(Ut(u)){let O=null;if(!E&&i&&(O=function(s,o,u,l){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===u&&d[f+1]===l){const E=o[7],i=d[f+2];return E.length>i?E[i]:null}"string"==typeof _&&(f+=2)}return null}(s,o,d,l.index)),null!==O)(O.__ngLastListenerFn__||O).__ngNextListenerFn__=f,O.__ngLastListenerFn__=f,h=!1;else{f=Cv(l,o,a,f,!1);const M=u.listen(C,d,f);c.push(f,M),r&&r.push(d,A,T,T+1)}}else f=Cv(l,o,a,f,!0),C.addEventListener(d,f,_),c.push(f),r&&r.push(d,A,T,_)}else f=Cv(l,o,a,f,!1);const g=l.outputs;let v;if(h&&null!==g&&(v=g[d])){const I=v.length;if(I)for(let C=0;C<I;C+=2){const z=o[v[C]][v[C+1]].subscribe(f),ye=c.length;c.push(f,z),r&&r.push(d,l.index,ye,-(ye+1))}}}(f,d,d[11],_,s,o,!!u,l),ad}function Jt(s,o,u,l){try{return!1!==u(l)}catch(d){return uf(s,d),!1}}function Cv(s,o,u,l,d){return function f(_){if(_===Function)return l;const E=2&s.flags?Qn(s.index,o):o;0==(32&o[2])&&Y_(E);let i=Jt(o,0,l,_),n=f.__ngNextListenerFn__;for(;n;)i=Jt(o,0,n,_)&&i,n=n.__ngNextListenerFn__;return d&&!1===i&&(_.preventDefault(),_.returnValue=!1),i}}function Af(s,o=""){const u=fe(),l=pt(),d=s+20,f=l.firstCreatePass?Gl(l,d,1,o,null):l.data[d],_=u[d]=function(s,o){return Ut(s)?s.createText(o):s.createTextNode(o)}(u[11],o);tf(l,u,_,f),Gr(f,!1)}function Am(s,o,u){const l=fe();return Wn(l,Os(),o)&&function(s,o,u,l,d,f,_,E){const i=Rr(o,u);let r,n=o.inputs;!E&&null!=n&&(r=n[l])?(ev(s,u,r,l,d),Qc(o)&&function(s,o){const u=Qn(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(l=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=_?_(d,o.value||"",l):d,Ut(f)?f.setProperty(i,l,d):ul(l)||(i.setProperty?i.setProperty(l,d):i[l]=d))}(pt(),Bt(),l,s,o,l[11],u,!0),Am}const Ba=void 0;var JT=["en",[["a","p"],["AM","PM"],Ba],[["AM","PM"],Ba,Ba],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ba,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ba,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ba,"{1} 'at' {0}",Ba],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let vd={};function _c(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Ln(o);if(u)return u;const l=o.split("-")[0];if(u=Ln(l),u)return u;if("en"===l)return JT;throw new Error(`Missing locale data for the locale "${s}".`)}function ab(s){return _c(s)[Ge.PluralCase]}function Ln(s){return s in vd||(vd[s]=F.ng&&F.ng.common&&F.ng.common.locales&&F.ng.common.locales[s]),vd[s]}var Ge=(()=>((Ge=Ge||{})[Ge.LocaleId=0]="LocaleId",Ge[Ge.DayPeriodsFormat=1]="DayPeriodsFormat",Ge[Ge.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ge[Ge.DaysFormat=3]="DaysFormat",Ge[Ge.DaysStandalone=4]="DaysStandalone",Ge[Ge.MonthsFormat=5]="MonthsFormat",Ge[Ge.MonthsStandalone=6]="MonthsStandalone",Ge[Ge.Eras=7]="Eras",Ge[Ge.FirstDayOfWeek=8]="FirstDayOfWeek",Ge[Ge.WeekendRange=9]="WeekendRange",Ge[Ge.DateFormat=10]="DateFormat",Ge[Ge.TimeFormat=11]="TimeFormat",Ge[Ge.DateTimeFormat=12]="DateTimeFormat",Ge[Ge.NumberSymbols=13]="NumberSymbols",Ge[Ge.NumberFormats=14]="NumberFormats",Ge[Ge.CurrencyCode=15]="CurrencyCode",Ge[Ge.CurrencySymbol=16]="CurrencySymbol",Ge[Ge.CurrencyName=17]="CurrencyName",Ge[Ge.Currencies=18]="Currencies",Ge[Ge.Directionality=19]="Directionality",Ge[Ge.PluralCase=20]="PluralCase",Ge[Ge.ExtraData=21]="ExtraData",Ge))();const Mf="en-US";let cb=Mf;function Ed(s){qt(s,"Expected localeId to be defined"),"string"==typeof s&&(cb=s.toLowerCase().replace(/_/g,"-"))}class Ob{}const kb="ngComponent";class xd{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${j(s)}. Did you add it to @NgModule.entryComponents?`);return o[kb]=s,o}(o)}}let Ec=(()=>{class s{}return s.NULL=new xd,s})();function Bf(...s){}function Go(s,o){return new Hi(Rr(s,o))}const Xv=function(){return Go(rn(),fe())};let Hi=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Xv,s})();function Nd(s){return s instanceof Hi?s.nativeElement:s}class Pd{}let fS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>Ub(),s})();const Ub=function(){const s=fe(),u=Qn(rn().index,s);return function(s){return s[11]}(Sr(u)?u:s)};let Lm=(()=>{class s{}return s.\u0275prov=Wt({token:s,providedIn:"root",factory:()=>null}),s})();class Um{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const tE=new Um("12.2.9");class nE{constructor(){}supports(o){return nc(o)}create(o){return new yS(o)}}const gS=(s,o)=>o;class yS{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||gS}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,f=null;for(;u||l;){const _=!l||u&&u.currentIndex<jf(l,d,f)?u:l,E=jf(_,d,f),i=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(u=u._next,null==_.previousIndex)d++;else{f||(f=[]);const n=E-d,r=i-d;if(n!=r){for(let c=0;c<n;c++){const h=c<f.length?f[c]:f[c]=0,g=h+c;r<=g&&g<n&&(f[c]=h+1)}f[_.previousIndex]=r-n}}E!==i&&o(_,E,i)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!nc(o))throw new Error(`Error trying to diff '${j(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,_,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],_=this._trackByFn(E,f),null!==u&&Object.is(u.trackById,_)?(l&&(u=this._verifyReinsertion(u,f,_,E)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,_,E),l=!0),u=u._next}else d=0,function(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[ei()]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,E=>{_=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,_)?(l&&(u=this._verifyReinsertion(u,E,_,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,_,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new Od(u,l),f,d),o}_verifyReinsertion(o,u,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Vm),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vm),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Od{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Md{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class Vm{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new Md,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jf(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class rE{constructor(){}supports(o){return o instanceof Map||yf(o)}create(){return new Bb}}class Bb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||yf(o)))throw new Error(`Error trying to diff '${j(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const l=new _S(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class _S{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Bm(){return new jm([new nE])}let jm=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||Bm()),deps:[[s,new js,new Mr]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(s){return s.name||typeof s}(u)}'`)}}return s.\u0275prov=Wt({token:s,providedIn:"root",factory:Bm}),s})();function jb(){return new kd([new rE])}let kd=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||jb()),deps:[[s,new js,new Mr]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(l)return l;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return s.\u0275prov=Wt({token:s,providedIn:"root",factory:jb}),s})();function $m(s,o,u,l,d=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&l.push(Vt(f)),Dt(f))for(let E=10;E<f.length;E++){const i=f[E],n=i[1].firstChild;null!==n&&$m(i[1],i,n,l)}const _=u.type;if(8&_)$m(s,o,u.child,l);else if(32&_){const E=c_(u,o);let i;for(;i=E();)l.push(i)}else if(16&_){const E=nT(o,u);if(Array.isArray(E))l.push(...E);else{const i=Fl(o[16]);$m(i[1],i,E,l,!0)}}u=d?u.projectionNext:u.next}return l}class wc{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return $m(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Dt(o)){const u=o[8],l=u?u.indexOf(this):-1;l>-1&&(m_(o,l),ss(u,l))}this._attachedToViewContainer=!1}E0(this._lView[1],this._lView)}onDestroy(o){Gg(this._lView[1],this._lView,null,o)}markForCheck(){Y_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){J_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,u){Ps(!0);try{J_(s,o,u)}finally{Ps(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,nf(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class zn extends wc{constructor(o){super(o),this._view=o}detectChanges(){xa(this._view)}checkNoChanges(){!function(s){Ps(!0);try{xa(s)}finally{Ps(!1)}}(this._view)}get context(){return null}}const ES=function(s){return function(s,o,u){if(Qc(s)&&!u){const l=Qn(s.index,o);return new wc(l,l)}return 47&s.type?new wc(o[16],o):null}(rn(),fe(),16==(16&s))};let wS=(()=>{class s{}return s.__NG_ELEMENT_ID__=ES,s})();const sE=[new rE],Hb=new jm([new nE]),oE=new kd(sE),qm=function(){return Wm(rn(),fe())};let Ic=(()=>{class s{}return s.__NG_ELEMENT_ID__=qm,s})();const aE=Ic,uE=class extends aE{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}createEmbeddedView(o){const u=this._declarationTContainer.tViews,l=Ju(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(u)),ql(u,l,o),new wc(l)}};function Wm(s,o){return 4&s.type?new uE(o,s,Go(s,o)):null}class Ka{}class qb{}const Wb=function(){return Kb(rn(),fe())};let bc=(()=>{class s{}return s.__NG_ELEMENT_ID__=Wb,s})();const cE=bc,lE=class extends cE{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return Go(this._hostTNode,this._hostLView)}get injector(){return new zr(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ru(this._hostTNode,this._hostLView);if(qp(o)){const u=Su(o,this._hostLView),l=Tu(o);return new zr(u[1].data[l+8],u)}return new zr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=zb(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,l){const d=o.createEmbeddedView(u||{});return this.insert(d,l),d}createComponent(o,u,l,d,f){const _=l||this.parentInjector;if(!f&&null==o.ngModule&&_){const i=_.get(Ka,null);i&&(f=i)}const E=o.create(_,d,void 0,f);return this.insert(E.hostView,u),E}insert(o,u){const l=o._lView,d=l[1];if(Dt(l[3])){const r=this.indexOf(o);if(-1!==r)this.detach(r);else{const a=l[3],c=new lE(a,a[6],a[3]);c.detach(c.indexOf(o))}}const f=this._adjustIndex(u),_=this._lContainer;!function(s,o,u,l){const d=10+l,f=u.length;l>0&&(u[d-1][4]=o),l<f-10?(o[4]=u[d],ml(u,10+l,o)):(u.push(o),o[4]=null),o[3]=u;const _=o[17];null!==_&&u!==_&&function(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,l,_,f);const E=So(f,_),i=l[11],n=Fg(i,_[7]);return null!==n&&function(s,o,u,l,d,f){l[0]=d,l[6]=o,nf(s,l,u,1,d,f)}(d,_[6],i,l,n,E),o.attachToViewContainerRef(),ml(dE(_),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=zb(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=m_(this._lContainer,u);l&&(ss(dE(this._lContainer),u),E0(l[1],l))}detach(o){const u=this._adjustIndex(o,-1),l=m_(this._lContainer,u);return l&&null!=ss(dE(this._lContainer),u)?new wc(l):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function zb(s){return s[8]}function dE(s){return s[8]||(s[8]=[])}function Kb(s,o){let u;const l=o[s.index];if(Dt(l))u=l;else{let d;if(8&s.type)d=Vt(l);else{const f=o[11];d=f.createComment("");const _=Rr(s,o);Gs(f,Fg(f,_),d,function(s,o){return Ut(s)?s.nextSibling(o):o.nextSibling}(f,_),!1)}o[s.index]=u=function(s,o,u,l){return new Array(s,!0,!1,o,null,0,l,u,null,null)}(l,o,d,s),Qg(o,u)}return new lE(u,s,o)}const Qa={};class np extends Ec{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Nn(o);return new jE(u,this.ngModule)}}function dD(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const GS=new sn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Xh});class jE extends Ob{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=o.selectors.map(C_).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return dD(this.componentDef.inputs)}get outputs(){return dD(this.componentDef.outputs)}create(o,u,l,d){const f=(d=d||this.ngModule)?function(s,o){return{get:(u,l,d)=>{const f=s.get(u,Qa,d);return f!==Qa||l===Qa?f:o.get(u,l,d)}}}(o,d.injector):o,_=f.get(Pd,rl),E=f.get(Lm,null),i=_.createRenderer(null,this.componentDef),n=this.componentDef.selectors[0][0]||"div",r=l?function(s,o,u){if(Ut(s))return s.selectRootElement(o,u===nn.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(i,l,this.componentDef.encapsulation):p_(_.createRenderer(null,this.componentDef),n,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(n)),a=this.componentDef.onPush?576:528,c=function(s,o){return{components:[],scheduler:s||Xh,clean:Q0,playerHandler:o||null,flags:0}}(),h=jg(0,null,null,1,0,null,null,null,null,null),g=Ju(null,h,c,a,null,null,_,i,E,f);let v,I;bu(g);try{const C=function(s,o,u,l,d,f){const _=u[1];u[20]=s;const i=Gl(_,20,2,"#host",null),n=i.mergedAttrs=o.hostAttrs;null!==n&&(cf(i,n,!0),null!==s&&(jt(d,s,n),null!==i.classes&&Lg(d,s,i.classes),null!==i.styles&&b0(d,s,i.styles)));const r=l.createRenderer(s,o),a=Ju(u,U0(o),null,o.onPush?64:16,u[20],i,l,r,f||null,null);return _.firstCreatePass&&(Jn(Fs(i,u),_,o.type),q0(_,i),zg(i,u.length,1)),Qg(u,a),u[20]=a}(r,this.componentDef,g,_,i);if(r)if(l)jt(i,r,["ng-version",tE.full]);else{const{attrs:T,classes:A}=function(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let f=s[l];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++l]):8===d&&u.push(f);else{if(!ls(d))break;d=f}l++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);T&&jt(i,r,T),A&&A.length>0&&Lg(i,r,A.join(" "))}if(I=Rs(h,20),void 0!==u){const T=I.projection=[];for(let A=0;A<this.ngContentSelectors.length;A++){const O=u[A];T.push(null!=O?Array.from(O):null)}}v=function(s,o,u,l,d){const f=u[1],_=function(s,o,u){const l=rn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),W0(s,l,o,Ra(s,o,1,null),u));const d=da(o,s,l.directiveStart,l);xt(d,o);const f=Rr(l,o);return f&&xt(f,o),d}(f,u,o);if(l.components.push(_),s[8]=_,d&&d.forEach(i=>i(_,o)),o.contentQueries){const i=rn();o.contentQueries(1,_,i.directiveStart)}const E=rn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(po(E.index),qn(u[1],E,0,E.directiveStart,E.directiveEnd,o),H0(o,_)),_}(C,this.componentDef,g,c,[pf]),ql(h,g,null)}finally{Gp()}return new HE(this.componentType,v,Go(I,g),g,I)}}class HE extends class{}{constructor(o,u,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new zn(d),this.componentType=o}get injector(){return new zr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const Ja=new Map;class zE extends Ka{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new np(this);const l=Zn(o),d=o[ft]||null;d&&Ed(d),this._bootstrapComponents=Yr(l.bootstrap),this._r3Injector=im(o,u,[{provide:Ka,useValue:this},{provide:Ec,useValue:this.componentFactoryResolver}],j(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Tt.THROW_IF_NOT_FOUND,l=ge.Default){return o===Tt||o===Ka||o===Na?this:this._r3Injector.get(o,u,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Xa extends qb{constructor(o){super(),this.moduleType=o,null!==Zn(o)&&function(s){const o=new Set;!function u(l){const d=Zn(l,!0),f=d.id;null!==f&&(function(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${j(o)} vs ${j(o.name)}`)}(f,Ja.get(f),l),Ja.set(f,l));const _=Yr(d.imports);for(const E of _)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new zE(this.moduleType,o)}}function Ki(s){return o=>{setTimeout(s,void 0,o)}}const ws=class extends b.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){var d,f,_;let E=o,i=u||(()=>null),n=l;if(o&&"object"==typeof o){const a=o;E=null===(d=a.next)||void 0===d?void 0:d.bind(a),i=null===(f=a.error)||void 0===f?void 0:f.bind(a),n=null===(_=a.complete)||void 0===_?void 0:_.bind(a)}this.__isAsync&&(i=Ki(i),E&&(E=Ki(E)),n&&(n=Ki(n)));const r=super.subscribe({next:E,error:i,complete:n});return o instanceof W.w&&o.add(r),r}};function eA(){return this._results[ei()]()}class xc{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=ei(),l=xc.prototype;l[u]||(l[u]=eA)}get changes(){return this._changes||(this._changes=new ws)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=Kr(o);(this._changesDetected=!function(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],f=o[l];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class op{constructor(o){this.queryList=o,this.matches=null}clone(){return new op(this.queryList)}setDirty(){this.queryList.setDirty()}}class QE{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<l;f++){const _=u.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new QE(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Js(o,u).matches&&this.queries[u].setDirty()}}class bD{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class an{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==u?u.push(f):u=[f])}return null!==u?new an(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class DD{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new DD(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,u,ux(u,f)),this.matchTNodeWithReadOption(o,u,fl(u,o,f,!1,!1))}else l===Ic?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,fl(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Hi||d===bc||d===Ic&&4&u.type)this.addMatch(u.index,-2);else{const f=fl(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function ux(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function CD(s,o,u,l){return-1===u?function(s,o){return 11&s.type?Go(s,o):4&s.type?Wm(s,o):null}(o,s):-2===u?function(s,o,u){return u===Hi?Go(o,s):u===Ic?Wm(o,s):u===bc?Kb(o,s):void 0}(s,o,l):da(s,s[1],u,o)}function TD(s,o,u,l){const d=o[19].queries[l];if(null===d.matches){const f=s.data,_=u.matches,E=[];for(let i=0;i<_.length;i+=2){const n=_[i];E.push(n<0?null:CD(o,f[n],_[i+1],u.metadata.read))}d.matches=E}return d.matches}function iy(s,o,u,l){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const _=TD(s,o,d,u);for(let E=0;E<f.length;E+=2){const i=f[E];if(i>0)l.push(_[E/2]);else{const n=f[E+1],r=o[-i];for(let a=10;a<r.length;a++){const c=r[a];c[17]===c[3]&&iy(c[1],c,n,l)}if(null!==r[9]){const a=r[9];for(let c=0;c<a.length;c++){const h=a[c];iy(h[1],h,n,l)}}}}}return l}function SD(s){const o=fe(),u=pt(),l=fo();Ih(l+1);const d=Js(u,l);if(s.dirty&&mu(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?iy(u,o,l,[]):TD(u,o,d,l);s.reset(f,Nd),s.notifyOnChanges()}return!0}return!1}function AD(s,o,u,l){const d=pt();if(d.firstCreatePass){const f=rn();(function(s,o,u){null===s.queries&&(s.queries=new an),s.queries.track(new DD(o,u))})(d,new bD(o,u,l),f.index),function(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function(s,o,u){const l=new xc(4==(4&u));Gg(s,o,l,l.destroy),null===o[19]&&(o[19]=new QE),o[19].queries.push(new op(l))}(d,fe(),u)}function RD(){return s=fe(),o=fo(),s[19].queries[o].queryList;var s,o}function Js(s,o){return s.queries.getByIndex(o)}const ow=new sn("Application Initializer");let zd=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Bf,this.reject=Bf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(If(f))u.push(f);else if(Em(f)){const _=new Promise((E,i)=>{f.subscribe({complete:E,error:i})});u.push(_)}}Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(un(ow,8))},s.\u0275prov=Wt({token:s,factory:s.\u0275fac}),s})();const zD=new sn("AppId"),IA={provide:zD,useFactory:function(){return`${KD()}${KD()}${KD()}`},deps:[]};function KD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ZD=new sn("Platform Initializer"),YD=new sn("Platform ID"),QD=new sn("appBootstrapListener");let aw=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Wt({token:s,factory:s.\u0275fac}),s})();const gp=new sn("LocaleId"),Kd=new sn("DefaultCurrencyCode");class tC{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}const ii=function(s){return new Xa(s)},jr=ii,mp=function(s){return Promise.resolve(ii(s))},wr=function(s){const o=ii(s),l=Yr(Zn(s).declarations).reduce((d,f)=>{const _=Nn(f);return _&&d.push(new jE(_)),d},[]);return new tC(o,l)},TA=wr,Fc=function(s){return Promise.resolve(wr(s))};let Lc=(()=>{class s{constructor(){this.compileModuleSync=jr,this.compileModuleAsync=mp,this.compileModuleAndAllComponentsSync=TA,this.compileModuleAndAllComponentsAsync=Fc}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Wt({token:s,factory:s.\u0275fac}),s})();const AA=(()=>Promise.resolve(0))();function cw(s){"undefined"==typeof Zone?AA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class or{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ws(!1),this.onMicrotaskEmpty=new ws(!1),this.onStable=new ws(!1),this.onError=new ws(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let s=F.requestAnimationFrame,o=F.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(F,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,dy(s),s.isCheckStableRunning=!0,lw(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),dy(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,f,_,E)=>{try{return rC(s),u.invokeTask(d,f,_,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),dw(s)}},onInvoke:(u,l,d,f,_,E,i)=>{try{return rC(s),u.invoke(d,f,_,E,i)}finally{s.shouldCoalesceRunChangeDetection&&o(),dw(s)}},onHasTask:(u,l,d,f)=>{u.hasTask(d,f),l===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,dy(s),lw(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,l,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!or.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(or.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,o,xA,Bf,Bf);try{return f.runTask(_,u,l)}finally{f.cancelTask(_)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const xA={};function lw(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function dy(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function rC(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function dw(s){s._nesting--,lw(s)}class hw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ws,this.onMicrotaskEmpty=new ws,this.onStable=new ws,this.onError=new ws}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}let hy=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{or.assertNotInAngularZone(),cw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,l,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(un(or))},s.\u0275prov=Wt({token:s,factory:s.\u0275fac}),s})(),iC=(()=>{class s{constructor(){this._applications=new Map,fy.addToWindow(this)}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return fy.findTestabilityInTree(this,u,l)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Wt({token:s,factory:s.\u0275fac}),s})();class sC{addToWindow(o){}findTestabilityInTree(o,u,l){return null}}function oC(s){fy=s}let fy=new sC,fw=!0,pw=!1;function py(){return pw=!0,fw}function aC(){if(pw)throw new Error("Cannot enable prod mode after platform setup.");fw=!1}let Ii;const lC=new sn("AllowMultipleToken");class dC{constructor(o,u){this.name=o,this.token=u}}function yw(s,o,u=[]){const l=`Platform: ${o}`,d=new sn(l);return(f=[])=>{let _=_w();if(!_||_.injector.get(lC,!1))if(s)s(u.concat(f).concat({provide:d,useValue:!0}));else{const E=u.concat(f).concat({provide:d,useValue:!0},{provide:Pa,useValue:"platform"});!function(s){if(Ii&&!Ii.destroyed&&!Ii.injector.get(lC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ii=s.get(fC);const o=s.get(ZD,null);o&&o.forEach(u=>u())}(Tt.create({providers:E,name:l}))}return function(s){const o=_w();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(d)}}function _w(){return Ii&&!Ii.destroyed?Ii:null}let fC=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const E=function(s,o){let u;return u="noop"===s?new hw:("zone.js"===s?void 0:s)||new or({enableLongStackTrace:py(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),i=[{provide:or,useValue:E}];return E.run(()=>{const n=Tt.create({providers:i,parent:this.injector,name:u.moduleType.name}),r=u.create(n),a=r.injector.get(re,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return E.runOutsideAngular(()=>{const c=E.onError.subscribe({next:h=>{a.handleError(h)}});r.onDestroy(()=>{vw(this._modules,r),c.unsubscribe()})}),function(s,o,u){try{const l=u();return If(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(a,E,()=>{const c=r.injector.get(zd);return c.runInitializers(),c.donePromise.then(()=>(Ed(r.injector.get(gp,Mf)||Mf),this._moduleDoBootstrap(r),r))})})}bootstrapModule(u,l=[]){const d=gC({},l);return function(s,o,u){const l=new Xa(u);return Promise.resolve(l)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const l=u.injector.get(_p);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${j(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(un(Tt))},s.\u0275prov=Wt({token:s,factory:s.\u0275fac}),s})();function gC(s,o){return Array.isArray(o)?o.reduce(gC,s):Object.assign(Object.assign({},s),o)}let _p=(()=>{class s{constructor(u,l,d,f,_){this._zone=u,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new k.y(n=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{n.next(this._stable),n.complete()})}),i=new k.y(n=>{let r;this._zone.runOutsideAngular(()=>{r=this._zone.onStable.subscribe(()=>{or.assertNotInAngularZone(),cw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,n.next(!0))})})});const a=this._zone.onUnstable.subscribe(()=>{or.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{n.next(!1)}))});return()=>{r.unsubscribe(),a.unsubscribe()}});this.isStable=(0,ue.T)(E,i.pipe(s=>(0,se.x)()(function(s,o){return function(l){let d;d="function"==typeof s?s:function(){return s};const f=Object.create(l,oe.N);return f.source=l,f.subjectFactory=d,f}}(B)(s))))}bootstrap(u,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=u instanceof Ob?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const f=function(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Ka),E=d.create(Tt.NULL,[],l||d.selector,f),i=E.location.nativeElement,n=E.injector.get(hy,null),r=n&&E.injector.get(iC);return n&&r&&r.registerApplication(i,n),E.onDestroy(()=>{this.detachView(E.hostView),vw(this.components,E),r&&r.unregisterApplication(i)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;vw(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(QD,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(un(or),un(Tt),un(re),un(Ec),un(zd))},s.\u0275prov=Wt({token:s,factory:s.\u0275fac}),s})();function vw(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}class UA{}class Ew{}const ww={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let jA=(()=>{class s{constructor(u,l){this._compiler=u,this._config=l||ww}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[l,d]=u.split("#");return void 0===d&&(d="default"),P(8255)(l).then(f=>f[d]).then(f=>vC(f,l,d)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(u){let[l,d]=u.split("#"),f="NgFactory";return void 0===d&&(d="default",f=""),P(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(_=>_[d+f]).then(_=>vC(_,l,d))}}return s.\u0275fac=function(u){return new(u||s)(un(Lc),un(Ew,8))},s.\u0275prov=Wt({token:s,factory:s.\u0275fac}),s})();function vC(s,o,u){if(!s)throw new Error(`Cannot find '${u}' in '${o}'`);return s}const WA=function(s){return null},KA=yw(null,"core",[{provide:YD,useValue:"unknown"},{provide:fC,deps:[Tt]},{provide:iC,deps:[]},{provide:aw,deps:[]}]),JA=[{provide:_p,useClass:_p,deps:[or,Tt,re,Ec,zd]},{provide:GS,deps:[or],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:zd,useClass:zd,deps:[[new Mr,ow]]},{provide:Lc,useClass:Lc,deps:[]},IA,{provide:jm,useFactory:function(){return Hb},deps:[]},{provide:kd,useFactory:function(){return oE},deps:[]},{provide:gp,useFactory:function(s){return Ed(s=s||"undefined"!=typeof $localize&&$localize.locale||Mf),s},deps:[[new ya(gp),new Mr,new js]]},{provide:Kd,useValue:"USD"}];let eR=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(un(_p))},s.\u0275mod=su({type:s}),s.\u0275inj=ai({providers:JA}),s})()},8939:(ke,de,P)=>{"use strict";P.d(de,{hO:()=>j,xv:()=>B,Dh:()=>se,GT:()=>Q,on:()=>x,pX:()=>oe});var b=P(3018),W=P(7841),k=P(9126);ke=P.hmd(ke);const ue=["ngOnDestroy"],oe=(H,ie,K,q={})=>new Proxy(H,{get:(Ie,Ee)=>K.runOutsideAngular(()=>{var _e;if(H[Ee])return(null===(_e=null==q?void 0:q.spy)||void 0===_e?void 0:_e.get)&&q.spy.get(Ee,H[Ee]),H[Ee];if(ue.indexOf(Ee)>-1)return()=>{};const Se=ie.toPromise().then(Ae=>{const Ce=Ae&&Ae[Ee];return"function"==typeof Ce?Ce.bind(Ae):Ce&&Ce.then?Ce.then(st=>K.run(()=>st)):K.run(()=>Ce)});return new Proxy(()=>{},{get:(Ae,Ce)=>Se[Ce],apply:(Ae,Ce,st)=>Se.then(gt=>{var le;const Y=gt&&gt(...st);return(null===(le=null==q?void 0:q.spy)||void 0===le?void 0:le.apply)&&q.spy.apply(Ee,st,Y),Y})})})}),Q=(H,ie)=>{ie.forEach(K=>{Object.getOwnPropertyNames(K.prototype||K).forEach(q=>{Object.defineProperty(H.prototype,q,Object.getOwnPropertyDescriptor(K.prototype||K,q))})})};class ce{constructor(ie){return ie}}const se=new b.OlP("angularfire2.app.options"),B=new b.OlP("angularfire2.app.name");function x(H,ie,K){const Ie="object"==typeof K&&K||{};Ie.name=Ie.name||"string"==typeof K&&K||"[DEFAULT]";const _e=W.Z.apps.filter(Se=>Se&&Se.name===Ie.name)[0]||ie.runOutsideAngular(()=>W.Z.initializeApp(H,Ie));try{JSON.stringify(H)!==JSON.stringify(_e.options)&&N("error",`${_e.name} Firebase App already initialized with different options${ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Se){}return new ce(_e)}const N=(H,...ie)=>{(0,b.X6Q)()&&"undefined"!=typeof console&&console[H](...ie)},$={provide:ce,useFactory:x,deps:[se,b.R0b,[new b.FiY,B]]};let j=(()=>{class H{constructor(K){W.Z.registerVersion("angularfire",k.q4.full,"core"),W.Z.registerVersion("angularfire",k.q4.full,"app-compat"),W.Z.registerVersion("angular",b.q4F.full,K.toString())}static initializeApp(K,q){return{ngModule:H,providers:[{provide:se,useValue:K},{provide:B,useValue:q}]}}}return H.\u0275fac=function(K){return new(K||H)(b.LFG(b.Lbi))},H.\u0275mod=b.oAB({type:H}),H.\u0275inj=b.cJS({providers:[$]}),H})()},9126:(ke,de,P)=>{"use strict";P.d(de,{q4:()=>x,iC:()=>Y,fc:()=>gt,HU:()=>Se,cc:()=>j});var b=P(3018);(0,P(5452).registerVersion)("firebase","9.1.2","app");var oe=P(7771),Q=P(3637),ce=P(3342),se=P(309),B=P(3101);ke=P.hmd(ke);const x=new b.GfV("7.0.4"),N=!!ke.hot,$=(ee,...G)=>{(0,b.X6Q)()&&"undefined"!=typeof console&&console[ee](...G)};function j(ee,G,ve,Fe,lt){const[,He,ot]=globalThis.\u0275AngularfireInstanceCache.find(Lt=>Lt[0]===ee)||[];if(He)return function(ee,G){try{return ee.toString()===G.toString()}catch(ve){return ee===G}}(lt,ot)||($("error",`${G} was already initialized on the ${ve} Firebase App with different settings.${N?" You may need to reload as Firebase is not HMR aware.":""}`),$("warn",{is:lt,was:ot})),He;{const Lt=Fe();return globalThis.\u0275AngularfireInstanceCache.push([ee,Lt,lt]),Lt}}function Ie(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class Ee{constructor(G,ve=oe.N){this.zone=G,this.delegate=ve}now(){return this.delegate.now()}schedule(G,ve,Fe){const lt=this.zone;return this.delegate.schedule(function(ot){lt.runGuarded(()=>{G.apply(this,[ot])})},ve,Fe)}}class _e{constructor(G){this.zone=G,this.task=null}call(G,ve){const Fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ie,{},Ie,Ie)),ve.pipe((0,ce.b)({next:Fe,complete:Fe,error:Fe})).subscribe(G).add(Fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Se=(()=>{class ee{constructor(ve){this.ngZone=ve,this.outsideAngular=ve.runOutsideAngular(()=>new Ee(Zone.current)),this.insideAngular=ve.run(()=>new Ee(Zone.current,Q.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return ee.\u0275fac=function(ve){return new(ve||ee)(b.LFG(b.R0b))},ee.\u0275prov=b.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"root"}),ee})();function Ae(){const ee=globalThis.\u0275AngularFireScheduler;if(!ee)throw new Error("AngularFireModule has not been provided");return ee}function gt(ee){return ee.pipe((0,se.QV)(Ae().outsideAngular))}function Y(ee){return Ae(),function(ee){return function(ve){return(ve=ve.lift(new _e(ee.ngZone))).pipe((0,B.R)(ee.outsideAngular),(0,se.QV)(ee.insideAngular))}}(Ae())(ee)}},4486:(ke,de,P)=>{"use strict";P.d(de,{Z:()=>ie});var b=P(3854),W=P(6034),k=P(5452),ue=P(5601);class oe{constructor(q,Ie){this._delegate=q,this.firebase=Ie,(0,k._addComponent)(q,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=q.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this._delegate.automaticDataCollectionEnabled=q}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(q=>{this._delegate.checkDestroyed(),q()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(q,Ie=k._DEFAULT_ENTRY_NAME){var Ee;this._delegate.checkDestroyed();const _e=this._delegate.container.getProvider(q);return!_e.isInitialized()&&"EXPLICIT"===(null===(Ee=_e.getComponent())||void 0===Ee?void 0:Ee.instantiationMode)&&_e.initialize(),_e.getImmediate({identifier:Ie})}_removeServiceInstance(q,Ie=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(q).clearInstance(Ie)}_addComponent(q){(0,k._addComponent)(this._delegate,q)}_addOrOverwriteComponent(q){(0,k._addOrOverwriteComponent)(this._delegate,q)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new b.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),x=function B(){const K=function(K){const q={},Ie={__esModule:!0,initializeApp:function(gt,le={}){const Y=k.initializeApp(gt,le);if((0,b.r3)(q,Y.name))return q[Y.name];const J=new K(Y,Ie);return q[Y.name]=J,J},app:_e,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function(gt){const le=gt.name,Y=le.replace("-compat","");if(k._registerComponent(gt)&&"PUBLIC"===gt.type){const J=(te=_e())=>{if("function"!=typeof te[Y])throw ce.create("invalid-app-argument",{appName:le});return te[Y]()};void 0!==gt.serviceProps&&(0,b.ZB)(J,gt.serviceProps),Ie[Y]=J,K.prototype[Y]=function(...te){return this._getService.bind(this,le).apply(this,gt.multipleInstances?te:[])}}return"PUBLIC"===gt.type?Ie[Y]:null},removeApp:function(gt){delete q[gt]},useAsService:function(gt,le){return"serverAuth"===le?null:le},modularAPIs:k}};function _e(gt){if(!(0,b.r3)(q,gt=gt||k._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:gt});return q[gt]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function(){return Object.keys(q).map(gt=>q[gt])}}),_e.App=K,Ie}(oe);return K.INTERNAL=Object.assign(Object.assign({},K.INTERNAL),{createFirebaseNamespace:B,extendNamespace:function(Ie){(0,b.ZB)(K,Ie)},createSubscribe:b.ne,ErrorFactory:b.LL,deepExtend:b.ZB}),K}(),N=new ue.Yd("@firebase/app-compat");if((0,b.jU)()&&void 0!==self.firebase){N.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const K=self.firebase.SDK_VERSION;K&&K.indexOf("LITE")>=0&&N.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ie=x;(0,k.registerVersion)("@firebase/app-compat","0.1.4",undefined)},5452:(ke,de,P)=>{"use strict";P.r(de),P.d(de,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>oi,_DEFAULT_ENTRY_NAME:()=>lt,_addComponent:()=>en,_addOrOverwriteComponent:()=>$r,_apps:()=>ot,_clearComponents:()=>yt,_components:()=>Lt,_getProvider:()=>qt,_registerComponent:()=>Hr,_removeServiceInstance:()=>We,deleteApp:()=>bs,getApp:()=>ar,getApps:()=>Qo,initializeApp:()=>ai,onLog:()=>_n,registerVersion:()=>Ds,setLogLevel:()=>br});var b=P(8239),W=P(6034),k=P(5601),ue=P(3854);class oe{constructor(ge){this.container=ge}getPlatformInfoString(){return this.container.getProviders().map(At=>{if(function(Qe){const ge=Qe.getComponent();return"VERSION"===(null==ge?void 0:ge.type)}(At)){const zt=At.getImmediate();return`${zt.library}/${zt.version}`}return null}).filter(At=>At).join(" ")}}const ce="@firebase/app",B=new k.Yd("@firebase/app"),lt="[DEFAULT]",He={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ot=new Map,Lt=new Map;function en(Qe,ge){try{Qe.container.addComponent(ge)}catch(At){B.debug(`Component ${ge.name} failed to register with FirebaseApp ${Qe.name}`,At)}}function $r(Qe,ge){Qe.container.addOrOverwriteComponent(ge)}function Hr(Qe){const ge=Qe.name;if(Lt.has(ge))return B.debug(`There were multiple attempts to register component ${ge}.`),!1;Lt.set(ge,Qe);for(const At of ot.values())en(At,Qe);return!0}function qt(Qe,ge){return Qe.container.getProvider(ge)}function We(Qe,ge,At=lt){qt(Qe,ge).clearInstance(At)}function yt(){Lt.clear()}const Yi=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Wt{constructor(ge,At,zt){this._isDeleted=!1,this._options=Object.assign({},ge),this._config=Object.assign({},At),this._name=At.name,this._automaticDataCollectionEnabled=At.automaticDataCollectionEnabled,this._container=zt,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this.checkDestroyed(),this._automaticDataCollectionEnabled=ge}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ge){this._isDeleted=ge}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}const oi="9.1.2";function ai(Qe,ge={}){"object"!=typeof ge&&(ge={name:ge});const At=Object.assign({name:lt,automaticDataCollectionEnabled:!1},ge),zt=At.name;if("string"!=typeof zt||!zt)throw Yi.create("bad-app-name",{appName:String(zt)});const Kt=ot.get(zt);if(Kt){if((0,ue.vZ)(Qe,Kt.options)&&(0,ue.vZ)(At,Kt.config))return Kt;throw Yi.create("duplicate-app",{appName:zt})}const Et=new W.H0(zt);for(const Le of Lt.values())Et.addComponent(Le);const Me=new Wt(Qe,At,Et);return ot.set(zt,Me),Me}function ar(Qe=lt){const ge=ot.get(Qe);if(!ge)throw Yi.create("no-app",{appName:Qe});return ge}function Qo(){return Array.from(ot.values())}function bs(Qe){return to.apply(this,arguments)}function to(){return(to=(0,b.Z)(function*(Qe){const ge=Qe.name;ot.has(ge)&&(ot.delete(ge),yield Promise.all(Qe.container.getProviders().map(At=>At.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function Ds(Qe,ge,At){var zt;let Kt=null!==(zt=He[Qe])&&void 0!==zt?zt:Qe;At&&(Kt+=`-${At}`);const Et=Kt.match(/\s|\//),Me=ge.match(/\s|\//);if(Et||Me){const Le=[`Unable to register library "${Kt}" with version "${ge}":`];return Et&&Le.push(`library name "${Kt}" contains illegal characters (whitespace or "/")`),Et&&Me&&Le.push("and"),Me&&Le.push(`version name "${ge}" contains illegal characters (whitespace or "/")`),void B.warn(Le.join(" "))}Hr(new W.wA(`${Kt}-version`,()=>({library:Kt,version:ge}),"VERSION"))}function _n(Qe,ge){if(null!==Qe&&"function"!=typeof Qe)throw Yi.create("invalid-log-argument");(0,k.Am)(Qe,ge)}function br(Qe){(0,k.Ub)(Qe)}Hr(new W.wA("platform-logger",ge=>new oe(ge),"PRIVATE")),Ds(ce,"0.7.3",undefined),Ds("fire-js","")},6034:(ke,de,P)=>{"use strict";P.d(de,{wA:()=>k,H0:()=>se});var b=P(4762),W=P(3854),k=function(){function B(x,N,$){this.name=x,this.instanceFactory=N,this.type=$,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return B.prototype.setInstantiationMode=function(x){return this.instantiationMode=x,this},B.prototype.setMultipleInstances=function(x){return this.multipleInstances=x,this},B.prototype.setServiceProps=function(x){return this.serviceProps=x,this},B.prototype.setInstanceCreatedCallback=function(x){return this.onInstanceCreated=x,this},B}(),ue="[DEFAULT]",oe=function(){function B(x,N){this.name=x,this.container=N,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return B.prototype.get=function(x){var N=this.normalizeInstanceIdentifier(x);if(!this.instancesDeferred.has(N)){var $=new W.BH;if(this.instancesDeferred.set(N,$),this.isInitialized(N)||this.shouldAutoInitialize())try{var j=this.getOrInitializeService({instanceIdentifier:N});j&&$.resolve(j)}catch(H){}}return this.instancesDeferred.get(N).promise},B.prototype.getImmediate=function(x){var N,$=this.normalizeInstanceIdentifier(null==x?void 0:x.identifier),j=null!==(N=null==x?void 0:x.optional)&&void 0!==N&&N;if(!this.isInitialized($)&&!this.shouldAutoInitialize()){if(j)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:$})}catch(H){if(j)return null;throw H}},B.prototype.getComponent=function(){return this.component},B.prototype.setComponent=function(x){var N,$;if(x.name!==this.name)throw Error("Mismatching Component "+x.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=x,this.shouldAutoInitialize()){if(function(B){return"EAGER"===B.instantiationMode}(x))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(_e){}try{for(var j=(0,b.XA)(this.instancesDeferred.entries()),H=j.next();!H.done;H=j.next()){var ie=(0,b.CR)(H.value,2),q=ie[1],Ie=this.normalizeInstanceIdentifier(ie[0]);try{var Ee=this.getOrInitializeService({instanceIdentifier:Ie});q.resolve(Ee)}catch(_e){}}}catch(_e){N={error:_e}}finally{try{H&&!H.done&&($=j.return)&&$.call(j)}finally{if(N)throw N.error}}}},B.prototype.clearInstance=function(x){void 0===x&&(x=ue),this.instancesDeferred.delete(x),this.instancesOptions.delete(x),this.instances.delete(x)},B.prototype.delete=function(){return(0,b.mG)(this,void 0,void 0,function(){var x;return(0,b.Jh)(this,function(N){switch(N.label){case 0:return x=Array.from(this.instances.values()),[4,Promise.all((0,b.ev)((0,b.ev)([],(0,b.CR)(x.filter(function($){return"INTERNAL"in $}).map(function($){return $.INTERNAL.delete()}))),(0,b.CR)(x.filter(function($){return"_delete"in $}).map(function($){return $._delete()}))))];case 1:return N.sent(),[2]}})})},B.prototype.isComponentSet=function(){return null!=this.component},B.prototype.isInitialized=function(x){return void 0===x&&(x=ue),this.instances.has(x)},B.prototype.getOptions=function(x){return void 0===x&&(x=ue),this.instancesOptions.get(x)||{}},B.prototype.initialize=function(x){var N,$;void 0===x&&(x={});var j=x.options,H=void 0===j?{}:j,ie=this.normalizeInstanceIdentifier(x.instanceIdentifier);if(this.isInitialized(ie))throw Error(this.name+"("+ie+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var K=this.getOrInitializeService({instanceIdentifier:ie,options:H});try{for(var q=(0,b.XA)(this.instancesDeferred.entries()),Ie=q.next();!Ie.done;Ie=q.next()){var Ee=(0,b.CR)(Ie.value,2),Se=Ee[1];ie===this.normalizeInstanceIdentifier(Ee[0])&&Se.resolve(K)}}catch(Ce){N={error:Ce}}finally{try{Ie&&!Ie.done&&($=q.return)&&$.call(q)}finally{if(N)throw N.error}}return K},B.prototype.onInit=function(x,N){var $,j=this.normalizeInstanceIdentifier(N),H=null!==($=this.onInitCallbacks.get(j))&&void 0!==$?$:new Set;H.add(x),this.onInitCallbacks.set(j,H);var ie=this.instances.get(j);return ie&&x(ie,j),function(){H.delete(x)}},B.prototype.invokeOnInitCallbacks=function(x,N){var $,j,H=this.onInitCallbacks.get(N);if(H)try{for(var ie=(0,b.XA)(H),K=ie.next();!K.done;K=ie.next()){var q=K.value;try{q(x,N)}catch(Ie){}}}catch(Ie){$={error:Ie}}finally{try{K&&!K.done&&(j=ie.return)&&j.call(ie)}finally{if($)throw $.error}}},B.prototype.getOrInitializeService=function(x){var N=x.instanceIdentifier,$=x.options,j=void 0===$?{}:$,H=this.instances.get(N);if(!H&&this.component&&(H=this.component.instanceFactory(this.container,{instanceIdentifier:Q(N),options:j}),this.instances.set(N,H),this.instancesOptions.set(N,j),this.invokeOnInitCallbacks(H,N),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,N,H)}catch(ie){}return H||null},B.prototype.normalizeInstanceIdentifier=function(x){return void 0===x&&(x=ue),this.component?this.component.multipleInstances?x:ue:x},B.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},B}();function Q(B){return B===ue?void 0:B}var se=function(){function B(x){this.name=x,this.providers=new Map}return B.prototype.addComponent=function(x){var N=this.getProvider(x.name);if(N.isComponentSet())throw new Error("Component "+x.name+" has already been registered with "+this.name);N.setComponent(x)},B.prototype.addOrOverwriteComponent=function(x){this.getProvider(x.name).isComponentSet()&&this.providers.delete(x.name),this.addComponent(x)},B.prototype.getProvider=function(x){if(this.providers.has(x))return this.providers.get(x);var N=new oe(x,this);return this.providers.set(x,N),N},B.prototype.getProviders=function(){return Array.from(this.providers.values())},B}()},5601:(ke,de,P)=>{"use strict";P.d(de,{in:()=>W,Yd:()=>ce,Ub:()=>se,Am:()=>B});const b=[];var W=(()=>{return(x=W||(W={}))[x.DEBUG=0]="DEBUG",x[x.VERBOSE=1]="VERBOSE",x[x.INFO=2]="INFO",x[x.WARN=3]="WARN",x[x.ERROR=4]="ERROR",x[x.SILENT=5]="SILENT",W;var x})();const k={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},ue=W.INFO,oe={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},Q=(x,N,...$)=>{if(N<x.logLevel)return;const j=(new Date).toISOString(),H=oe[N];if(!H)throw new Error(`Attempted to log a message with an invalid logType (value: ${N})`);console[H](`[${j}]  ${x.name}:`,...$)};class ce{constructor(N){this.name=N,this._logLevel=ue,this._logHandler=Q,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(N){if(!(N in W))throw new TypeError(`Invalid value "${N}" assigned to \`logLevel\``);this._logLevel=N}setLogLevel(N){this._logLevel="string"==typeof N?k[N]:N}get logHandler(){return this._logHandler}set logHandler(N){if("function"!=typeof N)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=N}get userLogHandler(){return this._userLogHandler}set userLogHandler(N){this._userLogHandler=N}debug(...N){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...N),this._logHandler(this,W.DEBUG,...N)}log(...N){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...N),this._logHandler(this,W.VERBOSE,...N)}info(...N){this._userLogHandler&&this._userLogHandler(this,W.INFO,...N),this._logHandler(this,W.INFO,...N)}warn(...N){this._userLogHandler&&this._userLogHandler(this,W.WARN,...N),this._logHandler(this,W.WARN,...N)}error(...N){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...N),this._logHandler(this,W.ERROR,...N)}}function se(x){b.forEach(N=>{N.setLogLevel(x)})}function B(x,N){for(const $ of b){let j=null;N&&N.level&&(j=k[N.level]),$.userLogHandler=null===x?null:(H,ie,...K)=>{const q=K.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(Ee){return null}}).filter(Ie=>Ie).join(" ");ie>=(null!=j?j:H.logLevel)&&x({level:W[ie].toLowerCase(),message:q,args:K,type:H.name})}}}},3854:(ke,de,P)=>{"use strict";P.d(de,{BH:()=>j,LL:()=>G,ZR:()=>ee,tV:()=>B,r3:()=>qt,Sg:()=>H,ne:()=>bs,vZ:()=>Yi,ZB:()=>N,pd:()=>ar,m9:()=>ro,z$:()=>ie,jU:()=>Ie,ru:()=>Ee,d:()=>Se,xb:()=>yt,w1:()=>Ae,hl:()=>le,uI:()=>K,UG:()=>q,b$:()=>_e,G6:()=>gt,Mn:()=>Ce,xO:()=>oi,zd:()=>ai});const ue=function(L){const U=[];let F=0;for(let he=0;he<L.length;he++){let Z=L.charCodeAt(he);Z<128?U[F++]=Z:Z<2048?(U[F++]=Z>>6|192,U[F++]=63&Z|128):55296==(64512&Z)&&he+1<L.length&&56320==(64512&L.charCodeAt(he+1))?(Z=65536+((1023&Z)<<10)+(1023&L.charCodeAt(++he)),U[F++]=Z>>18|240,U[F++]=Z>>12&63|128,U[F++]=Z>>6&63|128,U[F++]=63&Z|128):(U[F++]=Z>>12|224,U[F++]=Z>>6&63|128,U[F++]=63&Z|128)}return U},Q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,U){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let Z=0;Z<L.length;Z+=3){const Ne=L[Z],xe=Z+1<L.length,wt=xe?L[Z+1]:0,Zt=Z+2<L.length,Ot=Zt?L[Z+2]:0;let Mt=(15&wt)<<2|Ot>>6,jn=63&Ot;Zt||(jn=64,xe||(Mt=64)),he.push(F[Ne>>2],F[(3&Ne)<<4|wt>>4],F[Mt],F[jn])}return he.join("")},encodeString(L,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(L):this.encodeByteArray(ue(L),U)},decodeString(L,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(L):function(L){const U=[];let F=0,he=0;for(;F<L.length;){const Z=L[F++];if(Z<128)U[he++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const Ne=L[F++];U[he++]=String.fromCharCode((31&Z)<<6|63&Ne)}else if(Z>239&&Z<365){const Zt=((7&Z)<<18|(63&L[F++])<<12|(63&L[F++])<<6|63&L[F++])-65536;U[he++]=String.fromCharCode(55296+(Zt>>10)),U[he++]=String.fromCharCode(56320+(1023&Zt))}else{const Ne=L[F++],xe=L[F++];U[he++]=String.fromCharCode((15&Z)<<12|(63&Ne)<<6|63&xe)}}return U.join("")}(this.decodeStringToByteArray(L,U))},decodeStringToByteArray(L,U){this.init_();const F=U?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let Z=0;Z<L.length;){const Ne=F[L.charAt(Z++)],wt=Z<L.length?F[L.charAt(Z)]:0;++Z;const Ot=Z<L.length?F[L.charAt(Z)]:64;++Z;const ft=Z<L.length?F[L.charAt(Z)]:64;if(++Z,null==Ne||null==wt||null==Ot||null==ft)throw Error();he.push(Ne<<2|wt>>4),64!==Ot&&(he.push(wt<<4&240|Ot>>2),64!==ft&&he.push(Ot<<6&192|ft))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},se=function(L){return function(L){const U=ue(L);return Q.encodeByteArray(U,!0)}(L).replace(/\./g,"")},B=function(L){try{return Q.decodeString(L,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function N(L,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return U}for(const F in U)!U.hasOwnProperty(F)||!$(F)||(L[F]=N(L[F],U[F]));return L}function $(L){return"__proto__"!==L}class j{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,F)=>{this.resolve=U,this.reject=F})}wrapCallback(U){return(F,he)=>{F?this.reject(F):this.resolve(he),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(F):U(F,he))}}}function H(L,U){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const he=U||"demo-project",Z=L.iat||0,Ne=L.sub||L.user_id;if(!Ne)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xe=Object.assign({iss:`https://securetoken.google.com/${he}`,aud:he,iat:Z,exp:Z+3600,auth_time:Z,sub:Ne,user_id:Ne,firebase:{sign_in_provider:"custom",identities:{}}},L);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(xe)),""].join(".")}function ie(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function K(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ie())}function q(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function Ie(){return"object"==typeof self&&self.self===self}function Ee(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function _e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Se(){return ie().indexOf("Electron/")>=0}function Ae(){const L=ie();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function Ce(){return ie().indexOf("MSAppHost/")>=0}function gt(){return!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function le(){return"object"==typeof indexedDB}class ee extends Error{constructor(U,F,he){super(F),this.code=U,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,G.prototype.create)}}class G{constructor(U,F,he){this.service=U,this.serviceName=F,this.errors=he}create(U,...F){const he=F[0]||{},Z=`${this.service}/${U}`,Ne=this.errors[U],xe=Ne?function(L,U){return L.replace(Fe,(F,he)=>{const Z=U[he];return null!=Z?String(Z):`<${he}?>`})}(Ne,he):"Error";return new ee(Z,`${this.serviceName}: ${xe} (${Z}).`,he)}}const Fe=/\{\$([^}]+)}/g;function qt(L,U){return Object.prototype.hasOwnProperty.call(L,U)}function yt(L){for(const U in L)if(Object.prototype.hasOwnProperty.call(L,U))return!1;return!0}function Yi(L,U){if(L===U)return!0;const F=Object.keys(L),he=Object.keys(U);for(const Z of F){if(!he.includes(Z))return!1;const Ne=L[Z],xe=U[Z];if(Wt(Ne)&&Wt(xe)){if(!Yi(Ne,xe))return!1}else if(Ne!==xe)return!1}for(const Z of he)if(!F.includes(Z))return!1;return!0}function Wt(L){return null!==L&&"object"==typeof L}function oi(L){const U=[];for(const[F,he]of Object.entries(L))Array.isArray(he)?he.forEach(Z=>{U.push(encodeURIComponent(F)+"="+encodeURIComponent(Z))}):U.push(encodeURIComponent(F)+"="+encodeURIComponent(he));return U.length?"&"+U.join("&"):""}function ai(L){const U={};return L.replace(/^\?/,"").split("&").forEach(he=>{if(he){const[Z,Ne]=he.split("=");U[decodeURIComponent(Z)]=decodeURIComponent(Ne)}}),U}function ar(L){const U=L.indexOf("?");if(!U)return"";const F=L.indexOf("#",U);return L.substring(U,F>0?F:void 0)}function bs(L,U){const F=new to(L,U);return F.subscribe.bind(F)}class to{constructor(U,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{U(this)}).catch(he=>{this.error(he)})}next(U){this.forEachObserver(F=>{F.next(U)})}error(U){this.forEachObserver(F=>{F.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,F,he){let Z;if(void 0===U&&void 0===F&&void 0===he)throw new Error("Missing Observer.");Z=function(L,U){if("object"!=typeof L||null===L)return!1;for(const F of["next","error","complete"])if(F in L&&"function"==typeof L[F])return!0;return!1}(U)?U:{next:U,error:F,complete:he},void 0===Z.next&&(Z.next=br),void 0===Z.error&&(Z.error=br),void 0===Z.complete&&(Z.complete=br);const Ne=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch(xe){}}),this.observers.push(Z),Ne}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,U)}sendOne(U,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{F(this.observers[U])}catch(he){"undefined"!=typeof console&&console.error&&console.error(he)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function br(){}function ro(L){return L&&L._delegate?L._delegate:L}},7841:(ke,de,P)=>{"use strict";P.d(de,{Z:()=>b.Z});var b=P(4486);b.Z.registerVersion("firebase","9.1.2","app-compat")},5841:(ke,de,P)=>{"use strict";P.r(de);var b=P(8239),W=P(4486),k=P(3854),ue=P(5452),oe=P(4762),Q=P(5601),ce=P(6034);const ie=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},K=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},q=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ee=new Q.Yd("@firebase/auth");function _e(w,...m){Ee.logLevel<=Q.in.ERROR&&Ee.error(`Auth (${ue.SDK_VERSION}): ${w}`,...m)}function Se(w,...m){throw gt(w,...m)}function Ae(w,...m){return gt(w,...m)}function Ce(w,m,y){const D=Object.assign(Object.assign({},K()),{[m]:y});return new k.LL("auth","Firebase",D).create(m,{appName:w.name})}function st(w,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&Se(w,"argument-error"),Ce(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gt(w,...m){if("string"!=typeof w){const y=m[0],D=[...m.slice(1)];return D[0]&&(D[0].appName=w.name),w._errorFactory.create(y,...D)}return q.create(w,...m)}function le(w,m,...y){if(!w)throw gt(m,...y)}function Y(w){const m="INTERNAL ASSERTION FAILED: "+w;throw _e(m),new Error(m)}function J(w,m){w||Y(m)}const te=new Map;function X(w){J(w instanceof Function,"Expected a class definition");let m=te.get(w);return m?(J(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,te.set(w,m),m)}function ve(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Fe(){return"http:"===lt()||"https:"===lt()}function lt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Lt{constructor(m,y){this.shortDelay=m,this.longDelay=y,J(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Fe()||(0,k.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function en(w,m){J(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class $r{static initialize(m,y,D){this.fetchImpl=m,y&&(this.headersImpl=y),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Y("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Y("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Y("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},qt=new Lt(3e4,6e4);function We(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function yt(w,m,y,D){return eo.apply(this,arguments)}function eo(){return(eo=(0,b.Z)(function*(w,m,y,D,S={}){return Yi(w,S,()=>{let R={},V={};D&&("GET"===m?V=D:R={body:JSON.stringify(D)});const re=(0,k.xO)(Object.assign({key:w.config.apiKey},V)).slice(1),be=new($r.headers());return be.set("Content-Type","application/json"),be.set("X-Client-Version",w._getSdkClientVersion()),w.languageCode&&be.set("X-Firebase-Locale",w.languageCode),$r.fetch()(ar(w,w.config.apiHost,y,re),Object.assign({method:m,headers:be,referrerPolicy:"no-referrer"},R))})})).apply(this,arguments)}function Yi(w,m,y){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,b.Z)(function*(w,m,y){w._canInitEmulator=!1;const D=Object.assign(Object.assign({},Hr),m);try{const S=new Qo(w),R=yield Promise.race([y(),S.promise]);S.clearNetworkTimeout();const V=yield R.json();if("needConfirmation"in V)throw bs(w,"account-exists-with-different-credential",V);if(R.ok&&!("errorMessage"in V))return V;{const re=R.ok?V.errorMessage:V.error.message,[be,Pe]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===be)throw bs(w,"credential-already-in-use",V);if("EMAIL_EXISTS"===be)throw bs(w,"email-already-in-use",V);const ze=D[be]||be.toLowerCase().replace(/[_\s]+/g,"-");if(Pe)throw Ce(w,ze,Pe);Se(w,ze)}}catch(S){if(S instanceof k.ZR)throw S;Se(w,"network-request-failed")}})).apply(this,arguments)}function oi(w,m,y,D){return ai.apply(this,arguments)}function ai(){return(ai=(0,b.Z)(function*(w,m,y,D,S={}){const R=yield yt(w,m,y,D,S);return"mfaPendingCredential"in R&&Se(w,"multi-factor-auth-required",{serverResponse:R}),R})).apply(this,arguments)}function ar(w,m,y,D){const S=`${m}${y}?${D}`;return w.config.emulator?en(w.config,S):`${w.config.apiScheme}://${S}`}class Qo{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,D)=>{this.timer=setTimeout(()=>D(Ae(this.auth,"timeout")),qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bs(w,m,y){const D={appName:w.name};y.email&&(D.email=y.email),y.phoneNumber&&(D.phoneNumber=y.phoneNumber);const S=Ae(w,m,D);return S.customData._tokenResponse=y,S}function Ds(){return(Ds=(0,b.Z)(function*(w,m){return yt(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function _n(w,m){return br.apply(this,arguments)}function br(){return(br=(0,b.Z)(function*(w,m){return yt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function iu(w,m){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,b.Z)(function*(w,m){return yt(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function ge(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function Kt(){return(Kt=(0,b.Z)(function*(w,m=!1){const y=(0,k.m9)(w),D=yield y.getIdToken(m),S=Me(D);le(S&&S.exp&&S.auth_time&&S.iat,y.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,V=null==R?void 0:R.sign_in_provider;return{claims:S,token:D,authTime:ge(Et(S.auth_time)),issuedAtTime:ge(Et(S.iat)),expirationTime:ge(Et(S.exp)),signInProvider:V||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Et(w){return 1e3*Number(w)}function Me(w){const[m,y,D]=w.split(".");if(void 0===m||void 0===y||void 0===D)return _e("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,k.tV)(y);return S?JSON.parse(S):(_e("Failed to decode base64 JWT payload"),null)}catch(S){return _e("Caught error parsing JWT payload as JSON",S),null}}function tn(w,m){return no.apply(this,arguments)}function no(){return(no=(0,b.Z)(function*(w,m,y=!1){if(y)return m;try{return yield m}catch(D){throw D instanceof k.ZR&&Qi(D)&&w.auth.currentUser===w&&(yield w.auth.signOut()),D}})).apply(this,arguments)}function Qi({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class nn{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const S=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const D=this.getInterval(m);this.timerId=setTimeout((0,b.Z)(function*(){yield y.iteration()}),D)}iteration(){var m=this;return(0,b.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&m.schedule(!0))}m.schedule()})()}}class ur{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=ge(this.lastLoginAt),this.creationTime=ge(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ro(w){return L.apply(this,arguments)}function L(){return(L=(0,b.Z)(function*(w){var m;const y=w.auth,D=yield w.getIdToken(),S=yield tn(w,iu(y,{idToken:D}));le(null==S?void 0:S.users.length,y,"internal-error");const R=S.users[0];w._notifyReloadListener(R);const V=(null===(m=R.providerUserInfo)||void 0===m?void 0:m.length)?Z(R.providerUserInfo):[],re=he(w.providerData,V),ze=!!w.isAnonymous&&!(w.email&&R.passwordHash||(null==re?void 0:re.length)),$e={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:re,metadata:new ur(R.createdAt,R.lastLoginAt),isAnonymous:ze};Object.assign(w,$e)})).apply(this,arguments)}function F(){return(F=(0,b.Z)(function*(w){const m=(0,k.m9)(w);yield ro(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function he(w,m){return[...w.filter(D=>!m.some(S=>S.providerId===D.providerId)),...m]}function Z(w){return w.map(m=>{var{providerId:y}=m,D=(0,oe._T)(m,["providerId"]);return{providerId:y,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function xe(){return(xe=(0,b.Z)(function*(w,m){const y=yield Yi(w,{},()=>{const D=(0,k.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:S,apiKey:R}=w.config,V=ar(w,S,"/v1/token",`key=${R}`);return $r.fetch()(V,{method:"POST",headers:{"X-Client-Version":w._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:D})});return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class wt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){le(m.idToken,"internal-error"),le(void 0!==m.idToken,"internal-error"),le(void 0!==m.refreshToken,"internal-error");const y="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function(w){const m=Me(w);return le(m,"internal-error"),le(void 0!==m.exp,"internal-error"),le(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var D=this;return(0,b.Z)(function*(){return le(!D.accessToken||D.refreshToken,m,"user-token-expired"),y||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(m,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var D=this;return(0,b.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:V}=yield function(w,m){return xe.apply(this,arguments)}(m,y);D.updateTokensAndExpiration(S,R,Number(V))})()}updateTokensAndExpiration(m,y,D){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(m,y){const{refreshToken:D,accessToken:S,expirationTime:R}=y,V=new wt;return D&&(le("string"==typeof D,"internal-error",{appName:m}),V.refreshToken=D),S&&(le("string"==typeof S,"internal-error",{appName:m}),V.accessToken=S),R&&(le("number"==typeof R,"internal-error",{appName:m}),V.expirationTime=R),V}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new wt,this.toJSON())}_performRefresh(){return Y("not implemented")}}function Zt(w,m){le("string"==typeof w||void 0===w,"internal-error",{appName:m})}class Ot{constructor(m){var{uid:y,auth:D,stsTokenManager:S}=m,R=(0,oe._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=D,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.metadata=new ur(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,b.Z)(function*(){const D=yield tn(y,y.stsTokenManager.getToken(y.auth,m));return le(D,y.auth,"internal-error"),y.accessToken!==D&&(y.accessToken=D,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),D})()}getIdTokenResult(m){return function(w){return Kt.apply(this,arguments)}(this,m)}reload(){return function(w){return F.apply(this,arguments)}(this)}_assign(m){this!==m&&(le(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Ot(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var D=this;return(0,b.Z)(function*(){let S=!1;m.idToken&&m.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(m),S=!0),y&&(yield ro(D)),yield D.auth._persistUserIfCurrent(D),S&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var m=this;return(0,b.Z)(function*(){const y=yield m.getIdToken();return yield tn(m,function(w,m){return Ds.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var D,S,R,V,re,be,Pe,ze;const $e=null!==(D=y.displayName)&&void 0!==D?D:void 0,on=null!==(S=y.email)&&void 0!==S?S:void 0,fr=null!==(R=y.phoneNumber)&&void 0!==R?R:void 0,En=null!==(V=y.photoURL)&&void 0!==V?V:void 0,Yh=null!==(re=y.tenantId)&&void 0!==re?re:void 0,Qh=null!==(be=y._redirectEventId)&&void 0!==be?be:void 0,Ta=null!==(Pe=y.createdAt)&&void 0!==Pe?Pe:void 0,Jh=null!==(ze=y.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:Ag,emailVerified:Xh,isAnonymous:Rg,providerData:ef,stsTokenManager:xg}=y;le(Ag&&xg,m,"internal-error");const Sa=wt.fromJSON(this.name,xg);le("string"==typeof Ag,m,"internal-error"),Zt($e,m.name),Zt(on,m.name),le("boolean"==typeof Xh,m,"internal-error"),le("boolean"==typeof Rg,m,"internal-error"),Zt(fr,m.name),Zt(En,m.name),Zt(Yh,m.name),Zt(Qh,m.name),Zt(Ta,m.name),Zt(Jh,m.name);const Yr=new Ot({uid:Ag,auth:m,email:on,emailVerified:Xh,displayName:$e,isAnonymous:Rg,photoURL:En,phoneNumber:fr,tenantId:Yh,stsTokenManager:Sa,createdAt:Ta,lastLoginAt:Jh});return ef&&Array.isArray(ef)&&(Yr.providerData=ef.map(p0=>Object.assign({},p0))),Qh&&(Yr._redirectEventId=Qh),Yr}static _fromIdTokenResponse(m,y,D=!1){return(0,b.Z)(function*(){const S=new wt;S.updateFromServerResponse(y);const R=new Ot({uid:y.localId,auth:m,stsTokenManager:S,isAnonymous:D});return yield ro(R),R})()}}const ft=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.Z)(function*(){return!0})()}_set(y,D){var S=this;return(0,b.Z)(function*(){S.storage[y]=D})()}_get(y){var D=this;return(0,b.Z)(function*(){const S=D.storage[y];return void 0===S?null:S})()}_remove(y){var D=this;return(0,b.Z)(function*(){delete D.storage[y]})()}_addListener(y,D){}_removeListener(y,D){}}return w.type="NONE",w})();function Mt(w,m,y){return`firebase:${w}:${m}:${y}`}class jn{constructor(m,y,D){this.persistence=m,this.auth=y,this.userKey=D;const{config:S,name:R}=this.auth;this.fullUserKey=Mt(this.userKey,S.apiKey,R),this.fullPersistenceKey=Mt("persistence",S.apiKey,R),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,b.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?Ot._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,b.Z)(function*(){if(y.persistence===m)return;const D=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,D?y.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,D="authUser"){return(0,b.Z)(function*(){if(!y.length)return new jn(X(ft),m,D);const S=(yield Promise.all(y.map(function(){var Pe=(0,b.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return Pe.apply(this,arguments)}}()))).filter(Pe=>Pe);let R=S[0]||X(ft);const V=Mt(D,m.config.apiKey,m.name);let re=null;for(const Pe of y)try{const ze=yield Pe._get(V);if(ze){const $e=Ot._fromJSON(m,ze);Pe!==R&&(re=$e),R=Pe;break}}catch(ze){}const be=S.filter(Pe=>Pe._shouldAllowMigration);return R._shouldAllowMigration&&be.length?(R=be[0],re&&(yield R._set(V,re.toJSON())),yield Promise.all(y.map(function(){var Pe=(0,b.Z)(function*(ze){if(ze!==R)try{yield ze._remove(V)}catch($e){}});return function(ze){return Pe.apply(this,arguments)}}())),new jn(R,m,D)):new jn(R,m,D)})()}}function zc(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Zc(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Kc(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(su(m))return"Blackberry";if(Xo(m))return"Webos";if(th(m))return"Safari";if((m.includes("chrome/")||nh(m))&&!m.includes("edge/"))return"Chrome";if(Jo(m))return"Android";{const D=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function Kc(w=(0,k.z$)()){return/firefox\//i.test(w)}function th(w=(0,k.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function nh(w=(0,k.z$)()){return/crios\//i.test(w)}function Zc(w=(0,k.z$)()){return/iemobile/i.test(w)}function Jo(w=(0,k.z$)()){return/android/i.test(w)}function su(w=(0,k.z$)()){return/blackberry/i.test(w)}function Xo(w=(0,k.z$)()){return/webos/i.test(w)}function ui(w=(0,k.z$)()){return/iphone|ipad|ipod/i.test(w)}function Ci(w=(0,k.z$)()){return ui(w)||Jo(w)||Xo(w)||su(w)||/windows phone/i.test(w)||Zc(w)}function Zn(w,m=[]){let y;switch(w){case"Browser":y=zc((0,k.z$)());break;case"Worker":y=`${zc((0,k.z$)())}-${w}`;break;default:y=w}const D=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${ue.SDK_VERSION}/${D}`}class xy{constructor(m,y){this.app=m,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Re(this),this.idTokenSubscription=new Re(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=q,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(m,y){var D=this;return y&&(this._popupRedirectResolver=X(y)),this._initializationPromise=this.queue((0,b.Z)(function*(){var S;D._deleted||(D.persistenceManager=yield jn.create(D,m),!D._deleted&&((null===(S=D._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)&&(yield D._popupRedirectResolver._initialize(D)),yield D.initializeCurrentUser(y),!D._deleted&&(D._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,b.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y)}})()}initializeCurrentUser(m){var y=this;return(0,b.Z)(function*(){var D;let S=yield y.assertedPersistence.getCurrentUser();if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const R=null===(D=y.redirectUser)||void 0===D?void 0:D._redirectEventId,V=null==S?void 0:S._redirectEventId,re=yield y.tryRedirectSignIn(m);(!R||R===V)&&(null==re?void 0:re.user)&&(S=re.user)}return S?S._redirectEventId?(le(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===S._redirectEventId?y.directlySetCurrentUser(S):y.reloadAndSetCurrentUserOrClear(S)):y.reloadAndSetCurrentUserOrClear(S):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(m){var y=this;return(0,b.Z)(function*(){let D=null;try{D=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch(S){yield y._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,b.Z)(function*(){try{yield ro(m)}catch(D){if("auth/network-request-failed"!==D.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,b.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,b.Z)(function*(){const D=m?(0,k.m9)(m):null;return D&&le(D.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(D&&D._clone(y))})()}_updateCurrentUser(m){var y=this;return(0,b.Z)(function*(){if(!y._deleted)return m&&le(y.tenantId===m.tenantId,y,"tenant-id-mismatch"),y.queue((0,b.Z)(function*(){yield y.directlySetCurrentUser(m),y.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,b.Z)(function*(){return(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null)})()}setPersistence(m){var y=this;return this.queue((0,b.Z)(function*(){yield y.assertedPersistence.setPersistence(X(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new k.LL("auth","Firebase",m())}onAuthStateChanged(m,y,D){return this.registerStateListener(this.authStateSubscription,m,y,D)}onIdTokenChanged(m,y,D){return this.registerStateListener(this.idTokenSubscription,m,y,D)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var D=this;return(0,b.Z)(function*(){const S=yield D.getOrInitRedirectPersistenceManager(y);return null===m?S.removeCurrentUser():S.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,b.Z)(function*(){if(!y.redirectPersistenceManager){const D=m&&X(m)||y._popupRedirectResolver;le(D,y,"argument-error"),y.redirectPersistenceManager=yield jn.create(y,[X(D._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,b.Z)(function*(){var D,S;return y._isInitialized&&(yield y.queue((0,b.Z)(function*(){}))),(null===(D=y._currentUser)||void 0===D?void 0:D._redirectEventId)===m?y._currentUser:(null===(S=y.redirectUser)||void 0===S?void 0:S._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,b.Z)(function*(){if(m===y.currentUser)return y.queue((0,b.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,D,S){if(this._deleted)return()=>{};const R="function"==typeof y?y:y.next.bind(y),V=this._isInitialized?Promise.resolve():this._initializationPromise;return le(V,this,"internal-error"),V.then(()=>R(this.currentUser)),"function"==typeof y?m.addObserver(y,D,S):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,b.Z)(function*(){y.currentUser&&y.currentUser!==m&&(y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh()),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function bt(w){return(0,k.m9)(w)}class Re{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,k.ne)(y=>this.observer=y)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function kt(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function Cs(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class Yn{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return Y("not implemented")}_getIdTokenResponse(m){return Y("not implemented")}_linkToIdToken(m,y){return Y("not implemented")}_getReauthenticationResolver(m){return Y("not implemented")}}function Yt(w,m){return so.apply(this,arguments)}function so(){return(so=(0,b.Z)(function*(w,m){return yt(w,"POST","/v1/accounts:resetPassword",We(w,m))})).apply(this,arguments)}function ea(w,m){return tt.apply(this,arguments)}function tt(){return(tt=(0,b.Z)(function*(w,m){return yt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Yc(w,m){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,b.Z)(function*(w,m){return yt(w,"POST","/v1/accounts:update",We(w,m))})).apply(this,arguments)}function Ss(){return(Ss=(0,b.Z)(function*(w,m){return oi(w,"POST","/v1/accounts:signInWithPassword",We(w,m))})).apply(this,arguments)}function Dn(w,m){return oo.apply(this,arguments)}function oo(){return(oo=(0,b.Z)(function*(w,m){return yt(w,"POST","/v1/accounts:sendOobCode",We(w,m))})).apply(this,arguments)}function ta(w,m){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,b.Z)(function*(w,m){return Dn(w,m)})).apply(this,arguments)}function Rt(w,m){return ou.apply(this,arguments)}function ou(){return(ou=(0,b.Z)(function*(w,m){return Dn(w,m)})).apply(this,arguments)}function ih(w,m){return na.apply(this,arguments)}function na(){return(na=(0,b.Z)(function*(w,m){return Dn(w,m)})).apply(this,arguments)}function sh(w,m){return ra.apply(this,arguments)}function ra(){return(ra=(0,b.Z)(function*(w,m){return Dn(w,m)})).apply(this,arguments)}function Ji(){return(Ji=(0,b.Z)(function*(w,m){return oi(w,"POST","/v1/accounts:signInWithEmailLink",We(w,m))})).apply(this,arguments)}function oh(){return(oh=(0,b.Z)(function*(w,m){return oi(w,"POST","/v1/accounts:signInWithEmailLink",We(w,m))})).apply(this,arguments)}class Sr extends Yn{constructor(m,y,D,S=null){super("password",D),this._email=m,this._password=y,this._tenantId=S}static _fromEmailAndPassword(m,y){return new Sr(m,y,"password")}static _fromEmailAndCode(m,y,D=null){return new Sr(m,y,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,b.Z)(function*(){switch(y.signInMethod){case"password":return function(w,m){return Ss.apply(this,arguments)}(m,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(w,m){return Ji.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:Se(m,"internal-error")}})()}_linkToIdToken(m,y){var D=this;return(0,b.Z)(function*(){switch(D.signInMethod){case"password":return ea(m,{idToken:y,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function(w,m){return oh.apply(this,arguments)}(m,{idToken:y,email:D._email,oobCode:D._password});default:Se(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Dt(w,m){return uu.apply(this,arguments)}function uu(){return(uu=(0,b.Z)(function*(w,m){return oi(w,"POST","/v1/accounts:signInWithIdp",We(w,m))})).apply(this,arguments)}class Ar extends Yn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new Ar(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):Se("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:D,signInMethod:S}=y,R=(0,oe._T)(y,["providerId","signInMethod"]);if(!D||!S)return null;const V=new Ar(D,S);return V.idToken=R.idToken||void 0,V.accessToken=R.accessToken||void 0,V.secret=R.secret,V.nonce=R.nonce,V.pendingToken=R.pendingToken||null,V}_getIdTokenResponse(m){return Dt(m,this.buildRequest())}_linkToIdToken(m,y){const D=this.buildRequest();return D.idToken=y,Dt(m,D)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,Dt(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,k.xO)(y)}return m}}function ci(w,m){return ah.apply(this,arguments)}function ah(){return(ah=(0,b.Z)(function*(w,m){return yt(w,"POST","/v1/accounts:sendVerificationCode",We(w,m))})).apply(this,arguments)}function uh(){return(uh=(0,b.Z)(function*(w,m){return oi(w,"POST","/v1/accounts:signInWithPhoneNumber",We(w,m))})).apply(this,arguments)}function Rp(){return(Rp=(0,b.Z)(function*(w,m){const y=yield oi(w,"POST","/v1/accounts:signInWithPhoneNumber",We(w,m));if(y.temporaryProof)throw bs(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Yw={USER_NOT_FOUND:"user-not-found"};function xp(){return(xp=(0,b.Z)(function*(w,m){return oi(w,"POST","/v1/accounts:signInWithPhoneNumber",We(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Yw)})).apply(this,arguments)}class ia extends Yn{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new ia({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new ia({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function(w,m){return uh.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function(w,m){return Rp.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function(w,m){return xp.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:D,verificationCode:S}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:D,code:S}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:D,phoneNumber:S,temporaryProof:R}=m;return D||y||S||R?new ia({verificationId:y,verificationCode:D,phoneNumber:S,temporaryProof:R}):null}}class Jc{constructor(m){var y,D,S,R,V,re;const be=(0,k.zd)((0,k.pd)(m)),Pe=null!==(y=be.apiKey)&&void 0!==y?y:null,ze=null!==(D=be.oobCode)&&void 0!==D?D:null,$e=function(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=be.mode)&&void 0!==S?S:null);le(Pe&&ze&&$e,"argument-error"),this.apiKey=Pe,this.operation=$e,this.code=ze,this.continueUrl=null!==(R=be.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(V=be.languageCode)&&void 0!==V?V:null,this.tenantId=null!==(re=be.tenantId)&&void 0!==re?re:null}static parseLink(m){const y=function(w){const m=(0,k.zd)((0,k.pd)(w)).link,y=m?(0,k.zd)((0,k.pd)(m)).deep_link_id:null,D=(0,k.zd)((0,k.pd)(w)).deep_link_id;return(D?(0,k.zd)((0,k.pd)(D)).link:null)||D||y||m||w}(m);try{return new Jc(y)}catch(D){return null}}}let Np=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,D){return Sr._fromEmailAndPassword(y,D)}static credentialWithLink(y,D){const S=Jc.parseLink(D);return le(S,"argument-error"),Sr._fromEmailAndCode(y,S.code,S.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class ao{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class cu extends ao{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class uo extends cu{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return le("providerId"in y&&"signInMethod"in y,"argument-error"),Ar._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return le(m.idToken||m.accessToken,"argument-error"),Ar._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return uo.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return uo.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:D,oauthTokenSecret:S,pendingToken:R,nonce:V,providerId:re}=m;if(!D&&!S&&!y&&!R||!re)return null;try{return new uo(re)._credential({idToken:y,accessToken:D,nonce:V,pendingToken:R})}catch(be){return null}}}let ch=(()=>{class w extends cu{constructor(){super("facebook.com")}static credential(y){return Ar._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(D){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),lh=(()=>{class w extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(y,D){return Ar._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:D})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:D,oauthAccessToken:S}=y;if(!D&&!S)return null;try{return w.credential(D,S)}catch(R){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),dh=(()=>{class w extends cu{constructor(){super("github.com")}static credential(y){return Ar._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(D){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class sa extends Yn{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return Dt(m,this.buildRequest())}_linkToIdToken(m,y){const D=this.buildRequest();return D.idToken=y,Dt(m,D)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,Dt(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:D,signInMethod:S,pendingToken:R}=y;return D&&S&&R&&D===S?new sa(D,R):null}static _create(m,y){return new sa(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let hh=(()=>{class w extends cu{constructor(){super("twitter.com")}static credential(y,D){return Ar._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:D})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:D,oauthTokenSecret:S}=y;if(!D||!S)return null;try{return w.credential(D,S)}catch(R){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function fh(w,m){return lu.apply(this,arguments)}function lu(){return(lu=(0,b.Z)(function*(w,m){return oi(w,"POST","/v1/accounts:signUp",We(w,m))})).apply(this,arguments)}class li{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,D,S=!1){return(0,b.Z)(function*(){const R=yield Ot._fromIdTokenResponse(m,D,S),V=Py(D);return new li({user:R,providerId:V,_tokenResponse:D,operationType:y})})()}static _forOperation(m,y,D){return(0,b.Z)(function*(){yield m._updateTokensIfNecessary(D,!0);const S=Py(D);return new li({user:m,providerId:S,_tokenResponse:D,operationType:y})})()}}function Py(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function du(){return(du=(0,b.Z)(function*(w){var m;const y=bt(w);if(yield y._initializationPromise,null===(m=y.currentUser)||void 0===m?void 0:m.isAnonymous)return new li({user:y.currentUser,providerId:null,operationType:"signIn"});const D=yield fh(y,{returnSecureToken:!0}),S=yield li._fromIdTokenResponse(y,"signIn",D,!0);return yield y._updateCurrentUser(S.user),S})).apply(this,arguments)}class Xc extends k.ZR{constructor(m,y,D,S){var R;super(y.code,y.message),this.operationType=D,this.user=S,this.name="FirebaseError",Object.setPrototypeOf(this,Xc.prototype),this.appName=m.name,this.code=y.code,this.tenantId=null!==(R=m.tenantId)&&void 0!==R?R:void 0,this.serverResponse=y.customData.serverResponse}static _fromErrorAndOperation(m,y,D,S){return new Xc(m,y,D,S)}}function hu(w,m,y,D){return("reauthenticate"===m?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Xc._fromErrorAndOperation(w,R,m,D):R})}function Pp(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function el(){return(el=(0,b.Z)(function*(w,m){const y=(0,k.m9)(w);yield As(!0,y,m);const{providerUserInfo:D}=yield _n(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),S=Pp(D||[]);return y.providerData=y.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function tl(w,m){return co.apply(this,arguments)}function co(){return(co=(0,b.Z)(function*(w,m,y=!1){const D=yield tn(w,m._linkToIdToken(w.auth,yield w.getIdToken()),y);return li._forOperation(w,"link",D)})).apply(this,arguments)}function As(w,m,y){return fu.apply(this,arguments)}function fu(){return(fu=(0,b.Z)(function*(w,m,y){yield ro(m);const S=!1===w?"provider-already-linked":"no-such-provider";le(Pp(m.providerData).has(y)===w,m.auth,S)})).apply(this,arguments)}function nl(w,m){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,b.Z)(function*(w,m,y=!1){const{auth:D}=w,S="reauthenticate";try{const R=yield tn(w,hu(D,S,m,w),y);le(R.idToken,D,"internal-error");const V=Me(R.idToken);le(V,D,"internal-error");const{sub:re}=V;return le(w.uid===re,D,"user-mismatch"),li._forOperation(w,S,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Se(D,"user-mismatch"),R}})).apply(this,arguments)}function Op(w,m){return rl.apply(this,arguments)}function rl(){return(rl=(0,b.Z)(function*(w,m,y=!1){const D="signIn",S=yield hu(w,D,m),R=yield li._fromIdTokenResponse(w,D,S);return y||(yield w._updateCurrentUser(R.user)),R})).apply(this,arguments)}function il(w,m){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,b.Z)(function*(w,m){return Op(bt(w),m)})).apply(this,arguments)}function Mp(w,m){return kp.apply(this,arguments)}function kp(){return(kp=(0,b.Z)(function*(w,m){const y=(0,k.m9)(w);return yield As(!1,y,m.providerId),tl(y,m)})).apply(this,arguments)}function pu(w,m){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,b.Z)(function*(w,m){return nl((0,k.m9)(w),m)})).apply(this,arguments)}function r0(w,m){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,b.Z)(function*(w,m){return oi(w,"POST","/v1/accounts:signInWithCustomToken",We(w,m))})).apply(this,arguments)}function Qn(){return(Qn=(0,b.Z)(function*(w,m){const y=bt(w),D=yield r0(y,{token:m,returnSecureToken:!0}),S=yield li._fromIdTokenResponse(y,"signIn",D);return yield y._updateCurrentUser(S.user),S})).apply(this,arguments)}class mu{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?yu._fromServerResponse(m,y):Se(m,"internal-error")}}class yu extends mu{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new yu(y)}}function _u(w,m,y){var D;le((null===(D=y.url)||void 0===D?void 0:D.length)>0,w,"invalid-continue-uri"),le(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(le(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(le(y.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function sl(){return(sl=(0,b.Z)(function*(w,m,y){const D=(0,k.m9)(w),S={requestType:"PASSWORD_RESET",email:m};y&&_u(D,S,y),yield Rt(D,S)})).apply(this,arguments)}function Ke(){return(Ke=(0,b.Z)(function*(w,m,y){yield Yt((0,k.m9)(w),{oobCode:m,newPassword:y})})).apply(this,arguments)}function lo(){return(lo=(0,b.Z)(function*(w,m){yield Yc((0,k.m9)(w),{oobCode:m})})).apply(this,arguments)}function vu(w,m){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,b.Z)(function*(w,m){const y=(0,k.m9)(w),D=yield Yt(y,{oobCode:m}),S=D.requestType;switch(le(S,y,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(D.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(D.mfaInfo,y,"internal-error");default:le(D.email,y,"internal-error")}let R=null;return D.mfaInfo&&(R=mu._fromServerResponse(bt(y),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function ho(){return(ho=(0,b.Z)(function*(w,m){const{data:y}=yield vu((0,k.m9)(w),m);return y.email})).apply(this,arguments)}function fe(){return(fe=(0,b.Z)(function*(w,m,y){const D=bt(w),S=yield fh(D,{returnSecureToken:!0,email:m,password:y}),R=yield li._fromIdTokenResponse(D,"signIn",S);return yield D._updateCurrentUser(R.user),R})).apply(this,arguments)}function rn(){return(rn=(0,b.Z)(function*(w,m,y){const D=(0,k.m9)(w),S={requestType:"EMAIL_SIGNIN",email:m};le(y.handleCodeInApp,D,"argument-error"),y&&_u(D,S,y),yield ih(D,S)})).apply(this,arguments)}function Gr(){return(Gr=(0,b.Z)(function*(w,m,y){const D=(0,k.m9)(w),S=Np.credentialWithLink(m,y||ve());return le(S._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),il(D,S)})).apply(this,arguments)}function mh(w,m){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,b.Z)(function*(w,m){return yt(w,"POST","/v1/accounts:createAuthUri",We(w,m))})).apply(this,arguments)}function Vp(){return(Vp=(0,b.Z)(function*(w,m){const D={identifier:m,continueUri:Fe()?ve():"http://localhost"},{signinMethods:S}=yield mh((0,k.m9)(w),D);return S||[]})).apply(this,arguments)}function Ps(){return(Ps=(0,b.Z)(function*(w,m){const y=(0,k.m9)(w),S={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&_u(y.auth,S,m);const{email:R}=yield ta(y.auth,S);R!==w.email&&(yield w.reload())})).apply(this,arguments)}function qr(){return(qr=(0,b.Z)(function*(w,m,y){const D=(0,k.m9)(w),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};y&&_u(D.auth,R,y);const{email:V}=yield sh(D.auth,R);V!==w.email&&(yield w.reload())})).apply(this,arguments)}function yh(w,m){return Os.apply(this,arguments)}function Os(){return(Os=(0,b.Z)(function*(w,m){return yt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function _h(){return(_h=(0,b.Z)(function*(w,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const D=(0,k.m9)(w),R={idToken:yield D.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},V=yield tn(D,yh(D.auth,R));D.displayName=V.displayName||null,D.photoURL=V.photoUrl||null;const re=D.providerData.find(({providerId:be})=>"password"===be);re&&(re.displayName=D.displayName,re.photoURL=D.photoURL),yield D._updateTokensIfNecessary(V)})).apply(this,arguments)}function Eh(w,m,y){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,b.Z)(function*(w,m,y){const{auth:D}=w,R={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(R.email=m),y&&(R.password=y);const V=yield tn(w,ea(D,R));yield w._updateTokensIfNecessary(V,!0)})).apply(this,arguments)}class fo{constructor(m,y,D={}){this.isNewUser=m,this.providerId=y,this.profile=D}}class Ih extends fo{constructor(m,y,D,S){super(m,y,D),this.username=S}}class ky extends fo{constructor(m,y){super(m,"facebook.com",y)}}class Fy extends Ih{constructor(m,y){super(m,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class bu extends fo{constructor(m,y){super(m,"google.com",y)}}class jp extends Ih{constructor(m,y,D){super(m,"twitter.com",y,D)}}function $p(w){const{user:m,_tokenResponse:y}=w;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(w){var m,y;if(!w)return null;const{providerId:D}=w,S=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},R=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!D&&(null==w?void 0:w.idToken)){const V=null===(y=null===(m=Me(w.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(V)return new fo(R,"anonymous"!==V&&"custom"!==V?V:null)}if(!D)return null;switch(D){case"facebook.com":return new ky(R,S);case"github.com":return new Fy(R,S);case"google.com":return new bu(R,S);case"twitter.com":return new jp(R,S,w.screenName||null);case"custom":case"anonymous":return new fo(R,null);default:return new fo(R,D,S)}}(y)}class ts{constructor(m,y){this.type=m,this.credential=y}static _fromIdtoken(m){return new ts("enroll",m)}static _fromMfaPendingCredential(m){return new ts("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,D;if(null==m?void 0:m.multiFactorSession){if(null===(y=m.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return ts._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(D=m.multiFactorSession)||void 0===D?void 0:D.idToken)return ts._fromIdtoken(m.multiFactorSession.idToken)}return null}}class bh{constructor(m,y,D){this.session=m,this.hints=y,this.signInResolver=D}static _fromError(m,y){const D=bt(m),S=(y.serverResponse.mfaInfo||[]).map(V=>mu._fromServerResponse(D,V));le(y.serverResponse.mfaPendingCredential,D,"internal-error");const R=ts._fromMfaPendingCredential(y.serverResponse.mfaPendingCredential);return new bh(R,S,function(){var V=(0,b.Z)(function*(re){const be=yield re._process(D,R);delete y.serverResponse.mfaInfo,delete y.serverResponse.mfaPendingCredential;const Pe=Object.assign(Object.assign({},y.serverResponse),{idToken:be.idToken,refreshToken:be.refreshToken});switch(y.operationType){case"signIn":const ze=yield li._fromIdTokenResponse(D,y.operationType,Pe);return yield D._updateCurrentUser(ze.user),ze;case"reauthenticate":return le(y.user,D,"internal-error"),li._forOperation(y.user,y.operationType,Pe);default:Se(D,"internal-error")}});return function(re){return V.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,b.Z)(function*(){return y.signInResolver(m)})()}}function Ly(w,m){return yt(w,"POST","/v2/accounts/mfaEnrollment:start",We(w,m))}class aa{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(D=>mu._fromServerResponse(m.auth,D)))})}static _fromUser(m){return new aa(m)}getSession(){var m=this;return(0,b.Z)(function*(){return ts._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,y){var D=this;return(0,b.Z)(function*(){const S=m,R=yield D.getSession(),V=yield tn(D.user,S._process(D.user.auth,R,y));return yield D.user._updateTokensIfNecessary(V),D.user.reload()})()}unenroll(m){var y=this;return(0,b.Z)(function*(){const D="string"==typeof m?m:m.uid,S=yield y.user.getIdToken(),R=yield tn(y.user,function(w,m){return yt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",We(w,m))}(y.user.auth,{idToken:S,mfaEnrollmentId:D}));y.enrolledFactors=y.enrolledFactors.filter(({uid:V})=>V!==D),yield y.user._updateTokensIfNecessary(R);try{yield y.user.reload()}catch(V){if("auth/user-token-expired"!==V.code)throw V}})()}}const ua=new WeakMap,Du="__sak";class Th{constructor(m,y){this.storage=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Du,"1"),this.storage.removeItem(Du),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}}const ol=(()=>{class w extends Th{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(y,D)=>this.onStorageEvent(y,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const w=(0,k.z$)();return th(w)||ui(w)}()&&function(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Ci(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const D of Object.keys(this.listeners)){const S=this.storage.getItem(D),R=this.localCache[D];S!==R&&y(D,R,S)}}onStorageEvent(y,D=!1){if(!y.key)return void this.forAllChangedKeys((re,be,Pe)=>{this.notifyListeners(re,Pe)});const S=y.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(S);if(y.newValue!==re)null!==y.newValue?this.storage.setItem(S,y.newValue):this.storage.removeItem(S);else if(this.localCache[S]===y.newValue&&!D)return}const R=()=>{const re=this.storage.getItem(S);!D&&this.localCache[S]===re||this.notifyListeners(S,re)},V=this.storage.getItem(S);(0,k.w1)()&&10===document.documentMode&&V!==y.newValue&&y.newValue!==y.oldValue?setTimeout(R,10):R()}notifyListeners(y,D){this.localCache[y]=D;const S=this.listeners[y];if(S)for(const R of Array.from(S))R(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,D,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:D,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,D){var S=()=>super._set,R=this;return(0,b.Z)(function*(){yield S().call(R,y,D),R.localCache[y]=JSON.stringify(D)})()}_get(y){var D=()=>super._get,S=this;return(0,b.Z)(function*(){const R=yield D().call(S,y);return S.localCache[y]=JSON.stringify(R),R})()}_remove(y){var D=()=>super._remove,S=this;return(0,b.Z)(function*(){yield D().call(S,y),delete S.localCache[y]})()}}return w.type="LOCAL",w})(),ns=(()=>{class w extends Th{constructor(){super(window.sessionStorage,"SESSION")}_addListener(y,D){}_removeListener(y,D){}}return w.type="SESSION",w})();let ks=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const D=this.receivers.find(R=>R.isListeningto(y));if(D)return D;const S=new w(y);return this.receivers.push(S),S}isListeningto(y){return this.eventTarget===y}handleEvent(y){var D=this;return(0,b.Z)(function*(){const S=y,{eventId:R,eventType:V,data:re}=S.data,be=D.handlersMap[V];if(!(null==be?void 0:be.size))return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:V});const Pe=Array.from(be).map(function(){var $e=(0,b.Z)(function*(on){return on(S.origin,re)});return function(on){return $e.apply(this,arguments)}}()),ze=yield function(w){return Promise.all(w.map(function(){var m=(0,b.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(D){return{fulfilled:!1,reason:D}}});return function(y){return m.apply(this,arguments)}}()))}(Pe);S.ports[0].postMessage({status:"done",eventId:R,eventType:V,response:ze})})()}_subscribe(y,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(D)}_unsubscribe(y,D){this.handlersMap[y]&&D&&this.handlersMap[y].delete(D),(!D||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function al(w="",m=10){let y="";for(let D=0;D<m;D++)y+=Math.floor(10*Math.random());return w+y}class a0{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,D=50){var S=this;return(0,b.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let V,re;return new Promise((be,Pe)=>{const ze=al("",20);R.port1.start();const $e=setTimeout(()=>{Pe(new Error("unsupported_event"))},D);re={messageChannel:R,onMessage(on){const fr=on;if(fr.data.eventId===ze)switch(fr.data.status){case"ack":clearTimeout($e),V=setTimeout(()=>{Pe(new Error("timeout"))},3e3);break;case"done":clearTimeout(V),be(fr.data.response);break;default:clearTimeout($e),clearTimeout(V),Pe(new Error("invalid_response"))}}},S.handlers.add(re),R.port1.addEventListener("message",re.onMessage),S.target.postMessage({eventType:m,eventId:ze,data:y},[R.port2])}).finally(()=>{re&&S.removeMessageHandler(re)})})()}}function jt(){return window}function ul(){return void 0!==jt().WorkerGlobalScope&&"function"==typeof jt().importScripts}function xh(){return(xh=(0,b.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Wp="firebaseLocalStorageDb",Au="firebaseLocalStorage",cl="fbase_key";class ll{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function dl(w,m){return w.transaction([Au],m?"readwrite":"readonly").objectStore(Au)}function je(){const w=indexedDB.open(Wp,1);return new Promise((m,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const D=w.result;try{D.createObjectStore(Au,{keyPath:cl})}catch(S){y(S)}}),w.addEventListener("success",(0,b.Z)(function*(){const D=w.result;D.objectStoreNames.contains(Au)?m(D):(D.close(),yield function(){const w=indexedDB.deleteDatabase(Wp);return new ll(w).toPromise()}(),m(yield je()))}))})}function rs(w,m,y){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,b.Z)(function*(w,m,y){const D=dl(w,!0).put({[cl]:m,value:y});return new ll(D).toPromise()})).apply(this,arguments)}function ca(){return(ca=(0,b.Z)(function*(w,m){const y=dl(w,!1).get(m),D=yield new ll(y).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function Ru(w,m){const y=dl(w,!0).delete(m);return new ll(y).toPromise()}const la=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,b.Z)(function*(){return y.db||(y.db=yield je()),y.db})()}_withRetries(y){var D=this;return(0,b.Z)(function*(){let S=0;for(;;)try{const R=yield D._openDb();return yield y(R)}catch(R){if(S++>3)throw R;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,b.Z)(function*(){return ul()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,b.Z)(function*(){y.receiver=ks._getInstance(ul()?self:null),y.receiver._subscribe("keyChanged",function(){var D=(0,b.Z)(function*(S,R){return{keyProcessed:(yield y._poll()).includes(R.key)}});return function(S,R){return D.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var D=(0,b.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return D.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,b.Z)(function*(){var D,S;if(y.activeServiceWorker=yield function(){return xh.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new a0(y.activeServiceWorker);const R=yield y.sender._send("ping",{},800);!R||(null===(D=R[0])||void 0===D?void 0:D.fulfilled)&&(null===(S=R[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var D=this;return(0,b.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:y},D.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,b.Z)(function*(){try{if(!indexedDB)return!1;const y=yield je();return yield rs(y,Du,"1"),yield Ru(y,Du),!0}catch(y){}return!1})()}_withPendingWrite(y){var D=this;return(0,b.Z)(function*(){D.pendingWrites++;try{yield y()}finally{D.pendingWrites--}})()}_set(y,D){var S=this;return(0,b.Z)(function*(){return S._withPendingWrite((0,b.Z)(function*(){return yield S._withRetries(R=>rs(R,y,D)),S.localCache[y]=D,S.notifyServiceWorker(y)}))})()}_get(y){var D=this;return(0,b.Z)(function*(){const S=yield D._withRetries(R=>function(w,m){return ca.apply(this,arguments)}(R,y));return D.localCache[y]=S,S})()}_remove(y){var D=this;return(0,b.Z)(function*(){return D._withPendingWrite((0,b.Z)(function*(){return yield D._withRetries(S=>Ru(S,y)),delete D.localCache[y],D.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,b.Z)(function*(){const D=yield y._withRetries(V=>{const re=dl(V,!1).getAll();return new ll(re).toPromise()});if(!D)return[];if(0!==y.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:V,value:re}of D)R.add(V),JSON.stringify(y.localCache[V])!==JSON.stringify(re)&&(y.notifyListeners(V,re),S.push(V));for(const V of Object.keys(y.localCache))y.localCache[V]&&!R.has(V)&&(y.notifyListeners(V,null),S.push(V));return S})()}notifyListeners(y,D){this.localCache[y]=D;const S=this.listeners[y];if(S)for(const R of Array.from(S))R(D)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,b.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Wr(w,m){return yt(w,"POST","/v2/accounts/mfaSignIn:start",We(w,m))}function hl(){return(hl=(0,b.Z)(function*(w){return(yield yt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function da(w){return new Promise((m,y)=>{const D=document.createElement("script");D.setAttribute("src",w),D.onload=m,D.onerror=S=>{const R=Ae("internal-error");R.customData=S,y(R)},D.type="text/javascript",D.charset="UTF-8",function(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(D)})}function Kp(w){return`__${w}${Math.floor(1e6*Math.random())}`}const zr=1e12;class Wy{constructor(m){this.auth=m,this.counter=zr,this._widgets=new Map}render(m,y){const D=this.counter;return this._widgets.set(D,new Nu(m,this.auth.name,y||{})),this.counter++,D}reset(m){var y;const D=m||zr;null===(y=this._widgets.get(D))||void 0===y||y.delete(),this._widgets.delete(D)}getResponse(m){var y;return(null===(y=this._widgets.get(m||zr))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,b.Z)(function*(){var D;return null===(D=y._widgets.get(m||zr))||void 0===D||D.execute(),""})()}}class Nu{constructor(m,y,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof m?document.getElementById(m):m;le(S,"argument-error",{appName:y}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(w){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<50;D++)m.push(y.charAt(Math.floor(Math.random()*y.length)));return m.join("")}();const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const is=Kp("rcb"),ha=new Lt(3e4,6e4);class Si{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!jt().grecaptcha}load(m,y=""){return le((w=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w),m,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(jt().grecaptcha):new Promise((D,S)=>{const R=jt().setTimeout(()=>{S(Ae(m,"network-request-failed"))},ha.get());jt()[is]=()=>{jt().clearTimeout(R),delete jt()[is];const re=jt().grecaptcha;if(!re)return void S(Ae(m,"internal-error"));const be=re.render;re.render=(Pe,ze)=>{const $e=be(Pe,ze);return this.counter++,$e},this.hostLanguage=y,D(re)},da(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:is,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(R),S(Ae(m,"internal-error"))})});var w}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!jt().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class go{load(m){return(0,b.Z)(function*(){return new Wy(m)})()}clearedOneInstance(){}}const zy="recaptcha",WC={theme:"light",type:"image"};class Zp{constructor(m,y=Object.assign({},WC),D){this.parameters=y,this.type=zy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bt(D),this.isInvisible="invisible"===this.parameters.size,le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof m?document.getElementById(m):m;le(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new go:new Si,this.validateStartingState()}verify(){var m=this;return(0,b.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),D=m.getAssertedRecaptcha();return D.getResponse(y)||new Promise(R=>{const V=re=>{!re||(m.tokenChangeListeners.delete(V),R(re))};m.tokenChangeListeners.add(V),m.isInvisible&&D.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(D=>D(y)),"function"==typeof m)m(y);else if("string"==typeof m){const D=jt()[m];"function"==typeof D&&D(y)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,b.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const D=document.createElement("div");y.appendChild(D),y=D}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,b.Z)(function*(){le(Fe()&&!ul(),m.auth,"internal-error"),yield function(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function(w){return hl.apply(this,arguments)}(m.auth);le(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Nh{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=ia._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function fa(){return(fa=(0,b.Z)(function*(w,m,y){const D=bt(w),S=yield Ph(D,m,(0,k.m9)(y));return new Nh(S,R=>il(D,R))})).apply(this,arguments)}function Qp(){return(Qp=(0,b.Z)(function*(w,m,y){const D=(0,k.m9)(w);yield As(!1,D,"phone");const S=yield Ph(D.auth,m,(0,k.m9)(y));return new Nh(S,R=>Mp(D,R))})).apply(this,arguments)}function Ai(){return(Ai=(0,b.Z)(function*(w,m,y){const D=(0,k.m9)(w),S=yield Ph(D.auth,m,(0,k.m9)(y));return new Nh(S,R=>pu(D,R))})).apply(this,arguments)}function Ph(w,m,y){return Jp.apply(this,arguments)}function Jp(){return(Jp=(0,b.Z)(function*(w,m,y){var D;const S=yield y.verify();try{let R;if(le("string"==typeof S,w,"argument-error"),le(y.type===zy,w,"argument-error"),R="string"==typeof m?{phoneNumber:m}:m,"session"in R){const V=R.session;if("phoneNumber"in R)return le("enroll"===V.type,w,"internal-error"),(yield Ly(w,{idToken:V.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{le("signin"===V.type,w,"internal-error");const re=(null===(D=R.multiFactorHint)||void 0===D?void 0:D.uid)||R.multiFactorUid;return le(re,w,"missing-multi-factor-info"),(yield Wr(w,{mfaPendingCredential:V.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:V}=yield ci(w,{phoneNumber:R.phoneNumber,recaptchaToken:S});return V}}finally{y._reset()}})).apply(this,arguments)}function Xp(){return(Xp=(0,b.Z)(function*(w,m){yield tl((0,k.m9)(w),m)})).apply(this,arguments)}let pl=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=bt(y)}verifyPhoneNumber(y,D){return Ph(this.auth,y,(0,k.m9)(D))}static credential(y,D){return ia._fromVerification(y,D)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:D,temporaryProof:S}=y;return D&&S?ia._fromTokenResponse(D,S):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function pn(w,m){return m?X(m):(le(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class hi extends Yn{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Dt(m,this._buildIdpRequest())}_linkToIdToken(m,y){return Dt(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return Dt(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function eg(w){return Op(w.auth,new hi(w),w.bypassAuthState)}function vn(w){const{auth:m,user:y}=w;return le(y,m,"internal-error"),nl(y,new hi(w),w.bypassAuthState)}function gl(w){return mo.apply(this,arguments)}function mo(){return(mo=(0,b.Z)(function*(w){const{auth:m,user:y}=w;return le(y,m,"internal-error"),tl(y,new hi(w),w.bypassAuthState)})).apply(this,arguments)}class Ky{constructor(m,y,D,S,R=!1){this.auth=m,this.resolver=D,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,b.Z)(function*(D,S){m.pendingPromise={resolve:D,reject:S};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(R){m.reject(R)}});return function(D,S){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,b.Z)(function*(){const{urlResponse:D,sessionId:S,postBody:R,tenantId:V,error:re,type:be}=m;if(re)return void y.reject(re);const Pe={auth:y.auth,requestUri:D,sessionId:S,tenantId:V||void 0,postBody:R||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(be)(Pe))}catch(ze){y.reject(ze)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return eg;case"linkViaPopup":case"linkViaRedirect":return gl;case"reauthViaPopup":case"reauthViaRedirect":return vn;default:Se(this.auth,"internal-error")}}resolve(m){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zy=new Lt(2e3,1e4);function Nr(){return(Nr=(0,b.Z)(function*(w,m,y){const D=bt(w);st(w,m,ao);const S=pn(D,y);return new as(D,"signInViaPopup",m,S).executeNotNull()})).apply(this,arguments)}function ss(){return(ss=(0,b.Z)(function*(w,m,y){const D=(0,k.m9)(w);st(D.auth,m,ao);const S=pn(D.auth,y);return new as(D.auth,"reauthViaPopup",m,S,D).executeNotNull()})).apply(this,arguments)}function yl(){return(yl=(0,b.Z)(function*(w,m,y){const D=(0,k.m9)(w);st(D.auth,m,ao);const S=pn(D.auth,y);return new as(D.auth,"linkViaPopup",m,S,D).executeNotNull()})).apply(this,arguments)}let as=(()=>{class w extends Ky{constructor(y,D,S,R,V){super(y,D,R,V),this.provider=S,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,b.Z)(function*(){const D=yield y.execute();return le(D,y.auth,"internal-error"),D})()}onExecution(){var y=this;return(0,b.Z)(function*(){J(1===y.filter.length,"Popup operations only handle one event");const D=al();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],D),y.authWindow.associatedEvent=D,y.resolver._originValidation(y.auth).catch(S=>{y.reject(S)}),y.resolver._isIframeWebStorageSupported(y.auth,S=>{S||y.reject(Ae(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ae(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var D,S;this.pollId=(null===(S=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ae(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Zy.get())};y()}}return w.currentPopupAction=null,w})();const tg=new Map;class Yy extends Ky{constructor(m,y,D=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,D),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,b.Z)(function*(){let D=tg.get(y.auth._key());if(!D){try{const R=(yield function(w,m){return Xn.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;D=()=>Promise.resolve(R)}catch(S){D=()=>Promise.reject(S)}tg.set(y.auth._key(),D)}return D()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,D=this;return(0,b.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(D,m);if("unknown"!==m.type){if(m.eventId){const S=yield D.auth._redirectUserForId(m.eventId);if(S)return D.user=S,y().call(D,m);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,b.Z)(function*(){})()}cleanUp(){}}function Xn(){return(Xn=(0,b.Z)(function*(w,m){const y=Oh(m),D="true"===(yield Ls(w)._get(y));return yield Ls(w)._remove(y),D})).apply(this,arguments)}function Pu(w,m){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,b.Z)(function*(w,m){return Ls(w)._set(Oh(m),"true")})).apply(this,arguments)}function Ls(w){return X(w._redirectPersistence)}function Oh(w){return Mt("pendingRedirect",w.config.apiKey,w.name)}function Mh(){return(Mh=(0,b.Z)(function*(w,m,y){const D=bt(w);st(w,m,ao);const S=pn(D,y);return yield Pu(S,D),S._openRedirect(D,m,"signInViaRedirect")})).apply(this,arguments)}function Mu(){return(Mu=(0,b.Z)(function*(w,m,y){const D=(0,k.m9)(w);st(D.auth,m,ao);const S=pn(D.auth,y);yield Pu(S,D.auth);const R=yield dt(D);return S._openRedirect(D.auth,m,"reauthViaRedirect",R)})).apply(this,arguments)}function yo(){return(yo=(0,b.Z)(function*(w,m,y){const D=(0,k.m9)(w);st(D.auth,m,ao);const S=pn(D.auth,y);yield As(!1,D,m.providerId),yield Pu(S,D.auth);const R=yield dt(D);return S._openRedirect(D.auth,m,"linkViaRedirect",R)})).apply(this,arguments)}function Us(){return(Us=(0,b.Z)(function*(w,m){return yield bt(w)._initializationPromise,_l(w,m,!1)})).apply(this,arguments)}function _l(w,m){return vl.apply(this,arguments)}function vl(){return(vl=(0,b.Z)(function*(w,m,y=!1){const D=bt(w),S=pn(D,m),V=yield new Yy(D,S,y).execute();return V&&!y&&(delete V.user._redirectEventId,yield D._persistUserIfCurrent(V.user),yield D._setRedirectUser(null,m)),V})).apply(this,arguments)}function dt(w){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,b.Z)(function*(w){const m=al(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class Uu{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(m,D)&&(y=!0,this.sendToConsumer(m,D),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _o(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var D;if(m.error&&!_o(m)){const S=(null===(D=m.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";y.onError(Ae(this.auth,S))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const D=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&D}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vs(m))}saveEventToCache(m){this.cachedEventUids.add(Vs(m)),this.lastProcessedEventTime=Date.now()}}function Vs(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function _o({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===(null==m?void 0:m.code)}function un(w){return Or.apply(this,arguments)}function Or(){return(Or=(0,b.Z)(function*(w,m={}){return yt(w,"GET","/v1/projects",m)})).apply(this,arguments)}const n_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bs=/^https?/;function ig(){return(ig=(0,b.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield un(w);for(const y of m)try{if(Cn(y))return}catch(D){}Se(w,"unauthorized-domain")})).apply(this,arguments)}function Cn(w){const m=ve(),{protocol:y,hostname:D}=new URL(m);if(w.startsWith("chrome-extension://")){const V=new URL(w);return""===V.hostname&&""===D?"chrome-extension:"===y&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&V.hostname===D}if(!Bs.test(y))return!1;if(n_.test(w))return D===w;const S=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(D)}const fi=new Lt(3e4,6e4);function r_(){const w=jt().___jsl;if(null==w?void 0:w.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let Mr=null;function Vu(w){return Mr=Mr||function(w){return new Promise((m,y)=>{var D,S,R;function V(){r_(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{r_(),y(Ae(w,"network-request-failed"))},timeout:fi.get()})}if(null===(S=null===(D=jt().gapi)||void 0===D?void 0:D.iframes)||void 0===S?void 0:S.Iframe)m(gapi.iframes.getContext());else{if(!(null===(R=jt().gapi)||void 0===R?void 0:R.load)){const re=Kp("iframefcb");return jt()[re]=()=>{gapi.load?V():y(Ae(w,"network-request-failed"))},da(`https://apis.google.com/js/api.js?onload=${re}`)}V()}}).catch(m=>{throw Mr=null,m})}(w),Mr}const js=new Lt(5e3,15e3),El={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Bu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ju(w){const m=w.config;le(m.authDomain,w,"auth-domain-config-required");const y=m.emulator?en(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,D={apiKey:m.apiKey,appName:w.name,v:ue.SDK_VERSION},S=Bu.get(w.config.apiHost);S&&(D.eid=S);const R=w._getFrameworks();return R.length&&(D.fw=R.join(",")),`${y}?${(0,k.xO)(D).slice(1)}`}function ht(){return(ht=(0,b.Z)(function*(w){const m=yield Vu(w),y=jt().gapi;return le(y,w,"internal-error"),m.open({where:document.body,url:ju(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:El,dontclear:!0},D=>new Promise(function(){var S=(0,b.Z)(function*(R,V){yield D.restyle({setHideOnLeave:!1});const re=Ae(w,"network-request-failed"),be=jt().setTimeout(()=>{V(re)},js.get());function Pe(){jt().clearTimeout(be),R(D)}D.ping(Pe).then(Pe,()=>{V(re)})});return function(R,V){return S.apply(this,arguments)}}()))})).apply(this,arguments)}const Ri={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fh{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function us(w,m,y,D,S,R){le(w.config.authDomain,w,"auth-domain-config-required"),le(w.config.apiKey,w,"invalid-api-key");const V={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:D,v:ue.SDK_VERSION,eventId:S};if(m instanceof ao){m.setDefaultLanguage(w.languageCode),V.providerId=m.providerId||"",(0,k.xb)(m.getCustomParameters())||(V.customParameters=JSON.stringify(m.getCustomParameters()));for(const[be,Pe]of Object.entries(R||{}))V[be]=Pe}if(m instanceof cu){const be=m.getScopes().filter(Pe=>""!==Pe);be.length>0&&(V.scopes=be.join(","))}w.tenantId&&(V.tid=w.tenantId);const re=V;for(const be of Object.keys(re))void 0===re[be]&&delete re[be];return`${function({config:w}){return w.emulator?en(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,k.xO)(re).slice(1)}`}const xi="webStorageSupport";class _a extends class{constructor(m){this.factorId=m}_process(m,y,D){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,D);case"signin":return this._finalizeSignIn(m,y.credential);default:return Y("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new _a(m)}_finalizeEnroll(m,y,D){return function(w,m){return yt(w,"POST","/v2/accounts/mfaEnrollment:finalize",We(w,m))}(m,{idToken:y,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function(w,m){return yt(w,"POST","/v2/accounts/mfaSignIn:finalize",We(w,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vh=(()=>{class w{constructor(){}static assertion(y){return _a._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var w;class cg{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,b.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(D=>{var S;m((null===(S=D)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);!y||(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Io(){return window}function kr(){return(kr=(0,b.Z)(function*(w,m,y){var D;const{BuildInfo:S}=Io();J(m.sessionId,"AuthEvent did not contain a session ID");const R=yield fg(m.sessionId),V={};return ui()?V.ibi=S.packageName:Jo()?V.apn=S.packageName:Se(w,"operation-not-supported-in-this-environment"),S.displayName&&(V.appDisplayName=S.displayName),V.sessionId=R,us(w,y,m.type,void 0,null!==(D=m.eventId)&&void 0!==D?D:void 0,V)})).apply(this,arguments)}function $s(){return($s=(0,b.Z)(function*(w){const{BuildInfo:m}=Io(),y={};ui()?y.iosBundleId=m.packageName:Jo()?y.androidPackageName=m.packageName:Se(w,"operation-not-supported-in-this-environment"),yield un(w,y)})).apply(this,arguments)}function jh(){return(jh=(0,b.Z)(function*(w,m,y){const{cordova:D}=Io();let S=()=>{};try{yield new Promise((R,V)=>{let re=null;function be(){var $e;R();const on=null===($e=D.plugins.browsertab)||void 0===$e?void 0:$e.close;"function"==typeof on&&on(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function Pe(){re||(re=window.setTimeout(()=>{V(Ae(w,"redirect-cancelled-by-user"))},2e3))}function ze(){"visible"===(null==document?void 0:document.visibilityState)&&Pe()}m.addPassiveListener(be),document.addEventListener("resume",Pe,!1),Jo()&&document.addEventListener("visibilitychange",ze,!1),S=()=>{m.removePassiveListener(be),document.removeEventListener("resume",Pe,!1),document.removeEventListener("visibilitychange",ze,!1),re&&window.clearTimeout(re)}})}finally{S()}})).apply(this,arguments)}function fg(w){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,b.Z)(function*(w){const m=Cl(w),y=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(y)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Cl(w){if(J(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(w);const m=new ArrayBuffer(w.length),y=new Uint8Array(m);for(let D=0;D<w.length;D++)y[D]=w.charCodeAt(D);return y}w="Browser",(0,ue._registerComponent)(new ce.wA("auth",(m,{options:y})=>{const D=m.getProvider("app").getImmediate(),{apiKey:S,authDomain:R}=D.options;return(V=>{le(S&&!S.includes(":"),"invalid-api-key",{appName:V.name}),le(!(null==R?void 0:R.includes(":")),"argument-error",{appName:V.name});const re={apiKey:S,authDomain:R,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zn(w)},be=new xy(V,re);return function(w,m){const y=(null==m?void 0:m.persistence)||[],D=(Array.isArray(y)?y:[y]).map(X);(null==m?void 0:m.errorMap)&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(D,null==m?void 0:m.popupRedirectResolver)}(be,y),be})(D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,D)=>{m.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new ce.wA("auth-internal",m=>{const y=bt(m.getProvider("auth").getImmediate());return new cg(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)("@firebase/auth","0.18.2",void 0);class $h extends Uu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(m)),super.onEvent(m)}initialized(){var m=this;return(0,b.Z)(function*(){yield m.initPromise})()}}function Tl(w){return bo.apply(this,arguments)}function bo(){return(bo=(0,b.Z)(function*(w){const m=yield Do()._get(Sl(w));return m&&(yield Do()._remove(Sl(w))),m})).apply(this,arguments)}function pi(){const w=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const D=Math.floor(Math.random()*m.length);w.push(m.charAt(D))}return w.join("")}function Do(){return X(ol)}function Sl(w){return Mt("authEvent",w.config.apiKey,w.name)}function Co(w){if(!(null==w?void 0:w.includes("?")))return{};const[m,...y]=w.split("?");return(0,k.zd)(y.join("?"))}function Rl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ae("no-auth-event")}}function Ku(){var w;return(null===(w=null==self?void 0:self.location)||void 0===w?void 0:w.protocol)||null}function Eg(w=(0,k.z$)()){return!("file:"!==Ku()&&"ionic:"!==Ku()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nl(){try{const w=self.localStorage,m=al();if(w)return w.setItem(m,"1"),w.removeItem(m),!function(w=(0,k.z$)()){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)||function(w=(0,k.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,k.hl)()}catch(w){return qh()&&(0,k.hl)()}return!1}function qh(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ft(){return("http:"===Ku()||"https:"===Ku()||(0,k.ru)()||Eg())&&!((0,k.b$)()||(0,k.UG)())&&Nl()&&!qh()}function Ig(){return Eg()&&"undefined"!=typeof document}function Zr(){return(Zr=(0,b.Z)(function*(){return!!Ig()&&new Promise(w=>{const m=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),w(!0)})})})).apply(this,arguments)}const hr={LOCAL:"local",NONE:"none",SESSION:"session"},gi=le,bg="persistence";function zh(w){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,b.Z)(function*(w){yield w._initializationPromise;const m=Yu(),y=Mt(bg,w.config.apiKey,w.name);(null==m?void 0:m.sessionStorage)&&m.sessionStorage.setItem(y,w._getPersistence())})).apply(this,arguments)}function Yu(){return"undefined"!=typeof window?window:null}const Ea=le;class Qt{constructor(){this.browserResolver=X(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ns,this._completeRedirectFn=_l}_openPopup(m,y,D,S){var R=this;return(0,b.Z)(function*(){var V;J(null===(V=R.eventManagers[m._key()])||void 0===V?void 0:V.manager,"_initialize() not called before _openPopup()");const re=us(m,y,D,ve(),S);return function(w,m,y,D=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),V=Math.max((window.screen.availWidth-D)/2,0).toString();let re="";const be=Object.assign(Object.assign({},Ri),{width:D.toString(),height:S.toString(),top:R,left:V}),Pe=(0,k.z$)().toLowerCase();y&&(re=nh(Pe)?"_blank":y),Kc(Pe)&&(m=m||"http://localhost",be.scrollbars="yes");const ze=Object.entries(be).reduce((on,[fr,En])=>`${on}${fr}=${En},`,"");if(function(w=(0,k.z$)()){var m;return ui(w)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(Pe)&&"_self"!==re)return function(w,m){const y=document.createElement("a");y.href=w,y.target=m;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(D)}(m||"",re),new Fh(null);const $e=window.open(m||"",re,ze);le($e,w,"popup-blocked");try{$e.focus()}catch(on){}return new Fh($e)}(m,re,al())})()}_openRedirect(m,y,D,S){var R=this;return(0,b.Z)(function*(){return yield R._originValidation(m),w=us(m,y,D,ve(),S),jt().location.href=w,new Promise(()=>{});var w})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:S,promise:R}=this.eventManagers[y];return S?Promise.resolve(S):(J(R,"If manager is not set, promise should be"),R)}const D=this.initAndGetManager(m);return this.eventManagers[y]={promise:D},D}initAndGetManager(m){var y=this;return(0,b.Z)(function*(){const D=yield function(w){return ht.apply(this,arguments)}(m),S=new Uu(m);return D.register("authEvent",R=>(le(null==R?void 0:R.authEvent,m,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:S},y.iframes[m._key()]=D,S})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(xi,{type:xi},S=>{var R;const V=null===(R=null==S?void 0:S[0])||void 0===R?void 0:R[xi];void 0!==V&&y(!!V),Se(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return ig.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return Ci()||th()||ui()}}),this.cordovaResolver=X(class{constructor(){this._redirectPersistence=ns,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_l}_initialize(m){var y=this;return(0,b.Z)(function*(){const D=m._key();let S=y.eventManagers.get(D);return S||(S=new $h(m),y.eventManagers.set(D,S),y.attachCallbackListeners(m,S)),S})()}_openPopup(m){Se(m,"operation-not-supported-in-this-environment")}_openRedirect(m,y,D,S){var R=this;return(0,b.Z)(function*(){!function(w){var m,y,D,S,R,V,re,be,Pe,ze;const $e=Io();le("function"==typeof(null===(m=null==$e?void 0:$e.universalLinks)||void 0===m?void 0:m.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(void 0!==(null===(y=null==$e?void 0:$e.BuildInfo)||void 0===y?void 0:y.packageName),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(R=null===(S=null===(D=null==$e?void 0:$e.cordova)||void 0===D?void 0:D.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(be=null===(re=null===(V=null==$e?void 0:$e.cordova)||void 0===V?void 0:V.plugins)||void 0===re?void 0:re.browsertab)||void 0===be?void 0:be.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(ze=null===(Pe=null==$e?void 0:$e.cordova)||void 0===Pe?void 0:Pe.InAppBrowser)||void 0===ze?void 0:ze.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const V=yield R._initialize(m);yield V.initialized(),V.resetRedirect(),tg.clear(),yield R._originValidation(m);const re=function(w,m,y=null){return{type:m,eventId:y,urlResponse:null,sessionId:pi(),postBody:null,tenantId:w.tenantId,error:Ae(w,"no-auth-event")}}(m,D,S);yield function(w,m){return Do()._set(Sl(w),m)}(m,re);const be=yield function(w,m,y){return kr.apply(this,arguments)}(m,re,y),Pe=yield function(w){const{cordova:m}=Io();return new Promise(y=>{m.plugins.browsertab.isAvailable(D=>{let S=null;D?m.plugins.browsertab.openUrl(w):S=m.InAppBrowser.open(w,function(w=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),y(S)})})}(be);return function(w,m,y){return jh.apply(this,arguments)}(m,V,Pe)})()}_isIframeWebStorageSupported(m,y){throw new Error("Method not implemented.")}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return $s.apply(this,arguments)}(m)),this.originValidationPromises[y]}attachCallbackListeners(m,y){const{universalLinks:D,handleOpenURL:S,BuildInfo:R}=Io(),V=setTimeout((0,b.Z)(function*(){yield Tl(m),y.onEvent(Rl())}),500),re=function(){var ze=(0,b.Z)(function*($e){clearTimeout(V);const on=yield Tl(m);let fr=null;on&&(null==$e?void 0:$e.url)&&(fr=function(w,m){var y,D;const S=function(w){const m=Co(w),y=m.link?decodeURIComponent(m.link):void 0,D=Co(y).link,S=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return Co(S).link||S||D||y||w}(m);if(S.includes("/__/auth/callback")){const R=Co(S),V=R.firebaseError?function(w){try{return JSON.parse(w)}catch(m){return null}}(decodeURIComponent(R.firebaseError)):null,re=null===(D=null===(y=null==V?void 0:V.code)||void 0===y?void 0:y.split("auth/"))||void 0===D?void 0:D[1],be=re?Ae(re):null;return be?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:be,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:S,postBody:null}}return null}(on,$e.url)),y.onEvent(fr||Rl())});return function(on){return ze.apply(this,arguments)}}();void 0!==D&&"function"==typeof D.subscribe&&D.subscribe(null,re);const be=S,Pe=`${R.packageName.toLowerCase()}://`;Io().handleOpenURL=function(){var ze=(0,b.Z)(function*($e){if($e.toLowerCase().startsWith(Pe)&&re({url:$e}),"function"==typeof be)try{be($e)}catch(on){console.error(on)}});return function($e){return ze.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ns,this._completeRedirectFn=_l}_initialize(m){var y=this;return(0,b.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,y,D,S){var R=this;return(0,b.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(m,y,D,S)})()}_openRedirect(m,y,D,S){var R=this;return(0,b.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(m,y,D,S)})()}_isIframeWebStorageSupported(m,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,y)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return Ig()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ea(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,b.Z)(function*(){if(m.underlyingResolver)return;const y=yield function(){return Zr.apply(this,arguments)}();m.underlyingResolver=y?m.cordovaResolver:m.browserResolver})()}}function Ol(w){return w.unwrap()}function Ml(w){return To(w)}function To(w){const{_tokenResponse:m}=w instanceof k.ZR?w.customData:w;if(!m)return null;if(!(w instanceof k.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return pl.credentialFromResult(w);const y=m.providerId;if(!y||"password"===y)return null;let D;switch(y){case"google.com":D=lh;break;case"facebook.com":D=ch;break;case"github.com":D=dh;break;case"twitter.com":D=hh;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:V,pendingToken:re,nonce:be}=m;return R||V||S||re?re?y.startsWith("saml.")?sa._create(y,re):Ar._fromParams({providerId:y,signInMethod:y,pendingToken:re,idToken:S,accessToken:R}):new uo(y).credential({idToken:S,accessToken:R,rawNonce:be}):null}return w instanceof k.ZR?D.credentialFromError(w):D.credentialFromResult(w)}function Pn(w,m){return m.catch(y=>{throw y instanceof k.ZR&&function(w,m){var y;const D=null===(y=m.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===m.code)m.resolver=new Cg(w,function(w,m){var y;const D=(0,k.m9)(w),S=m;return le(m.operationType,D,"argument-error"),le(null===(y=S.serverResponse)||void 0===y?void 0:y.mfaPendingCredential,D,"argument-error"),bh._fromError(D,S)}(w,m));else if(D){const S=To(m),R=m;S&&(R.credential=S,R.tenantId=D.tenantId||void 0,R.email=D.email||void 0,R.phoneNumber=D.phoneNumber||void 0)}}(w,y),y}).then(y=>{const S=y.user;return{operationType:y.operationType,credential:Ml(y),additionalUserInfo:$p(y),user:cs.getOrCreate(S)}})}function wa(w,m){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,b.Z)(function*(w,m){const y=yield m;return{verificationId:y.verificationId,confirm:D=>Pn(w,y.confirm(D))}})).apply(this,arguments)}class Cg{constructor(m,y){this.resolver=y,this.auth=function(w){return w.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return Pn(Ol(this.auth),this.resolver.resolveSignIn(m))}}class cs{constructor(m){this._delegate=m,this.multiFactor=function(w){const m=(0,k.m9)(w);return ua.has(m)||ua.set(m,aa._fromUser(m)),ua.get(m)}(m)}static getOrCreate(m){return cs.USER_MAP.has(m)||cs.USER_MAP.set(m,new cs(m)),cs.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var y=this;return(0,b.Z)(function*(){return Pn(y.auth,Mp(y._delegate,m))})()}linkWithPhoneNumber(m,y){var D=this;return(0,b.Z)(function*(){return wa(D.auth,function(w,m,y){return Qp.apply(this,arguments)}(D._delegate,m,y))})()}linkWithPopup(m){var y=this;return(0,b.Z)(function*(){return Pn(y.auth,function(w,m,y){return yl.apply(this,arguments)}(y._delegate,m,Qt))})()}linkWithRedirect(m){var y=this;return(0,b.Z)(function*(){return yield zh(bt(y.auth)),function(w,m,y){return function(w,m,y){return yo.apply(this,arguments)}(w,m,y)}(y._delegate,m,Qt)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var y=this;return(0,b.Z)(function*(){return Pn(y.auth,pu(y._delegate,m))})()}reauthenticateWithPhoneNumber(m,y){return wa(this.auth,function(w,m,y){return Ai.apply(this,arguments)}(this._delegate,m,y))}reauthenticateWithPopup(m){return Pn(this.auth,function(w,m,y){return ss.apply(this,arguments)}(this._delegate,m,Qt))}reauthenticateWithRedirect(m){var y=this;return(0,b.Z)(function*(){return yield zh(bt(y.auth)),function(w,m,y){return function(w,m,y){return Mu.apply(this,arguments)}(w,m,y)}(y._delegate,m,Qt)})()}sendEmailVerification(m){return function(w,m){return Ps.apply(this,arguments)}(this._delegate,m)}unlink(m){var y=this;return(0,b.Z)(function*(){return yield function(w,m){return el.apply(this,arguments)}(y._delegate,m),y})()}updateEmail(m){return function(w,m){return Eh((0,k.m9)(w),m,null)}(this._delegate,m)}updatePassword(m){return function(w,m){return Eh((0,k.m9)(w),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function(w,m){return Xp.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function(w,m){return _h.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,y){return function(w,m,y){return qr.apply(this,arguments)}(this._delegate,m,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cs.USER_MAP=new WeakMap;const ba=le;let Tg=(()=>{class w{constructor(y,D){if(this.app=y,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=y.options;ba(S,"invalid-api-key",{appName:y.name});let R=[ft];if("undefined"!=typeof window){R=function(w,m){const y=Yu();if(!(null==y?void 0:y.sessionStorage))return[];const D=Mt(bg,w,m);switch(y.sessionStorage.getItem(D)){case hr.NONE:return[ft];case hr.LOCAL:return[la,ns];case hr.SESSION:return[ns];default:return[]}}(S,y.name);for(const re of[la,ol,ns])R.includes(re)||R.push(re)}ba(S,"invalid-api-key",{appName:y.name});const V="undefined"!=typeof window?Qt:void 0;this._delegate=D.initialize({options:{persistence:R,popupRedirectResolver:V}}),this._delegate._updateErrorMap(ie),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,D){!function(w,m,y){const D=bt(w);le(D._canInitEmulator,D,"emulator-config-failed"),le(/^https?:\/\//.test(m),D,"invalid-emulator-scheme");const S=!!(null==y?void 0:y.disableWarnings),R=kt(m),{host:V,port:re}=function(w){const m=kt(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!y)return{host:"",port:null};const D=y[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(D);if(S){const R=S[1];return{host:R,port:Cs(D.substr(R.length+1))}}{const[R,V]=D.split(":");return{host:R,port:Cs(V)}}}(m);D.config.emulator={url:`${R}//${V}${null===re?"":`:${re}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:V,port:re,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function(){function w(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,y,D)}applyActionCode(y){return function(w,m){return lo.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return vu(this._delegate,y)}confirmPasswordReset(y,D){return function(w,m,y){return Ke.apply(this,arguments)}(this._delegate,y,D)}createUserWithEmailAndPassword(y,D){var S=this;return(0,b.Z)(function*(){return Pn(S._delegate,function(w,m,y){return fe.apply(this,arguments)}(S._delegate,y,D))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function(w,m){return Vp.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function(w,m){const y=Jc.parseLink(m);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,b.Z)(function*(){ba(Ft(),y._delegate,"operation-not-supported-in-this-environment");const D=yield function(w,m){return Us.apply(this,arguments)}(y._delegate,Qt);return D?Pn(y._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function(w,m){bt(w)._logFramework(m)}(this._delegate,y)}onAuthStateChanged(y,D,S){const{next:R,error:V,complete:re}=Da(y,D,S);return this._delegate.onAuthStateChanged(R,V,re)}onIdTokenChanged(y,D,S){const{next:R,error:V,complete:re}=Da(y,D,S);return this._delegate.onIdTokenChanged(R,V,re)}sendSignInLinkToEmail(y,D){return function(w,m,y){return rn.apply(this,arguments)}(this._delegate,y,D)}sendPasswordResetEmail(y,D){return function(w,m,y){return sl.apply(this,arguments)}(this._delegate,y,D||void 0)}setPersistence(y){var D=this;return(0,b.Z)(function*(){let S;switch(function(w,m){gi(Object.values(hr).includes(m),w,"invalid-persistence-type"),(0,k.b$)()?gi(m!==hr.SESSION,w,"unsupported-persistence-type"):(0,k.UG)()?gi(m===hr.NONE,w,"unsupported-persistence-type"):qh()?gi(m===hr.NONE||m===hr.LOCAL&&(0,k.hl)(),w,"unsupported-persistence-type"):gi(m===hr.NONE||Nl(),w,"unsupported-persistence-type")}(D._delegate,y),y){case hr.SESSION:S=ns;break;case hr.LOCAL:S=(yield X(la)._isAvailable())?la:ol;break;case hr.NONE:S=ft;break;default:return Se("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return Pn(this._delegate,function(w){return du.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return Pn(this._delegate,il(this._delegate,y))}signInWithCustomToken(y){return Pn(this._delegate,function(w,m){return Qn.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,D){return Pn(this._delegate,function(w,m,y){return il((0,k.m9)(w),Np.credential(m,y))}(this._delegate,y,D))}signInWithEmailLink(y,D){return Pn(this._delegate,function(w,m,y){return Gr.apply(this,arguments)}(this._delegate,y,D))}signInWithPhoneNumber(y,D){return wa(this._delegate,function(w,m,y){return fa.apply(this,arguments)}(this._delegate,y,D))}signInWithPopup(y){var D=this;return(0,b.Z)(function*(){return ba(Ft(),D._delegate,"operation-not-supported-in-this-environment"),Pn(D._delegate,function(w,m,y){return Nr.apply(this,arguments)}(D._delegate,y,Qt))})()}signInWithRedirect(y){var D=this;return(0,b.Z)(function*(){return ba(Ft(),D._delegate,"operation-not-supported-in-this-environment"),yield zh(D._delegate),function(w,m,y){return function(w,m,y){return Mh.apply(this,arguments)}(w,m,y)}(D._delegate,y,Qt)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function(w,m){return ho.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=hr,w})();function Da(w,m,y){let D=w;"function"!=typeof w&&({next:D,error:m,complete:y}=w);const S=D;return{next:V=>S(V&&cs.getOrCreate(V)),error:m,complete:y}}class kl{constructor(){this.providerId="phone",this._delegate=new pl(Ol(W.Z.auth()))}static credential(m,y){return pl.credential(m,y)}verifyPhoneNumber(m,y){return this._delegate.verifyPhoneNumber(m,y)}unwrap(){return this._delegate}}kl.PHONE_SIGN_IN_METHOD=pl.PHONE_SIGN_IN_METHOD,kl.PROVIDER_ID=pl.PROVIDER_ID;const Sg=le;class Qu{constructor(m,y,D=W.Z.app()){var S;Sg(null===(S=D.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new Zp(m,y,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(w){w.INTERNAL.registerComponent(new ce.wA("auth-compat",m=>{const y=m.getProvider("app-compat").getImmediate(),D=m.getProvider("auth");return new Tg(y,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Np,FacebookAuthProvider:ch,GithubAuthProvider:dh,GoogleAuthProvider:lh,OAuthProvider:uo,PhoneAuthProvider:kl,PhoneMultiFactorGenerator:Vh,RecaptchaVerifier:Qu,TwitterAuthProvider:hh,Auth:Tg,AuthCredential:Yn,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.1.5")}(W.Z)},7574:(ke,de,P)=>{"use strict";P.d(de,{y:()=>N});var b=P(7393),k=P(9181),ue=P(6490),Q=P(6554),ce=P(4487);var x=P(2494);let N=(()=>{class j{constructor(ie){this._isScalar=!1,ie&&(this._subscribe=ie)}lift(ie){const K=new j;return K.source=this,K.operator=ie,K}subscribe(ie,K,q){const{operator:Ie}=this,Ee=function(j,H,ie){if(j){if(j instanceof b.L)return j;if(j[k.b])return j[k.b]()}return j||H||ie?new b.L(j,H,ie):new b.L(ue.c)}(ie,K,q);if(Ee.add(Ie?Ie.call(Ee,this.source):this.source||x.v.useDeprecatedSynchronousErrorHandling&&!Ee.syncErrorThrowable?this._subscribe(Ee):this._trySubscribe(Ee)),x.v.useDeprecatedSynchronousErrorHandling&&Ee.syncErrorThrowable&&(Ee.syncErrorThrowable=!1,Ee.syncErrorThrown))throw Ee.syncErrorValue;return Ee}_trySubscribe(ie){try{return this._subscribe(ie)}catch(K){x.v.useDeprecatedSynchronousErrorHandling&&(ie.syncErrorThrown=!0,ie.syncErrorValue=K),function(j){for(;j;){const{closed:H,destination:ie,isStopped:K}=j;if(H||K)return!1;j=ie&&ie instanceof b.L?ie:null}return!0}(ie)?ie.error(K):console.warn(K)}}forEach(ie,K){return new(K=$(K))((q,Ie)=>{let Ee;Ee=this.subscribe(_e=>{try{ie(_e)}catch(Se){Ie(Se),Ee&&Ee.unsubscribe()}},Ie,q)})}_subscribe(ie){const{source:K}=this;return K&&K.subscribe(ie)}[Q.L](){return this}pipe(...ie){return 0===ie.length?this:function(j){return 0===j.length?ce.y:1===j.length?j[0]:function(ie){return j.reduce((K,q)=>q(K),ie)}}(ie)(this)}toPromise(ie){return new(ie=$(ie))((K,q)=>{let Ie;this.subscribe(Ee=>Ie=Ee,Ee=>q(Ee),()=>K(Ie))})}}return j.create=H=>new j(H),j})();function $(j){if(j||(j=x.v.Promise||Promise),!j)throw new Error("no Promise impl found");return j}},6490:(ke,de,P)=>{"use strict";P.d(de,{c:()=>k});var b=P(2494),W=P(4449);const k={closed:!0,next(ue){},error(ue){if(b.v.useDeprecatedSynchronousErrorHandling)throw ue;(0,W.z)(ue)},complete(){}}},9765:(ke,de,P)=>{"use strict";P.d(de,{Yc:()=>ce,xQ:()=>se});var b=P(7574),W=P(7393),k=P(5319),ue=P(7971),oe=P(8858),Q=P(9181);class ce extends W.L{constructor(N){super(N),this.destination=N}}let se=(()=>{class x extends b.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Q.b](){return new ce(this)}lift($){const j=new B(this,this);return j.operator=$,j}next($){if(this.closed)throw new ue.N;if(!this.isStopped){const{observers:j}=this,H=j.length,ie=j.slice();for(let K=0;K<H;K++)ie[K].next($)}}error($){if(this.closed)throw new ue.N;this.hasError=!0,this.thrownError=$,this.isStopped=!0;const{observers:j}=this,H=j.length,ie=j.slice();for(let K=0;K<H;K++)ie[K].error($);this.observers.length=0}complete(){if(this.closed)throw new ue.N;this.isStopped=!0;const{observers:$}=this,j=$.length,H=$.slice();for(let ie=0;ie<j;ie++)H[ie].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe($){if(this.closed)throw new ue.N;return super._trySubscribe($)}_subscribe($){if(this.closed)throw new ue.N;return this.hasError?($.error(this.thrownError),k.w.EMPTY):this.isStopped?($.complete(),k.w.EMPTY):(this.observers.push($),new oe.W(this,$))}asObservable(){const $=new b.y;return $.source=this,$}}return x.create=(N,$)=>new B(N,$),x})();class B extends se{constructor(N,$){super(),this.destination=N,this.source=$}next(N){const{destination:$}=this;$&&$.next&&$.next(N)}error(N){const{destination:$}=this;$&&$.error&&this.destination.error(N)}complete(){const{destination:N}=this;N&&N.complete&&this.destination.complete()}_subscribe(N){const{source:$}=this;return $?this.source.subscribe(N):k.w.EMPTY}}},8858:(ke,de,P)=>{"use strict";P.d(de,{W:()=>W});var b=P(5319);class W extends b.w{constructor(ue,oe){super(),this.subject=ue,this.subscriber=oe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ue=this.subject,oe=ue.observers;if(this.subject=null,!oe||0===oe.length||ue.isStopped||ue.closed)return;const Q=oe.indexOf(this.subscriber);-1!==Q&&oe.splice(Q,1)}}},7393:(ke,de,P)=>{"use strict";P.d(de,{L:()=>ce});var b=P(9105),W=P(6490),k=P(5319),ue=P(9181),oe=P(2494),Q=P(4449);class ce extends k.w{constructor(x,N,$){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=W.c;break;case 1:if(!x){this.destination=W.c;break}if("object"==typeof x){x instanceof ce?(this.syncErrorThrowable=x.syncErrorThrowable,this.destination=x,x.add(this)):(this.syncErrorThrowable=!0,this.destination=new se(this,x));break}default:this.syncErrorThrowable=!0,this.destination=new se(this,x,N,$)}}[ue.b](){return this}static create(x,N,$){const j=new ce(x,N,$);return j.syncErrorThrowable=!1,j}next(x){this.isStopped||this._next(x)}error(x){this.isStopped||(this.isStopped=!0,this._error(x))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(x){this.destination.next(x)}_error(x){this.destination.error(x),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:x}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=x,this}}class se extends ce{constructor(x,N,$,j){super(),this._parentSubscriber=x;let H,ie=this;(0,b.m)(N)?H=N:N&&(H=N.next,$=N.error,j=N.complete,N!==W.c&&(ie=Object.create(N),(0,b.m)(ie.unsubscribe)&&this.add(ie.unsubscribe.bind(ie)),ie.unsubscribe=this.unsubscribe.bind(this))),this._context=ie,this._next=H,this._error=$,this._complete=j}next(x){if(!this.isStopped&&this._next){const{_parentSubscriber:N}=this;oe.v.useDeprecatedSynchronousErrorHandling&&N.syncErrorThrowable?this.__tryOrSetError(N,this._next,x)&&this.unsubscribe():this.__tryOrUnsub(this._next,x)}}error(x){if(!this.isStopped){const{_parentSubscriber:N}=this,{useDeprecatedSynchronousErrorHandling:$}=oe.v;if(this._error)$&&N.syncErrorThrowable?(this.__tryOrSetError(N,this._error,x),this.unsubscribe()):(this.__tryOrUnsub(this._error,x),this.unsubscribe());else if(N.syncErrorThrowable)$?(N.syncErrorValue=x,N.syncErrorThrown=!0):(0,Q.z)(x),this.unsubscribe();else{if(this.unsubscribe(),$)throw x;(0,Q.z)(x)}}}complete(){if(!this.isStopped){const{_parentSubscriber:x}=this;if(this._complete){const N=()=>this._complete.call(this._context);oe.v.useDeprecatedSynchronousErrorHandling&&x.syncErrorThrowable?(this.__tryOrSetError(x,N),this.unsubscribe()):(this.__tryOrUnsub(N),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(x,N){try{x.call(this._context,N)}catch($){if(this.unsubscribe(),oe.v.useDeprecatedSynchronousErrorHandling)throw $;(0,Q.z)($)}}__tryOrSetError(x,N,$){if(!oe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{N.call(this._context,$)}catch(j){return oe.v.useDeprecatedSynchronousErrorHandling?(x.syncErrorValue=j,x.syncErrorThrown=!0,!0):((0,Q.z)(j),!0)}return!1}_unsubscribe(){const{_parentSubscriber:x}=this;this._context=null,this._parentSubscriber=null,x.unsubscribe()}}},5319:(ke,de,P)=>{"use strict";P.d(de,{w:()=>Q});var b=P(9796),W=P(1555),k=P(9105);const oe=(()=>{function se(B){return Error.call(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((x,N)=>`${N+1}) ${x.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B,this}return se.prototype=Object.create(Error.prototype),se})();class Q{constructor(B){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,B&&(this._ctorUnsubscribe=!0,this._unsubscribe=B)}unsubscribe(){let B;if(this.closed)return;let{_parentOrParents:x,_ctorUnsubscribe:N,_unsubscribe:$,_subscriptions:j}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,x instanceof Q)x.remove(this);else if(null!==x)for(let H=0;H<x.length;++H)x[H].remove(this);if((0,k.m)($)){N&&(this._unsubscribe=void 0);try{$.call(this)}catch(H){B=H instanceof oe?ce(H.errors):[H]}}if((0,b.k)(j)){let H=-1,ie=j.length;for(;++H<ie;){const K=j[H];if((0,W.K)(K))try{K.unsubscribe()}catch(q){B=B||[],q instanceof oe?B=B.concat(ce(q.errors)):B.push(q)}}}if(B)throw new oe(B)}add(B){let x=B;if(!B)return Q.EMPTY;switch(typeof B){case"function":x=new Q(B);case"object":if(x===this||x.closed||"function"!=typeof x.unsubscribe)return x;if(this.closed)return x.unsubscribe(),x;if(!(x instanceof Q)){const j=x;x=new Q,x._subscriptions=[j]}break;default:throw new Error("unrecognized teardown "+B+" added to Subscription.")}let{_parentOrParents:N}=x;if(null===N)x._parentOrParents=this;else if(N instanceof Q){if(N===this)return x;x._parentOrParents=[N,this]}else{if(-1!==N.indexOf(this))return x;N.push(this)}const $=this._subscriptions;return null===$?this._subscriptions=[x]:$.push(x),x}remove(B){const x=this._subscriptions;if(x){const N=x.indexOf(B);-1!==N&&x.splice(N,1)}}}var se;function ce(se){return se.reduce((B,x)=>B.concat(x instanceof oe?x.errors:x),[])}Q.EMPTY=((se=new Q).closed=!0,se)},2494:(ke,de,P)=>{"use strict";P.d(de,{v:()=>W});let b=!1;const W={Promise:void 0,set useDeprecatedSynchronousErrorHandling(k){if(k){const ue=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ue.stack)}else b&&console.log("RxJS: Back to a better error behavior. Thank you. <3");b=k},get useDeprecatedSynchronousErrorHandling(){return b}}},5345:(ke,de,P)=>{"use strict";P.d(de,{IY:()=>ue,Ds:()=>Q,ft:()=>se});var b=P(7393),W=P(7574),k=P(7444);class ue extends b.L{constructor(x){super(),this.parent=x}_next(x){this.parent.notifyNext(x)}_error(x){this.parent.notifyError(x),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Q extends b.L{notifyNext(x){this.destination.next(x)}notifyError(x){this.destination.error(x)}notifyComplete(){this.destination.complete()}}function se(B,x){if(x.closed)return;if(B instanceof W.y)return B.subscribe(x);let N;try{N=(0,k.s)(B)(x)}catch($){x.error($)}return N}},2441:(ke,de,P)=>{"use strict";P.d(de,{c:()=>oe,N:()=>Q});var b=P(9765),W=P(7574),k=P(5319),ue=P(1307);class oe extends W.y{constructor(N,$){super(),this.source=N,this.subjectFactory=$,this._refCount=0,this._isComplete=!1}_subscribe(N){return this.getSubject().subscribe(N)}getSubject(){const N=this._subject;return(!N||N.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let N=this._connection;return N||(this._isComplete=!1,N=this._connection=new k.w,N.add(this.source.subscribe(new ce(this.getSubject(),this))),N.closed&&(this._connection=null,N=k.w.EMPTY)),N}refCount(){return(0,ue.x)()(this)}}const Q=(()=>{const x=oe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:x._subscribe},_isComplete:{value:x._isComplete,writable:!0},getSubject:{value:x.getSubject},connect:{value:x.connect},refCount:{value:x.refCount}}})();class ce extends b.Yc{constructor(N,$){super(N),this.connectable=$}_error(N){this._unsubscribe(),super._error(N)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const N=this.connectable;if(N){this.connectable=null;const $=N._connection;N._refCount=0,N._subject=null,N._connection=null,$&&$.unsubscribe()}}}},9193:(ke,de,P)=>{"use strict";P.d(de,{E:()=>W,c:()=>k});var b=P(7574);const W=new b.y(oe=>oe.complete());function k(oe){return oe?function(oe){return new b.y(Q=>oe.schedule(()=>Q.complete()))}(oe):W}},4402:(ke,de,P)=>{"use strict";P.d(de,{D:()=>ie});var b=P(7574),W=P(7444),k=P(5319),ue=P(6554),ce=P(4087),se=P(377),N=P(4072),$=P(9489);function ie(K,q){return q?function(K,q){if(null!=K){if(function(K){return K&&"function"==typeof K[ue.L]}(K))return function(K,q){return new b.y(Ie=>{const Ee=new k.w;return Ee.add(q.schedule(()=>{const _e=K[ue.L]();Ee.add(_e.subscribe({next(Se){Ee.add(q.schedule(()=>Ie.next(Se)))},error(Se){Ee.add(q.schedule(()=>Ie.error(Se)))},complete(){Ee.add(q.schedule(()=>Ie.complete()))}}))})),Ee})}(K,q);if((0,N.t)(K))return function(K,q){return new b.y(Ie=>{const Ee=new k.w;return Ee.add(q.schedule(()=>K.then(_e=>{Ee.add(q.schedule(()=>{Ie.next(_e),Ee.add(q.schedule(()=>Ie.complete()))}))},_e=>{Ee.add(q.schedule(()=>Ie.error(_e)))}))),Ee})}(K,q);if((0,$.z)(K))return(0,ce.r)(K,q);if(function(K){return K&&"function"==typeof K[se.hZ]}(K)||"string"==typeof K)return function(K,q){if(!K)throw new Error("Iterable cannot be null");return new b.y(Ie=>{const Ee=new k.w;let _e;return Ee.add(()=>{_e&&"function"==typeof _e.return&&_e.return()}),Ee.add(q.schedule(()=>{_e=K[se.hZ](),Ee.add(q.schedule(function(){if(Ie.closed)return;let Se,Ae;try{const Ce=_e.next();Se=Ce.value,Ae=Ce.done}catch(Ce){return void Ie.error(Ce)}Ae?Ie.complete():(Ie.next(Se),this.schedule())}))})),Ee})}(K,q)}throw new TypeError((null!==K&&typeof K||K)+" is not observable")}(K,q):K instanceof b.y?K:new b.y((0,W.s)(K))}},6693:(ke,de,P)=>{"use strict";P.d(de,{n:()=>ue});var b=P(7574),W=P(5015),k=P(4087);function ue(oe,Q){return Q?(0,k.r)(oe,Q):new b.y((0,W.V)(oe))}},6682:(ke,de,P)=>{"use strict";P.d(de,{T:()=>oe});var b=P(7574),W=P(4869),k=P(3282),ue=P(6693);function oe(...Q){let ce=Number.POSITIVE_INFINITY,se=null,B=Q[Q.length-1];return(0,W.K)(B)?(se=Q.pop(),Q.length>1&&"number"==typeof Q[Q.length-1]&&(ce=Q.pop())):"number"==typeof B&&(ce=Q.pop()),null===se&&1===Q.length&&Q[0]instanceof b.y?Q[0]:(0,k.J)(ce)((0,ue.n)(Q,se))}},5917:(ke,de,P)=>{"use strict";P.d(de,{of:()=>ue});var b=P(4869),W=P(6693),k=P(4087);function ue(...oe){let Q=oe[oe.length-1];return(0,b.K)(Q)?(oe.pop(),(0,k.r)(oe,Q)):(0,W.n)(oe)}},8002:(ke,de,P)=>{"use strict";P.d(de,{U:()=>W});var b=P(7393);function W(oe,Q){return function(se){if("function"!=typeof oe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return se.lift(new k(oe,Q))}}class k{constructor(Q,ce){this.project=Q,this.thisArg=ce}call(Q,ce){return ce.subscribe(new ue(Q,this.project,this.thisArg))}}class ue extends b.L{constructor(Q,ce,se){super(Q),this.project=ce,this.count=0,this.thisArg=se||this}_next(Q){let ce;try{ce=this.project.call(this.thisArg,Q,this.count++)}catch(se){return void this.destination.error(se)}this.destination.next(ce)}}},3282:(ke,de,P)=>{"use strict";P.d(de,{J:()=>k});var b=P(9773),W=P(4487);function k(ue=Number.POSITIVE_INFINITY){return(0,b.zg)(W.y,ue)}},9773:(ke,de,P)=>{"use strict";P.d(de,{zg:()=>ue});var b=P(8002),W=P(4402),k=P(5345);function ue(se,B,x=Number.POSITIVE_INFINITY){return"function"==typeof B?N=>N.pipe(ue(($,j)=>(0,W.D)(se($,j)).pipe((0,b.U)((H,ie)=>B($,H,j,ie))),x)):("number"==typeof B&&(x=B),N=>N.lift(new oe(se,x)))}class oe{constructor(B,x=Number.POSITIVE_INFINITY){this.project=B,this.concurrent=x}call(B,x){return x.subscribe(new Q(B,this.project,this.concurrent))}}class Q extends k.Ds{constructor(B,x,N=Number.POSITIVE_INFINITY){super(B),this.project=x,this.concurrent=N,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(B){this.active<this.concurrent?this._tryNext(B):this.buffer.push(B)}_tryNext(B){let x;const N=this.index++;try{x=this.project(B,N)}catch($){return void this.destination.error($)}this.active++,this._innerSub(x)}_innerSub(B){const x=new k.IY(this),N=this.destination;N.add(x);const $=(0,k.ft)(B,x);$!==x&&N.add($)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(B){this.destination.next(B)}notifyComplete(){const B=this.buffer;this.active--,B.length>0?this._next(B.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(ke,de,P)=>{"use strict";P.d(de,{ht:()=>N,QV:()=>B});var b=P(7393),W=P(9193),k=P(5917),ue=P(7574);class se{constructor(H,ie,K){this.kind=H,this.value=ie,this.error=K,this.hasValue="N"===H}observe(H){switch(this.kind){case"N":return H.next&&H.next(this.value);case"E":return H.error&&H.error(this.error);case"C":return H.complete&&H.complete()}}do(H,ie,K){switch(this.kind){case"N":return H&&H(this.value);case"E":return ie&&ie(this.error);case"C":return K&&K()}}accept(H,ie,K){return H&&"function"==typeof H.next?this.observe(H):this.do(H,ie,K)}toObservable(){switch(this.kind){case"N":return(0,k.of)(this.value);case"E":return j=this.error,new ue.y(ie=>ie.error(j));case"C":return(0,W.c)()}var j;throw new Error("unexpected notification kind value")}static createNext(H){return void 0!==H?new se("N",H):se.undefinedValueNotification}static createError(H){return new se("E",void 0,H)}static createComplete(){return se.completeNotification}}function B(j,H=0){return function(K){return K.lift(new x(j,H))}}se.completeNotification=new se("C"),se.undefinedValueNotification=new se("N",void 0);class x{constructor(H,ie=0){this.scheduler=H,this.delay=ie}call(H,ie){return ie.subscribe(new N(H,this.scheduler,this.delay))}}class N extends b.L{constructor(H,ie,K=0){super(H),this.scheduler=ie,this.delay=K}static dispatch(H){const{notification:ie,destination:K}=H;ie.observe(K),this.unsubscribe()}scheduleMessage(H){this.destination.add(this.scheduler.schedule(N.dispatch,this.delay,new $(H,this.destination)))}_next(H){this.scheduleMessage(se.createNext(H))}_error(H){this.scheduleMessage(se.createError(H)),this.unsubscribe()}_complete(){this.scheduleMessage(se.createComplete()),this.unsubscribe()}}class ${constructor(H,ie){this.notification=H,this.destination=ie}}},1307:(ke,de,P)=>{"use strict";P.d(de,{x:()=>W});var b=P(7393);function W(){return function(Q){return Q.lift(new k(Q))}}class k{constructor(Q){this.connectable=Q}call(Q,ce){const{connectable:se}=this;se._refCount++;const B=new ue(Q,se),x=ce.subscribe(B);return B.closed||(B.connection=se.connect()),x}}class ue extends b.L{constructor(Q,ce){super(Q),this.connectable=ce}_unsubscribe(){const{connectable:Q}=this;if(!Q)return void(this.connection=null);this.connectable=null;const ce=Q._refCount;if(ce<=0)return void(this.connection=null);if(Q._refCount=ce-1,ce>1)return void(this.connection=null);const{connection:se}=this,B=Q._connection;this.connection=null,B&&(!se||B===se)&&B.unsubscribe()}}},3101:(ke,de,P)=>{"use strict";P.d(de,{R:()=>q});var b=P(7574);let W=1;const k=Promise.resolve(),ue={};function oe(Ee){return Ee in ue&&(delete ue[Ee],!0)}const Q={setImmediate(Ee){const _e=W++;return ue[_e]=!0,k.then(()=>oe(_e)&&Ee()),_e},clearImmediate(Ee){oe(Ee)}};var se=P(6465),x=P(6102);const j=new class extends x.v{flush(_e){this.active=!0,this.scheduled=void 0;const{actions:Se}=this;let Ae,Ce=-1,st=Se.length;_e=_e||Se.shift();do{if(Ae=_e.execute(_e.state,_e.delay))break}while(++Ce<st&&(_e=Se.shift()));if(this.active=!1,Ae){for(;++Ce<st&&(_e=Se.shift());)_e.unsubscribe();throw Ae}}}(class extends se.o{constructor(_e,Se){super(_e,Se),this.scheduler=_e,this.work=Se}requestAsyncId(_e,Se,Ae=0){return null!==Ae&&Ae>0?super.requestAsyncId(_e,Se,Ae):(_e.actions.push(this),_e.scheduled||(_e.scheduled=Q.setImmediate(_e.flush.bind(_e,null))))}recycleAsyncId(_e,Se,Ae=0){if(null!==Ae&&Ae>0||null===Ae&&this.delay>0)return super.recycleAsyncId(_e,Se,Ae);0===_e.actions.length&&(Q.clearImmediate(Se),_e.scheduled=void 0)}});var H=P(9796);class K extends b.y{constructor(_e,Se=0,Ae=j){var Ee;super(),this.source=_e,this.delayTime=Se,this.scheduler=Ae,(!(!(0,H.k)(Ee=Se)&&Ee-parseFloat(Ee)+1>=0)||Se<0)&&(this.delayTime=0),(!Ae||"function"!=typeof Ae.schedule)&&(this.scheduler=j)}static create(_e,Se=0,Ae=j){return new K(_e,Se,Ae)}static dispatch(_e){const{source:Se,subscriber:Ae}=_e;return this.add(Se.subscribe(Ae))}_subscribe(_e){return this.scheduler.schedule(K.dispatch,this.delayTime,{source:this.source,subscriber:_e})}}function q(Ee,_e=0){return function(Ae){return Ae.lift(new Ie(Ee,_e))}}class Ie{constructor(_e,Se){this.scheduler=_e,this.delay=Se}call(_e,Se){return new K(Se,this.delay,this.scheduler).subscribe(_e)}}},3342:(ke,de,P)=>{"use strict";P.d(de,{b:()=>ue});var b=P(7393);function W(){}var k=P(9105);function ue(ce,se,B){return function(N){return N.lift(new oe(ce,se,B))}}class oe{constructor(se,B,x){this.nextOrObserver=se,this.error=B,this.complete=x}call(se,B){return B.subscribe(new Q(se,this.nextOrObserver,this.error,this.complete))}}class Q extends b.L{constructor(se,B,x,N){super(se),this._tapNext=W,this._tapError=W,this._tapComplete=W,this._tapError=x||W,this._tapComplete=N||W,(0,k.m)(B)?(this._context=this,this._tapNext=B):B&&(this._context=B,this._tapNext=B.next||W,this._tapError=B.error||W,this._tapComplete=B.complete||W)}_next(se){try{this._tapNext.call(this._context,se)}catch(B){return void this.destination.error(B)}this.destination.next(se)}_error(se){try{this._tapError.call(this._context,se)}catch(B){return void this.destination.error(B)}this.destination.error(se)}_complete(){try{this._tapComplete.call(this._context)}catch(se){return void this.destination.error(se)}return this.destination.complete()}}},4087:(ke,de,P)=>{"use strict";P.d(de,{r:()=>k});var b=P(7574),W=P(5319);function k(ue,oe){return new b.y(Q=>{const ce=new W.w;let se=0;return ce.add(oe.schedule(function(){se!==ue.length?(Q.next(ue[se++]),Q.closed||ce.add(this.schedule())):Q.complete()})),ce})}},6465:(ke,de,P)=>{"use strict";P.d(de,{o:()=>k});var b=P(5319);class W extends b.w{constructor(oe,Q){super()}schedule(oe,Q=0){return this}}class k extends W{constructor(oe,Q){super(oe,Q),this.scheduler=oe,this.work=Q,this.pending=!1}schedule(oe,Q=0){if(this.closed)return this;this.state=oe;const ce=this.id,se=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(se,ce,Q)),this.pending=!0,this.delay=Q,this.id=this.id||this.requestAsyncId(se,this.id,Q),this}requestAsyncId(oe,Q,ce=0){return setInterval(oe.flush.bind(oe,this),ce)}recycleAsyncId(oe,Q,ce=0){if(null!==ce&&this.delay===ce&&!1===this.pending)return Q;clearInterval(Q)}execute(oe,Q){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(oe,Q);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,Q){let se,ce=!1;try{this.work(oe)}catch(B){ce=!0,se=!!B&&B||new Error(B)}if(ce)return this.unsubscribe(),se}_unsubscribe(){const oe=this.id,Q=this.scheduler,ce=Q.actions,se=ce.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==se&&ce.splice(se,1),null!=oe&&(this.id=this.recycleAsyncId(Q,oe,null)),this.delay=null}}},6102:(ke,de,P)=>{"use strict";P.d(de,{v:()=>W});let b=(()=>{class k{constructor(oe,Q=k.now){this.SchedulerAction=oe,this.now=Q}schedule(oe,Q=0,ce){return new this.SchedulerAction(this,oe).schedule(ce,Q)}}return k.now=()=>Date.now(),k})();class W extends b{constructor(ue,oe=b.now){super(ue,()=>W.delegate&&W.delegate!==this?W.delegate.now():oe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ue,oe=0,Q){return W.delegate&&W.delegate!==this?W.delegate.schedule(ue,oe,Q):super.schedule(ue,oe,Q)}flush(ue){const{actions:oe}=this;if(this.active)return void oe.push(ue);let Q;this.active=!0;do{if(Q=ue.execute(ue.state,ue.delay))break}while(ue=oe.shift());if(this.active=!1,Q){for(;ue=oe.shift();)ue.unsubscribe();throw Q}}}},3637:(ke,de,P)=>{"use strict";P.d(de,{z:()=>k,P:()=>ue});var b=P(6465);const k=new(P(6102).v)(b.o),ue=k},7771:(ke,de,P)=>{"use strict";P.d(de,{c:()=>Q,N:()=>oe});var b=P(6465),k=P(6102);const oe=new class extends k.v{}(class extends b.o{constructor(se,B){super(se,B),this.scheduler=se,this.work=B}schedule(se,B=0){return B>0?super.schedule(se,B):(this.delay=B,this.state=se,this.scheduler.flush(this),this)}execute(se,B){return B>0||this.closed?super.execute(se,B):this._execute(se,B)}requestAsyncId(se,B,x=0){return null!==x&&x>0||null===x&&this.delay>0?super.requestAsyncId(se,B,x):se.flush(this)}}),Q=oe},377:(ke,de,P)=>{"use strict";P.d(de,{hZ:()=>W});const W="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(ke,de,P)=>{"use strict";P.d(de,{L:()=>b});const b="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(ke,de,P)=>{"use strict";P.d(de,{b:()=>b});const b="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(ke,de,P)=>{"use strict";P.d(de,{N:()=>W});const W=(()=>{function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return k.prototype=Object.create(Error.prototype),k})()},4449:(ke,de,P)=>{"use strict";function b(W){setTimeout(()=>{throw W},0)}P.d(de,{z:()=>b})},4487:(ke,de,P)=>{"use strict";function b(W){return W}P.d(de,{y:()=>b})},9796:(ke,de,P)=>{"use strict";P.d(de,{k:()=>b});const b=Array.isArray||(W=>W&&"number"==typeof W.length)},9489:(ke,de,P)=>{"use strict";P.d(de,{z:()=>b});const b=W=>W&&"number"==typeof W.length&&"function"!=typeof W},9105:(ke,de,P)=>{"use strict";function b(W){return"function"==typeof W}P.d(de,{m:()=>b})},1555:(ke,de,P)=>{"use strict";function b(W){return null!==W&&"object"==typeof W}P.d(de,{K:()=>b})},4072:(ke,de,P)=>{"use strict";function b(W){return!!W&&"function"!=typeof W.subscribe&&"function"==typeof W.then}P.d(de,{t:()=>b})},4869:(ke,de,P)=>{"use strict";function b(W){return W&&"function"==typeof W.schedule}P.d(de,{K:()=>b})},7444:(ke,de,P)=>{"use strict";P.d(de,{s:()=>N});var b=P(5015),W=P(4449),ue=P(377),Q=P(6554),se=P(9489),B=P(4072),x=P(1555);const N=$=>{if($&&"function"==typeof $[Q.L])return($=>j=>{const H=$[Q.L]();if("function"!=typeof H.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return H.subscribe(j)})($);if((0,se.z)($))return(0,b.V)($);if((0,B.t)($))return($=>j=>($.then(H=>{j.closed||(j.next(H),j.complete())},H=>j.error(H)).then(null,W.z),j))($);if($&&"function"==typeof $[ue.hZ])return($=>j=>{const H=$[ue.hZ]();for(;;){let ie;try{ie=H.next()}catch(K){return j.error(K),j}if(ie.done){j.complete();break}if(j.next(ie.value),j.closed)break}return"function"==typeof H.return&&j.add(()=>{H.return&&H.return()}),j})($);{const H=`You provided ${(0,x.K)($)?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(H)}}},5015:(ke,de,P)=>{"use strict";P.d(de,{V:()=>b});const b=W=>k=>{for(let ue=0,oe=W.length;ue<oe&&!k.closed;ue++)k.next(W[ue]);k.complete()}},8497:(ke,de,P)=>{"use strict";var b=P(3018);let W=null;function k(){return W}const ce=new b.OlP("DocumentToken");let se=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,b.Yz7)({factory:B,token:i,providedIn:"platform"}),i})();function B(){return(0,b.LFG)(N)}const x=new b.OlP("Location Initialized");let N=(()=>{class i extends se{constructor(r){super(),this._doc=r,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(r){const a=k().getGlobalEventTarget(this._doc,"window");return a.addEventListener("popstate",r,!1),()=>a.removeEventListener("popstate",r)}onHashChange(r){const a=k().getGlobalEventTarget(this._doc,"window");return a.addEventListener("hashchange",r,!1),()=>a.removeEventListener("hashchange",r)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(r){this.location.pathname=r}pushState(r,a,c){$()?this._history.pushState(r,a,c):this.location.hash=c}replaceState(r,a,c){$()?this._history.replaceState(r,a,c):this.location.hash=c}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(ce))},i.\u0275prov=(0,b.Yz7)({factory:j,token:i,providedIn:"platform"}),i})();function $(){return!!window.history.pushState}function j(){return new N((0,b.LFG)(ce))}function H(i,n){if(0==i.length)return n;if(0==n.length)return i;let r=0;return i.endsWith("/")&&r++,n.startsWith("/")&&r++,2==r?i+n.substring(1):1==r?i+n:i+"/"+n}function ie(i){const n=i.match(/#|\?|$/),r=n&&n.index||i.length;return i.slice(0,r-("/"===i[r-1]?1:0))+i.slice(r)}function K(i){return i&&"?"!==i[0]?"?"+i:i}let q=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,b.Yz7)({factory:Ie,token:i,providedIn:"root"}),i})();function Ie(i){const n=(0,b.LFG)(ce).location;return new _e((0,b.LFG)(se),n&&n.origin||"")}const Ee=new b.OlP("appBaseHref");let _e=(()=>{class i extends q{constructor(r,a){if(super(),this._platformLocation=r,this._removeListenerFns=[],null==a&&(a=this._platformLocation.getBaseHrefFromDOM()),null==a)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=a}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return H(this._baseHref,r)}path(r=!1){const a=this._platformLocation.pathname+K(this._platformLocation.search),c=this._platformLocation.hash;return c&&r?`${a}${c}`:a}pushState(r,a,c,h){const g=this.prepareExternalUrl(c+K(h));this._platformLocation.pushState(r,a,g)}replaceState(r,a,c,h){const g=this.prepareExternalUrl(c+K(h));this._platformLocation.replaceState(r,a,g)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var a,c;null===(c=(a=this._platformLocation).historyGo)||void 0===c||c.call(a,r)}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(se),b.LFG(Ee,8))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})(),Se=(()=>{class i extends q{constructor(r,a){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=a&&(this._baseHref=a)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let a=this._platformLocation.hash;return null==a&&(a="#"),a.length>0?a.substring(1):a}prepareExternalUrl(r){const a=H(this._baseHref,r);return a.length>0?"#"+a:a}pushState(r,a,c,h){let g=this.prepareExternalUrl(c+K(h));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.pushState(r,a,g)}replaceState(r,a,c,h){let g=this.prepareExternalUrl(c+K(h));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.replaceState(r,a,g)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var a,c;null===(c=(a=this._platformLocation).historyGo)||void 0===c||c.call(a,r)}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(se),b.LFG(Ee,8))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})(),Ae=(()=>{class i{constructor(r,a){this._subject=new b.vpe,this._urlChangeListeners=[],this._platformStrategy=r;const c=this._platformStrategy.getBaseHref();this._platformLocation=a,this._baseHref=ie(gt(c)),this._platformStrategy.onPopState(h=>{this._subject.emit({url:this.path(!0),pop:!0,state:h.state,type:h.type})})}path(r=!1){return this.normalize(this._platformStrategy.path(r))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(r,a=""){return this.path()==this.normalize(r+K(a))}normalize(r){return i.stripTrailingSlash(function(i,n){return i&&n.startsWith(i)?n.substring(i.length):n}(this._baseHref,gt(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}go(r,a="",c=null){this._platformStrategy.pushState(c,"",r,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+K(a)),c)}replaceState(r,a="",c=null){this._platformStrategy.replaceState(c,"",r,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+K(a)),c)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(r=0){var a,c;null===(c=(a=this._platformStrategy).historyGo)||void 0===c||c.call(a,r)}onUrlChange(r){this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(a=>{this._notifyUrlChangeListeners(a.url,a.state)}))}_notifyUrlChangeListeners(r="",a){this._urlChangeListeners.forEach(c=>c(r,a))}subscribe(r,a,c){return this._subject.subscribe({next:r,error:a,complete:c})}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(q),b.LFG(se))},i.normalizeQueryParams=K,i.joinWithSlash=H,i.stripTrailingSlash=ie,i.\u0275prov=(0,b.Yz7)({factory:Ce,token:i,providedIn:"root"}),i})();function Ce(){return new Ae((0,b.LFG)(q),(0,b.LFG)(se))}function gt(i){return i.replace(/\/index.html$/,"")}var J=(()=>((J=J||{})[J.Zero=0]="Zero",J[J.One=1]="One",J[J.Two=2]="Two",J[J.Few=3]="Few",J[J.Many=4]="Many",J[J.Other=5]="Other",J))();const ar=b.kL8;class Yn{}let so=(()=>{class i extends Yn{constructor(r){super(),this.locale=r}getPluralCategory(r,a){switch(ar(a||this.locale)(r)){case J.Zero:return"zero";case J.One:return"one";case J.Two:return"two";case J.Few:return"few";case J.Many:return"many";default:return"other"}}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(b.soG))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})(),t0=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({providers:[{provide:Yn,useClass:so}]}),i})();function lu(i){return"server"===i}let du=(()=>{class i{}return i.\u0275prov=(0,b.Yz7)({token:i,providedIn:"root",factory:()=>new Xc((0,b.LFG)(ce),window)}),i})();class Xc{constructor(n,r){this.document=n,this.window=r,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const r=function(i,n){const r=i.getElementById(n)||i.getElementsByName(n)[0];if(r)return r;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const a=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let c=a.currentNode;for(;c;){const h=c.shadowRoot;if(h){const g=h.getElementById(n)||h.querySelector(`[name="${n}"]`);if(g)return g}c=a.nextNode()}}return null}(this.document,n);r&&(this.scrollToElement(r),this.attemptFocus(r))}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=n)}}scrollToElement(n){const r=n.getBoundingClientRect(),a=r.left+this.window.pageXOffset,c=r.top+this.window.pageYOffset,h=this.offset();this.window.scrollTo(a-h[0],c-h[1])}attemptFocus(n){return n.focus(),this.document.activeElement===n}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=hu(this.window.history)||hu(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function hu(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class co extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var i;i=new co,W||(W=i)}onAndCancel(n,r,a){return n.addEventListener(r,a,!1),()=>{n.removeEventListener(r,a,!1)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,r){return(r=r||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return"window"===r?window:"document"===r?n:"body"===r?n.body:null}getBaseHref(n){const r=(As=As||document.querySelector("base"),As?As.getAttribute("href"):null);return null==r?null:function(i){nl=nl||document.createElement("a"),nl.setAttribute("href",i);const n=nl.pathname;return"/"===n.charAt(0)?n:`/${n}`}(r)}resetBaseElement(){As=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function(i,n){n=encodeURIComponent(n);for(const r of i.split(";")){const a=r.indexOf("="),[c,h]=-1==a?[r,""]:[r.slice(0,a),r.slice(a+1)];if(c.trim()===n)return decodeURIComponent(h)}return null}(document.cookie,n)}}let nl,As=null;const Op=new b.OlP("TRANSITION_ID"),il=[{provide:b.ip1,useFactory:function(i,n,r){return()=>{r.get(b.CZH).donePromise.then(()=>{const a=k(),c=n.querySelectorAll(`style[ng-transition="${i}"]`);for(let h=0;h<c.length;h++)a.remove(c[h])})}},deps:[Op,ce,b.zs3],multi:!0}];class Vt{static init(){(0,b.VLi)(new Vt)}addToWindow(n){b.dqk.getAngularTestability=(a,c=!0)=>{const h=n.findTestabilityInTree(a,c);if(null==h)throw new Error("Could not find testability for element.");return h},b.dqk.getAllAngularTestabilities=()=>n.getAllTestabilities(),b.dqk.getAllAngularRootElements=()=>n.getAllRootElements(),b.dqk.frameworkStabilizers||(b.dqk.frameworkStabilizers=[]),b.dqk.frameworkStabilizers.push(a=>{const c=b.dqk.getAllAngularTestabilities();let h=c.length,g=!1;const v=function(I){g=g||I,h--,0==h&&a(g)};c.forEach(function(I){I.whenStable(v)})})}findTestabilityInTree(n,r,a){if(null==r)return null;const c=n.getTestability(r);return null!=c?c:a?k().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}let Mp=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();const lo=new b.OlP("EventManagerPlugins");let vu=(()=>{class i{constructor(r,a){this._zone=a,this._eventNameToPlugin=new Map,r.forEach(c=>c.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,a,c){return this._findPluginFor(a).addEventListener(r,a,c)}addGlobalEventListener(r,a,c){return this._findPluginFor(a).addGlobalEventListener(r,a,c)}getZone(){return this._zone}_findPluginFor(r){const a=this._eventNameToPlugin.get(r);if(a)return a;const c=this._plugins;for(let h=0;h<c.length;h++){const g=c[h];if(g.supports(r))return this._eventNameToPlugin.set(r,g),g}throw new Error(`No event manager plugin found for event ${r}`)}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(lo),b.LFG(b.R0b))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();class Eu{constructor(n){this._doc=n}addGlobalEventListener(n,r,a){const c=k().getGlobalEventTarget(this._doc,n);if(!c)throw new Error(`Unsupported event target ${c} for event ${r}`);return this.addEventListener(c,r,a)}}let gh=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(r){const a=new Set;r.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),a.add(c))}),this.onStylesAdded(a)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})(),ho=(()=>{class i extends gh{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,a,c){r.forEach(h=>{const g=this._doc.createElement("style");g.textContent=h,c.push(a.appendChild(g))})}addHost(r){const a=[];this._addStylesToHost(this._stylesSet,r,a),this._hostNodes.set(r,a)}removeHost(r){const a=this._hostNodes.get(r);a&&a.forEach(Fp),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((a,c)=>{this._addStylesToHost(r,c,a)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(Fp))}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(ce))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();function Fp(i){k().remove(i)}const fe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},pt=/%COMP%/g;function Ns(i,n,r){for(let a=0;a<n.length;a++){let c=n[a];Array.isArray(c)?Ns(i,c,r):(c=c.replace(pt,i),r.push(c))}return r}function My(i){return n=>{if("__ngUnwrap__"===n)return i;!1===i(n)&&(n.preventDefault(),n.returnValue=!1)}}let oa=(()=>{class i{constructor(r,a,c){this.eventManager=r,this.sharedStylesHost=a,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new Ps(r)}createRenderer(r,a){if(!r||!a)return this.defaultRenderer;switch(a.encapsulation){case b.ifc.Emulated:{let c=this.rendererByCompId.get(a.id);return c||(c=new Os(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,c)),c.applyToHost(r),c}case 1:case b.ifc.ShadowDom:return new es(this.eventManager,this.sharedStylesHost,r,a);default:if(!this.rendererByCompId.has(a.id)){const c=Ns(a.id,a.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(vu),b.LFG(ho),b.LFG(b.AFp))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();class Ps{constructor(n){this.eventManager=n,this.data=Object.create(null)}destroy(){}createElement(n,r){return r?document.createElementNS(fe[r]||r,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,r){n.appendChild(r)}insertBefore(n,r,a){n&&n.insertBefore(r,a)}removeChild(n,r){n&&n.removeChild(r)}selectRootElement(n,r){let a="string"==typeof n?document.querySelector(n):n;if(!a)throw new Error(`The selector "${n}" did not match any elements`);return r||(a.textContent=""),a}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,a,c){if(c){r=c+":"+r;const h=fe[c];h?n.setAttributeNS(h,r,a):n.setAttribute(r,a)}else n.setAttribute(r,a)}removeAttribute(n,r,a){if(a){const c=fe[a];c?n.removeAttributeNS(c,r):n.removeAttribute(`${a}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,a,c){c&(b.JOm.DashCase|b.JOm.Important)?n.style.setProperty(r,a,c&b.JOm.Important?"important":""):n.style[r]=a}removeStyle(n,r,a){a&b.JOm.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,a){n[r]=a}setValue(n,r){n.nodeValue=r}listen(n,r,a){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,My(a)):this.eventManager.addEventListener(n,r,My(a))}}class Os extends Ps{constructor(n,r,a,c){super(n),this.component=a;const h=Ns(c+"-"+a.id,a.styles,[]);r.addStyles(h),this.contentAttr="_ngcontent-%COMP%".replace(pt,c+"-"+a.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(pt,i)}(c+"-"+a.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,r){const a=super.createElement(n,r);return super.setAttribute(a,this.contentAttr,""),a}}class es extends Ps{constructor(n,r,a,c){super(n),this.sharedStylesHost=r,this.hostEl=a,this.shadowRoot=a.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=Ns(c.id,c.styles,[]);for(let g=0;g<h.length;g++){const v=document.createElement("style");v.textContent=h[g],this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,a){return super.insertBefore(this.nodeOrShadowRoot(n),r,a)}removeChild(n,r){return super.removeChild(this.nodeOrShadowRoot(n),r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let _h=(()=>{class i extends Eu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,a,c){return r.addEventListener(a,c,!1),()=>this.removeEventListener(r,a,c)}removeEventListener(r,a,c){return r.removeEventListener(a,c)}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(ce))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();const bu=["alt","control","meta","shift"],$p={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hp={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},lr={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let po=(()=>{class i extends Eu{constructor(r){super(r)}supports(r){return null!=i.parseEventName(r)}addEventListener(r,a,c){const h=i.parseEventName(a),g=i.eventCallback(h.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(r,h.domEventName,g))}static parseEventName(r){const a=r.toLowerCase().split("."),c=a.shift();if(0===a.length||"keydown"!==c&&"keyup"!==c)return null;const h=i._normalizeKey(a.pop());let g="";if(bu.forEach(I=>{const C=a.indexOf(I);C>-1&&(a.splice(C,1),g+=I+".")}),g+=h,0!=a.length||0===h.length)return null;const v={};return v.domEventName=c,v.fullKey=g,v}static getEventFullKey(r){let a="",c=function(i){let n=i.key;if(null==n){if(n=i.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===i.location&&Hp.hasOwnProperty(n)&&(n=Hp[n]))}return $p[n]||n}(r);return c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),bu.forEach(h=>{h!=c&&lr[h](r)&&(a+=h+".")}),a+=c,a}static eventCallback(r,a,c){return h=>{i.getEventFullKey(h)===r&&c.runGuarded(()=>a(h))}}static _normalizeKey(r){switch(r){case"esc":return"escape";default:return r}}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(ce))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();const By=(0,b.eFA)(b._c5,"browser",[{provide:b.Lbi,useValue:"browser"},{provide:b.g9A,useValue:function(){co.makeCurrent(),Vt.init()},multi:!0},{provide:ce,useFactory:function(){return(0,b.RDi)(document),document},deps:[]}]),Ms=[[],{provide:b.zSh,useValue:"root"},{provide:b.qLn,useFactory:function(){return new b.qLn},deps:[]},{provide:lo,useClass:_h,multi:!0,deps:[ce,b.R0b,b.Lbi]},{provide:lo,useClass:po,multi:!0,deps:[ce]},[],{provide:oa,useClass:oa,deps:[vu,ho,b.AFp]},{provide:b.FYo,useExisting:oa},{provide:gh,useExisting:ho},{provide:ho,useClass:ho,deps:[ce]},{provide:b.dDg,useClass:b.dDg,deps:[b.R0b]},{provide:vu,useClass:vu,deps:[lo,b.R0b]},{provide:class{},useClass:Mp,deps:[]},[]];let Cu=(()=>{class i{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:i,providers:[{provide:b.AFp,useValue:r.appId},{provide:Op,useExisting:b.AFp},il]}}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(i,12))},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({providers:Ms,imports:[t0,b.hGG]}),i})();"undefined"!=typeof window&&window;var $t=P(4402),je=P(5917),rs=P(9765),Fs=P(7971);class xr extends rs.xQ{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const r=super._subscribe(n);return r&&!r.closed&&n.next(this._value),r}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Fs.N;return this._value}next(n){super.next(this._value=n)}}var ca=P(4869),Ru=P(9796),Jn=P(7393);class $y extends Jn.L{notifyNext(n,r,a,c,h){this.destination.next(r)}notifyError(n,r){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class Hy extends Jn.L{constructor(n,r,a){super(),this.parent=n,this.outerValue=r,this.outerIndex=a,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var la=P(7444),Wr=P(7574);function zp(i,n,r,a,c=new Hy(i,r,a)){if(!c.closed)return n instanceof Wr.y?n.subscribe(c):(0,la.s)(n)(c)}var Gy=P(6693);const hl={};class da{constructor(n){this.resultSelector=n}call(n,r){return r.subscribe(new Kp(n,this.resultSelector))}}class Kp extends $y{constructor(n,r){super(n),this.resultSelector=r,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(hl),this.observables.push(n)}_complete(){const n=this.observables,r=n.length;if(0===r)this.destination.complete();else{this.active=r,this.toRespond=r;for(let a=0;a<r;a++)this.add(zp(this,n[a],void 0,a))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,r,a){const c=this.values,g=this.toRespond?c[a]===hl?--this.toRespond:this.toRespond:0;c[a]=r,0===g&&(this.resultSelector?this._tryResultSelector(c):this.destination.next(c.slice()))}_tryResultSelector(n){let r;try{r=this.resultSelector.apply(this,n)}catch(a){return void this.destination.error(a)}this.destination.next(r)}}const xu=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})();var zr=P(3282);function Nu(...i){return(0,zr.J)(1)((0,je.of)(...i))}var Ti=P(9193);function is(i){return new Wr.y(n=>{let r;try{r=i()}catch(c){return void n.error(c)}return(r?(0,$t.D)(r):(0,Ti.c)()).subscribe(n)})}var ha=P(2441),nt=P(8002),Si=P(5345);function fn(i,n){return"function"==typeof n?r=>r.pipe(fn((a,c)=>(0,$t.D)(i(a,c)).pipe((0,nt.U)((h,g)=>n(a,h,c,g))))):r=>r.lift(new go(i))}class go{constructor(n){this.project=n}call(n,r){return r.subscribe(new zy(n,this.project))}}class zy extends Si.Ds{constructor(n,r){super(n),this.project=r,this.index=0}_next(n){let r;const a=this.index++;try{r=this.project(n,a)}catch(c){return void this.destination.error(c)}this._innerSub(r)}_innerSub(n){const r=this.innerSubscription;r&&r.unsubscribe();const a=new Si.IY(this),c=this.destination;c.add(a),this.innerSubscription=(0,Si.ft)(n,a),this.innerSubscription!==a&&c.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}const Zp=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();function Yp(i){return n=>0===i?(0,Ti.c)():n.lift(new Nh(i))}class Nh{constructor(n){if(this.total=n,this.total<0)throw new Zp}call(n,r){return r.subscribe(new sn(n,this.total))}}class sn extends Jn.L{constructor(n,r){super(n),this.total=r,this.count=0}_next(n){const r=this.total,a=++this.count;a<=r&&(this.destination.next(n),a===r&&(this.destination.complete(),this.unsubscribe()))}}function fa(...i){const n=i[i.length-1];return(0,ca.K)(n)?(i.pop(),r=>Nu(i,r,n)):r=>Nu(i,r)}function pa(i,n){let r=!1;return arguments.length>=2&&(r=!0),function(c){return c.lift(new Qp(i,n,r))}}class Qp{constructor(n,r,a=!1){this.accumulator=n,this.seed=r,this.hasSeed=a}call(n,r){return r.subscribe(new u0(n,this.accumulator,this.seed,this.hasSeed))}}class u0 extends Jn.L{constructor(n,r,a,c){super(n),this.accumulator=r,this._seed=a,this.hasSeed=c,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const r=this.index++;let a;try{a=this.accumulator(this.seed,n,r)}catch(c){this.destination.error(c)}this.seed=a,this.destination.next(a)}}function Ai(i,n){return function(a){return a.lift(new Ph(i,n))}}class Ph{constructor(n,r){this.predicate=n,this.thisArg=r}call(n,r){return r.subscribe(new Jp(n,this.predicate,this.thisArg))}}class Jp extends Jn.L{constructor(n,r,a){super(n),this.predicate=r,this.thisArg=a,this.count=0}_next(n){let r;try{r=this.predicate.call(this.thisArg,n,this.count++)}catch(a){return void this.destination.error(a)}r&&this.destination.next(n)}}function ga(i){return function(r){const a=new Xp(i),c=r.lift(a);return a.caught=c}}class Xp{constructor(n){this.selector=n}call(n,r){return r.subscribe(new pl(n,this.selector,this.caught))}}class pl extends Si.Ds{constructor(n,r,a){super(n),this.selector=r,this.caught=a}error(n){if(!this.isStopped){let r;try{r=this.selector(n,this.caught)}catch(h){return void super.error(h)}this._unsubscribeAndRecycle();const a=new Si.IY(this);this.add(a);const c=(0,Si.ft)(r,a);c!==a&&this.add(c)}}}var pn=P(9773);function hi(i,n){return(0,pn.zg)(i,n,1)}function eg(i){return function(r){return 0===i?(0,Ti.c)():r.lift(new vn(i))}}class vn{constructor(n){if(this.total=n,this.total<0)throw new Zp}call(n,r){return r.subscribe(new gl(n,this.total))}}class gl extends Jn.L{constructor(n,r){super(n),this.total=r,this.ring=new Array,this.count=0}_next(n){const r=this.ring,a=this.total,c=this.count++;r.length<a?r.push(n):r[c%a]=n}_complete(){const n=this.destination;let r=this.count;if(r>0){const a=this.count>=this.total?this.total:this.count,c=this.ring;for(let h=0;h<a;h++){const g=r++%a;n.next(c[g])}}n.complete()}}function mo(i=Kr){return n=>n.lift(new Ky(i))}class Ky{constructor(n){this.errorFactory=n}call(n,r){return r.subscribe(new Zy(n,this.errorFactory))}}class Zy extends Jn.L{constructor(n,r){super(n),this.errorFactory=r,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(r){n=r}this.destination.error(n)}}}function Kr(){return new xu}function Nr(i=null){return n=>n.lift(new ml(i))}class ml{constructor(n){this.defaultValue=n}call(n,r){return r.subscribe(new ss(n,this.defaultValue))}}class ss extends Jn.L{constructor(n,r){super(n),this.defaultValue=r,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var os=P(4487);function as(i,n){const r=arguments.length>=2;return a=>a.pipe(i?Ai((c,h)=>i(c,h,a)):os.y,Yp(1),r?Nr(n):mo(()=>new xu))}var Pr=P(3342),tg=P(1307),Yy=P(5319);class Xn{constructor(n){this.callback=n}call(n,r){return r.subscribe(new Pu(n,this.callback))}}class Pu extends Jn.L{constructor(n,r){super(n),this.add(new Yy.w(r))}}class Hn{constructor(n,r){this.id=n,this.url=r}}class rg extends Hn{constructor(n,r,a="imperative",c=null){super(n,r),this.navigationTrigger=a,this.restoredState=c}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ls extends Hn{constructor(n,r,a){super(n,r),this.urlAfterRedirects=a}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Oh extends Hn{constructor(n,r,a){super(n,r),this.reason=a}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Qy extends Hn{constructor(n,r,a){super(n,r),this.error=a}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Jy extends Hn{constructor(n,r,a,c){super(n,r),this.urlAfterRedirects=a,this.state=c}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mh extends Hn{constructor(n,r,a,c){super(n,r),this.urlAfterRedirects=a,this.state=c}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xy extends Hn{constructor(n,r,a,c,h){super(n,r),this.urlAfterRedirects=a,this.state=c,this.shouldActivate=h}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ou extends Hn{constructor(n,r,a,c){super(n,r),this.urlAfterRedirects=a,this.state=c}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mu extends Hn{constructor(n,r,a,c){super(n,r),this.urlAfterRedirects=a,this.state=c}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ku{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class e_{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yo{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kh{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Us{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _l{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vl{constructor(n,r,a){this.routerEvent=n,this.position=r,this.anchor=a}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const dt="primary";class Fu{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r[0]:r}return null}getAll(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function Lu(i){return new Fu(i)}const Uu="ngNavigationCancelingError";function Vs(i){const n=Error("NavigationCancelingError: "+i);return n[Uu]=!0,n}function t_(i,n,r){const a=r.path.split("/");if(a.length>i.length||"full"===r.pathMatch&&(n.hasChildren()||a.length<i.length))return null;const c={};for(let h=0;h<a.length;h++){const g=a[h],v=i[h];if(g.startsWith(":"))c[g.substring(1)]=v;else if(g!==v.path)return null}return{consumed:i.slice(0,a.length),posParams:c}}function Or(i,n){const r=i?Object.keys(i):void 0,a=n?Object.keys(n):void 0;if(!r||!a||r.length!=a.length)return!1;let c;for(let h=0;h<r.length;h++)if(c=r[h],!n_(i[c],n[c]))return!1;return!0}function n_(i,n){if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!1;const r=[...i].sort(),a=[...n].sort();return r.every((c,h)=>a[h]===c)}return i===n}function Bs(i){return Array.prototype.concat.apply([],i)}function ma(i){return i.length>0?i[i.length-1]:null}function Cn(i,n){for(const r in i)i.hasOwnProperty(r)&&n(i[r],r)}function fi(i){return(0,b.CqO)(i)?i:(0,b.QGY)(i)?(0,$t.D)(Promise.resolve(i)):(0,je.of)(i)}const ya={exact:function sg(i,n,r){if(!Eo(i.segments,n.segments)||!ju(i.segments,n.segments,r)||i.numberOfChildren!==n.numberOfChildren)return!1;for(const a in n.children)if(!i.children[a]||!sg(i.children[a],n.children[a],r))return!1;return!0},subset:El},Mr={exact:function(i,n){return Or(i,n)},subset:function(i,n){return Object.keys(n).length<=Object.keys(i).length&&Object.keys(n).every(r=>n_(i[r],n[r]))},ignored:()=>!0};function Vu(i,n,r){return ya[r.paths](i.root,n.root,r.matrixParams)&&Mr[r.queryParams](i.queryParams,n.queryParams)&&!("exact"===r.fragment&&i.fragment!==n.fragment)}function El(i,n,r){return Bu(i,n,n.segments,r)}function Bu(i,n,r,a){if(i.segments.length>r.length){const c=i.segments.slice(0,r.length);return!(!Eo(c,r)||n.hasChildren()||!ju(c,r,a))}if(i.segments.length===r.length){if(!Eo(i.segments,r)||!ju(i.segments,r,a))return!1;for(const c in n.children)if(!i.children[c]||!El(i.children[c],n.children[c],a))return!1;return!0}{const c=r.slice(0,i.segments.length),h=r.slice(i.segments.length);return!!(Eo(i.segments,c)&&ju(i.segments,c,a)&&i.children[dt])&&Bu(i.children[dt],n,h,a)}}function ju(i,n,r){return n.every((a,c)=>Mr[r](i[c].parameters,a.parameters))}class vo{constructor(n,r,a){this.root=n,this.queryParams=r,this.fragment=a}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lu(this.queryParams)),this._queryParamMap}toString(){return l0.serialize(this)}}class ht{constructor(n,r){this.segments=n,this.children=r,this.parent=null,Cn(r,(a,c)=>a.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Il(this)}}class Ri{constructor(n,r){this.path=n,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=Lu(this.parameters)),this._parameterMap}toString(){return i_(this)}}function Eo(i,n){return i.length===n.length&&i.every((r,a)=>r.path===n[a].path)}class wl{}class Fh{parse(n){const r=new Io(n);return new vo(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(n){var i;return`${`/${Hu(n.root,!0)}`}${function(i){const n=Object.keys(i).map(r=>{const a=i[r];return Array.isArray(a)?a.map(c=>`${us(r)}=${us(c)}`).join("&"):`${us(r)}=${us(a)}`}).filter(r=>!!r);return n.length?`?${n.join("&")}`:""}(n.queryParams)}${"string"==typeof n.fragment?`#${i=n.fragment,encodeURI(i)}`:""}`}}const l0=new Fh;function Il(i){return i.segments.map(n=>i_(n)).join("/")}function Hu(i,n){if(!i.hasChildren())return Il(i);if(n){const r=i.children[dt]?Hu(i.children[dt],!1):"",a=[];return Cn(i.children,(c,h)=>{h!==dt&&a.push(`${h}:${Hu(c,!1)}`)}),a.length>0?`${r}(${a.join("//")})`:r}{const r=function(i,n){let r=[];return Cn(i.children,(a,c)=>{c===dt&&(r=r.concat(n(a,c)))}),Cn(i.children,(a,c)=>{c!==dt&&(r=r.concat(n(a,c)))}),r}(i,(a,c)=>c===dt?[Hu(i.children[dt],!1)]:[`${c}:${Hu(a,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[dt]?`${Il(i)}/${r[0]}`:`${Il(i)}/(${r.join("//")})`}}function ag(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function us(i){return ag(i).replace(/%3B/gi,";")}function xi(i){return ag(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bl(i){return decodeURIComponent(i)}function Uh(i){return bl(i.replace(/\+/g,"%20"))}function i_(i){return`${xi(i.path)}${function(i){return Object.keys(i).map(n=>`;${xi(n)}=${xi(i[n])}`).join("")}(i.parameters)}`}const ug=/^[^\/()?;=#]+/;function Gu(i){const n=i.match(ug);return n?n[0]:""}const cg=/^[^=?&#]+/,s_=/^[^?&#]+/;class Io{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ht([],{}):new ht([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let a={};return this.peekStartsWith("(")&&(a=this.parseParens(!1)),(n.length>0||Object.keys(r).length>0)&&(a[dt]=new ht(n,r)),a}parseSegment(){const n=Gu(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new Ri(bl(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const r=Gu(this.remaining);if(!r)return;this.capture(r);let a="";if(this.consumeOptional("=")){const c=Gu(this.remaining);c&&(a=c,this.capture(a))}n[bl(r)]=bl(a)}parseQueryParam(n){const r=function(i){const n=i.match(cg);return n?n[0]:""}(this.remaining);if(!r)return;this.capture(r);let a="";if(this.consumeOptional("=")){const g=function(i){const n=i.match(s_);return n?n[0]:""}(this.remaining);g&&(a=g,this.capture(a))}const c=Uh(r),h=Uh(a);if(n.hasOwnProperty(c)){let g=n[c];Array.isArray(g)||(g=[g],n[c]=g),g.push(h)}else n[c]=h}parseParens(n){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const a=Gu(this.remaining),c=this.remaining[a.length];if("/"!==c&&")"!==c&&";"!==c)throw new Error(`Cannot parse url '${this.url}'`);let h;a.indexOf(":")>-1?(h=a.substr(0,a.indexOf(":")),this.capture(h),this.capture(":")):n&&(h=dt);const g=this.parseChildren();r[h]=1===Object.keys(g).length?g[dt]:new ht([],g),this.consumeOptional("//")}return r}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class lg{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const r=this.pathFromRoot(n);return r.length>1?r[r.length-2]:null}children(n){const r=Bh(n,this._root);return r?r.children.map(a=>a.value):[]}firstChild(n){const r=Bh(n,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(n){const r=kr(n,this._root);return r.length<2?[]:r[r.length-2].children.map(c=>c.value).filter(c=>c!==n)}pathFromRoot(n){return kr(n,this._root).map(r=>r.value)}}function Bh(i,n){if(i===n.value)return n;for(const r of n.children){const a=Bh(i,r);if(a)return a}return null}function kr(i,n){if(i===n.value)return[n];for(const r of n.children){const a=kr(i,r);if(a.length)return a.unshift(n),a}return[]}class dr{constructor(n,r){this.value=n,this.children=r}toString(){return`TreeNode(${this.value})`}}function $s(i){const n={};return i&&i.children.forEach(r=>n[r.value.outlet]=r),n}class dg extends lg{constructor(n,r){super(n),this.snapshot=r,$h(this,n)}toString(){return this.snapshot.toString()}}function hg(i,n){const r=function(i,n){const g=new Cl([],{},{},"",{},dt,n,null,i.root,-1,{});return new pg("",new dr(g,[]))}(i,n),a=new xr([new Ri("",{})]),c=new xr({}),h=new xr({}),g=new xr({}),v=new xr(""),I=new va(a,c,g,v,h,dt,n,r.root);return I.snapshot=r.root,new dg(new dr(I,[]),r)}class va{constructor(n,r,a,c,h,g,v,I){this.url=n,this.params=r,this.queryParams=a,this.fragment=c,this.data=h,this.outlet=g,this.component=v,this._futureSnapshot=I}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,nt.U)(n=>Lu(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,nt.U)(n=>Lu(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fg(i,n="emptyOnly"){const r=i.pathFromRoot;let a=0;if("always"!==n)for(a=r.length-1;a>=1;){const c=r[a],h=r[a-1];if(c.routeConfig&&""===c.routeConfig.path)a--;else{if(h.component)break;a--}}return function(i){return i.reduce((n,r)=>({params:Object.assign(Object.assign({},n.params),r.params),data:Object.assign(Object.assign({},n.data),r.data),resolve:Object.assign(Object.assign({},n.resolve),r._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(a))}class Cl{constructor(n,r,a,c,h,g,v,I,C,T,A){this.url=n,this.params=r,this.queryParams=a,this.fragment=c,this.data=h,this.outlet=g,this.component=v,this.routeConfig=I,this._urlSegment=C,this._lastPathIndex=T,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(a=>a.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pg extends lg{constructor(n,r){super(r),this.url=n,$h(this,r)}toString(){return gg(this._root)}}function $h(i,n){n.value._routerState=i,n.children.forEach(r=>$h(i,r))}function gg(i){const n=i.children.length>0?` { ${i.children.map(gg).join(", ")} } `:"";return`${i.value}${n}`}function mg(i){if(i.snapshot){const n=i.snapshot,r=i._futureSnapshot;i.snapshot=r,Or(n.queryParams,r.queryParams)||i.queryParams.next(r.queryParams),n.fragment!==r.fragment&&i.fragment.next(r.fragment),Or(n.params,r.params)||i.params.next(r.params),function(i,n){if(i.length!==n.length)return!1;for(let r=0;r<i.length;++r)if(!Or(i[r],n[r]))return!1;return!0}(n.url,r.url)||i.url.next(r.url),Or(n.data,r.data)||i.data.next(r.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function Tl(i,n){return Or(i.params,n.params)&&function(i,n){return Eo(i,n)&&i.every((r,a)=>Or(r.parameters,n[a].parameters))}(i.url,n.url)&&!(!i.parent!=!n.parent)&&(!i.parent||Tl(i.parent,n.parent))}function qu(i,n,r){if(r&&i.shouldReuseRoute(n.value,r.value.snapshot)){const a=r.value;a._futureSnapshot=n.value;const c=function(i,n,r){return n.children.map(a=>{for(const c of r.children)if(i.shouldReuseRoute(a.value,c.value.snapshot))return qu(i,a,c);return qu(i,a)})}(i,n,r);return new dr(a,c)}{if(i.shouldAttach(n.value)){const h=i.retrieve(n.value);if(null!==h){const g=h.route;return pi(n,g),g}}const a=function(i){return new va(new xr(i.url),new xr(i.params),new xr(i.queryParams),new xr(i.fragment),new xr(i.data),i.outlet,i.component,i)}(n.value),c=n.children.map(h=>qu(i,h));return new dr(a,c)}}function pi(i,n){if(i.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=i.value;for(let r=0;r<i.children.length;++r)pi(i.children[r],n.children[r])}function Wu(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Co(i){return"object"==typeof i&&null!=i&&i.outlets}function _g(i,n,r,a,c){let h={};return a&&Cn(a,(g,v)=>{h[v]=Array.isArray(g)?g.map(I=>`${I}`):`${g}`}),new vo(r.root===i?n:o_(r.root,i,n),h,c)}function o_(i,n,r){const a={};return Cn(i.children,(c,h)=>{a[h]=c===n?r:o_(c,n,r)}),new ht(i.segments,a)}class Al{constructor(n,r,a){if(this.isAbsolute=n,this.numberOfDoubleDots=r,this.commands=a,n&&a.length>0&&Wu(a[0]))throw new Error("Root segment cannot have matrix parameters");const c=a.find(Co);if(c&&c!==ma(a))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zu{constructor(n,r,a){this.segmentGroup=n,this.processChildren=r,this.index=a}}function Ku(i,n,r){if(i||(i=new ht([],{})),0===i.segments.length&&i.hasChildren())return xl(i,n,r);const a=function(i,n,r){let a=0,c=n;const h={match:!1,pathIndex:0,commandIndex:0};for(;c<i.segments.length;){if(a>=r.length)return h;const g=i.segments[c],v=r[a];if(Co(v))break;const I=`${v}`,C=a<r.length-1?r[a+1]:null;if(c>0&&void 0===I)break;if(I&&C&&"object"==typeof C&&void 0===C.outlets){if(!Gh(I,C,g))return h;a+=2}else{if(!Gh(I,{},g))return h;a++}c++}return{match:!0,pathIndex:c,commandIndex:a}}(i,n,r),c=r.slice(a.commandIndex);if(a.match&&a.pathIndex<i.segments.length){const h=new ht(i.segments.slice(0,a.pathIndex),{});return h.children[dt]=new ht(i.segments.slice(a.pathIndex),i.children),xl(h,0,c)}return a.match&&0===c.length?new ht(i.segments,{}):a.match&&!i.hasChildren()?Hh(i,n,r):a.match?xl(i,0,c):Hh(i,n,r)}function xl(i,n,r){if(0===r.length)return new ht(i.segments,{});{const a=function(i){return Co(i[0])?i[0].outlets:{[dt]:i}}(r),c={};return Cn(a,(h,g)=>{"string"==typeof h&&(h=[h]),null!==h&&(c[g]=Ku(i.children[g],n,h))}),Cn(i.children,(h,g)=>{void 0===a[g]&&(c[g]=h)}),new ht(i.segments,c)}}function Hh(i,n,r){const a=i.segments.slice(0,n);let c=0;for(;c<r.length;){const h=r[c];if(Co(h)){const I=wg(h.outlets);return new ht(a,I)}if(0===c&&Wu(r[0])){a.push(new Ri(i.segments[n].path,Zu(r[0]))),c++;continue}const g=Co(h)?h.outlets[dt]:`${h}`,v=c<r.length-1?r[c+1]:null;g&&v&&Wu(v)?(a.push(new Ri(g,Zu(v))),c+=2):(a.push(new Ri(g,{})),c++)}return new ht(a,{})}function wg(i){const n={};return Cn(i,(r,a)=>{"string"==typeof r&&(r=[r]),null!==r&&(n[a]=Hh(new ht([],{}),0,r))}),n}function Zu(i){const n={};return Cn(i,(r,a)=>n[a]=`${r}`),n}function Gh(i,n,r){return i==r.path&&Or(n,r.parameters)}class qh{constructor(n,r,a,c){this.routeReuseStrategy=n,this.futureState=r,this.currState=a,this.forwardEvent=c}activate(n){const r=this.futureState._root,a=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,a,n),mg(this.futureState.root),this.activateChildRoutes(r,a,n)}deactivateChildRoutes(n,r,a){const c=$s(r);n.children.forEach(h=>{const g=h.value.outlet;this.deactivateRoutes(h,c[g],a),delete c[g]}),Cn(c,(h,g)=>{this.deactivateRouteAndItsChildren(h,a)})}deactivateRoutes(n,r,a){const c=n.value,h=r?r.value:null;if(c===h)if(c.component){const g=a.getContext(c.outlet);g&&this.deactivateChildRoutes(n,r,g.children)}else this.deactivateChildRoutes(n,r,a);else h&&this.deactivateRouteAndItsChildren(r,a)}deactivateRouteAndItsChildren(n,r){this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,r):this.deactivateRouteAndOutlet(n,r)}detachAndStoreRouteSubtree(n,r){const a=r.getContext(n.value.outlet);if(a&&a.outlet){const c=a.outlet.detach(),h=a.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:c,route:n,contexts:h})}}deactivateRouteAndOutlet(n,r){const a=r.getContext(n.value.outlet),c=a&&n.value.component?a.children:r,h=$s(n);for(const g of Object.keys(h))this.deactivateRouteAndItsChildren(h[g],c);a&&a.outlet&&(a.outlet.deactivate(),a.children.onOutletDeactivated(),a.attachRef=null,a.resolver=null,a.route=null)}activateChildRoutes(n,r,a){const c=$s(r);n.children.forEach(h=>{this.activateRoutes(h,c[h.value.outlet],a),this.forwardEvent(new _l(h.value.snapshot))}),n.children.length&&this.forwardEvent(new kh(n.value.snapshot))}activateRoutes(n,r,a){const c=n.value,h=r?r.value:null;if(mg(c),c===h)if(c.component){const g=a.getOrCreateContext(c.outlet);this.activateChildRoutes(n,r,g.children)}else this.activateChildRoutes(n,r,a);else if(c.component){const g=a.getOrCreateContext(c.outlet);if(this.routeReuseStrategy.shouldAttach(c.snapshot)){const v=this.routeReuseStrategy.retrieve(c.snapshot);this.routeReuseStrategy.store(c.snapshot,null),g.children.onOutletReAttached(v.contexts),g.attachRef=v.componentRef,g.route=v.route.value,g.outlet&&g.outlet.attach(v.componentRef,v.route.value),Ft(v.route)}else{const v=function(i){for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null}return null}(c.snapshot),I=v?v.module.componentFactoryResolver:null;g.attachRef=null,g.route=c,g.resolver=I,g.outlet&&g.outlet.activateWith(c,I),this.activateChildRoutes(n,null,g.children)}}else this.activateChildRoutes(n,null,a)}}function Ft(i){mg(i.value),i.children.forEach(Ft)}class Wh{constructor(n,r){this.routes=n,this.module=r}}function Zr(i){return"function"==typeof i}function gi(i){return i instanceof vo}const Pl=Symbol("INITIAL_VALUE");function Yu(){return fn(i=>function(...i){let n,r;return(0,ca.K)(i[i.length-1])&&(r=i.pop()),"function"==typeof i[i.length-1]&&(n=i.pop()),1===i.length&&(0,Ru.k)(i[0])&&(i=i[0]),(0,Gy.n)(i,r).lift(new da(n))}(i.map(n=>n.pipe(Yp(1),fa(Pl)))).pipe(pa((n,r)=>{let a=!1;return r.reduce((c,h,g)=>c!==Pl?c:(h===Pl&&(a=!0),a||!1!==h&&g!==r.length-1&&!gi(h)?c:h),n)},Pl),Ai(n=>n!==Pl),(0,nt.U)(n=>gi(n)?n:!0===n),Yp(1)))}let Ea=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=b.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,a){1&r&&b._UZ(0,"router-outlet")},directives:function(){return[y_]},encapsulation:2}),i})();function Qt(i,n=""){for(let r=0;r<i.length;r++){const a=i[r];Ol(a,Dg(n,a))}}function Ol(i,n){i.children&&Qt(i.children,n)}function Dg(i,n){return n?i||n.path?i&&!n.path?`${i}/`:!i&&n.path?n.path:`${i}/${n.path}`:"":i}function Ml(i){const n=i.children&&i.children.map(Ml),r=n?Object.assign(Object.assign({},i),{children:n}):Object.assign({},i);return!r.component&&(n||r.loadChildren)&&r.outlet&&r.outlet!==dt&&(r.component=Ea),r}function xt(i){return i.outlet||dt}function To(i,n){const r=i.filter(a=>xt(a)===n);return r.push(...i.filter(a=>xt(a)!==n)),r}const Pn={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function wa(i,n,r){var a;if(""===n.path)return"full"===n.pathMatch&&(i.hasChildren()||r.length>0)?Object.assign({},Pn):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const h=(n.matcher||t_)(r,i,n);if(!h)return Object.assign({},Pn);const g={};Cn(h.posParams,(I,C)=>{g[C]=I.path});const v=h.consumed.length>0?Object.assign(Object.assign({},g),h.consumed[h.consumed.length-1].parameters):g;return{matched:!0,consumedSegments:h.consumed,lastChild:h.consumed.length,parameters:v,positionalParamSegments:null!==(a=h.posParams)&&void 0!==a?a:{}}}function Ia(i,n,r,a,c="corrected"){if(r.length>0&&function(i,n,r){return r.some(a=>Da(i,n,a)&&xt(a)!==dt)}(i,r,a)){const g=new ht(n,function(i,n,r,a){const c={};c[dt]=a,a._sourceSegment=i,a._segmentIndexShift=n.length;for(const h of r)if(""===h.path&&xt(h)!==dt){const g=new ht([],{});g._sourceSegment=i,g._segmentIndexShift=n.length,c[xt(h)]=g}return c}(i,n,a,new ht(r,i.children)));return g._sourceSegment=i,g._segmentIndexShift=n.length,{segmentGroup:g,slicedSegments:[]}}if(0===r.length&&function(i,n,r){return r.some(a=>Da(i,n,a))}(i,r,a)){const g=new ht(i.segments,function(i,n,r,a,c,h){const g={};for(const v of a)if(Da(i,r,v)&&!c[xt(v)]){const I=new ht([],{});I._sourceSegment=i,I._segmentIndexShift="legacy"===h?i.segments.length:n.length,g[xt(v)]=I}return Object.assign(Object.assign({},c),g)}(i,n,r,a,i.children,c));return g._sourceSegment=i,g._segmentIndexShift=n.length,{segmentGroup:g,slicedSegments:r}}const h=new ht(i.segments,i.children);return h._sourceSegment=i,h._segmentIndexShift=n.length,{segmentGroup:h,slicedSegments:r}}function Da(i,n,r){return(!(i.hasChildren()||n.length>0)||"full"!==r.pathMatch)&&""===r.path}function kl(i,n,r,a){return!!(xt(i)===a||a!==dt&&Da(n,r,i))&&("**"===i.path||wa(n,i,r).matched)}function Sg(i,n,r){return 0===n.length&&!i.children[r]}class Qu{constructor(n){this.segmentGroup=n||null}}class Zh{constructor(n){this.urlTree=n}}function Ca(i){return new Wr.y(n=>n.error(new Qu(i)))}function w(i){return new Wr.y(n=>n.error(new Zh(i)))}function m(i){return new Wr.y(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class S{constructor(n,r,a,c,h){this.configLoader=r,this.urlSerializer=a,this.urlTree=c,this.config=h,this.allowRedirects=!0,this.ngModule=n.get(b.h0i)}apply(){const n=Ia(this.urlTree.root,[],[],this.config).segmentGroup,r=new ht(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,r,dt).pipe((0,nt.U)(h=>this.createUrlTree(V(h),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ga(h=>{if(h instanceof Zh)return this.allowRedirects=!1,this.match(h.urlTree);throw h instanceof Qu?this.noMatchError(h):h}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,dt).pipe((0,nt.U)(c=>this.createUrlTree(V(c),n.queryParams,n.fragment))).pipe(ga(c=>{throw c instanceof Qu?this.noMatchError(c):c}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,r,a){const c=n.segments.length>0?new ht([],{[dt]:n}):n;return new vo(c,r,a)}expandSegmentGroup(n,r,a,c){return 0===a.segments.length&&a.hasChildren()?this.expandChildren(n,r,a).pipe((0,nt.U)(h=>new ht([],h))):this.expandSegment(n,a,r,a.segments,c,!0)}expandChildren(n,r,a){const c=[];for(const h of Object.keys(a.children))"primary"===h?c.unshift(h):c.push(h);return(0,$t.D)(c).pipe(hi(h=>{const g=a.children[h],v=To(r,h);return this.expandSegmentGroup(n,v,g,h).pipe((0,nt.U)(I=>({segment:I,outlet:h})))}),pa((h,g)=>(h[g.outlet]=g.segment,h),{}),function(i,n){const r=arguments.length>=2;return a=>a.pipe(i?Ai((c,h)=>i(c,h,a)):os.y,eg(1),r?Nr(n):mo(()=>new xu))}())}expandSegment(n,r,a,c,h,g){return(0,$t.D)(a).pipe(hi(v=>this.expandSegmentAgainstRoute(n,r,a,v,c,h,g).pipe(ga(C=>{if(C instanceof Qu)return(0,je.of)(null);throw C}))),as(v=>!!v),ga((v,I)=>{if(v instanceof xu||"EmptyError"===v.name){if(Sg(r,c,h))return(0,je.of)(new ht([],{}));throw new Qu(r)}throw v}))}expandSegmentAgainstRoute(n,r,a,c,h,g,v){return kl(c,r,h,g)?void 0===c.redirectTo?this.matchSegmentAgainstRoute(n,r,c,h,g):v&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,a,c,h,g):Ca(r):Ca(r)}expandSegmentAgainstRouteUsingRedirect(n,r,a,c,h,g){return"**"===c.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,a,c,g):this.expandRegularSegmentAgainstRouteUsingRedirect(n,r,a,c,h,g)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,a,c){const h=this.applyRedirectCommands([],a.redirectTo,{});return a.redirectTo.startsWith("/")?w(h):this.lineralizeSegments(a,h).pipe((0,pn.zg)(g=>{const v=new ht(g,{});return this.expandSegment(n,v,r,g,c,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,r,a,c,h,g){const{matched:v,consumedSegments:I,lastChild:C,positionalParamSegments:T}=wa(r,c,h);if(!v)return Ca(r);const A=this.applyRedirectCommands(I,c.redirectTo,T);return c.redirectTo.startsWith("/")?w(A):this.lineralizeSegments(c,A).pipe((0,pn.zg)(O=>this.expandSegment(n,r,a,O.concat(h.slice(C)),g,!1)))}matchSegmentAgainstRoute(n,r,a,c,h){if("**"===a.path)return a.loadChildren?(a._loadedConfig?(0,je.of)(a._loadedConfig):this.configLoader.load(n.injector,a)).pipe((0,nt.U)(O=>(a._loadedConfig=O,new ht(c,{})))):(0,je.of)(new ht(c,{}));const{matched:g,consumedSegments:v,lastChild:I}=wa(r,a,c);if(!g)return Ca(r);const C=c.slice(I);return this.getChildConfig(n,a,c).pipe((0,pn.zg)(A=>{const O=A.module,M=A.routes,{segmentGroup:z,slicedSegments:ye}=Ia(r,v,C,M),De=new ht(z.segments,z.children);if(0===ye.length&&De.hasChildren())return this.expandChildren(O,M,De).pipe((0,nt.U)(Ye=>new ht(v,Ye)));if(0===M.length&&0===ye.length)return(0,je.of)(new ht(v,{}));const qe=xt(a)===h;return this.expandSegment(O,De,M,ye,qe?dt:h,!0).pipe((0,nt.U)(Be=>new ht(v.concat(Be.segments),Be.children)))}))}getChildConfig(n,r,a){return r.children?(0,je.of)(new Wh(r.children,n)):r.loadChildren?void 0!==r._loadedConfig?(0,je.of)(r._loadedConfig):this.runCanLoadGuards(n.injector,r,a).pipe((0,pn.zg)(c=>{return c?this.configLoader.load(n.injector,r).pipe((0,nt.U)(h=>(r._loadedConfig=h,h))):(i=r,new Wr.y(n=>n.error(Vs(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`))));var i})):(0,je.of)(new Wh([],n))}runCanLoadGuards(n,r,a){const c=r.canLoad;if(!c||0===c.length)return(0,je.of)(!0);const h=c.map(g=>{const v=n.get(g);let I;if((i=v)&&Zr(i.canLoad))I=v.canLoad(r,a);else{if(!Zr(v))throw new Error("Invalid CanLoad guard");I=v(r,a)}var i;return fi(I)});return(0,je.of)(h).pipe(Yu(),(0,Pr.b)(g=>{if(!gi(g))return;const v=Vs(`Redirecting to "${this.urlSerializer.serialize(g)}"`);throw v.url=g,v}),(0,nt.U)(g=>!0===g))}lineralizeSegments(n,r){let a=[],c=r.root;for(;;){if(a=a.concat(c.segments),0===c.numberOfChildren)return(0,je.of)(a);if(c.numberOfChildren>1||!c.children[dt])return m(n.redirectTo);c=c.children[dt]}}applyRedirectCommands(n,r,a){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),n,a)}applyRedirectCreatreUrlTree(n,r,a,c){const h=this.createSegmentGroup(n,r.root,a,c);return new vo(h,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(n,r){const a={};return Cn(n,(c,h)=>{if("string"==typeof c&&c.startsWith(":")){const v=c.substring(1);a[h]=r[v]}else a[h]=c}),a}createSegmentGroup(n,r,a,c){const h=this.createSegments(n,r.segments,a,c);let g={};return Cn(r.children,(v,I)=>{g[I]=this.createSegmentGroup(n,v,a,c)}),new ht(h,g)}createSegments(n,r,a,c){return r.map(h=>h.path.startsWith(":")?this.findPosParam(n,h,c):this.findOrReturn(h,a))}findPosParam(n,r,a){const c=a[r.path.substring(1)];if(!c)throw new Error(`Cannot redirect to '${n}'. Cannot find '${r.path}'.`);return c}findOrReturn(n,r){let a=0;for(const c of r){if(c.path===n.path)return r.splice(a),c;a++}return n}}function V(i){const n={};for(const a of Object.keys(i.children)){const h=V(i.children[a]);(h.segments.length>0||h.hasChildren())&&(n[a]=h)}return function(i){if(1===i.numberOfChildren&&i.children[dt]){const n=i.children[dt];return new ht(i.segments.concat(n.segments),n.children)}return i}(new ht(i.segments,n))}class be{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Pe{constructor(n,r){this.component=n,this.route=r}}function ze(i,n,r){const a=i._root;return En(a,n?n._root:null,r,[a.value])}function on(i,n,r){const a=function(i){if(!i)return null;for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig}return null}(n);return(a?a.module.injector:r).get(i)}function En(i,n,r,a,c={canDeactivateChecks:[],canActivateChecks:[]}){const h=$s(n);return i.children.forEach(g=>{(function(i,n,r,a,c={canDeactivateChecks:[],canActivateChecks:[]}){const h=i.value,g=n?n.value:null,v=r?r.getContext(i.value.outlet):null;if(g&&h.routeConfig===g.routeConfig){const I=function(i,n,r){if("function"==typeof r)return r(i,n);switch(r){case"pathParamsChange":return!Eo(i.url,n.url);case"pathParamsOrQueryParamsChange":return!Eo(i.url,n.url)||!Or(i.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tl(i,n)||!Or(i.queryParams,n.queryParams);case"paramsChange":default:return!Tl(i,n)}}(g,h,h.routeConfig.runGuardsAndResolvers);I?c.canActivateChecks.push(new be(a)):(h.data=g.data,h._resolvedData=g._resolvedData),En(i,n,h.component?v?v.children:null:r,a,c),I&&v&&v.outlet&&v.outlet.isActivated&&c.canDeactivateChecks.push(new Pe(v.outlet.component,g))}else g&&Ta(n,v,c),c.canActivateChecks.push(new be(a)),En(i,null,h.component?v?v.children:null:r,a,c)})(g,h[g.value.outlet],r,a.concat([g.value]),c),delete h[g.value.outlet]}),Cn(h,(g,v)=>Ta(g,r.getContext(v),c)),c}function Ta(i,n,r){const a=$s(i),c=i.value;Cn(a,(h,g)=>{Ta(h,c.component?n?n.children.getContext(g):null:n,r)}),r.canDeactivateChecks.push(new Pe(c.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,c))}class p0{}function zC(i){return new Wr.y(n=>n.error(i))}class MR{constructor(n,r,a,c,h,g){this.rootComponentType=n,this.config=r,this.urlTree=a,this.url=c,this.paramsInheritanceStrategy=h,this.relativeLinkResolution=g}recognize(){const n=Ia(this.urlTree.root,[],[],this.config.filter(g=>void 0===g.redirectTo),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,n,dt);if(null===r)return null;const a=new Cl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},dt,this.rootComponentType,null,this.urlTree.root,-1,{}),c=new dr(a,r),h=new pg(this.url,c);return this.inheritParamsAndData(h._root),h}inheritParamsAndData(n){const r=n.value,a=fg(r,this.paramsInheritanceStrategy);r.params=Object.freeze(a.params),r.data=Object.freeze(a.data),n.children.forEach(c=>this.inheritParamsAndData(c))}processSegmentGroup(n,r,a){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,r):this.processSegment(n,r,r.segments,a)}processChildren(n,r){const a=[];for(const h of Object.keys(r.children)){const g=r.children[h],v=To(n,h),I=this.processSegmentGroup(v,g,h);if(null===I)return null;a.push(...I)}const c=m0(a);return c.sort((n,r)=>n.value.outlet===dt?-1:r.value.outlet===dt?1:n.value.outlet.localeCompare(r.value.outlet)),c}processSegment(n,r,a,c){for(const h of n){const g=this.processSegmentAgainstRoute(h,r,a,c);if(null!==g)return g}return Sg(r,a,c)?[]:null}processSegmentAgainstRoute(n,r,a,c){if(n.redirectTo||!kl(n,r,a,c))return null;let h,g=[],v=[];if("**"===n.path){const M=a.length>0?ma(a).parameters:{};h=new Cl(a,M,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,d_(n),xt(n),n.component,n,Fl(r),l_(r)+a.length,Ng(n))}else{const M=wa(r,n,a);if(!M.matched)return null;g=M.consumedSegments,v=a.slice(M.lastChild),h=new Cl(g,M.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,d_(n),xt(n),n.component,n,Fl(r),l_(r)+g.length,Ng(n))}const I=(i=n).children?i.children:i.loadChildren?i._loadedConfig.routes:[],{segmentGroup:C,slicedSegments:T}=Ia(r,g,v,I.filter(M=>void 0===M.redirectTo),this.relativeLinkResolution);var i;if(0===T.length&&C.hasChildren()){const M=this.processChildren(I,C);return null===M?null:[new dr(h,M)]}if(0===I.length&&0===T.length)return[new dr(h,[])];const A=xt(n)===c,O=this.processSegment(I,C,T,A?dt:c);return null===O?null:[new dr(h,O)]}}function c_(i){const n=i.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function m0(i){const n=[],r=new Set;for(const a of i){if(!c_(a)){n.push(a);continue}const c=n.find(h=>a.value.routeConfig===h.value.routeConfig);void 0!==c?(c.children.push(...a.children),r.add(c)):n.push(a)}for(const a of r){const c=m0(a.children);n.push(new dr(a.value,c))}return n.filter(a=>!r.has(a))}function Fl(i){let n=i;for(;n._sourceSegment;)n=n._sourceSegment;return n}function l_(i){let n=i,r=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,r+=n._segmentIndexShift?n._segmentIndexShift:0;return r-1}function d_(i){return i.data||{}}function Ng(i){return i.resolve||{}}function Pg(i){return fn(n=>{const r=i(n);return r?(0,$t.D)(r).pipe((0,nt.U)(()=>n)):(0,je.of)(n)})}class YC extends class{shouldDetach(n){return!1}store(n,r){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,r){return n.routeConfig===r.routeConfig}}{}const g_=new b.OlP("ROUTES");class _0{constructor(n,r,a,c){this.loader=n,this.compiler=r,this.onLoadStartListener=a,this.onLoadEndListener=c}load(n,r){if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);const c=this.loadModuleFactory(r.loadChildren).pipe((0,nt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);const g=h.create(n);return new Wh(Bs(g.injector.get(g_,void 0,b.XFs.Self|b.XFs.Optional)).map(Ml),g)}),ga(h=>{throw r._loader$=void 0,h}));return r._loader$=new ha.c(c,()=>new rs.xQ).pipe((0,tg.x)()),r._loader$}loadModuleFactory(n){return"string"==typeof n?(0,$t.D)(this.loader.load(n)):fi(n()).pipe((0,pn.zg)(r=>r instanceof b.YKP?(0,je.of)(r):(0,$t.D)(this.compiler.compileModuleAsync(r))))}}class QC{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ul,this.attachRef=null}}class Ul{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const a=this.getOrCreateContext(n);a.outlet=r,this.contexts.set(n,a)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new QC,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}class v0{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}function m_(i){throw i}function E0(i,n,r){return n.parse("/")}function Og(i,n){return(0,je.of)(null)}const XC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fr=(()=>{class i{constructor(r,a,c,h,g,v,I,C){this.rootComponentType=r,this.urlSerializer=a,this.rootContexts=c,this.location=h,this.config=C,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new rs.xQ,this.errorHandler=m_,this.malformedUriErrorHandler=E0,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Og,afterPreactivation:Og},this.urlHandlingStrategy=new v0,this.routeReuseStrategy=new YC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=g.get(b.h0i),this.console=g.get(b.c2e);const O=g.get(b.R0b);this.isNgZoneEnabled=O instanceof b.R0b&&b.R0b.isInAngularZone(),this.resetConfig(C),this.currentUrlTree=new vo(new ht([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new _0(v,I,M=>this.triggerEvent(new ku(M)),M=>this.triggerEvent(new e_(M))),this.routerState=hg(this.currentUrlTree,this.rootComponentType),this.transitions=new xr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}setupNavigations(r){const a=this.events;return r.pipe(Ai(c=>0!==c.id),(0,nt.U)(c=>Object.assign(Object.assign({},c),{extractedUrl:this.urlHandlingStrategy.extract(c.rawUrl)})),fn(c=>{let h=!1,g=!1;return(0,je.of)(c).pipe((0,Pr.b)(v=>{this.currentNavigation={id:v.id,initialUrl:v.currentRawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),fn(v=>{const I=this.browserUrlTree.toString(),C=!this.navigated||v.extractedUrl.toString()!==I||I!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return Gs(v.source)&&(this.browserUrlTree=v.extractedUrl),(0,je.of)(v).pipe(fn(A=>{const O=this.transitions.getValue();return a.next(new rg(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),O!==this.transitions.getValue()?Ti.E:Promise.resolve(A)}),function(i,n,r,a){return fn(c=>function(i,n,r,a,c){return new S(i,n,r,a,c).apply()}(i,n,r,c.extractedUrl,a).pipe((0,nt.U)(h=>Object.assign(Object.assign({},c),{urlAfterRedirects:h}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Pr.b)(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function(i,n,r,a,c){return(0,pn.zg)(h=>function(i,n,r,a,c="emptyOnly",h="legacy"){try{const g=new MR(i,n,r,a,c,h).recognize();return null===g?zC(new p0):(0,je.of)(g)}catch(g){return zC(g)}}(i,n,h.urlAfterRedirects,r(h.urlAfterRedirects),a,c).pipe((0,nt.U)(g=>Object.assign(Object.assign({},h),{targetSnapshot:g}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Pr.b)(A=>{"eager"===this.urlUpdateStrategy&&(A.extras.skipLocationChange||this.setBrowserUrl(A.urlAfterRedirects,A),this.browserUrlTree=A.urlAfterRedirects);const O=new Jy(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);a.next(O)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:M,source:z,restoredState:ye,extras:De}=v,qe=new rg(O,this.serializeUrl(M),z,ye);a.next(qe);const Ze=hg(M,this.rootComponentType).snapshot;return(0,je.of)(Object.assign(Object.assign({},v),{targetSnapshot:Ze,urlAfterRedirects:M,extras:Object.assign(Object.assign({},De),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=v.rawUrl,this.browserUrlTree=v.urlAfterRedirects,v.resolve(null),Ti.E}),Pg(v=>{const{targetSnapshot:I,id:C,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:O,replaceUrl:M}}=v;return this.hooks.beforePreactivation(I,{navigationId:C,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!O,replaceUrl:!!M})}),(0,Pr.b)(v=>{const I=new Mh(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}),(0,nt.U)(v=>Object.assign(Object.assign({},v),{guards:ze(v.targetSnapshot,v.currentSnapshot,this.rootContexts)})),function(i,n){return(0,pn.zg)(r=>{const{targetSnapshot:a,currentSnapshot:c,guards:{canActivateChecks:h,canDeactivateChecks:g}}=r;return 0===g.length&&0===h.length?(0,je.of)(Object.assign(Object.assign({},r),{guardsResult:!0})):function(i,n,r,a){return(0,$t.D)(i).pipe((0,pn.zg)(c=>function(i,n,r,a,c){const h=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!h||0===h.length)return(0,je.of)(!0);const g=h.map(v=>{const I=on(v,n,c);let C;if(function(i){return i&&Zr(i.canDeactivate)}(I))C=fi(I.canDeactivate(i,n,r,a));else{if(!Zr(I))throw new Error("Invalid CanDeactivate guard");C=fi(I(i,n,r,a))}return C.pipe(as())});return(0,je.of)(g).pipe(Yu())}(c.component,c.route,r,n,a)),as(c=>!0!==c,!0))}(g,a,c,i).pipe((0,pn.zg)(v=>v&&function(i){return"boolean"==typeof i}(v)?function(i,n,r,a){return(0,$t.D)(n).pipe(hi(c=>Nu(function(i,n){return null!==i&&n&&n(new yo(i)),(0,je.of)(!0)}(c.route.parent,a),function(i,n){return null!==i&&n&&n(new Us(i)),(0,je.of)(!0)}(c.route,a),function(i,n,r){const a=n[n.length-1],h=n.slice(0,n.length-1).reverse().map(g=>function(i){const n=i.routeConfig?i.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:i,guards:n}:null}(g)).filter(g=>null!==g).map(g=>is(()=>{const v=g.guards.map(I=>{const C=on(I,g.node,r);let T;if(function(i){return i&&Zr(i.canActivateChild)}(C))T=fi(C.canActivateChild(a,i));else{if(!Zr(C))throw new Error("Invalid CanActivateChild guard");T=fi(C(a,i))}return T.pipe(as())});return(0,je.of)(v).pipe(Yu())}));return(0,je.of)(h).pipe(Yu())}(i,c.path,r),function(i,n,r){const a=n.routeConfig?n.routeConfig.canActivate:null;if(!a||0===a.length)return(0,je.of)(!0);const c=a.map(h=>is(()=>{const g=on(h,n,r);let v;if(function(i){return i&&Zr(i.canActivate)}(g))v=fi(g.canActivate(n,i));else{if(!Zr(g))throw new Error("Invalid CanActivate guard");v=fi(g(n,i))}return v.pipe(as())}));return(0,je.of)(c).pipe(Yu())}(i,c.route,r))),as(c=>!0!==c,!0))}(a,h,i,n):(0,je.of)(v)),(0,nt.U)(v=>Object.assign(Object.assign({},r),{guardsResult:v})))})}(this.ngModule.injector,v=>this.triggerEvent(v)),(0,Pr.b)(v=>{if(gi(v.guardsResult)){const C=Vs(`Redirecting to "${this.serializeUrl(v.guardsResult)}"`);throw C.url=v.guardsResult,C}const I=new Xy(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.triggerEvent(I)}),Ai(v=>!!v.guardsResult||(this.restoreHistory(v),this.cancelNavigationTransition(v,""),!1)),Pg(v=>{if(v.guards.canActivateChecks.length)return(0,je.of)(v).pipe((0,Pr.b)(I=>{const C=new Ou(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);this.triggerEvent(C)}),fn(I=>{let C=!1;return(0,je.of)(I).pipe(function(i,n){return(0,pn.zg)(r=>{const{targetSnapshot:a,guards:{canActivateChecks:c}}=r;if(!c.length)return(0,je.of)(r);let h=0;return(0,$t.D)(c).pipe(hi(g=>function(i,n,r,a){return function(i,n,r,a){const c=Object.keys(i);if(0===c.length)return(0,je.of)({});const h={};return(0,$t.D)(c).pipe((0,pn.zg)(g=>function(i,n,r,a){const c=on(i,n,a);return fi(c.resolve?c.resolve(n,r):c(n,r))}(i[g],n,r,a).pipe((0,Pr.b)(v=>{h[g]=v}))),eg(1),(0,pn.zg)(()=>Object.keys(h).length===c.length?(0,je.of)(h):Ti.E))}(i._resolve,i,n,a).pipe((0,nt.U)(h=>(i._resolvedData=h,i.data=Object.assign(Object.assign({},i.data),fg(i,r).resolve),null)))}(g.route,a,i,n)),(0,Pr.b)(()=>h++),eg(1),(0,pn.zg)(g=>h===c.length?(0,je.of)(r):Ti.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Pr.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(I),this.cancelNavigationTransition(I,"At least one route resolver didn't emit any value."))}}))}),(0,Pr.b)(I=>{const C=new Mu(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);this.triggerEvent(C)}))}),Pg(v=>{const{targetSnapshot:I,id:C,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:O,replaceUrl:M}}=v;return this.hooks.afterPreactivation(I,{navigationId:C,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!O,replaceUrl:!!M})}),(0,nt.U)(v=>{const I=function(i,n,r){const a=qu(i,n._root,r?r._root:void 0);return new dg(a,n)}(this.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return Object.assign(Object.assign({},v),{targetRouterState:I})}),(0,Pr.b)(v=>{this.currentUrlTree=v.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(v.urlAfterRedirects,v.rawUrl),this.routerState=v.targetRouterState,"deferred"===this.urlUpdateStrategy&&(v.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,v),this.browserUrlTree=v.urlAfterRedirects)}),((i,n,r)=>(0,nt.U)(a=>(new qh(n,a.targetRouterState,a.currentRouterState,r).activate(i),a)))(this.rootContexts,this.routeReuseStrategy,v=>this.triggerEvent(v)),(0,Pr.b)({next(){h=!0},complete(){h=!0}}),function(i){return n=>n.lift(new Xn(i))}(()=>{if(!h&&!g){const v=`Navigation ID ${c.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(c),this.cancelNavigationTransition(c,v)):this.cancelNavigationTransition(c,v)}this.currentNavigation=null}),ga(v=>{if(g=!0,function(i){return i&&i[Uu]}(v)){const I=gi(v.url);I||(this.navigated=!0,this.restoreHistory(c,!0));const C=new Oh(c.id,this.serializeUrl(c.extractedUrl),v.message);a.next(C),I?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(v.url,this.rawUrlTree),A={skipLocationChange:c.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Gs(c.source)};this.scheduleNavigation(T,"imperative",null,A,{resolve:c.resolve,reject:c.reject,promise:c.promise})},0):c.resolve(!1)}else{this.restoreHistory(c,!0);const I=new Qy(c.id,this.serializeUrl(c.extractedUrl),v);a.next(I);try{c.resolve(this.errorHandler(v))}catch(C){c.reject(C)}}return Ti.E}))}))}resetRootComponentType(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}getTransition(){const r=this.transitions.value;return r.urlAfterRedirects=this.browserUrlTree,r}setTransition(r){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),r))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const a=this.extractLocationChangeInfoFromEvent(r);this.shouldScheduleNavigation(this.lastLocationChangeInfo,a)&&setTimeout(()=>{const{source:c,state:h,urlTree:g}=a,v={replaceUrl:!0};if(h){const I=Object.assign({},h);delete I.navigationId,delete I.\u0275routerPageId,0!==Object.keys(I).length&&(v.state=I)}this.scheduleNavigation(g,c,h,v)},0),this.lastLocationChangeInfo=a}))}extractLocationChangeInfoFromEvent(r){var a;return{source:"popstate"===r.type?"popstate":"hashchange",urlTree:this.parseUrl(r.url),state:(null===(a=r.state)||void 0===a?void 0:a.navigationId)?r.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(r,a){if(!r)return!0;const c=a.urlTree.toString()===r.urlTree.toString();return a.transitionId!==r.transitionId||!c||!("hashchange"===a.source&&"popstate"===r.source||"popstate"===a.source&&"hashchange"===r.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(r){this.events.next(r)}resetConfig(r){Qt(r),this.config=r.map(Ml),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,a={}){const{relativeTo:c,queryParams:h,fragment:g,queryParamsHandling:v,preserveFragment:I}=a,C=c||this.routerState.root,T=I?this.currentUrlTree.fragment:g;let A=null;switch(v){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),h);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=h||null}return null!==A&&(A=this.removeEmptyProps(A)),function(i,n,r,a,c){if(0===r.length)return _g(n.root,n.root,n,a,c);const h=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new Al(!0,0,i);let n=0,r=!1;const a=i.reduce((c,h,g)=>{if("object"==typeof h&&null!=h){if(h.outlets){const v={};return Cn(h.outlets,(I,C)=>{v[C]="string"==typeof I?I.split("/"):I}),[...c,{outlets:v}]}if(h.segmentPath)return[...c,h.segmentPath]}return"string"!=typeof h?[...c,h]:0===g?(h.split("/").forEach((v,I)=>{0==I&&"."===v||(0==I&&""===v?r=!0:".."===v?n++:""!=v&&c.push(v))}),c):[...c,h]},[]);return new Al(r,n,a)}(r);if(h.toRoot())return _g(n.root,new ht([],{}),n,a,c);const g=function(i,n,r){if(i.isAbsolute)return new zu(n.root,!0,0);if(-1===r.snapshot._lastPathIndex){const h=r.snapshot._urlSegment;return new zu(h,h===n.root,0)}const a=Wu(i.commands[0])?0:1;return function(i,n,r){let a=i,c=n,h=r;for(;h>c;){if(h-=c,a=a.parent,!a)throw new Error("Invalid number of '../'");c=a.segments.length}return new zu(a,!1,c-h)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+a,i.numberOfDoubleDots)}(h,n,i),v=g.processChildren?xl(g.segmentGroup,g.index,h.commands):Ku(g.segmentGroup,g.index,h.commands);return _g(g.segmentGroup,v,n,a,c)}(C,this.currentUrlTree,r,A,null!=T?T:null)}navigateByUrl(r,a={skipLocationChange:!1}){const c=gi(r)?r:this.parseUrl(r),h=this.urlHandlingStrategy.merge(c,this.rawUrlTree);return this.scheduleNavigation(h,"imperative",null,a)}navigate(r,a={skipLocationChange:!1}){return function(i){for(let n=0;n<i.length;n++){const r=i[n];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${n}`)}}(r),this.navigateByUrl(this.createUrlTree(r,a),a)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let a;try{a=this.urlSerializer.parse(r)}catch(c){a=this.malformedUriErrorHandler(c,this.urlSerializer,r)}return a}isActive(r,a){let c;if(c=!0===a?Object.assign({},XC):!1===a?Object.assign({},eT):a,gi(r))return Vu(this.currentUrlTree,r,c);const h=this.parseUrl(r);return Vu(this.currentUrlTree,h,c)}removeEmptyProps(r){return Object.keys(r).reduce((a,c)=>{const h=r[c];return null!=h&&(a[c]=h),a},{})}processNavigations(){this.navigations.subscribe(r=>{this.navigated=!0,this.lastSuccessfulId=r.id,this.currentPageId=r.targetPageId,this.events.next(new Ls(r.id,this.serializeUrl(r.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,r.resolve(!0)},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}scheduleNavigation(r,a,c,h,g){var v,I;if(this.disposed)return Promise.resolve(!1);const C=this.getTransition(),T=Gs(a)&&C&&!Gs(C.source),M=(this.lastSuccessfulId===C.id||this.currentNavigation?C.rawUrl:C.urlAfterRedirects).toString()===r.toString();if(T&&M)return Promise.resolve(!0);let z,ye,De;g?(z=g.resolve,ye=g.reject,De=g.promise):De=new Promise((Be,Ye)=>{z=Be,ye=Ye});const qe=++this.navigationId;let Ze;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(c=this.location.getState()),Ze=c&&c.\u0275routerPageId?c.\u0275routerPageId:h.replaceUrl||h.skipLocationChange?null!==(v=this.browserPageId)&&void 0!==v?v:0:(null!==(I=this.browserPageId)&&void 0!==I?I:0)+1):Ze=0,this.setTransition({id:qe,targetPageId:Ze,source:a,restoredState:c,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:h,resolve:z,reject:ye,promise:De,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),De.catch(Be=>Promise.reject(Be))}setBrowserUrl(r,a){const c=this.urlSerializer.serialize(r),h=Object.assign(Object.assign({},a.extras.state),this.generateNgRouterState(a.id,a.targetPageId));this.location.isCurrentPathEqualTo(c)||a.extras.replaceUrl?this.location.replaceState(c,"",h):this.location.go(c,"",h)}restoreHistory(r,a=!1){var c,h;if("computed"===this.canceledNavigationResolution){const g=this.currentPageId-r.targetPageId;"popstate"!==r.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)||0===g?this.currentUrlTree===(null===(h=this.currentNavigation)||void 0===h?void 0:h.finalUrl)&&0===g&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(g)}else"replace"===this.canceledNavigationResolution&&(a&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(r,a){const c=new Oh(r.id,this.serializeUrl(r.extractedUrl),a);this.triggerEvent(c),r.resolve(!1)}generateNgRouterState(r,a){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:a}:{navigationId:r}}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(b.DyG),b.LFG(wl),b.LFG(Ul),b.LFG(Ae),b.LFG(b.zs3),b.LFG(b.v3s),b.LFG(b.Sil),b.LFG(void 0))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();function Gs(i){return"imperative"!==i}let y_=(()=>{class i{constructor(r,a,c,h,g){this.parentContexts=r,this.location=a,this.resolver=c,this.changeDetector=g,this.activated=null,this._activatedRoute=null,this.activateEvents=new b.vpe,this.deactivateEvents=new b.vpe,this.name=h||dt,r.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,r}attach(r,a){this.activated=r,this._activatedRoute=a,this.location.insert(r.hostView)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,a){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;const g=(a=a||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),v=this.parentContexts.getOrCreateContext(this.name).children,I=new I0(r,v,this.location.injector);this.activated=this.location.createComponent(g,this.location.length,I),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(r){return new(r||i)(b.Y36(Ul),b.Y36(b.s_b),b.Y36(b._Vd),b.$8M("name"),b.Y36(b.sBO))},i.\u0275dir=b.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i})();class I0{constructor(n,r,a){this.route=n,this.childContexts=r,this.parent=a}get(n,r){return n===va?this.route:n===Ul?this.childContexts:this.parent.get(n,r)}}class __{}class E_{preload(n,r){return(0,je.of)(null)}}let tf=(()=>{class i{constructor(r,a,c,h,g){this.router=r,this.injector=h,this.preloadingStrategy=g,this.loader=new _0(a,c,C=>r.triggerEvent(new ku(C)),C=>r.triggerEvent(new e_(C)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ai(r=>r instanceof Ls),hi(()=>this.preload())).subscribe(()=>{})}preload(){const r=this.injector.get(b.h0i);return this.processRoutes(r,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,a){const c=[];for(const h of a)if(h.loadChildren&&!h.canLoad&&h._loadedConfig){const g=h._loadedConfig;c.push(this.processRoutes(g.module,g.routes))}else h.loadChildren&&!h.canLoad?c.push(this.preloadConfig(r,h)):h.children&&c.push(this.processRoutes(r,h.children));return(0,$t.D)(c).pipe((0,zr.J)(),(0,nt.U)(h=>{}))}preloadConfig(r,a){return this.preloadingStrategy.preload(a,()=>(a._loadedConfig?(0,je.of)(a._loadedConfig):this.loader.load(r.injector,a)).pipe((0,pn.zg)(h=>(a._loadedConfig=h,this.processRoutes(h.module,h.routes)))))}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(Fr),b.LFG(b.v3s),b.LFG(b.Sil),b.LFG(b.zs3),b.LFG(__))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})(),Bl=(()=>{class i{constructor(r,a,c={}){this.router=r,this.viewportScroller=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(r=>{r instanceof rg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Ls&&(this.lastId=r.id,this.scheduleScrollEvent(r,this.router.parseUrl(r.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(r=>{r instanceof vl&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,a){this.router.triggerEvent(new vl(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,a))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(Fr),b.LFG(du),b.LFG(void 0))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();const So=new b.OlP("ROUTER_CONFIGURATION"),w_=new b.OlP("ROUTER_FORROOT_GUARD"),nf=[Ae,{provide:wl,useClass:Fh},{provide:Fr,useFactory:function(i,n,r,a,c,h,g,v={},I,C){const T=new Fr(null,i,n,r,a,c,h,Bs(g));return I&&(T.urlHandlingStrategy=I),C&&(T.routeReuseStrategy=C),function(i,n){i.errorHandler&&(n.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(n.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(n.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(n.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(n.urlUpdateStrategy=i.urlUpdateStrategy)}(v,T),v.enableTracing&&T.events.subscribe(A=>{var O,M;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(M=console.groupEnd)||void 0===M||M.call(console)}),T},deps:[wl,Ul,Ae,b.zs3,b.v3s,b.Sil,g_,So,[class{},new b.FiY],[class{},new b.FiY]]},Ul,{provide:va,useFactory:function(i){return i.routerState.root},deps:[Fr]},{provide:b.v3s,useClass:b.EAV},tf,E_,class{preload(n,r){return r().pipe(ga(()=>(0,je.of)(null)))}},{provide:So,useValue:{enableTracing:!1}}];function rT(){return new b.PXZ("Router",Fr)}let b_=(()=>{class i{constructor(r,a){}static forRoot(r,a){return{ngModule:i,providers:[nf,Lg(r),{provide:w_,useFactory:b0,deps:[[Fr,new b.FiY,new b.tp0]]},{provide:So,useValue:a||{}},{provide:q,useFactory:sT,deps:[se,[new b.tBr(Ee),new b.FiY],So]},{provide:Bl,useFactory:iT,deps:[Fr,du,So]},{provide:__,useExisting:a&&a.preloadingStrategy?a.preloadingStrategy:E_},{provide:b.PXZ,multi:!0,useFactory:rT},[D_,{provide:b.ip1,multi:!0,useFactory:T0,deps:[D_]},{provide:S0,useFactory:oT,deps:[D_]},{provide:b.tb,multi:!0,useExisting:S0}]]}}static forChild(r){return{ngModule:i,providers:[Lg(r)]}}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(w_,8),b.LFG(Fr,8))},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({}),i})();function iT(i,n,r){return r.scrollOffset&&n.setOffset(r.scrollOffset),new Bl(i,n,r)}function sT(i,n,r={}){return r.useHash?new Se(i,n):new _e(i,n)}function b0(i){return"guarded"}function Lg(i){return[{provide:b.deG,multi:!0,useValue:i},{provide:g_,multi:!0,useValue:i}]}let D_=(()=>{class i{constructor(r){this.injector=r,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new rs.xQ}appInitializer(){return this.injector.get(x,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let a=null;const c=new Promise(v=>a=v),h=this.injector.get(Fr),g=this.injector.get(So);return"disabled"===g.initialNavigation?(h.setUpLocationChangeListener(),a(!0)):"enabled"===g.initialNavigation||"enabledBlocking"===g.initialNavigation?(h.hooks.afterPreactivation=()=>this.initNavigation?(0,je.of)(null):(this.initNavigation=!0,a(!0),this.resultOfPreactivationDone),h.initialNavigation()):a(!0),c})}bootstrapListener(r){const a=this.injector.get(So),c=this.injector.get(tf),h=this.injector.get(Bl),g=this.injector.get(Fr),v=this.injector.get(b.z2F);r===v.components[0]&&(("enabledNonBlocking"===a.initialNavigation||void 0===a.initialNavigation)&&g.initialNavigation(),c.setUpPreloading(),h.init(),g.resetRootComponentType(v.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(b.zs3))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac}),i})();function T0(i){return i.appInitializer.bind(i)}function oT(i){return i.bootstrapListener.bind(i)}const S0=new b.OlP("Router Initializer"),A0=[];let aT=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({imports:[[b_.forRoot(A0)],b_]}),i})(),uT=(()=>{class i{constructor(){this.title="PP-LaboIV"}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=b.Xpm({type:i,selectors:[["app-root"]],decls:2,vars:0,template:function(r,a){1&r&&(b.TgZ(0,"span"),b._uU(1,"setteando primer parcial de labo IV"),b.qZA())},styles:[""]}),i})();var Ni=P(8939),R0=P(3637),Ht=P(9126);function C_(){return i=>i.lift(new cT)}class cT{call(n,r){return r.subscribe(new lT(n))}}class lT extends Jn.L{constructor(n){super(n),this.hasPrev=!1}_next(n){let r;this.hasPrev?r=[this.prev,n]:this.hasPrev=!0,this.prev=n,r&&this.destination.next(r)}}class dT{constructor(n,r){this.compare=n,this.keySelector=r}call(n,r){return r.subscribe(new x0(n,this.compare,this.keySelector))}}class x0 extends Jn.L{constructor(n,r,a){super(n),this.keySelector=a,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}compare(n,r){return n===r}_next(n){let r;try{const{keySelector:c}=this;r=c?c(n):n}catch(c){return this.destination.error(c)}let a=!1;if(this.hasKey)try{const{compare:c}=this;a=c(this.key,r)}catch(c){return this.destination.error(c)}else this.hasKey=!0;a||(this.key=r,this.destination.next(n))}}P(5841);var Oe,Pi=P(4486),ae=P(8239),jl=P(5452),$l=P(6034),Lr=P(5601),at=P(3854),N0="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ds={},Ug=Ug||{},ut=N0||self;function Oi(){}function Hl(i){var n=typeof i;return"array"==(n="object"!=n?n:i?Array.isArray(i)?"array":n:"null")||"object"==n&&"number"==typeof i.length}function Aa(i){var n=typeof i;return"object"==n&&null!=i||"function"==n}var P0="closure_uid_"+(1e9*Math.random()>>>0),hT=0;function O0(i,n,r){return i.call.apply(i.bind,arguments)}function UR(i,n,r){if(!i)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,a),i.apply(n,c)}}return function(){return i.apply(n,arguments)}}function er(i,n,r){return(er=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?O0:UR).apply(null,arguments)}function A_(i,n){var r=Array.prototype.slice.call(arguments,1);return function(){var a=r.slice();return a.push.apply(a,arguments),i.apply(this,a)}}function Gn(i,n){function r(){}r.prototype=n.prototype,i.Z=n.prototype,i.prototype=new r,i.prototype.constructor=i,i.Vb=function(a,c,h){for(var g=Array(arguments.length-2),v=2;v<arguments.length;v++)g[v-2]=arguments[v];return n.prototype[c].apply(a,g)}}function Ao(){this.s=this.s,this.o=this.o}var R_={};Ao.prototype.s=!1,Ao.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,P0)&&i[P0]||(i[P0]=++hT)}(this);delete R_[i]}},Ao.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pT=Array.prototype.indexOf?function(i,n){return Array.prototype.indexOf.call(i,n,void 0)}:function(i,n){if("string"==typeof i)return"string"!=typeof n||1!=n.length?-1:i.indexOf(n,0);for(let r=0;r<i.length;r++)if(r in i&&i[r]===n)return r;return-1},gT=Array.prototype.forEach?function(i,n,r){Array.prototype.forEach.call(i,n,r)}:function(i,n,r){const a=i.length,c="string"==typeof i?i.split(""):i;for(let h=0;h<a;h++)h in c&&n.call(r,c[h],h,i)};function mT(i){return Array.prototype.concat.apply([],arguments)}function M0(i){const n=i.length;if(0<n){const r=Array(n);for(let a=0;a<n;a++)r[a]=i[a];return r}return[]}function x_(i){return/^[\s\xa0]*$/.test(i)}var Jr,yT=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Qr(i,n){return-1!=i.indexOf(n)}function k0(i,n){return i<n?-1:i>n?1:0}e:{var _T=ut.navigator;if(_T){var Ro=_T.userAgent;if(Ro){Jr=Ro;break e}}Jr=""}function rf(i,n,r){for(const a in i)n.call(r,i[a],a,i)}function F0(i){const n={};for(const r in i)n[r]=i[r];return n}var N_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vg(i,n){let r,a;for(let c=1;c<arguments.length;c++){for(r in a=arguments[c],a)i[r]=a[r];for(let h=0;h<N_.length;h++)r=N_[h],Object.prototype.hasOwnProperty.call(a,r)&&(i[r]=a[r])}}function Bg(i){return Bg[" "](i),i}Bg[" "]=Oi;var sf,i,vT=Qr(Jr,"Opera"),mi=Qr(Jr,"Trident")||Qr(Jr,"MSIE"),O_=Qr(Jr,"Edge"),M_=O_||mi,ET=Qr(Jr,"Gecko")&&!(Qr(Jr.toLowerCase(),"webkit")&&!Qr(Jr,"Edge"))&&!(Qr(Jr,"Trident")||Qr(Jr,"MSIE"))&&!Qr(Jr,"Edge"),k_=Qr(Jr.toLowerCase(),"webkit")&&!Qr(Jr,"Edge");function L0(){var i=ut.document;return i?i.documentMode:void 0}e:{var F_="",L_=(i=Jr,ET?/rv:([^\);]+)(\)|;)/.exec(i):O_?/Edge\/([\d\.]+)/.exec(i):mi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):k_?/WebKit\/(\S+)/.exec(i):vT?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(L_&&(F_=L_?L_[1]:""),mi){var Ju=L0();if(null!=Ju&&Ju>parseFloat(F_)){sf=String(Ju);break e}}sf=F_}var Gl={};function U_(){return n=Gl,Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=function(){let i=0;const n=yT(String(sf)).split("."),r=yT("9").split("."),a=Math.max(n.length,r.length);for(let g=0;0==i&&g<a;g++){var c=n[g]||"",h=r[g]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],0==c[0].length&&0==h[0].length)break;i=k0(0==c[1].length?0:parseInt(c[1],10),0==h[1].length?0:parseInt(h[1],10))||k0(0==c[2].length,0==h[2].length)||k0(c[2],h[2]),c=c[3],h=h[3]}while(0==i)}return 0<=i}();var n}var Wl=ut.document&&mi&&(L0()||parseInt(sf,10))||void 0,wT=function(){if(!ut.addEventListener||!Object.defineProperty)return!1;var i=!1,n=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ut.addEventListener("test",Oi,n),ut.removeEventListener("test",Oi,n)}catch(r){}return i}();function tr(i,n){this.type=i,this.g=this.target=n,this.defaultPrevented=!1}function zl(i,n){if(tr.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var r=this.type=i.type,a=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=n,n=i.relatedTarget){if(ET){e:{try{Bg(n.nodeName);var c=!0;break e}catch(h){}c=!1}c||(n=null)}}else"mouseover"==r?n=i.fromElement:"mouseout"==r&&(n=i.toElement);this.relatedTarget=n,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:V_[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&zl.Z.h.call(this)}}tr.prototype.h=function(){this.defaultPrevented=!0},Gn(zl,tr);var V_={2:"touch",3:"pen",4:"mouse"};zl.prototype.h=function(){zl.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Xu="closure_listenable_"+(1e6*Math.random()|0),U0=0;function jg(i,n,r,a,c){this.listener=i,this.proxy=null,this.src=n,this.type=r,this.capture=!!a,this.ia=c,this.key=++U0,this.ca=this.fa=!1}function $g(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function of(i){this.src=i,this.g={},this.h=0}function V0(i,n){var r=n.type;if(r in i.g){var h,a=i.g[r],c=pT(a,n);(h=0<=c)&&Array.prototype.splice.call(a,c,1),h&&($g(n),0==i.g[r].length&&(delete i.g[r],i.h--))}}function Hg(i,n,r,a){for(var c=0;c<i.length;++c){var h=i[c];if(!h.ca&&h.listener==n&&h.capture==!!r&&h.ia==a)return c}return-1}of.prototype.add=function(i,n,r,a,c){var h=i.toString();(i=this.g[h])||(i=this.g[h]=[],this.h++);var g=Hg(i,n,a,c);return-1<g?(n=i[g],r||(n.fa=!1)):((n=new jg(n,this.src,h,!!a,c)).fa=r,i.push(n)),n};var Gg="closure_lm_"+(1e6*Math.random()|0),B_={};function j_(i,n,r,a,c){if(a&&a.once)return Xr(i,n,r,a,c);if(Array.isArray(n)){for(var h=0;h<n.length;h++)j_(i,n[h],r,a,c);return null}return r=H_(r),i&&i[Xu]?i.N(n,r,Aa(a)?!!a.capture:!!a,c):B0(i,n,r,!1,a,c)}function B0(i,n,r,a,c,h){if(!n)throw Error("Invalid event type");var g=Aa(c)?!!c.capture:!!c,v=qg(i);if(v||(i[Gg]=v=new of(i)),(r=v.add(n,r,a,g,h)).proxy)return r;if(a=function(){var n=BR;return function i(r){return n.call(i.src,i.listener,r)}}(),r.proxy=a,a.src=i,a.listener=r,i.addEventListener)wT||(c=g),void 0===c&&(c=!1),i.addEventListener(n.toString(),a,c);else if(i.attachEvent)i.attachEvent(bT(n.toString()),a);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(a)}return r}function Xr(i,n,r,a,c){if(Array.isArray(n)){for(var h=0;h<n.length;h++)Xr(i,n[h],r,a,c);return null}return r=H_(r),i&&i[Xu]?i.O(n,r,Aa(a)?!!a.capture:!!a,c):B0(i,n,r,!0,a,c)}function j0(i,n,r,a,c){if(Array.isArray(n))for(var h=0;h<n.length;h++)j0(i,n[h],r,a,c);else a=Aa(a)?!!a.capture:!!a,r=H_(r),i&&i[Xu]?(i=i.i,(n=String(n).toString())in i.g&&-1<(r=Hg(h=i.g[n],r,a,c))&&($g(h[r]),Array.prototype.splice.call(h,r,1),0==h.length&&(delete i.g[n],i.h--))):i&&(i=qg(i))&&(n=i.g[n.toString()],i=-1,n&&(i=Hg(n,r,a,c)),(r=-1<i?n[i]:null)&&$_(r))}function $_(i){if("number"!=typeof i&&i&&!i.ca){var n=i.src;if(n&&n[Xu])V0(n.i,i);else{var r=i.type,a=i.proxy;n.removeEventListener?n.removeEventListener(r,a,i.capture):n.detachEvent?n.detachEvent(bT(r),a):n.addListener&&n.removeListener&&n.removeListener(a),(r=qg(n))?(V0(r,i),0==r.h&&(r.src=null,n[Gg]=null)):$g(i)}}}function bT(i){return i in B_?B_[i]:B_[i]="on"+i}function BR(i,n){if(i.ca)i=!0;else{n=new zl(n,this);var r=i.listener,a=i.ia||i.src;i.fa&&$_(i),i=r.call(a,n)}return i}function qg(i){return(i=i[Gg])instanceof of?i:null}var $0="__closure_events_fn_"+(1e9*Math.random()>>>0);function H_(i){return"function"==typeof i?i:(i[$0]||(i[$0]=function(n){return i.handleEvent(n)}),i[$0])}function Tn(){Ao.call(this),this.i=new of(this),this.P=this,this.I=null}function qn(i,n){var r,a=i.I;if(a)for(r=[];a;a=a.I)r.push(a);if(i=i.P,a=n.type||n,"string"==typeof n)n=new tr(n,i);else if(n instanceof tr)n.target=n.target||i;else{var c=n;Vg(n=new tr(a,i),c)}if(c=!0,r)for(var h=r.length-1;0<=h;h--){var g=n.g=r[h];c=Wg(g,a,!0,n)&&c}if(c=Wg(g=n.g=i,a,!0,n)&&c,c=Wg(g,a,!1,n)&&c,r)for(h=0;h<r.length;h++)c=Wg(g=n.g=r[h],a,!1,n)&&c}function Wg(i,n,r,a){if(!(n=i.i.g[String(n)]))return!0;n=n.concat();for(var c=!0,h=0;h<n.length;++h){var g=n[h];if(g&&!g.ca&&g.capture==r){var v=g.listener,I=g.ia||g.src;g.fa&&V0(i.i,g),c=!1!==v.call(I,a)&&c}}return c&&!a.defaultPrevented}Gn(Tn,Ao),Tn.prototype[Xu]=!0,Tn.prototype.removeEventListener=function(i,n,r,a){j0(this,i,n,r,a)},Tn.prototype.M=function(){if(Tn.Z.M.call(this),this.i){var n,i=this.i;for(n in i.g){for(var r=i.g[n],a=0;a<r.length;a++)$g(r[a]);delete i.g[n],i.h--}}this.I=null},Tn.prototype.N=function(i,n,r,a){return this.i.add(String(i),n,!1,r,a)},Tn.prototype.O=function(i,n,r,a){return this.i.add(String(i),n,!0,r,a)};var G_=ut.JSON.stringify;function DT(){var i=hs;let n=null;return i.g&&(n=i.g,i.g=i.g.next,i.g||(i.h=null),n.next=null),n}var zg,G0=new class{constructor(i,n){this.i=i,this.j=n,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new q0,i=>i.reset());class q0{constructor(){this.next=this.g=this.h=null}set(n,r){this.h=n,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function CT(i){ut.setTimeout(()=>{throw i},0)}function q_(i,n){zg||function(){var i=ut.Promise.resolve(void 0);zg=function(){i.then(z_)}}(),W_||(zg(),W_=!0),hs.add(i,n)}var W_=!1,hs=new class{constructor(){this.h=this.g=null}add(n,r){const a=G0.get();a.set(n,r),this.h?this.h.next=a:this.g=a,this.h=a}};function z_(){for(var i;i=DT();){try{i.h.call(i.g)}catch(r){CT(r)}var n=G0;n.j(i),100>n.h&&(n.h++,i.next=n.g,n.g=i)}W_=!1}function Kg(i,n){Tn.call(this),this.h=i||1,this.g=n||ut,this.j=er(this.kb,this),this.l=Date.now()}function K_(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function z0(i,n,r){if("function"==typeof i)r&&(i=er(i,r));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=er(i.handleEvent,i)}return 2147483647<Number(n)?-1:ut.setTimeout(i,n||0)}function Z_(i){i.g=z0(()=>{i.g=null,i.i&&(i.i=!1,Z_(i))},i.j);const n=i.h;i.h=null,i.m.apply(null,n)}Gn(Kg,Tn),(Oe=Kg.prototype).da=!1,Oe.S=null,Oe.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),qn(this,"tick"),this.da&&(K_(this),this.start()))}},Oe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Oe.M=function(){Kg.Z.M.call(this),K_(this),delete this.g};class TT extends Ao{constructor(n,r){super(),this.m=n,this.j=r,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:Z_(this)}M(){super.M(),this.g&&(ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function af(i){Ao.call(this),this.h=i,this.g={}}Gn(af,Ao);var K0=[];function Zg(i,n,r,a){Array.isArray(r)||(r&&(K0[0]=r.toString()),r=K0);for(var c=0;c<r.length;c++){var h=j_(n,r[c],a||i.handleEvent,!1,i.h||i);if(!h)break;i.g[h.key]=h}}function Z0(i){rf(i.g,function(n,r){this.g.hasOwnProperty(r)&&$_(n)},i),i.g={}}function Yg(){this.g=!0}function Kl(i,n,r,a){i.info(function(){return"XMLHTTP TEXT ("+n+"): "+function(i,n){if(!i.g)return n;if(!n)return null;try{var r=JSON.parse(n);if(r)for(i=0;i<r.length;i++)if(Array.isArray(r[i])){var a=r[i];if(!(2>a.length)){var c=a[1];if(Array.isArray(c)&&!(1>c.length)){var h=c[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var g=1;g<c.length;g++)c[g]=""}}}return G_(r)}catch(v){return n}}(i,r)+(a?" "+a:"")})}af.prototype.M=function(){af.Z.M.call(this),Z0(this)},af.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yg.prototype.Aa=function(){this.g=!1},Yg.prototype.info=function(){};var xa={},Y0=null;function Jg(){return Y0=Y0||new Tn}function Xg(i){tr.call(this,xa.Ma,i)}function em(i){const n=Jg();qn(n,new Xg(n,i))}function Q0(i,n){tr.call(this,xa.STAT_EVENT,i),this.stat=n}function pr(i){const n=Jg();qn(n,new Q0(n,i))}function X_(i,n){tr.call(this,xa.Na,i),this.size=n}function Zl(i,n){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ut.setTimeout(function(){i()},n)}xa.Ma="serverreachability",Gn(Xg,tr),xa.STAT_EVENT="statevent",Gn(Q0,tr),xa.Na="timingevent",Gn(X_,tr);var uf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ev={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function fs(){}function J0(){}fs.prototype.h=null;var tm,lf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function X0(){tr.call(this,"d")}function Na(){tr.call(this,"c")}function Pa(){}function xo(i,n,r,a){this.l=i,this.j=n,this.m=r,this.X=a||1,this.V=new af(this),this.P=tv,this.W=new Kg(i=M_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new eI}function eI(){this.i=null,this.g="",this.h=!1}Gn(X0,tr),Gn(Na,tr),Gn(Pa,fs),Pa.prototype.g=function(){return new XMLHttpRequest},Pa.prototype.i=function(){return{}},tm=new Pa;var tv=45e3,nm={},rm={};function im(i,n,r){i.K=1,i.v=am(ps(n)),i.s=r,i.U=!0,tI(i,null)}function tI(i,n){i.F=Date.now(),Yl(i),i.A=ps(i.v);var r=i.A,a=i.X;Array.isArray(a)||(a=[String(a)]),lI(r.h,"t",a),i.C=0,r=i.l.H,i.h=new eI,i.g=gv(i.l,r?n:null,!i.s),0<i.O&&(i.L=new TT(er(i.Ia,i,i.g),i.O)),Zg(i.V,i.g,"readystatechange",i.gb),n=i.H?F0(i.H):{},i.s?(i.u||(i.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,n)):(i.u="GET",i.g.ea(i.A,i.u,null,n)),em(1),function(i,n,r,a,c,h){i.info(function(){if(i.g)if(h)for(var g="",v=h.split("&"),I=0;I<v.length;I++){var C=v[I].split("=");if(1<C.length){var T=C[0];C=C[1];var A=T.split("_");g=2<=A.length&&"type"==A[1]?g+(T+"=")+C+"&":g+(T+"=redacted&")}}else g=null;else g=h;return"XMLHTTP REQ ("+a+") [attempt "+c+"]: "+n+"\n"+r+"\n"+g})}(i.j,i.u,i.A,i.m,i.X,i.s)}function sm(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function nI(i,n,r){let c,a=!0;for(;!i.I&&i.C<r.length;){if(c=ST(i,r),c==rm){4==n&&(i.o=4,pr(14),a=!1),Kl(i.j,i.m,null,"[Incomplete Response]");break}if(c==nm){i.o=4,pr(15),Kl(i.j,i.m,r,"[Invalid Chunk]"),a=!1;break}Kl(i.j,i.m,c,null),Oa(i,c)}sm(i)&&c!=rm&&c!=nm&&(i.h.g="",i.C=0),4!=n||0!=r.length||i.h.h||(i.o=1,pr(16),a=!1),i.i=i.i&&a,a?0<r.length&&!i.aa&&(i.aa=!0,(n=i.l).g==i&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),ka(n),n.L=!0,pr(11))):(Kl(i.j,i.m,r,"[Invalid Chunked Response]"),tc(i),hf(i))}function ST(i,n){var r=i.C,a=n.indexOf("\n",r);return-1==a?rm:(r=Number(n.substring(r,a)),isNaN(r)?nm:(a+=1)+r>n.length?rm:(n=n.substr(a,r),i.C=a+r,n))}function Yl(i){i.Y=Date.now()+i.P,ec(i,i.P)}function ec(i,n){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Zl(er(i.eb,i),n)}function df(i){i.B&&(ut.clearTimeout(i.B),i.B=null)}function hf(i){0==i.l.G||i.I||ac(i.l,i)}function tc(i){df(i);var n=i.L;n&&"function"==typeof n.na&&n.na(),i.L=null,K_(i.W),Z0(i.V),i.g&&(n=i.g,i.g=null,n.abort(),n.na())}function Oa(i,n){try{var r=i.l;if(0!=r.G&&(r.g==i||gI(r.i,i)))if(r.I=i.N,!i.J&&gI(r.i,i)&&3==r.G){try{var a=r.Ca.g.parse(n)}catch(C){a=null}if(Array.isArray(a)&&3==a.length){var c=a;if(0==c[0])e:if(r.u)r.ta=c[1],0<r.ta-r.U&&37500>c[2]&&r.N&&0==r.A&&!r.v&&(r.v=Zl(er(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<i.F))break e;Po(r),yi(r)}Ma(r),pr(18)}if(1>=pI(r.i)&&r.ka){try{r.ka()}catch(C){}r.ka=void 0}}else ki(r,11)}else if((i.J||r.g==i)&&Po(r),!x_(n))for(c=r.Ca.g.parse(n),n=0;n<c.length;n++){let C=c[n];if(r.U=C[0],C=C[1],2==r.G)if("c"==C[0]){r.J=C[1],r.la=C[2];const T=C[3];null!=T&&(r.ma=T,r.h.info("VER="+r.ma));const A=C[4];null!=A&&(r.za=A,r.h.info("SVER="+r.za));const O=C[5];null!=O&&"number"==typeof O&&0<O&&(r.K=a=1.5*O,r.h.info("backChannelRequestTimeoutMs_="+a)),a=r;const M=i.g;if(M){const z=M.g?M.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var h=a.i;!h.g&&(Qr(z,"spdy")||Qr(z,"quic")||Qr(z,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(mI(h,h.h),h.h=null))}if(a.D){const ye=M.g?M.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(a.sa=ye,cn(a.F,a.D,ye))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-i.F,r.h.info("Handshake RTT: "+r.O+"ms"));var g=i;if((a=r).oa=pv(a,a.H?a.la:null,a.W),g.J){um(a.i,g);var v=g,I=a.K;I&&v.setTimeout(I),v.B&&(df(v),Yl(v)),a.g=g}else sc(a);0<r.l.length&&qs(r)}else"stop"!=C[0]&&"close"!=C[0]||ki(r,7);else 3==r.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?ki(r,7):yf(r):"noop"!=C[0]&&r.j&&r.j.wa(C),r.A=0)}em(4)}catch(C){}}function nv(i,n){if(i.forEach&&"function"==typeof i.forEach)i.forEach(n,void 0);else if(Hl(i)||"string"==typeof i)gT(i,n,void 0);else{if(i.T&&"function"==typeof i.T)var r=i.T();else if(i.R&&"function"==typeof i.R)r=void 0;else if(Hl(i)||"string"==typeof i){r=[];for(var a=i.length,c=0;c<a;c++)r.push(c)}else for(c in r=[],a=0,i)r[a++]=c;c=(a=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Hl(i)){for(var n=[],r=i.length,a=0;a<r;a++)n.push(i[a]);return n}for(a in n=[],r=0,i)n[r++]=i[a];return n}(i)).length;for(var h=0;h<c;h++)n.call(void 0,a[h],r&&r[h],i)}}function Ql(i,n){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var a=0;a<r;a+=2)this.set(arguments[a],arguments[a+1])}else if(i)if(i instanceof Ql)for(r=i.T(),a=0;a<r.length;a++)this.set(r[a],i.get(r[a]));else for(a in i)this.set(a,i[a])}function rv(i){if(i.i!=i.g.length){for(var n=0,r=0;n<i.g.length;){var a=i.g[n];Jl(i.h,a)&&(i.g[r++]=a),n++}i.g.length=r}if(i.i!=i.g.length){var c={};for(r=n=0;n<i.g.length;)Jl(c,a=i.g[n])||(i.g[r++]=a,c[a]=1),n++;i.g.length=r}}function Jl(i,n){return Object.prototype.hasOwnProperty.call(i,n)}(Oe=xo.prototype).setTimeout=function(i){this.P=i},Oe.gb=function(i){i=i.target;const n=this.L;n&&3==ei(i)?n.l():this.Ia(i)},Oe.Ia=function(i){try{if(i==this.g)e:{const T=ei(this.g);var n=this.g.Da();const A=this.g.ba();if(!(3>T)&&(3!=T||M_||this.g&&(this.h.h||this.g.ga()||hv(this.g)))){this.I||4!=T||7==n||em(8==n||0>=A?3:2),df(this);var r=this.g.ba();this.N=r;t:if(sm(this)){var a=hv(this.g);i="";var c=a.length,h=4==ei(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){tc(this),hf(this);var g="";break t}this.h.i=new ut.TextDecoder}for(n=0;n<c;n++)this.h.h=!0,i+=this.h.i.decode(a[n],{stream:h&&n==c-1});a.splice(0,c),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.ga();if(this.i=200==r,function(i,n,r,a,c,h,g){i.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+c+"]: "+n+"\n"+r+"\n"+h+" "+g})}(this.j,this.u,this.A,this.m,this.X,T,r),this.i){if(this.$&&!this.J){t:{if(this.g){var v,I=this.g;if((v=I.g?I.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x_(v)){var C=v;break t}}C=null}if(!(r=C)){this.i=!1,this.o=3,pr(12),tc(this),hf(this);break e}Kl(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Oa(this,r)}this.U?(nI(this,T,g),M_&&this.i&&3==T&&(Zg(this.V,this.W,"tick",this.fb),this.W.start())):(Kl(this.j,this.m,g,null),Oa(this,g)),4==T&&tc(this),this.i&&!this.I&&(4==T?ac(this.l,this):(this.i=!1,Yl(this)))}else 400==r&&0<g.indexOf("Unknown SID")?(this.o=3,pr(12)):(this.o=0,pr(13)),tc(this),hf(this)}}}catch(T){}},Oe.fb=function(){if(this.g){var i=ei(this.g),n=this.g.ga();this.C<n.length&&(df(this),nI(this,i,n),this.i&&4!=i&&Yl(this))}},Oe.cancel=function(){this.I=!0,tc(this)},Oe.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function(i,n){i.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(em(3),pr(17)),tc(this),this.o=2,hf(this)):ec(this,this.Y-i)},(Oe=Ql.prototype).R=function(){rv(this);for(var i=[],n=0;n<this.g.length;n++)i.push(this.h[this.g[n]]);return i},Oe.T=function(){return rv(this),this.g.concat()},Oe.get=function(i,n){return Jl(this.h,i)?this.h[i]:n},Oe.set=function(i,n){Jl(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=n},Oe.forEach=function(i,n){for(var r=this.T(),a=0;a<r.length;a++){var c=r[a],h=this.get(c);i.call(n,h,c,this)}};var rI=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tt(i,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Tt){this.g=void 0!==n?n:i.g,iv(this,i.j),this.s=i.s,Mi(this,i.i),Xl(this,i.m),this.l=i.l,n=i.h;var r=new nd;r.i=n.i,n.g&&(r.g=new Ql(n.g),r.h=n.h),om(this,r),this.o=i.o}else i&&(r=String(i).match(rI))?(this.g=!!n,iv(this,r[1]||"",!0),this.s=ed(r[2]||""),Mi(this,r[3]||"",!0),Xl(this,r[4]),this.l=ed(r[5]||"",!0),om(this,r[6]||"",!0),this.o=ed(r[7]||"")):(this.g=!!n,this.h=new nd(null,this.g))}function ps(i){return new Tt(i)}function iv(i,n,r){i.j=r?ed(n,!0):n,i.j&&(i.j=i.j.replace(/:$/,""))}function Mi(i,n,r){i.i=r?ed(n,!0):n}function Xl(i,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);i.m=n}else i.m=null}function om(i,n,r){n instanceof nd?(i.h=n,function(i,n){n&&!i.j&&(No(i),i.i=null,i.g.forEach(function(r,a){var c=a.toLowerCase();a!=c&&(ov(this,a),lI(this,c,r))},i)),i.j=n}(i.h,i.g)):(r||(n=td(n,sv)),i.h=new nd(n,i.g))}function cn(i,n,r){i.h.set(n,r)}function am(i){return cn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ed(i,n){return i?n?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function td(i,n,r){return"string"==typeof i?(i=encodeURI(i).replace(n,oI),r&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function oI(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Tt.prototype.toString=function(){var i=[],n=this.j;n&&i.push(td(n,aI,!0),":");var r=this.i;return(r||"file"==n)&&(i.push("//"),(n=this.s)&&i.push(td(n,aI,!0),"@"),i.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&i.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&i.push("/"),i.push(td(r,"/"==r.charAt(0)?ff:xT,!0))),(r=this.h.toString())&&i.push("?",r),(r=this.o)&&i.push("#",td(r,uI)),i.join("")};var aI=/[#\/\?@]/g,xT=/[#\?:]/g,ff=/[#\?]/g,sv=/[#\?@]/g,uI=/#/g;function nd(i,n){this.h=this.g=null,this.i=i||null,this.j=!!n}function No(i){i.g||(i.g=new Ql,i.h=0,i.i&&function(i,n){if(i){i=i.split("&");for(var r=0;r<i.length;r++){var a=i[r].indexOf("="),c=null;if(0<=a){var h=i[r].substring(0,a);c=i[r].substring(a+1)}else h=i[r];n(h,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(i.i,function(n,r){i.add(decodeURIComponent(n.replace(/\+/g," ")),r)}))}function ov(i,n){No(i),n=rd(i,n),Jl(i.g.h,n)&&(i.i=null,i.h-=i.g.get(n).length,Jl((i=i.g).h,n)&&(delete i.h[n],i.i--,i.g.length>2*i.i&&rv(i)))}function cI(i,n){return No(i),n=rd(i,n),Jl(i.g.h,n)}function lI(i,n,r){ov(i,n),0<r.length&&(i.i=null,i.g.set(rd(i,n),M0(r)),i.h+=r.length)}function rd(i,n){return n=String(n),i.j&&(n=n.toLowerCase()),n}function PT(i){this.l=i||hI,i=ut.PerformanceNavigationTiming?0<(i=ut.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ut.g&&ut.g.Ea&&ut.g.Ea()&&ut.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Oe=nd.prototype).add=function(i,n){No(this),this.i=null,i=rd(this,i);var r=this.g.get(i);return r||this.g.set(i,r=[]),r.push(n),this.h+=1,this},Oe.forEach=function(i,n){No(this),this.g.forEach(function(r,a){gT(r,function(c){i.call(n,c,a,this)},this)},this)},Oe.T=function(){No(this);for(var i=this.g.R(),n=this.g.T(),r=[],a=0;a<n.length;a++)for(var c=i[a],h=0;h<c.length;h++)r.push(n[a]);return r},Oe.R=function(i){No(this);var n=[];if("string"==typeof i)cI(this,i)&&(n=mT(n,this.g.get(rd(this,i))));else{i=this.g.R();for(var r=0;r<i.length;r++)n=mT(n,i[r])}return n},Oe.set=function(i,n){return No(this),this.i=null,cI(this,i=rd(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[n]),this.h+=1,this},Oe.get=function(i,n){return i&&0<(i=this.R(i)).length?String(i[0]):n},Oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],n=this.g.T(),r=0;r<n.length;r++){var a=n[r],c=encodeURIComponent(String(a));a=this.R(a);for(var h=0;h<a.length;h++){var g=c;""!==a[h]&&(g+="="+encodeURIComponent(String(a[h]))),i.push(g)}}return this.i=i.join("&")};var hI=10;function fI(i){return!!i.h||!!i.g&&i.g.size>=i.j}function pI(i){return i.h?1:i.g?i.g.size:0}function gI(i,n){return i.h?i.h==n:!!i.g&&i.g.has(n)}function mI(i,n){i.g?i.g.add(n):i.h=n}function um(i,n){i.h&&i.h==n?i.h=null:i.g&&i.g.has(n)&&i.g.delete(n)}function yI(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let n=i.i;for(const r of i.g.values())n=n.concat(r.D);return n}return M0(i.i)}function cm(){}function _I(){this.g=new cm}function jR(i,n,r){const a=r||"";try{nv(i,function(c,h){let g=c;Aa(c)&&(g=G_(c)),n.push(a+h+"="+encodeURIComponent(g))})}catch(c){throw n.push(a+"type="+encodeURIComponent("_badmap")),c}}function av(i,n,r,a,c){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,c(a)}catch(h){}}function lm(i){this.l=i.$b||null,this.j=i.ib||!1}function uv(i,n){Tn.call(this),this.D=i,this.u=n,this.m=void 0,this.readyState=dm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}PT.prototype.cancel=function(){if(this.i=yI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},cm.prototype.stringify=function(i){return ut.JSON.stringify(i,void 0)},cm.prototype.parse=function(i){return ut.JSON.parse(i,void 0)},Gn(lm,fs),lm.prototype.g=function(){return new uv(this.l,this.j)},lm.prototype.i=function(i){return function(){return i}}({}),Gn(uv,Tn);var dm=0;function cv(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function id(i){i.readyState=4,i.l=null,i.j=null,i.A=null,pf(i)}function pf(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Oe=uv.prototype).open=function(i,n){if(this.readyState!=dm)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=n,this.readyState=1,pf(this)},Oe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(n.body=i),(this.D||ut).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},Oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,id(this)),this.readyState=dm},Oe.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,pf(this)),this.g&&(this.readyState=3,pf(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ut.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cv(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Oe.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var n=i.value?i.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!i.done}))&&(this.response=this.responseText+=n)}i.done?id(this):pf(this),3==this.readyState&&cv(this)}},Oe.Ua=function(i){this.g&&(this.response=this.responseText=i,id(this))},Oe.Ta=function(i){this.g&&(this.response=i,id(this))},Oe.ha=function(){this.g&&id(this)},Oe.setRequestHeader=function(i,n){this.v.append(i,n)},Oe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Oe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],n=this.h.entries();for(var r=n.next();!r.done;)i.push((r=r.value)[0]+": "+r[1]),r=n.next();return i.join("\r\n")},Object.defineProperty(uv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var $R=ut.JSON.parse;function wn(i){Tn.call(this),this.headers=new Ql,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=lv,this.K=this.L=!1}Gn(wn,Tn);var lv="",OT=/^https?$/i,dv=["POST","PUT"];function kT(i){return"content-type"==i.toLowerCase()}function vI(i,n){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=n,i.m=5,EI(i),hm(i)}function EI(i){i.D||(i.D=!0,qn(i,"complete"),qn(i,"error"))}function wI(i){if(i.h&&void 0!==Ug&&(!i.C[1]||4!=ei(i)||2!=i.ba()))if(i.v&&4==ei(i))z0(i.Fa,0,i);else if(qn(i,"readystatechange"),4==ei(i)){i.h=!1;try{const v=i.ba();e:switch(v){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var a;if(a=0===v){var c=String(i.H).match(rI)[1]||null;if(!c&&ut.self&&ut.self.location){var h=ut.self.location.protocol;c=h.substr(0,h.length-1)}a=!OT.test(c?c.toLowerCase():"")}r=a}if(r)qn(i,"complete"),qn(i,"success");else{i.m=6;try{var g=2<ei(i)?i.g.statusText:""}catch(I){g=""}i.j=g+" ["+i.ba()+"]",EI(i)}}finally{hm(i)}}}function hm(i,n){if(i.g){gf(i);const r=i.g,a=i.C[0]?Oi:null;i.g=null,i.C=null,n||qn(i,"ready");try{r.onreadystatechange=a}catch(c){}}}function gf(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ut.clearTimeout(i.A),i.A=null)}function ei(i){return i.g?i.g.readyState:0}function hv(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case lv:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(n){return null}}function nc(i,n,r){e:{for(a in r){var a=!1;break e}a=!0}a||(r=function(i){let n="";return rf(i,function(r,a){n+=a,n+=":",n+=r,n+="\r\n"}),n}(r),"string"==typeof i?null!=r&&encodeURIComponent(String(r)):cn(i,n,r))}function mf(i,n,r){return r&&r.internalChannelParams&&r.internalChannelParams[i]||n}function II(i){this.za=0,this.l=[],this.h=new Yg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=mf("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=mf("baseRetryDelayMs",5e3,i),this.$a=mf("retryDelaySeedMs",1e4,i),this.Ya=mf("forwardChannelMaxRetries",2,i),this.ra=mf("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new PT(i&&i.concurrentRequestLimit),this.Ca=new _I,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function yf(i){if(sd(i),3==i.G){var n=i.V++,r=ps(i.F);cn(r,"SID",i.J),cn(r,"RID",n),cn(r,"TYPE","terminate"),rc(i,r),(n=new xo(i,i.h,n,void 0)).K=2,n.v=am(ps(r)),r=!1,ut.navigator&&ut.navigator.sendBeacon&&(r=ut.navigator.sendBeacon(n.v.toString(),"")),!r&&ut.Image&&((new Image).src=n.v,r=!0),r||(n.g=gv(n.l,null),n.g.ea(n.v)),n.F=Date.now(),Yl(n)}fv(i)}function yi(i){i.g&&(ka(i),i.g.cancel(),i.g=null)}function sd(i){yi(i),i.u&&(ut.clearTimeout(i.u),i.u=null),Po(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ut.clearTimeout(i.m),i.m=null)}function Wn(i,n){i.l.push(new class{constructor(i,n){this.h=i,this.g=n}}(i.Za++,n)),3==i.G&&qs(i)}function qs(i){fI(i.i)||i.m||(i.m=!0,q_(i.Ha,i),i.C=0)}function _i(i,n){var r;r=n?n.m:i.V++;const a=ps(i.F);cn(a,"SID",i.J),cn(a,"RID",r),cn(a,"AID",i.U),rc(i,a),i.o&&i.s&&nc(a,i.o,i.s),r=new xo(i,i.h,r,i.C+1),null===i.o&&(r.H=i.s),n&&(i.l=n.D.concat(i.l)),n=ic(i,r,1e3),r.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),mI(i.i,r),im(r,a,n)}function rc(i,n){i.j&&nv({},function(r,a){cn(n,a,r)})}function ic(i,n,r){r=Math.min(i.l.length,r);var a=i.j?er(i.j.Oa,i.j,i):null;e:{var c=i.l;let h=-1;for(;;){const g=["count="+r];-1==h?0<r?(h=c[0].h,g.push("ofs="+h)):h=0:g.push("ofs="+h);let v=!0;for(let I=0;I<r;I++){let C=c[I].h;const T=c[I].g;if(C-=h,0>C)h=Math.max(0,c[I].h-100),v=!1;else try{jR(T,g,"req"+C+"_")}catch(A){a&&a(T)}}if(v){a=g.join("&");break e}}}return i=i.l.splice(0,r),n.D=i,a}function sc(i){i.g||i.u||(i.Y=1,q_(i.Ga,i),i.A=0)}function Ma(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Zl(er(i.Ga,i),uc(i,i.A)),i.A++,0))}function ka(i){null!=i.B&&(ut.clearTimeout(i.B),i.B=null)}function oc(i){i.g=new xo(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var n=ps(i.oa);cn(n,"RID","rpc"),cn(n,"SID",i.J),cn(n,"CI",i.N?"0":"1"),cn(n,"AID",i.U),rc(i,n),cn(n,"TYPE","xmlhttp"),i.o&&i.s&&nc(n,i.o,i.s),i.K&&i.g.setTimeout(i.K);var r=i.g;i=i.la,r.K=1,r.v=am(ps(n)),r.s=null,r.U=!0,tI(r,i)}function Po(i){null!=i.v&&(ut.clearTimeout(i.v),i.v=null)}function ac(i,n){var r=null;if(i.g==n){Po(i),ka(i),i.g=null;var a=2}else{if(!gI(i.i,n))return;r=n.D,um(i.i,n),a=1}if(i.I=n.N,0!=i.G)if(n.i)if(1==a){r=n.s?n.s.length:0,n=Date.now()-n.F;var c=i.C;qn(a=Jg(),new X_(a,r,n,c)),qs(i)}else sc(i);else if(3==(c=n.o)||0==c&&0<i.I||!(1==a&&function(i,n){return!(pI(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=n.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Zl(er(i.Ha,i,n),uc(i,i.C)),i.C++,0)))}(i,n)||2==a&&Ma(i)))switch(r&&0<r.length&&(n=i.i,n.i=n.i.concat(r)),c){case 1:ki(i,5);break;case 4:ki(i,10);break;case 3:ki(i,6);break;default:ki(i,2)}}function uc(i,n){let r=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(r*=2),r*n}function ki(i,n){if(i.h.info("Error code "+n),2==n){var r=null;i.j&&(r=null);var a=er(i.jb,i);r||(r=new Tt("//www.google.com/images/cleardot.gif"),ut.location&&"http"==ut.location.protocol||iv(r,"https"),am(r)),function(i,n){const r=new Yg;if(ut.Image){const a=new Image;a.onload=A_(av,r,a,"TestLoadImage: loaded",!0,n),a.onerror=A_(av,r,a,"TestLoadImage: error",!1,n),a.onabort=A_(av,r,a,"TestLoadImage: abort",!1,n),a.ontimeout=A_(av,r,a,"TestLoadImage: timeout",!1,n),ut.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=i}else n(!1)}(r.toString(),a)}else pr(2);i.G=0,i.j&&i.j.va(n),fv(i),sd(i)}function fv(i){i.G=0,i.I=-1,i.j&&((0!=yI(i.i).length||0!=i.l.length)&&(i.i.i.length=0,M0(i.l),i.l.length=0),i.j.ua())}function pv(i,n,r){let a=function(i){return i instanceof Tt?ps(i):new Tt(i,void 0)}(r);if(""!=a.i)n&&Mi(a,n+"."+a.i),Xl(a,a.m);else{const c=ut.location;a=function(i,n,r,a){var c=new Tt(null,void 0);return i&&iv(c,i),n&&Mi(c,n),r&&Xl(c,r),a&&(c.l=a),c}(c.protocol,n?n+"."+c.hostname:c.hostname,+c.port,r)}return i.aa&&rf(i.aa,function(c,h){cn(a,h,c)}),r=i.sa,(n=i.D)&&r&&cn(a,n,r),cn(a,"VER",i.ma),rc(i,a),a}function gv(i,n,r){if(n&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new wn(r&&i.Ba&&!i.qa?new lm({ib:!0}):i.qa)).L=i.H,n}function mv(){}function _f(){if(mi&&!(10<=Number(Wl)))throw Error("Environmental error: no available transport.")}function ti(i,n){Tn.call(this),this.g=new II(n),this.l=i,this.h=n&&n.messageUrlParams||null,i=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(i?i["X-WebChannel-Content-Type"]=n.messageContentType:i={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(i?i["X-WebChannel-Client-Profile"]=n.ya:i={"X-WebChannel-Client-Profile":n.ya}),this.g.P=i,(i=n&&n.httpHeadersOverwriteParam)&&!x_(i)&&(this.g.o=i),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!x_(n)&&(this.g.D=n,null!==(i=this.h)&&n in i&&n in(i=this.h)&&delete i[n]),this.j=new cc(this)}function yv(i){X0.call(this);var n=i.__sm__;if(n){e:{for(const r in n){i=r;break e}i=void 0}(this.i=i)&&(i=this.i,n=null!==n&&i in n?n[i]:void 0),this.data=n}else this.data=i}function _v(){Na.call(this),this.status=1}function cc(i){this.g=i}(Oe=wn.prototype).ea=function(i,n,r,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);n=n?n.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():tm.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:tm),this.g.onreadystatechange=er(this.Fa,this);try{this.F=!0,this.g.open(n,String(i),!0),this.F=!1}catch(h){return void vI(this,h)}i=r||"";const c=new Ql(this.headers);a&&nv(a,function(h,g){c.set(g,h)}),a=function(i){e:{var n=kT;const r=i.length,a="string"==typeof i?i.split(""):i;for(let c=0;c<r;c++)if(c in a&&n.call(void 0,a[c],c,i)){n=c;break e}n=-1}return 0>n?null:"string"==typeof i?i.charAt(n):i[n]}(c.T()),r=ut.FormData&&i instanceof ut.FormData,!(0<=pT(dv,n))||a||r||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),c.forEach(function(h,g){this.g.setRequestHeader(g,h)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gf(this),0<this.B&&((this.K=function(i){return mi&&U_()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=er(this.pa,this)):this.A=z0(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(h){vI(this,h)}},Oe.pa=function(){void 0!==Ug&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qn(this,"timeout"),this.abort(8))},Oe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,qn(this,"complete"),qn(this,"abort"),hm(this))},Oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hm(this,!0)),wn.Z.M.call(this)},Oe.Fa=function(){this.s||(this.F||this.v||this.l?wI(this):this.cb())},Oe.cb=function(){wI(this)},Oe.ba=function(){try{return 2<ei(this)?this.g.status:-1}catch(i){return-1}},Oe.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Oe.Qa=function(i){if(this.g){var n=this.g.responseText;return i&&0==n.indexOf(i)&&(n=n.substring(i.length)),$R(n)}},Oe.Da=function(){return this.m},Oe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Oe=II.prototype).ma=8,Oe.G=1,Oe.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(n){}},Oe.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const c=new xo(this,this.h,i,void 0);let h=this.s;if(this.P&&(h?(h=F0(h),Vg(h,this.P)):h=this.P),null===this.o&&(c.H=h),this.ja)e:{for(var n=0,r=0;r<this.l.length;r++){var a=this.l[r];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(n+=a)){n=r;break e}if(4096===n||r===this.l.length-1){n=r+1;break e}}n=1e3}else n=1e3;n=ic(this,c,n),cn(r=ps(this.F),"RID",i),cn(r,"CVER",22),this.D&&cn(r,"X-HTTP-Session-Id",this.D),rc(this,r),this.o&&h&&nc(r,this.o,h),mI(this.i,c),this.Ra&&cn(r,"TYPE","init"),this.ja?(cn(r,"$req",n),cn(r,"SID","null"),c.$=!0,im(c,r,null)):im(c,r,n),this.G=2}}else 3==this.G&&(i?_i(this,i):0==this.l.length||fI(this.i)||_i(this))},Oe.Ga=function(){if(this.u=null,oc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Zl(er(this.bb,this),i)}},Oe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,pr(10),yi(this),oc(this))},Oe.ab=function(){null!=this.v&&(this.v=null,yi(this),Ma(this),pr(19))},Oe.jb=function(i){i?(this.h.info("Successfully pinged google.com"),pr(2)):(this.h.info("Failed to ping google.com"),pr(1))},(Oe=mv.prototype).xa=function(){},Oe.wa=function(){},Oe.va=function(){},Oe.ua=function(){},Oe.Oa=function(){},_f.prototype.g=function(i,n){return new ti(i,n)},Gn(ti,Tn),ti.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,n=this.l,r=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),q_(er(i.hb,i,n))),pr(0),i.W=n,i.aa=r||{},i.N=i.X,i.F=pv(i,null,i.W),qs(i)},ti.prototype.close=function(){yf(this.g)},ti.prototype.u=function(i){if("string"==typeof i){var n={};n.__data__=i,Wn(this.g,n)}else this.v?((n={}).__data__=G_(i),Wn(this.g,n)):Wn(this.g,i)},ti.prototype.M=function(){this.g.j=null,delete this.j,yf(this.g),delete this.g,ti.Z.M.call(this)},Gn(yv,X0),Gn(_v,Na),Gn(cc,mv),cc.prototype.xa=function(){qn(this.g,"a")},cc.prototype.wa=function(i){qn(this.g,new yv(i))},cc.prototype.va=function(i){qn(this.g,new _v(i))},cc.prototype.ua=function(){qn(this.g,"b")},_f.prototype.createWebChannel=_f.prototype.g,ti.prototype.send=ti.prototype.u,ti.prototype.open=ti.prototype.m,ti.prototype.close=ti.prototype.close,uf.NO_ERROR=0,uf.TIMEOUT=8,uf.HTTP_ERROR=6,ev.COMPLETE="complete",J0.EventType=lf,lf.OPEN="a",lf.CLOSE="b",lf.ERROR="c",lf.MESSAGE="d",Tn.prototype.listen=Tn.prototype.N,wn.prototype.listenOnce=wn.prototype.O,wn.prototype.getLastError=wn.prototype.La,wn.prototype.getLastErrorCode=wn.prototype.Da,wn.prototype.getStatus=wn.prototype.ba,wn.prototype.getResponseJson=wn.prototype.Qa,wn.prototype.getResponseText=wn.prototype.ga,wn.prototype.send=wn.prototype.ea;var FT=ds.createWebChannelTransport=function(){return new _f},LT=ds.getStatEventTarget=function(){return Jg()},vv=ds.ErrorCode=uf,UT=ds.EventType=ev,bI=ds.Event=xa,DI=ds.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},HR=ds.FetchXmlHttpFactory=lm,pm=ds.WebChannel=J0,CI=ds.XhrIo=wn;class nr{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}nr.UNAUTHENTICATED=new nr(null),nr.GOOGLE_CREDENTIALS=new nr("google-credentials-uid"),nr.FIRST_PARTY=new nr("first-party-uid"),nr.MOCK_USER=new nr("mock-user");let lc="9.1.0";const Fa=new Lr.Yd("@firebase/firestore");function Ev(){return Fa.logLevel}function we(i,...n){if(Fa.logLevel<=Lr.in.DEBUG){const r=n.map(TI);Fa.debug(`Firestore (${lc}): ${i}`,...r)}}function In(i,...n){if(Fa.logLevel<=Lr.in.ERROR){const r=n.map(TI);Fa.error(`Firestore (${lc}): ${i}`,...r)}}function gm(i,...n){if(Fa.logLevel<=Lr.in.WARN){const r=n.map(TI);Fa.warn(`Firestore (${lc}): ${i}`,...r)}}function TI(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(r){return i}}function Ve(i="Unexpected state"){const n=`FIRESTORE (${lc}) INTERNAL ASSERTION FAILED: `+i;throw In(n),new Error(n)}function Je(i,n){i||Ve()}function Te(i,n){return i}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Error{constructor(n,r){super(r),this.code=n,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sn{constructor(){this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}}class SI{constructor(n,r){this.user=r,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${n}`}}class WR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,r){n.enqueueRetryable(()=>r(nr.UNAUTHENTICATED))}shutdown(){}}class zR{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,r){this.changeListener=r,n.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class KR{constructor(n){this.t=n,this.currentUser=nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,r){var a=this;let c=this.i;const h=C=>this.i!==c?(c=this.i,r(C)):Promise.resolve();let g=new Sn;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Sn,n.enqueueRetryable(()=>h(this.currentUser))};const v=()=>{const C=g;n.enqueueRetryable((0,ae.Z)(function*(){yield C.promise,yield h(a.currentUser)}))},I=C=>{we("FirebaseCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),v()};this.t.onInit(C=>I(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?I(C):(we("FirebaseCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Sn)}},0),v()}getToken(){const n=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==n?(we("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Je("string"==typeof a.accessToken),new SI(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return Je(null===n||"string"==typeof n),new nr(n)}}class VT{constructor(n,r,a){this.h=n,this.l=r,this.m=a,this.type="FirstParty",this.user=nr.FIRST_PARTY}get authHeaders(){const n={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(n.Authorization=r),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}class AI{constructor(n,r,a){this.h=n,this.l=r,this.m=a}getToken(){return Promise.resolve(new VT(this.h,this.l,this.m))}start(n,r){n.enqueueRetryable(()=>r(nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fi{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=a=>this.g(a),this.p=a=>r.writeSequenceNumber(a))}g(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.p&&this.p(n),n}}function BT(i){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(r);else for(let a=0;a<i;a++)r[a]=Math.floor(256*Math.random());return r}Fi.T=-1;class dc{static I(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/n.length)*n.length;let a="";for(;a.length<20;){const c=BT(40);for(let h=0;h<c.length;++h)a.length<20&&c[h]<r&&(a+=n.charAt(c[h]%n.length))}return a}}function mt(i,n){return i<n?-1:i>n?1:0}function hc(i,n,r){return i.length===n.length&&i.every((a,c)=>r(a,n[c]))}function RI(i){return i+"\0"}class On{constructor(n,r){if(this.seconds=n,this.nanoseconds=r,r<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return On.fromMillis(Date.now())}static fromDate(n){return On.fromMillis(n.getTime())}static fromMillis(n){const r=Math.floor(n/1e3),a=Math.floor(1e6*(n-1e3*r));return new On(r,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?mt(this.nanoseconds,n.nanoseconds):mt(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class it{constructor(n){this.timestamp=n}static fromTimestamp(n){return new it(n)}static min(){return new it(new On(0,0))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function xI(i){let n=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n++;return n}function La(i,n){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n(r,i[r])}function NI(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}class vf{constructor(n,r,a){void 0===r?r=0:r>n.length&&Ve(),void 0===a?a=n.length-r:a>n.length-r&&Ve(),this.segments=n,this.offset=r,this.len=a}get length(){return this.len}isEqual(n){return 0===vf.comparator(this,n)}child(n){const r=this.segments.slice(this.offset,this.limit());return n instanceof vf?n.forEach(a=>{r.push(a)}):r.push(n),this.construct(r)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}forEach(n){for(let r=this.offset,a=this.limit();r<a;r++)n(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,r){const a=Math.min(n.length,r.length);for(let c=0;c<a;c++){const h=n.get(c),g=r.get(c);if(h<g)return-1;if(h>g)return 1}return n.length<r.length?-1:n.length>r.length?1:0}}class Ct extends vf{construct(n,r,a){return new Ct(n,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const r=[];for(const a of n){if(a.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(c=>c.length>0))}return new Ct(r)}static emptyPath(){return new Ct([])}}const jT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends vf{construct(n,r,a){return new rr(n,r,a)}static isValidIdentifier(n){return jT.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(n){const r=[];let a="",c=0;const h=()=>{if(0===a.length)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let g=!1;for(;c<n.length;){const v=n[c];if("\\"===v){if(c+1===n.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const I=n[c+1];if("\\"!==I&&"."!==I&&"`"!==I)throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);a+=I,c+=2}else"`"===v?(g=!g,c++):"."!==v||g?(a+=v,c++):(h(),c++)}if(h(),g)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new rr(r)}static emptyPath(){return new rr([])}}class fc{constructor(n){this.fields=n,n.sort(rr.comparator)}covers(n){for(const r of this.fields)if(r.isPrefixOf(n))return!0;return!1}isEqual(n){return hc(this.fields,n.fields,(r,a)=>r.isEqual(a))}}class Mn{constructor(n){this.binaryString=n}static fromBase64String(n){const r=atob(n);return new Mn(r)}static fromUint8Array(n){const r=function(a){let c="";for(let h=0;h<a.length;++h)c+=String.fromCharCode(a[h]);return c}(n);return new Mn(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return mt(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const PI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(i){if(Je(!!i),"string"==typeof i){let n=0;const r=PI.exec(i);if(Je(!!r),r[1]){let c=r[1];c=(c+"000000000").substr(0,9),n=Number(c)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:n}}return{seconds:kn(i.seconds),nanos:kn(i.nanos)}}function kn(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ua(i){return"string"==typeof i?Mn.fromBase64String(i):Mn.fromUint8Array(i)}function wv(i){var n,r;return"server_timestamp"===(null===(r=((null===(n=null==i?void 0:i.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function HT(i){const n=i.mapValue.fields.__previous_value__;return wv(n)?HT(n):n}function Oo(i){const n=Ws(i.mapValue.fields.__local_write_time__.timestampValue);return new On(n.seconds,n.nanos)}function pc(i){return null==i}function Ef(i){return 0===i&&1/i==-1/0}function mm(i){return"number"==typeof i&&Number.isInteger(i)&&!Ef(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Ue{constructor(n){this.path=n}static fromPath(n){return new Ue(Ct.fromString(n))}static fromName(n){return new Ue(Ct.fromString(n).popFirst(5))}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}isEqual(n){return null!==n&&0===Ct.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,r){return Ct.comparator(n.path,r.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new Ue(new Ct(n.slice()))}}function Mo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?wv(i)?4:10:Ve()}function Li(i,n){const r=Mo(i);if(r!==Mo(n))return!1;switch(r){case 0:return!0;case 1:return i.booleanValue===n.booleanValue;case 4:return Oo(i).isEqual(Oo(n));case 3:return function(a,c){if("string"==typeof a.timestampValue&&"string"==typeof c.timestampValue&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const h=Ws(a.timestampValue),g=Ws(c.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos}(i,n);case 5:return i.stringValue===n.stringValue;case 6:return c=n,Ua(i.bytesValue).isEqual(Ua(c.bytesValue));case 7:return i.referenceValue===n.referenceValue;case 8:return function(a,c){return kn(a.geoPointValue.latitude)===kn(c.geoPointValue.latitude)&&kn(a.geoPointValue.longitude)===kn(c.geoPointValue.longitude)}(i,n);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return kn(a.integerValue)===kn(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const h=kn(a.doubleValue),g=kn(c.doubleValue);return h===g?Ef(h)===Ef(g):isNaN(h)&&isNaN(g)}return!1}(i,n);case 9:return hc(i.arrayValue.values||[],n.arrayValue.values||[],Li);case 10:return function(a,c){const h=a.mapValue.fields||{},g=c.mapValue.fields||{};if(xI(h)!==xI(g))return!1;for(const v in h)if(h.hasOwnProperty(v)&&(void 0===g[v]||!Li(h[v],g[v])))return!1;return!0}(i,n);default:return Ve()}var c}function od(i,n){return void 0!==(i.values||[]).find(r=>Li(r,n))}function wf(i,n){const r=Mo(i),a=Mo(n);if(r!==a)return mt(r,a);switch(r){case 0:return 0;case 1:return mt(i.booleanValue,n.booleanValue);case 2:return function(c,h){const g=kn(c.integerValue||c.doubleValue),v=kn(h.integerValue||h.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1}(i,n);case 3:return OI(i.timestampValue,n.timestampValue);case 4:return OI(Oo(i),Oo(n));case 5:return mt(i.stringValue,n.stringValue);case 6:return function(c,h){const g=Ua(c),v=Ua(h);return g.compareTo(v)}(i.bytesValue,n.bytesValue);case 7:return function(c,h){const g=c.split("/"),v=h.split("/");for(let I=0;I<g.length&&I<v.length;I++){const C=mt(g[I],v[I]);if(0!==C)return C}return mt(g.length,v.length)}(i.referenceValue,n.referenceValue);case 8:return function(c,h){const g=mt(kn(c.latitude),kn(h.latitude));return 0!==g?g:mt(kn(c.longitude),kn(h.longitude))}(i.geoPointValue,n.geoPointValue);case 9:return function(c,h){const g=c.values||[],v=h.values||[];for(let I=0;I<g.length&&I<v.length;++I){const C=wf(g[I],v[I]);if(C)return C}return mt(g.length,v.length)}(i.arrayValue,n.arrayValue);case 10:return function(c,h){const g=c.fields||{},v=Object.keys(g),I=h.fields||{},C=Object.keys(I);v.sort(),C.sort();for(let T=0;T<v.length&&T<C.length;++T){const A=mt(v[T],C[T]);if(0!==A)return A;const O=wf(g[v[T]],I[C[T]]);if(0!==O)return O}return mt(v.length,C.length)}(i.mapValue,n.mapValue);default:throw Ve()}}function OI(i,n){if("string"==typeof i&&"string"==typeof n&&i.length===n.length)return mt(i,n);const r=Ws(i),a=Ws(n),c=mt(r.seconds,a.seconds);return 0!==c?c:mt(r.nanos,a.nanos)}function ym(i){return _m(i)}function _m(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(a){const c=Ws(a);return`time(${c.seconds},${c.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ua(i.bytesValue).toBase64():"referenceValue"in i?Ue.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(n=i.geoPointValue).latitude},${n.longitude})`:"arrayValue"in i?function(a){let c="[",h=!0;for(const g of a.values||[])h?h=!1:c+=",",c+=_m(g);return c+"]"}(i.arrayValue):"mapValue"in i?function(a){const c=Object.keys(a.fields||{}).sort();let h="{",g=!0;for(const v of c)g?g=!1:h+=",",h+=`${v}:${_m(a.fields[v])}`;return h+"}"}(i.mapValue):Ve();var n}function vm(i,n){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`}}function Iv(i){return!!i&&"integerValue"in i}function If(i){return!!i&&"arrayValue"in i}function bv(i){return!!i&&"nullValue"in i}function Em(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ad(i){return!!i&&"mapValue"in i}function ud(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const n={mapValue:{fields:{}}};return La(i.mapValue.fields,(r,a)=>n.mapValue.fields[r]=ud(a)),n}if(i.arrayValue){const n={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ud(i.arrayValue.values[r]);return n}return Object.assign({},i)}class gr{constructor(n){this.value=n}static empty(){return new gr({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let r=this.value;for(let a=0;a<n.length-1;++a)if(r=(r.mapValue.fields||{})[n.get(a)],!ad(r))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}set(n,r){this.getFieldsMap(n.popLast())[n.lastSegment()]=ud(r)}setAll(n){let r=rr.emptyPath(),a={},c=[];n.forEach((g,v)=>{if(!r.isImmediateParentOf(v)){const I=this.getFieldsMap(r);this.applyChanges(I,a,c),a={},c=[],r=v.popLast()}g?a[v.lastSegment()]=ud(g):c.push(v.lastSegment())});const h=this.getFieldsMap(r);this.applyChanges(h,a,c)}delete(n){const r=this.field(n.popLast());ad(r)&&r.mapValue.fields&&delete r.mapValue.fields[n.lastSegment()]}isEqual(n){return Li(this.value,n.value)}getFieldsMap(n){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<n.length;++a){let c=r.mapValue.fields[n.get(a)];ad(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},r.mapValue.fields[n.get(a)]=c),r=c}return r.mapValue.fields}applyChanges(n,r,a){La(r,(c,h)=>n[c]=h);for(const c of a)delete n[c]}clone(){return new gr(ud(this.value))}}function Dv(i){const n=[];return La(i.fields,(r,a)=>{const c=new rr([r]);if(ad(a)){const h=Dv(a.mapValue).fields;if(0===h.length)n.push(c);else for(const g of h)n.push(c.child(g))}else n.push(c)}),new fc(n)}class Jt{constructor(n,r,a,c,h){this.key=n,this.documentType=r,this.version=a,this.data=c,this.documentState=h}static newInvalidDocument(n){return new Jt(n,0,it.min(),gr.empty(),0)}static newFoundDocument(n,r,a){return new Jt(n,1,r,a,0)}static newNoDocument(n,r){return new Jt(n,2,r,gr.empty(),0)}static newUnknownDocument(n,r){return new Jt(n,3,r,gr.empty(),2)}convertToFoundDocument(n,r){return this.version=n,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof Jt&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}clone(){return new Jt(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Cv{constructor(n,r=null,a=[],c=[],h=null,g=null,v=null){this.path=n,this.collectionGroup=r,this.orderBy=a,this.filters=c,this.limit=h,this.startAt=g,this.endAt=v,this.A=null}}function MI(i,n=null,r=[],a=[],c=null,h=null,g=null){return new Cv(i,n,r,a,c,h,g)}function bf(i){const n=Te(i);if(null===n.A){let r=n.path.canonicalString();null!==n.collectionGroup&&(r+="|cg:"+n.collectionGroup),r+="|f:",r+=n.filters.map(a=>function(i){return i.field.canonicalString()+i.op.toString()+ym(i.value)}(a)).join(","),r+="|ob:",r+=n.orderBy.map(a=>{return(c=a).field.canonicalString()+c.dir;var c}).join(","),pc(n.limit)||(r+="|l:",r+=n.limit),n.startAt&&(r+="|lb:",r+=Im(n.startAt)),n.endAt&&(r+="|ub:",r+=Im(n.endAt)),n.A=r}return n.A}function wm(i,n){if(i.limit!==n.limit||i.orderBy.length!==n.orderBy.length)return!1;for(let c=0;c<i.orderBy.length;c++)if(!qT(i.orderBy[c],n.orderBy[c]))return!1;if(i.filters.length!==n.filters.length)return!1;for(let c=0;c<i.filters.length;c++)if((r=i.filters[c]).op!==(a=n.filters[c]).op||!r.field.isEqual(a.field)||!Li(r.value,a.value))return!1;var r,a;return i.collectionGroup===n.collectionGroup&&!!i.path.isEqual(n.path)&&!!Sv(i.startAt,n.startAt)&&Sv(i.endAt,n.endAt)}function Df(i){return Ue.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class ir extends class{}{constructor(n,r,a){super(),this.field=n,this.op=r,this.value=a}static create(n,r,a){return n.isKeyField()?"in"===r||"not-in"===r?this.R(n,r,a):new FI(n,r,a):"array-contains"===r?new VI(n,a):"in"===r?new BI(n,a):"not-in"===r?new jI(n,a):"array-contains-any"===r?new ZR(n,a):new ir(n,r,a)}static R(n,r,a){return"in"===r?new LI(n,a):new UI(n,a)}matches(n){const r=n.data.field(this.field);return"!="===this.op?null!==r&&this.P(wf(r,this.value)):null!==r&&Mo(this.value)===Mo(r)&&this.P(wf(r,this.value))}P(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return Ve()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class FI extends ir{constructor(n,r,a){super(n,r,a),this.key=Ue.fromName(a.referenceValue)}matches(n){const r=Ue.comparator(n.key,this.key);return this.P(r)}}class LI extends ir{constructor(n,r){super(n,"in",r),this.keys=Tv(0,r)}matches(n){return this.keys.some(r=>r.isEqual(n.key))}}class UI extends ir{constructor(n,r){super(n,"not-in",r),this.keys=Tv(0,r)}matches(n){return!this.keys.some(r=>r.isEqual(n.key))}}function Tv(i,n){var r;return((null===(r=n.arrayValue)||void 0===r?void 0:r.values)||[]).map(a=>Ue.fromName(a.referenceValue))}class VI extends ir{constructor(n,r){super(n,"array-contains",r)}matches(n){const r=n.data.field(this.field);return If(r)&&od(r.arrayValue,this.value)}}class BI extends ir{constructor(n,r){super(n,"in",r)}matches(n){const r=n.data.field(this.field);return null!==r&&od(this.value.arrayValue,r)}}class jI extends ir{constructor(n,r){super(n,"not-in",r)}matches(n){if(od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=n.data.field(this.field);return null!==r&&!od(this.value.arrayValue,r)}}class ZR extends ir{constructor(n,r){super(n,"array-contains-any",r)}matches(n){const r=n.data.field(this.field);return!(!If(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>od(this.value.arrayValue,a))}}class Cf{constructor(n,r){this.position=n,this.before=r}}function Im(i){return`${i.before?"b":"a"}:${i.position.map(n=>ym(n)).join(",")}`}class gc{constructor(n,r="asc"){this.field=n,this.dir=r}}function qT(i,n){return i.dir===n.dir&&i.field.isEqual(n.field)}function An(i,n,r){let a=0;for(let c=0;c<i.position.length;c++){const h=n[c],g=i.position[c];if(a=h.field.isKeyField()?Ue.comparator(Ue.fromName(g.referenceValue),r.key):wf(g,r.data.field(h.field)),"desc"===h.dir&&(a*=-1),0!==a)break}return i.before?a<=0:a<0}function Sv(i,n){if(null===i)return null===n;if(null===n||i.before!==n.before||i.position.length!==n.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!Li(i.position[r],n.position[r]))return!1;return!0}class ko{constructor(n,r=null,a=[],c=[],h=null,g="F",v=null,I=null){this.path=n,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=c,this.limit=h,this.limitType=g,this.startAt=v,this.endAt=I,this.V=null,this.S=null}}function $I(i,n,r,a,c,h,g,v){return new ko(i,n,r,a,c,h,g,v)}function mc(i){return new ko(i)}function bm(i){return!pc(i.limit)&&"F"===i.limitType}function Tf(i){return!pc(i.limit)&&"L"===i.limitType}function Dm(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Va(i){for(const n of i.filters)if(n.v())return n.field;return null}function Av(i){return null!==i.collectionGroup}function cd(i){const n=Te(i);if(null===n.V){n.V=[];const r=Va(n),a=Dm(n);if(null!==r&&null===a)r.isKeyField()||n.V.push(new gc(r)),n.V.push(new gc(rr.keyField(),"asc"));else{let c=!1;for(const h of n.explicitOrderBy)n.V.push(h),h.field.isKeyField()&&(c=!0);if(!c){const h=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.V.push(new gc(rr.keyField(),h))}}}return n.V}function vi(i){const n=Te(i);if(!n.S)if("F"===n.limitType)n.S=MI(n.path,n.collectionGroup,cd(n),n.filters,n.limit,n.startAt,n.endAt);else{const r=[];for(const h of cd(n))r.push(new gc(h.field,"desc"===h.dir?"asc":"desc"));const a=n.endAt?new Cf(n.endAt.position,!n.endAt.before):null,c=n.startAt?new Cf(n.startAt.position,!n.startAt.before):null;n.S=MI(n.path,n.collectionGroup,r,n.filters,n.limit,a,c)}return n.S}function HI(i,n,r){return new ko(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),n,r,i.startAt,i.endAt)}function ld(i,n){return wm(vi(i),vi(n))&&i.limitType===n.limitType}function WT(i){return`${bf(vi(i))}|lt:${i.limitType}`}function Cm(i){return`Query(target=${function(i){let n=i.path.canonicalString();return null!==i.collectionGroup&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(r=>{return`${(a=r).field.canonicalString()} ${a.op} ${ym(a.value)}`;var a}).join(", ")}]`),pc(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(r=>{return`${(a=r).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),i.startAt&&(n+=", startAt: "+Im(i.startAt)),i.endAt&&(n+=", endAt: "+Im(i.endAt)),`Target(${n})`}(vi(i))}; limitType=${i.limitType})`}function dd(i,n){return n.isFoundDocument()&&function(r,a){const c=a.key.path;return null!==r.collectionGroup?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Ue.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(i,n)&&function(r,a){for(const c of r.explicitOrderBy)if(!c.field.isKeyField()&&null===a.data.field(c.field))return!1;return!0}(i,n)&&function(r,a){for(const c of r.filters)if(!c.matches(a))return!1;return!0}(i,n)&&(a=n,!((r=i).startAt&&!An(r.startAt,cd(r),a)||r.endAt&&An(r.endAt,cd(r),a)));var r,a}function ys(i){return(n,r)=>{let a=!1;for(const c of cd(i)){const h=zT(c,n,r);if(0!==h)return h;a=a||c.field.isKeyField()}return 0}}function zT(i,n,r){const a=i.field.isKeyField()?Ue.comparator(n.key,r.key):function(c,h,g){const v=h.data.field(c),I=g.data.field(c);return null!==v&&null!==I?wf(v,I):Ve()}(i.field,n,r);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return Ve()}}function GI(i,n){if(i.D){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ef(n)?"-0":n}}function _s(i){return{integerValue:""+i}}function Ui(i,n){return mm(n)?_s(n):GI(i,n)}class ni{constructor(){this._=void 0}}function qI(i,n,r){return i instanceof hd?function(a,c){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&(h.fields.__previous_value__=c),{mapValue:h}}(r,n):i instanceof yc?KI(i,n):i instanceof Fo?fd(i,n):function(a,c){const h=zI(a,c),g=Rv(h)+Rv(a.C);return Iv(h)&&Iv(a.C)?_s(g):GI(a.N,g)}(i,n)}function WI(i,n,r){return i instanceof yc?KI(i,n):i instanceof Fo?fd(i,n):r}function zI(i,n){return i instanceof pd?Iv(r=n)||(a=r)&&"doubleValue"in a?n:{integerValue:0}:null;var a,r}class hd extends ni{}class yc extends ni{constructor(n){super(),this.elements=n}}function KI(i,n){const r=ZI(n);for(const a of i.elements)r.some(c=>Li(c,a))||r.push(a);return{arrayValue:{values:r}}}class Fo extends ni{constructor(n){super(),this.elements=n}}function fd(i,n){let r=ZI(n);for(const a of i.elements)r=r.filter(c=>!Li(c,a));return{arrayValue:{values:r}}}class pd extends ni{constructor(n,r){super(),this.N=n,this.C=r}}function Rv(i){return kn(i.integerValue||i.doubleValue)}function ZI(i){return If(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class gd{constructor(n,r){this.field=n,this.transform=r}}class Tm{constructor(n,r){this.version=n,this.transformResults=r}}class Rn{constructor(n,r){this.updateTime=n,this.exists=r}static none(){return new Rn}static exists(n){return new Rn(void 0,n)}static updateTime(n){return new Rn(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function Sf(i,n){return void 0!==i.updateTime?n.isFoundDocument()&&n.version.isEqual(i.updateTime):void 0===i.exists||i.exists===n.isFoundDocument()}class Af{}function QI(i,n,r){i instanceof md?function(a,c,h){const g=a.value.clone(),v=Ov(a.fieldTransforms,c,h.transformResults);g.setAll(v),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(i,n,r):i instanceof Lo?function(a,c,h){if(!Sf(a.precondition,c))return void c.convertToUnknownDocument(h.version);const g=Ov(a.fieldTransforms,c,h.transformResults),v=c.data;v.setAll(Pv(a)),v.setAll(g),c.convertToFoundDocument(h.version,v).setHasCommittedMutations()}(i,n,r):n.convertToNoDocument(r.version).setHasCommittedMutations()}function Rf(i,n,r){var c;i instanceof md?function(a,c,h){if(!Sf(a.precondition,c))return;const g=a.value.clone(),v=Mv(a.fieldTransforms,h,c);g.setAll(v),c.convertToFoundDocument(Nv(c),g).setHasLocalMutations()}(i,n,r):i instanceof Lo?function(a,c,h){if(!Sf(a.precondition,c))return;const g=Mv(a.fieldTransforms,h,c),v=c.data;v.setAll(Pv(a)),v.setAll(g),c.convertToFoundDocument(Nv(c),v).setHasLocalMutations()}(i,n,r):Sf(i.precondition,c=n)&&c.convertToNoDocument(it.min())}function JI(i,n){let r=null;for(const a of i.fieldTransforms){const c=n.data.field(a.field),h=zI(a.transform,c||null);null!=h&&(null==r&&(r=gr.empty()),r.set(a.field,h))}return r||null}function xv(i,n){return i.type===n.type&&!!i.key.isEqual(n.key)&&!!i.precondition.isEqual(n.precondition)&&(a=n.fieldTransforms,!!(void 0===(r=i.fieldTransforms)&&void 0===a||r&&a&&hc(r,a,(c,h)=>function(i,n){return i.field.isEqual(n.field)&&(a=n.transform,(r=i.transform)instanceof yc&&a instanceof yc||r instanceof Fo&&a instanceof Fo?hc(r.elements,a.elements,Li):r instanceof pd&&a instanceof pd?Li(r.C,a.C):r instanceof hd&&a instanceof hd);var r,a}(c,h))))&&(0===i.type?i.value.isEqual(n.value):1!==i.type||i.data.isEqual(n.data)&&i.fieldMask.isEqual(n.fieldMask));var r,a}function Nv(i){return i.isFoundDocument()?i.version:it.min()}class md extends Af{constructor(n,r,a,c=[]){super(),this.key=n,this.value=r,this.precondition=a,this.fieldTransforms=c,this.type=0}}class Lo extends Af{constructor(n,r,a,c,h=[]){super(),this.key=n,this.data=r,this.fieldMask=a,this.precondition=c,this.fieldTransforms=h,this.type=1}}function Pv(i){const n=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=i.data.field(r);n.set(r,a)}}),n}function Ov(i,n,r){const a=new Map;Je(i.length===r.length);for(let c=0;c<r.length;c++){const h=i[c],g=h.transform,v=n.data.field(h.field);a.set(h.field,WI(g,v,r[c]))}return a}function Mv(i,n,r){const a=new Map;for(const c of i){const h=c.transform,g=r.data.field(c.field);a.set(c.field,qI(h,g,n))}return a}class xf extends Af{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class kv extends Af{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class KT{constructor(n){this.count=n}}var xn,_t;function XI(i){switch(i){case ne.OK:return Ve();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ve()}}function eb(i){if(void 0===i)return In("GRPC error has no .code"),ne.UNKNOWN;switch(i){case xn.OK:return ne.OK;case xn.CANCELLED:return ne.CANCELLED;case xn.UNKNOWN:return ne.UNKNOWN;case xn.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case xn.INTERNAL:return ne.INTERNAL;case xn.UNAVAILABLE:return ne.UNAVAILABLE;case xn.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case xn.NOT_FOUND:return ne.NOT_FOUND;case xn.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case xn.ABORTED:return ne.ABORTED;case xn.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case xn.DATA_LOSS:return ne.DATA_LOSS;default:return Ve()}}(_t=xn||(xn={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";class Fn{constructor(n,r){this.comparator=n,this.root=r||sr.EMPTY}insert(n,r){return new Fn(this.comparator,this.root.insert(n,r,this.comparator).copy(null,null,sr.BLACK,null,null))}remove(n){return new Fn(this.comparator,this.root.remove(n,this.comparator).copy(null,null,sr.BLACK,null,null))}get(n){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(n,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(n){let r=0,a=this.root;for(;!a.isEmpty();){const c=this.comparator(n,a.key);if(0===c)return r+a.left.size;c<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((r,a)=>(n(r,a),!1))}toString(){const n=[];return this.inorderTraversal((r,a)=>(n.push(`${r}:${a}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new Sm(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new Sm(this.root,n,this.comparator,!1)}getReverseIterator(){return new Sm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new Sm(this.root,n,this.comparator,!0)}}class Sm{constructor(n,r,a,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!n.isEmpty();)if(h=r?a(n.key,r):1,c&&(h*=-1),h<0)n=this.isReverse?n.left:n.right;else{if(0===h){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const r={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class sr{constructor(n,r,a,c,h){this.key=n,this.value=r,this.color=null!=a?a:sr.RED,this.left=null!=c?c:sr.EMPTY,this.right=null!=h?h:sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,r,a,c,h){return new sr(null!=n?n:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=c?c:this.left,null!=h?h:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,a){let c=this;const h=a(n,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(n,r,a),null):0===h?c.copy(null,r,null,null,null):c.copy(null,null,null,null,c.right.insert(n,r,a)),c.fixUp()}removeMin(){if(this.left.isEmpty())return sr.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,r){let a,c=this;if(r(n,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(n,r),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===r(n,c.key)){if(c.right.isEmpty())return sr.EMPTY;a=c.right.min(),c=c.copy(a.key,a.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(n,r))}return c.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ve();const n=this.left.check();if(n!==this.right.check())throw Ve();return n+(this.isRed()?0:1)}}sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1,sr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve()}get value(){throw Ve()}get color(){throw Ve()}get left(){throw Ve()}get right(){throw Ve()}copy(i,n,r,a,c){return this}insert(i,n,r){return new sr(i,n)}remove(i,n){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gn{constructor(n){this.comparator=n,this.data=new Fn(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((r,a)=>(n(r),!1))}forEachInRange(n,r){const a=this.data.getIteratorFrom(n[0]);for(;a.hasNext();){const c=a.getNext();if(this.comparator(c.key,n[1])>=0)return;r(c.key)}}forEachWhile(n,r){let a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!n(a.getNext().key))return}firstAfterOrEqual(n){const r=this.data.getIteratorFrom(n);return r.hasNext()?r.getNext().key:null}getIterator(){return new tb(this.data.getIterator())}getIteratorFrom(n){return new tb(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let r=this;return r.size<n.size&&(r=n,n=this),n.forEach(a=>{r=r.add(a)}),r}isEqual(n){if(!(n instanceof gn)||this.size!==n.size)return!1;const r=this.data.getIterator(),a=n.data.getIterator();for(;r.hasNext();){const c=r.getNext().key,h=a.getNext().key;if(0!==this.comparator(c,h))return!1}return!0}toArray(){const n=[];return this.forEach(r=>{n.push(r)}),n}toString(){const n=[];return this.forEach(r=>n.push(r)),"SortedSet("+n.toString()+")"}copy(n){const r=new gn(this.comparator);return r.data=n,r}}class tb{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const ZT=new Fn(Ue.comparator);function Vi(){return ZT}const YT=new Fn(Ue.comparator);function Fv(){return YT}const QT=new Fn(Ue.comparator);function nb(){return QT}const rb=new gn(Ue.comparator);function St(...i){let n=rb;for(const r of i)n=n.add(r);return n}const ib=new gn(mt);function Nf(){return ib}class yd{constructor(n,r,a,c,h){this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(n,r){const a=new Map;return a.set(n,_d.createSynthesizedTargetChangeForCurrentChange(n,r)),new yd(it.min(),a,Nf(),Vi(),St())}}class _d{constructor(n,r,a,c,h){this.resumeToken=n,this.current=r,this.addedDocuments=a,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(n,r){return new _d(Mn.EMPTY_BYTE_STRING,r,St(),St(),St())}}class Pf{constructor(n,r,a,c){this.k=n,this.removedTargetIds=r,this.key=a,this.$=c}}class Lv{constructor(n,r){this.targetId=n,this.O=r}}class Uv{constructor(n,r,a=Mn.EMPTY_BYTE_STRING,c=null){this.state=n,this.targetIds=r,this.resumeToken=a,this.cause=c}}class Am{constructor(){this.F=0,this.M=ob(),this.L=Mn.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}W(){let n=St(),r=St(),a=St();return this.M.forEach((c,h)=>{switch(h){case 0:n=n.add(c);break;case 2:r=r.add(c);break;case 1:a=a.add(c);break;default:Ve()}}),new _d(this.L,this.B,n,r,a)}G(){this.U=!1,this.M=ob()}H(n,r){this.U=!0,this.M=this.M.insert(n,r)}J(n){this.U=!0,this.M=this.M.remove(n)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class sb{constructor(n){this.tt=n,this.et=new Map,this.nt=Vi(),this.st=Ba(),this.it=new gn(mt)}rt(n){for(const r of n.k)n.$&&n.$.isFoundDocument()?this.ot(r,n.$):this.at(r,n.key,n.$);for(const r of n.removedTargetIds)this.at(r,n.key,n.$)}ct(n){this.forEachTarget(n,r=>{const a=this.ut(r);switch(n.state){case 0:this.ht(r)&&a.j(n.resumeToken);break;case 1:a.X(),a.q||a.G(),a.j(n.resumeToken);break;case 2:a.X(),a.q||this.removeTarget(r);break;case 3:this.ht(r)&&(a.Z(),a.j(n.resumeToken));break;case 4:this.ht(r)&&(this.lt(r),a.j(n.resumeToken));break;default:Ve()}})}forEachTarget(n,r){n.targetIds.length>0?n.targetIds.forEach(r):this.et.forEach((a,c)=>{this.ht(c)&&r(c)})}ft(n){const r=n.targetId,a=n.O.count,c=this.dt(r);if(c){const h=c.target;if(Df(h))if(0===a){const g=new Ue(h.path);this.at(r,g,Jt.newNoDocument(g,it.min()))}else Je(1===a);else this.wt(r)!==a&&(this.lt(r),this.it=this.it.add(r))}}_t(n){const r=new Map;this.et.forEach((h,g)=>{const v=this.dt(g);if(v){if(h.current&&Df(v.target)){const I=new Ue(v.target.path);null!==this.nt.get(I)||this.gt(g,I)||this.at(g,I,Jt.newNoDocument(I,n))}h.K&&(r.set(g,h.W()),h.G())}});let a=St();this.st.forEach((h,g)=>{let v=!0;g.forEachWhile(I=>{const C=this.dt(I);return!C||2===C.purpose||(v=!1,!1)}),v&&(a=a.add(h))});const c=new yd(n,r,this.it,this.nt,a);return this.nt=Vi(),this.st=Ba(),this.it=new gn(mt),c}ot(n,r){if(!this.ht(n))return;const a=this.gt(n,r.key)?2:0;this.ut(n).H(r.key,a),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(n))}at(n,r,a){if(!this.ht(n))return;const c=this.ut(n);this.gt(n,r)?c.H(r,1):c.J(r),this.st=this.st.insert(r,this.yt(r).delete(n)),a&&(this.nt=this.nt.insert(r,a))}removeTarget(n){this.et.delete(n)}wt(n){const r=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+r.addedDocuments.size-r.removedDocuments.size}Y(n){this.ut(n).Y()}ut(n){let r=this.et.get(n);return r||(r=new Am,this.et.set(n,r)),r}yt(n){let r=this.st.get(n);return r||(r=new gn(mt),this.st=this.st.insert(n,r)),r}ht(n){const r=null!==this.dt(n);return r||we("WatchChangeAggregator","Detected inactive target",n),r}dt(n){const r=this.et.get(n);return r&&r.q?null:this.tt.Et(n)}lt(n){this.et.set(n,new Am),this.tt.getRemoteKeysForTarget(n).forEach(r=>{this.at(n,r,null)})}gt(n,r){return this.tt.getRemoteKeysForTarget(n).has(r)}}function Ba(){return new Fn(Ue.comparator)}function ob(){return new Fn(Ue.comparator)}const JT={asc:"ASCENDING",desc:"DESCENDING"},vd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class YR{constructor(n,r){this.databaseId=n,this.D=r}}function _c(i,n){return i.D?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function XT(i,n){return i.D?n.toBase64():n.toUint8Array()}function ab(i,n){return _c(i,n.toTimestamp())}function Ln(i){return Je(!!i),it.fromTimestamp(function(n){const r=Ws(n);return new On(r.seconds,r.nanos)}(i))}function ub(i,n){return(r=i,new Ct(["projects",r.projectId,"databases",r.database])).child("documents").child(n).canonicalString();var r}function Ge(i){const n=Ct.fromString(i);return Je(yb(n)),n}function Of(i,n){return ub(i.databaseId,n.path)}function zs(i,n){const r=Ge(n);if(r.get(1)!==i.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new Ue(Ff(r))}function Vv(i,n){return ub(i.databaseId,n)}function Mf(i){const n=Ge(i);return 4===n.length?Ct.emptyPath():Ff(n)}function kf(i){return new Ct(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ff(i){return Je(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Lf(i,n,r){return{name:Of(i,n),fields:r.value.mapValue.fields}}function ln(i,n,r){const a=zs(i,n.name),c=Ln(n.updateTime),h=new gr({mapValue:{fields:n.fields}}),g=Jt.newFoundDocument(a,c,h);return r&&g.setHasCommittedMutations(),r?g.setHasCommittedMutations():g}function Ed(i,n){let r;if(n instanceof md)r={update:Lf(i,n.key,n.value)};else if(n instanceof xf)r={delete:Of(i,n.key)};else if(n instanceof Lo)r={update:Lf(i,n.key,n.data),updateMask:mb(n.fieldMask)};else{if(!(n instanceof kv))return Ve();r={verify:Of(i,n.key)}}return n.fieldTransforms.length>0&&(r.updateTransforms=n.fieldTransforms.map(a=>function(c,h){const g=h.transform;if(g instanceof hd)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof yc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Fo)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof pd)return{fieldPath:h.field.canonicalString(),increment:g.C};throw Ve()}(0,a))),n.precondition.isNone||(r.currentDocument=void 0!==(c=n.precondition).updateTime?{updateTime:ab(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Ve()),r;var c}function lb(i,n){const r=n.currentDocument?void 0!==(c=n.currentDocument).updateTime?Rn.updateTime(Ln(c.updateTime)):void 0!==c.exists?Rn.exists(c.exists):Rn.none():Rn.none(),a=n.updateTransforms?n.updateTransforms.map(c=>function(h,g){let v=null;"setToServerValue"in g?(Je("REQUEST_TIME"===g.setToServerValue),v=new hd):"appendMissingElements"in g?v=new yc(g.appendMissingElements.values||[]):"removeAllFromArray"in g?v=new Fo(g.removeAllFromArray.values||[]):"increment"in g?v=new pd(h,g.increment):Ve();const I=rr.fromServerFormat(g.fieldPath);return new gd(I,v)}(i,c)):[];var c;if(n.update){const c=zs(i,n.update.name),h=new gr({mapValue:{fields:n.update.fields}});if(n.updateMask){const g=new fc((n.updateMask.fieldPaths||[]).map(C=>rr.fromServerFormat(C)));return new Lo(c,h,g,r,a)}return new md(c,h,r,a)}if(n.delete){const c=zs(i,n.delete);return new xf(c,r)}if(n.verify){const c=zs(i,n.verify);return new kv(c,r)}return Ve()}function Bv(i,n){return{documents:[Vv(i,n.path)]}}function jv(i,n){const r={structuredQuery:{}},a=n.path;null!==n.collectionGroup?(r.parent=Vv(i,a),r.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(r.parent=Vv(i,a.popLast()),r.structuredQuery.from=[{collectionId:a.lastSegment()}]);const c=function(v){if(0===v.length)return;const I=v.map(C=>function(T){if("=="===T.op){if(Em(T.value))return{unaryFilter:{field:Id(T.field),op:"IS_NAN"}};if(bv(T.value))return{unaryFilter:{field:Id(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(Em(T.value))return{unaryFilter:{field:Id(T.field),op:"IS_NOT_NAN"}};if(bv(T.value))return{unaryFilter:{field:Id(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Id(T.field),op:nS(T.op),value:T.value}}}(C));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(n.filters);c&&(r.structuredQuery.where=c);const h=function(v){if(0!==v.length)return v.map(I=>{return{field:Id((C=I).field),direction:tS(C.dir)};var C})}(n.orderBy);h&&(r.structuredQuery.orderBy=h);const g=(I=n.limit,i.D||pc(I)?I:{value:I});var I;return null!==g&&(r.structuredQuery.limit=g),n.startAt&&(r.structuredQuery.startAt=fb(n.startAt)),n.endAt&&(r.structuredQuery.endAt=fb(n.endAt)),r}function $v(i){let n=Mf(i.parent);const r=i.structuredQuery,a=r.from?r.from.length:0;let c=null;if(a>0){Je(1===a);const T=r.from[0];T.allDescendants?c=T.collectionId:n=n.child(T.collectionId)}let h=[];r.where&&(h=hb(r.where));let g=[];r.orderBy&&(g=r.orderBy.map(T=>{return new gc(Uo((A=T).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let v=null;r.limit&&(v=function(T){let A;return A="object"==typeof T?T.value:T,pc(A)?null:A}(r.limit));let I=null;r.startAt&&(I=wd(r.startAt));let C=null;return r.endAt&&(C=wd(r.endAt)),$I(n,c,g,h,v,"F",I,C)}function hb(i){return i?void 0!==i.unaryFilter?[gb(i)]:void 0!==i.fieldFilter?[pb(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(n=>hb(n)).reduce((n,r)=>n.concat(r)):Ve():[]}function fb(i){return{before:i.before,values:i.position}}function wd(i){return new Cf(i.values||[],!!i.before)}function tS(i){return JT[i]}function nS(i){return vd[i]}function Id(i){return{fieldPath:i.canonicalString()}}function Uo(i){return rr.fromServerFormat(i.fieldPath)}function pb(i){return ir.create(Uo(i.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ve()}}(i.fieldFilter.op),i.fieldFilter.value)}function gb(i){switch(i.unaryFilter.op){case"IS_NAN":const n=Uo(i.unaryFilter.field);return ir.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Uo(i.unaryFilter.field);return ir.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Uo(i.unaryFilter.field);return ir.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Uo(i.unaryFilter.field);return ir.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ve()}}function mb(i){const n=[];return i.fields.forEach(r=>n.push(r.canonicalString())),{fieldPaths:n}}function yb(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Ur(i){let n="";for(let r=0;r<i.length;r++)n.length>0&&(n=_b(n)),n=Uf(i.get(r),n);return _b(n)}function Uf(i,n){let r=n;const a=i.length;for(let c=0;c<a;c++){const h=i.charAt(c);switch(h){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=h}}return r}function _b(i){return i+"\x01\x01"}function Vo(i){const n=i.length;if(Je(n>=2),2===n)return Je("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Ct.emptyPath();const r=n-2,a=[];let c="";for(let h=0;h<n;){const g=i.indexOf("\x01",h);switch((g<0||g>r)&&Ve(),i.charAt(g+1)){case"\x01":const v=i.substring(h,g);let I;0===c.length?I=v:(c+=v,I=c,c=""),a.push(I);break;case"\x10":c+=i.substring(h,g),c+="\0";break;case"\x11":c+=i.substring(h,g+1);break;default:Ve()}h=g+2}return new Ct(a)}class rS{constructor(n,r){this.seconds=n,this.nanoseconds=r}}class ri{constructor(n,r,a){this.ownerId=n,this.allowTabSynchronization=r,this.leaseTimestampMs=a}}ri.store="owner",ri.key="owner";class Bo{constructor(n,r,a){this.userId=n,this.lastAcknowledgedBatchId=r,this.lastStreamToken=a}}Bo.store="mutationQueues",Bo.keyPath="userId";class Gt{constructor(n,r,a,c,h){this.userId=n,this.batchId=r,this.localWriteTimeMs=a,this.baseMutations=c,this.mutations=h}}Gt.store="mutations",Gt.keyPath="batchId",Gt.userMutationsIndex="userMutationsIndex",Gt.userMutationsKeyPath=["userId","batchId"];class mr{constructor(){}static prefixForUser(n){return[n]}static prefixForPath(n,r){return[n,Ur(r)]}static key(n,r,a){return[n,Ur(r),a]}}mr.store="documentMutations",mr.PLACEHOLDER=new mr;class vb{constructor(n,r){this.path=n,this.readTime=r}}class iS{constructor(n,r){this.path=n,this.version=r}}class mn{constructor(n,r,a,c,h,g){this.unknownDocument=n,this.noDocument=r,this.document=a,this.hasCommittedMutations=c,this.readTime=h,this.parentPath=g}}mn.store="remoteDocuments",mn.readTimeIndex="readTimeIndex",mn.readTimeIndexPath="readTime",mn.collectionReadTimeIndex="collectionReadTimeIndex",mn.collectionReadTimeIndexPath=["parentPath","readTime"];class jo{constructor(n){this.byteSize=n}}jo.store="remoteDocumentGlobal",jo.key="remoteDocumentGlobalKey";class Ei{constructor(n,r,a,c,h,g,v){this.targetId=n,this.canonicalId=r,this.readTime=a,this.resumeToken=c,this.lastListenSequenceNumber=h,this.lastLimboFreeSnapshotVersion=g,this.query=v}}Ei.store="targets",Ei.keyPath="targetId",Ei.queryTargetsIndexName="queryTargetsIndex",Ei.queryTargetsKeyPath=["canonicalId","targetId"];class yr{constructor(n,r,a){this.targetId=n,this.path=r,this.sequenceNumber=a}}yr.store="targetDocuments",yr.keyPath=["targetId","path"],yr.documentTargetsIndex="documentTargetsIndex",yr.documentTargetsKeyPath=["path","targetId"];class Bi{constructor(n,r,a,c){this.highestTargetId=n,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=a,this.targetCount=c}}Bi.key="targetGlobalKey",Bi.store="targetGlobal";class ja{constructor(n,r){this.collectionId=n,this.parent=r}}ja.store="collectionParents",ja.keyPath=["collectionId","parent"];class ji{constructor(n,r,a,c){this.clientId=n,this.updateTimeMs=r,this.networkEnabled=a,this.inForeground=c}}ji.store="clientMetadata",ji.keyPath="clientId";class bd{constructor(n,r,a){this.bundleId=n,this.createTime=r,this.version=a}}bd.store="bundles",bd.keyPath="bundleId";class Dd{constructor(n,r,a){this.name=n,this.readTime=r,this.bundledQuery=a}}Dd.store="namedQueries",Dd.keyPath="name";const Eb=[Bo.store,Gt.store,mr.store,mn.store,Ei.store,ri.store,Bi.store,yr.store,ji.store,jo.store,ja.store,bd.store,Dd.store],Cd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}class pe{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(n){return this.next(void 0,n)}next(n,r){return this.callbackAttached&&Ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new pe((a,c)=>{this.nextCallback=h=>{this.wrapSuccess(n,h).next(a,c)},this.catchCallback=h=>{this.wrapFailure(r,h).next(a,c)}})}toPromise(){return new Promise((n,r)=>{this.next(n,r)})}wrapUserFunction(n){try{const r=n();return r instanceof pe?r:pe.resolve(r)}catch(r){return pe.reject(r)}}wrapSuccess(n,r){return n?this.wrapUserFunction(()=>n(r)):pe.resolve(r)}wrapFailure(n,r){return n?this.wrapUserFunction(()=>n(r)):pe.reject(r)}static resolve(n){return new pe((r,a)=>{r(n)})}static reject(n){return new pe((r,a)=>{a(n)})}static waitFor(n){return new pe((r,a)=>{let c=0,h=0,g=!1;n.forEach(v=>{++c,v.next(()=>{++h,g&&h===c&&r()},I=>a(I))}),g=!0,h===c&&r()})}static or(n){let r=pe.resolve(!1);for(const a of n)r=r.next(c=>c?pe.resolve(c):a());return r}static forEach(n,r){const a=[];return n.forEach((c,h)=>{a.push(r.call(this,c,h))}),this.waitFor(a)}}class Rm{constructor(n,r){this.action=n,this.transaction=r,this.aborted=!1,this.Tt=new Sn,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{r.error?this.Tt.reject(new Td(n,r.error)):this.Tt.resolve()},this.transaction.onerror=a=>{const c=xm(a.target.error);this.Tt.reject(new Td(n,c))}}static open(n,r,a,c){try{return new Rm(r,n.transaction(c,a))}catch(h){throw new Td(r,h)}}get It(){return this.Tt.promise}abort(n){n&&this.Tt.reject(n),this.aborted||(we("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(n){const r=this.transaction.objectStore(n);return new oS(r)}}class vs{constructor(n,r,a){this.name=n,this.version=r,this.At=a,12.2===vs.Rt((0,at.z$)())&&In("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return we("SimpleDb","Removing database:",n),$i(window.indexedDB.deleteDatabase(n)).toPromise()}static bt(){if(!(0,at.hl)())return!1;if(vs.Pt())return!0;const n=(0,at.z$)(),r=vs.Rt(n),a=0<r&&r<10,c=vs.vt(n),h=0<c&&c<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||a||h)}static Pt(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}static St(n,r){return n.store(r)}static Rt(n){const r=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static vt(n){const r=n.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}Dt(n){var r=this;return(0,ae.Z)(function*(){return r.db||(we("SimpleDb","Opening database:",r.name),r.db=yield new Promise((a,c)=>{const h=indexedDB.open(r.name,r.version);h.onsuccess=g=>{a(g.target.result)},h.onblocked=()=>{c(new Td(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=g=>{const v=g.target.error;c("VersionError"===v.name?new me(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===v.name?new me(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+v):new Td(n,v))},h.onupgradeneeded=g=>{we("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',g.oldVersion),r.At.Ct(g.target.result,h.transaction,g.oldVersion,r.version).next(()=>{we("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.Nt&&(r.db.onversionchange=a=>r.Nt(a)),r.db})()}xt(n){this.Nt=n,this.db&&(this.db.onversionchange=r=>n(r))}runTransaction(n,r,a,c){var h=this;return(0,ae.Z)(function*(){const g="readonly"===r;let v=0;for(;;){++v;try{h.db=yield h.Dt(n);const I=Rm.open(h.db,n,g?"readonly":"readwrite",a),C=c(I).catch(T=>(I.abort(T),pe.reject(T))).toPromise();return C.catch(()=>{}),yield I.It,C}catch(I){const C="FirebaseError"!==I.name&&v<3;if(we("SimpleDb","Transaction failed with error:",I.message,"Retrying:",C),h.close(),!C)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class sS{constructor(n){this.kt=n,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(n){this.kt=n}done(){this.$t=!0}Mt(n){this.Ot=n}delete(){return $i(this.kt.delete())}}class Td extends me{constructor(n,r){super(ne.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function vc(i){return"IndexedDbTransactionError"===i.name}class oS{constructor(n){this.store=n}put(n,r){let a;return void 0!==r?(we("SimpleDb","PUT",this.store.name,n,r),a=this.store.put(r,n)):(we("SimpleDb","PUT",this.store.name,"<auto-key>",n),a=this.store.put(n)),$i(a)}add(n){return we("SimpleDb","ADD",this.store.name,n,n),$i(this.store.add(n))}get(n){return $i(this.store.get(n)).next(r=>(void 0===r&&(r=null),we("SimpleDb","GET",this.store.name,n,r),r))}delete(n){return we("SimpleDb","DELETE",this.store.name,n),$i(this.store.delete(n))}count(){return we("SimpleDb","COUNT",this.store.name),$i(this.store.count())}Lt(n,r){const a=this.cursor(this.options(n,r)),c=[];return this.Bt(a,(h,g)=>{c.push(g)}).next(()=>c)}Ut(n,r){we("SimpleDb","DELETE ALL",this.store.name);const a=this.options(n,r);a.qt=!1;const c=this.cursor(a);return this.Bt(c,(h,g,v)=>v.delete())}Kt(n,r){let a;r?a=n:(a={},r=n);const c=this.cursor(a);return this.Bt(c,r)}jt(n){const r=this.cursor({});return new pe((a,c)=>{r.onerror=h=>{const g=xm(h.target.error);c(g)},r.onsuccess=h=>{const g=h.target.result;g?n(g.primaryKey,g.value).next(v=>{v?g.continue():a()}):a()}})}Bt(n,r){const a=[];return new pe((c,h)=>{n.onerror=g=>{h(g.target.error)},n.onsuccess=g=>{const v=g.target.result;if(!v)return void c();const I=new sS(v),C=r(v.primaryKey,v.value,I);if(C instanceof pe){const T=C.catch(A=>(I.done(),pe.reject(A)));a.push(T)}I.isDone?c():null===I.Ft?v.continue():v.continue(I.Ft)}}).next(()=>pe.waitFor(a))}options(n,r){let a;return void 0!==n&&("string"==typeof n?a=n:r=n),{index:a,range:r}}cursor(n){let r="next";if(n.reverse&&(r="prev"),n.index){const a=this.store.index(n.index);return n.qt?a.openKeyCursor(n.range,r):a.openCursor(n.range,r)}return this.store.openCursor(n.range,r)}}function $i(i){return new pe((n,r)=>{i.onsuccess=a=>{n(a.target.result)},i.onerror=a=>{const c=xm(a.target.error);r(c)}})}let Ib=!1;function xm(i){const n=vs.Rt((0,at.z$)());if(n>=12.2&&n<13){const r="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(r)>=0){const a=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ib||(Ib=!0,setTimeout(()=>{throw a},0)),a}}return i}class bb extends wb{constructor(n,r){super(),this.Qt=n,this.currentSequenceNumber=r}}function Vr(i,n){const r=Te(i);return vs.St(r.Qt,n)}class Hv{constructor(n,r,a,c){this.batchId=n,this.localWriteTime=r,this.baseMutations=a,this.mutations=c}applyToRemoteDocument(n,r){const a=r.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(n.key)&&QI(h,n,a[c])}}applyToLocalView(n){for(const r of this.baseMutations)r.key.isEqual(n.key)&&Rf(r,n,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(n.key)&&Rf(r,n,this.localWriteTime)}applyToLocalDocumentSet(n){this.mutations.forEach(r=>{const a=n.get(r.key),c=a;this.applyToLocalView(c),a.isValidDocument()||c.convertToNoDocument(it.min())})}keys(){return this.mutations.reduce((n,r)=>n.add(r.key),St())}isEqual(n){return this.batchId===n.batchId&&hc(this.mutations,n.mutations,(r,a)=>xv(r,a))&&hc(this.baseMutations,n.baseMutations,(r,a)=>xv(r,a))}}class Nm{constructor(n,r,a,c){this.batch=n,this.commitVersion=r,this.mutationResults=a,this.docVersions=c}static from(n,r,a){Je(n.mutations.length===a.length);let c=nb();const h=n.mutations;for(let g=0;g<h.length;g++)c=c.insert(h[g].key,a[g].version);return new Nm(n,r,a,c)}}class $a{constructor(n,r,a,c,h=it.min(),g=it.min(),v=Mn.EMPTY_BYTE_STRING){this.target=n,this.targetId=r,this.purpose=a,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=v}withSequenceNumber(n){return new $a(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,r){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class Pm{constructor(n){this.Wt=n}}function Gv(i,n){if(n.document)return ln(i.Wt,n.document,!!n.hasCommittedMutations);if(n.noDocument){const r=Ue.fromSegments(n.noDocument.path),a=Ad(n.noDocument.readTime),c=Jt.newNoDocument(r,a);return n.hasCommittedMutations?c.setHasCommittedMutations():c}if(n.unknownDocument){const r=Ue.fromSegments(n.unknownDocument.path),a=Ad(n.unknownDocument.version);return Jt.newUnknownDocument(r,a)}return Ve()}function qv(i,n,r){const a=Om(r),c=n.key.path.popLast().toArray();if(n.isFoundDocument()){const h={name:Of(v=i.Wt,(I=n).key),fields:I.data.value.mapValue.fields,updateTime:_c(v,I.version.toTimestamp())};return new mn(null,null,h,n.hasCommittedMutations,a,c)}var v,I;if(n.isNoDocument()){const h=n.key.path.toArray(),g=Sd(n.version),v=n.hasCommittedMutations;return new mn(null,new vb(h,g),null,v,a,c)}if(n.isUnknownDocument()){const h=n.key.path.toArray(),g=Sd(n.version);return new mn(new iS(h,g),null,null,!0,a,c)}return Ve()}function Om(i){const n=i.toTimestamp();return[n.seconds,n.nanoseconds]}function Db(i){const n=new On(i[0],i[1]);return it.fromTimestamp(n)}function Sd(i){const n=i.toTimestamp();return new rS(n.seconds,n.nanoseconds)}function Ad(i){const n=new On(i.seconds,i.nanoseconds);return it.fromTimestamp(n)}function Ha(i,n){const r=(n.baseMutations||[]).map(h=>lb(i.Wt,h));for(let h=0;h<n.mutations.length-1;++h){const g=n.mutations[h];h+1<n.mutations.length&&void 0!==n.mutations[h+1].transform&&(g.updateTransforms=n.mutations[h+1].transform.fieldTransforms,n.mutations.splice(h+1,1),++h)}const a=n.mutations.map(h=>lb(i.Wt,h)),c=On.fromMillis(n.localWriteTimeMs);return new Hv(n.batchId,c,r,a)}function Vf(i){const n=Ad(i.readTime),r=void 0!==i.lastLimboFreeSnapshotVersion?Ad(i.lastLimboFreeSnapshotVersion):it.min();let a;var c;return void 0!==i.query.documents?(Je(1===(c=i.query).documents.length),a=vi(mc(Mf(c.documents[0])))):a=vi($v(i.query)),new $a(a,i.targetId,0,i.lastListenSequenceNumber,n,r,Mn.fromBase64String(i.resumeToken))}function Wv(i,n){const r=Sd(n.snapshotVersion),a=Sd(n.lastLimboFreeSnapshotVersion);let c;c=Df(n.target)?Bv(i.Wt,n.target):jv(i.Wt,n.target);const h=n.resumeToken.toBase64();return new Ei(n.targetId,bf(n.target),r,h,n.sequenceNumber,a,c)}function zv(i){const n=$v({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?HI(n,n.limit,"L"):n}class aS{getBundleMetadata(n,r){return Cb(n).get(r).next(a=>{if(a)return{id:(c=a).bundleId,createTime:Ad(c.createTime),version:c.version};var c})}saveBundleMetadata(n,r){return Cb(n).put({bundleId:(a=r).id,createTime:Sd(Ln(a.createTime)),version:a.version});var a}getNamedQuery(n,r){return Tb(n).get(r).next(a=>{if(a)return{name:(c=a).name,query:zv(c.bundledQuery),readTime:Ad(c.readTime)};var c})}saveNamedQuery(n,r){return Tb(n).put({name:(a=r).name,readTime:Sd(Ln(a.readTime)),bundledQuery:a.bundledQuery});var a}}function Cb(i){return Vr(i,bd.store)}function Tb(i){return Vr(i,Dd.store)}class uS{constructor(){this.Gt=new Kv}addToCollectionParentIndex(n,r){return this.Gt.add(r),pe.resolve()}getCollectionParents(n,r){return pe.resolve(this.Gt.getEntries(r))}}class Kv{constructor(){this.index={}}add(n){const r=n.lastSegment(),a=n.popLast(),c=this.index[r]||new gn(Ct.comparator),h=!c.has(a);return this.index[r]=c.add(a),h}has(n){const r=n.lastSegment(),a=n.popLast(),c=this.index[r];return c&&c.has(a)}getEntries(n){return(this.index[n]||new gn(Ct.comparator)).toArray()}}class cS{constructor(){this.zt=new Kv}addToCollectionParentIndex(n,r){if(!this.zt.has(r)){const a=r.lastSegment(),c=r.popLast();n.addOnCommittedListener(()=>{this.zt.add(r)});const h={collectionId:a,parent:Ur(c)};return Sb(n).put(h)}return pe.resolve()}getCollectionParents(n,r){const a=[],c=IDBKeyRange.bound([r,""],[RI(r),""],!1,!0);return Sb(n).Lt(c).next(h=>{for(const g of h){if(g.collectionId!==r)break;a.push(Vo(g.parent))}return a})}}function Sb(i){return Vr(i,ja.store)}const Zv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Br{constructor(n,r,a){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}static withCacheSize(n){return new Br(n,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ab(i,n,r){const a=i.store(Gt.store),c=i.store(mr.store),h=[],g=IDBKeyRange.only(r.batchId);let v=0;const I=a.Kt({range:g},(T,A,O)=>(v++,O.delete()));h.push(I.next(()=>{Je(1===v)}));const C=[];for(const T of r.mutations){const A=mr.key(n,T.key.path,r.batchId);h.push(c.delete(A)),C.push(T.key)}return pe.waitFor(h).next(()=>C)}function Mm(i){if(!i)return 0;let n;if(i.document)n=i.document;else if(i.unknownDocument)n=i.unknownDocument;else{if(!i.noDocument)throw Ve();n=i.noDocument}return JSON.stringify(n).length}Br.DEFAULT_COLLECTION_PERCENTILE=10,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Br.DEFAULT=new Br(41943040,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Br.DISABLED=new Br(-1,0,0);class km{constructor(n,r,a,c){this.userId=n,this.N=r,this.Ht=a,this.referenceDelegate=c,this.Jt={}}static Yt(n,r,a,c){Je(""!==n.uid);const h=n.isAuthenticated()?n.uid:"";return new km(h,r,a,c)}checkEmpty(n){let r=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ga(n).Kt({index:Gt.userMutationsIndex,range:a},(c,h,g)=>{r=!1,g.done()}).next(()=>r)}addMutationBatch(n,r,a,c){const h=Rd(n),g=Ga(n);return g.add({}).next(v=>{Je("number"==typeof v);const I=new Hv(v,r,a,c),C=function(O,M,z){const ye=z.baseMutations.map(qe=>Ed(O.Wt,qe)),De=z.mutations.map(qe=>Ed(O.Wt,qe));return new Gt(M,z.batchId,z.localWriteTime.toMillis(),ye,De)}(this.N,this.userId,I),T=[];let A=new gn((O,M)=>mt(O.canonicalString(),M.canonicalString()));for(const O of c){const M=mr.key(this.userId,O.key.path,v);A=A.add(O.key.path.popLast()),T.push(g.put(C)),T.push(h.put(M,mr.PLACEHOLDER))}return A.forEach(O=>{T.push(this.Ht.addToCollectionParentIndex(n,O))}),n.addOnCommittedListener(()=>{this.Jt[v]=I.keys()}),pe.waitFor(T).next(()=>I)})}lookupMutationBatch(n,r){return Ga(n).get(r).next(a=>a?(Je(a.userId===this.userId),Ha(this.N,a)):null)}Xt(n,r){return this.Jt[r]?pe.resolve(this.Jt[r]):this.lookupMutationBatch(n,r).next(a=>{if(a){const c=a.keys();return this.Jt[r]=c,c}return null})}getNextMutationBatchAfterBatchId(n,r){const a=r+1,c=IDBKeyRange.lowerBound([this.userId,a]);let h=null;return Ga(n).Kt({index:Gt.userMutationsIndex,range:c},(g,v,I)=>{v.userId===this.userId&&(Je(v.batchId>=a),h=Ha(this.N,v)),I.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(n){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Ga(n).Kt({index:Gt.userMutationsIndex,range:r,reverse:!0},(c,h,g)=>{a=h.batchId,g.done()}).next(()=>a)}getAllMutationBatches(n){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ga(n).Lt(Gt.userMutationsIndex,r).next(a=>a.map(c=>Ha(this.N,c)))}getAllMutationBatchesAffectingDocumentKey(n,r){const a=mr.prefixForPath(this.userId,r.path),c=IDBKeyRange.lowerBound(a),h=[];return Rd(n).Kt({range:c},(g,v,I)=>{const[C,T,A]=g,O=Vo(T);if(C===this.userId&&r.path.isEqual(O))return Ga(n).get(A).next(M=>{if(!M)throw Ve();Je(M.userId===this.userId),h.push(Ha(this.N,M))});I.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(n,r){let a=new gn(mt);const c=[];return r.forEach(h=>{const g=mr.prefixForPath(this.userId,h.path),v=IDBKeyRange.lowerBound(g),I=Rd(n).Kt({range:v},(C,T,A)=>{const[O,M,z]=C,ye=Vo(M);O===this.userId&&h.path.isEqual(ye)?a=a.add(z):A.done()});c.push(I)}),pe.waitFor(c).next(()=>this.Zt(n,a))}getAllMutationBatchesAffectingQuery(n,r){const a=r.path,c=a.length+1,h=mr.prefixForPath(this.userId,a),g=IDBKeyRange.lowerBound(h);let v=new gn(mt);return Rd(n).Kt({range:g},(I,C,T)=>{const[A,O,M]=I,z=Vo(O);A===this.userId&&a.isPrefixOf(z)?z.length===c&&(v=v.add(M)):T.done()}).next(()=>this.Zt(n,v))}Zt(n,r){const a=[],c=[];return r.forEach(h=>{c.push(Ga(n).get(h).next(g=>{if(null===g)throw Ve();Je(g.userId===this.userId),a.push(Ha(this.N,g))}))}),pe.waitFor(c).next(()=>a)}removeMutationBatch(n,r){return Ab(n.Qt,this.userId,r).next(a=>(n.addOnCommittedListener(()=>{this.te(r.batchId)}),pe.forEach(a,c=>this.referenceDelegate.markPotentiallyOrphaned(n,c))))}te(n){delete this.Jt[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(r=>{if(!r)return pe.resolve();const a=IDBKeyRange.lowerBound(mr.prefixForUser(this.userId)),c=[];return Rd(n).Kt({range:a},(h,g,v)=>{if(h[0]===this.userId){const I=Vo(h[1]);c.push(I)}else v.done()}).next(()=>{Je(0===c.length)})})}containsKey(n,r){return Rb(n,this.userId,r)}ee(n){return Fm(n).get(this.userId).next(r=>r||new Bo(this.userId,-1,""))}}function Rb(i,n,r){const a=mr.prefixForPath(n,r.path),c=a[1],h=IDBKeyRange.lowerBound(a);let g=!1;return Rd(i).Kt({range:h,qt:!0},(v,I,C)=>{const[T,A,O]=v;T===n&&A===c&&(g=!0),C.done()}).next(()=>g)}function Ga(i){return Vr(i,Gt.store)}function Rd(i){return Vr(i,mr.store)}function Fm(i){return Vr(i,Bo.store)}class $o{constructor(n){this.ne=n}next(){return this.ne+=2,this.ne}static se(){return new $o(0)}static ie(){return new $o(-1)}}class xb{constructor(n,r){this.referenceDelegate=n,this.N=r}allocateTargetId(n){return this.re(n).next(r=>{const a=new $o(r.highestTargetId);return r.highestTargetId=a.next(),this.oe(n,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.re(n).next(r=>it.fromTimestamp(new On(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.re(n).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(n,r,a){return this.re(n).next(c=>(c.highestListenSequenceNumber=r,a&&(c.lastRemoteSnapshotVersion=a.toTimestamp()),r>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=r),this.oe(n,c)))}addTargetData(n,r){return this.ae(n,r).next(()=>this.re(n).next(a=>(a.targetCount+=1,this.ce(r,a),this.oe(n,a))))}updateTargetData(n,r){return this.ae(n,r)}removeTargetData(n,r){return this.removeMatchingKeysForTargetId(n,r.targetId).next(()=>qa(n).delete(r.targetId)).next(()=>this.re(n)).next(a=>(Je(a.targetCount>0),a.targetCount-=1,this.oe(n,a)))}removeTargets(n,r,a){let c=0;const h=[];return qa(n).Kt((g,v)=>{const I=Vf(v);I.sequenceNumber<=r&&null===a.get(I.targetId)&&(c++,h.push(this.removeTargetData(n,I)))}).next(()=>pe.waitFor(h)).next(()=>c)}forEachTarget(n,r){return qa(n).Kt((a,c)=>{const h=Vf(c);r(h)})}re(n){return Nb(n).get(Bi.key).next(r=>(Je(null!==r),r))}oe(n,r){return Nb(n).put(Bi.key,r)}ae(n,r){return qa(n).put(Wv(this.N,r))}ce(n,r){let a=!1;return n.targetId>r.highestTargetId&&(r.highestTargetId=n.targetId,a=!0),n.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n.sequenceNumber,a=!0),a}getTargetCount(n){return this.re(n).next(r=>r.targetCount)}getTargetData(n,r){const a=bf(r),c=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let h=null;return qa(n).Kt({range:c,index:Ei.queryTargetsIndexName},(g,v,I)=>{const C=Vf(v);wm(r,C.target)&&(h=C,I.done())}).next(()=>h)}addMatchingKeys(n,r,a){const c=[],h=Wa(n);return r.forEach(g=>{const v=Ur(g.path);c.push(h.put(new yr(a,v))),c.push(this.referenceDelegate.addReference(n,a,g))}),pe.waitFor(c)}removeMatchingKeys(n,r,a){const c=Wa(n);return pe.forEach(r,h=>{const g=Ur(h.path);return pe.waitFor([c.delete([a,g]),this.referenceDelegate.removeReference(n,a,h)])})}removeMatchingKeysForTargetId(n,r){const a=Wa(n),c=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(c)}getMatchingKeysForTargetId(n,r){const a=IDBKeyRange.bound([r],[r+1],!1,!0),c=Wa(n);let h=St();return c.Kt({range:a,qt:!0},(g,v,I)=>{const C=Vo(g[1]),T=new Ue(C);h=h.add(T)}).next(()=>h)}containsKey(n,r){const a=Ur(r.path),c=IDBKeyRange.bound([a],[RI(a)],!1,!0);let h=0;return Wa(n).Kt({index:yr.documentTargetsIndex,qt:!0,range:c},([g,v],I,C)=>{0!==g&&(h++,C.done())}).next(()=>h>0)}Et(n,r){return qa(n).get(r).next(a=>a?Vf(a):null)}}function qa(i){return Vr(i,Ei.store)}function Nb(i){return Vr(i,Bi.store)}function Wa(i){return Vr(i,yr.store)}function Ho(i){return Yv.apply(this,arguments)}function Yv(){return(Yv=(0,ae.Z)(function*(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==Cd)throw i;we("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Pb([i,n],[r,a]){const c=mt(i,r);return 0===c?mt(n,a):c}class lS{constructor(n){this.ue=n,this.buffer=new gn(Pb),this.he=0}le(){return++this.he}fe(n){const r=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();Pb(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Ob{constructor(n,r){this.garbageCollector=n,this.asyncQueue=r,this.de=!1,this.we=null}start(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(n){var r=this;const a=this.de?3e5:6e4;we("LruGarbageCollector",`Garbage collection scheduled in ${a}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",a,(0,ae.Z)(function*(){r.we=null,r.de=!0;try{yield n.collectGarbage(r.garbageCollector)}catch(c){vc(c)?we("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",c):yield Ho(c)}yield r._e(n)}))}}class Mb{constructor(n,r){this.me=n,this.params=r}calculateTargetCount(n,r){return this.me.ge(n).next(a=>Math.floor(r/100*a))}nthSequenceNumber(n,r){if(0===r)return pe.resolve(Fi.T);const a=new lS(r);return this.me.forEachTarget(n,c=>a.fe(c.sequenceNumber)).next(()=>this.me.ye(n,c=>a.fe(c))).next(()=>a.maxValue)}removeTargets(n,r,a){return this.me.removeTargets(n,r,a)}removeOrphanedDocuments(n,r){return this.me.removeOrphanedDocuments(n,r)}collect(n,r){return-1===this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Zv)):this.getCacheSize(n).next(a=>a<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zv):this.pe(n,r))}getCacheSize(n){return this.me.getCacheSize(n)}pe(n,r){let a,c,h,g,v,I,C;const T=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),c=this.params.maximumSequenceNumbersToCollect):c=A,g=Date.now(),this.nthSequenceNumber(n,c))).next(A=>(a=A,v=Date.now(),this.removeTargets(n,a,r))).next(A=>(h=A,I=Date.now(),this.removeOrphanedDocuments(n,a))).next(A=>(C=Date.now(),Ev()<=Lr.in.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-T}ms\n\tDetermined least recently used ${c} in `+(v-g)+`ms\n\tRemoved ${h} targets in `+(I-v)+`ms\n\tRemoved ${A} documents in `+(C-I)+`ms\nTotal Duration: ${C-T}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:A})))}}class kb{constructor(n,r){this.db=n,this.garbageCollector=new Mb(this,r)}ge(n){const r=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(a=>r.next(c=>a+c))}Ee(n){let r=0;return this.ye(n,a=>{r++}).next(()=>r)}forEachTarget(n,r){return this.db.getTargetCache().forEachTarget(n,r)}ye(n,r){return this.Te(n,(a,c)=>r(c))}addReference(n,r,a){return Qv(n,a)}removeReference(n,r,a){return Qv(n,a)}removeTargets(n,r,a){return this.db.getTargetCache().removeTargets(n,r,a)}markPotentiallyOrphaned(n,r){return Qv(n,r)}Ie(n,r){return function(a,c){let h=!1;return Fm(a).jt(g=>Rb(a,g,c).next(v=>(v&&(h=!0),pe.resolve(!v)))).next(()=>h)}(n,r)}removeOrphanedDocuments(n,r){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let h=0;return this.Te(n,(g,v)=>{if(v<=r){const I=this.Ie(n,g).next(C=>{if(!C)return h++,a.getEntry(n,g).next(()=>(a.removeEntry(g),Wa(n).delete([0,Ur(g.path)])))});c.push(I)}}).next(()=>pe.waitFor(c)).next(()=>a.apply(n)).next(()=>h)}removeTarget(n,r){const a=r.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,a)}updateLimboDocument(n,r){return Qv(n,r)}Te(n,r){const a=Wa(n);let c,h=Fi.T;return a.Kt({index:yr.documentTargetsIndex},([g,v],{path:I,sequenceNumber:C})=>{0===g?(h!==Fi.T&&r(new Ue(Vo(c)),h),h=C,c=I):h=Fi.T}).next(()=>{h!==Fi.T&&r(new Ue(Vo(c)),h)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function Qv(i,n){return Wa(i).put((a=i.currentSequenceNumber,new yr(0,Ur(n.path),a)));var a}class xd{constructor(n,r){this.mapKeyFn=n,this.equalsFn=r,this.inner={}}get(n){const r=this.mapKeyFn(n),a=this.inner[r];if(void 0!==a)for(const[c,h]of a)if(this.equalsFn(c,n))return h}has(n){return void 0!==this.get(n)}set(n,r){const a=this.mapKeyFn(n),c=this.inner[a];if(void 0!==c){for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],n))return void(c[h]=[n,r]);c.push([n,r])}else this.inner[a]=[[n,r]]}delete(n){const r=this.mapKeyFn(n),a=this.inner[r];if(void 0===a)return!1;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],n))return 1===a.length?delete this.inner[r]:a.splice(c,1),!0;return!1}forEach(n){La(this.inner,(r,a)=>{for(const[c,h]of a)n(c,h)})}isEmpty(){return NI(this.inner)}}class Ec{constructor(){this.changes=new xd(n=>n.toString(),(n,r)=>n.isEqual(r)),this.changesApplied=!1}getReadTime(n){const r=this.changes.get(n);return r?r.readTime:it.min()}addEntry(n,r){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:r})}removeEntry(n,r=null){this.assertNotApplied(),this.changes.set(n,{document:Jt.newInvalidDocument(n),readTime:r})}getEntry(n,r){this.assertNotApplied();const a=this.changes.get(r);return void 0!==a?pe.resolve(a.document):this.getFromCache(n,r)}getEntries(n,r){return this.getAllFromCache(n,r)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class JR{constructor(n,r){this.N=n,this.Ht=r}addEntry(n,r,a){return za(n).put(Go(r),a)}removeEntry(n,r){const a=za(n),c=Go(r);return a.delete(c)}updateMetadata(n,r){return this.getMetadata(n).next(a=>(a.byteSize+=r,this.Ae(n,a)))}getEntry(n,r){return za(n).get(Go(r)).next(a=>this.Re(r,a))}be(n,r){return za(n).get(Go(r)).next(a=>({document:this.Re(r,a),size:Mm(a)}))}getEntries(n,r){let a=Vi();return this.Pe(n,r,(c,h)=>{const g=this.Re(c,h);a=a.insert(c,g)}).next(()=>a)}ve(n,r){let a=Vi(),c=new Fn(Ue.comparator);return this.Pe(n,r,(h,g)=>{const v=this.Re(h,g);a=a.insert(h,v),c=c.insert(h,Mm(g))}).next(()=>({documents:a,Ve:c}))}Pe(n,r,a){if(r.isEmpty())return pe.resolve();const c=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),h=r.getIterator();let g=h.getNext();return za(n).Kt({range:c},(v,I,C)=>{const T=Ue.fromSegments(v);for(;g&&Ue.comparator(g,T)<0;)a(g,null),g=h.getNext();g&&g.isEqual(T)&&(a(g,I),g=h.hasNext()?h.getNext():null),g?C.Mt(g.path.toArray()):C.done()}).next(()=>{for(;g;)a(g,null),g=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(n,r,a){let c=Vi();const h=r.path.length+1,g={};if(a.isEqual(it.min())){const v=r.path.toArray();g.range=IDBKeyRange.lowerBound(v)}else{const v=r.path.toArray(),I=Om(a);g.range=IDBKeyRange.lowerBound([v,I],!0),g.index=mn.collectionReadTimeIndex}return za(n).Kt(g,(v,I,C)=>{if(v.length!==h)return;const T=Gv(this.N,I);r.path.isPrefixOf(T.key.path)?dd(r,T)&&(c=c.insert(T.key,T)):C.done()}).next(()=>c)}newChangeBuffer(n){return new Jv(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(r=>r.byteSize)}getMetadata(n){return Bf(n).get(jo.key).next(r=>(Je(!!r),r))}Ae(n,r){return Bf(n).put(jo.key,r)}Re(n,r){if(r){const a=Gv(this.N,r);if(!a.isNoDocument()||!a.version.isEqual(it.min()))return a}return Jt.newInvalidDocument(n)}}class Jv extends Ec{constructor(n,r){super(),this.Se=n,this.trackRemovals=r,this.De=new xd(a=>a.toString(),(a,c)=>a.isEqual(c))}applyChanges(n){const r=[];let a=0,c=new gn((h,g)=>mt(h.canonicalString(),g.canonicalString()));return this.changes.forEach((h,g)=>{const v=this.De.get(h);if(g.document.isValidDocument()){const I=qv(this.Se.N,g.document,this.getReadTime(h));c=c.add(h.path.popLast()),a+=Mm(I)-v,r.push(this.Se.addEntry(n,h,I))}else if(a-=v,this.trackRemovals){const I=qv(this.Se.N,Jt.newNoDocument(h,it.min()),this.getReadTime(h));r.push(this.Se.addEntry(n,h,I))}else r.push(this.Se.removeEntry(n,h))}),c.forEach(h=>{r.push(this.Se.Ht.addToCollectionParentIndex(n,h))}),r.push(this.Se.updateMetadata(n,a)),pe.waitFor(r)}getFromCache(n,r){return this.Se.be(n,r).next(a=>(this.De.set(r,a.size),a.document))}getAllFromCache(n,r){return this.Se.ve(n,r).next(({documents:a,Ve:c})=>(c.forEach((h,g)=>{this.De.set(h,g)}),a))}}function Bf(i){return Vr(i,jo.store)}function za(i){return Vr(i,mn.store)}function Go(i){return i.path.toArray()}class dS{constructor(n){this.N=n}Ct(n,r,a,c){Je(a<c&&a>=0&&c<=11);const h=new Rm("createOrUpgrade",r);var v;a<1&&c>=1&&(n.createObjectStore(ri.store),(v=n).createObjectStore(Bo.store,{keyPath:Bo.keyPath}),v.createObjectStore(Gt.store,{keyPath:Gt.keyPath,autoIncrement:!0}).createIndex(Gt.userMutationsIndex,Gt.userMutationsKeyPath,{unique:!0}),v.createObjectStore(mr.store),hS(n),function(v){v.createObjectStore(mn.store)}(n));let g=pe.resolve();return a<3&&c>=3&&(0!==a&&(function(v){v.deleteObjectStore(yr.store),v.deleteObjectStore(Ei.store),v.deleteObjectStore(Bi.store)}(n),hS(n)),g=g.next(()=>function(v){const I=v.store(Bi.store),C=new Bi(0,0,it.min().toTimestamp(),0);return I.put(Bi.key,C)}(h))),a<4&&c>=4&&(0!==a&&(g=g.next(()=>function(v,I){return I.store(Gt.store).Lt().next(C=>{v.deleteObjectStore(Gt.store),v.createObjectStore(Gt.store,{keyPath:Gt.keyPath,autoIncrement:!0}).createIndex(Gt.userMutationsIndex,Gt.userMutationsKeyPath,{unique:!0});const T=I.store(Gt.store),A=C.map(O=>T.put(O));return pe.waitFor(A)})}(n,h))),g=g.next(()=>{!function(v){v.createObjectStore(ji.store,{keyPath:ji.keyPath})}(n)})),a<5&&c>=5&&(g=g.next(()=>this.Ce(h))),a<6&&c>=6&&(g=g.next(()=>(function(v){v.createObjectStore(jo.store)}(n),this.Ne(h)))),a<7&&c>=7&&(g=g.next(()=>this.xe(h))),a<8&&c>=8&&(g=g.next(()=>this.ke(n,h))),a<9&&c>=9&&(g=g.next(()=>{(function(v){v.objectStoreNames.contains("remoteDocumentChanges")&&v.deleteObjectStore("remoteDocumentChanges")})(n),function(v){const I=v.objectStore(mn.store);I.createIndex(mn.readTimeIndex,mn.readTimeIndexPath,{unique:!1}),I.createIndex(mn.collectionReadTimeIndex,mn.collectionReadTimeIndexPath,{unique:!1})}(r)})),a<10&&c>=10&&(g=g.next(()=>this.$e(h))),a<11&&c>=11&&(g=g.next(()=>{(function(v){v.createObjectStore(bd.store,{keyPath:bd.keyPath})})(n),function(v){v.createObjectStore(Dd.store,{keyPath:Dd.keyPath})}(n)})),g}Ne(n){let r=0;return n.store(mn.store).Kt((a,c)=>{r+=Mm(c)}).next(()=>{const a=new jo(r);return n.store(jo.store).put(jo.key,a)})}Ce(n){const r=n.store(Bo.store),a=n.store(Gt.store);return r.Lt().next(c=>pe.forEach(c,h=>{const g=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return a.Lt(Gt.userMutationsIndex,g).next(v=>pe.forEach(v,I=>{Je(I.userId===h.userId);const C=Ha(this.N,I);return Ab(n,h.userId,C).next(()=>{})}))}))}xe(n){const r=n.store(yr.store),a=n.store(mn.store);return n.store(Bi.store).get(Bi.key).next(c=>{const h=[];return a.Kt((g,v)=>{const I=new Ct(g),C=[0,Ur(I)];h.push(r.get(C).next(T=>T?pe.resolve():r.put(new yr(0,Ur(I),c.highestListenSequenceNumber))))}).next(()=>pe.waitFor(h))})}ke(n,r){n.createObjectStore(ja.store,{keyPath:ja.keyPath});const a=r.store(ja.store),c=new Kv,h=g=>{if(c.add(g)){const v=g.lastSegment(),I=g.popLast();return a.put({collectionId:v,parent:Ur(I)})}};return r.store(mn.store).Kt({qt:!0},(g,v)=>{const I=new Ct(g);return h(I.popLast())}).next(()=>r.store(mr.store).Kt({qt:!0},([g,v,I],C)=>{const T=Vo(v);return h(T.popLast())}))}$e(n){const r=n.store(Ei.store);return r.Kt((a,c)=>{const h=Vf(c),g=Wv(this.N,h);return r.put(g)})}}function hS(i){i.createObjectStore(yr.store,{keyPath:yr.keyPath}).createIndex(yr.documentTargetsIndex,yr.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(Ei.store,{keyPath:Ei.keyPath}).createIndex(Ei.queryTargetsIndexName,Ei.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(Bi.store)}const Xv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Hi{constructor(n,r,a,c,h,g,v,I,C,T){if(this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=a,this.Oe=h,this.window=g,this.document=v,this.Fe=C,this.Me=T,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=A=>Promise.resolve(),!Hi.bt())throw new me(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kb(this,c),this.We=r+"main",this.N=new Pm(I),this.Ge=new vs(this.We,11,new dS(this.N)),this.ze=new xb(this.referenceDelegate,this.N),this.Ht=new cS,this.He=new JR(this.N,this.Ht),this.Je=new aS,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===T&&In("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new me(ne.FAILED_PRECONDITION,Xv);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.ze.getHighestSequenceNumber(n))}).then(n=>{this.Le=new Fi(n,this.Fe)}).then(()=>{this.Be=!0}).catch(n=>(this.Ge&&this.Ge.close(),Promise.reject(n)))}nn(n){var r=this;return this.Qe=function(){var a=(0,ae.Z)(function*(c){if(r.started)return n(c)});return function(c){return a.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.Ge.xt(function(){var r=(0,ae.Z)(function*(a){null===a.newVersion&&(yield n())});return function(a){return r.apply(this,arguments)}}())}setNetworkEnabled(n){var r=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,ae.Z)(function*(){r.started&&(yield r.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>eE(n).put(new ji(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(n).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(n)).next(r=>this.isPrimary&&!r?this.on(n).next(()=>!1):!!r&&this.an(n).next(()=>!0))).catch(n=>{if(vc(n))return we("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return we("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Oe.enqueueRetryable(()=>this.Qe(n)),this.isPrimary=n})}sn(n){return Nd(n).get(ri.key).next(r=>pe.resolve(this.cn(r)))}un(n){return eE(n).delete(this.clientId)}hn(){var n=this;return(0,ae.Z)(function*(){if(n.isPrimary&&!n.ln(n.je,18e5)){n.je=Date.now();const r=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const c=Vr(a,ji.store);return c.Lt().next(h=>{const g=n.fn(h,18e5),v=h.filter(I=>-1===g.indexOf(I));return pe.forEach(v,I=>c.delete(I.clientId)).next(()=>v)})}).catch(()=>[]);if(n.Ye)for(const a of r)n.Ye.removeItem(n.dn(a.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(n){return!!n&&n.ownerId===this.clientId}rn(n){return this.Me?pe.resolve(!0):Nd(n).get(ri.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)){if(this.cn(r)&&this.networkEnabled)return!0;if(!this.cn(r)){if(!r.allowTabSynchronization)throw new me(ne.FAILED_PRECONDITION,Xv);return!1}}return!(!this.networkEnabled||!this.inForeground)||eE(n).Lt().next(a=>void 0===this.fn(a,5e3).find(c=>{if(this.clientId!==c.clientId){const g=!this.inForeground&&c.inForeground,v=this.networkEnabled===c.networkEnabled;if(!this.networkEnabled&&c.networkEnabled||g&&v)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&we("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var n=this;return(0,ae.Z)(function*(){n.Be=!1,n._n(),n.Ke&&(n.Ke.cancel(),n.Ke=null),n.mn(),n.gn(),yield n.Ge.runTransaction("shutdown","readwrite",[ri.store,ji.store],r=>{const a=new bb(r,Fi.T);return n.on(a).next(()=>n.un(a))}),n.Ge.close(),n.yn()})()}fn(n,r){return n.filter(a=>this.ln(a.updateTimeMs,r)&&!this.wn(a.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",n=>eE(n).Lt().next(r=>this.fn(r,18e5).map(a=>a.clientId)))}get started(){return this.Be}getMutationQueue(n){return km.Yt(n,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(n,r,a){let h;return we("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===r?"readonly":"readwrite",Eb,g=>(h=new bb(g,this.Le?this.Le.next():Fi.T),"readwrite-primary"===r?this.sn(h).next(v=>!!v||this.rn(h)).next(v=>{if(!v)throw In(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new me(ne.FAILED_PRECONDITION,Cd);return a(h)}).next(v=>this.an(h).next(()=>v)):this.En(h).next(()=>a(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}En(n){return Nd(n).get(ri.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)&&!this.cn(r)&&!(this.Me||this.allowTabSynchronization&&r.allowTabSynchronization))throw new me(ne.FAILED_PRECONDITION,Xv)})}an(n){const r=new ri(this.clientId,this.allowTabSynchronization,Date.now());return Nd(n).put(ri.key,r)}static bt(){return vs.bt()}on(n){const r=Nd(n);return r.get(ri.key).next(a=>this.cn(a)?(we("IndexedDbPersistence","Releasing primary lease."),r.delete(ri.key)):pe.resolve())}ln(n,r){const a=Date.now();return!(n<a-r||n>a&&(In(`Detected an update time that is in the future: ${n} > ${a}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Ue=()=>{this._n(),(0,at.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(n){var r;try{const a=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(n)));return we("IndexedDbPersistence",`Client '${n}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return In("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){In("Failed to set zombie client id.",n)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}dn(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function Nd(i){return Vr(i,ri.store)}function eE(i){return Vr(i,ji.store)}function Pd(i,n){let r=i.projectId;return i.isDefaultDatabase||(r+="."+i.database),"firestore/"+n+"/"+r+"/"}class fS{constructor(n,r){this.progress=n,this.Tn=r}}class Fb{constructor(n,r,a){this.He=n,this.In=r,this.Ht=a}An(n,r){return this.In.getAllMutationBatchesAffectingDocumentKey(n,r).next(a=>this.Rn(n,r,a))}Rn(n,r,a){return this.He.getEntry(n,r).next(c=>{for(const h of a)h.applyToLocalView(c);return c})}bn(n,r){n.forEach((a,c)=>{for(const h of r)h.applyToLocalView(c)})}Pn(n,r){return this.He.getEntries(n,r).next(a=>this.vn(n,a).next(()=>a))}vn(n,r){return this.In.getAllMutationBatchesAffectingDocumentKeys(n,r).next(a=>this.bn(r,a))}getDocumentsMatchingQuery(n,r,a){return Ue.isDocumentKey((c=r).path)&&null===c.collectionGroup&&0===c.filters.length?this.Vn(n,r.path):Av(r)?this.Sn(n,r,a):this.Dn(n,r,a);var c}Vn(n,r){return this.An(n,new Ue(r)).next(a=>{let c=Fv();return a.isFoundDocument()&&(c=c.insert(a.key,a)),c})}Sn(n,r,a){const c=r.collectionGroup;let h=Fv();return this.Ht.getCollectionParents(n,c).next(g=>pe.forEach(g,v=>{const I=(C=r,T=v.child(c),new ko(T,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,T;return this.Dn(n,I,a).next(C=>{C.forEach((T,A)=>{h=h.insert(T,A)})})}).next(()=>h))}Dn(n,r,a){let c,h;return this.He.getDocumentsMatchingQuery(n,r,a).next(g=>(c=g,this.In.getAllMutationBatchesAffectingQuery(n,r))).next(g=>(h=g,this.Cn(n,h,c).next(v=>{c=v;for(const I of h)for(const C of I.mutations){const T=C.key;let A=c.get(T);null==A&&(A=Jt.newInvalidDocument(T),c=c.insert(T,A)),Rf(C,A,I.localWriteTime),A.isFoundDocument()||(c=c.remove(T))}}))).next(()=>(c.forEach((g,v)=>{dd(r,v)||(c=c.remove(g))}),c))}Cn(n,r,a){let c=St();for(const g of r)for(const v of g.mutations)v instanceof Lo&&null===a.get(v.key)&&(c=c.add(v.key));let h=a;return this.He.getEntries(n,c).next(g=>(g.forEach((v,I)=>{I.isFoundDocument()&&(h=h.insert(v,I))}),h))}}class Lb{constructor(n,r,a,c){this.targetId=n,this.fromCache=r,this.Nn=a,this.xn=c}static kn(n,r){let a=St(),c=St();for(const h of r.docChanges)switch(h.type){case 0:a=a.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new Lb(n,r.fromCache,a,c)}}class Ub{$n(n){this.On=n}getDocumentsMatchingQuery(n,r,a,c){return 0===(h=r).filters.length&&null===h.limit&&null==h.startAt&&null==h.endAt&&(0===h.explicitOrderBy.length||1===h.explicitOrderBy.length&&h.explicitOrderBy[0].field.isKeyField())||a.isEqual(it.min())?this.Fn(n,r):this.On.Pn(n,c).next(h=>{const g=this.Mn(r,h);return(bm(r)||Tf(r))&&this.Ln(r.limitType,g,c,a)?this.Fn(n,r):(Ev()<=Lr.in.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Cm(r)),this.On.getDocumentsMatchingQuery(n,r,a).next(v=>(g.forEach(I=>{v=v.insert(I.key,I)}),v)))});var h}Mn(n,r){let a=new gn(ys(n));return r.forEach((c,h)=>{dd(n,h)&&(a=a.add(h))}),a}Ln(n,r,a,c){if(a.size!==r.size)return!0;const h="F"===n?r.last():r.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}Fn(n,r){return Ev()<=Lr.in.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Cm(r)),this.On.getDocumentsMatchingQuery(n,r,it.min())}}class pS{constructor(n,r,a,c){this.persistence=n,this.Bn=r,this.N=c,this.Un=new Fn(mt),this.qn=new xd(h=>bf(h),wm),this.Kn=it.min(),this.In=n.getMutationQueue(a),this.jn=n.getRemoteDocumentCache(),this.ze=n.getTargetCache(),this.Qn=new Fb(this.jn,this.In,this.persistence.getIndexManager()),this.Je=n.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>n.collect(r,this.Un))}}function Vb(i,n,r,a){return new pS(i,n,r,a)}function Lm(i,n){return Um.apply(this,arguments)}function Um(){return(Um=(0,ae.Z)(function*(i,n){const r=Te(i);let a=r.In,c=r.Qn;const h=yield r.persistence.runTransaction("Handle user change","readonly",g=>{let v;return r.In.getAllMutationBatches(g).next(I=>(v=I,a=r.persistence.getMutationQueue(n),c=new Fb(r.jn,a,r.persistence.getIndexManager()),a.getAllMutationBatches(g))).next(I=>{const C=[],T=[];let A=St();for(const O of v){C.push(O.batchId);for(const M of O.mutations)A=A.add(M.key)}for(const O of I){T.push(O.batchId);for(const M of O.mutations)A=A.add(M.key)}return c.Pn(g,A).next(O=>({Wn:O,removedBatchIds:C,addedBatchIds:T}))})});return r.In=a,r.Qn=c,r.Bn.$n(r.Qn),h})).apply(this,arguments)}function tE(i,n){const r=Te(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const c=n.batch.keys(),h=r.jn.newChangeBuffer({trackRemovals:!0});return function(g,v,I,C){const T=I.batch,A=T.keys();let O=pe.resolve();return A.forEach(M=>{O=O.next(()=>C.getEntry(v,M)).next(z=>{const ye=I.docVersions.get(M);Je(null!==ye),z.version.compareTo(ye)<0&&(T.applyToRemoteDocument(z,I),z.isValidDocument()&&C.addEntry(z,I.commitVersion))})}),O.next(()=>g.In.removeMutationBatch(v,T))}(r,a,n,h).next(()=>h.apply(a)).next(()=>r.In.performConsistencyCheck(a)).next(()=>r.Qn.Pn(a,c))})}function nE(i){const n=Te(i);return n.persistence.runTransaction("Get last remote snapshot version","readonly",r=>n.ze.getLastRemoteSnapshotVersion(r))}function gS(i,n){const r=Te(i),a=n.snapshotVersion;let c=r.Un;return r.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const g=r.jn.newChangeBuffer({trackRemovals:!0});c=r.Un;const v=[];n.targetChanges.forEach((C,T)=>{const A=c.get(T);if(!A)return;v.push(r.ze.removeMatchingKeys(h,C.removedDocuments,T).next(()=>r.ze.addMatchingKeys(h,C.addedDocuments,T)));const O=C.resumeToken;if(O.approximateByteSize()>0){const M=A.withResumeToken(O,a).withSequenceNumber(h.currentSequenceNumber);c=c.insert(T,M),z=A,De=C,Je((ye=M).resumeToken.approximateByteSize()>0),(0===z.resumeToken.approximateByteSize()||ye.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8||De.addedDocuments.size+De.modifiedDocuments.size+De.removedDocuments.size>0)&&v.push(r.ze.updateTargetData(h,M))}var z,ye,De});let I=Vi();if(n.documentUpdates.forEach((C,T)=>{n.resolvedLimboDocuments.has(C)&&v.push(r.persistence.referenceDelegate.updateLimboDocument(h,C))}),v.push(mS(h,g,n.documentUpdates,a,void 0).next(C=>{I=C})),!a.isEqual(it.min())){const C=r.ze.getLastRemoteSnapshotVersion(h).next(T=>r.ze.setTargetsMetadata(h,h.currentSequenceNumber,a));v.push(C)}return pe.waitFor(v).next(()=>g.apply(h)).next(()=>r.Qn.vn(h,I)).next(()=>I)}).then(h=>(r.Un=c,h))}function mS(i,n,r,a,c){let h=St();return r.forEach(g=>h=h.add(g)),n.getEntries(i,h).next(g=>{let v=Vi();return r.forEach((I,C)=>{const T=g.get(I),A=(null==c?void 0:c.get(I))||a;C.isNoDocument()&&C.version.isEqual(it.min())?(n.removeEntry(I,A),v=v.insert(I,C)):!T.isValidDocument()||C.version.compareTo(T.version)>0||0===C.version.compareTo(T.version)&&T.hasPendingWrites?(n.addEntry(C,A),v=v.insert(I,C)):we("LocalStore","Ignoring outdated watch update for ",I,". Current version:",T.version," Watch version:",C.version)}),v})}function yS(i,n){const r=Te(i);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===n&&(n=-1),r.In.getNextMutationBatchAfterBatchId(a,n)))}function Od(i,n){const r=Te(i);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let c;return r.ze.getTargetData(a,n).next(h=>h?(c=h,pe.resolve(c)):r.ze.allocateTargetId(a).next(g=>(c=new $a(n,g,0,a.currentSequenceNumber),r.ze.addTargetData(a,c).next(()=>c))))}).then(a=>{const c=r.Un.get(a.targetId);return(null===c||a.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(r.Un=r.Un.insert(a.targetId,a),r.qn.set(n,a.targetId)),a})}function Md(i,n,r){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,ae.Z)(function*(i,n,r){const a=Te(i),c=a.Un.get(n),h=r?"readwrite":"readwrite-primary";try{r||(yield a.persistence.runTransaction("Release target",h,g=>a.persistence.referenceDelegate.removeTarget(g,c)))}catch(g){if(!vc(g))throw g;we("LocalStore",`Failed to update sequence numbers for target ${n}: ${g}`)}a.Un=a.Un.remove(n),a.qn.delete(c.target)})).apply(this,arguments)}function jf(i,n,r){const a=Te(i);let c=it.min(),h=St();return a.persistence.runTransaction("Execute query","readonly",g=>function(v,I,C){const T=Te(v),A=T.qn.get(C);return void 0!==A?pe.resolve(T.Un.get(A)):T.ze.getTargetData(I,C)}(a,g,vi(n)).next(v=>{if(v)return c=v.lastLimboFreeSnapshotVersion,a.ze.getMatchingKeysForTargetId(g,v.targetId).next(I=>{h=I})}).next(()=>a.Bn.getDocumentsMatchingQuery(g,n,r?c:it.min(),r?h:St())).next(v=>({documents:v,Gn:h})))}function rE(i,n){const r=Te(i),a=Te(r.ze),c=r.Un.get(n);return c?Promise.resolve(c.target):r.persistence.runTransaction("Get target data","readonly",h=>a.Et(h,n).next(g=>g?g.target:null))}function Bb(i){const n=Te(i);return n.persistence.runTransaction("Get new document changes","readonly",r=>function(a,c,h){const g=Te(a);let v=Vi(),I=Om(h);const C=za(c),T=IDBKeyRange.lowerBound(I,!0);return C.Kt({index:mn.readTimeIndex,range:T},(A,O)=>{const M=Gv(g.N,O);v=v.insert(M.key,M),I=O.readTime}).next(()=>({Tn:v,readTime:Db(I)}))}(n.jn,r,n.Kn)).then(({Tn:r,readTime:a})=>(n.Kn=a,r))}function Bm(){return(Bm=(0,ae.Z)(function*(i){const n=Te(i);return n.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(a){const c=za(a);let h=it.min();return c.Kt({index:mn.readTimeIndex,reverse:!0},(g,v,I)=>{v.readTime&&(h=Db(v.readTime)),I.done()}).next(()=>h)}(r)).then(r=>{n.Kn=r})})).apply(this,arguments)}function iE(){return(iE=(0,ae.Z)(function*(i,n,r,a){const c=Te(i);let h=St(),g=Vi(),v=nb();for(const T of r){const A=n.zn(T.metadata.name);T.document&&(h=h.add(A)),g=g.insert(A,n.Hn(T)),v=v.insert(A,n.Jn(T.metadata.readTime))}const I=c.jn.newChangeBuffer({trackRemovals:!0}),C=yield Od(c,(T=a,vi(mc(Ct.fromString(`__bundle__/docs/${T}`)))));var T;return c.persistence.runTransaction("Apply bundle documents","readwrite",T=>mS(T,I,g,it.min(),v).next(A=>(I.apply(T),A)).next(A=>c.ze.removeMatchingKeysForTargetId(T,C.targetId).next(()=>c.ze.addMatchingKeys(T,h,C.targetId)).next(()=>c.Qn.vn(T,A)).next(()=>A)))})).apply(this,arguments)}function jb(i,n){return kd.apply(this,arguments)}function kd(){return(kd=(0,ae.Z)(function*(i,n,r=St()){const a=yield Od(i,vi(zv(n.bundledQuery))),c=Te(i);return c.persistence.runTransaction("Save named query","readwrite",h=>{const g=Ln(n.readTime);if(a.snapshotVersion.compareTo(g)>=0)return c.Je.saveNamedQuery(h,n);const v=a.withResumeToken(Mn.EMPTY_BYTE_STRING,g);return c.Un=c.Un.insert(v.targetId,v),c.ze.updateTargetData(h,v).next(()=>c.ze.removeMatchingKeysForTargetId(h,a.targetId)).next(()=>c.ze.addMatchingKeys(h,r,a.targetId)).next(()=>c.Je.saveNamedQuery(h,n))})})).apply(this,arguments)}class $m{constructor(n){this.N=n,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(n,r){return pe.resolve(this.Yn.get(r))}saveBundleMetadata(n,r){var a;return this.Yn.set(r.id,{id:(a=r).id,version:a.version,createTime:Ln(a.createTime)}),pe.resolve()}getNamedQuery(n,r){return pe.resolve(this.Xn.get(r))}saveNamedQuery(n,r){return this.Xn.set(r.name,{name:(a=r).name,query:zv(a.bundledQuery),readTime:Ln(a.readTime)}),pe.resolve();var a}}class wc{constructor(){this.Zn=new gn(zn.ts),this.es=new gn(zn.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(n,r){const a=new zn(n,r);this.Zn=this.Zn.add(a),this.es=this.es.add(a)}ss(n,r){n.forEach(a=>this.addReference(a,r))}removeReference(n,r){this.rs(new zn(n,r))}os(n,r){n.forEach(a=>this.removeReference(a,r))}cs(n){const r=new Ue(new Ct([])),a=new zn(r,n),c=new zn(r,n+1),h=[];return this.es.forEachInRange([a,c],g=>{this.rs(g),h.push(g.key)}),h}us(){this.Zn.forEach(n=>this.rs(n))}rs(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}hs(n){const r=new Ue(new Ct([])),a=new zn(r,n),c=new zn(r,n+1);let h=St();return this.es.forEachInRange([a,c],g=>{h=h.add(g.key)}),h}containsKey(n){const r=new zn(n,0),a=this.Zn.firstAfterOrEqual(r);return null!==a&&n.isEqual(a.key)}}class zn{constructor(n,r){this.key=n,this.ls=r}static ts(n,r){return Ue.comparator(n.key,r.key)||mt(n.ls,r.ls)}static ns(n,r){return mt(n.ls,r.ls)||Ue.comparator(n.key,r.key)}}class vS{constructor(n,r){this.Ht=n,this.referenceDelegate=r,this.In=[],this.fs=1,this.ds=new gn(zn.ts)}checkEmpty(n){return pe.resolve(0===this.In.length)}addMutationBatch(n,r,a,c){const h=this.fs;this.fs++;const g=new Hv(h,r,a,c);this.In.push(g);for(const v of c)this.ds=this.ds.add(new zn(v.key,h)),this.Ht.addToCollectionParentIndex(n,v.key.path.popLast());return pe.resolve(g)}lookupMutationBatch(n,r){return pe.resolve(this.ws(r))}getNextMutationBatchAfterBatchId(n,r){const c=this._s(r+1),h=c<0?0:c;return pe.resolve(this.In.length>h?this.In[h]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(n){return pe.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(n,r){const a=new zn(r,0),c=new zn(r,Number.POSITIVE_INFINITY),h=[];return this.ds.forEachInRange([a,c],g=>{const v=this.ws(g.ls);h.push(v)}),pe.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(n,r){let a=new gn(mt);return r.forEach(c=>{const h=new zn(c,0),g=new zn(c,Number.POSITIVE_INFINITY);this.ds.forEachInRange([h,g],v=>{a=a.add(v.ls)})}),pe.resolve(this.gs(a))}getAllMutationBatchesAffectingQuery(n,r){const a=r.path,c=a.length+1;let h=a;Ue.isDocumentKey(h)||(h=h.child(""));const g=new zn(new Ue(h),0);let v=new gn(mt);return this.ds.forEachWhile(I=>{const C=I.key.path;return!!a.isPrefixOf(C)&&(C.length===c&&(v=v.add(I.ls)),!0)},g),pe.resolve(this.gs(v))}gs(n){const r=[];return n.forEach(a=>{const c=this.ws(a);null!==c&&r.push(c)}),r}removeMutationBatch(n,r){Je(0===this.ys(r.batchId,"removed")),this.In.shift();let a=this.ds;return pe.forEach(r.mutations,c=>{const h=new zn(c.key,r.batchId);return a=a.delete(h),this.referenceDelegate.markPotentiallyOrphaned(n,c.key)}).next(()=>{this.ds=a})}te(n){}containsKey(n,r){const a=new zn(r,0),c=this.ds.firstAfterOrEqual(a);return pe.resolve(r.isEqual(c&&c.key))}performConsistencyCheck(n){return pe.resolve()}ys(n,r){return this._s(n)}_s(n){return 0===this.In.length?0:n-this.In[0].batchId}ws(n){const r=this._s(n);return r<0||r>=this.In.length?null:this.In[r]}}class XR{constructor(n,r){this.Ht=n,this.ps=r,this.docs=new Fn(Ue.comparator),this.size=0}addEntry(n,r,a){const c=r.key,h=this.docs.get(c),g=h?h.size:0,v=this.ps(r);return this.docs=this.docs.insert(c,{document:r.clone(),size:v,readTime:a}),this.size+=v-g,this.Ht.addToCollectionParentIndex(n,c.path.popLast())}removeEntry(n){const r=this.docs.get(n);r&&(this.docs=this.docs.remove(n),this.size-=r.size)}getEntry(n,r){const a=this.docs.get(r);return pe.resolve(a?a.document.clone():Jt.newInvalidDocument(r))}getEntries(n,r){let a=Vi();return r.forEach(c=>{const h=this.docs.get(c);a=a.insert(c,h?h.document.clone():Jt.newInvalidDocument(c))}),pe.resolve(a)}getDocumentsMatchingQuery(n,r,a){let c=Vi();const h=new Ue(r.path.child("")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:v,value:{document:I,readTime:C}}=g.getNext();if(!r.path.isPrefixOf(v.path))break;C.compareTo(a)<=0||dd(r,I)&&(c=c.insert(I.key,I.clone()))}return pe.resolve(c)}Es(n,r){return pe.forEach(this.docs,a=>r(a))}newChangeBuffer(n){return new ES(this)}getSize(n){return pe.resolve(this.size)}}class ES extends Ec{constructor(n){super(),this.Se=n}applyChanges(n){const r=[];return this.changes.forEach((a,c)=>{c.document.isValidDocument()?r.push(this.Se.addEntry(n,c.document,this.getReadTime(a))):this.Se.removeEntry(a)}),pe.waitFor(r)}getFromCache(n,r){return this.Se.getEntry(n,r)}getAllFromCache(n,r){return this.Se.getEntries(n,r)}}class wS{constructor(n){this.persistence=n,this.Ts=new xd(r=>bf(r),wm),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.Is=0,this.As=new wc,this.targetCount=0,this.Rs=$o.se()}forEachTarget(n,r){return this.Ts.forEach((a,c)=>r(c)),pe.resolve()}getLastRemoteSnapshotVersion(n){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return pe.resolve(this.Is)}allocateTargetId(n){return this.highestTargetId=this.Rs.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(n,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.Is&&(this.Is=r),pe.resolve()}ae(n){this.Ts.set(n.target,n);const r=n.targetId;r>this.highestTargetId&&(this.Rs=new $o(r),this.highestTargetId=r),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}addTargetData(n,r){return this.ae(r),this.targetCount+=1,pe.resolve()}updateTargetData(n,r){return this.ae(r),pe.resolve()}removeTargetData(n,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,pe.resolve()}removeTargets(n,r,a){let c=0;const h=[];return this.Ts.forEach((g,v)=>{v.sequenceNumber<=r&&null===a.get(v.targetId)&&(this.Ts.delete(g),h.push(this.removeMatchingKeysForTargetId(n,v.targetId)),c++)}),pe.waitFor(h).next(()=>c)}getTargetCount(n){return pe.resolve(this.targetCount)}getTargetData(n,r){const a=this.Ts.get(r)||null;return pe.resolve(a)}addMatchingKeys(n,r,a){return this.As.ss(r,a),pe.resolve()}removeMatchingKeys(n,r,a){this.As.os(r,a);const c=this.persistence.referenceDelegate,h=[];return c&&r.forEach(g=>{h.push(c.markPotentiallyOrphaned(n,g))}),pe.waitFor(h)}removeMatchingKeysForTargetId(n,r){return this.As.cs(r),pe.resolve()}getMatchingKeysForTargetId(n,r){const a=this.As.hs(r);return pe.resolve(a)}containsKey(n,r){return pe.resolve(this.As.containsKey(r))}}class IS{constructor(n,r){this.bs={},this.Le=new Fi(0),this.Be=!1,this.Be=!0,this.referenceDelegate=n(this),this.ze=new wS(this),this.Ht=new uS,this.He=new XR(this.Ht,a=>this.referenceDelegate.Ps(a)),this.N=new Pm(r),this.Je=new $m(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(n){let r=this.bs[n.toKey()];return r||(r=new vS(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=r),r}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(n,r,a){we("MemoryPersistence","Starting transaction:",n);const c=new bS(this.Le.next());return this.referenceDelegate.vs(),a(c).next(h=>this.referenceDelegate.Vs(c).next(()=>h)).toPromise().then(h=>(c.raiseOnCommittedEvent(),h))}Ss(n,r){return pe.or(Object.values(this.bs).map(a=>()=>a.containsKey(n,r)))}}class bS extends wb{constructor(n){super(),this.currentSequenceNumber=n}}class sE{constructor(n){this.persistence=n,this.Ds=new wc,this.Cs=null}static Ns(n){return new sE(n)}get xs(){if(this.Cs)return this.Cs;throw Ve()}addReference(n,r,a){return this.Ds.addReference(a,r),this.xs.delete(a.toString()),pe.resolve()}removeReference(n,r,a){return this.Ds.removeReference(a,r),this.xs.add(a.toString()),pe.resolve()}markPotentiallyOrphaned(n,r){return this.xs.add(r.toString()),pe.resolve()}removeTarget(n,r){this.Ds.cs(r.targetId).forEach(c=>this.xs.add(c.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(n,r.targetId).next(c=>{c.forEach(h=>this.xs.add(h.toString()))}).next(()=>a.removeTargetData(n,r))}vs(){this.Cs=new Set}Vs(n){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.xs,a=>{const c=Ue.fromPath(a);return this.ks(n,c).next(h=>{h||r.removeEntry(c)})}).next(()=>(this.Cs=null,r.apply(n)))}updateLimboDocument(n,r){return this.ks(n,r).next(a=>{a?this.xs.delete(r.toString()):this.xs.add(r.toString())})}Ps(n){return 0}ks(n,r){return pe.or([()=>pe.resolve(this.Ds.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(n,r),()=>this.persistence.Ss(n,r)])}}function $b(i,n){return`firestore_clients_${i}_${n}`}function Hb(i,n,r){let a=`firestore_mutations_${i}_${r}`;return n.isAuthenticated()&&(a+=`_${n.uid}`),a}function oE(i,n){return`firestore_targets_${i}_${n}`}class Hm{constructor(n,r,a,c){this.user=n,this.batchId=r,this.state=a,this.error=c}static $s(n,r,a){const c=JSON.parse(a);let h,g="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return g&&c.error&&(g="string"==typeof c.error.message&&"string"==typeof c.error.code,g&&(h=new me(c.error.code,c.error.message))),g?new Hm(n,r,c.state,h):(In("SharedClientState",`Failed to parse mutation state for ID '${r}': ${a}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Gm{constructor(n,r,a){this.targetId=n,this.state=r,this.error=a}static $s(n,r){const a=JSON.parse(r);let c,h="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(c=new me(a.error.code,a.error.message))),h?new Gm(n,a.state,c):(In("SharedClientState",`Failed to parse target state for ID '${n}': ${r}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class qm{constructor(n,r){this.clientId=n,this.activeTargetIds=r}static $s(n,r){const a=JSON.parse(r);let c="object"==typeof a&&a.activeTargetIds instanceof Array,h=Nf();for(let g=0;c&&g<a.activeTargetIds.length;++g)c=mm(a.activeTargetIds[g]),h=h.add(a.activeTargetIds[g]);return c?new qm(n,h):(In("SharedClientState",`Failed to parse client data for instance '${n}': ${r}`),null)}}class Ic{constructor(n,r){this.clientId=n,this.onlineState=r}static $s(n){const r=JSON.parse(n);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new Ic(r.clientId,r.onlineState):(In("SharedClientState",`Failed to parse online state: ${n}`),null)}}class aE{constructor(){this.activeTargetIds=Nf()}Fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Ms(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Os(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class uE{constructor(n,r,a,c,h){this.window=n,this.Oe=r,this.persistenceKey=a,this.Ls=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Fn(mt),this.started=!1,this.Ks=[];const g=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.js=$b(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new aE),this.Ws=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(v){return`firestore_bundle_loaded_${v}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,ae.Z)(function*(){const r=yield n.syncEngine.pn();for(const c of r){if(c===n.Ls)continue;const h=n.getItem($b(n.persistenceKey,c));if(h){const g=qm.$s(c,h);g&&(n.qs=n.qs.insert(g.clientId,g))}}n.Ys();const a=n.storage.getItem(n.Hs);if(a){const c=n.Xs(a);c&&n.Zs(c)}for(const c of n.Ks)n.Us(c);n.Ks=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Qs,JSON.stringify(n))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(n){let r=!1;return this.qs.forEach((a,c)=>{c.activeTargetIds.has(n)&&(r=!0)}),r}addPendingMutation(n){this.ei(n,"pending")}updateMutationState(n,r,a){this.ei(n,r,a),this.ni(n)}addLocalQueryTarget(n){let r="not-current";if(this.isActiveQueryTarget(n)){const a=this.storage.getItem(oE(this.persistenceKey,n));if(a){const c=Gm.$s(n,a);c&&(r=c.state)}}return this.si.Fs(n),this.Ys(),r}removeLocalQueryTarget(n){this.si.Ms(n),this.Ys()}isLocalQueryTarget(n){return this.si.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(oE(this.persistenceKey,n))}updateQueryState(n,r,a){this.ii(n,r,a)}handleUserChange(n,r,a){r.forEach(c=>{this.ni(c)}),this.currentUser=n,a.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(n){this.ri(n)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(n){const r=this.storage.getItem(n);return we("SharedClientState","READ",n,r),r}setItem(n,r){we("SharedClientState","SET",n,r),this.storage.setItem(n,r)}removeItem(n){we("SharedClientState","REMOVE",n),this.storage.removeItem(n)}Us(n){var r=this;const a=n;if(a.storageArea===this.storage){if(we("SharedClientState","EVENT",a.key,a.newValue),a.key===this.js)return void In("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,ae.Z)(function*(){if(r.started){if(null!==a.key)if(r.Ws.test(a.key)){if(null==a.newValue){const c=r.ai(a.key);return r.ci(c,null)}{const c=r.ui(a.key,a.newValue);if(c)return r.ci(c.clientId,c)}}else if(r.Gs.test(a.key)){if(null!==a.newValue){const c=r.hi(a.key,a.newValue);if(c)return r.li(c)}}else if(r.zs.test(a.key)){if(null!==a.newValue){const c=r.fi(a.key,a.newValue);if(c)return r.di(c)}}else if(a.key===r.Hs){if(null!==a.newValue){const c=r.Xs(a.newValue);if(c)return r.Zs(c)}}else if(a.key===r.Qs){const c=function(h){let g=Fi.T;if(null!=h)try{const v=JSON.parse(h);Je("number"==typeof v),g=v}catch(v){In("SharedClientState","Failed to read sequence number from WebStorage",v)}return g}(a.newValue);c!==Fi.T&&r.sequenceNumberHandler(c)}else if(a.key===r.Js)return r.syncEngine.wi()}else r.Ks.push(a)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(n,r,a){const c=new Hm(this.currentUser,n,r,a),h=Hb(this.persistenceKey,this.currentUser,n);this.setItem(h,c.Os())}ni(n){const r=Hb(this.persistenceKey,this.currentUser,n);this.removeItem(r)}ri(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}ii(n,r,a){const c=oE(this.persistenceKey,n),h=new Gm(n,r,a);this.setItem(c,h.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(n){const r=this.Ws.exec(n);return r?r[1]:null}ui(n,r){const a=this.ai(n);return qm.$s(a,r)}hi(n,r){const a=this.Gs.exec(n),c=Number(a[1]);return Hm.$s(new nr(void 0!==a[2]?a[2]:null),c,r)}fi(n,r){const a=this.zs.exec(n),c=Number(a[1]);return Gm.$s(c,r)}Xs(n){return Ic.$s(n)}li(n){var r=this;return(0,ae.Z)(function*(){if(n.user.uid===r.currentUser.uid)return r.syncEngine._i(n.batchId,n.state,n.error);we("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}di(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}ci(n,r){const a=r?this.qs.insert(n,r):this.qs.remove(n),c=this.ti(this.qs),h=this.ti(a),g=[],v=[];return h.forEach(I=>{c.has(I)||g.push(I)}),c.forEach(I=>{h.has(I)||v.push(I)}),this.syncEngine.gi(g,v).then(()=>{this.qs=a})}Zs(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}ti(n){let r=Nf();return n.forEach((a,c)=>{r=r.unionWith(c.activeTargetIds)}),r}}class Gb{constructor(){this.yi=new aE,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,r,a){}addLocalQueryTarget(n){return this.yi.Fs(n),this.pi[n]||"not-current"}updateQueryState(n,r,a){this.pi[n]=r}removeLocalQueryTarget(n){this.yi.Ms(n)}isLocalQueryTarget(n){return this.yi.activeTargetIds.has(n)}clearQueryState(n){delete this.pi[n]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(n){return this.yi.activeTargetIds.has(n)}start(){return this.yi=new aE,Promise.resolve()}handleUserChange(n,r,a){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(){}}class Wm{Ei(n){}shutdown(){}}class Ka{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(n){this.bi.push(n)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.bi)n(0)}Ri(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.bi)n(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const qb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class DS{constructor(n){this.vi=n.vi,this.Vi=n.Vi}Si(n){this.Di=n}Ci(n){this.Ni=n}onMessage(n){this.xi=n}close(){this.Vi()}send(n){this.vi(n)}ki(){this.Di()}$i(n){this.Ni(n)}Oi(n){this.xi(n)}}class ex extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.Fi=(n.ssl?"https":"http")+"://"+n.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(n,r,a,c){const h=this.Bi(n,r);we("RestConnection","Sending: ",h,a);const g={};return this.Ui(g,c),this.qi(n,h,g,a).then(v=>(we("RestConnection","Received: ",v),v),v=>{throw gm("RestConnection",`${n} failed with error: `,v,"url: ",h,"request:",a),v})}Ki(n,r,a,c){return this.Li(n,r,a,c)}Ui(n,r){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+lc,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(const a in r.authHeaders)r.authHeaders.hasOwnProperty(a)&&(n[a]=r.authHeaders[a])}Bi(n,r){return`${this.Fi}/v1/${r}:${qb[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}qi(n,r,a,c){return new Promise((h,g)=>{const v=new CI;v.listenOnce(UT.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case vv.NO_ERROR:const C=v.getResponseJson();we("Connection","XHR received:",JSON.stringify(C)),h(C);break;case vv.TIMEOUT:we("Connection",'RPC "'+n+'" timed out'),g(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case vv.HTTP_ERROR:const T=v.getStatus();if(we("Connection",'RPC "'+n+'" failed with status:',T,"response text:",v.getResponseText()),T>0){const A=v.getResponseJson().error;if(A&&A.status&&A.message){const O=function(M){const z=M.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(z)>=0?z:ne.UNKNOWN}(A.status);g(new me(O,A.message))}else g(new me(ne.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new me(ne.UNAVAILABLE,"Connection failed."));break;default:Ve()}}finally{we("Connection",'RPC "'+n+'" completed.')}});const I=JSON.stringify(c);v.send(r,"POST",I,a,15)})}ji(n,r){const a=[this.Fi,"/","google.firestore.v1.Firestore","/",n,"/channel"],c=FT(),h=LT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new HR({})),this.Ui(g.initMessageHeaders,r),(0,at.uI)()||(0,at.b$)()||(0,at.d)()||(0,at.w1)()||(0,at.Mn)()||(0,at.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const v=a.join("");we("Connection","Creating WebChannel: "+v,g);const I=c.createWebChannel(v,g);let C=!1,T=!1;const A=new DS({vi:M=>{T?we("Connection","Not sending because WebChannel is closed:",M):(C||(we("Connection","Opening WebChannel transport."),I.open(),C=!0),we("Connection","WebChannel sending:",M),I.send(M))},Vi:()=>I.close()}),O=(M,z,ye)=>{M.listen(z,De=>{try{ye(De)}catch(qe){setTimeout(()=>{throw qe},0)}})};return O(I,pm.EventType.OPEN,()=>{T||we("Connection","WebChannel transport opened.")}),O(I,pm.EventType.CLOSE,()=>{T||(T=!0,we("Connection","WebChannel transport closed"),A.$i())}),O(I,pm.EventType.ERROR,M=>{T||(T=!0,gm("Connection","WebChannel transport errored:",M),A.$i(new me(ne.UNAVAILABLE,"The operation could not be completed")))}),O(I,pm.EventType.MESSAGE,M=>{var z;if(!T){const ye=M.data[0];Je(!!ye);const De=ye,qe=De.error||(null===(z=De[0])||void 0===z?void 0:z.error);if(qe){we("Connection","WebChannel received error:",qe);const Ze=qe.status;let Be=function(Xt){const Di=xn[Xt];if(void 0!==Di)return eb(Di)}(Ze),Ye=qe.message;void 0===Be&&(Be=ne.INTERNAL,Ye="Unknown error status: "+Ze+" with message "+qe.message),T=!0,A.$i(new me(Be,Ye)),I.close()}else we("Connection","WebChannel received:",ye),A.Oi(ye)}}),O(h,bI.STAT_EVENT,M=>{M.stat===DI.PROXY?we("Connection","Detected buffering proxy"):M.stat===DI.NOPROXY&&we("Connection","Detected no buffering proxy")}),setTimeout(()=>{A.ki()},0),A}}function Wb(){return"undefined"!=typeof window?window:null}function bc(){return"undefined"!=typeof document?document:null}function $f(i){return new YR(i,!0)}class cE{constructor(n,r,a=1e3,c=1.5,h=6e4){this.Oe=n,this.timerId=r,this.Qi=a,this.Wi=c,this.Gi=h,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(n){this.cancel();const r=Math.floor(this.zi+this.Zi()),a=Math.max(0,Date.now()-this.Ji),c=Math.max(0,r-a);c>0&&we("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.zi} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,c,()=>(this.Ji=Date.now(),n())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class lE{constructor(n,r,a,c,h,g){this.Oe=n,this.er=a,this.nr=c,this.credentialsProvider=h,this.listener=g,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new cE(n,r)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var n=this;return(0,ae.Z)(function*(){n.ar()&&(yield n.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(n){this._r(),this.stream.send(n)}dr(){var n=this;return(0,ae.Z)(function*(){if(n.cr())return n.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(n,r){var a=this;return(0,ae.Z)(function*(){a._r(),a.rr.cancel(),a.sr++,3!==n?a.rr.reset():r&&r.code===ne.RESOURCE_EXHAUSTED?(In(r.toString()),In("Using maximum backoff delay to prevent overloading the backend."),a.rr.Yi()):r&&r.code===ne.UNAUTHENTICATED&&a.credentialsProvider.invalidateToken(),null!==a.stream&&(a.mr(),a.stream.close(),a.stream=null),a.state=n,yield a.listener.Ci(r)})()}mr(){}auth(){this.state=1;const n=this.gr(this.sr),r=this.sr;this.credentialsProvider.getToken().then(a=>{this.sr===r&&this.yr(a)},a=>{n(()=>{const c=new me(ne.UNKNOWN,"Fetching auth token failed: "+a.message);return this.pr(c)})})}yr(n){const r=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(()=>{r(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(a=>{r(()=>this.pr(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}ur(){var n=this;this.state=4,this.rr.Xi((0,ae.Z)(function*(){n.state=0,n.start()}))}pr(n){return we("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(3,n)}gr(n){return r=>{this.Oe.enqueueAndForget(()=>this.sr===n?r():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zb extends lE{constructor(n,r,a,c,h){super(n,"listen_stream_connection_backoff","listen_stream_idle",r,a,h),this.N=c}Er(n){return this.nr.ji("Listen",n)}onMessage(n){this.rr.reset();const r=function(i,n){let r;if("targetChange"in n){const a="NO_CHANGE"===(I=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===I?1:"REMOVE"===I?2:"CURRENT"===I?3:"RESET"===I?4:Ve(),c=n.targetChange.targetIds||[],h=function(I,C){return I.D?(Je(void 0===C||"string"==typeof C),Mn.fromBase64String(C||"")):(Je(void 0===C||C instanceof Uint8Array),Mn.fromUint8Array(C||new Uint8Array))}(i,n.targetChange.resumeToken),g=n.targetChange.cause,v=g&&function(I){const C=void 0===I.code?ne.UNKNOWN:eb(I.code);return new me(C,I.message||"")}(g);r=new Uv(a,c,h,v||null)}else if("documentChange"in n){const a=n.documentChange,c=zs(i,a.document.name),h=Ln(a.document.updateTime),g=new gr({mapValue:{fields:a.document.fields}}),v=Jt.newFoundDocument(c,h,g);r=new Pf(a.targetIds||[],a.removedTargetIds||[],v.key,v)}else if("documentDelete"in n){const a=n.documentDelete,c=zs(i,a.document),h=a.readTime?Ln(a.readTime):it.min(),g=Jt.newNoDocument(c,h);r=new Pf([],a.removedTargetIds||[],g.key,g)}else if("documentRemove"in n){const a=n.documentRemove,c=zs(i,a.document);r=new Pf([],a.removedTargetIds||[],c,null)}else{if(!("filter"in n))return Ve();{const a=n.filter,h=new KT(a.count||0);r=new Lv(a.targetId,h)}}var I;return r}(this.N,n),a=function(c){if(!("targetChange"in c))return it.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?it.min():h.readTime?Ln(h.readTime):it.min()}(n);return this.listener.Tr(r,a)}Ir(n){const r={};r.database=kf(this.N),r.addTarget=function(c,h){let g;const v=h.target;return g=Df(v)?{documents:Bv(c,v)}:{query:jv(c,v)},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0?g.resumeToken=XT(c,h.resumeToken):h.snapshotVersion.compareTo(it.min())>0&&(g.readTime=_c(c,h.snapshotVersion.toTimestamp())),g}(this.N,n);const a=function(i,n){const r=function(a,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ve()}}(0,n.purpose);return null==r?null:{"goog-listen-tags":r}}(0,n);a&&(r.labels=a),this.wr(r)}Ar(n){const r={};r.database=kf(this.N),r.removeTarget=n,this.wr(r)}}class dE extends lE{constructor(n,r,a,c,h){super(n,"write_stream_connection_backoff","write_stream_idle",r,a,h),this.N=c,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(n){return this.nr.ji("Write",n)}onMessage(n){if(Je(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Rr){this.rr.reset();const r=function(i,n){return i&&i.length>0?(Je(void 0!==n),i.map(r=>function(a,c){let h=Ln(a.updateTime?a.updateTime:c);return h.isEqual(it.min())&&(h=Ln(c)),new Tm(h,a.transformResults||[])}(r,n))):[]}(n.writeResults,n.commitTime),a=Ln(n.commitTime);return this.listener.vr(a,r)}return Je(!n.writeResults||0===n.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const n={};n.database=kf(this.N),this.wr(n)}Pr(n){const r={streamToken:this.lastStreamToken,writes:n.map(a=>Ed(this.N,a))};this.wr(r)}}class Kb extends class{}{constructor(n,r,a){super(),this.credentials=n,this.nr=r,this.N=a,this.Dr=!1}Cr(){if(this.Dr)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Li(n,r,a){return this.Cr(),this.credentials.getToken().then(c=>this.nr.Li(n,r,a,c)).catch(c=>{throw"FirebaseError"===c.name?(c.code===ne.UNAUTHENTICATED&&this.credentials.invalidateToken(),c):new me(ne.UNKNOWN,c.toString())})}Ki(n,r,a){return this.Cr(),this.credentials.getToken().then(c=>this.nr.Ki(n,r,a,c)).catch(c=>{throw"FirebaseError"===c.name?(c.code===ne.UNAUTHENTICATED&&this.credentials.invalidateToken(),c):new me(ne.UNKNOWN,c.toString())})}terminate(){this.Dr=!0}}class Zb{constructor(n,r){this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.Fr("Offline")))}set(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}Fr(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}Mr(n){const r=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(In(r),this.$r=!1):we("OnlineStateTracker",r)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class CS{constructor(n,r,a,c,h){var g=this;this.localStore=n,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=h,this.Qr.Ei(v=>{a.enqueueAndForget((0,ae.Z)(function*(){var I;wi(g)&&(we("RemoteStore","Restarting streams for network reachability change."),yield(I=(0,ae.Z)(function*(C){const T=Te(C);T.Kr.add(4),yield Fd(T),T.Wr.set("Unknown"),T.Kr.delete(4),yield Hf(T)}),function(C){return I.apply(this,arguments)})(g))}))}),this.Wr=new Zb(a,c)}}function Hf(i){return zm.apply(this,arguments)}function zm(){return(zm=(0,ae.Z)(function*(i){if(wi(i))for(const n of i.jr)yield n(!0)})).apply(this,arguments)}function Fd(i){return Km.apply(this,arguments)}function Km(){return(Km=(0,ae.Z)(function*(i){for(const n of i.jr)yield n(!1)})).apply(this,arguments)}function Dc(i,n){const r=Te(i);r.qr.has(n.targetId)||(r.qr.set(n.targetId,n),Ks(r)?It(r):Zs(r).cr()&&Yb(r,n))}function Za(i,n){const r=Te(i),a=Zs(r);r.qr.delete(n),a.cr()&&Ld(r,n),0===r.qr.size&&(a.cr()?a.lr():wi(r)&&r.Wr.set("Unknown"))}function Yb(i,n){i.Gr.Y(n.targetId),Zs(i).Ir(n)}function Ld(i,n){i.Gr.Y(n),Zs(i).Ar(n)}function It(i){i.Gr=new sb({getRemoteKeysForTarget:n=>i.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>i.qr.get(n)||null}),Zs(i).start(),i.Wr.Or()}function Ks(i){return wi(i)&&!Zs(i).ar()&&i.qr.size>0}function wi(i){return 0===Te(i).Kr.size}function Ud(i){i.Gr=void 0}function tx(i){return et.apply(this,arguments)}function et(){return(et=(0,ae.Z)(function*(i){i.qr.forEach((n,r)=>{Yb(i,n)})})).apply(this,arguments)}function Gi(i,n){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,ae.Z)(function*(i,n){Ud(i),Ks(i)?(i.Wr.Lr(n),It(i)):i.Wr.set("Unknown")})).apply(this,arguments)}function Cc(i,n,r){return Qb.apply(this,arguments)}function Qb(){return(Qb=(0,ae.Z)(function*(i,n,r){if(i.Wr.set("Online"),n instanceof Uv&&2===n.state&&n.cause)try{yield(a=(0,ae.Z)(function*(c,h){const g=h.cause;for(const v of h.targetIds)c.qr.has(v)&&(yield c.remoteSyncer.rejectListen(v,g),c.qr.delete(v),c.Gr.removeTarget(v))}),function(c,h){return a.apply(this,arguments)})(i,n)}catch(a){we("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),a),yield qf(i,a)}else if(n instanceof Pf?i.Gr.rt(n):n instanceof Lv?i.Gr.ft(n):i.Gr.ct(n),!r.isEqual(it.min()))try{const a=yield nE(i.localStore);r.compareTo(a)>=0&&(yield function(c,h){const g=c.Gr._t(h);return g.targetChanges.forEach((v,I)=>{if(v.resumeToken.approximateByteSize()>0){const C=c.qr.get(I);C&&c.qr.set(I,C.withResumeToken(v.resumeToken,h))}}),g.targetMismatches.forEach(v=>{const I=c.qr.get(v);if(!I)return;c.qr.set(v,I.withResumeToken(Mn.EMPTY_BYTE_STRING,I.snapshotVersion)),Ld(c,v);const C=new $a(I.target,v,1,I.sequenceNumber);Yb(c,C)}),c.remoteSyncer.applyRemoteEvent(g)}(i,r))}catch(a){we("RemoteStore","Failed to raise snapshot:",a),yield qf(i,a)}var a})).apply(this,arguments)}function qf(i,n,r){return Zm.apply(this,arguments)}function Zm(){return(Zm=(0,ae.Z)(function*(i,n,r){if(!vc(n))throw n;i.Kr.add(1),yield Fd(i),i.Wr.set("Offline"),r||(r=()=>nE(i.localStore)),i.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){we("RemoteStore","Retrying IndexedDB access"),yield r(),i.Kr.delete(1),yield Hf(i)}))})).apply(this,arguments)}function TS(i,n){return n().catch(r=>qf(i,r,n))}function Vd(i){return hE.apply(this,arguments)}function hE(){return(hE=(0,ae.Z)(function*(i){const n=Te(i),r=Ys(n);let a=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;for(;qi(n);)try{const c=yield yS(n.localStore,a);if(null===c){0===n.Ur.length&&r.lr();break}a=c.batchId,dn(n,c)}catch(c){yield qf(n,c)}Wi(n)&&fE(n)})).apply(this,arguments)}function qi(i){return wi(i)&&i.Ur.length<10}function dn(i,n){i.Ur.push(n);const r=Ys(i);r.cr()&&r.br&&r.Pr(n.mutations)}function Wi(i){return wi(i)&&!Ys(i).ar()&&i.Ur.length>0}function fE(i){Ys(i).start()}function SS(i){return Ym.apply(this,arguments)}function Ym(){return(Ym=(0,ae.Z)(function*(i){Ys(i).Sr()})).apply(this,arguments)}function pE(i){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,ae.Z)(function*(i){const n=Ys(i);for(const r of i.Ur)n.Pr(r.mutations)})).apply(this,arguments)}function Wf(i,n,r){return gE.apply(this,arguments)}function gE(){return(gE=(0,ae.Z)(function*(i,n,r){const a=i.Ur.shift(),c=Nm.from(a,n,r);yield TS(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),yield Vd(i)})).apply(this,arguments)}function Tc(i,n){return mE.apply(this,arguments)}function mE(){return(mE=(0,ae.Z)(function*(i,n){var r;n&&Ys(i).br&&(yield(r=(0,ae.Z)(function*(a,c){if(XI(h=c.code)&&h!==ne.ABORTED){const g=a.Ur.shift();Ys(a).hr(),yield TS(a,()=>a.remoteSyncer.rejectFailedWrite(g.batchId,c)),yield Vd(a)}var h}),function(a,c){return r.apply(this,arguments)})(i,n)),Wi(i)&&fE(i)})).apply(this,arguments)}function Qm(i,n){return zf.apply(this,arguments)}function zf(){return(zf=(0,ae.Z)(function*(i,n){const r=Te(i);n?(r.Kr.delete(2),yield Hf(r)):n||(r.Kr.add(2),yield Fd(r),r.Wr.set("Unknown"))})).apply(this,arguments)}function Zs(i){return i.zr||(i.zr=function(n,r,a){const c=Te(n);return c.Cr(),new zb(r,c.nr,c.credentials,c.N,a)}(i.datastore,i.asyncQueue,{Si:tx.bind(null,i),Ci:Gi.bind(null,i),Tr:Cc.bind(null,i)}),i.jr.push(function(){var n=(0,ae.Z)(function*(r){r?(i.zr.hr(),Ks(i)?It(i):i.Wr.set("Unknown")):(yield i.zr.stop(),Ud(i))});return function(r){return n.apply(this,arguments)}}())),i.zr}function Ys(i){return i.Hr||(i.Hr=function(n,r,a){const c=Te(n);return c.Cr(),new dE(r,c.nr,c.credentials,c.N,a)}(i.datastore,i.asyncQueue,{Si:SS.bind(null,i),Ci:Tc.bind(null,i),Vr:pE.bind(null,i),vr:Wf.bind(null,i)}),i.jr.push(function(){var n=(0,ae.Z)(function*(r){r?(i.Hr.hr(),yield Vd(i)):(yield i.Hr.stop(),i.Ur.length>0&&(we("RemoteStore",`Stopping write stream with ${i.Ur.length} pending writes`),i.Ur=[]))});return function(r){return n.apply(this,arguments)}}())),i.Hr}class Jm{constructor(n,r,a,c,h){this.asyncQueue=n,this.timerId=r,this.targetTimeMs=a,this.op=c,this.removalCallback=h,this.deferred=new Sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(n,r,a,c,h){const g=Date.now()+a,v=new Jm(n,r,g,c,h);return v.start(a),v}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Es(i,n){if(In("AsyncQueue",`${n}: ${i}`),vc(i))return new me(ne.UNAVAILABLE,`${n}: ${i}`);throw i}class Bd{constructor(n){this.comparator=n?(r,a)=>n(r,a)||Ue.comparator(r.key,a.key):(r,a)=>Ue.comparator(r.key,a.key),this.keyedMap=Fv(),this.sortedSet=new Fn(this.comparator)}static emptySet(n){return new Bd(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const r=this.keyedMap.get(n);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((r,a)=>(n(r),!1))}add(n){const r=this.delete(n.key);return r.copy(r.keyedMap.insert(n.key,n),r.sortedSet.insert(n,null))}delete(n){const r=this.get(n);return r?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(r)):this}isEqual(n){if(!(n instanceof Bd)||this.size!==n.size)return!1;const r=this.sortedSet.getIterator(),a=n.sortedSet.getIterator();for(;r.hasNext();){const c=r.getNext().key,h=a.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const n=[];return this.forEach(r=>{n.push(r.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,r){const a=new Bd;return a.comparator=this.comparator,a.keyedMap=n,a.sortedSet=r,a}}class Kf{constructor(){this.Jr=new Fn(Ue.comparator)}track(n){const r=n.doc.key,a=this.Jr.get(r);a?0!==n.type&&3===a.type?this.Jr=this.Jr.insert(r,n):3===n.type&&1!==a.type?this.Jr=this.Jr.insert(r,{type:a.type,doc:n.doc}):2===n.type&&2===a.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):2===n.type&&0===a.type?this.Jr=this.Jr.insert(r,{type:0,doc:n.doc}):1===n.type&&0===a.type?this.Jr=this.Jr.remove(r):1===n.type&&2===a.type?this.Jr=this.Jr.insert(r,{type:1,doc:a.doc}):0===n.type&&1===a.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):Ve():this.Jr=this.Jr.insert(r,n)}Yr(){const n=[];return this.Jr.inorderTraversal((r,a)=>{n.push(a)}),n}}class Sc{constructor(n,r,a,c,h,g,v,I){this.query=n,this.docs=r,this.oldDocs=a,this.docChanges=c,this.mutatedKeys=h,this.fromCache=g,this.syncStateChanged=v,this.excludesMetadataChanges=I}static fromInitialDocuments(n,r,a,c){const h=[];return r.forEach(g=>{h.push({type:0,doc:g})}),new Sc(n,r,Bd.emptySet(r),h,a,c,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&ld(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const r=this.docChanges,a=n.docChanges;if(r.length!==a.length)return!1;for(let c=0;c<r.length;c++)if(r[c].type!==a[c].type||!r[c].doc.isEqual(a[c].doc))return!1;return!0}}class Jb{constructor(){this.Xr=void 0,this.listeners=[]}}class Xb{constructor(){this.queries=new xd(n=>WT(n),ld),this.onlineState="Unknown",this.Zr=new Set}}function jd(i,n){return yE.apply(this,arguments)}function yE(){return(yE=(0,ae.Z)(function*(i,n){const r=Te(i),a=n.query;let c=!1,h=r.queries.get(a);if(h||(c=!0,h=new Jb),c)try{h.Xr=yield r.onListen(a)}catch(g){const v=Es(g,`Initialization of query '${Cm(n.query)}' failed`);return void n.onError(v)}r.queries.set(a,h),h.listeners.push(n),n.eo(r.onlineState),h.Xr&&n.no(h.Xr)&&Xe(r)})).apply(this,arguments)}function Zf(i,n){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,ae.Z)(function*(i,n){const r=Te(i),a=n.query;let c=!1;const h=r.queries.get(a);if(h){const g=h.listeners.indexOf(n);g>=0&&(h.listeners.splice(g,1),c=0===h.listeners.length)}if(c)return r.queries.delete(a),r.onUnlisten(a)})).apply(this,arguments)}function nx(i,n){const r=Te(i);let a=!1;for(const c of n){const g=r.queries.get(c.query);if(g){for(const v of g.listeners)v.no(c)&&(a=!0);g.Xr=c}}a&&Xe(r)}function rx(i,n,r){const a=Te(i),c=a.queries.get(n);if(c)for(const h of c.listeners)h.onError(r);a.queries.delete(n)}function Xe(i){i.Zr.forEach(n=>{n.next()})}class eD{constructor(n,r,a){this.query=n,this.so=r,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=a||{}}no(n){if(!this.options.includeMetadataChanges){const a=[];for(const c of n.docChanges)3!==c.type&&a.push(c);n=new Sc(n.query,n.docs,n.oldDocs,a,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}let r=!1;return this.io?this.oo(n)&&(this.so.next(n),r=!0):this.ao(n,this.onlineState)&&(this.co(n),r=!0),this.ro=n,r}onError(n){this.so.error(n)}eo(n){this.onlineState=n;let r=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),r=!0),r}ao(n,r){return!n.fromCache||!(this.options.uo&&"Offline"!==r||n.docs.isEmpty()&&"Offline"!==r)}oo(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(n){n=Sc.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}class Qf{constructor(n,r){this.payload=n,this.byteLength=r}ho(){return"metadata"in this.payload}}class tD{constructor(n){this.N=n}zn(n){return zs(this.N,n)}Hn(n){return n.metadata.exists?ln(this.N,n.document,!1):Jt.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}Jn(n){return Ln(n)}}class AS{constructor(n,r,a){this.lo=n,this.localStore=r,this.N=a,this.queries=[],this.documents=[],this.progress=nD(n)}fo(n){this.progress.bytesLoaded+=n.byteLength;let r=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++r):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}wo(n){const r=new Map,a=new tD(this.N);for(const c of n)if(c.metadata.queries){const h=a.zn(c.metadata.name);for(const g of c.metadata.queries){const v=(r.get(g)||St()).add(h);r.set(g,v)}}return r}complete(){var n=this;return(0,ae.Z)(function*(){const r=yield function(i,n,r,a){return iE.apply(this,arguments)}(n.localStore,new tD(n.N),n.documents,n.lo.id),a=n.wo(n.documents);for(const c of n.queries)yield jb(n.localStore,c,a.get(c.name));return n.progress.taskState="Success",new fS(Object.assign({},n.progress),r)})()}}function nD(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class RS{constructor(n){this.key=n}}class xS{constructor(n){this.key=n}}class rD{constructor(n,r){this.query=n,this._o=r,this.mo=null,this.current=!1,this.yo=St(),this.mutatedKeys=St(),this.po=ys(n),this.Eo=new Bd(this.po)}get To(){return this._o}Io(n,r){const a=r?r.Ao:new Kf,c=r?r.Eo:this.Eo;let h=r?r.mutatedKeys:this.mutatedKeys,g=c,v=!1;const I=bm(this.query)&&c.size===this.query.limit?c.last():null,C=Tf(this.query)&&c.size===this.query.limit?c.first():null;if(n.inorderTraversal((T,A)=>{const O=c.get(T),M=dd(this.query,A)?A:null,z=!!O&&this.mutatedKeys.has(O.key),ye=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let De=!1;O&&M?O.data.isEqual(M.data)?z!==ye&&(a.track({type:3,doc:M}),De=!0):this.Ro(O,M)||(a.track({type:2,doc:M}),De=!0,(I&&this.po(M,I)>0||C&&this.po(M,C)<0)&&(v=!0)):!O&&M?(a.track({type:0,doc:M}),De=!0):O&&!M&&(a.track({type:1,doc:O}),De=!0,(I||C)&&(v=!0)),De&&(M?(g=g.add(M),h=ye?h.add(T):h.delete(T)):(g=g.delete(T),h=h.delete(T)))}),bm(this.query)||Tf(this.query))for(;g.size>this.query.limit;){const T=bm(this.query)?g.last():g.first();g=g.delete(T.key),h=h.delete(T.key),a.track({type:1,doc:T})}return{Eo:g,Ao:a,Ln:v,mutatedKeys:h}}Ro(n,r){return n.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(n,r,a){const c=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;const h=n.Ao.Yr();h.sort((C,T)=>function(A,O){const M=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve()}};return M(A)-M(O)}(C.type,T.type)||this.po(C.doc,T.doc)),this.bo(a);const g=r?this.Po():[],v=0===this.yo.size&&this.current?1:0,I=v!==this.mo;return this.mo=v,0!==h.length||I?{snapshot:new Sc(this.query,n.Eo,c,h,n.mutatedKeys,0===v,I,!1),vo:g}:{vo:g}}eo(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Kf,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}bo(n){n&&(n.addedDocuments.forEach(r=>this._o=this._o.add(r)),n.modifiedDocuments.forEach(r=>{}),n.removedDocuments.forEach(r=>this._o=this._o.delete(r)),this.current=n.current)}Po(){if(!this.current)return[];const n=this.yo;this.yo=St(),this.Eo.forEach(a=>{this.Vo(a.key)&&(this.yo=this.yo.add(a.key))});const r=[];return n.forEach(a=>{this.yo.has(a)||r.push(new xS(a))}),this.yo.forEach(a=>{n.has(a)||r.push(new RS(a))}),r}So(n){this._o=n.Gn,this.yo=St();const r=this.Io(n.documents);return this.applyChanges(r,!0)}Do(){return Sc.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class _r{constructor(n,r,a){this.query=n,this.targetId=r,this.view=a}}class NS{constructor(n){this.key=n,this.Co=!1}}class PS{constructor(n,r,a,c,h,g){this.localStore=n,this.remoteStore=r,this.eventManager=a,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=g,this.No={},this.xo=new xd(v=>WT(v),ld),this.ko=new Map,this.$o=new Set,this.Oo=new Fn(Ue.comparator),this.Fo=new Map,this.Mo=new wc,this.Lo={},this.Bo=new Map,this.Uo=$o.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function _E(i,n){return vE.apply(this,arguments)}function vE(){return(vE=(0,ae.Z)(function*(i,n){const r=FE(i);let a,c;const h=r.xo.get(n);if(h)a=h.targetId,r.sharedClientState.addLocalQueryTarget(a),c=h.view.Do();else{const g=yield Od(r.localStore,vi(n)),v=r.sharedClientState.addLocalQueryTarget(g.targetId);a=g.targetId,c=yield EE(r,n,a,"current"===v),r.isPrimaryClient&&Dc(r.remoteStore,g)}return c})).apply(this,arguments)}function EE(i,n,r,a){return wE.apply(this,arguments)}function wE(){return(wE=(0,ae.Z)(function*(i,n,r,a){i.Ko=(T,A,O)=>{return(M=(0,ae.Z)(function*(z,ye,De,qe){let Ze=ye.view.Io(De);Ze.Ln&&(Ze=yield jf(z.localStore,ye.query,!1).then(({documents:Xt})=>ye.view.Io(Xt,Ze)));const Be=qe&&qe.targetChanges.get(ye.targetId),Ye=ye.view.applyChanges(Ze,z.isPrimaryClient,Be);return Xm(z,ye.targetId,Ye.vo),Ye.snapshot}),function(z,ye,De,qe){return M.apply(this,arguments)})(i,T,A,O);var M};const c=yield jf(i.localStore,n,!0),h=new rD(n,c.Gn),g=h.Io(c.documents),v=_d.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==i.onlineState),I=h.applyChanges(g,i.isPrimaryClient,v);Xm(i,r,I.vo);const C=new _r(n,r,h);return i.xo.set(n,C),i.ko.has(r)?i.ko.get(r).push(n):i.ko.set(r,[n]),I.snapshot})).apply(this,arguments)}function OS(i,n){return IE.apply(this,arguments)}function IE(){return(IE=(0,ae.Z)(function*(i,n){const r=Te(i),a=r.xo.get(n),c=r.ko.get(a.targetId);if(c.length>1)return r.ko.set(a.targetId,c.filter(h=>!ld(h,n))),void r.xo.delete(n);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Md(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),Za(r.remoteStore,a.targetId),$d(r,a.targetId)}).catch(Ho))):($d(r,a.targetId),yield Md(r.localStore,a.targetId,!0))})).apply(this,arguments)}function Jf(){return(Jf=(0,ae.Z)(function*(i,n,r){const a=Qa(i);try{const c=yield function(h,g){const v=Te(h),I=On.now(),C=g.reduce((A,O)=>A.add(O.key),St());let T;return v.persistence.runTransaction("Locally write mutations","readwrite",A=>v.Qn.Pn(A,C).next(O=>{T=O;const M=[];for(const z of g){const ye=JI(z,T.get(z.key));null!=ye&&M.push(new Lo(z.key,ye,Dv(ye.value.mapValue),Rn.exists(!0)))}return v.In.addMutationBatch(A,I,M,g)})).then(A=>(A.applyToLocalDocumentSet(T),{batchId:A.batchId,changes:T}))}(a.localStore,n);a.sharedClientState.addPendingMutation(c.batchId),function(h,g,v){let I=h.Lo[h.currentUser.toKey()];I||(I=new Fn(mt)),I=I.insert(g,v),h.Lo[h.currentUser.toKey()]=I}(a,c.batchId,r),yield Qs(a,c.changes),yield Vd(a.remoteStore)}catch(c){const h=Es(c,"Failed to persist write");r.reject(h)}})).apply(this,arguments)}function iD(i,n){return bE.apply(this,arguments)}function bE(){return(bE=(0,ae.Z)(function*(i,n){const r=Te(i);try{const a=yield gS(r.localStore,n);n.targetChanges.forEach((c,h)=>{const g=r.Fo.get(h);g&&(Je(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?g.Co=!0:c.modifiedDocuments.size>0?Je(g.Co):c.removedDocuments.size>0&&(Je(g.Co),g.Co=!1))}),yield Qs(r,a,n)}catch(a){yield Ho(a)}})).apply(this,arguments)}function DE(i,n,r){const a=Te(i);if(a.isPrimaryClient&&0===r||!a.isPrimaryClient&&1===r){const c=[];a.xo.forEach((h,g)=>{const v=g.view.eo(n);v.snapshot&&c.push(v.snapshot)}),function(h,g){const v=Te(h);v.onlineState=g;let I=!1;v.queries.forEach((C,T)=>{for(const A of T.listeners)A.eo(g)&&(I=!0)}),I&&Xe(v)}(a.eventManager,n),c.length&&a.No.Tr(c),a.onlineState=n,a.isPrimaryClient&&a.sharedClientState.setOnlineState(n)}}function CE(i,n,r){return TE.apply(this,arguments)}function TE(){return(TE=(0,ae.Z)(function*(i,n,r){const a=Te(i);a.sharedClientState.updateQueryState(n,"rejected",r);const c=a.Fo.get(n),h=c&&c.key;if(h){let g=new Fn(Ue.comparator);g=g.insert(h,Jt.newNoDocument(h,it.min()));const v=St().add(h),I=new yd(it.min(),new Map,new gn(mt),g,v);yield iD(a,I),a.Oo=a.Oo.remove(h),a.Fo.delete(n),oD(a)}else yield Md(a.localStore,n,!1).then(()=>$d(a,n,r)).catch(Ho)})).apply(this,arguments)}function ix(i,n){return SE.apply(this,arguments)}function SE(){return(SE=(0,ae.Z)(function*(i,n){const r=Te(i),a=n.batch.batchId;try{const c=yield tE(r.localStore,n);Ac(r,a,null),xE(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),yield Qs(r,c)}catch(c){yield Ho(c)}})).apply(this,arguments)}function kS(i,n,r){return AE.apply(this,arguments)}function AE(){return(AE=(0,ae.Z)(function*(i,n,r){const a=Te(i);try{const c=yield function(h,g){const v=Te(h);return v.persistence.runTransaction("Reject batch","readwrite-primary",I=>{let C;return v.In.lookupMutationBatch(I,g).next(T=>(Je(null!==T),C=T.keys(),v.In.removeMutationBatch(I,T))).next(()=>v.In.performConsistencyCheck(I)).next(()=>v.Qn.Pn(I,C))})}(a.localStore,n);Ac(a,n,r),xE(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),yield Qs(a,c)}catch(c){yield Ho(c)}})).apply(this,arguments)}function RE(){return(RE=(0,ae.Z)(function*(i,n){const r=Te(i);wi(r.remoteStore)||we("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(h){const g=Te(h);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",v=>g.In.getHighestUnacknowledgedBatchId(v))}(r.localStore);if(-1===a)return void n.resolve();const c=r.Bo.get(a)||[];c.push(n),r.Bo.set(a,c)}catch(a){const c=Es(a,"Initialization of waitForPendingWrites() operation failed");n.reject(c)}})).apply(this,arguments)}function xE(i,n){(i.Bo.get(n)||[]).forEach(r=>{r.resolve()}),i.Bo.delete(n)}function Ac(i,n,r){const a=Te(i);let c=a.Lo[a.currentUser.toKey()];if(c){const h=c.get(n);h&&(r?h.reject(r):h.resolve(),c=c.remove(n)),a.Lo[a.currentUser.toKey()]=c}}function $d(i,n,r=null){i.sharedClientState.removeLocalQueryTarget(n);for(const a of i.ko.get(n))i.xo.delete(a),r&&i.No.jo(a,r);i.ko.delete(n),i.isPrimaryClient&&i.Mo.cs(n).forEach(a=>{i.Mo.containsKey(a)||sD(i,a)})}function sD(i,n){i.$o.delete(n.path.canonicalString());const r=i.Oo.get(n);null!==r&&(Za(i.remoteStore,r),i.Oo=i.Oo.remove(n),i.Fo.delete(r),oD(i))}function Xm(i,n,r){for(const a of r)a instanceof RS?(i.Mo.addReference(a.key,n),Xf(i,a)):a instanceof xS?(we("SyncEngine","Document no longer in limbo: "+a.key),i.Mo.removeReference(a.key,n),i.Mo.containsKey(a.key)||sD(i,a.key)):Ve()}function Xf(i,n){const r=n.key,a=r.path.canonicalString();i.Oo.get(r)||i.$o.has(a)||(we("SyncEngine","New document in limbo: "+r),i.$o.add(a),oD(i))}function oD(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){const n=i.$o.values().next().value;i.$o.delete(n);const r=new Ue(Ct.fromString(n)),a=i.Uo.next();i.Fo.set(a,new NS(r)),i.Oo=i.Oo.insert(r,a),Dc(i.remoteStore,new $a(vi(mc(r.path)),a,2,Fi.T))}}function Qs(i,n,r){return NE.apply(this,arguments)}function NE(){return(NE=(0,ae.Z)(function*(i,n,r){const a=Te(i),c=[],h=[],g=[];var v;a.xo.isEmpty()||(a.xo.forEach((v,I)=>{g.push(a.Ko(I,n,r).then(C=>{if(C){a.isPrimaryClient&&a.sharedClientState.updateQueryState(I.targetId,C.fromCache?"not-current":"current"),c.push(C);const T=Lb.kn(I.targetId,C);h.push(T)}}))}),yield Promise.all(g),a.No.Tr(c),yield(v=(0,ae.Z)(function*(I,C){const T=Te(I);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>pe.forEach(C,O=>pe.forEach(O.Nn,M=>T.persistence.referenceDelegate.addReference(A,O.targetId,M)).next(()=>pe.forEach(O.xn,M=>T.persistence.referenceDelegate.removeReference(A,O.targetId,M)))))}catch(A){if(!vc(A))throw A;we("LocalStore","Failed to update sequence numbers: "+A)}for(const A of C){const O=A.targetId;if(!A.fromCache){const M=T.Un.get(O),ye=M.withLastLimboFreeSnapshotVersion(M.snapshotVersion);T.Un=T.Un.insert(O,ye)}}}),function(I,C){return v.apply(this,arguments)})(a.localStore,h))})).apply(this,arguments)}function LS(i,n){return PE.apply(this,arguments)}function PE(){return(PE=(0,ae.Z)(function*(i,n){const r=Te(i);if(!r.currentUser.isEqual(n)){we("SyncEngine","User change. New user:",n.toKey());const a=yield Lm(r.localStore,n);r.currentUser=n,(c=r).Bo.forEach(g=>{g.forEach(v=>{v.reject(new me(ne.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Bo.clear(),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),yield Qs(r,a.Wn)}var c})).apply(this,arguments)}function US(i,n){const r=Te(i),a=r.Fo.get(n);if(a&&a.Co)return St().add(a.key);{let c=St();const h=r.ko.get(n);if(!h)return c;for(const g of h){const v=r.xo.get(g);c=c.unionWith(v.view.To)}return c}}function VS(i,n){return ey.apply(this,arguments)}function ey(){return(ey=(0,ae.Z)(function*(i,n){const r=Te(i),a=yield jf(r.localStore,n.query,!0),c=n.view.So(a);return r.isPrimaryClient&&Xm(r,n.targetId,c.vo),c})).apply(this,arguments)}function BS(i){return OE.apply(this,arguments)}function OE(){return(OE=(0,ae.Z)(function*(i){const n=Te(i);return Bb(n.localStore).then(r=>Qs(n,r))})).apply(this,arguments)}function sx(i,n,r,a){return aD.apply(this,arguments)}function aD(){return(aD=(0,ae.Z)(function*(i,n,r,a){const c=Te(i),h=yield function(g,v){const I=Te(g),C=Te(I.In);return I.persistence.runTransaction("Lookup mutation documents","readonly",T=>C.Xt(T,v).next(A=>A?I.Qn.Pn(T,A):pe.resolve(null)))}(c.localStore,n);var v;null!==h?("pending"===r?yield Vd(c.remoteStore):"acknowledged"===r||"rejected"===r?(Ac(c,n,a||null),xE(c,n),v=n,Te(Te(c.localStore).In).te(v)):Ve(),yield Qs(c,h)):we("SyncEngine","Cannot apply mutation batch with id: "+n)})).apply(this,arguments)}function ep(){return(ep=(0,ae.Z)(function*(i,n){const r=Te(i);if(FE(r),Qa(r),!0===n&&!0!==r.qo){const a=r.sharedClientState.getAllActiveQueryTargets(),c=yield uD(r,a.toArray());r.qo=!0,yield Qm(r.remoteStore,!0);for(const h of c)Dc(r.remoteStore,h)}else if(!1===n&&!1!==r.qo){const a=[];let c=Promise.resolve();r.ko.forEach((h,g)=>{r.sharedClientState.isLocalQueryTarget(g)?a.push(g):c=c.then(()=>($d(r,g),Md(r.localStore,g,!0))),Za(r.remoteStore,g)}),yield c,yield uD(r,a),function(h){const g=Te(h);g.Fo.forEach((v,I)=>{Za(g.remoteStore,I)}),g.Mo.us(),g.Fo=new Map,g.Oo=new Fn(Ue.comparator)}(r),r.qo=!1,yield Qm(r.remoteStore,!1)}})).apply(this,arguments)}function uD(i,n,r){return ME.apply(this,arguments)}function ME(){return(ME=(0,ae.Z)(function*(i,n,r){const a=Te(i),c=[],h=[];for(const g of n){let v;const I=a.ko.get(g);if(I&&0!==I.length){v=yield Od(a.localStore,vi(I[0]));for(const C of I){const T=a.xo.get(C),A=yield VS(a,T);A.snapshot&&h.push(A.snapshot)}}else{const C=yield rE(a.localStore,g);v=yield Od(a.localStore,C),yield EE(a,cD(C),g,!1)}c.push(v)}return a.No.Tr(h),c})).apply(this,arguments)}function cD(i){return $I(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function jS(i){const n=Te(i);return Te(Te(n.localStore).persistence).pn()}function $S(i,n,r,a){return kE.apply(this,arguments)}function kE(){return(kE=(0,ae.Z)(function*(i,n,r,a){const c=Te(i);if(c.qo)we("SyncEngine","Ignoring unexpected query state notification.");else if(c.ko.has(n))switch(r){case"current":case"not-current":{const h=yield Bb(c.localStore),g=yd.createSynthesizedRemoteEventForCurrentChange(n,"current"===r);yield Qs(c,h,g);break}case"rejected":yield Md(c.localStore,n,!0),$d(c,n,a);break;default:Ve()}})).apply(this,arguments)}function lD(i,n,r){return tp.apply(this,arguments)}function tp(){return(tp=(0,ae.Z)(function*(i,n,r){const a=FE(i);if(a.qo){for(const c of n){if(a.ko.has(c)){we("SyncEngine","Adding an already active target "+c);continue}const h=yield rE(a.localStore,c),g=yield Od(a.localStore,h);yield EE(a,cD(h),g.targetId,!1),Dc(a.remoteStore,g)}for(const c of r)a.ko.has(c)&&(yield Md(a.localStore,c,!1).then(()=>{Za(a.remoteStore,c),$d(a,c)}).catch(Ho))}})).apply(this,arguments)}function FE(i){const n=Te(i);return n.remoteStore.remoteSyncer.applyRemoteEvent=iD.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=US.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=CE.bind(null,n),n.No.Tr=nx.bind(null,n.eventManager),n.No.jo=rx.bind(null,n.eventManager),n}function Qa(i){const n=Te(i);return n.remoteStore.remoteSyncer.applySuccessfulWrite=ix.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=kS.bind(null,n),n}class LE{constructor(){this.synchronizeTabs=!1}initialize(n){var r=this;return(0,ae.Z)(function*(){r.N=$f(n.databaseInfo.databaseId),r.sharedClientState=r.Wo(n),r.persistence=r.Go(n),yield r.persistence.start(),r.gcScheduler=r.zo(n),r.localStore=r.Ho(n)})()}zo(n){return null}Ho(n){return Vb(this.persistence,new Ub,n.initialUser,this.N)}Go(n){return new IS(sE.Ns,this.N)}Wo(n){return new Gb}terminate(){var n=this;return(0,ae.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class zi extends LE{constructor(n,r,a){super(),this.Jo=n,this.cacheSizeBytes=r,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(n){var r=()=>super.initialize,a=this;return(0,ae.Z)(function*(){yield r().call(a,n),yield function(i){return Bm.apply(this,arguments)}(a.localStore),yield a.Jo.initialize(a,n),yield Qa(a.Jo.syncEngine),yield Vd(a.Jo.remoteStore),yield a.persistence.nn(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(a.localStore),Promise.resolve()))})()}Ho(n){return Vb(this.persistence,new Ub,n.initialUser,this.N)}zo(n){return new Ob(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)}Go(n){const r=Pd(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Br.withCacheSize(this.cacheSizeBytes):Br.DEFAULT;return new Hi(this.synchronizeTabs,r,n.clientId,a,n.asyncQueue,Wb(),bc(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(n){return new Gb}}class UE extends zi{constructor(n,r){super(n,r,!1),this.Jo=n,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(n){var r=()=>super.initialize,a=this;return(0,ae.Z)(function*(){yield r().call(a,n);const c=a.Jo.syncEngine;a.sharedClientState instanceof uE&&(a.sharedClientState.syncEngine={_i:sx.bind(null,c),mi:$S.bind(null,c),gi:lD.bind(null,c),pn:jS.bind(null,c),wi:BS.bind(null,c)},yield a.sharedClientState.start()),yield a.persistence.nn(function(){var h=(0,ae.Z)(function*(g){yield function(i,n){return ep.apply(this,arguments)}(a.Jo.syncEngine,g),a.gcScheduler&&(g&&!a.gcScheduler.started?a.gcScheduler.start(a.localStore):g||a.gcScheduler.stop())});return function(g){return h.apply(this,arguments)}}())})()}Wo(n){const r=Wb();if(!uE.bt(r))throw new me(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=Pd(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new uE(r,n.asyncQueue,a,n.clientId,n.initialUser)}}class VE{initialize(n,r){var a=this;return(0,ae.Z)(function*(){a.localStore||(a.localStore=n.localStore,a.sharedClientState=n.sharedClientState,a.datastore=a.createDatastore(r),a.remoteStore=a.createRemoteStore(r),a.eventManager=a.createEventManager(r),a.syncEngine=a.createSyncEngine(r,!n.synchronizeTabs),a.sharedClientState.onlineStateHandler=c=>DE(a.syncEngine,c,1),a.remoteStore.remoteSyncer.handleCredentialChange=LS.bind(null,a.syncEngine),yield Qm(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Xb}createDatastore(n){const r=$f(n.databaseInfo.databaseId),a=new ex(n.databaseInfo);return new Kb(n.credentials,a,r)}createRemoteStore(n){return r=this.localStore,a=this.datastore,c=n.asyncQueue,h=v=>DE(this.syncEngine,v,0),g=Ka.bt()?new Ka:new Wm,new CS(r,a,c,h,g);var r,a,c,h,g}createSyncEngine(n,r){return function(a,c,h,g,v,I,C){const T=new PS(a,c,h,g,v,I);return C&&(T.qo=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return(n=(0,ae.Z)(function*(r){const a=Te(r);we("RemoteStore","RemoteStore shutting down."),a.Kr.add(5),yield Fd(a),a.Qr.shutdown(),a.Wr.set("Unknown")}),function(r){return n.apply(this,arguments)})(this.remoteStore);var n}}function BE(i,n=10240){let r=0;return{read:()=>(0,ae.Z)(function*(){if(r<i.byteLength){const a={value:i.slice(r,r+n),done:!1};return r+=n,a}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class np{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Yo(this.observer.next,n)}error(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}Xo(){this.muted=!0}Yo(n,r){this.muted||setTimeout(()=>{this.muted||n(r)},0)}}class dD{constructor(n,r){this.Zo=n,this.N=r,this.metadata=new Sn,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(a=>{a&&a.ho()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Zo.cancel()}getMetadata(){var n=this;return(0,ae.Z)(function*(){return n.metadata.promise})()}Qo(){var n=this;return(0,ae.Z)(function*(){return yield n.getMetadata(),n.ea()})()}ea(){var n=this;return(0,ae.Z)(function*(){const r=yield n.na();if(null===r)return null;const a=n.ta.decode(r),c=Number(a);isNaN(c)&&n.sa(`length string (${a}) is not valid number`);const h=yield n.ia(c);return new Qf(JSON.parse(h),r.length+c)})()}ra(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}na(){var n=this;return(0,ae.Z)(function*(){for(;n.ra()<0&&!(yield n.oa()););if(0===n.buffer.length)return null;const r=n.ra();r<0&&n.sa("Reached the end of bundle when a length string is expected.");const a=n.buffer.slice(0,r);return n.buffer=n.buffer.slice(r),a})()}ia(n){var r=this;return(0,ae.Z)(function*(){for(;r.buffer.length<n;)(yield r.oa())&&r.sa("Reached the end of bundle when more is expected.");const a=r.ta.decode(r.buffer.slice(0,n));return r.buffer=r.buffer.slice(n),a})()}sa(n){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${n}`)}oa(){var n=this;return(0,ae.Z)(function*(){const r=yield n.Zo.read();if(!r.done){const a=new Uint8Array(n.buffer.length+r.value.length);a.set(n.buffer),a.set(r.value,n.buffer.length),n.buffer=a}return r.done})()}}class HS{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var r=this;return(0,ae.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new me(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(c=(0,ae.Z)(function*(h,g){const v=Te(h),I=kf(v.N)+"/documents",C={documents:g.map(M=>Of(v.N,M))},T=yield v.Ki("BatchGetDocuments",I,C),A=new Map;T.forEach(M=>{const z=function(i,n){return"found"in n?function(r,a){Je(!!a.found);const c=zs(r,a.found.name),h=Ln(a.found.updateTime),g=new gr({mapValue:{fields:a.found.fields}});return Jt.newFoundDocument(c,h,g)}(i,n):"missing"in n?function(r,a){Je(!!a.missing),Je(!!a.readTime);const c=zs(r,a.missing),h=Ln(a.readTime);return Jt.newNoDocument(c,h)}(i,n):Ve()}(v.N,M);A.set(z.key.toString(),z)});const O=[];return g.forEach(M=>{const z=A.get(M.toString());Je(!!z),O.push(z)}),O}),function(h,g){return c.apply(this,arguments)})(r.datastore,n);var c;return a.forEach(c=>r.recordVersion(c)),a})()}set(n,r){this.write(r.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,r){try{this.write(r.toMutation(n,this.preconditionForUpdate(n)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(n.toString())}delete(n){this.write(new xf(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,ae.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const r=n.readVersions;var a;n.mutations.forEach(a=>{r.delete(a.key.toString())}),r.forEach((a,c)=>{const h=Ue.fromPath(c);n.mutations.push(new kv(h,n.precondition(h)))}),yield(a=(0,ae.Z)(function*(c,h){const g=Te(c),v=kf(g.N)+"/documents",I={writes:h.map(C=>Ed(g.N,C))};yield g.Li("Commit",v,I)}),function(c,h){return a.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let r;if(n.isFoundDocument())r=n.version;else{if(!n.isNoDocument())throw Ve();r=it.min()}const a=this.readVersions.get(n.key.toString());if(a){if(!r.isEqual(a))throw new me(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),r)}precondition(n){const r=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&r?Rn.updateTime(r):Rn.none()}preconditionForUpdate(n){const r=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&r){if(r.isEqual(it.min()))throw new me(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(r)}return Rn.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class GS{constructor(n,r,a,c){this.asyncQueue=n,this.datastore=r,this.updateFunction=a,this.deferred=c,this.aa=5,this.rr=new cE(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var n=this;this.rr.Xi((0,ae.Z)(function*(){const r=new HS(n.datastore),a=n.ua(r);a&&a.then(c=>{n.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{n.deferred.resolve(c)}).catch(h=>{n.ha(h)}))}).catch(c=>{n.ha(c)})}))}ua(n){try{const r=this.updateFunction(n);return!pc(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ha(n){this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(n)}la(n){if("FirebaseError"===n.name){const r=n.code;return"aborted"===r||"failed-precondition"===r||!XI(r)}return!1}}class qS{constructor(n,r,a){var c=this;this.credentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=nr.UNAUTHENTICATED,this.clientId=dc.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(r,function(){var h=(0,ae.Z)(function*(g){we("FirestoreClient","Received user=",g.uid),yield c.credentialListener(g),c.user=g});return function(g){return h.apply(this,arguments)}}())}getConfiguration(){var n=this;return(0,ae.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,credentials:n.credentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.credentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const r=new Sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.credentials.shutdown(),r.resolve()}catch(a){const c=Es(a,"Failed to shutdown persistence");r.reject(c)}})),r.promise}}function jE(i,n){return $E.apply(this,arguments)}function $E(){return($E=(0,ae.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress(),we("FirestoreClient","Initializing OfflineComponentProvider");const r=yield i.getConfiguration();yield n.initialize(r);let a=r.initialUser;i.setCredentialChangeListener(function(){var c=(0,ae.Z)(function*(h){a.isEqual(h)||(yield Lm(n.localStore,h),a=h)});return function(h){return c.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=n})).apply(this,arguments)}function WS(i,n){return HE.apply(this,arguments)}function HE(){return(HE=(0,ae.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress();const r=yield GE(i);we("FirestoreClient","Initializing OnlineComponentProvider");const a=yield i.getConfiguration();yield n.initialize(r,a),i.setCredentialChangeListener(c=>{return(h=(0,ae.Z)(function*(g,v){const I=Te(g);I.asyncQueue.verifyOperationInProgress(),we("RemoteStore","RemoteStore received new credentials");const C=wi(I);I.Kr.add(3),yield Fd(I),C&&I.Wr.set("Unknown"),yield I.remoteSyncer.handleCredentialChange(v),I.Kr.delete(3),yield Hf(I)}),function(g,v){return h.apply(this,arguments)})(n.remoteStore,c);var h}),i.onlineComponents=n})).apply(this,arguments)}function GE(i){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,ae.Z)(function*(i){return i.offlineComponents||(we("FirestoreClient","Using default OfflineComponentProvider"),yield jE(i,new LE)),i.offlineComponents})).apply(this,arguments)}function qE(i){return ty.apply(this,arguments)}function ty(){return(ty=(0,ae.Z)(function*(i){return i.onlineComponents||(we("FirestoreClient","Using default OnlineComponentProvider"),yield WS(i,new VE)),i.onlineComponents})).apply(this,arguments)}function hD(i){return GE(i).then(n=>n.persistence)}function fD(i){return GE(i).then(n=>n.localStore)}function WE(i){return qE(i).then(n=>n.remoteStore)}function zE(i){return qE(i).then(n=>n.syncEngine)}function Xa(i){return KE.apply(this,arguments)}function KE(){return(KE=(0,ae.Z)(function*(i){const n=yield qE(i),r=n.eventManager;return r.onListen=_E.bind(null,n.syncEngine),r.onUnlisten=OS.bind(null,n.syncEngine),r})).apply(this,arguments)}function pD(i,n,r={}){const a=new Sn;return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(c,h,g,v,I){const C=new np({next:A=>{h.enqueueAndForget(()=>Zf(c,T));const O=A.docs.has(g);!O&&A.fromCache?I.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&A.fromCache&&v&&"server"===v.source?I.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(A)},error:A=>I.reject(A)}),T=new eD(mc(g.path),C,{includeMetadataChanges:!0,uo:!0});return jd(c,T)}(yield Xa(i),i.asyncQueue,n,r,a)})),a.promise}function gD(i,n,r={}){const a=new Sn;return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(c,h,g,v,I){const C=new np({next:A=>{h.enqueueAndForget(()=>Zf(c,T)),A.fromCache&&"server"===v.source?I.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(A)},error:A=>I.reject(A)}),T=new eD(g,C,{includeMetadataChanges:!0,uo:!0});return jd(c,T)}(yield Xa(i),i.asyncQueue,n,r,a)})),a.promise}class mD{constructor(n,r,a,c,h,g,v,I){this.databaseId=n,this.appId=r,this.persistenceKey=a,this.host=c,this.ssl=h,this.forceLongPolling=g,this.autoDetectLongPolling=v,this.useFetchStreams=I}}class Rc{constructor(n,r){this.projectId=n,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof Rc&&n.projectId===this.projectId&&n.database===this.database}}const ZE=new Map;function ny(i,n,r){if(!r)throw new me(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${n}.`)}function YE(i,n,r,a){if(!0===n&&!0===a)throw new me(ne.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function yD(i){if(!Ue.isDocumentKey(i))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function _D(i){if(Ue.isDocumentKey(i))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ry(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const n=(r=i).constructor?r.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var r;return"function"==typeof i?"a function":Ve()}function vt(i,n){if("_delegate"in i&&(i=i._delegate),!(i instanceof n)){if(n.name===i.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=ry(i);throw new me(ne.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${r}`)}}return i}function vD(i,n){if(n<=0)throw new me(ne.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${n}.`)}class ED{constructor(n){var r;if(void 0===n.host){if(void 0!==n.ssl)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,YE("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class ip{constructor(n,r){this._credentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ED({}),this._settingsFrozen=!1,n instanceof Rc?this._databaseId=n:(this._app=n,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rc(a.options.projectId)}(n))}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ED(n),void 0!==n.credentials&&(this._credentials=function(r){if(!r)return new WR;switch(r.type){case"gapi":const a=r.client;return Je(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new AI(a,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new me(ne.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ZE.get(n);r&&(we("ComponentProvider","Removing Datastore"),ZE.delete(n),r.terminate())}(this),Promise.resolve()}}class Nt{constructor(n,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new Nt(this.firestore,n,this._key)}}class Er{constructor(n,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=n}withConverter(n){return new Er(this.firestore,n,this._query)}}class Ki extends Er{constructor(n,r,a){super(n,r,mc(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new Nt(this.firestore,null,new Ue(n))}withConverter(n){return new Ki(this.firestore,n,this._path)}}function ws(i,n,...r){if(i=(0,at.m9)(i),ny("collection","path",n),i instanceof ip){const a=Ct.fromString(n,...r);return _D(a),new Ki(i,null,a)}{if(!(i instanceof Nt||i instanceof Ki))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Ct.fromString(n,...r));return _D(a),new Ki(i.firestore,null,a)}}function xc(i,n,...r){if(i=(0,at.m9)(i),1===arguments.length&&(n=dc.I()),ny("doc","path",n),i instanceof ip){const a=Ct.fromString(n,...r);return yD(a),new Nt(i,null,new Ue(a))}{if(!(i instanceof Nt||i instanceof Ki))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Ct.fromString(n,...r));return yD(a),new Nt(i.firestore,i instanceof Ki?i.converter:null,new Ue(a))}}function wD(i,n){return i=(0,at.m9)(i),n=(0,at.m9)(n),(i instanceof Nt||i instanceof Ki)&&(n instanceof Nt||n instanceof Ki)&&i.firestore===n.firestore&&i.path===n.path&&i.converter===n.converter}function ID(i,n){return i=(0,at.m9)(i),n=(0,at.m9)(n),i instanceof Er&&n instanceof Er&&i.firestore===n.firestore&&ld(i._query,n._query)&&i.converter===n.converter}class ax{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new cE(this,"async_queue_retry"),this.Ea=()=>{const r=bc();r&&we("AsyncQueue","Visibility state changed to "+r.visibilityState),this.rr.tr()};const n=bc();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Ta(),this.Ia(n)}enterRestrictedMode(n){if(!this.wa){this.wa=!0,this.ya=n||!1;const r=bc();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}enqueue(n){if(this.Ta(),this.wa)return new Promise(()=>{});const r=new Sn;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(n().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.da.push(n),this.Aa()))}Aa(){var n=this;return(0,ae.Z)(function*(){if(0!==n.da.length){try{yield n.da[0](),n.da.shift(),n.rr.reset()}catch(r){if(!vc(r))throw r;we("AsyncQueue","Operation failed with retryable error: "+r)}n.da.length>0&&n.rr.Xi(()=>n.Aa())}})()}Ia(n){const r=this.fa.then(()=>(this.ga=!0,n().catch(a=>{throw this.ma=a,this.ga=!1,In("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(a)),a}).then(a=>(this.ga=!1,a))));return this.fa=r,r}enqueueAfterDelay(n,r,a){this.Ta(),this.pa.indexOf(n)>-1&&(r=0);const c=Jm.createAndSchedule(this,n,r,a,h=>this.Ra(h));return this._a.push(c),c}Ta(){this.ma&&Ve()}verifyOperationInProgress(){}ba(){var n=this;return(0,ae.Z)(function*(){let r;do{r=n.fa,yield r}while(r!==n.fa)})()}Pa(n){for(const r of this._a)if(r.timerId===n)return!0;return!1}va(n){return this.ba().then(()=>{this._a.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this._a)if(r.skipDelay(),"all"!==n&&r.timerId===n)break;return this.ba()})}Va(n){this.pa.push(n)}Ra(n){const r=this._a.indexOf(n);this._a.splice(r,1)}}function op(i){return function(n,r){if("object"!=typeof n||null===n)return!1;const a=n;for(const c of["next","error","complete"])if(c in a&&"function"==typeof a[c])return!0;return!1}(i)}class QE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,r,a){this._progressObserver={next:n,error:r,complete:a}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,r){return this._taskCompletionResolver.promise.then(n,r)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class an extends ip{constructor(n,r){super(n,r),this.type="firestore",this._queue=new ax,this._persistenceKey="name"in n?n.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||CD(this),this._firestoreClient.terminate()}}function Un(i){return i._firestoreClient||CD(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function CD(i){var n;const r=i._freezeSettings(),a=(h=(null===(n=i._app)||void 0===n?void 0:n.options.appId)||"",new mD(i._databaseId,h,i._persistenceKey,(v=r).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,v.useFetchStreams));var h,v;i._firestoreClient=new qS(i._credentials,i._queue,a)}function iy(i,n,r){const a=new Sn;return i.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield jE(i,r),yield WS(i,n),a.resolve()}catch(c){if(!("FirebaseError"===(h=c).name?h.code===ne.FAILED_PRECONDITION||h.code===ne.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw c;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),a.reject(c)}var h})).then(()=>a.promise)}function PD(i){if(i._initialized||i._terminated)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Js{constructor(...n){for(let r=0;r<n.length;++r)if(0===n[r].length)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class qo{constructor(n){this._byteString=n}static fromBase64String(n){try{return new qo(Mn.fromBase64String(n))}catch(r){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(n){return new qo(Mn.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class bn{constructor(n){this._methodName=n}}class Wo{constructor(n,r){if(!isFinite(n)||n<-90||n>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return mt(this._lat,n._lat)||mt(this._long,n._long)}}const rA=/^__.*__$/;class iA{constructor(n,r,a){this.data=n,this.fieldMask=r,this.fieldTransforms=a}toMutation(n,r){return null!==this.fieldMask?new Lo(n,this.data,this.fieldMask,r,this.fieldTransforms):new md(n,this.data,r,this.fieldTransforms)}}class sA{constructor(n,r,a){this.data=n,this.fieldMask=r,this.fieldTransforms=a}toMutation(n,r){return new Lo(n,this.data,this.fieldMask,r,this.fieldTransforms)}}function Hd(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve()}}class sy{constructor(n,r,a,c,h,g){this.settings=n,this.databaseId=r,this.N=a,this.ignoreUndefinedProperties=c,void 0===h&&this.Sa(),this.fieldTransforms=h||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(n){return new sy(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(n){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(n),c=this.Ca({path:a,xa:!1});return c.ka(n),c}$a(n){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(n),c=this.Ca({path:a,xa:!1});return c.Sa(),c}Oa(n){return this.Ca({path:void 0,xa:!0})}Fa(n){return uy(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(n){return void 0!==this.fieldMask.find(r=>n.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>n.isPrefixOf(r.field))}Sa(){if(this.path)for(let n=0;n<this.path.length;n++)this.ka(this.path.get(n))}ka(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(Hd(this.Da)&&rA.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}class JE{constructor(n,r,a){this.databaseId=n,this.ignoreUndefinedProperties=r,this.N=a||$f(n)}Ba(n,r,a,c=!1){return new sy({Da:n,methodName:r,La:a,path:rr.emptyPath(),xa:!1,Ma:c},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Nc(i){const n=i._freezeSettings(),r=$f(i._databaseId);return new JE(i._databaseId,!!n.ignoreUndefinedProperties,r)}function ap(i,n,r,a,c,h={}){const g=i.Ba(h.merge||h.mergeFields?2:0,n,r,c);ay("Data must be an object, but it was:",g,a);const v=ew(a,g);let I,C;if(h.merge)I=new fc(g.fieldMask),C=g.fieldTransforms;else if(h.mergeFields){const T=[];for(const A of h.mergeFields){const O=tw(n,A,r);if(!g.contains(O))throw new me(ne.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);LD(T,O)||T.push(O)}I=new fc(T),C=g.fieldTransforms.filter(A=>I.covers(A.field))}else I=null,C=g.fieldTransforms;return new iA(new gr(v),I,C)}class up extends bn{_toFieldTransform(n){if(2!==n.Da)throw n.Fa(1===n.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof up}}function OD(i,n,r){return new sy({Da:3,La:n.settings.La,methodName:i._methodName,xa:r},n.databaseId,n.N,n.ignoreUndefinedProperties)}class cp extends bn{_toFieldTransform(n){return new gd(n.path,new hd)}isEqual(n){return n instanceof cp}}class MD extends bn{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=OD(this,n,!0),a=this.Ua.map(h=>Pc(h,r)),c=new yc(a);return new gd(n.path,c)}isEqual(n){return this===n}}class kD extends bn{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=OD(this,n,!0),a=this.Ua.map(h=>Pc(h,r)),c=new Fo(a);return new gd(n.path,c)}isEqual(n){return this===n}}class oy extends bn{constructor(n,r){super(n),this.qa=r}_toFieldTransform(n){const r=new pd(n.N,Ui(n.N,this.qa));return new gd(n.path,r)}isEqual(n){return this===n}}function lp(i,n,r,a){const c=i.Ba(1,n,r);ay("Data must be an object, but it was:",c,a);const h=[],g=gr.empty();La(a,(I,C)=>{const T=hp(n,I,r);C=(0,at.m9)(C);const A=c.$a(T);if(C instanceof up)h.push(T);else{const O=Pc(C,A);null!=O&&(h.push(T),g.set(T,O))}});const v=new fc(h);return new sA(g,v,c.fieldTransforms)}function FD(i,n,r,a,c,h){const g=i.Ba(1,n,r),v=[tw(n,a,r)],I=[c];if(h.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<h.length;O+=2)v.push(tw(n,h[O])),I.push(h[O+1]);const C=[],T=gr.empty();for(let O=v.length-1;O>=0;--O)if(!LD(C,v[O])){const M=v[O];let z=I[O];z=(0,at.m9)(z);const ye=g.$a(M);if(z instanceof up)C.push(M);else{const De=Pc(z,ye);null!=De&&(C.push(M),T.set(M,De))}}const A=new fc(C);return new sA(T,A,g.fieldTransforms)}function XE(i,n,r,a=!1){return Pc(r,i.Ba(a?4:3,n))}function Pc(i,n){if(dp(i=(0,at.m9)(i)))return ay("Unsupported field value:",n,i),ew(i,n);if(i instanceof bn)return function(r,a){if(!Hd(a.Da))throw a.Fa(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Fa(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,n),null;if(void 0===i&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),i instanceof Array){if(n.settings.xa&&4!==n.Da)throw n.Fa("Nested arrays are not supported");return function(r,a){const c=[];let h=0;for(const g of r){let v=Pc(g,a.Oa(h));null==v&&(v={nullValue:"NULL_VALUE"}),c.push(v),h++}return{arrayValue:{values:c}}}(i,n)}return function(r,a){if(null===(r=(0,at.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Ui(a.N,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const c=On.fromDate(r);return{timestampValue:_c(a.N,c)}}if(r instanceof On){const c=new On(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_c(a.N,c)}}if(r instanceof Wo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qo)return{bytesValue:XT(a.N,r._byteString)};if(r instanceof Nt){const c=a.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw a.Fa(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ub(r.firestore._databaseId||a.databaseId,r._key.path)}}throw a.Fa(`Unsupported field value: ${ry(r)}`)}(i,n)}function ew(i,n){const r={};return NI(i)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):La(i,(a,c)=>{const h=Pc(c,n.Na(a));null!=h&&(r[a]=h)}),{mapValue:{fields:r}}}function dp(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof On||i instanceof Wo||i instanceof qo||i instanceof Nt||i instanceof bn)}function ay(i,n,r){if(!dp(r)||"object"!=typeof(a=r)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=ry(r);throw n.Fa("an object"===a?i+" a custom object":i+" "+a)}var a}function tw(i,n,r){if((n=(0,at.m9)(n))instanceof Js)return n._internalPath;if("string"==typeof n)return hp(i,n);throw uy("Field path arguments must be of type string or FieldPath.",i,!1,void 0,r)}const nw=new RegExp("[~\\*/\\[\\]]");function hp(i,n,r){if(n.search(nw)>=0)throw uy(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new Js(...n.split("."))._internalPath}catch(a){throw uy(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function uy(i,n,r,a,c){const h=a&&!a.isEmpty(),g=void 0!==c;let v=`Function ${n}() called with invalid data`;r&&(v+=" (via `toFirestore()`)"),v+=". ";let I="";return(h||g)&&(I+=" (found",h&&(I+=` in field ${a}`),g&&(I+=` in document ${c}`),I+=")"),new me(ne.INVALID_ARGUMENT,v+i+I)}function LD(i,n){return i.some(r=>r.isEqual(n))}class Gd{constructor(n,r,a,c,h){this._firestore=n,this._userDataWriter=r,this._key=a,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new UD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const r=this._document.data.field(fp("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r)}}}class UD extends Gd{data(){return super.data()}}function fp(i,n){return"string"==typeof n?hp(i,n):n instanceof Js?n._internalPath:n._delegate._internalPath}class Oc{constructor(n,r){this.hasPendingWrites=n,this.fromCache=r}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class Xs extends Gd{constructor(n,r,a,c,h,g){super(n,r,a,c,g),this._firestore=n,this._firestoreImpl=n,this.metadata=h}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const r=new qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,r={}){if(this._document){const a=this._document.data.field(fp("DocumentSnapshot.get",n));if(null!==a)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class qd extends Xs{data(n={}){return super.data(n)}}class eu{constructor(n,r,a,c){this._firestore=n,this._userDataWriter=r,this._snapshot=c,this.metadata=new Oc(c.hasPendingWrites,c.fromCache),this.query=a}get docs(){const n=[];return this.forEach(r=>n.push(r)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,r){this._snapshot.docs.forEach(a=>{n.call(r,new qd(this._firestore,this._userDataWriter,a.key,a,new Oc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const r=!!n.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(g=>({type:"added",doc:new qd(a._firestore,a._userDataWriter,g.doc.key,g.doc,new Oc(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:h++}))}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(g=>c||3!==g.type).map(g=>{const v=new qd(a._firestore,a._userDataWriter,g.doc.key,g.doc,new Oc(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let I=-1,C=-1;return 0!==g.type&&(I=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),1!==g.type&&(h=h.add(g.doc),C=h.indexOf(g.doc.key)),{type:oA(g.type),doc:v,oldIndex:I,newIndex:C}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function oA(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve()}}function rw(i,n){return i instanceof Xs&&n instanceof Xs?i._firestore===n._firestore&&i._key.isEqual(n._key)&&(null===i._document?null===n._document:i._document.isEqual(n._document))&&i._converter===n._converter:i instanceof eu&&n instanceof eu&&i._firestore===n._firestore&&ID(i.query,n.query)&&i.metadata.isEqual(n.metadata)&&i._snapshot.isEqual(n._snapshot)}function VD(i){if(Tf(i)&&0===i.explicitOrderBy.length)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wd{}function zo(i,...n){for(const r of n)i=r._apply(i);return i}class BD extends Wd{constructor(n,r,a){super(),this.Ka=n,this.ja=r,this.Qa=a,this.type="where"}_apply(n){const r=Nc(n.firestore),a=function(c,h,g,v,I,C,T){let A;if(I.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on FieldPath.documentId().`);if("in"===C||"not-in"===C){fA(T,C);const M=[];for(const z of T)M.push(hA(v,c,z));A={arrayValue:{values:M}}}else A=hA(v,c,T)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||fA(T,C),A=XE(g,"where",T,"in"===C||"not-in"===C);const O=ir.create(I,C,A);return function(M,z){if(z.v()){const De=Va(M);if(null!==De&&!De.isEqual(z.field))throw new me(ne.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${De.toString()}' and '${z.field.toString()}'`);const qe=Dm(M);null!==qe&&pA(0,z.field,qe)}const ye=function(De,qe){for(const Ze of De.filters)if(qe.indexOf(Ze.op)>=0)return Ze.op;return null}(M,function(De){switch(De){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==ye)throw new me(ne.INVALID_ARGUMENT,ye===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${ye.toString()}' filters.`)}(c,O),O}(n._query,0,r,n.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Er(n.firestore,n.converter,function(c,h){const g=c.filters.concat([h]);return new ko(c.path,c.collectionGroup,c.explicitOrderBy.slice(),g,c.limit,c.limitType,c.startAt,c.endAt)}(n._query,a))}}class aA extends Wd{constructor(n,r){super(),this.Ka=n,this.Wa=r,this.type="orderBy"}_apply(n){const r=function(a,c,h){if(null!==a.startAt)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new gc(c,h);return function(v,I){if(null===Dm(v)){const C=Va(v);null!==C&&pA(0,C,I.field)}}(a,g),g}(n._query,this.Ka,this.Wa);return new Er(n.firestore,n.converter,function(a,c){const h=a.explicitOrderBy.concat([c]);return new ko(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(n._query,r))}}class $D extends Wd{constructor(n,r,a){super(),this.type=n,this.Ga=r,this.za=a}_apply(n){return new Er(n.firestore,n.converter,HI(n._query,this.Ga,this.za))}}class cA extends Wd{constructor(n,r,a){super(),this.type=n,this.Ha=r,this.Ja=a}_apply(n){const r=dA(n,this.type,this.Ha,this.Ja);return new Er(n.firestore,n.converter,(c=r,new ko((a=n._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,c,a.endAt)));var a,c}}class lA extends Wd{constructor(n,r,a){super(),this.type=n,this.Ha=r,this.Ja=a}_apply(n){const r=dA(n,this.type,this.Ha,this.Ja);return new Er(n.firestore,n.converter,(c=r,new ko((a=n._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,c)));var a,c}}function dA(i,n,r,a){if(r[0]=(0,at.m9)(r[0]),r[0]instanceof Gd)return function(c,h,g,v,I){if(!v)throw new me(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const C=[];for(const T of cd(c))if(T.field.isKeyField())C.push(vm(h,v.key));else{const A=v.data.field(T.field);if(wv(A))throw new me(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const O=T.field.canonicalString();throw new me(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}C.push(A)}return new Cf(C,I)}(i._query,i.firestore._databaseId,n,r[0]._document,a);{const c=Nc(i.firestore);return function(h,g,v,I,C,T){const A=h.explicitOrderBy;if(C.length>A.length)throw new me(ne.INVALID_ARGUMENT,`Too many arguments provided to ${I}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let M=0;M<C.length;M++){const z=C[M];if(A[M].field.isKeyField()){if("string"!=typeof z)throw new me(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${I}(), but got a ${typeof z}`);if(!Av(h)&&-1!==z.indexOf("/"))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${I}() must be a plain document ID, but '${z}' contains a slash.`);const ye=h.path.child(Ct.fromString(z));if(!Ue.isDocumentKey(ye))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${I}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const De=new Ue(ye);O.push(vm(g,De))}else{const ye=XE(v,I,z);O.push(ye)}}return new Cf(O,T)}(i._query,i.firestore._databaseId,c,n,r,a)}}function hA(i,n,r){if("string"==typeof(r=(0,at.m9)(r))){if(""===r)throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Av(n)&&-1!==r.indexOf("/"))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=n.path.child(Ct.fromString(r));if(!Ue.isDocumentKey(a))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return vm(i,new Ue(a))}if(r instanceof Nt)return vm(i,r._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${ry(r)}.`)}function fA(i,n){if(!Array.isArray(i)||0===i.length)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(i.length>10)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function pA(i,n,r){if(!r.isEqual(n))throw new me(ne.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class GD{convertValue(n,r="none"){switch(Mo(n)){case 0:return null;case 1:return n.booleanValue;case 2:return kn(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,r);case 5:return n.stringValue;case 6:return this.convertBytes(Ua(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,r);case 10:return this.convertObject(n.mapValue,r);default:throw Ve()}}convertObject(n,r){const a={};return La(n.fields,(c,h)=>{a[c]=this.convertValue(h,r)}),a}convertGeoPoint(n){return new Wo(kn(n.latitude),kn(n.longitude))}convertArray(n,r){return(n.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(n,r){switch(r){case"previous":const a=HT(n);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(Oo(n));default:return null}}convertTimestamp(n){const r=Ws(n);return new On(r.seconds,r.nanos)}convertDocumentKey(n,r){const a=Ct.fromString(n);Je(yb(a));const c=new Rc(a.get(1),a.get(3)),h=new Ue(a.popFirst(5));return c.isEqual(r)||In(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),h}}function iw(i,n,r){let a;return a=i?r&&(r.merge||r.mergeFields)?i.toFirestore(n,r):i.toFirestore(n):n,a}class mx extends GD{constructor(n){super(),this.firestore=n}convertBytes(n){return new qo(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Nt(this.firestore,null,r)}}class gA{constructor(n,r){this._firestore=n,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Nc(n)}set(n,r,a){this._verifyNotCommitted();const c=Mc(n,this._firestore),h=iw(c.converter,r,a),g=ap(this._dataReader,"WriteBatch.set",c._key,h,null!==c.converter,a);return this._mutations.push(g.toMutation(c._key,Rn.none())),this}update(n,r,a,...c){this._verifyNotCommitted();const h=Mc(n,this._firestore);let g;return g="string"==typeof(r=(0,at.m9)(r))||r instanceof Js?FD(this._dataReader,"WriteBatch.update",h._key,r,a,c):lp(this._dataReader,"WriteBatch.update",h._key,r),this._mutations.push(g.toMutation(h._key,Rn.exists(!0))),this}delete(n){this._verifyNotCommitted();const r=Mc(n,this._firestore);return this._mutations=this._mutations.concat(new xf(r._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mc(i,n){if((i=(0,at.m9)(i)).firestore!==n)throw new me(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class kc extends GD{constructor(n){super(),this.firestore=n}convertBytes(n){return new qo(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Nt(this.firestore,null,r)}}function qD(i,n,r){i=vt(i,Nt);const a=vt(i.firestore,an),c=iw(i.converter,n,r);return pp(a,[ap(Nc(a),"setDoc",i._key,c,null!==i.converter,r).toMutation(i._key,Rn.none())])}function WD(i,n,r,...a){i=vt(i,Nt);const c=vt(i.firestore,an),h=Nc(c);let g;return g="string"==typeof(n=(0,at.m9)(n))||n instanceof Js?FD(h,"updateDoc",i._key,n,r,a):lp(h,"updateDoc",i._key,n),pp(c,[g.toMutation(i._key,Rn.exists(!0))])}function vA(i,...n){var r,a,c;i=(0,at.m9)(i);let h={includeMetadataChanges:!1},g=0;"object"!=typeof n[g]||op(n[g])||(h=n[g],g++);const v={includeMetadataChanges:h.includeMetadataChanges};if(op(n[g])){const A=n[g];n[g]=null===(r=A.next)||void 0===r?void 0:r.bind(A),n[g+1]=null===(a=A.error)||void 0===a?void 0:a.bind(A),n[g+2]=null===(c=A.complete)||void 0===c?void 0:c.bind(A)}let I,C,T;if(i instanceof Nt)C=vt(i.firestore,an),T=mc(i._key.path),I={next:A=>{n[g]&&n[g](sw(C,i,A))},error:n[g+1],complete:n[g+2]};else{const A=vt(i,Er);C=vt(A.firestore,an),T=A._query;const O=new kc(C);I={next:M=>{n[g]&&n[g](new eu(C,O,A,M))},error:n[g+1],complete:n[g+2]},VD(i._query)}return function(A,O,M,z){const ye=new np(z),De=new eD(O,ye,M);return A.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return jd(yield Xa(A),De)})),()=>{ye.Xo(),A.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return Zf(yield Xa(A),De)}))}}(Un(C),T,v,I)}function pp(i,n){return function(r,a){const c=new Sn;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(i,n,r){return Jf.apply(this,arguments)}(yield zE(r),a,c)})),c.promise}(Un(i),n)}function sw(i,n,r){const a=r.docs.get(n._key),c=new kc(i);return new Xs(i,c,n._key,a,new Oc(r.hasPendingWrites,r.fromCache),n.converter)}class bx extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Nc(n)}get(n){const r=Mc(n,this._firestore),a=new mx(this._firestore);return this._transaction.lookup([r._key]).then(c=>{if(!c||1!==c.length)return Ve();const h=c[0];if(h.isFoundDocument())return new Gd(this._firestore,a,h.key,h,r.converter);if(h.isNoDocument())return new Gd(this._firestore,a,r._key,null,r.converter);throw Ve()})}set(n,r,a){const c=Mc(n,this._firestore),h=iw(c.converter,r,a),g=ap(this._dataReader,"Transaction.set",c._key,h,null!==c.converter,a);return this._transaction.set(c._key,g),this}update(n,r,a,...c){const h=Mc(n,this._firestore);let g;return g="string"==typeof(r=(0,at.m9)(r))||r instanceof Js?FD(this._dataReader,"Transaction.update",h._key,r,a,c):lp(this._dataReader,"Transaction.update",h._key,r),this._transaction.update(h._key,g),this}delete(n){const r=Mc(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(n,r){super(n,r),this._firestore=n}get(n){const r=Mc(n,this._firestore),a=new kc(this._firestore);return super.get(n).then(c=>new Xs(this._firestore,a,r._key,c._document,new Oc(!1,!1),r.converter))}}function JD(i,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new me("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return n}function aw(){if("undefined"==typeof Uint8Array)throw new me("unimplemented","Uint8Arrays are not available in this environment.")}function gp(){if("undefined"==typeof atob)throw new me("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){lc=i})(jl.SDK_VERSION),(0,jl._registerComponent)(new $l.wA("firestore",(i,{options:n})=>{const r=i.getProvider("app").getImmediate(),a=new an(r,new KR(i.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),a._setSettings(n),a},"PUBLIC")),(0,jl.registerVersion)("@firebase/firestore","3.1.0",void 0);class Kd{constructor(n){this._delegate=n}static fromBase64String(n){return gp(),new Kd(qo.fromBase64String(n))}static fromUint8Array(n){return aw(),new Kd(qo.fromUint8Array(n))}toBase64(){return gp(),this._delegate.toBase64()}toUint8Array(){return aw(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function XD(i){return function(i,n){if("object"!=typeof i||null===i)return!1;const r=i;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(i)}class Cx{enableIndexedDbPersistence(n,r){return function(i,n){PD(i=vt(i,an));const r=Un(i),a=i._freezeSettings(),c=new VE;return iy(r,c,new zi(c,a.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(n._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(n){return function(i){PD(i=vt(i,an));const n=Un(i),r=i._freezeSettings(),a=new VE;return iy(n,a,new UE(a,r.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function(i){if(i._initialized&&!i._terminated)throw new me(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new Sn;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(r=(0,ae.Z)(function*(a){if(!vs.bt())return Promise.resolve();const c=a+"main";yield vs.delete(c)}),function(a){return r.apply(this,arguments)})(Pd(i._databaseId,i._persistenceKey)),n.resolve()}catch(r){n.reject(r)}var r})),n.promise}(n._delegate)}}class eC{constructor(n,r,a){this._delegate=r,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},n instanceof Rc||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const r=this._delegate._getSettings();!n.merge&&r.host!==n.host&&gm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},r),n)).merge,this._delegate._setSettings(n)}useEmulator(n,r,a={}){!function(i,n,r,a={}){var c;const h=(i=vt(i,ip))._getSettings();if("firestore.googleapis.com"!==h.host&&h.host!==n&&gm("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},h),{host:`${n}:${r}`,ssl:!1})),a.mockUserToken){let g,v;if("string"==typeof a.mockUserToken)g=a.mockUserToken,v=nr.MOCK_USER;else{g=(0,at.Sg)(a.mockUserToken,null===(c=i._app)||void 0===c?void 0:c.options.projectId);const I=a.mockUserToken.sub||a.mockUserToken.user_id;if(!I)throw new me(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new nr(I)}i._credentials=new zR(new SI(g,v))}}(this._delegate,n,r,a)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,ae.Z)(function*(){const n=yield hD(i),r=yield WE(i);return n.setNetworkEnabled(!0),function(a){const c=Te(a);return c.Kr.delete(0),Hf(c)}(r)}))}(Un(i=vt(i,an)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,ae.Z)(function*(){const n=yield hD(i),r=yield WE(i);return n.setNetworkEnabled(!1),(a=(0,ae.Z)(function*(c){const h=Te(c);h.Kr.add(0),yield Fd(h),h.Wr.set("Offline")}),function(c){return a.apply(this,arguments)})(r);var a}))}(Un(i=vt(i,an)))}(this._delegate)}enablePersistence(n){let r=!1,a=!1;return n&&(r=!!n.synchronizeTabs,a=!!n.experimentalForceOwningTab,YE("synchronizeTabs",r,"experimentalForceOwningTab",a)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(n){const r=new Sn;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(i,n){return RE.apply(this,arguments)}(yield zE(n),r)})),r.promise}(Un(i=vt(i,an)))}(this._delegate)}onSnapshotsInSync(n){return function(i,n){return function(i,n){const r=new np(n);return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return a=yield Xa(i),c=r,Te(a).Zr.add(c),void c.next();var a,c})),()=>{r.Xo(),i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return a=yield Xa(i),c=r,void Te(a).Zr.delete(c);var a,c}))}}(Un(i=vt(i,an)),op(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new yp(this,ws(this._delegate,n))}catch(r){throw jr(r,"collection()","Firestore.collection()")}}doc(n){try{return new ii(this,xc(this._delegate,n))}catch(r){throw jr(r,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new wr(this,function(i,n){if(i=vt(i,ip),ny("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Er(i,null,(r=n,new ko(Ct.emptyPath(),r)));var r}(this._delegate,n))}catch(r){throw jr(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function(i,n){return function(i,n){const r=new Sn;return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const a=yield(c=i,qE(c).then(h=>h.datastore));var c;new GS(i.asyncQueue,a,n,r).run()})),r.promise}(Un(i),r=>n(new bx(i,r)))}(this._delegate,r=>n(new tC(this,r)))}batch(){return Un(this._delegate),new bA(new gA(this._delegate,n=>pp(this._delegate,n)))}loadBundle(n){return function(i,n){const r=Un(i=vt(i,an)),a=new QE;return function(i,n,r,a){const c=function(h,g){let v;return v="string"==typeof h?(new TextEncoder).encode(h):h,I=function(I,C){if(I instanceof Uint8Array)return BE(I,C);if(I instanceof ArrayBuffer)return BE(new Uint8Array(I),C);if(I instanceof ReadableStream)return I.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(v),new dD(I,g);var I}(r,$f(n));i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function(i,n,r){const a=Te(i);var c;(c=(0,ae.Z)(function*(h,g,v){try{const I=yield g.getMetadata();if(yield function(O,M){const z=Te(O),ye=Ln(M.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",De=>z.Je.getBundleMetadata(De,M.id)).then(De=>!!De&&De.createTime.compareTo(ye)>=0)}(h.localStore,I))return yield g.close(),void v._completeWith((O=I,{taskState:"Success",documentsLoaded:O.totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}));v._updateProgress(nD(I));const C=new AS(I,h.localStore,g.N);let T=yield g.Qo();for(;T;){const O=yield C.fo(T);O&&v._updateProgress(O),T=yield g.Qo()}const A=yield C.complete();yield Qs(h,A.Tn,void 0),yield function(O,M){const z=Te(O);return z.persistence.runTransaction("Save bundle","readwrite",ye=>z.Je.saveBundleMetadata(ye,M))}(h.localStore,I),v._completeWith(A.progress)}catch(I){gm("SyncEngine",`Loading bundle failed with ${I}`),v._failWith(I)}var O}),function(h,g,v){return c.apply(this,arguments)})(a,n,r).then(()=>{a.sharedClientState.notifyBundleLoaded()})}(yield zE(i),c,a)}))}(r,i._databaseId,n,a),a}(this._delegate,n)}namedQuery(n){return function(i,n){return function(i,n){return i.asyncQueue.enqueue((0,ae.Z)(function*(){return function(r,a){const c=Te(r);return c.persistence.runTransaction("Get named query","readonly",h=>c.Je.getNamedQuery(h,a))}(yield fD(i),n)}))}(Un(i=vt(i,an)),n).then(r=>r?new Er(i,null,r.query):null)}(this._delegate,n).then(r=>r?new wr(this,r):null)}}class uw extends GD{constructor(n){super(),this.firestore=n}convertBytes(n){return new Kd(new qo(n))}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return ii.forKey(r,this.firestore,null)}}class tC{constructor(n,r){this._firestore=n,this._delegate=r,this._userDataWriter=new uw(n)}get(n){const r=Fc(n);return this._delegate.get(r).then(a=>new mp(this._firestore,new Xs(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,r.converter)))}set(n,r,a){const c=Fc(n);return a?(JD("Transaction.set",a),this._delegate.set(c,r,a)):this._delegate.set(c,r),this}update(n,r,a,...c){const h=Fc(n);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,a,...c),this}delete(n){const r=Fc(n);return this._delegate.delete(r),this}}class bA{constructor(n){this._delegate=n}set(n,r,a){const c=Fc(n);return a?(JD("WriteBatch.set",a),this._delegate.set(c,r,a)):this._delegate.set(c,r),this}update(n,r,a,...c){const h=Fc(n);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,a,...c),this}delete(n){const r=Fc(n);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Zd{constructor(n,r,a){this._firestore=n,this._userDataWriter=r,this._delegate=a}fromFirestore(n,r){const a=new qd(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new ly(this._firestore,a),null!=r?r:{})}toFirestore(n,r){return r?this._delegate.toFirestore(n,r):this._delegate.toFirestore(n)}static getInstance(n,r){const a=Zd.INSTANCES;let c=a.get(n);c||(c=new WeakMap,a.set(n,c));let h=c.get(r);return h||(h=new Zd(n,new uw(n),r),c.set(r,h)),h}}Zd.INSTANCES=new WeakMap;class ii{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new uw(n)}static forPath(n,r,a){if(n.length%2!=0)throw new me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new ii(r,new Nt(r._delegate,a,new Ue(n)))}static forKey(n,r,a){return new ii(r,new Nt(r._delegate,a,n))}get id(){return this._delegate.id}get parent(){return new yp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new yp(this.firestore,ws(this._delegate,n))}catch(r){throw jr(r,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,at.m9)(n))instanceof Nt&&wD(this._delegate,n)}set(n,r){r=JD("DocumentReference.set",r);try{return r?qD(this._delegate,n,r):qD(this._delegate,n)}catch(a){throw jr(a,"setDoc()","DocumentReference.set()")}}update(n,r,...a){try{return 1===arguments.length?WD(this._delegate,n):WD(this._delegate,n,r,...a)}catch(c){throw jr(c,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return pp(vt(i.firestore,an),[new xf(i._key,Rn.none())])}(this._delegate)}onSnapshot(...n){const r=DA(n),a=CA(n,c=>new mp(this.firestore,new Xs(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return vA(this._delegate,r,a)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=vt(i,Nt);const n=vt(i.firestore,an),r=Un(n),a=new kc(n);return function(i,n){const r=new Sn;return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(a=(0,ae.Z)(function*(c,h,g){try{const v=yield function(I,C){const T=Te(I);return T.persistence.runTransaction("read document","readonly",A=>T.Qn.An(A,C))}(c,h);v.isFoundDocument()?g.resolve(v):v.isNoDocument()?g.resolve(null):g.reject(new me(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(v){const I=Es(v,`Failed to get document '${h} from cache`);g.reject(I)}}),function(c,h,g){return a.apply(this,arguments)})(yield fD(i),n,r);var a})),r.promise}(r,i._key).then(c=>new Xs(n,a,i._key,c,new Oc(null!==c&&c.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=vt(i,Nt);const n=vt(i.firestore,an);return pD(Un(n),i._key,{source:"server"}).then(r=>sw(n,i,r))}(this._delegate):function(i){i=vt(i,Nt);const n=vt(i.firestore,an);return pD(Un(n),i._key).then(r=>sw(n,i,r))}(this._delegate),r.then(a=>new mp(this.firestore,new Xs(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(n){return new ii(this.firestore,this._delegate.withConverter(n?Zd.getInstance(this.firestore,n):null))}}function jr(i,n,r){return i.message=i.message.replace(n,r),i}function DA(i){for(const n of i)if("object"==typeof n&&!XD(n))return n;return{}}function CA(i,n){var r,a;let c;return c=XD(i[0])?i[0]:XD(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:h=>{c.next&&c.next(n(h))},error:null===(r=c.error)||void 0===r?void 0:r.bind(c),complete:null===(a=c.complete)||void 0===a?void 0:a.bind(c)}}class mp{constructor(n,r){this._firestore=n,this._delegate=r}get ref(){return new ii(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,r){return this._delegate.get(n,r)}isEqual(n){return rw(this._delegate,n._delegate)}}class ly extends mp{data(n){const r=this._delegate.data(n);return function(i,n){i||Ve()}(void 0!==r),r}}class wr{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new uw(n)}where(n,r,a){try{return new wr(this.firestore,zo(this._delegate,function(i,n,r){const a=n,c=fp("where",i);return new BD(c,a,r)}(n,r,a)))}catch(c){throw jr(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,r){try{return new wr(this.firestore,zo(this._delegate,function(i,n="asc"){const r=n,a=fp("orderBy",i);return new aA(a,r)}(n,r)))}catch(a){throw jr(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new wr(this.firestore,zo(this._delegate,function(i){return vD("limit",i),new $D("limit",i,"F")}(n)))}catch(r){throw jr(r,"limit()","Query.limit()")}}limitToLast(n){try{return new wr(this.firestore,zo(this._delegate,function(i){return vD("limitToLast",i),new $D("limitToLast",i,"L")}(n)))}catch(r){throw jr(r,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new wr(this.firestore,zo(this._delegate,function(...i){return new cA("startAt",i,!0)}(...n)))}catch(r){throw jr(r,"startAt()","Query.startAt()")}}startAfter(...n){try{return new wr(this.firestore,zo(this._delegate,function(...i){return new cA("startAfter",i,!1)}(...n)))}catch(r){throw jr(r,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new wr(this.firestore,zo(this._delegate,function(...i){return new lA("endBefore",i,!0)}(...n)))}catch(r){throw jr(r,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new wr(this.firestore,zo(this._delegate,function(...i){return new lA("endAt",i,!1)}(...n)))}catch(r){throw jr(r,"endAt()","Query.endAt()")}}isEqual(n){return ID(this._delegate,n._delegate)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=vt(i,Er);const n=vt(i.firestore,an),r=Un(n),a=new kc(n);return function(i,n){const r=new Sn;return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(a=(0,ae.Z)(function*(c,h,g){try{const v=yield jf(c,h,!0),I=new rD(h,v.Gn),C=I.Io(v.documents),T=I.applyChanges(C,!1);g.resolve(T.snapshot)}catch(v){const I=Es(v,`Failed to execute query '${h} against cache`);g.reject(I)}}),function(c,h,g){return a.apply(this,arguments)})(yield fD(i),n,r);var a})),r.promise}(r,i._query).then(c=>new eu(n,a,i,c))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=vt(i,Er);const n=vt(i.firestore,an),r=Un(n),a=new kc(n);return gD(r,i._query,{source:"server"}).then(c=>new eu(n,a,i,c))}(this._delegate):function(i){i=vt(i,Er);const n=vt(i.firestore,an),r=Un(n),a=new kc(n);return VD(i._query),gD(r,i._query).then(c=>new eu(n,a,i,c))}(this._delegate),r.then(a=>new nC(this.firestore,new eu(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...n){const r=DA(n),a=CA(n,c=>new nC(this.firestore,new eu(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return vA(this._delegate,r,a)}withConverter(n){return new wr(this.firestore,this._delegate.withConverter(n?Zd.getInstance(this.firestore,n):null))}}class TA{constructor(n,r){this._firestore=n,this._delegate=r}get type(){return this._delegate.type}get doc(){return new ly(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nC{constructor(n,r){this._firestore=n,this._delegate=r}get query(){return new wr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new ly(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(r=>new TA(this._firestore,r))}forEach(n,r){this._delegate.forEach(a=>{n.call(r,new ly(this._firestore,a))})}isEqual(n){return rw(this._delegate,n._delegate)}}class yp extends wr{constructor(n,r){super(n,r),this.firestore=n,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new ii(this.firestore,n):null}doc(n){try{return new ii(this.firestore,void 0===n?xc(this._delegate):xc(this._delegate,n))}catch(r){throw jr(r,"doc()","CollectionReference.doc()")}}add(n){return function(i,n){const r=vt(i.firestore,an),a=xc(i),c=iw(i.converter,n);return pp(r,[ap(Nc(i.firestore),"addDoc",a._key,c,null!==i.converter,{}).toMutation(a._key,Rn.exists(!1))]).then(()=>a)}(this._delegate,n).then(r=>new ii(this.firestore,r))}isEqual(n){return wD(this._delegate,n._delegate)}withConverter(n){return new yp(this.firestore,this._delegate.withConverter(n?Zd.getInstance(this.firestore,n):null))}}function Fc(i){return vt(i,Nt)}class Lc{constructor(...n){this._delegate=new Js(...n)}static documentId(){return new Lc(rr.keyField().canonicalString())}isEqual(n){return(n=(0,at.m9)(n))instanceof Js&&this._delegate._internalPath.isEqual(n._internalPath)}}class Uc{constructor(n){this._delegate=n}static serverTimestamp(){const n=new cp("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new Uc(n)}static delete(){const n=new up("deleteField");return n._methodName="FieldValue.delete",new Uc(n)}static arrayUnion(...n){const r=function(...i){return new MD("arrayUnion",i)}(...n);return r._methodName="FieldValue.arrayUnion",new Uc(r)}static arrayRemove(...n){const r=function(...i){return new kD("arrayRemove",i)}(...n);return r._methodName="FieldValue.arrayRemove",new Uc(r)}static increment(n){const r=function(i){return new oy("increment",i)}(n);return r._methodName="FieldValue.increment",new Uc(r)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const SA={Firestore:eC,GeoPoint:Wo,Timestamp:On,Blob:Kd,Transaction:tC,WriteBatch:bA,DocumentReference:ii,DocumentSnapshot:mp,Query:wr,QueryDocumentSnapshot:ly,QuerySnapshot:nC,CollectionReference:yp,FieldPath:Lc,FieldValue:Uc,setLogLevel:function(i){!function(i){Fa.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,n){i.INTERNAL.registerComponent(new $l.wA("firestore-compat",r=>((n,r)=>new eC(n,r,new Cx))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},SA)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.3")}(Pi.Z);var RA=P(6682),or=P(309),xA=P(7771),lw=P(8858);class NA extends rs.xQ{constructor(n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,a){super(),this.scheduler=a,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const r=this._events;r.push(n),r.length>this._bufferSize&&r.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new PA(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const r=this._infiniteTimeWindow,a=r?this._events:this._trimBufferThenGetEvents(),c=this.scheduler,h=a.length;let g;if(this.closed)throw new Fs.N;if(this.isStopped||this.hasError?g=Yy.w.EMPTY:(this.observers.push(n),g=new lw.W(this,n)),c&&n.add(n=new or.ht(n,c)),r)for(let v=0;v<h&&!n.closed;v++)n.next(a[v]);else for(let v=0;v<h&&!n.closed;v++)n.next(a[v].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),g}_getNow(){return(this.scheduler||xA.c).now()}_trimBufferThenGetEvents(){const n=this._getNow(),r=this._bufferSize,a=this._windowTime,c=this._events,h=c.length;let g=0;for(;g<h&&!(n-c[g].time<a);)g++;return h>r&&(g=Math.max(g,h-r)),g>0&&c.splice(0,g),c}}class PA{constructor(n,r){this.time=n,this.value=r}}function dy(i,n,r){let a;return a=i&&"object"==typeof i?i:{bufferSize:i,windowTime:n,refCount:!1,scheduler:r},c=>c.lift(function({bufferSize:i=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:r,scheduler:a}){let c,g,h=0,v=!1,I=!1;return function(T){let A;h++,!c||v?(v=!1,c=new NA(i,n,a),A=c.subscribe(this),g=T.subscribe({next(O){c.next(O)},error(O){v=!0,c.error(O)},complete(){I=!0,g=void 0,c.complete()}}),I&&(g=void 0)):A=c.subscribe(this),this.add(()=>{h--,A.unsubscribe(),A=void 0,g&&!I&&r&&0===h&&(g.unsubscribe(),g=void 0,c=void 0)})}}(a))}function dw(i,n){return n?fn(()=>i,n):fn(()=>i)}var hw=P(3101),hy=P(7841);const sC=new b.OlP("angularfire2.auth.use-emulator"),oC=new b.OlP("angularfire2.auth.settings"),fy=new b.OlP("angularfire2.auth.tenant-id"),fw=new b.OlP("angularfire2.auth.langugage-code"),pw=new b.OlP("angularfire2.auth.use-device-language"),py=new b.OlP("angularfire.auth.persistence"),aC=(i,n,r,a,c,h,g,v)=>(0,Ht.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const I=n.runOutsideAngular(()=>i.auth());if(r&&I.useEmulator(...r),a&&(I.tenantId=a),I.languageCode=c,h&&I.useDeviceLanguage(),g)for(const[C,T]of Object.entries(g))I.settings[C]=T;return v&&I.setPersistence(v),I},[r,a,c,h,g,v]);let Ii=(()=>{class i{constructor(r,a,c,h,g,v,I,C,T,A,O){const M=new rs.xQ,z=(0,je.of)(void 0).pipe((0,or.QV)(g.outsideAngular),fn(()=>h.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,5841)))),(0,nt.U)(()=>(0,Ni.on)(r,h,a)),(0,nt.U)(ye=>aC(ye,h,v,C,T,A,I,O)),dy({bufferSize:1,refCount:!1}));if(lu(c))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,je.of)(null);else{z.pipe(as()).subscribe();const De=z.pipe(fn(Be=>Be.getRedirectResult().then(Ye=>Ye,()=>null)),Ht.iC,dy({bufferSize:1,refCount:!1})),qe=z.pipe(fn(Be=>new Wr.y(Ye=>({unsubscribe:h.runOutsideAngular(()=>Be.onAuthStateChanged(Xt=>Ye.next(Xt),Xt=>Ye.error(Xt),()=>Ye.complete()))})))),Ze=z.pipe(fn(Be=>new Wr.y(Ye=>({unsubscribe:h.runOutsideAngular(()=>Be.onIdTokenChanged(Xt=>Ye.next(Xt),Xt=>Ye.error(Xt),()=>Ye.complete()))}))));this.authState=De.pipe(dw(qe),(0,hw.R)(g.outsideAngular),(0,or.QV)(g.insideAngular)),this.user=De.pipe(dw(Ze),(0,hw.R)(g.outsideAngular),(0,or.QV)(g.insideAngular)),this.idToken=this.user.pipe(fn(Be=>Be?(0,$t.D)(Be.getIdToken()):(0,je.of)(null))),this.idTokenResult=this.user.pipe(fn(Be=>Be?(0,$t.D)(Be.getIdTokenResult()):(0,je.of)(null))),this.credential=(0,RA.T)(De,M,this.authState.pipe(Ai(Be=>!Be))).pipe((0,nt.U)(Be=>(null==Be?void 0:Be.user)?Be:null),(0,hw.R)(g.outsideAngular),(0,or.QV)(g.insideAngular))}return(0,Ni.pX)(this,z,h,{spy:{apply:(ye,De,qe)=>{(ye.startsWith("signIn")||ye.startsWith("createUser"))&&qe.then(Ze=>M.next(Ze))}}})}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(Ni.Dh),b.LFG(Ni.xv,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(Ht.HU),b.LFG(sC,8),b.LFG(oC,8),b.LFG(fy,8),b.LFG(fw,8),b.LFG(pw,8),b.LFG(py,8))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),OA=(()=>{class i{constructor(){hy.Z.registerVersion("angularfire",Ht.q4.full,"auth-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({providers:[Ii]}),i})();function uC(i,n){return function(i,n=R0.z){return new Wr.y(r=>{let a;return null!=n?n.schedule(()=>{a=i.onSnapshot({includeMetadataChanges:!0},r)}):a=i.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=a&&a()}})}(i,n)}function gw(i,n){return uC(i,n).pipe((0,nt.U)(r=>({payload:r,type:"query"})))}function gy(i,n){return gw(i,n).pipe(fa(void 0),C_(),(0,nt.U)(([r,a])=>{const c=a.payload.docChanges(),h=c.map(g=>({type:g.type,payload:g}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((g,v)=>{const I=c.find(T=>T.doc.ref.isEqual(g.ref)),C=null==r?void 0:r.payload.docs.find(T=>T.ref.isEqual(g.ref));I&&JSON.stringify(I.doc.metadata)===JSON.stringify(g.metadata)||!I&&C&&JSON.stringify(C.metadata)===JSON.stringify(g.metadata)||h.push({type:"modified",payload:{oldIndex:v,newIndex:v,type:"modified",doc:g}})}),h}))}function cC(i,n,r){return gy(i,r).pipe(pa((a,c)=>function(i,n,r){return n.forEach(a=>{r.indexOf(a.type)>-1&&(i=function(i,n){switch(n.type){case"added":if(!i[n.newIndex]||!i[n.newIndex].doc.ref.isEqual(n.doc.ref))return mw(i,n.newIndex,0,n);break;case"modified":if(null==i[n.oldIndex]||i[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const r=i.slice();return r.splice(n.oldIndex,1),r.splice(n.newIndex,0,n),r}return mw(i,n.newIndex,1,n)}break;case"removed":if(i[n.oldIndex]&&i[n.oldIndex].doc.ref.isEqual(n.doc.ref))return mw(i,n.oldIndex,1)}return i}(i,a))}),i}(a,c.map(h=>h.payload),n),[]),r=>r.lift(new dT(void 0,void 0)),(0,nt.U)(a=>a.map(c=>({type:c.type,payload:c}))))}function mw(i,n,r,...a){const c=i.slice();return c.splice(n,r,...a),c}function dC(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class hC{constructor(n,r,a){this.ref=n,this.query=r,this.afs=a}stateChanges(n){let r=gy(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(r=r.pipe((0,nt.U)(a=>a.filter(c=>n.indexOf(c.type)>-1)))),r.pipe(fa(void 0),C_(),Ai(([a,c])=>c.length>0||!a),(0,nt.U)(([a,c])=>c),Ht.iC)}auditTrail(n){return this.stateChanges(n).pipe(pa((r,a)=>[...r,...a],[]))}snapshotChanges(n){const r=dC(n);return cC(this.query,r,this.afs.schedulers.outsideAngular).pipe(Ht.iC)}valueChanges(n={}){return gw(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(r=>r.payload.docs.map(a=>n.idField?Object.assign(Object.assign({},a.data()),{[n.idField]:a.id}):a.data())),Ht.iC)}get(n){return(0,$t.D)(this.query.get(n)).pipe(Ht.iC)}add(n){return this.ref.add(n)}doc(n){return new yw(this.ref.doc(n),this.afs)}}class yw{constructor(n,r){this.ref=n,this.afs=r}set(n,r){return this.ref.set(n,r)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,r){const a=this.ref.collection(n),{ref:c,query:h}=pC(a,r);return new hC(c,h,this.afs)}snapshotChanges(){return function(i,n){return uC(i,n).pipe(fa(void 0),C_(),(0,nt.U)(([r,a])=>a.exists?(null==r?void 0:r.exists)?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ht.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,nt.U)(({payload:r})=>n.idField?Object.assign(Object.assign({},r.data()),{[n.idField]:r.id}):r.data()))}get(n){return(0,$t.D)(this.ref.get(n)).pipe(Ht.iC)}}class MA{constructor(n,r){this.query=n,this.afs=r}stateChanges(n){return n&&0!==n.length?gy(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(r=>r.filter(a=>n.indexOf(a.type)>-1)),Ai(r=>r.length>0),Ht.iC):gy(this.query,this.afs.schedulers.outsideAngular).pipe(Ht.iC)}auditTrail(n){return this.stateChanges(n).pipe(pa((r,a)=>[...r,...a],[]))}snapshotChanges(n){const r=dC(n);return cC(this.query,r,this.afs.schedulers.outsideAngular).pipe(Ht.iC)}valueChanges(n={}){return gw(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(a=>a.payload.docs.map(c=>n.idField?Object.assign({[n.idField]:c.id},c.data()):c.data())),Ht.iC)}get(n){return(0,$t.D)(this.query.get(n)).pipe(Ht.iC)}}const kA=new b.OlP("angularfire2.enableFirestorePersistence"),_w=new b.OlP("angularfire2.firestore.persistenceSettings"),fC=new b.OlP("angularfire2.firestore.settings"),FA=new b.OlP("angularfire2.firestore.use-emulator");function pC(i,n=(r=>r)){return{query:n(i),ref:i}}let gC=(()=>{class i{constructor(r,a,c,h,g,v,I,C,T,A,O,M,z,ye,De,qe){this.schedulers=I;const Ze=(0,Ni.on)(r,v,a),Be=T;A&&aC(Ze,v,O,z,ye,De,M,qe),[this.firestore,this.persistenceEnabled$]=(0,Ht.cc)(`${Ze.name}.firestore`,"AngularFirestore",Ze.name,()=>{const Ye=v.runOutsideAngular(()=>Ze.firestore());if(h&&Ye.settings(h),Be&&Ye.useEmulator(...Be),c&&!lu(g)){const Xt=()=>{try{return(0,$t.D)(Ye.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Di){return"undefined"!=typeof console&&console.warn(Di),(0,je.of)(!1)}};return[Ye,v.runOutsideAngular(Xt)]}return[Ye,(0,je.of)(!1)]},[h,Be,c])}collection(r,a){let c;c="string"==typeof r?this.firestore.collection(r):r;const{ref:h,query:g}=pC(c,a),v=this.schedulers.ngZone.run(()=>h);return new hC(v,g,this)}collectionGroup(r,a){const c=a||(g=>g),h=this.firestore.collectionGroup(r);return new MA(c(h),this)}doc(r){let a;a="string"==typeof r?this.firestore.doc(r):r;const c=this.schedulers.ngZone.run(()=>a);return new yw(c,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(Ni.Dh),b.LFG(Ni.xv,8),b.LFG(kA,8),b.LFG(fC,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(Ht.HU),b.LFG(_w,8),b.LFG(FA,8),b.LFG(Ii,8),b.LFG(sC,8),b.LFG(oC,8),b.LFG(fy,8),b.LFG(fw,8),b.LFG(pw,8),b.LFG(py,8))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),_p=(()=>{class i{constructor(){hy.Z.registerVersion("angularfire",Ht.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:i,providers:[{provide:kA,useValue:!0},{provide:_w,useValue:r}]}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({providers:[gC]}),i})();class mC{constructor(n,r){this.dueTime=n,this.scheduler=r}call(n,r){return r.subscribe(new LA(n,this.dueTime,this.scheduler))}}class LA extends Jn.L{constructor(n,r,a){super(n),this.dueTime=r,this.scheduler=a,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(UA,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function UA(i){i.debouncedNext()}var Vc=(()=>(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"}(Vc||(Vc={})),Vc))();const VA="firebasestorage.googleapis.com",BA="storageBucket";class yn extends at.ZR{constructor(n,r){super(Ew(n),`Firebase Storage: ${r} (${Ew(n)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yn.prototype)}_codeEquals(n){return Ew(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ew(i){return"storage/"+i}function ww(){return new yn("unknown","An unknown error occurred, please check the error payload for server response.")}function Vn(){return new yn("canceled","User canceled the upload/download.")}function IC(){return new yn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function HA(){return new yn("no-download-url","The given file does not have any download URLs.")}function Yd(i){return new yn("invalid-argument",i)}function bw(){return new yn("app-deleted","The Firebase app was deleted.")}function tu(i){return new yn("invalid-root-operation","The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qd(i,n){return new yn("invalid-format","String does not match format '"+i+"': "+n)}function Jd(i){throw new yn("internal-error","Internal error: "+i)}class Dw{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Vc.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vc.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vc.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,r,a,c){if(this.sent_)throw Jd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,n,!0),void 0!==c)for(const h in c)c.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,c[h].toString());return void 0!==a?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jd("cannot .getStatus() before sending");try{return this.xhr_.status}catch(n){return-1}}getResponseText(){if(!this.sent_)throw Jd("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class yy{createConnection(){return new Dw}}class Ir{constructor(n,r){this.bucket=n,this.path_=r}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,r){let a;try{a=Ir.makeFromUrl(n,r)}catch(c){return new Ir(n,"")}if(""===a.path)return a;throw function(i){return new yn("invalid-default-bucket","Invalid default bucket '"+i+"'.")}(n)}static makeFromUrl(n,r){let a=null;const c="([A-Za-z0-9.\\-_]+)",v=new RegExp("^gs://"+c+"(/(.*))?$","i");function C(Ye){Ye.path_=decodeURIComponent(Ye.path)}const A=r.replace(/[.]/g,"\\."),Be=[{regex:v,indices:{bucket:1,path:3},postModify:function(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${c}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:C},{regex:new RegExp(`^https?://${r===VA?"(?:storage.googleapis.com|storage.cloud.google.com)":r}/${c}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:C}];for(let Ye=0;Ye<Be.length;Ye++){const Xt=Be[Ye],Di=Xt.regex.exec(n);if(Di){let Wc=Di[Xt.indices.path];Wc||(Wc=""),a=new Ir(Di[Xt.indices.bucket],Wc),Xt.postModify(a);break}}if(null==a)throw function(i){return new yn("invalid-url","Invalid URL '"+i+"'.")}(n);return a}}class Cw{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function Tw(i){return"string"==typeof i||i instanceof String}function vp(i){return Sw()&&i instanceof Blob}function Sw(){return"undefined"!=typeof Blob}function DC(i,n,r,a){if(a<n)throw Yd(`Invalid value for '${i}'. Expected ${n} or greater.`);if(a>r)throw Yd(`Invalid value for '${i}'. Expected ${r} or less.`)}function Bc(i,n,r){let a=n;return null==r&&(a=`https://${n}`),`${r}://${a}/v0${i}`}function zA(i){const n=encodeURIComponent;let r="?";for(const a in i)i.hasOwnProperty(a)&&(r=r+(n(a)+"=")+n(i[a])+"&");return r=r.slice(0,-1),r}class KA{constructor(n,r,a,c,h,g,v,I,C,T,A){this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=n,this.method_=r,this.headers_=a,this.body_=c,this.successCodes_=h.slice(),this.additionalRetryCodes_=g.slice(),this.callback_=v,this.errorCallback_=I,this.progressCallback_=T,this.timeout_=C,this.pool_=A,this.promise_=new Promise((O,M)=>{this.resolve_=O,this.reject_=M,this.start_()})}start_(){const n=this;function a(c,h){const g=n.resolve_,v=n.reject_,I=h.connection;if(h.wasSuccessCode)try{const C=n.callback_(I,I.getResponseText());!function(i){return void 0!==i}(C)?g():g(C)}catch(C){v(C)}else if(null!==I){const C=ww();C.serverResponse=I.getResponseText(),v(n.errorCallback_?n.errorCallback_(I,C):C)}else v(h.canceled?n.appDelete_?bw():Vn():new yn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?a(0,new _y(!1,null,!0)):this.backoffId_=function(i,n,r){let a=1,c=null,h=!1,g=0;function v(){return 2===g}let I=!1;function C(...z){I||(I=!0,n.apply(null,z))}function T(z){c=setTimeout(()=>{c=null,i(A,v())},z)}function A(z,...ye){if(I)return;if(z)return void C.call(null,z,...ye);if(v()||h)return void C.call(null,z,...ye);let qe;a<64&&(a*=2),1===g?(g=2,qe=0):qe=1e3*(a+Math.random()),T(qe)}let O=!1;function M(z){O||(O=!0,!I&&(null!==c?(z||(g=2),clearTimeout(c),T(0)):z||(g=1)))}return T(0),setTimeout(()=>{h=!0,M(!0)},r),M}(function(c,h){if(h)return void c(!1,new _y(!1,null,!0));const g=n.pool_.createConnection();function v(I){null!==n.progressCallback_&&n.progressCallback_(I.loaded,I.lengthComputable?I.total:-1)}n.pendingConnection_=g,null!==n.progressCallback_&&g.addUploadProgressListener(v),g.send(n.url_,n.method_,n.body_,n.headers_).then(()=>{null!==n.progressCallback_&&g.removeUploadProgressListener(v),n.pendingConnection_=null;const I=g.getErrorCode()===Vc.NO_ERROR,C=g.getStatus();if(!I||n.isRetryStatusCode_(C)){const A=g.getErrorCode()===Vc.ABORT;return void c(!1,new _y(!1,null,A))}const T=-1!==n.successCodes_.indexOf(C);c(!0,new _y(T,g))})},a,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(n){const r=n>=500&&n<600,c=-1!==[408,429].indexOf(n),h=-1!==this.additionalRetryCodes_.indexOf(n);return r||c||h}}class _y{constructor(n,r,a){this.wasSuccessCode=n,this.connection=r,this.canceled=!!a}}function eR(...i){const n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){const r=new n;for(let a=0;a<i.length;a++)r.append(i[a]);return r.getBlob()}if(Sw())return new Blob(i);throw new yn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const bi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Aw{constructor(n,r){this.data=n,this.contentType=r||null}}function Rw(i,n){switch(i){case bi.RAW:return new Aw(CC(n));case bi.BASE64:case bi.BASE64URL:return new Aw(Zi(i,n));case bi.DATA_URL:return new Aw(function(i){const n=new TC(i);return n.base64?Zi(bi.BASE64,n.rest):function(i){let n;try{n=decodeURIComponent(i)}catch(r){throw Qd(bi.DATA_URL,"Malformed data URL.")}return CC(n)}(n.rest)}(n),function(i){return new TC(i).contentType}(n))}throw ww()}function CC(i){const n=[];for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<=127?n.push(a):a<=2047?n.push(192|a>>6,128|63&a):55296==(64512&a)?r<i.length-1&&56320==(64512&i.charCodeAt(r+1))?(a=65536|(1023&a)<<10|1023&i.charCodeAt(++r),n.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|63&a)):n.push(239,191,189):56320==(64512&a)?n.push(239,191,189):n.push(224|a>>12,128|a>>6&63,128|63&a)}return new Uint8Array(n)}function Zi(i,n){switch(i){case bi.BASE64:{const c=-1!==n.indexOf("-"),h=-1!==n.indexOf("_");if(c||h)throw Qd(i,"Invalid character '"+(c?"-":"_")+"' found: is it base64url encoded?");break}case bi.BASE64URL:{const c=-1!==n.indexOf("+"),h=-1!==n.indexOf("/");if(c||h)throw Qd(i,"Invalid character '"+(c?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=function(i){return atob(i)}(n)}catch(c){throw Qd(i,"Invalid character found")}const a=new Uint8Array(r.length);for(let c=0;c<r.length;c++)a[c]=r.charCodeAt(c);return a}class TC{constructor(n){this.base64=!1,this.contentType=null;const r=n.match(/^data:([^,]+)?,/);if(null===r)throw Qd(bi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=r[1]||null;null!=a&&(this.base64=function(i,n){return i.length>=n.length&&i.substring(i.length-n.length)===n}(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-";base64".length):a),this.rest=n.substring(n.indexOf(",")+1)}}class Ko{constructor(n,r){let a=0,c="";vp(n)?(this.data_=n,a=n.size,c=n.type):n instanceof ArrayBuffer?(r?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),a=this.data_.length):n instanceof Uint8Array&&(r?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),a=n.length),this.size_=a,this.type_=c}size(){return this.size_}type(){return this.type_}slice(n,r){if(vp(this.data_)){const c=function(i,n,r){return i.webkitSlice?i.webkitSlice(n,r):i.mozSlice?i.mozSlice(n,r):i.slice?i.slice(n,r):null}(this.data_,n,r);return null===c?null:new Ko(c)}{const a=new Uint8Array(this.data_.buffer,n,r-n);return new Ko(a,!0)}}static getBlob(...n){if(Sw()){const r=n.map(a=>a instanceof Ko?a.data_:a);return new Ko(eR.apply(null,r))}{const r=n.map(g=>Tw(g)?Rw(bi.RAW,g).data:g.data_);let a=0;r.forEach(g=>{a+=g.byteLength});const c=new Uint8Array(a);let h=0;return r.forEach(g=>{for(let v=0;v<g.length;v++)c[h++]=g[v]}),new Ko(c,!0)}}uploadData(){return this.data_}}function xw(i){let n;try{n=JSON.parse(i)}catch(r){return null}return function(i){return"object"==typeof i&&!Array.isArray(i)}(n)?n:null}function Xd(i){const n=i.lastIndexOf("/",i.length-2);return-1===n?i:i.slice(n+1)}function SC(i,n){return n}class si{constructor(n,r,a,c){this.server=n,this.local=r||n,this.writable=!!a,this.xform=c||SC}}let vy=null;function Ey(){if(vy)return vy;const i=[];i.push(new si("bucket")),i.push(new si("generation")),i.push(new si("metageneration")),i.push(new si("name","fullPath",!0));const r=new si("name");r.xform=function(h,g){return function(i){return!Tw(i)||i.length<2?i:Xd(i)}(g)},i.push(r);const c=new si("size");return c.xform=function(h,g){return void 0!==g?Number(g):g},i.push(c),i.push(new si("timeCreated")),i.push(new si("updated")),i.push(new si("md5Hash",null,!0)),i.push(new si("cacheControl",null,!0)),i.push(new si("contentDisposition",null,!0)),i.push(new si("contentEncoding",null,!0)),i.push(new si("contentLanguage",null,!0)),i.push(new si("contentType",null,!0)),i.push(new si("metadata","customMetadata",!0)),vy=i,vy}function AC(i,n,r){const a=xw(n);return null===a?null:function(i,n,r){const a={type:"file"},c=r.length;for(let h=0;h<c;h++){const g=r[h];a[g.local]=g.xform(a,n[g.server])}return function(i,n){Object.defineProperty(i,"ref",{get:function(){const h=new Ir(i.bucket,i.fullPath);return n._makeStorageReference(h)}})}(a,i),a}(i,a,r)}function Pw(i,n){const r={},a=n.length;for(let c=0;c<a;c++){const h=n[c];h.writable&&(r[h.server]=i[h.local])}return JSON.stringify(r)}const uR="prefixes";class Bn{constructor(n,r,a,c){this.url=n,this.method=r,this.handler=a,this.timeout=c,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Zo(i){if(!i)throw ww()}function Ep(i,n){return function(a,c){const h=AC(i,c,n);return Zo(null!==h),h}}function jc(i){return function(r,a){let c;return c=401===r.getStatus()?r.getResponseText().includes("Firebase App Check token is invalid")?new yn("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new yn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===r.getStatus()?function(i){return new yn("quota-exceeded","Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===r.getStatus()?function(i){return new yn("unauthorized","User does not have permission to access '"+i+"'.")}(i.path):a,c.serverResponse=a.serverResponse,c}}function wp(i){const n=jc(i);return function(a,c){let h=n(a,c);return 404===a.getStatus()&&(h=function(i){return new yn("object-not-found","Object '"+i+"' does not exist.")}(i.path)),h.serverResponse=c.serverResponse,h}}function wy(i,n,r){const c=Bc(n.fullServerUrl(),i.host,i._protocol),g=i.maxOperationRetryTime,v=new Bn(c,"GET",Ep(i,r),g);return v.errorHandler=wp(n),v}function Ow(i,n,r,a,c){const h={};h.prefix=n.isRoot?"":n.path+"/",r&&r.length>0&&(h.delimiter=r),a&&(h.pageToken=a),c&&(h.maxResults=c);const v=Bc(n.bucketOnlyServerUrl(),i.host,i._protocol),C=i.maxOperationRetryTime,T=new Bn(v,"GET",function(i,n){return function(a,c){const h=function(i,n,r){const a=xw(r);return null===a?null:function(i,n,r){const a={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[uR])for(const c of r[uR]){const h=c.replace(/\/$/,""),g=i._makeStorageReference(new Ir(n,h));a.prefixes.push(g)}if(r.items)for(const c of r.items){const h=i._makeStorageReference(new Ir(n,c.name));a.items.push(h)}return a}(i,n,a)}(i,n,c);return Zo(null!==h),h}}(i,n.bucket),C);return T.urlParams=h,T.errorHandler=jc(n),T}function Mw(i,n,r){const c=Bc(n.fullServerUrl(),i.host,i._protocol),g=i.maxOperationRetryTime,v=new Bn(c,"GET",function(i,n){return function(a,c){const h=AC(i,c,n);return Zo(null!==h),function(i,n,r,a){const c=xw(n);if(null===c||!Tw(c.downloadTokens))return null;const h=c.downloadTokens;if(0===h.length)return null;const g=encodeURIComponent;return h.split(",").map(C=>{const A=i.fullPath;return Bc("/b/"+g(i.bucket)+"/o/"+g(A),r,a)+zA({alt:"media",token:C})})[0]}(h,c,i.host,i._protocol)}}(i,r),g);return v.errorHandler=wp(n),v}function Iy(i,n,r,a){const h=Bc(n.fullServerUrl(),i.host,i._protocol),v=Pw(r,a),C=i.maxOperationRetryTime,T=new Bn(h,"PATCH",Ep(i,a),C);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=v,T.errorHandler=wp(n),T}function by(i,n){const a=Bc(n.fullServerUrl(),i.host,i._protocol),v=new Bn(a,"DELETE",function(I,C){},i.maxOperationRetryTime);return v.successCodes=[200,204],v.errorHandler=wp(n),v}function kw(i,n,r){const a=Object.assign({},r);return a.fullPath=i.path,a.size=n.size(),a.contentType||(a.contentType=function(i,n){return n&&n.type()||"application/octet-stream"}(0,n)),a}class Dy{constructor(n,r,a,c){this.current=n,this.total=r,this.finalized=!!a,this.metadata=c||null}}function Cy(i,n){let r=null;try{r=i.getResponseHeader("X-Goog-Upload-Status")}catch(c){Zo(!1)}return Zo(!!r&&-1!==(n||["active"]).indexOf(r)),r}const pR={STATE_CHANGED:"state_changed"},Pt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $c(i){switch(i){case"running":case"pausing":case"canceling":return Pt.RUNNING;case"paused":return Pt.PAUSED;case"success":return Pt.SUCCESS;case"canceled":return Pt.CANCELED;case"error":default:return Pt.ERROR}}class Ty{constructor(n,r,a){if(function(i){return"function"==typeof i}(n)||null!=r||null!=a)this.next=n,this.error=null!=r?r:void 0,this.complete=null!=a?a:void 0;else{const h=n;this.next=h.next,this.error=h.error,this.complete=h.complete}}}function Hc(i){return(...n)=>{Promise.resolve().then(()=>i(...n))}}class Ip{constructor(n,r,a=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=r,this._metadata=a,this._mappings=Ey(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=c=>{this._request=void 0,this._chunkMultiplier=1,c._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=c,this._transition("error"))},this._metadataErrorHandler=c=>{this._request=void 0,c._codeEquals("canceled")?this.completeTransitions_():(this._error=c,this._transition("error"))},this._promise=new Promise((c,h)=>{this._resolve=c,this._reject=h,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const n=this._transferred;return r=>this._updateProgress(n+r)}_shouldDoResumable(n){return n.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(n){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,a])=>{switch(this._state){case"running":n(r,a);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((n,r)=>{const a=function(i,n,r,a,c){const h=n.bucketOnlyServerUrl(),g=kw(n,a,c),v={name:g.fullPath},I=Bc(h,i.host,i._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${a.size()}`,"X-Goog-Upload-Header-Content-Type":g.contentType,"Content-Type":"application/json; charset=utf-8"},A=Pw(g,r),z=new Bn(I,"POST",function(ye){let De;Cy(ye);try{De=ye.getResponseHeader("X-Goog-Upload-URL")}catch(qe){Zo(!1)}return Zo(Tw(De)),De},i.maxUploadRetryTime);return z.urlParams=v,z.headers=T,z.body=A,z.errorHandler=jc(n),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),c=this._ref.storage._makeRequest(a,n,r);this._request=c,c.getPromise().then(h=>{this._request=void 0,this._uploadUrl=h,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const n=this._uploadUrl;this._resolveToken((r,a)=>{const c=function(i,n,r,a){const I=new Bn(r,"POST",function(C){const T=Cy(C,["active","final"]);let A=null;try{A=C.getResponseHeader("X-Goog-Upload-Size-Received")}catch(M){Zo(!1)}A||Zo(!1);const O=Number(A);return Zo(!isNaN(O)),new Dy(O,a.size(),"final"===T)},i.maxUploadRetryTime);return I.headers={"X-Goog-Upload-Command":"query"},I.errorHandler=jc(n),I}(this._ref.storage,this._ref._location,n,this._blob),h=this._ref.storage._makeRequest(c,r,a);this._request=h,h.getPromise().then(g=>{g=g,this._request=void 0,this._updateProgress(g.current),this._needToFetchStatus=!1,g.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const n=262144*this._chunkMultiplier,r=new Dy(this._transferred,this._blob.size()),a=this._uploadUrl;this._resolveToken((c,h)=>{let g;try{g=function(i,n,r,a,c,h,g,v){const I=new Dy(0,0);if(g?(I.current=g.current,I.total=g.total):(I.current=0,I.total=a.size()),a.size()!==I.total)throw new yn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const C=I.total-I.current;let T=C;c>0&&(T=Math.min(T,c));const A=I.current,z={"X-Goog-Upload-Command":T===C?"upload, finalize":"upload","X-Goog-Upload-Offset":`${I.current}`},ye=a.slice(A,A+T);if(null===ye)throw IC();const Be=new Bn(r,"POST",function(Ye,Xt){const Di=Cy(Ye,["active","final"]),Tp=I.current+T,Wc=a.size();let OR;return OR="final"===Di?Ep(n,h)(Ye,Xt):null,new Dy(Tp,Wc,"final"===Di,OR)},n.maxUploadRetryTime);return Be.headers=z,Be.body=ye.uploadData(),Be.progressCallback=v||null,Be.errorHandler=jc(i),Be}(this._ref._location,this._ref.storage,a,this._blob,n,this._mappings,r,this._makeProgressCallback())}catch(I){return this._error=I,void this._transition("error")}const v=this._ref.storage._makeRequest(g,c,h);this._request=v,v.getPromise().then(I=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(I.current),I.finalized?(this._metadata=I.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((n,r)=>{const a=wy(this._ref.storage,this._ref._location,this._mappings),c=this._ref.storage._makeRequest(a,n,r);this._request=c,c.getPromise().then(h=>{this._request=void 0,this._metadata=h,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((n,r)=>{const a=function(i,n,r,a,c){const h=n.bucketOnlyServerUrl(),g={"X-Goog-Upload-Protocol":"multipart"},I=function(){let Be="";for(let Ye=0;Ye<2;Ye++)Be+=Math.random().toString().slice(2);return Be}();g["Content-Type"]="multipart/related; boundary="+I;const C=kw(n,a,c),T=Pw(C,r),M=Ko.getBlob("--"+I+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+I+"\r\nContent-Type: "+C.contentType+"\r\n\r\n",a,"\r\n--"+I+"--");if(null===M)throw IC();const z={name:C.fullPath},ye=Bc(h,i.host,i._protocol),qe=i.maxUploadRetryTime,Ze=new Bn(ye,"POST",Ep(i,r),qe);return Ze.urlParams=z,Ze.headers=g,Ze.body=M.uploadData(),Ze.errorHandler=jc(n),Ze}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),c=this._ref.storage._makeRequest(a,n,r);this._request=c,c.getPromise().then(h=>{this._request=void 0,this._metadata=h,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(n){const r=this._transferred;this._transferred=n,this._transferred!==r&&this._notifyObservers()}_transition(n){if(this._state!==n)switch(n){case"canceling":case"pausing":this._state=n,void 0!==this._request&&this._request.cancel();break;case"running":const r="paused"===this._state;this._state=n,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=n,this._notifyObservers();break;case"canceled":this._error=Vn(),this._state=n,this._notifyObservers();break;case"error":case"success":this._state=n,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const n=$c(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:n,metadata:this._metadata,task:this,ref:this._ref}}on(n,r,a,c){const h=new Ty(r||void 0,a||void 0,c||void 0);return this._addObserver(h),()=>{this._removeObserver(h)}}then(n,r){return this._promise.then(n,r)}catch(n){return this.then(null,n)}_addObserver(n){this._observers.push(n),this._notifyObserver(n)}_removeObserver(n){const r=this._observers.indexOf(n);-1!==r&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(void 0!==this._resolve){let n=!0;switch($c(this._state)){case Pt.SUCCESS:Hc(this._resolve.bind(null,this.snapshot))();break;case Pt.CANCELED:case Pt.ERROR:Hc(this._reject.bind(null,this._error))();break;default:n=!1}n&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(n){switch($c(this._state)){case Pt.RUNNING:case Pt.PAUSED:n.next&&Hc(n.next.bind(n,this.snapshot))();break;case Pt.SUCCESS:n.complete&&Hc(n.complete.bind(n))();break;case Pt.CANCELED:case Pt.ERROR:n.error&&Hc(n.error.bind(n,this._error))();break;default:n.error&&Hc(n.error.bind(n,this._error))()}}resume(){const n="paused"===this._state||"pausing"===this._state;return n&&this._transition("running"),n}pause(){const n="running"===this._state;return n&&this._transition("pausing"),n}cancel(){const n="running"===this._state||"pausing"===this._state;return n&&this._transition("canceling"),n}}class Yo{constructor(n,r){this._service=n,this._location=r instanceof Ir?r:Ir.makeFromUrl(r,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,r){return new Yo(n,r)}get root(){const n=new Ir(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xd(this._location.path)}get storage(){return this._service}get parent(){const n=function(i){if(0===i.length)return null;const n=i.lastIndexOf("/");return-1===n?"":i.slice(0,n)}(this._location.path);if(null===n)return null;const r=new Ir(this._location.bucket,n);return new Yo(this._service,r)}_throwIfRoot(n){if(""===this._location.path)throw tu(n)}}function MC(i,n,r){return Uw.apply(this,arguments)}function Uw(){return(Uw=(0,ae.Z)(function*(i,n,r){const c=yield Vw(i,{pageToken:r});n.prefixes.push(...c.prefixes),n.items.push(...c.items),null!=c.nextPageToken&&(yield MC(i,n,c.nextPageToken))})).apply(this,arguments)}function Vw(i,n){return Bw.apply(this,arguments)}function Bw(){return(Bw=(0,ae.Z)(function*(i,n){null!=n&&"number"==typeof n.maxResults&&DC("options.maxResults",1,1e3,n.maxResults);const r=n||{},a=Ow(i.storage,i._location,"/",r.pageToken,r.maxResults);return(yield i.storage.makeRequestWithTokens(a)).getPromise()})).apply(this,arguments)}function jw(){return(jw=(0,ae.Z)(function*(i){i._throwIfRoot("getMetadata");const n=wy(i.storage,i._location,Ey());return(yield i.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function Gc(){return(Gc=(0,ae.Z)(function*(i,n){i._throwIfRoot("updateMetadata");const r=Iy(i.storage,i._location,n,Ey());return(yield i.storage.makeRequestWithTokens(r)).getPromise()})).apply(this,arguments)}function Hw(){return(Hw=(0,ae.Z)(function*(i){i._throwIfRoot("getDownloadURL");const n=Mw(i.storage,i._location,Ey());return(yield i.storage.makeRequestWithTokens(n)).getPromise().then(r=>{if(null===r)throw HA();return r})})).apply(this,arguments)}function Gw(){return(Gw=(0,ae.Z)(function*(i){i._throwIfRoot("deleteObject");const n=by(i.storage,i._location);return(yield i.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function Ay(i,n){const r=function(i,n){const r=n.split("/").filter(a=>a.length>0).join("/");return 0===i.length?r:i+"/"+r}(i._location.path,n),a=new Ir(i._location.bucket,r);return new Yo(i.storage,a)}function qw(i,n){if(i instanceof Is){const r=i;if(null==r._bucket)throw new yn("no-default-bucket","No default bucket found. Did you set the '"+BA+"' property when initializing the app?");const a=new Yo(r,r._bucket);return null!=n?qw(a,n):a}return void 0!==n?Ay(i,n):i}function ER(i,n){if(n&&function(i){return/^[A-Za-z]+:\/\//.test(i)}(n)){if(i instanceof Is)return function(i,n){return new Yo(i,n)}(i,n);throw Yd("To use ref(service, url), the first argument must be a Storage instance.")}return qw(i,n)}function FC(i,n){const r=null==n?void 0:n[BA];return null==r?null:Ir.makeFromBucketSpec(r,i)}class Is{constructor(n,r,a,c,h,g){this.app=n,this._authProvider=r,this._appCheckProvider=a,this._pool=c,this._url=h,this._firebaseVersion=g,this._bucket=null,this._host=VA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=h?Ir.makeFromBucketSpec(h,this._host):FC(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?Ir.makeFromBucketSpec(this._url,n):FC(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){DC("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){DC("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return(0,ae.Z)(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const r=n._authProvider.getImmediate({optional:!0});if(r){const a=yield r.getToken();if(null!==a)return a.accessToken}return null})()}_getAppCheckToken(){var n=this;return(0,ae.Z)(function*(){const r=n._appCheckProvider.getImmediate({optional:!0});return r?(yield r.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new Yo(this,n)}_makeRequest(n,r,a){if(this._deleted)return new Cw(bw());{const c=function(i,n,r,a,c,h){const g=zA(i.urlParams),v=i.url+g,I=Object.assign({},i.headers);return function(i,n){n&&(i["X-Firebase-GMPID"]=n)}(I,n),function(i,n){null!==n&&n.length>0&&(i.Authorization="Firebase "+n)}(I,r),function(i,n){i["X-Firebase-Storage-Version"]="webjs/"+(null!=n?n:"AppManager")}(I,h),function(i,n){null!==n&&(i["X-Firebase-AppCheck"]=n)}(I,a),new KA(v,i.method,I,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,c)}(n,this._appId,r,a,this._pool,this._firebaseVersion);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(n){var r=this;return(0,ae.Z)(function*(){const[a,c]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(n,a,c)})()}}function jC(i,n){return ER(i=(0,at.m9)(i),n)}(0,jl._registerComponent)(new $l.wA("storage",function(i,{instanceIdentifier:n}){const r=i.getProvider("app").getImmediate(),a=i.getProvider("auth-internal"),c=i.getProvider("app-check-internal");return new Is(r,a,c,new yy,n,jl.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,jl.registerVersion)("@firebase/storage","0.8.3");class Ry{constructor(n,r,a){this._delegate=n,this.task=r,this.ref=a}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class SR{constructor(n,r){this._delegate=n,this._ref=r,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ry(this._delegate.snapshot,this,this._ref)}then(n,r){return this._delegate.then(a=>{if(n)return n(new Ry(a,this,this._ref))},r)}on(n,r,a,c){let h;return r&&(h="function"==typeof r?g=>r(new Ry(g,this,this._ref)):{next:r.next?g=>r.next(new Ry(g,this,this._ref)):void 0,complete:r.complete||void 0,error:r.error||void 0}),this._delegate.on(n,h,a||void 0,c||void 0)}}class AR{constructor(n,r){this._delegate=n,this._service=r}get prefixes(){return this._delegate.prefixes.map(n=>new ru(n,this._service))}get items(){return this._delegate.items.map(n=>new ru(n,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ru{constructor(n,r){this._delegate=n,this.storage=r}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(n){const r=function(i,n){return Ay(i,n)}(this._delegate,n);return new ru(r,this.storage)}get root(){return new ru(this._delegate.root,this.storage)}get parent(){const n=this._delegate.parent;return null==n?null:new ru(n,this.storage)}put(n,r){return this._throwIfRoot("put"),new SR(function(i,n,r){return function(i,n,r){return i._throwIfRoot("uploadBytesResumable"),new Ip(i,new Ko(n),r)}(i=(0,at.m9)(i),n,r)}(this._delegate,n,r),this)}putString(n,r=bi.RAW,a){this._throwIfRoot("putString");const c=Rw(r,n),h=Object.assign({},a);return null==h.contentType&&null!=c.contentType&&(h.contentType=c.contentType),new SR(new Ip(this._delegate,new Ko(c.data,!0),h),this)}listAll(){return function(i){return function(i){const n={prefixes:[],items:[]};return MC(i,n).then(()=>n)}(i=(0,at.m9)(i))}(this._delegate).then(n=>new AR(n,this.storage))}list(n){return function(i,n){return Vw(i=(0,at.m9)(i),n)}(this._delegate,n||void 0).then(r=>new AR(r,this.storage))}getMetadata(){return function(i){return function(i){return jw.apply(this,arguments)}(i=(0,at.m9)(i))}(this._delegate)}updateMetadata(n){return function(i,n){return function(i,n){return Gc.apply(this,arguments)}(i=(0,at.m9)(i),n)}(this._delegate,n)}getDownloadURL(){return function(i){return function(i){return Hw.apply(this,arguments)}(i=(0,at.m9)(i))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(i){return function(i){return Gw.apply(this,arguments)}(i=(0,at.m9)(i))}(this._delegate)}_throwIfRoot(n){if(""===this._delegate._location.path)throw tu(n)}}class RR{constructor(n,r){this.app=n,this._delegate=r}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(n){if($C(n))throw Yd("ref() expected a child path but got a URL, use refFromURL instead.");return new ru(jC(this._delegate,n),this)}refFromURL(n){if(!$C(n))throw Yd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ir.makeFromUrl(n,this._delegate.host)}catch(r){throw Yd("refFromUrl() expected a valid full URL but got an invalid one.")}return new ru(jC(this._delegate,n),this)}setMaxUploadRetryTime(n){this._delegate.maxUploadRetryTime=n}setMaxOperationRetryTime(n){this._delegate.maxOperationRetryTime=n}useEmulator(n,r,a={}){!function(i,n,r,a={}){!function(i,n,r,a={}){i.host=`${n}:${r}`,i._protocol="http";const{mockUserToken:c}=a;c&&(i._overrideAuthToken="string"==typeof c?c:(0,at.Sg)(c,i.app.options.projectId))}(i,n,r,a)}(this._delegate,n,r,a)}}function $C(i){return/^[A-Za-z]+:\/\//.test(i)}function jx(i,{instanceIdentifier:n}){const r=i.getProvider("app-compat").getImmediate(),a=i.getProvider("storage").getImmediate({identifier:n});return new RR(r,a)}function PR(i){const n=function(i){return new Wr.y(n=>{const r=g=>n.next(g);r(i.snapshot);const h=i.on("state_changed",r);return i.then(g=>{r(g),n.complete()},g=>{r(i.snapshot),(g=>{n.error(g)})(g)}),function(){h()}}).pipe(function(i,n=R0.P){return r=>r.lift(new mC(i,n))}(0))}(i);return{task:i,then:i.then.bind(i),catch:i.catch.bind(i),pause:i.pause.bind(i),cancel:i.cancel.bind(i),resume:i.resume.bind(i),snapshotChanges:()=>n,percentageChanges:()=>n.pipe((0,nt.U)(r=>r.bytesTransferred/r.totalBytes*100))}}function Kw(i){return{getDownloadURL:()=>(0,je.of)(void 0).pipe(Ht.fc,fn(()=>i.getDownloadURL()),Ht.iC),getMetadata:()=>(0,je.of)(void 0).pipe(Ht.fc,fn(()=>i.getMetadata()),Ht.iC),delete:()=>(0,$t.D)(i.delete()),child:n=>Kw(i.child(n)),updateMetadata:n=>(0,$t.D)(i.updateMetadata(n)),put:(n,r)=>PR(i.put(n,r)),putString:(n,r,a)=>PR(i.putString(n,r,a)),listAll:()=>(0,$t.D)(i.listAll())}}!function(i){const n={TaskState:Pt,TaskEvent:pR,StringFormat:bi,Storage:RR,Reference:ru};i.INTERNAL.registerComponent(new $l.wA("storage-compat",jx,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),i.registerVersion("@firebase/storage-compat","0.1.3")}(Pi.Z);const Hx=new b.OlP("angularfire2.storageBucket"),Gx=new b.OlP("angularfire2.storage.maxUploadRetryTime"),s=new b.OlP("angularfire2.storage.maxOperationRetryTime"),o=new b.OlP("angularfire2.storage.use-emulator");let u=(()=>{class i{constructor(r,a,c,h,g,v,I,C,T){const A=(0,Ni.on)(r,g,a);this.storage=(0,Ht.cc)(`${A.name}.storage.${c}`,"AngularFireStorage",A.name,()=>{const O=g.runOutsideAngular(()=>A.storage(c||void 0)),M=T;return M&&O.useEmulator(...M),I&&O.setMaxUploadRetryTime(I),C&&O.setMaxOperationRetryTime(C),O},[I,C])}ref(r){return Kw(this.storage.ref(r))}refFromURL(r){return Kw(this.storage.refFromURL(r))}upload(r,a,c){return Kw(this.storage.ref(r)).put(a,c)}}return i.\u0275fac=function(r){return new(r||i)(b.LFG(Ni.Dh),b.LFG(Ni.xv,8),b.LFG(Hx,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(Ht.HU),b.LFG(Gx,8),b.LFG(s,8),b.LFG(o,8))},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),d=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({}),i})(),f=(()=>{class i{constructor(){hy.Z.registerVersion("angularfire",Ht.q4.full,"gcs-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({providers:[u],imports:[d]}),i})();const __firebaseConfig={apiKey:"AIzaSyDATiSbv3bcp_VDukjbWSILIpVFSW6_t-4",authDomain:"pp-lavoiv.firebaseapp.com",projectId:"pp-lavoiv",storageBucket:"pp-lavoiv.appspot.com",messagingSenderId:"711234699975",appId:"1:711234699975:web:311363ff429227fa4a34e2"};let E=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=b.oAB({type:i,bootstrap:[uT]}),i.\u0275inj=b.cJS({providers:[],imports:[[Cu,aT,Ni.hO.initializeApp(__firebaseConfig),_p,OA,f]]}),i})();(0,b.G48)(),By().bootstrapModule(E).catch(i=>console.error(i))},4762:(ke,de,P)=>{"use strict";function ue(Y,J){var te={};for(var X in Y)Object.prototype.hasOwnProperty.call(Y,X)&&J.indexOf(X)<0&&(te[X]=Y[X]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(X=Object.getOwnPropertySymbols(Y);ee<X.length;ee++)J.indexOf(X[ee])<0&&Object.prototype.propertyIsEnumerable.call(Y,X[ee])&&(te[X[ee]]=Y[X[ee]])}return te}function se(Y,J,te,X){return new(te||(te=Promise))(function(G,ve){function Fe(ot){try{He(X.next(ot))}catch(Lt){ve(Lt)}}function lt(ot){try{He(X.throw(ot))}catch(Lt){ve(Lt)}}function He(ot){ot.done?G(ot.value):function(G){return G instanceof te?G:new te(function(ve){ve(G)})}(ot.value).then(Fe,lt)}He((X=X.apply(Y,J||[])).next())})}function B(Y,J){var X,ee,G,ve,te={label:0,sent:function(){if(1&G[0])throw G[1];return G[1]},trys:[],ops:[]};return ve={next:Fe(0),throw:Fe(1),return:Fe(2)},"function"==typeof Symbol&&(ve[Symbol.iterator]=function(){return this}),ve;function Fe(He){return function(ot){return function(He){if(X)throw new TypeError("Generator is already executing.");for(;te;)try{if(X=1,ee&&(G=2&He[0]?ee.return:He[0]?ee.throw||((G=ee.return)&&G.call(ee),0):ee.next)&&!(G=G.call(ee,He[1])).done)return G;switch(ee=0,G&&(He=[2&He[0],G.value]),He[0]){case 0:case 1:G=He;break;case 4:return te.label++,{value:He[1],done:!1};case 5:te.label++,ee=He[1],He=[0];continue;case 7:He=te.ops.pop(),te.trys.pop();continue;default:if(!(G=(G=te.trys).length>0&&G[G.length-1])&&(6===He[0]||2===He[0])){te=0;continue}if(3===He[0]&&(!G||He[1]>G[0]&&He[1]<G[3])){te.label=He[1];break}if(6===He[0]&&te.label<G[1]){te.label=G[1],G=He;break}if(G&&te.label<G[2]){te.label=G[2],te.ops.push(He);break}G[2]&&te.ops.pop(),te.trys.pop();continue}He=J.call(Y,te)}catch(ot){He=[6,ot],ee=0}finally{X=G=0}if(5&He[0])throw He[1];return{value:He[0]?He[1]:void 0,done:!0}}([He,ot])}}}function $(Y){var J="function"==typeof Symbol&&Symbol.iterator,te=J&&Y[J],X=0;if(te)return te.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&X>=Y.length&&(Y=void 0),{value:Y&&Y[X++],done:!Y}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}function j(Y,J){var te="function"==typeof Symbol&&Y[Symbol.iterator];if(!te)return Y;var ee,ve,X=te.call(Y),G=[];try{for(;(void 0===J||J-- >0)&&!(ee=X.next()).done;)G.push(ee.value)}catch(Fe){ve={error:Fe}}finally{try{ee&&!ee.done&&(te=X.return)&&te.call(X)}finally{if(ve)throw ve.error}}return G}function K(Y,J,te){if(te||2===arguments.length)for(var G,X=0,ee=J.length;X<ee;X++)(G||!(X in J))&&(G||(G=Array.prototype.slice.call(J,0,X)),G[X]=J[X]);return Y.concat(G||Array.prototype.slice.call(J))}P.d(de,{_T:()=>ue,mG:()=>se,Jh:()=>B,XA:()=>$,CR:()=>j,ev:()=>K})},8239:(ke,de,P)=>{"use strict";function b(k,ue,oe,Q,ce,se,B){try{var x=k[se](B),N=x.value}catch($){return void oe($)}x.done?ue(N):Promise.resolve(N).then(Q,ce)}function W(k){return function(){var ue=this,oe=arguments;return new Promise(function(Q,ce){var se=k.apply(ue,oe);function B(N){b(se,Q,ce,B,x,"next",N)}function x(N){b(se,Q,ce,B,x,"throw",N)}B(void 0)})}}P.d(de,{Z:()=>W})}},ke=>{ke(ke.s=8497)}]);